(()=>{(()=>{var O={811:function(g,d){var i,k,w;(function(A,b){if(1)k=[d,g],i=b,w=typeof i=="function"?i.apply(d,k):i,w!==void 0&&(g.exports=w);else var h})(this,function(A,b){"use strict";var h={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function j(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function f(s){try{delete window[s]}catch{window[s]=void 0}}function I(s){var c=document.getElementById(s);c&&document.getElementsByTagName("head")[0].removeChild(c)}function $(s){var c=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],C=s,z=c.timeout||h.timeout,y=c.jsonpCallback||h.jsonpCallback,_=void 0;return new Promise(function(S,x){var m=c.jsonpCallbackFunction||j(),E=y+"_"+m;window[m]=function(W){S({ok:!0,json:function(){return Promise.resolve(W)}}),_&&clearTimeout(_),I(E),f(m)},C+=C.indexOf("?")===-1?"?":"&";var u=document.createElement("script");u.setAttribute("src",""+C+y+"="+m),c.charset&&u.setAttribute("charset",c.charset),c.nonce&&u.setAttribute("nonce",c.nonce),c.referrerPolicy&&u.setAttribute("referrerPolicy",c.referrerPolicy),c.crossorigin&&u.setAttribute("crossorigin","true"),u.id=E,document.getElementsByTagName("head")[0].appendChild(u),_=setTimeout(function(){x(new Error("JSONP request to "+s+" timed out")),f(m),I(E),window[m]=function(){f(m)}},z),u.onerror=function(){x(new Error("JSONP request to "+s+" failed")),f(m),I(E),_&&clearTimeout(_)}})}b.exports=$})}},M={};function F(g){var d=M[g];if(d!==void 0)return d.exports;var i=M[g]={exports:{}};return O[g].call(i.exports,i,i.exports,F),i.exports}var R={};(()=>{"use strict";function g(e,t){var r;try{var o=e.match(/(\d+)-(\d+)\.(?:png|jpg|gif)/)||["","0","0"],a=parseInt(o[1],10),p=parseInt(o[2],10);t?r=Math.floor(p*t/a):r=p}catch{r=0}return r}const d=g;function i(e,t){var r;try{var o=e.match(/(\d+)-(\d+)\.(?:png|jpg|gif)/)||["","0","0"],a=parseInt(o[1],10),p=parseInt(o[2],10);t?r=Math.floor(a*Number(t)/p):r=a}catch{r=0}return r}const k=i;function w(e,t,r,o,a){var p=[/\/\/sc0[1234]\.alicdn\.com/,/\/\/s\.alicdn\.com\/@sc0[1234]/,/\/\/(img|gw)\.alicdn\.com/,/\/\/s\.alicdn\.com\/@img/,/\/\/(ossgw)\.alicdn\.com/,/\/\/s\.alicdn\.com\/@ossgw/,/\/\/(u)\.alicdn\.com/],n=e?e.replace(/_\d+x\d+(xz)?(q\d+)?\.(png|jpg|jpeg)(_\.webp)?/,""):"";n=n.replace(/http(s?):/g,"");var B=!1;if(p.forEach(function(K){K.test(n)&&(B=!0)}),!B)return n;if(/\/\/(sc01|sc02|sc03|sc04|img|gw|ossgw|u)\.alicdn\.com/.test(n)){var P=n.match(/(sc01|sc02|sc03|sc04|img|gw|ossgw|u).alicdn.com/);if(P&&P.length>=2){var V=P[1]==="gw"?"img":P[1];n=n.replace(/(sc01|sc02|sc03|sc04|img|gw|ossgw|u).alicdn.com/,"s.alicdn.com/@".concat(V))}}var v=0;if(/\/\/s\.alicdn\.com\/@sc0[1234]/.test(n))v=t;else if(/\/\/s\.alicdn\.com\/@img/.test(n))v=o||t;else if(/\/\/s\.alicdn\.com\/@ossgw/.test(n)){if(/x-oss-process/.test(n))return n;var D=t&&o?Math.min(t,o):t||o;if(typeof D=="number"&&D>0)return"".concat(n).concat(n.indexOf("?")>0?"&":"?","x-oss-process=image/resize,l_").concat(D,",limit_1")}if(/.gif/.test(n))return n;var l="";if(v&&(l=v?"_".concat(v,"x").concat(v):""),r&&(l+=l?"xz":""),a&&(l+=l?"q".concat(a):"_q".concat(a)),n.indexOf("?")>-1){var J=n.indexOf("?");n=l?"".concat(n.substring(0,J)).concat(l,".jpg").concat(n.substring(J)):n}else n=l?"".concat(n).concat(l,".jpg"):n;return n}const A=w;function b(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.fileSize,o=t.tpsSize,a=t.xz,p=t.quality;return A(e,r,a,o,p)}const h=b;function j(e){return/^(https?:)?\/\/cloud\.video\.taobao\.com/.test(e)?e.replace(/\.taobao\.com/,".alibaba.com"):e}var f=function(e){var t=/[-a-zA-Z0-9@:%_+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_+.~#?&//=]*)?/gi,r=new RegExp(t);return!!(e&&e.match(r))},I=function(e){var t=f(e);return t?j(e):e?"//cloud.video.alibaba.com/play/u/242826731/p/e/6/t/1/d/sd/".concat(e,".mp4"):""},$=null,s=h,c=null,C=null;const z={parseImage:A,parseVideo:j,getVideoUrl:I,checkIsUrl:f,optimizeImage:h,getImageHeight:d,getImageWidth:k};function y(e,{size:t,quality:r}={}){return s(e,{fileSize:t,quality:r})}const _=function(){return/WindVane/i.test(window?.navigator?.userAgent)},S=function(){window?.$gourd?.callApp({hasInstall:!0,ck:"customize"})};function x(e,t){return new Promise((r,o)=>{const a=document.createElement("script");a.src=e,t?a.defer=!0:a.async=!0,a.onload=()=>{r()},a.onerror=()=>{o(new Error(`loadJsError:${e}`))},document.head.appendChild(a)})}const m={parseImage:y,isInApp:_,callApp:S,loadJs:x};var E=F(811);const u=()=>{const e=window.location.host.match(/(.*?).alibaba\.(.*?)$/);return e&&e.length>=3?e[2]:"com"};function W(){return fetch("//s.alicdn.com/@xconfig/icbu_marketing/popup/whitemap").then(e=>e.json())}function N({sceneCode:e,timeZone:t,bizData:r={}}){return fetchJsonp(`//ug.alibaba.${u()}/api/ags/incentive/getCreativeIncentive.json?sceneCode=${e}&timeZone=${t}&bizData=${JSON.stringify(r)}`).then(o=>o.json()).then(o=>(console.log("\u5F02\u6B65\u6E32\u67D3\u8425\u9500\u6C1B\u56F4\u6570\u636E",o),o))}function U(e,t){return new Promise((r,o)=>{const a=document.createElement("script");a.src=e,t?a.defer=!0:a.async=!0,a.onload=()=>{r()},a.onerror=()=>{o(new Error(`loadJsError:${e}`))},document.head.appendChild(a)})}function T(){const e="1.0.11";return fetch("//s.alicdn.com/@xconfig/icbu_marketing/popup/render_version").then(t=>t.json()).then(({renderVersion:t=e})=>t).catch(()=>e)}function H(){const e=document?.querySelector('meta[name="data-spm"]')?.getAttribute("content")||"a2706",t=document?.body?.dataset?.spm;return`${e}.${t}`}function q(){if(window.IcbuMarketingSDK)return;const e=[];window.IcbuMarketingSDK={render:t=>{e.push(t)}},T().then(t=>{x(`https://s.alicdn.com/@g/sc/icbu-marketing/${t}/render.js`).then(()=>{for(;e.length>0;){const r=e.shift();window.IcbuMarketingSDK.render(r)}})})}q()})()})();})();
