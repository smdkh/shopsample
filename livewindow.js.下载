!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="//g.alicdn.com/alimsc/cdn-msite-detail-live/0.0.5/",n(n.s=89)}([function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return r}))},function(e,t,n){e.exports=n(39)},function(e,t){function n(){return e.exports=n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(this,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.FullBox=t.Box=void 0;var a=new Date("1904-01-01T00:00:00Z").getTime(),s=function(){function e(e){this.children=[],this.isContainer=!1,this.toStandardTime=function(e){return e?a+1e3*e:e},this.header=e}return e.prototype.append=function(e){this.children.push(e)},e.mapBoxToJSON=function(t){return o({box:t},t.children.reduce((function(t,n){var r=n.header.type,i=t[r],o=e.mapBoxToJSON(n);return i?Array.isArray(i)?i.push(o):t[r]=[i,o]:t[r]=o,t}),{}))},e}();t.Box=s;var c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.version=n.read(1),r.flag=n.read(3),r}return i(t,e),t}(s);t.FullBox=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{$tracker:function(){return a.$tracker},$i18n:function(){return a.$i18n},$emitter:function(){return a.$emitter},$perf:function(){return a.$perf},$hook:function(){return a.$hook},version:function(){return a.version},$call:function(){return a.$call},$noop:function(){return a.$noop},$fetch:function(){return a.$fetch},$plugin:function(){return u},$adapter:function(){return d},$env:function(){return l},$helper:function(){return p},$logger:function(){return f},default:function(){return h}});var r=n(40),i=n(6),o=n(9),a=r._(n(49)),s=n(45),c=o._(i._({},a),{$adapter:(0,s._setPropertyWritable)(a.$adapter),$env:(0,s._setPropertyWritable)(a.$env),$helper:(0,s._setPropertyWritable)(a.$helper),$logger:(0,s._setPropertyWritable)(a.$logger),pluginList:s._pluginList});a.$env.is.web&&(window.lib=window.lib||{},window.lib.Redfox3=window.lib.Redfox=c,window.lib.Redfox3.pluginList=s._pluginList);var u={registerPlugin:(0,s.getRegisterFunction)(c),isPluginAvailable:s.isPluginAvailable},d=c.$adapter,l=c.$env,p=c.$helper,f=c.$logger,h=c},function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return d}));var r=n(22),i=n(23),o=n(4);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(){return r.a===i.a.DEV},c=function(){return s(),"live-portal"},u={commonParam:{},init:function(){var e=this;o.$env.user.getUserInfo((function(t){e.commonParam=t}))},click:function(e,t){void 0===t&&(t={}),o.$logger.click("/sc.live_window.ctrl",a({action:e,scene:"pcsite"},this.commonParam,{ext:t}))},expose:function(e,t){void 0===t&&(t={}),o.$logger.expose("/sc.live_window.ctrl",a({action:e,scene:"pcsite"},this.commonParam,{ext:t}))}};function d(e){return e&&e.startsWith("http://")?e.replaceAll("http://","https://"):e}},function(e,t,n){"use strict";n.r(t),n.d(t,"_object_spread",(function(){return i})),n.d(t,"_",(function(){return i}));var r=n(0);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Object(r.b)(e,t,n[t])}))}return e}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxContainer=void 0;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContainer=!0,t}return i(t,e),t}(n(3).Box);t.BoxContainer=o},function(e,t,n){"use strict";(function(e){function r(e){return"undefined"===e}n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s}));var i=!r(typeof window)&&"onload"in window,o=!r(typeof e)&&!(!e.versions||!e.versions.node),a=function(){var e,t,n=i&&window.navigator.userAgent;return o&&"undefined"!=typeof alibaba_ssr_env&&(null===(e=alibaba_ssr_env)||void 0===e?void 0:e.request_headers)&&(null===(t=alibaba_ssr_env)||void 0===t?void 0:t.request_headers["user-agent"])||n||""},s=/WindVane/i.test(a()),c=function(){var e=a(),t=e;return/iPhone|iPad|iPod/i.test(e)&&(t="iOS"),/Android/i.test(e)&&(t="Android"),t},u={get notch(){var e=window.screen,t=e.height,n=e.width;return this.iOS&&375==n&&812==t},windVane:s,get android(){var e=c();return/Android/i.test(e)},get iOS(){var e=c();return/iOS/i.test(e)},get pc(){return this.web&&!this.android&&!this.iOS},get AliBuyer(){return/AliApp\((EA|Alibaba)/.test(a())},get AliSeller(){return/AliApp\((AliSupplier|QN|AS)/.test(a())},node:o,web:i,get app(){return this.windVane}};t.a={is:u}}).call(this,n(18))},function(e,t,n){"use strict";function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}n.r(t),n.d(t,"_object_spread_props",(function(){return r})),n.d(t,"_",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BitBuffer=void 0;var r=function(){function e(e,t){this.num=e,this.len=t,this.offset=0}return e.fromByte=function(t,n){return new e(t.read(n),n<<3)},e.prototype.skip=function(e){this.offset+=e},e.prototype.read=function(e){var t=this.len-this.offset-e;if(t>=0){for(var n=0,r=0;r<e;r++)n+=1<<r;return this.offset+=e,this.num>>>t&n}return console.warn("bit \u8bfb\u53d6\u4f4d\u6570\u8d85\u8fc7\u9650\u5236"),0},e}();t.BitBuffer=r},function(e,t,n){e.exports=n(43)},function(e,t,n){(function(t){var n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/,i=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=/^\[object .+?Constructor\]$/,c="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,d=c||u||Function("return this")();var l,p=Array.prototype,f=Function.prototype,h=Object.prototype,_=d["__core-js_shared__"],v=(l=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",m=f.toString,g=h.hasOwnProperty,E=h.toString,y=RegExp("^"+m.call(g).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=d.Symbol,S=p.splice,T=x(d,"Map"),w=x(Object,"create"),R=b?b.prototype:void 0,C=R?R.toString:void 0;function O(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function A(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function k(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function N(e,t){for(var i,o=0,a=(t=function(e,t){if(j(e))return!1;var i=typeof e;if("number"==i||"symbol"==i||"boolean"==i||null==e||B(e))return!0;return r.test(e)||!n.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:j(i=t)?i:L(i)).length;null!=e&&o<a;)e=e[M(t[o++])];return o&&o==a?e:void 0}function P(e){return!(!V(e)||(t=e,v&&v in t))&&(function(e){var t=V(e)?E.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?y:s).test(function(e){if(null!=e){try{return m.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function D(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function x(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return P(n)?n:void 0}O.prototype.clear=function(){this.__data__=w?w(null):{}},O.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},O.prototype.get=function(e){var t=this.__data__;if(w){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return g.call(t,e)?t[e]:void 0},O.prototype.has=function(e){var t=this.__data__;return w?void 0!==t[e]:g.call(t,e)},O.prototype.set=function(e,t){return this.__data__[e]=w&&void 0===t?"__lodash_hash_undefined__":t,this},A.prototype.clear=function(){this.__data__=[]},A.prototype.delete=function(e){var t=this.__data__,n=k(t,e);return!(n<0)&&(n==t.length-1?t.pop():S.call(t,n,1),!0)},A.prototype.get=function(e){var t=this.__data__,n=k(t,e);return n<0?void 0:t[n][1]},A.prototype.has=function(e){return k(this.__data__,e)>-1},A.prototype.set=function(e,t){var n=this.__data__,r=k(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},I.prototype.clear=function(){this.__data__={hash:new O,map:new(T||A),string:new O}},I.prototype.delete=function(e){return D(this,e).delete(e)},I.prototype.get=function(e){return D(this,e).get(e)},I.prototype.has=function(e){return D(this,e).has(e)},I.prototype.set=function(e,t){return D(this,e).set(e,t),this};var L=U((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(B(e))return C?C.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return i.test(e)&&n.push(""),e.replace(o,(function(e,t,r,i){n.push(r?i.replace(a,"$1"):t||e)})),n}));function M(e){if("string"==typeof e||B(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function U(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(U.Cache||I),n}U.Cache=I;var j=Array.isArray;function V(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function B(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==E.call(e)}e.exports=function(e,t,n){var r=null==e?void 0:N(e,t);return void 0===r?n:r}}).call(this,n(15))},function(e,t,n){"use strict";(function(e,r){n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var i="undefined"!=typeof window&&"onload"in window,o=(void 0!==e&&(!e.versions||e.versions.node),"undefined"!=typeof WXEnvironment&&"Web"!==WXEnvironment.platform),a="undefined"!=typeof my&&null!==my&&void 0!==my.alert,s="undefined"!=typeof tt&&null!==tt&&void 0!==tt.showToast,c=("undefined"!=typeof swan&&null!==swan&&swan.showToast,"undefined"!=typeof ks&&null!==ks&&ks.showToast,!s&&"undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||wx.miniProgram),null!=r&&r.callNative,a&&i&&my.isFRM,"object"==typeof navigator?navigator.userAgent||navigator.swuserAgent:"");/.+AliApp\((\w+)\/((?:\d+\.)+\d+)\).* .*(WindVane)(?:\/((?:\d+\.)+\d+))?.*/.test(c)&&i&&"undefined"!=typeof WindVane&&WindVane.call}).call(this,n(18),n(15))},function(e,t,n){var r=n(41)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t){(function(t){e.exports=function(){var e={33:function(e){var t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t}},n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={exports:{}},o=!0;try{e[t](i,i.exports,r),o=!1}finally{o&&delete n[t]}return i.exports}return r.ab=t+"/",r(33)}()}).call(this,"/")},function(e,t,n){"use strict";var r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.EDiscardType=t.EErrorCode=t.ESampleFlag=t.CTrackTypeMap=t.ETrackType=t.EFormatType=t.EHandlerType=void 0,function(e){e.VIDE="vide",e.SOUN="soun"}(i=t.EHandlerType||(t.EHandlerType={})),function(e){e.FLV="flv",e.MP4="mp4",e.HLS="hls",e.AVI="avi",e.MPEGTS="mpegts",e.UNKNOWN="unknown"}(t.EFormatType||(t.EFormatType={})),function(e){e.UNKNOWN="unknown",e.VIDEO="video",e.AUDIO="audio"}(o=t.ETrackType||(t.ETrackType={})),t.CTrackTypeMap=((r={})[i.VIDE]=o.VIDEO,r[i.SOUN]=o.AUDIO,r),function(e){e[e.DEGRADATION_PRIORITY_MASK=65535]="DEGRADATION_PRIORITY_MASK",e[e.IS_NON_SYNC=65536]="IS_NON_SYNC",e[e.PADDING_MASK=917504]="PADDING_MASK",e[e.REDUNDANCY_MASK=3145728]="REDUNDANCY_MASK",e[e.DEPENDED_MASK=12582912]="DEPENDED_MASK",e[e.DEPENDS_MASK=50331648]="DEPENDS_MASK",e[e.DEPENDS_NO=33554432]="DEPENDS_NO",e[e.DEPENDS_YES=16777216]="DEPENDS_YES"}(t.ESampleFlag||(t.ESampleFlag={})),function(e){e[e.ABORTED=1]="ABORTED",e[e.NETWORK=2]="NETWORK",e[e.DECODE=3]="DECODE",e[e.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",e[e.PARSER=1001]="PARSER",e[e.COROUTINE=10001]="COROUTINE",e[e.WEBGL_NOT_SUPPORTED=10002]="WEBGL_NOT_SUPPORTED",e[e.BUFFERING=10004]="BUFFERING",e[e.RENDERER=10005]="RENDERER"}(t.EErrorCode||(t.EErrorCode={})),function(e){e[e.NONE=-16]="NONE",e[e.DEFAULT=0]="DEFAULT",e[e.NONREF=8]="NONREF",e[e.BIDIR=16]="BIDIR",e[e.NONINTRA=24]="NONINTRA",e[e.NONKEY=32]="NONKEY",e[e.ALL=48]="ALL"}(t.EDiscardType||(t.EDiscardType={}))},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],d=!1,l=-1;function p(){d&&c&&(d=!1,c.length?u=c.concat(u):l=-1,u.length&&f())}function f(){if(!d){var e=s(p);d=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function _(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||d||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(){return[]},i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ByteBuffer=void 0;var r=function(){function e(e,t,n){this.dv=new DataView(e),this.start=this.offset=t||this.dv.byteOffset,this.end=n?this.start+n:this.dv.byteLength}return e.fromUint8=function(t){return new e(t.buffer,t.byteOffset,t.byteLength)},e.concatUint8s=function(e){return this.concatUint8.apply(this,e)},e.concatUint8=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length<=1)return e[0]||new Uint8Array(0);var n=new Uint8Array(e.reduce((function(e,t){return e+t.byteLength}),0)),r=0;return e.forEach((function(e){n.set(e,r),r+=e.byteLength})),n},e.concat=function(t,n){return e.concatUint8(new Uint8Array(t),new Uint8Array(n)).buffer},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.dv.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unreadLength",{get:function(){return Math.max(this.end-this.offset,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),e.prototype.readFloat=function(e){var t=0;switch(e){case 4:t=this.dv.getFloat32(this.offset);break;case 8:t=this.dv.getFloat64(this.offset);break;default:throw new Error("not supported for read float byte with "+e)}return this.offset+=e,t},e.prototype.back=function(e){this.offset-=e},e.prototype.skip=function(e){this.offset+=e},e.prototype.readInt=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getInt8(t);case 2:return this.dv.getInt16(t);case 4:return this.dv.getInt32(t);default:throw new Error("not supported for read byte with "+e)}},e.prototype.readString=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.dv.getUint8(this.offset)),this.offset++;return t},e.prototype.readLE=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t,!0);case 3:return this.dv.getUint16(t,!0)+this.dv.getUint8(t+2)<<16;case 4:return this.dv.getUint32(t,!0);default:return this.read(e-4)+this.dv.getUint32(t,!0)*Math.pow(256,e-4)}},e.prototype.read=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t);case 3:return(this.dv.getUint16(t)<<8)+this.dv.getUint8(t+2);case 4:return this.dv.getUint32(t);default:return this.back(e-4),this.read(e-4)+this.dv.getUint32(t)*Math.pow(256,e-4)}},e.prototype.writeInt=function(e,t){var n=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setInt8(n,t);case 2:return this.dv.setInt16(n,t);case 3:return this.dv.setInt8(n,t>>16),this.dv.setInt16(n+1,65535&t);case 4:return this.dv.setInt32(n,t);default:throw new Error("Byte write is not supported, byteLength:"+e)}},e.prototype.write=function(e,t){var n=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setUint8(n,t);case 2:return this.dv.setUint16(n,t);case 3:return this.dv.setUint8(n,t>>>16),this.dv.setUint16(n+1,65535&t);case 4:return this.dv.setUint32(n,t);default:throw new Error("Byte write is not supported, byteLength"+e)}},e.prototype.readToUint8=function(e){var t=new Uint8Array(this.dv.buffer,this.offset,e||this.unreadLength);return this.offset+=t.byteLength,t},e.prototype.readToBuffer=function(e){var t;return t=this.offset||e?this.dv.buffer.slice(this.offset,e?this.offset+e:void 0):this.dv.buffer,this.offset+=t.byteLength,t},e.prototype.clone=function(){return new e(this.dv.buffer,this.offset,this.end-this.offset)},e}();t.ByteBuffer=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var r=n(51);t.logger=new r.Logger("format")},function(e,t,n){"use strict";n.r(t);var r=n(52);n.d(t,"EventEmitter",(function(){return r})),t.default=r},function(e,t,n){"use strict";(function(e){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return a}));var i={default:{}},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},a=(r({},i.default||{},i[o.__app_mode__||"production"]||{}),o.__app_mode__||"production")}).call(this,n(15))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r={DEV:"development",PROD:"production"},i=1e3},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,c,"next",e)}function c(e){n(a,i,o,s,c,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=function(){function e(){}return e.createAnnexbStartCode=function(){return new Uint8Array([0,0,0,1])},e.createAVCCStartCode=function(e){return new Uint8Array([e>>24&255,e>>16&255,e>>8&255,255&e])},e.extractAVCCNAL=function(e,t){for(var n,i=[],o=new r.ByteBuffer(e.buffer,e.byteOffset,e.byteLength);o.unreadLength>t;){if((n=o.read(t+1))<=0||n>o.unreadLength){console.warn("extract avc nalu size wrong! lengthSizeMinusOne:",t,"size:",n);break}var a=o.offset-o.start;i.push(e.subarray(a,a+n)),o.skip(n)}return i},e.extractAnnexbNAL=function(e){for(var t=e.byteLength,n=[],r=0;r<t-3;)0===e[r]?0===e[r+1]?0===e[r+2]?0===e[r+3]?r++:1===e[r+3]&&r+4<t?(n.push({prefixStart:r,start:r+4}),r+=4):r+=4:1===e[r+2]?(n.push({prefixStart:r,start:r+3}),r+=3):r+=3:r+=2:r++;return n.length?n.map((function(t,r){var i=n[r+1];return i?e.subarray(t.start,i.prefixStart):e.subarray(t.start)})):[]},e}();t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.proxyEvent=t.stringToUint8Array=t.logBit=t.toHex=t.patch=t.getRotate=t.noop=void 0;var i=r(n(35));t.noop=function(){};t.getRotate=function(e){if(e.length<5)return 0;var t=Math.hypot(e[0],e[3]),n=Math.hypot(e[1],e[4]);return 0===t||0===n?0:180*Math.atan2(e[1]/n,e[0]/t)/Math.PI},t.patch=function(e,t){var n=!1;return Object.keys(t).forEach((function(r){(0,i.default)(e[r],t[r])||(e[r]=t[r],n=!0)})),n};t.toHex=function(e){var t=e.toString(16);return t.length<2?"0"+t:t};t.logBit=function(e){console.log("bit",Array.from(new Uint8Array(e)).map((function(e){var t=e.toString(2);return"0".repeat(8-t.length)+t})))};t.stringToUint8Array=function(e){return new Uint8Array(e.length).map((function(t,n){return e.charCodeAt(n)}))},t.proxyEvent=function(e,t,n,r){n.forEach((function(n){e[r||"on"](n,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.unshift(n),t.emit.apply(t,e)}))}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var o=n(165),a=n(166);t.Loader=o.FetchLoader.isSupported()?o.FetchLoader:a.XHRLoader,i(n(48),t)},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"setTagNamePrefix",(function(){return I})),n.d(r,"createBody",(function(){return k})),n.d(r,"createEmpty",(function(){return N})),n.d(r,"createText",(function(){return P})),n.d(r,"updateText",(function(){return D})),n.d(r,"createElement",(function(){return L})),n.d(r,"appendChild",(function(){return M})),n.d(r,"removeChild",(function(){return U})),n.d(r,"replaceChild",(function(){return j})),n.d(r,"insertAfter",(function(){return V})),n.d(r,"insertBefore",(function(){return B})),n.d(r,"addEventListener",(function(){return F})),n.d(r,"removeEventListener",(function(){return W})),n.d(r,"removeAttribute",(function(){return G})),n.d(r,"setAttribute",(function(){return H})),n.d(r,"setStyle",(function(){return z})),n.d(r,"beforeRender",(function(){return K})),n.d(r,"afterRender",(function(){return Y})),n.d(r,"removeChildren",(function(){return q})),n.d(r,"setViewportWidth",(function(){return v})),n.d(r,"setUnitPrecision",(function(){return m}));var i,o,a=n(2),s=n.n(a),c=/"[^"]+"|'[^']+'|url\([^\)]+\)|(\d*\.?\d+)rpx/g,u="web",d=4,l=function(e,t){return t?parseFloat(e)*h()+"px":e},p=function(e,t){return t?(n=parseFloat(e)/(_()/100),r=d,i=Math.pow(10,r+1),o=Math.floor(n*i),10*Math.round(o/10)/i+"vw"):e;var n,r,i,o};void 0===h()&&(i=1),void 0===_()&&v(750);var f=function(){function e(){this.__store={}}var t=e.prototype;return t.set=function(e,t){this.__store[e+"_"+typeof e]=t},t.get=function(e){return this.__store[e+"_"+typeof e]},t.has=function(e){return Object.prototype.hasOwnProperty.call(this.__store,e+"_"+typeof e)},e}();function h(){return i}function _(){return o}function v(e){o=e}function m(e){d=e}function g(e){var t=new f;return function(){var n=arguments.length<=0?void 0:arguments[0];return t.has(n)||t.set(n,e.apply(void 0,arguments)),t.get(n)}}var E=g((function(e,t,n){return n&&function(e){u=e}(n),"string"==typeof(r=e)&&c.test(r)?function(e){return"web"===u||"node"===u?e.replace(c,p):"weex"===u?e.replace(c,l):e}(e):e;var r}));var y=/opa|ntw|ne[ch]|ex(?:s|g|n|p|$)|^ord|zoo|grid|orp|ows|mnc|^columns$|bs|erim|onit/i,b=/^on[A-Z]/,S="http://www.w3.org/2000/svg",T="",w=!1,R=!1,C=g((function(e){return e.replace(/-([a-z])/gi,(function(e,t){return t.toUpperCase()}))})),O=g((function(e){return!y.test(e)})),A=g((function(e){return b.test(e)}));function I(e){T=e}function k(){return document.body}function N(e){var t,n=e._parent;if(R){var r=x(n);if(r){if(8===r.nodeType)return r;j(t=document.createComment(""),r,n)}else(t=document.createComment("")).__a=!0}else t=document.createComment("");return t}function P(e,t){var n,r=t._parent;if(R){var i=x(r);if(i){if(3===i.nodeType)return e!==i.textContent&&(i.textContent=e),i;j(n=document.createTextNode(e),i,r)}else(n=document.createTextNode(e)).__a=!0}else n=document.createTextNode(e);return n}function D(e,t){e.textContent=t}function x(e){var t=e.childNodes;null==e.__i&&(e.__i=0);var n=t[e.__i++];return n&&8===n.nodeType&&"|"===n.data?t[e.__i++]:n}function L(e,t,n,r){var i,o=n._parent;w="svg"===e||o&&o.namespaceURI===S;var a=null;function s(){if(w)i=document.createElementNS(S,e);else if(T){var t="function"==typeof t?t(e):t;i=document.createElement(t+e)}else i=document.createElement(e)}if(R)if(a=x(o))if(e===a.nodeName.toLowerCase()){for(var c=a.attributes,u=c.length;u--;){var d=c[u].name,l=t[d];if("class"===d&&null==t.className&&null==l||"style"===d&&(null==l||0===Object.keys(l).length)||"class"!==d&&"style"!==d&&null==l)a.removeAttribute(d);else if("style"===d)for(var p=a.style.length;0<p;p--){var f=a.style[p-1];if(f){var h=C(f);null==l[h]&&(a.style[h]="")}}}i=a}else s(),j(i,a,o);else s(),i.__a=!0;else s();for(var _ in t){var v=t[_];"children"!==_&&(null!=v&&("style"===_?z(i,v,r):A(_)?F(i,_.slice(2).toLowerCase(),v):H(i,_,v,w)))}return i}function M(e,t){if(!R||e.__a)return t.appendChild(e)}function U(e,t){(t=t||e.parentNode)&&t.removeChild(e)}function j(e,t,n){(n=n||t.parentNode).replaceChild(e,t)}function V(e,t,n){n=n||t.parentNode;var r=t.nextSibling;r?r!==e&&B(e,r,n):M(e,n)}function B(e,t,n){(n=n||t.parentNode).insertBefore(e,t)}function F(e,t,n){return e.addEventListener(t,n)}function W(e,t,n){return e.removeEventListener(t,n)}function G(e,t){if("dangerouslySetInnerHTML"===t)return e.innerHTML=null;if("className"===t&&(t="class"),t in e)try{e[t]=null}catch(e){}e.removeAttribute(t)}function H(e,t,n,r){if("dangerouslySetInnerHTML"===t)return e.innerHTML!==n.__html&&(e.innerHTML=n.__html),void(e.__h=!0);if("className"===t&&(t="class"),!r&&t in e)try{e[t]=n}catch(r){e.setAttribute(t,n)}else e.setAttribute(t,n)}function z(e,t,n){for(var r in t){var i=t[r],o=void 0;o="number"==typeof i&&O(r)?n?E(o=i+"rpx"):i+"px":E(i),"-"===r[0]&&"-"===r[1]?e.style.setProperty(r,o):e.style[r]=o}}function K(e){var t=e.hydrate;if(R&&!t)throw new Error("Nested render found.");R=t}function Y(e){var t=e.container;R&&(!function e(t){if(!t.__h){var n=t.childNodes.length,r=t.__i||0;if(n-r>0)for(var i=n-1;i>=r;i--)t.removeChild(t.childNodes[i]);for(var o=t.childNodes.length-1;o>=0;o--)e(t.childNodes[o])}}(t),R=!1)}function q(e){e.textContent=""}t.a=s()({},r,{createElement:function(e,t,n){return L(e,t,n,!0)},setStyle:function(e,t){return z(e,t,!0)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(30))&&r.__esModule?r:{default:r};for(var o=[],a=0;a<256;++a)o.push((a+256).toString(16).substr(1));var s=function(e,t){void 0===t&&(t=0);var n=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!(0,i.default)(n))throw TypeError("Stringified UUID is invalid");return n};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(154))&&r.__esModule?r:{default:r};var o=function(e){return"string"==typeof e&&i.default.test(e)};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeEPB=void 0;t.removeEPB=function(e){for(var t=e.byteLength,n=[],r=1;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(r+=2,n.push(r)):r++;if(0===n.length)return e;var i=t-n.length,o=new Uint8Array(i),a=0;for(r=0;r<i;a++,r++)a===n[0]&&(a++,n.shift()),o[r]=e[a];return o}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.H265NAL=t.EH265NALType=void 0;var a,s=n(10),c=o(n(25));!function(e){e[e.TRAIL_N=0]="TRAIL_N",e[e.TRAIL_R=1]="TRAIL_R",e[e.TSA_N=2]="TSA_N",e[e.TSA_R=3]="TSA_R",e[e.STSA_N=4]="STSA_N",e[e.STSA_R=5]="STSA_R",e[e.RADL_N=6]="RADL_N",e[e.RADL_R=7]="RADL_R",e[e.RASL_N=8]="RASL_N",e[e.RASL_R=9]="RASL_R",e[e.VCL_N10=10]="VCL_N10",e[e.VCL_R11=11]="VCL_R11",e[e.VCL_N12=12]="VCL_N12",e[e.VCL_R13=13]="VCL_R13",e[e.VCL_N14=14]="VCL_N14",e[e.VCL_R15=15]="VCL_R15",e[e.BLA_W_LP=16]="BLA_W_LP",e[e.BLA_W_RADL=17]="BLA_W_RADL",e[e.BLA_N_LP=18]="BLA_N_LP",e[e.IDR_W_RADL=19]="IDR_W_RADL",e[e.IDR_N_LP=20]="IDR_N_LP",e[e.CRA=21]="CRA",e[e.VPS=32]="VPS",e[e.SPS=33]="SPS",e[e.PPS=34]="PPS",e[e.ACCESS_UNIT_DELIMITER=35]="ACCESS_UNIT_DELIMITER",e[e.EOS=36]="EOS",e[e.EOB=37]="EOB",e[e.FILLER_DATA=38]="FILLER_DATA",e[e.SEI=39]="SEI",e[e.SEI_SUFFIX=40]="SEI_SUFFIX",e[e.INVALID=64]="INVALID"}(a=t.EH265NALType||(t.EH265NALType={}));var u=function(e){function t(t){var n=e.call(this)||this,r=new s.BitBuffer(t.read(2),16);return n.forbiddenZeroBit=r.read(1),n.nalType=r.read(6),n.nhLayerId=r.read(6),n.nhTimeId=r.read(3),n}return i(t,e),t.extractNALType=function(e,t){return void 0===t&&(t=0),(126&e[t])>>1},t.isNonRefNALType=function(e){switch(e){case a.TRAIL_N:case a.STSA_N:case a.RADL_N:case a.RASL_N:case a.VCL_N10:case a.VCL_N12:case a.VCL_N14:return!0;default:return!1}},t.isNonRef=function(e){return this.isNonRefNALType(this.extractNALType(e))},t.isSlice=function(e){var t=this.extractNALType(e);return t>=a.TRAIL_N&&t<=a.CRA},t}(c.default);t.H265NAL=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HevcSPS=t.AvcSPS=void 0;var r=n(26),i=n(164),o=[100,110,122,244,44,83,86,118,128,138,144],a=[[0,1],[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]],s=function(){function e(t){this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibility=0,this.crop=0,this.cropLeft=0,this.cropRight=0,this.cropTop=0,this.cropBottom=0,this.pixelRatio=[],this.codec="";var n,r,s=new i.ExpGolomb(t);if(this.generalProfileIdc=s.readUByte(),this.generalProfileCompatibility=s.readUByte(),this.generalLevelIdc=s.readUByte(),this.spsId=s.readUEG(),this.codec=e.generateCodec(this),o.indexOf(this.generalProfileIdc)>-1){if(this.chromaFormatIdc=s.readUEG(),3===this.chromaFormatIdc&&s.skipBits(1),s.skipUEG(),s.skipUEG(),s.skipBits(1),s.readBits(1))for(n=0,r=3!==this.chromaFormatIdc?8:12;n<r;n++)s.readBits(1)&&(n<6?s.skipScalingList(16):s.skipScalingList(64))}else this.chromaFormatIdc=1;s.skipUEG();var c=s.readUEG();if(0===c)s.skipUEG();else if(1===c)for(s.skipBits(1),s.skipEG(),s.skipEG(),n=0,r=s.readUEG();n<r;n++)s.skipEG();s.skipUEG(),s.skipBits(1);var u=s.readUEG()+1,d=s.readUEG()+1,l=s.readBits(1);if(l||s.skipBits(1),this.height=d*(2-l),s.skipBits(1),this.crop=s.readBits(1),this.crop){var p=1<<(1===this.chromaFormatIdc||2===this.chromaFormatIdc?1:0),f=2-l<<(1===this.chromaFormatIdc?1:0);this.cropLeft=s.readUEG()*p,this.cropRight=s.readUEG()*p,this.cropTop=s.readUEG()*f,this.cropBottom=s.readUEG()*f}if(this.width=16*u-(this.cropRight+this.cropLeft),this.height=16*d-(this.cropTop+this.cropBottom),s.readBits(1)&&s.readBits(1)){var h=s.readUByte();255===h?(this.pixelRatio[0]=s.readUByte()<<8|s.readUByte(),this.pixelRatio[1]=s.readUByte()<<8|s.readUByte()):h<a.length&&(this.pixelRatio=a[h])}}return e.generateCodec=function(e){return"avc1."+[e.generalProfileIdc,e.generalProfileCompatibility,e.generalLevelIdc].map((function(e){return(0,r.toHex)(e)})).join("")},e}();t.AvcSPS=s;var c=[1,2,2,1],u=[1,2,1,1],d=function(){function e(t){var n=this;this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibilityFlags=[],this.generalConstraintIndicatorFlags=[],this.subLayerProfilePresentFlags=[],this.subLayerLevelPresentFlags=[],this.separateColourPlaneFlag=0,this.pixelRatio=[],this.codec="",this.checkProfileIdc=function(e){return n.generalProfileIdc===e||n.generalProfileCompatibilityFlags[e]};var r,o=new i.ExpGolomb(t);for(this.vpsId=o.readBits(4),this.maxSubLayersMinus1=o.readBits(3),this.temporalIdNestingFlag=o.readBits(1),this.generalProfileSpace=o.readBits(2),this.generalTierFlag=o.readBits(1),this.generalProfileIdc=o.readBits(5),r=0;r<32;r++)this.generalProfileCompatibilityFlags[r]=o.readBits(1),0===this.generalProfileIdc&&r>0&&this.generalProfileCompatibilityFlags[r]&&(this.generalProfileIdc=r);for(r=0;r<6;r++)this.generalConstraintIndicatorFlags.push(o.readUByte());for(this.generalLevelIdc=o.readUByte(),r=0;r<this.maxSubLayersMinus1;r++)this.subLayerProfilePresentFlags[r]=o.readBits(1),this.subLayerLevelPresentFlags[r]=o.readBits(1);for(this.maxSubLayersMinus1>0&&o.skipBits(2*(8-this.maxSubLayersMinus1)),r=0;r<this.maxSubLayersMinus1;r++)this.subLayerProfilePresentFlags[r]&&o.skipBits(48),this.subLayerLevelPresentFlags[r]&&o.readUByte();if(this.spsId=o.readUEG(),this.codec=e.generateCodec(this),this.chromaFormatIdc=o.readUEG(),3===this.chromaFormatIdc&&(this.separateColourPlaneFlag=o.readBits(1)),this.separateColourPlaneFlag&&(this.chromaFormatIdc=0),this.width=o.readUEG(),this.height=o.readUEG(),o.readBits(1)){var a=c[this.chromaFormatIdc],s=u[this.chromaFormatIdc],d=o.readUEG()*a,l=o.readUEG()*a,p=o.readUEG()*s,f=o.readUEG()*s;this.width-=d+l,this.height-=p+f}}return e.generateCodec=function(e){var t=["hvc1"],n=e.generalProfileSpace;t.push((n>0&&n<4?String.fromCharCode(64+n):"")+e.generalProfileIdc.toString()),t.push(e.generalProfileCompatibilityFlags.reverse().reduce((function(e,t){return e<<1|t}),0).toString(16)),t.push((e.generalTierFlag?"H":"L")+e.generalLevelIdc);for(var r=!1,i=[],o=5;o>=0;o--){var a=e.generalConstraintIndicatorFlags[o];(a||r)&&(i.unshift(a.toString(16)),r=!0)}return t.concat(i).join(".")},e}();t.HevcSPS=d},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasicParser=void 0;var a=o(n(21)),s=n(27),c=n(16),u=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.skipFrame=c.EDiscardType.DEFAULT,n.metadata=null,n.options=t||{},n.onProgress=n.onProgress.bind(n),n.onLoadEnd=n.onLoadEnd.bind(n),n.originLoader=new s.Loader(n.options),n.originLoader.on("progress",n.onProgress),n.originLoader.on("loadend",n.onLoadEnd),n.skipFrame=t.skipFrame||c.EDiscardType.DEFAULT,n}return i(t,e),Object.defineProperty(t.prototype,"loader",{get:function(){return this.customLoader||this.originLoader},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.loader.status},enumerable:!1,configurable:!0}),t.prototype.setLoader=function(e){this.customLoader&&(this.customLoader.off("progress",this.onProgress),this.customLoader.off("loadend",this.onLoadEnd)),e&&(e.on("progress",this.onProgress),e.on("loadend",this.onLoadEnd)),this.customLoader=e},t.prototype.load=function(e){return this.reset(),this.loader.load(e)},t.prototype.suspend=function(){return this.loader.suspend()},t.prototype.resume=function(){return this.loader.resume()},t.prototype.reset=function(){this.loader.reset(),this.metadata=null},t.prototype.destroy=function(){this.reset(),this.customLoader=void 0,this.originLoader.removeAllListeners(),this.loader.off("progress",this.onProgress),this.loader.off("loadend",this.onLoadEnd),this.originLoader.destroy(),this.removeAllListeners()},t}(a.default);t.BasicParser=u},function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Map]",o="[object Object]",a="[object Set]",s=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[r]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u[i]=u["[object Number]"]=u[o]=u["[object RegExp]"]=u[a]=u["[object String]"]=u["[object WeakMap]"]=!1;var d="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,p=d||l||Function("return this")(),f=t&&!t.nodeType&&t,h=f&&"object"==typeof n&&n&&!n.nodeType&&n,_=h&&h.exports===f,v=_&&d.process,m=function(){try{return v&&v.binding&&v.binding("util")}catch(e){}}(),g=m&&m.isTypedArray;function E(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function y(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function b(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var S,T,w,R=Array.prototype,C=Function.prototype,O=Object.prototype,A=p["__core-js_shared__"],I=C.toString,k=O.hasOwnProperty,N=(S=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",P=O.toString,D=RegExp("^"+I.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=_?p.Buffer:void 0,L=p.Symbol,M=p.Uint8Array,U=O.propertyIsEnumerable,j=R.splice,V=L?L.toStringTag:void 0,B=Object.getOwnPropertySymbols,F=x?x.isBuffer:void 0,W=(T=Object.keys,w=Object,function(e){return T(w(e))}),G=me(p,"DataView"),H=me(p,"Map"),z=me(p,"Promise"),K=me(p,"Set"),Y=me(p,"WeakMap"),q=me(Object,"create"),J=be(G),X=be(H),Q=be(z),Z=be(K),$=be(Y),ee=L?L.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ie;++t<n;)this.add(e[t])}function ae(e){var t=this.__data__=new re(e);this.size=t.size}function se(e,t){var n=we(e),r=!n&&Te(e),i=!n&&!r&&Re(e),o=!n&&!r&&!i&&ke(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var u in e)!t&&!k.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ye(u,c))||s.push(u);return s}function ce(e,t){for(var n=e.length;n--;)if(Se(e[n][0],t))return n;return-1}function ue(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":V&&V in Object(e)?function(e){var t=k.call(e,V),n=e[V];try{e[V]=void 0}catch(e){}var r=P.call(e);t?e[V]=n:delete e[V];return r}(e):function(e){return P.call(e)}(e)}function de(e){return Ie(e)&&ue(e)==r}function le(e,t,n,s,c){return e===t||(null==e||null==t||!Ie(e)&&!Ie(t)?e!=e&&t!=t:function(e,t,n,s,c,u){var d=we(e),l=we(t),p=d?"[object Array]":Ee(e),f=l?"[object Array]":Ee(t),h=(p=p==r?o:p)==o,_=(f=f==r?o:f)==o,v=p==f;if(v&&Re(e)){if(!Re(t))return!1;d=!0,h=!1}if(v&&!h)return u||(u=new ae),d||ke(e)?he(e,t,n,s,c,u):function(e,t,n,r,o,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new M(e),new M(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Se(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var u=y;case a:var d=1&r;if(u||(u=b),e.size!=t.size&&!d)return!1;var l=c.get(e);if(l)return l==t;r|=2,c.set(e,t);var p=he(u(e),u(t),r,o,s,c);return c.delete(e),p;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,p,n,s,c,u);if(!(1&n)){var m=h&&k.call(e,"__wrapped__"),g=_&&k.call(t,"__wrapped__");if(m||g){var E=m?e.value():e,S=g?t.value():t;return u||(u=new ae),c(E,S,n,s,u)}}if(!v)return!1;return u||(u=new ae),function(e,t,n,r,i,o){var a=1&n,s=_e(e),c=s.length,u=_e(t).length;if(c!=u&&!a)return!1;var d=c;for(;d--;){var l=s[d];if(!(a?l in t:k.call(t,l)))return!1}var p=o.get(e);if(p&&o.get(t))return p==t;var f=!0;o.set(e,t),o.set(t,e);var h=a;for(;++d<c;){l=s[d];var _=e[l],v=t[l];if(r)var m=a?r(v,_,l,t,e,o):r(_,v,l,e,t,o);if(!(void 0===m?_===v||i(_,v,n,r,o):m)){f=!1;break}h||(h="constructor"==l)}if(f&&!h){var g=e.constructor,E=t.constructor;g==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof E&&E instanceof E||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,s,c,u)}(e,t,n,s,le,c))}function pe(e){return!(!Ae(e)||function(e){return!!N&&N in e}(e))&&(Ce(e)?D:s).test(be(e))}function fe(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||O,t!==r)return W(e);var t,n,r,i=[];for(var o in Object(e))k.call(e,o)&&"constructor"!=o&&i.push(o);return i}function he(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var d=-1,l=!0,p=2&n?new oe:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],h=t[d];if(r)var _=a?r(h,f,d,t,e,o):r(f,h,d,e,t,o);if(void 0!==_){if(_)continue;l=!1;break}if(p){if(!E(t,(function(e,t){if(a=t,!p.has(a)&&(f===e||i(f,e,n,r,o)))return p.push(t);var a}))){l=!1;break}}else if(f!==h&&!i(f,h,n,r,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function _e(e){return function(e,t,n){var r=t(e);return we(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Ne,ge)}function ve(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function me(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return pe(n)?n:void 0}ne.prototype.clear=function(){this.__data__=q?q(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(q){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return k.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return q?void 0!==t[e]:k.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=q&&void 0===t?"__lodash_hash_undefined__":t,this},re.prototype.clear=function(){this.__data__=[],this.size=0},re.prototype.delete=function(e){var t=this.__data__,n=ce(t,e);return!(n<0)&&(n==t.length-1?t.pop():j.call(t,n,1),--this.size,!0)},re.prototype.get=function(e){var t=this.__data__,n=ce(t,e);return n<0?void 0:t[n][1]},re.prototype.has=function(e){return ce(this.__data__,e)>-1},re.prototype.set=function(e,t){var n=this.__data__,r=ce(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ie.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(H||re),string:new ne}},ie.prototype.delete=function(e){var t=ve(this,e).delete(e);return this.size-=t?1:0,t},ie.prototype.get=function(e){return ve(this,e).get(e)},ie.prototype.has=function(e){return ve(this,e).has(e)},ie.prototype.set=function(e,t){var n=ve(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},oe.prototype.add=oe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},oe.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.clear=function(){this.__data__=new re,this.size=0},ae.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var n=this.__data__;if(n instanceof re){var r=n.__data__;if(!H||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ie(r)}return n.set(e,t),this.size=n.size,this};var ge=B?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(B(e),(function(t){return U.call(e,t)})))}:function(){return[]},Ee=ue;function ye(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||c.test(e))&&e>-1&&e%1==0&&e<t}function be(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Se(e,t){return e===t||e!=e&&t!=t}(G&&"[object DataView]"!=Ee(new G(new ArrayBuffer(1)))||H&&Ee(new H)!=i||z&&"[object Promise]"!=Ee(z.resolve())||K&&Ee(new K)!=a||Y&&"[object WeakMap]"!=Ee(new Y))&&(Ee=function(e){var t=ue(e),n=t==o?e.constructor:void 0,r=n?be(n):"";if(r)switch(r){case J:return"[object DataView]";case X:return i;case Q:return"[object Promise]";case Z:return a;case $:return"[object WeakMap]"}return t});var Te=de(function(){return arguments}())?de:function(e){return Ie(e)&&k.call(e,"callee")&&!U.call(e,"callee")},we=Array.isArray;var Re=F||function(){return!1};function Ce(e){if(!Ae(e))return!1;var t=ue(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Oe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ae(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ie(e){return null!=e&&"object"==typeof e}var ke=g?function(e){return function(t){return e(t)}}(g):function(e){return Ie(e)&&Oe(e.length)&&!!u[ue(e)]};function Ne(e){return null!=(t=e)&&Oe(t.length)&&!Ce(t)?se(e):fe(e);var t}n.exports=function(e,t){return le(e,t)}}).call(this,n(15),n(58)(e))},function(e,t,n){var r;!function(i,o){"use strict";var a="model",s="name",c="type",u="vendor",d="version",l="mobile",p="tablet",f="smarttv",h=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},_=function(e,t){return"string"==typeof e&&-1!==v(t).indexOf(v(e))},v=function(e){return e.toLowerCase()},m=function(e,t){if("string"==typeof e)return e=e.replace(/^\s\s*/,""),void 0===t?e:e.substring(0,500)},g=function(e,t){for(var n,r,i,o,a,s,c=0;c<t.length&&!a;){var u=t[c],d=t[c+1];for(n=r=0;n<u.length&&!a&&u[n];)if(a=u[n++].exec(e))for(i=0;i<d.length;i++)s=a[++r],"object"==typeof(o=d[i])&&o.length>0?2===o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3===o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4===o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;c+=2}},E=function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(_(t[n][r],e))return"?"===n?void 0:n}else if(_(t[n],e))return"?"===n?void 0:n;return e},y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},b={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[s,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[s,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[s,d],[/opios[\/ ]+([\w\.]+)/i],[d,[s,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[d,[s,"Opera"]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[d,[s,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[s,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[s,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[d,[s,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[s,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[s,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[d,[s,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[d,[s,"Smart Lenovo Browser"]],[/(avast|avg)\/([\w\.]+)/i],[[s,/(.+)/,"$1 Secure Browser"],d],[/\bfocus\/([\w\.]+)/i],[d,[s,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[d,[s,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[s,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[s,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[s,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[s,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[d,[s,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[s,"360 Browser"]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[s,/(.+)/,"$1 Browser"],d],[/samsungbrowser\/([\w\.]+)/i],[d,[s,"Samsung Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],d],[/metasr[\/ ]?([\d\.]+)/i],[d,[s,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[s,"Sogou Mobile"],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[s,d],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[s],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[s,"Facebook"],d],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[s,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[s,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[d,[s,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[s,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[s,"Chrome WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[s,d],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[d,[s,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[d,s],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[s,[d,E,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[s,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[s,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[s,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[s,d],[/(cobalt)\/([\w\.]+)/i],[s,[d,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",v]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows (ce|mobile); ppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[["architecture",/ower/,"",v]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",v]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[a,[u,"Samsung"],[c,p]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[a,[u,"Samsung"],[c,l]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[a,[u,"Apple"],[c,l]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[u,"Apple"],[c,p]],[/(macintosh);/i],[a,[u,"Apple"]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[a,[u,"Sharp"],[c,l]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[a,[u,"Huawei"],[c,p]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[a,[u,"Huawei"],[c,l]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[a,/_/g," "],[u,"Xiaomi"],[c,l]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[a,/_/g," "],[u,"Xiaomi"],[c,p]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[a,[u,"OPPO"],[c,l]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[a,[u,"Vivo"],[c,l]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[a,[u,"Realme"],[c,l]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[a,[u,"Motorola"],[c,l]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[a,[u,"Motorola"],[c,p]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[a,[u,"LG"],[c,p]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[a,[u,"LG"],[c,l]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[a,[u,"Lenovo"],[c,p]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[a,/_/g," "],[u,"Nokia"],[c,l]],[/(pixel c)\b/i],[a,[u,"Google"],[c,p]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[a,[u,"Google"],[c,l]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[u,"Sony"],[c,l]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[a,"Xperia Tablet"],[u,"Sony"],[c,p]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[a,[u,"OnePlus"],[c,l]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[a,[u,"Amazon"],[c,p]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[a,/(.+)/g,"Fire Phone $1"],[u,"Amazon"],[c,l]],[/(playbook);[-\w\),; ]+(rim)/i],[a,u,[c,p]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[a,[u,"BlackBerry"],[c,l]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[a,[u,"ASUS"],[c,p]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[a,[u,"ASUS"],[c,l]],[/(nexus 9)/i],[a,[u,"HTC"],[c,p]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[a,/_/g," "],[c,l]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[a,[u,"Acer"],[c,p]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[a,[u,"Meizu"],[c,l]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[a,[u,"Ulefone"],[c,l]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,a,[c,l]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,a,[c,p]],[/(surface duo)/i],[a,[u,"Microsoft"],[c,p]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[a,[u,"Fairphone"],[c,l]],[/(u304aa)/i],[a,[u,"AT&T"],[c,l]],[/\bsie-(\w*)/i],[a,[u,"Siemens"],[c,l]],[/\b(rct\w+) b/i],[a,[u,"RCA"],[c,p]],[/\b(venue[\d ]{2,7}) b/i],[a,[u,"Dell"],[c,p]],[/\b(q(?:mv|ta)\w+) b/i],[a,[u,"Verizon"],[c,p]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[a,[u,"Barnes & Noble"],[c,p]],[/\b(tm\d{3}\w+) b/i],[a,[u,"NuVision"],[c,p]],[/\b(k88) b/i],[a,[u,"ZTE"],[c,p]],[/\b(nx\d{3}j) b/i],[a,[u,"ZTE"],[c,l]],[/\b(gen\d{3}) b.+49h/i],[a,[u,"Swiss"],[c,l]],[/\b(zur\d{3}) b/i],[a,[u,"Swiss"],[c,p]],[/\b((zeki)?tb.*\b) b/i],[a,[u,"Zeki"],[c,p]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],a,[c,p]],[/\b(ns-?\w{0,9}) b/i],[a,[u,"Insignia"],[c,p]],[/\b((nxa|next)-?\w{0,9}) b/i],[a,[u,"NextBook"],[c,p]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],a,[c,l]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],a,[c,l]],[/\b(ph-1) /i],[a,[u,"Essential"],[c,l]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[a,[u,"Envizen"],[c,p]],[/\b(trio[-\w\. ]+) b/i],[a,[u,"MachSpeed"],[c,p]],[/\btu_(1491) b/i],[a,[u,"Rotor"],[c,p]],[/(shield[\w ]+) b/i],[a,[u,"Nvidia"],[c,p]],[/(sprint) (\w+)/i],[u,a,[c,l]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[u,"Microsoft"],[c,l]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[u,"Zebra"],[c,p]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[u,"Zebra"],[c,l]],[/smart-tv.+(samsung)/i],[u,[c,f]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[u,"Samsung"],[c,f]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,"LG"],[c,f]],[/(apple) ?tv/i],[u,[a,"Apple TV"],[c,f]],[/crkey/i],[[a,"Chromecast"],[u,"Google"],[c,f]],[/droid.+aft(\w+)( bui|\))/i],[a,[u,"Amazon"],[c,f]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[a,[u,"Sharp"],[c,f]],[/(bravia[\w ]+)( bui|\))/i],[a,[u,"Sony"],[c,f]],[/(mitv-\w{5}) bui/i],[a,[u,"Xiaomi"],[c,f]],[/Hbbtv.*(technisat) (.*);/i],[u,a,[c,f]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,m],[a,m],[c,f]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[c,f]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,a,[c,"console"]],[/droid.+; (shield) bui/i],[a,[u,"Nvidia"],[c,"console"]],[/(playstation [345portablevi]+)/i],[a,[u,"Sony"],[c,"console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[a,[u,"Microsoft"],[c,"console"]],[/((pebble))app/i],[u,a,[c,"wearable"]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[a,[u,"Apple"],[c,"wearable"]],[/droid.+; (glass) \d/i],[a,[u,"Google"],[c,"wearable"]],[/droid.+; (wt63?0{2,3})\)/i],[a,[u,"Zebra"],[c,"wearable"]],[/(quest( 2| pro)?)/i],[a,[u,"Facebook"],[c,"wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[c,"embedded"]],[/(aeobc)\b/i],[a,[u,"Amazon"],[c,"embedded"]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[a,[c,l]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[a,[c,p]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[c,p]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[c,l]],[/(android[-\w\. ]{0,9});.+buil/i],[a,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[s,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,s]],os:[[/microsoft (windows) (vista|xp)/i],[s,d],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[s,[d,E,y]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,E,y],[s,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[s,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[s,"Mac OS"],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[d,s],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[s,d],[/\(bb(10);/i],[d,[s,"BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[s,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[s,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[s,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[d,[s,"watchOS"]],[/crkey\/([\d\.]+)/i],[d,[s,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[s,"Chromium OS"],d],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[s,d],[/(sunos) ?([\w\.\d]*)/i],[[s,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[s,d]]},S=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof S))return new S(e,t).getResult();var n=void 0!==i&&i.navigator?i.navigator:void 0,r=e||(n&&n.userAgent?n.userAgent:""),o=n&&n.userAgentData?n.userAgentData:void 0,u=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(b,t):b,f=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[s]=void 0,t[d]=void 0,g.call(t,r,u.browser),t.major="string"==typeof(e=t[d])?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0,f&&n&&n.brave&&"function"==typeof n.brave.isBrave&&(t[s]="Brave"),t},this.getCPU=function(){var e={architecture:void 0};return g.call(e,r,u.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return g.call(e,r,u.device),f&&!e[c]&&o&&o.mobile&&(e[c]=l),f&&"Macintosh"==e[a]&&n&&void 0!==n.standalone&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[a]="iPad",e[c]=p),e},this.getEngine=function(){var e={name:void 0,version:void 0};return g.call(e,r,u.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return g.call(e,r,u.os),f&&!e[s]&&o&&"Unknown"!=o.platform&&(e[s]=o.platform.replace(/chrome os/i,"Chromium OS").replace(/macos/i,"Mac OS")),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r="string"==typeof e&&e.length>500?m(e,500):e,this},this.setUA(r),this};S.VERSION="1.0.37",S.BROWSER=h([s,d,"major"]),S.CPU=h(["architecture"]),S.DEVICE=h([a,u,c,"console",l,f,p,"wearable","embedded"]),S.ENGINE=S.OS=h([s,d]),void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=S),t.UAParser=S):n(152)?void 0===(r=function(){return S}.call(t,n,t,e))||(e.exports=r):void 0!==i&&(i.UAParser=S);var T=void 0!==i&&(i.jQuery||i.Zepto);if(T&&!T.ua){var w=new S;T.ua=w.getResult(),T.ua.get=function(){return w.getUA()},T.ua.set=function(e){w.setUA(e);var t=w.getResult();for(var n in t)T.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){t.aplus_universal=n(2),t.AplusWeb=n(7),t.AplusWeex=n(10),t.AplusWindmill=n(13),t.AplusWindmillAlipay=n(14),t.AplusWindmillAppx=n(17)},function(e,t,n){(function(t){"use strict";var r,i,o,a,s=n(3),c=n(4),u=c.isWeex,d=c.isWeb;try{r=my}catch(e){}try{i=wx}catch(e){}try{o=tt}catch(e){}try{a=swan}catch(e){}var l=r||i||o||a,p=!1;"object"==typeof l&&(p=!(!l.request&&!l.httpRequest||!l.getSystemInfo));var f,h={AplusWeb:n(7),AplusWeex:n(10),AplusWindmill:n(13),AplusWindmillAlipay:n(14),Common:n(8)},_=function(){if(u)return"AplusWeex";if(d)return"AplusWeb";if(p)return s.isTB()?"AplusWindmill":"AplusWindmillAlipay";try{t.window||(t.window={})}catch(e){}return"Common"}();try{var v=h[_=_||"Common"];f=s.createGoldlogInstance(v)}catch(e){console&&console.log(e),f={}}e.exports=f}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){for(var t=[],n=0;n<e.length;n++){var r=e[n][0],i=e[n][1];t.push(r+"="+encodeURIComponent(i))}return t.join("&")}function r(){var e=function(){},t={getSystemInfo:e,setStorageSync:e,getStorage:e},n=t;try{n=dd}catch(e){try{n=my}catch(e){try{n=ks}catch(e){try{n=wx}catch(e){try{n=tt}catch(e){try{n=swan}catch(e){n=t}}}}}}return n}t.getAplusUniversalVersion=function(){return"4.8.5"},t.paramsToObj=function(e){for(var t={},n=(e="string"==typeof e?e:"").split("&"),r=0;r<n.length;r++){var i=n[r],o=i.split("="),a=o[0],s="";if(2===o.length)s=o[1];else if(o.length>2){var c=i.indexOf("=");s=i.slice(c+1)}a&&(t[a]=s)}return t},t.objToParams=function(e,t){var n=[];for(var r in e){var i=r,o=t?encodeURIComponent(e[r]):e[r];n.push(i+"="+o)}return n.join("&")},t.getParamFromURL=function(e,t){var n="";(t||(t="spm"),e)&&(e.split("?")[1]||"").split("&").forEach((function(e){0===e.indexOf(t+"=")&&(n=e.substr(t.length+1))}));return n},t.simplifyURL=function(e){e||(e="");var t="_wx_tpl=";return e.indexOf(t)>-1&&(e=e.substring(e.indexOf(t)+t.length,e.indexOf(".js")+".js".length)),e.split("?")[0]},t.getLocation=function(){var e;try{e=location||{}}catch(t){e={}}return e},t.getCurrentPage=function(){var e=getCurrentPages();return e[e.length-1]||{}},t.getPVLogUrl=function(e){var t="";return t=/^\/\/\w+/.test(e)?"https:"+e:"https://"+e,/\w+\.gif$/.test(e)||(t+="/vx.gif"),t},t.getEtagUrl=function(e){return(/^\/\/\w+/.test(e)?"https:"+e:"https://"+e)+"/eg.js"},t.getGoldlogUrl=function(e){return/^\/\/\w+/.test(e)?"https:"+e:"https://"+e},t.makeCacheNum=function(){return Math.floor(268435456*Math.random()).toString(16)},t.makeUrl=function(e){return[e.preParams?n(e.preParams):"","&aplus&",e.endParams?n(e.endParams):""].join("")},t.hostValidity=function(e){return/^(\/\/){0,1}(\w+\.){1,}\w+((\/\w+){1,})?$/.test(e)},t.vhostValidity=function(e){return/^(\/\/){0,1}(\w+\.){1,}\w+\/\w+\.gif$/.test(e)},t.getContext=r,t.getAppInfo=function(){var e={};return function(){if(e.appId)return e;try{var t=r();if(t.getAccountInfoSync&&t.canIUse("getAccountInfoSync")){var n=t.getAccountInfoSync(),i=n.miniProgram||{},o=n.plugin||{};e.appId=i.appId,e.appVersion=i.version||i.envVersion,e.pluginAppId=o.appId,e.pluginAppVersion=o.version}else if(t.getAppIdSync&&t.canIUse("getAppIdSync")){var a=t.getAppIdSync()||{};e.appId=a.appId||""}}catch(e){}return e}}(),t.isTriver=function(){try{var e=navigator?navigator.userAgent||navigator.swuserAgent:"";return/Triver/g.test(e)}catch(e){return!1}},t.isTB=function(){var e=!1;try{var t=navigator?navigator.userAgent||navigator.swuserAgent:"";if(e=!!/AliApp/i.test(t),/AliApp\((AP|DingTalk|AMAP|UC|QUARK)/i.test(t)&&(e=!1),e){var n=r();"function"==typeof n.canIUse&&(e=!!n.canIUse("callUserTrack"))}}catch(e){}return e};var i={CLK:{name:"click",alias:"CLK",id:"2101"},EXP:{name:"expose",alias:"EXP",id:"2201"},IMPEXP:{name:"expose",alias:"IMPEXP",id:"2202"},OTHER:{name:"other",alias:"OTHER",id:"19999"}};t.getGmObj=function(e){var t=i[e]||i.OTHER;if("19999"===t.id)try{var n=parseInt(e);if(n+""!="NaN"&&n>3e3&&n<19999){var r=e+"";t={name:r,alias:r,id:r}}}catch(e){}return t},t.createGoldlogInstance=function(e,t){var n="object"==typeof t?t:{};return e.default?e.default.create(n):e.create(n)},t.parseOS=function(e){var t="";return e&&(t={iphone:"ios",ipad:"ios",ios:"ios",android:"andr",yunos:"yun",wp:"wp",linux:"linux",unix:"unix",macos:"mac",windows:"win"}[e.toLowerCase()]||""),t},t.getRandomId=function(e){function t(e){return 1===e?"0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ".substr(Math.floor(60*Math.random()),1):2===e?"0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ".substr(Math.floor(60*Math.random()),1):"0"}for(var n,r="",i=!1;r.length<e;)n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".substr(Math.floor(62*Math.random()),1),!i&&r.length<=2&&("g"===n.toLowerCase()||"l"===n.toLowerCase())&&(0===r.length&&"g"===n.toLowerCase()?Math.random()<.5&&(n=t(1),i=!0):1===r.length&&"l"===n.toLowerCase()&&"g"===r.charAt(0).toLowerCase()&&(n=t(2),i=!0)),r+=n;return r}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(5);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||(t[e]=r[e]))}))},function(e,t,n){(function(e,n){"use strict";t.__esModule=!0,t.isWindVane=t.isWeex=t.isWeb=t.isWeChatMiniProgram=t.isQuickApp=t.isPHA=t.isNode=t.isMiniApp=t.isKuaiShouMiniProgram=t.isKraken=t.isFRM=t.isByteDanceMicroApp=t.isBaiduSmartProgram=t.default=void 0;var r="undefined"!=typeof window&&"onload"in window;t.isWeb=r;var i=void 0!==e&&!(!e.versions||!e.versions.node);t.isNode=i;var o="undefined"!=typeof WXEnvironment&&"Web"!==WXEnvironment.platform;t.isWeex=o;var a="undefined"!=typeof __kraken__;t.isKraken=a;var s="undefined"!=typeof my&&null!==my&&void 0!==my.alert;t.isMiniApp=s;var c="undefined"!=typeof tt&&null!==tt&&void 0!==tt.showToast;t.isByteDanceMicroApp=c;var u="undefined"!=typeof swan&&null!==swan&&void 0!==swan.showToast;t.isBaiduSmartProgram=u;var d="undefined"!=typeof ks&&null!==ks&&void 0!==ks.showToast;t.isKuaiShouMiniProgram=d;var l=!c&&"undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram);t.isWeChatMiniProgram=l;var p=null!=n&&void 0!==n.callNative&&!o;t.isQuickApp=p;var f=r&&"object"==typeof pha;t.isPHA=f;var h=s&&r&&my.isFRM;t.isFRM=h;var _="object"==typeof navigator?navigator.userAgent||navigator.swuserAgent:"",v=/.+AliApp\((\w+)\/((?:\d+\.)+\d+)\).* .*(WindVane)(?:\/((?:\d+\.)+\d+))?.*/.test(_)&&r&&"undefined"!=typeof WindVane&&void 0!==WindVane.call;t.isWindVane=v;var m={isWeb:r,isNode:i,isWeex:o,isKraken:a,isMiniApp:s,isByteDanceMicroApp:c,isBaiduSmartProgram:u,isKuaiShouMiniProgram:d,isWeChatMiniProgram:l,isQuickApp:p,isPHA:f,isWindVane:v,isFRM:h};t.default=m}).call(t,n(6),function(){return this}())},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(){h&&p&&(h=!1,p.length?f=p.concat(f):_=-1,f.length&&a())}function a(){if(!h){var e=i(o);h=!0;for(var t=f.length;t;){for(p=f,f=[];++_<t;)p&&p[_].run();_=-1,t=f.length}p=null,h=!1,function(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var u,d,l=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var p,f=[],h=!1,_=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new s(e,t)),1!==f.length||h||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=c,l.addListener=c,l.once=c,l.off=c,l.removeListener=c,l.removeAllListeners=c,l.emit=c,l.prependListener=c,l.prependOnceListener=c,l.listeners=function(e){return[]},l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(3).objToParams,i=n(8).extend({_ENV:"Web",setPageSPM:function(e,t,n){this.spmAB=[e,t],(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.setPageSPM",arguments:[e,t]}),"function"==typeof n&&n()},getPageSPM:function(){return this.spmAB},getPageSPMStr:function(){return this.spmAB.join(".")},record:function(e,t,n,i){return n="string"==typeof n?n:r(n,!0),n=this.getUserInjectGokey({logkey:e,gmkey:t,gokey:n}),(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[e,t,n,i||"POST"]}),!0},combineRecord:function(e,t,n,r){return(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.combineRecord",arguments:[e,t,n,r]}),!0},enter:function(e,t){e||(e={}),t||(t={});var n={is_auto:!1,page_id:""};return t.page_id&&(n.page_id=t.page_id,delete t.page_id),(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.sendPV",arguments:[n,t]}),!0},setMetaInfo:function(e,t,n){(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.setMetaInfo",arguments:[e,t,n]})},getMetaInfo:function(e,t){(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.aplus_pubsub.subscribe",arguments:["aplusReady",function(n){var r=window.goldlog;"complete"===n&&r&&"function"==typeof r.getMetaInfo&&"function"==typeof t&&t(r.getMetaInfo(e))}]})},updateSessionProperties:function(e){"object"==typeof e&&(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.setMetaInfo",arguments:["_session_args",e]})}});e.exports=i},function(e,t,n){"use strict";function r(e){return"function"==typeof e}function i(e){if(!r(e))throw new TypeError(e+" is not a function");return e}var o=n(3),a=n(9),s=function(){},c=function(e){for(var t=e.length,n=new Array(t-1),r=1;r<t;r++)n[r-1]=e[r];return n},u=a.extend({_ENV:"Node",spmAB:["0","0"],spmUrl:"",spmPre:"",pageName:"",isPageDisAppear:!0,isPageAppear:!1,_meta_info:{},record:s,setPageSPM:s,getPageSPM:s,enter:s,setHandlers:function(e){this.handlers=e},subscribe:function(e,t){i(t);var n=this,r=(n.pubs||{})[e]||[];if(r)for(var o=0;o<r.length;o++){var a=r[o]();t.apply(n,a)}var s=n.handlers||[];return e in s||(s[e]=[]),s[e].push(t),n.setHandlers(s),n},subscribeOnce:function(e,t){i(t);var n,r=this;return this.subscribe.call(this,e,n=function(){r.unsubscribe.call(r,e,n);var i=Array.prototype.slice.call(arguments);t.apply(r,i)}),this},unsubscribe:function(e,t){i(t);var n=this.handlers[e];if(!n)return this;if("object"==typeof n&&n.length>0){for(var r=0;r<n.length;r++){t.toString()===n[r].toString()&&n.splice(r,1)}this.handlers[e]=n}else delete this.handlers[e];return this},publish:function(e){var t=c(arguments),n=this.handlers||[],i=n[e]?n[e].length:0;if(i>0)for(var o=0;o<i;o++){var a=n[e][o];r(a)&&a.apply(this,t)}return this},cachePubs:function(e){var t=this.pubs||{},n=c(arguments);t[e]||(t[e]=[]),t[e].push((function(){return n}))},updatePageProperties:function(e){"object"==typeof e&&this.setMetaInfo("aplus-cpvdata",e)},updateNextPageProperties:s,updatePageUtparam:s,updateNextPageUtparam:s,skipPage:s,pageAppear:s,pageDisappear:s,setExposureView:s,updateSessionProperties:s,getPageSpmUrl:s,getPageSpmPre:s,getUserInjectGokey:function(e){var t=this.getMetaInfo("aplus-inject-record-gokey");return"function"==typeof t?t(e):e.gokey},setMetaInfo:function(e,t){switch(e){case"aplus-rhost-v":case"aplus-rhost-g":var n=o.hostValidity(t);n||"aplus-rhost-v"!==e||(n=o.vhostValidity(t)),n?this._meta_info[e]=t:this.catchException("sorry, metaValue of "+t+" is not legality!");break;case"aplus-exdata":case"aplus-cpvdata":case"aplus-request-extinfo":"object"==typeof t?this._meta_info[e]=t:this.catchException("sorry, type of "+t+"  must be object!");break;case"aplus-channel":this._meta_info[e]=t;break;case"aplus-inject-record-gokey":"function"==typeof t?this._meta_info[e]=t:this.catchException("sorry, type of "+t+"  must be function!");break;default:this.catchException("sorry, aplus do not support the metaKey of "+e)}},appendMetaInfo:function(e,t){switch(e){case"aplus-exdata":case"aplus-cpvdata":if("object"==typeof t){var n=this._meta_info[e];this._meta_info[e]=Object.assign(n||{},t)}else this.catchException("sorry, type of "+t+"  must be object!");break;default:this.setMetaInfo(e,t)}},getMetaInfo:function(e,t){var n=this._meta_info[e];return"function"!=typeof t?n:void t(n)},catchException:function(e){try{console&&console.error(e)}catch(e){}}});e.exports=u},function(e,t){"use strict";function n(){}n.prototype.extend=function(){},n.prototype.create=function(){},n.extend=function(e){return this.prototype.extend.call(this,e)},n.prototype.create=function(e){var t=new this;for(var n in e)t[n]=e[n];return t},n.prototype.extend=function(e){var t=function(){};try{for(var n in"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),t.prototype=Object.create(this.prototype),e)t.prototype[n]=e[n];t.prototype.constructor=t,t.extend=t.prototype.extend,t.create=t.prototype.create}catch(e){t=function(){}}return t},e.exports=n},function(e,t,n){"use strict";var r=n(4).isWeex,i=n(11),o=n(12).requireModule,a=i.extend({_ENV:"weex",getUT:function(){try{var e=this.UserTrack||{};"function"!=typeof e.enterEvent&&"function"!=typeof e.commit&&(e=o("userTrack")||n(!function(){var e=new Error('Cannot find module "@weex-module/userTrack"');throw e.code="MODULE_NOT_FOUND",e}())),this.UserTrack=e||{}}catch(e){this.UserTrack={}}return this.UserTrack},create:function(e){var t=new this;for(var n in e)t[n]=e[n];return t.isThirdGroupAPI=function(){var e="undefined"!=typeof __weex_options__&&__weex_options__.weex,t=!1;if(r&&"object"==typeof e&&"windmill"===e.config.container)try{"function"==typeof o("keyboard").hideKeyboard&&(t=!0)}catch(e){}return t}(),t.getUT(),t},record:function(e,t,n){n=this.getUserInjectGokey({logkey:e,gmkey:t,gokey:n});var r=this._getRecordParams(e,t,n),i=r.gmObj||{},o=this.getUT();return this.isThirdGroupAPI?(r.args.isThirdGroupAPI="1",o.commitut&&o.commitut({type:i.name,eventId:i.id,eventid:i.id,name:r.pageName,pageName:r.pageName,arg1:r.arg1,arg2:r.arg2,arg3:r.arg3,param:r.args,params:r.args})):o.customAdvance?o.customAdvance(r.pageName,i.id,r.arg1,r.arg2,r.arg3,r.args):o.commitut&&o.commitut(i.name,i.id,r.pageName,"",r.arg1,r.arg2,r.arg3,r.args),!0},enter:function(e,t){var n=this.getUT();e||(e={}),t||(t={});var r=this._getEnterParams(e,t),i=r.args||{};return this.isThirdGroupAPI&&n.commitut?(i.isThirdGroupAPI="1",n.commitut({type:"enter",eventId:"-1",eventid:"-1",name:r.pageName,pageName:r.pageName,comName:i.url,arg1:"",arg2:"",arg3:"",param:i,params:i})):n.enterEvent?n.enterEvent(r.pageName,i):n.commit&&n.commit("enter",r.pageName,i.url,i),!0},updateNextPageProperties:function(e){var t=this.getUT();"object"==typeof e&&t.commitut&&(this.isThirdGroupAPI?t.commitut({type:"updateNextProp",eventId:-1,eventid:-1,name:"",pageName:"",comName:"",arg1:"",arg2:"",arg3:"",param:e,params:e}):t.commitut("updateNextProp",-1,"","","","","",e))},updatePageUtparam:function(e){var t=this.getUT();"object"==typeof e&&t.updatePageUtparam&&(this.isThirdGroupAPI?t.updatePageUtparam({utParamJson:JSON.stringify(e)}):t.updatePageUtparam(JSON.stringify(e)))},updateNextPageUtparam:function(e){var t=this.getUT();"object"==typeof e&&t.updateNextPageUtparam&&(this.isThirdGroupAPI?t.updateNextPageUtparam({utParamJson:JSON.stringify(e)}):t.updateNextPageUtparam(JSON.stringify(e)))},skipPage:function(){var e=this.getUT();e.skipPage&&e.skipPage()},pageAppear:function(){var e=this.getUT();e.pageAppear&&this.isPageDisAppear&&(this.isPageDisAppear=!1,this.isPageAppear=!0,e.pageAppear())},pageDisappear:function(){var e=this.getUT();e.pageDisAppear&&this.isPageAppear&&(this.isPageDisAppear=!0,this.isPageAppear=!1,e.pageDisAppear())},setExposureView:function(e,t,n){var r=this.getUT(),i=!1;return r&&r.setExposureView&&(r.setExposureView(e,t,n),i=!0),i}});e.exports=a},function(e,t,n){"use strict";var r=n(12).requireModule,i=n(8),o=n(3),a=o.paramsToObj,s=o.objToParams,c=o.getParamFromURL,u=o.simplifyURL,d=o.getAplusUniversalVersion,l=o.getLocation,p=i.extend({create:function(e){var t=new this;for(var n in e)t[n]=e[n];try{t.UserTrack=r("userTrack")}catch(e){t.UserTrack={}}return t._meta_info||(t._meta_info={}),t},setPageSPM:function(e,t,n){if(e&&t){var r=[];r.push(e),r.push(t),this.spmAB=r,this.pageName=""}"function"==typeof n&&n()},getPageSPM:function(){return this.spmAB},_updateNextPageSpm:function(e){e&&(this.spmPre=this.spmUrl,this.spmUrl=e["spm-url"]||e.spmUrl)},getPageSPMStr:function(e,t){var n=this.spmAB.join(".");if(!n||"0.0"===n)try{if(console&&console.warn){var r="object"==typeof t?JSON.stringify(t):"";console.warn("please setPageSPM before "+e+" about "+r)}}catch(e){}return n},_getRecordParams:function(e,t,n){n||(n="");var r=this.getMetaInfo("aplus-exdata");if(r)if("string"==typeof n){var i=[];for(var c in r)i.push(c+"="+r[c]);if(i.length>0)n+=(n?"&":"")+i.join("&")}else"object"==typeof n&&(n=Object.assign({},r,n));var p=l(),f="string"==typeof n?a(n):n,h=f.url||p.currentpagename||p.href||"",_=o.getGmObj(t);this.pageName||(this.pageName=f.pageName||p.currentpagename||u(h)||"");var v={jsver:"aplus_universal",lver:d(),weex:"1",functype:"ctrl",funcId:_.id,_toUT:"2",logkey:e,gokey:"string"==typeof n?encodeURIComponent(n):encodeURIComponent(s(n,!1)),gmkey:_.alias,urlpagename:this.pageName,url:h};this.spmUrl&&(v["spm-url"]=this.spmUrl),this.spmPre&&(v["spm-pre"]=this.spmPre);var m=this.getPageSPMStr("record",v);return m&&"0.0"!==m&&(v["spm-cnt"]=m+".0.0"),{pageName:this.pageName,gmObj:_,arg1:e,arg2:"",arg3:"",args:v}},_getEnterParams:function(e,t){e||(e={}),t||(t={});var n=this.getMetaInfo("aplus-cpvdata");n&&(t=Object.assign({},n,t));var r={width:"0",height:"0"};try{r=screen}catch(e){}try{__windmill_environment__&&(r.width=__windmill_environment__.screenWidth,r.height=__windmill_environment__.screenHeight)}catch(e){}var i=l();t.url=e.pageUrl||i.currentpagename||i.href||"";var o=(t=Object.assign(t,{functype:"page",funcId:"2001",isonepage:e.isonepage?1:-1,scr:r.width+"x"+r.height,jsver:"aplus_universal",lver:d(),weex:"1",_toUT:"2"})).scm||c(t.url,"scm")||"";o&&(t.scm=o);var a=e.pageId?"/"+e.pageId:"",s=this.getPageSPMStr("enter",t);return s&&"0.0"!==s&&(t["spm-cnt"]=s+""+a+".0.0"),this.spmUrl=e.spmUrl||e["spm-url"]||c(t.url,"spm")||this.spmUrl||"",this.spmUrl&&(t["spm-url"]=this.spmUrl),this.spmPre=e.spmPre||e["spm-pre"]||c(e.referrer,"spm")||this.spmPre||"",this.spmPre&&(t["spm-pre"]=this.spmPre),this.pageName=e.pageName||i.currentpagename||u(t.url)||"",{pageName:this.pageName,args:t}}});e.exports=p},function(e,t,n){"use strict";function r(e){return e&&void 0!==e}t.requireModule=function(e){var t;try{r(__weex_require__)&&(t=__weex_require__(e))}catch(e){t=null}if(!t)try{r(weex)&&"function"==typeof weex.requireModule&&(t=weex.requireModule(e))}catch(e){t=null}if(!t)try{t=!function(){var e=new Error('Cannot find module "@weex-module"');throw e.code="MODULE_NOT_FOUND",e}()}catch(e){t=null}return t}},function(e,t,n){"use strict";var r=n(3),i=n(11),o=function(e,t){my&&my.call&&"function"==typeof t&&my.call("handleLoggingAction",{type:"behavior",subType:e.subType},(function(n){t({spmUrl:n[e.spmType]})}))},a=i.extend({_ENV:"windmill",create:function(e){var t=new this;for(var n in e)t[n]=e[n];return t},record:function(e,t,n,r){n=this.getUserInjectGokey({logkey:e,gmkey:t,gokey:n});var i=this._getRecordParams(e,t,n);delete i.args.weex,i.args.windmill="1";var o=i.gmObj||{};if(my){var a={type:o.name,eventId:o.id,comName:i.arg1,arg1:i.arg1,arg2:i.arg2,arg3:i.arg3,param:i.args};i.pageName&&(a.name=i.pageName,a.pageName=i.pageName),my.callUserTrack?my.callUserTrack("customAdvance",a):my.reportAnalytics&&my.reportAnalytics("customAdvance",a)}},enter:function(e,t){e||(e={}),t||(t={});var n=this._getEnterParams(e,t);if(delete n.args.weex,n.args.windmill="1",my){var r={type:"enter",eventId:"2001",eventid:"-1",pageName:n.pageName,name:n.pageName,comName:n.args.url,arg1:n.arg1,arg2:n.arg2,arg3:n.arg3,param:n.args};my.callUserTrack?my.callUserTrack("commitut",r):my.reportAnalytics&&my.reportAnalytics("enter",r)}},updatePageProperties:function(e){"object"==typeof e&&(r.isTriver()&&my.reportAnalytics("updatePageProperties",e),this.setMetaInfo("aplus-cpvdata",e))},updateNextPageProperties:function(e){if(e||(e={}),this._updateNextPageSpm(e),my){var t={type:"updateNextProp",eventId:-1,eventid:-1,name:"",pageName:"",comName:"",arg1:"",arg2:"",arg3:"",param:e,params:e};my.callUserTrack?my.callUserTrack("commitut",t):my.reportAnalytics&&my.reportAnalytics("enter",t)}},updatePageUtparam:function(e){e||(e={}),my&&my.callUserTrack&&my.callUserTrack("updatePageUtparam",{utParamJson:JSON.stringify(e)})},updateNextPageUtparam:function(e){e||(e={}),my&&my.callUserTrack&&my.callUserTrack("updateNextPageUtparam",{utParamJson:JSON.stringify(e)})},skipPage:function(){my&&my.callUserTrack&&my.callUserTrack("skipPage")},pageAppear:function(){my&&my.callUserTrack&&this.isPageDisAppear&&(this.isPageDisAppear=!1,this.isPageAppear=!0,my.callUserTrack("pageAppear"))},pageDisappear:function(){my&&my.callUserTrack&&this.isPageAppear&&(this.isPageDisAppear=!0,this.isPageAppear=!1,my.callUserTrack("pageDisappear"))},updateSessionProperties:function(e){my&&my.call&&my.call("handleLoggingAction",{type:"behavior",subType:"updateSessionProperties",extData:e})},getPageSpmUrl:function(e){o({subType:"getPageSpmUrl",spmType:"spmUrl"},e)},getPageSpmPre:function(e){o({subType:"getPageSpmPre",spmType:"spmPre"},e)}});e.exports=a},function(e,t,n){"use strict";var r=n(3),i=n(15),o="__ETAG__CNA__ID__",a=n(16),s="EMPTY_CNA",c=a.extend({aplus_queue:[],CNA:"",hasSyncCna:!1,syncLaunchOptions:!1,_ENV:"windmill_alipay",_syncEtag:function(e){var t=this.method||"request",n=function(t){var n=t&&t.data?t.data.cna:"";n?e(n):a()},a=function(){var n=r.getEtagUrl("log.mmstat.com");n?i.get(n,{dataType:"text",requestMethodName:t},(function(t){var n="";try{if(!t.failure){var i=(t?t.data:"").split(";");if(i.length>1)n=(n=i[1].split("=")[1]||"").replace(/\"/g,""),r.getContext().setStorage({key:o,data:{cna:n}})}}catch(e){}n||(n=s),e(n)})):e(s)},c=r.getContext();c&&c.getStorage&&c.getStorage({key:o,success:function(e){n(e)},fail:function(e){n(e)}})},_addDetailParam:function(e){return e.itemId?{_p_typ:"pdp",_p_item:e.itemId,_p_ispdp:"1"}:{}},_addSellerParam:function(e){return e.sellerId?{_p_typ:e.itemId?"pdp":"slr",_p_slr:e.sellerId,_p_isdpp:"1"}:{}},tryAyncEtag:function(){var e=this;this.hasSyncCna&&e.CNA!==s||(this.hasSyncCna=!0,this._syncEtag((function(t){e.CNA=t,t&&e.publish("cnaReady",t)})))},getLaunchOptionsSync:function(){var e=this;if(!e.syncLaunchOptions){e.syncLaunchOptions=!0;var t=r.getContext();if(t&&t.getLaunchOptionsSync){var n=t.getLaunchOptionsSync(),i=n&&n.query||{};if(i.miniappDebugId){var o=i.miniappDebugId.trim(),a=o.split("_"),s={aplus_work_no:a.length>2?a[1]:o,aplus_track_debug_id:o,aplus_flag:"aplus_test"};e.setMetaInfo("aplus-exdata",s),e.setMetaInfo("aplus-cpvdata",s)}}}},subscribeCna:function(){var e=this;this.subscribe("cnaReady",(function(t){if(t&&e.aplus_queue&&e.aplus_queue.length>0)for(;e.aplus_queue.length>0;){e.aplus_queue.pop().call(e,t)}}))},logQueue:function(e){"function"==typeof e&&(this.CNA?e(this.CNA!==s?this.CNA:""):this.aplus_queue.push(e))},record:function(e,t,n,o){var a=this;a.getLaunchOptionsSync(),n=this.getUserInjectGokey({logkey:e,gmkey:t,gokey:n});var s=a.method||"request",c=function(c){var u=r.getGoldlogUrl(a._meta_info["aplus-rhost-g"]),d=a._getRecordParams(t,n,c);if(u&&d){0!==e.indexOf("/vx")&&(e="/vx"+e),u+=/^\//.test(e)?e:"/"+e;var l=[];for(var p in d)l.push(p+"="+d[p]);u=u+"?"+l.join("&"),i.get(u,{method:o,requestMethodName:s,data:d,_extInfo:a.getMetaInfo("aplus-request-extinfo")},(function(e){}))}};a.tryAyncEtag(),a.logQueue((function(e){c(e)}))},enter:function(e,t){this.getLaunchOptionsSync(),e||(e={}),t||(t={});var n=this,o=n.method||"request";r.getPVLogUrl(n._meta_info["aplus-rhost-v"])&&(n.tryAyncEtag(),n.logQueue((function(a){t.cna=a,n._getEnterParams(e,t,(function(e){var t=r.getPVLogUrl(n._meta_info["aplus-rhost-v"]);t&&i.get(t+"?"+r.makeUrl(e),{requestMethodName:o,_extInfo:n.getMetaInfo("aplus-request-extinfo")},(function(e){}))}))})))},updateNextPageProperties:function(e){e||(e={}),this._updateNextPageSpm(e)}});e.exports=c},function(e,t,n){"use strict";var r=n(3),i="httpRequest",o="request";t.get=function(e,t,n){var a=r.getContext()||{},s=t.requestMethodName||o,c=a[s];"function"!=typeof c&&s!==o&&(c=a[s=o]),"function"!=typeof c&&s!==i&&(console&&console.warn('\u65b9\u6cd5"'+s+'"\u4e0d\u5b58\u5728!'),c=a[s=i]);var u,d,l=t&&t.dataType?t.dataType:"base64",p=t&&t.timeout?t.timeout:3e3,f=t&&t._extInfo?t._extInfo:null,h=t.method||"GET";if("function"==typeof c){var _={url:e,method:h,dataType:l,timeout:p,success:function(e){u||(u=!0,n(e))},fail:function(t){console&&console.warn('aplus\u65e5\u5fd7\u8bf7\u6c42"'+e+'"\u5931\u8d25\uff0c\u539f\u56e0\uff1a'+JSON.stringify(t)),u||(u=!0,n({failure:!0,data:t}))}};"POST"===h&&"object"==typeof t.data&&(_.url=_.url.split("?")[0],i===s?(_.headers={"Content-Type":"application/json"},_.dataType="json",_.data=JSON.stringify(t.data)):_.data=t.data),f&&(_._extInfo=f),c(_)}else d='\u65b9\u6cd5"'+s+'"\u4e0d\u5b58\u5728!',console&&console.warn(d),u||(u=!0,n({failure:!0,data:d}));setTimeout((function(){u||(u=!0,d='aplus\u65e5\u5fd7\u8bf7\u6c42"'+e+'\u8d85\u65f6", \u8d85\u65f6\u65f6\u957f'+p+"ms",console&&console.warn(d),n({failure:!0,data:d}))}),p)},t.sendBeacon=function(e,t){for(var n in t)"cna"!==n&&(t[n]=encodeURIComponent(t[n]));return navigator.sendBeacon(e,JSON.stringify(t)),e}},function(e,t,n){"use strict";function r(e){var t="";try{if(!(t=v[e?e.app||e.appName:""]||"")){var n=!1;try{n=!!dd}catch(e){}var r=!1;try{r=!!swan}catch(e){}var i=!1;try{i=!!ks}catch(e){}var o=!1;try{o=!!tt}catch(e){}var a=!1;try{a=!!wx}catch(e){}var s="";try{s=navigator?navigator.userAgent||navigator.swuserAgent:""}catch(e){}if(!s)try{s=clientInformation?clientInformation.appVersion:""}catch(e){}n||/AliApp\(DingTalk/i.test(s)?t="dd":r?t="swan":o?t="tt":i?t="ks":a?t="wx":/AliApp\(TB/i.test(s)?t="tb":/AliApp\(AP/i.test(s)&&(t="my")}}catch(e){}return t}function i(e){var t="";return e&&(t={iphone:"ios",ipad:"ios",ios:"ios",android:"andr",yunos:"yun",wp:"wp",linux:"linux",unix:"unix",macos:"mac",windows:"win"}[e.toLowerCase()]||""),t}function o(){return function(e){function t(e){return 1===e?"0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ".substr(Math.floor(60*Math.random()),1):2===e?"0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ".substr(Math.floor(60*Math.random()),1):"0"}for(var n,r="",i=!1;r.length<e;)n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".substr(Math.floor(62*Math.random()),1),!i&&r.length<=2&&("g"===n.toLowerCase()||"l"===n.toLowerCase())&&(0===r.length&&"g"===n.toLowerCase()?Math.random()<.5&&(n=t(1),i=!0):1===r.length&&"l"===n.toLowerCase()&&"g"===r.charAt(0).toLowerCase()&&(n=t(2),i=!0)),r+=n;return r}(14)}var a=n(8),s=n(3),c=s.paramsToObj,u=s.objToParams,d=s.getParamFromURL,l=s.simplifyURL,p=s.getAplusUniversalVersion,f=s.getLocation,h=s.getCurrentPage,_=s.getAppInfo().appId,v={alipay:"my",TB:"tb",Weixin:"wx",Dingtalk:"dd",ALIDATA:"alidata",Toutiao:"tt",SWAN:"swan"},m=a.extend({create:function(e){var t=new this;for(var n in e)t[n]=e[n];try{t._meta_info=Object.assign({"aplus-rhost-v":"log.mmstat.com","aplus-rhost-g":"wgo.mmstat.com","aplus-channel":"GET"},t._meta_info||{})}catch(e){t._meta_info={},console&&console.log(e)}return t.subscribeCna(),t},subscribeCna:function(){},setPageSPM:function(e,t,n){if(e&&t){var r=[];r.push(e),r.push(t),this.spmAB=r,this.pageName="",this.pageId="",this.pvid=o()}"function"==typeof n&&n()},_updateNextPageSpm:function(e){e&&(this.spmPre=this.spmUrl,this.spmUrl=e["spm-url"]||e.spmUrl)},getPageSPM:function(){return this.spmAB},getPageSPMStr:function(){return this.spmAB.join(".")},_getPageSpmInfo:function(e,t){this.pvid||(this.pvid=o()),"enter"===e.from&&(this.pageId=e.pageId?"/"+e.pageId:"");var n=this.getPageSPMStr();if(!n||"0.0"===n)try{if(console&&console.warn){var r="object"==typeof t?JSON.stringify(t):"";console.warn("please setPageSPM before "+e.from+" about "+r)}}catch(e){}return n+""+(this.pageId||"")+".0.0."+this.pvid},_getRecordParams:function(e,t,n){var r=f(),i=h(),o=this.getMetaInfo("aplus-exdata");if(o)if("string"==typeof t){var a=[];for(var l in o)a.push(l+"="+o[l]);if(a.length>0)t+=(t?"&":"")+a.join("&")}else"object"==typeof t&&(t=Object.assign({},o,t));var v="string"==typeof t?c(t):t;"object"==typeof v&&v||(v={},console&&console.log("typeof gokey must be object or string"));var m=v.url||r.currentpagename||r.href||"https://"+_+"_"+i.route||"";this.spmUrl||(this.spmUrl=d(m,"spm")||""),this.spmPre||(this.spmPre=d(v.referrer,"spm")||"");var g=s.getGmObj(e);return(v=Object.assign({},v,{pc_i:v.pc_i||"",ps_i:v.ps_i||"",pu_i:v.pu_i||"",_p_url:m,_p_ref:v.pre||"","spm-url":this.spmUrl,"spm-pre":this.spmPre,jsver:"aplus_universal",lver:p(),windmill:"1",cache:s.makeCacheNum(),mini_app_id:_}))._g_encode||(v._g_encode="utf-8"),v["spm-cnt"]=this._getPageSpmInfo({from:"record"},v),{logtype:"2",cna:n,gokey:encodeURIComponent(u(v,!1)),gmkey:g.alias}},_addDetailParam:function(e){return e.itemId?{_p_typ:"pdp",_p_item:e.itemId,_p_ispdp:"1"}:{}},_initPageSpmParams:function(e,t){var n=e.spmUrl||e["spm-url"]||d(e.pageUrl,"spm")||this.spmUrl||"",r=e.spmPre||e["spm-pre"]||d(e.referrer,"spm")||this.spmPre||"",i=f(),o=e.pageName||i.currentpagename||l(e.pageUrl)||"",a=h(),s=e.pageUrl||"https://"+_+"_"+a.route||"";this.spmUrl=n,this.spmPre=r,this.pageName=o,this.pageUrl=s;var c={pageName:o,pageUrl:s,spmUrl:n,spmPre:r};return c.spmCnt=this._getPageSpmInfo({from:"enter",pageId:e.pageId},c),c},_addSellerParam:function(e){return e.sellerId?{_p_typ:e.itemId?"pdp":"slr",_p_slr:e.sellerId,_p_isdpp:"1"}:{}},_appendParamsIntoArray:function(e,t){return e&&t&&Object.keys(t).forEach((function(n){e.push([n,t[n]])})),e},_appendUserParams:function(e,t){return Object.keys(t).forEach((function(n){e.push([n,t[n]])})),e},_getSystemInfo:function(e){var t=this,n={},r=t.SYSTEM_INFO||{};if(r&&r.version)e(t.SYSTEM_INFO);else try{s.getContext().getSystemInfo({complete:function(r){r&&r.version?(t.SYSTEM_INFO=r,e(r)):e(n)}})}catch(t){e(n)}},_getEnterParams:function(e,t,n){e||(e={}),t||(t={});var o=this._initPageSpmParams(e,t),a=[["logtype","1"],["title",encodeURIComponent(o.pageName)],["cna",t.cna||""]],c=this;c._getSystemInfo((function(u){var d=[["_p_url",o.pageUrl],["_p_ref",e.referrer||""],["_p_os",i(u.platform)||""],["_p_scr",u.screenWidth+"x"+u.screenHeight],["_p_pf",r(u)],["spm-cnt",o.spmCnt],["spm-url",o.spmUrl],["spm-pre",o.spmPre],["mini_app_id",_]];d["spm-url"]&&(c.spmUrl=d["spm-url"]),d["spm-pre"]&&(c.spmPre=d["spm-pre"]);var l=c.getMetaInfo("aplus-cpvdata");if(l&&"object"==typeof l&&(d=c._appendParamsIntoArray(d,l)),d=c._appendParamsIntoArray(d,c._addDetailParam(t)),d=c._appendParamsIntoArray(d,c._addSellerParam(t)),d=c._appendUserParams(d,t),d=c._appendParamsIntoArray(d,{jsver:"aplus_universal",lver:p(),windmill:"1",cache:s.makeCacheNum()}),"function"==typeof n){var f={pageName:o.pageName,preParams:a,endParams:d};n(f)}}))}});e.exports=m},function(e,t,n){"use strict";function r(e,t){void 0===e&&(e={}),E("updatePageName",{commonData:e,pageName:t}),h({type:S,subType:"updatePageName",commonData:e,extData:{pageName:t}})}function i(e,t,n){void 0===e&&(e={}),void 0===t&&(t={}),void 0===n&&(n={});var r={developerVersion:_.developerVersion,miniappVtDebugId:_.miniappVtDebugId,miniappVtEnv:_.miniappVtEnv,miniappVtWsToken:_.miniappVtWsToken,miniappVtAppId:_.miniappVtAppId,hostAppName:_.hostAppName,appVersion:_.appVersion,appxUtdid:_.appxUtdid,sourceType:_.sourceType},i=f(f({},r),t);for(var o in n)i[o]=n[o];var a=_.scm||"";return!i.scm&&a&&(i.scm=a),i.pageName=t.pageName||t.name||e.appId+"_"+e.currentPagePath,i.currentPagePath=t.pageUrl||e.currentPagePath,i.jsver||(i.jsver=y),i.lver||(i.lver=b),i._lver=b,i.windmill="2",i._p_seid=R,i.mini_app_id=e.appId,i.appxVersion=e.appxVersion||"",i}function o(e,t){var n=!1;h({type:S,subType:"spmPre"===e?"getPageSpmPre":"getPageSpmUrl"},(function(r){if(void 0===r&&(r={}),n=!0,r&&"success"===r.status){var i={status:r.status};i[e]=_.spm||r[e],t(i)}else t(r)})),setTimeout((function(){if(!n){var r={status:"timeout"};r[e]=_.spm,t(r)}}),300)}function a(e,t,n){void 0===e&&(e={}),void 0===t&&(t={}),void 0===n&&(n={});var r=i(e,t,n);E("updatePageProperties",{updatePageProperties:r}),h({type:S,subType:"updatePageProperties",commonData:e,extData:r})}function s(e,t,n,r){if(void 0===t&&(t={}),void 0===n&&(n={}),e&&n&&(n.logkey||n.arg1)){var o=w[e]||"",a=n.eventId,s=o||a,c=void 0,u=19999;try{(c=parseInt(s))+""=="NaN"&&(c=u)}catch(e){c=u}-1===[u,2201,2101,2202].indexOf(c)&&(c<2900||c>u)&&(s=T);var d=i(t,n,n.param?n.param:null);h({type:S,subType:"customAdvance",commonData:t,extData:{eventId:s,pageName:r,arg1:n.logkey||n.arg1,arg2:"",arg3:"",args:d}})}}function c(e){if(void 0===e&&(e=[]),0===I.length||JSON.stringify(e)!==JSON.stringify(I)){var t=[];e.forEach((function(e){var n=A?A.find((function(t){return t.viewId===e})):"";t.push(n||{viewId:e})})),A=t,I=e}return A}function u(e){void 0===e&&(e={});var t={},n=e.param||{},r=e.pageName||e.name||n.pageName||n.name||"",i=e.activityId||n.activityId;if(i&&(r+="_"+i),A.length>0){if(t._spmCnt=A[A.length-1]._appxUTSpm,1===A.length&&O&&(t._spmUrl=A[0]?A[0]._appxUTSpmUrl:""),A.length>=2){var o=A[A.length-2]||{};t._spmUrl=o._appxUTTapSpm||o._appxUTSpm||"",2===A.length&&_.spm&&(t._spmPre=_.spm)}if(A.length>=3){var a=A[A.length-3]||{};t._spmPre=a._appxUTTapSpm||a._appxUTSpm||""}}return t.pageName=r,t}function d(e){A[A.length-1]._appxUTTapSpm=e}function l(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});try{for(var r in n)N[r]=n[r];k=JSON.stringify(N).length}catch(e){}k>1024?"object"==typeof console&&console.log&&console.log("updateSessionProperties max length is 1024!"):h({type:S,subType:e,commonData:t,extData:n})}function p(e){void 0===e&&(e={});var t=e.commonData,n=e.pageName,r=e.pluginIds;(void 0===r?[]:r).forEach((function(e){if(void 0===e&&(e=""),e){var r=i(t,{pluginId:e},{});h({type:S,subType:"customAdvance",commonData:t,extData:{eventId:"2201",pageName:n,arg1:"/miniapp_plugin_exp",arg2:"",arg3:"",args:r}})}}))}var f=this&&this.__assign||function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AplusWindmillAppx=void 0;var h,_,v=n(18),m=v.default.getRandomId,g=v.default.isDebug,E=v.default.aplusDebugLog,y="aplus_universal",b="appx_v1.1.5",S="behavior",T="19999",w={exposure:"2201",expose:"2201",EXP:"2201",IMPEXP:"2202",click:"2101",CLK:"2101",other:T,OTHER:T},R=m(16),C=1,O=!0,A=[],I=[],k=0,N={};t.AplusWindmillAppx=function(e){return void 0===e&&(e={}),h=e.callHandleLoggingAction||e.bridgeSend,_=e.startupParams,function(e,t,n,i){void 0===e&&(e=""),void 0===t&&(t={}),void 0===n&&(n={}),void 0===i&&(i="");var f=n.extData||{};c(n.pagesViewIds||[]);var v="",m=t.currentPagePath;m&&(v=m.replace(/\//g,"_"));var y=f.param||{},b=f.activityId||y.activityId;b&&(v+="_"+b);var T=e;"commitut"===T&&f&&f.type&&("updateNextProp"===(T=f.type)&&(T="updateNextPageProperties"));var w=f["spm-cnt"]||y["spm-cnt"]||"",R=f["spm-url"]||y["spm-url"]||"",I=f["spm-pre"]||y["spm-pre"]||"",k="MiniApp_"+t.appId+"."+v+".0.0",N=u(f),P=_.launchParams||{};["enter","pageview","updatePageProperties"].indexOf(T)>-1&&A.length>0&&(f.spmId=k,function(e,t,n){var r=A.length,i=A[r-1]._appxUTSpm;try{n&&"string"==typeof n&&(n=JSON.parse(n));var o="object"==typeof n;(!o||o&&"YES"!==n.customSpm)&&(i&&0!==i.indexOf("MiniApp_")||(A[r-1]._appxUTSpm=e||t))}catch(n){E("launchParams",{errorMsg:n}),i&&0!==i.indexOf("MiniApp_")||(A[r-1]._appxUTSpm=e||t)}var a=_.spm||"";O&&a&&(A[r-1]._appxUTSpmUrl=a)}(w,k,P),N=u(f));var D=N._spmCnt,x=void 0===D?"":D,L=N._spmUrl,M=void 0===L?"":L,U=N._spmPre,j=void 0===U?"":U,V=N.pageName,B=void 0===V?"":V,F=w||x||"",W=R||M||"",G=I||j||"";switch(T){case"enter":case"pageview":if("pageview"===T&&"YES"===P.customSpm)return;var H=B;!H&&F&&(H=t.appId+"_"+m),H&&r(t,H);var z={};for(var K in F&&(z["spm-cnt"]=F),W&&(z["spm-url"]=W),G&&(z["spm-pre"]=G),f.param)z[K]=f.param[K];if(O&&(z._p_entry_flag=C,O=!1),a(t,f,z),F||W){var Y={};F&&(Y["spm-url"]=F),W&&(Y["spm-pre"]=W),E("updateNextPageProperties",Y),h({type:S,subType:"updateNextPageProperties",commonData:t,extData:Y})}var q=f.pluginId;q&&p({subType:T,commonData:t,pageName:B,pluginIds:[q]});break;case"updatePageName":r(t,B);break;case"updatePageUrl":!function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=t.pageUrl||t.url||e.currentPagePath;h({type:S,subType:"updatePageUrl",commonData:e,extData:{pageUrl:n}})}(t,f);break;case"updatePageProperties":var J={};for(var K in F&&(J["spm-cnt"]=F),W&&(J["spm-url"]=W),G&&(J["spm-pre"]=G),f.param)J[K]=f.param[K];if(a(t,f,J),F||W){var X={};F&&(X["spm-url"]=F),W&&(X["spm-pre"]=W),h({type:S,subType:"updateNextPageProperties",commonData:t,extData:X})}break;case"updateNextPageProperties":var Q=f||{};f&&f.params&&(Q=f.params);var Z={};for(var K in Q)Z[K]=Q[K];Q["spm-url"]&&(Z["spm-url"]=Q["spm-url"],d(Q["spm-url"])),h({type:S,subType:T,commonData:t,extData:Z});break;case"updatePageUtparam":case"updateNextPageUtparam":var $=f||{};f&&f.utParamJson&&"string"==typeof f.utParamJson&&($=JSON.parse(f.utParamJson)),h({type:S,subType:T,commonData:t,extData:$});break;case"skipPage":case"pageAppear":case"pageDisappear":h({type:S,subType:T,commonData:t,extData:{}});break;case"customAdvance":f["spm-cnt"]=F,s(T,t,f,B);break;case"aplusDebug":f&&g(f.isDebug);break;case"getPageSpmUrl":o("spmUrl",i);break;case"getPageSpmPre":o("spmPre",i);break;case"getPageAllProperties":!function(e){var t=!1;h({type:S,subType:"getPageAllProperties"},(function(n){void 0===n&&(n={}),!t&&e(n),t=!0})),setTimeout((function(){if(!t){t=!0;e({status:"timeout"})}}),300)}(i);break;case"updateSessionProperties":l(T,t,f);break;case"pluginComponentView":var ee=f.pluginIds||[];ee.length>0&&p({subType:T,commonData:t,pageName:B,pluginIds:ee});break;case"click":case"exposure":case"other":default:f["spm-cnt"]=F;var te=f.spmC||y.spmC||f.pluginId||y.pluginId||"",ne=f.spmD||y.spmD||f.pointId||y.pointId||"";if(F&&te&&ne){var re=F.split("."),ie=[re[0],re[1],te,ne].join(".");d(ie),h({type:S,subType:"updateNextPageProperties",commonData:t,extData:{"spm-url":ie}})}s(T,t,f,B)}}}},function(e,t){"use strict";function n(e){void 0===e&&(e=!1),o=!!e}function r(e,t){try{o&&"object"==typeof console&&console.log&&(console.log("aplusDebugLog "+e+" start --- "),console.log(JSON.stringify(t)),console.log("--- end --- "))}catch(e){}}function i(e){function t(e){return 1==e?"0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ".substr(Math.floor(60*Math.random()),1):2==e?"0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ".substr(Math.floor(60*Math.random()),1):"0"}for(var n,r="",i=!1;r.length<e;)n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".substr(Math.floor(62*Math.random()),1),!i&&r.length<=2&&("g"==n.toLowerCase()||"l"==n.toLowerCase())&&(0===r.length&&"g"==n.toLowerCase()?Math.random()<.5&&(n=t(1),i=!0):1==r.length&&"l"==n.toLowerCase()&&"g"==r.charAt(0).toLowerCase()&&(n=t(2),i=!0)),r+=n;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomId=t.aplusDebugLog=t.isDebug=void 0;var o=!1;t.isDebug=n,t.aplusDebugLog=r,t.getRandomId=i,t.default={isDebug:n,aplusDebugLog:r,getRandomId:i}}])},function(e,t,n){n.p=window.__ASSET_PATH__},function(e,t){var n={t:1,i:!1,driver:null,rootComponents:{},rootInstances:{},owner:null};function r(e,t,n,r,i){return{type:e,key:t,ref:n,props:r,_owner:i}}function i(e){return null===e}function o(e){return"function"==typeof e}function a(e){return"object"==typeof e}function s(e){return"[object Object]"===f.toString.call(e)}function c(e){return Array.isArray(e)}function u(e){return"string"==typeof e}function d(e){return"number"==typeof e}function l(e){return!e}var p=function(){},f={};function h(e){if(null==e)return e;var t=[];return function e(t,n){if(c(t))for(var r=0,i=t.length;r<i;r++)e(t[r],n);else n.push(t)}(e,t),t.length-1?t:t[0]}var _=[],v=[],m=[],g=setTimeout;function E(e){for(var t;t=e.shift();)t()}function y(e){0===_.length&&g(b),_.push(e)}function b(){E(_)}function S(e){0===v.length&&g(T),v.push(e)}function T(){E(v)}function w(e){m.push(e)}function R(e,t,r){var i,o=void 0===r?"":" got: "+function(e){return s(e)?Object.keys(e):e}(r);return Error(e+": #"+t+", "+((i=n.owner)?"check <"+i.u()+">":"no owner")+"."+o)}function C(e,t){throw R("Error",e,t)}function O(e,t){var n=R("Warn",e,t);g((function(){throw n}),0)}var A={key:!0,ref:!0};function I(e,t,i){var o,a={},s=null,u=null;if(null!=t)for(o in u=void 0===t.ref?null:t.ref,s=void 0===t.key?null:""+t.key,t)A[o]||(a[o]=t[o]);var d=arguments.length-2;if(d>0)if(1!==d||c(i)){var l=i;if(d>1){l=Array(d);for(var f=0;f<d;f++)l[f]=arguments[f+2]}a.children=h(l)}else a.children=i;if(e&&e.defaultProps){var _=e.defaultProps;for(o in _)void 0===a[o]&&(a[o]=_[o])}return null==e&&(e=p,O(0)),new r(e,s,u,a,n.owner)}function k(e,t,n){for(var r=0,i=e&&e.length;r<i;r++)e[r].call(t,n)}var N=f.hasOwnProperty;function P(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function D(e,t){if(P(e,t))return!0;if(!a(e)||i(e)||!a(t)||i(t))return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var r=0;r<n.length;r++)if(!N.call(t,n[r])||!P(e[n[r]],t[n[r]]))return!1;return!0}var x="_internal",L="_instance",M="_nativeNode",U="_renderedComponent";function j(){return n.owner&&n.owner[L]}function V(){var e=j();if(e)return e;C(1)}function B(e,t){if(i(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!P(e[n],t[n]))return!1;return!0}function F(e){var t=V(),r=t.getHookID(),i=t.getHooks();i[r]||(o(e)&&(e=e()),i[r]=[e,function(e){n.i||T();var a=i[r],s=a[2];o(e)&&(e=e(s)),P(e,s)||(a[2]=e,j()===t?t.o=!0:t.h())},e]);var a=i[r];return P(a[0],a[2])||(a[0]=a[2],t.v=!0),a}function W(e,t){G(e,t)}function G(e,t,n){var r=V(),i=r.getHookID(),o=r.getHooks();if(t=void 0===t?null:t,o[i]){var a=o[i],s=a.l,c=a.p;a.p=t,a._=c,s.current=e}else{var u=function e(t){if(!t&&n)return S((function(){return e(!0)}));var r=e.current;r&&(d.current=r(),e.current=null)},d=function e(t){if(!t&&n)return S((function(){return e(!0)}));var r=e.current;r&&(r(),e.current=null)};u.current=e,o[i]={l:u,j:d,_:t,p:t},r.didMount.push(u),r.willUnmount.push((function(){return d(!0)})),r.didUpdate.push((function(){var e=o[i],t=e.p,n=e.l;null!=t&&B(t,e._)||(d(),n())}))}}function H(e,t){var n=V(),r=n.getHookID(),o=n.getHooks();if(t=void 0===t?null:t,o[r]){var a=o[r][1];!i(t)&&B(t,a)||(o[r]=[e(),t])}else o[r]=[e(),t];return o[r][0]}function z(e){return c(e)?e:[e]}function K(e,t){for(var n;e&&e[x];){if(t(e)){n=e;break}e=e[x].m}return n}var Y=0;function q(e){var t;return s(e)&&null!==e&&e.type?t=u(e.type)?new n.O(e):new n.g(e):u(e)||d(e)?t=new n.k(e+""):c(e)?t=new n.I(e):(void 0===e||i(e)||!1===e||!0===e||O(2,e),t=new n.C(e)),t}function J(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,X(e,t)}function X(e,t){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Q=function(){function e(e,t){this.props=e,this.context=t,this.refs={}}var t=e.prototype;return t.setState=function(e,t){this.updater.setState(this,e,t)},t.forceUpdate=function(e){this.updater.forceUpdate(this,e)},e}(),Z=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).A=!0,r}return J(t,e),t}(Q),$=1,ee=function(e){function t(){var t;return(t=e.call(this)||this).P=[],t.D=$++,t}J(t,e);var n=t.prototype;return n.N=function(){return this.S().N()},n.S=function(){return this[x][U]},n.h=function(e){this.P=e,this.forceUpdate()},n.render=function(){return this.P},t}(Q),te={set:function(e,t){e._r||(e._r=t,t.D&&(n.rootInstances[t.D]=t,n.rootComponents[t.D]=t[x]))},get:function(e){return e._r},remove:function(e){var t=this.get(e);t&&(e._r=null,t.D&&(delete n.rootComponents[t.D],delete n.rootInstances[t.D]))},mount:function(e,t,r){var i=r.parent,o=r.hydrate,a=n.driver;null==t&&(t=a.createBody());var s,c={element:e,container:t,hydrate:o};if(a.beforeRender&&a.beforeRender(c),i){var u=i[x];s=u.U(u._context)}var d=this.get(t);if(d&&d.D)return s&&(d[x].H=s),d.h(e),a.afterRender&&a.afterRender(c),d;var l=q(I(ee)).R(t,i,s||{});return this.set(t,l),l.h(e),a.afterRender&&a.afterRender(c),l}};function ne(e,t,n){var r=e?e.ref:null,i=t?t.ref:null;r!==i&&(r&&ie(e._owner,r,n),i&&re(t._owner,i,n))}function re(e,t,n){if(e){var r=n.N();o(t)?t(r):a(t)?t.current=r:e[L].refs[t]=r}else O(3)}function ie(e,t,n){if(o(t))t(null);else{var r=n.N();a(t)&&t.current===r?t.current=null:e[L].refs[t]===r&&delete e[L].refs[t]}}function oe(e,t){var n=l(e),r=l(t);return n||r?n===r:!(!c(e)||!c(t))||(u(e)||d(e)?u(t)||d(t):a(e)&&a(t)&&e.type===t.type&&e.key===t.key)}function ae(e,t,n){var r=t?t.key:void 0,i="."+n.toString(36);if(u(r)){var o="$"+r;return void 0===e[o]?o:i}return i}function se(e){for(var t=e;t=e.m&&e.m[x];)if(t instanceof n.g)e=t;else{for(var r=Object.keys(t.T),i=e.V-1;i>=0;i--){var o=t.T[r[i]].W();if(!c(o))return o;if(o.length>0)return o[o.length-1]}if(!(t instanceof n.I))return null;e=t}}var ce=function(){function e(e){this.Z=e}var t=e.prototype;return t.$=function(e,t,r){this._parent=e,this.m=t,this._context=r,this._mountID=n.t++},t.q=function(){this.Z=this[M]=this._parent=this.m=this._context=null,this[L]&&(this[L]=this[L][x]=null)},t.R=function(e,t,n,r){this.$(e,t,n),this.B(r);var i={};return i[x]=this,i},t.unmountComponent=function(e){this[M]&&!e&&n.driver.removeChild(this[M],this._parent),this.q()},t.u=function(){var e=this.Z,t=e&&e.type;return t&&t.displayName||t&&t.name||t||e},t.B=function(e){var t=this.W(),r=this._parent;e?e(t,r):n.driver.appendChild(t,r)},t.W=function(){return null==this[M]?this[M]=this.F():this[M]},t.N=function(){return this.W()},e}(),ue=Object.assign,de="style",le="children",pe=/^on[A-Z]/,fe=function(e){function t(){return e.apply(this,arguments)||this}J(t,e);var r=t.prototype;return r.R=function(e,t,n,r){this.$(e,t,n);var i=this.Z,o=i.props,a=i.type,s=o[le],c=o.append||"tree";this.G=ue({},o[de]);var u={type:a,props:o};return u[x]=this,this[L]=u,"tree"===c?(this.J(s,n),this.B(r)):(this.B(r),this.J(s,n)),i&&i.ref&&re(i._owner,i.ref,this),u},r.J=function(e,t){if(null==e)return e;var n=this.W();return this.K(n,z(e),t)},r.K=function(e,t,n,r){for(var i=this.T={},o=[],a=0,s=t.length;a<s;a++){var c=t[a],u=q(c);i[ae(i,c,a)]=u,u.V=a;var d=u.R(e,this[L],n,r);o.push(d)}return o},r.L=function(e){var t=this.T;if(t){for(var n in t)t[n].unmountComponent(e);this.T=null}},r.unmountComponent=function(e){if(this[M]){var t=this.Z.ref;t&&ie(this.Z._owner,t,this),te.remove(this[M]),e||n.driver.removeChild(this[M],this._parent)}this.L(!0),this.G=null,this.q()},r.M=function(e,t,n,r){this.Z=t,ne(e,t,this);var i=e.props,o=t.props;this.X(i,o),null==i[le]||c(i[le])&&0===i[le].length?this.J(o[le],r):this.Y(o[le],r)},r.X=function(e,t){var r,i,a,s=n.driver,c=this.W();for(r in e)if(r!==le&&null!=e[r]&&!t.hasOwnProperty(r))if(r===de){var u=this.G;for(i in u)(a=a||{})[i]="";this.G=null}else if(pe.test(r)){var d=e[r];o(d)&&s.removeEventListener(c,r.slice(2).toLowerCase(),d)}else s.removeAttribute(c,r,e[r]);for(r in t){var l=t[r],p=r===de?this.G:null!=e?e[r]:void 0;if(r!==le&&p!==l&&(null!=l||null!=p))if(r===de)if(l?l=this.G=ue({},l):this.G=null,null!=p){for(i in p)l&&(l[i]||0===l[i])||((a=a||{})[i]="");for(i in l)p[i]!==l[i]&&((a=a||{})[i]=l[i])}else a=l;else if(pe.test(r)){var f=r.slice(2).toLowerCase();o(p)&&s.removeEventListener(c,f,p,t),o(l)&&s.addEventListener(c,f,l,t)}else null!=l?s.setAttribute(c,r,l):s.removeAttribute(c,r,e[r])}a&&s.setStyle(c,a)},r.Y=function(e,t){var r=this.T,o=n.driver;if(null!=e||null!=r){var a={};if(null!=e)for(var s=0,u=(e=z(e)).length;s<u;s++){var d=e[s],l=ae(a,d,s),p=r&&r[l],f=p&&p.Z,h=p&&p._context;null!=p&&oe(f,d)?(f===d&&h===t||p.M(f,d,t,t),a[l]=p):(p&&(p.nn=!0),a[l]=q(d))}var _=this.W(),v=c(_),m=null,g=null,E=!1,y=!1,b=null,S=!(!o.removeChildren||!(i(e)||e&&!e.length)||v);if(null!=r){for(var T in r){var w=r[T],R=w.nn||!a[T];m?R&&w.unmountComponent(S):(y=R,c(g=(m=w).W())&&(E=0===g.length,g=g[0]))}(v&&0===_.length||E)&&(b=se(this))}var C=function(e,t){for(var n=0,r=(e=z(e)).length;n<r;n++)b?o.insertAfter(e[r-1-n],b):g?o.insertBefore(e[n],g):t&&o.appendChild(e[n],t)},O=0;for(var A in a){var I=a[A],k=r&&r[A];if(k===I){var N=k.W();k.V!==O&&C(N)}else v&&(_=this._parent),I.R(_,this[L],t,C);I.V=O++,c(b=I.W())&&(b=b[b.length-1])}y&&m.unmountComponent(S),S&&o.removeChildren(this[M]),this.T=a}},r.F=function(){var e=this[L],t=n.driver.createElement(e.type,e.props,this);return te.set(t,e),t},t}(ce),he=function(e){function t(t,n){var r;(r=e.call(this)||this).tn=!0,r.rn=t,r.un=0,r.fn=0,r.on={},r.o=!1,r.v=!1,r.en=null,r.sn={},r.didMount=[],r.didUpdate=[],r.willUnmount=[],r.state=f,t._forwardRef&&(r.cn=r._forwardRef=n);var i=t.hn;return i&&(r.shouldComponentUpdate=function(e){for(var t=!0,n=i.length-1;n>-1&&!(t=i[n](r.props,e));n--);return!t||r.cn!==r._forwardRef}),r}J(t,e);var n=t.prototype;return n.getHooks=function(){return this.on},n.getHookID=function(){return++this.un},n.useContext=function(e){var t=this,n=e._contextID,r=this.sn[n];if(!r){var i=e.an(this);if(r=this.sn[n]={vn:i},i){var o=function(e){r.ln!==e&&(t.v=!0,t.h())};i.pn(o),this.willUnmount.push((function(){return i.dn(o)}))}}return r.ln=r.vn?r.vn.getValue():e._defaultValue},n.componentWillMount=function(){this.v=!0},n.componentDidMount=function(){k(this.didMount)},n.componentWillReceiveProps=function(){this.v=!0},n.componentDidUpdate=function(){k(this.didUpdate)},n.componentWillUnmount=function(){k(this.willUnmount)},n.h=function(){this.setState(f)},n.render=function(){this.un=0,this.fn=0,this.o=!1;for(var e=this.rn(this.props,this._forwardRef?this._forwardRef:this.context);this.o;)this.fn++,this.fn>24&&C(4),this.un=0,this.o=!1,e=this.rn(this.props,this._forwardRef?this._forwardRef:this.context);return this.v&&(this.en=e,this.v=!1),this.en},t}(Q),_e=[];function ve(e){return e._n}function me(e){var t=e[x];if(t){n.i=!0;var r=t.Z,i=t._context,o=t.H||i;t.H=void 0,(ve(t)||t.xn)&&(t.M(r,r,i,o),E(m)),n.i=!1}}function ge(e,t){return t[x]._mountID-e[x]._mountID}function Ee(){if(n.i)return y(Ee);var e,t=_e;if(t.length>0)for(T(),_e=[],t.length>1&&(t=t.filter((function(e){return!!e[x]})).sort(ge));e=t.pop();)me(e)}function ye(e,t){if(_e.indexOf(e)<0&&_e.push(e),t){if(_e.length>1)return;y(Ee)}else Ee()}function be(e,t,n){var r=e[x];if(r){n&&function(e,t){(function(e){return e.wn}(e)||function(e){return e.wn=[]}(e)).push(t)}(r,n);var i=r[U];t?(e.tn&&(r.xn=!0),function(e,t){(ve(e)||function(e){return e._n=[]}(e)).push(t)}(r,t),!r.bn&&i&&ye(e,!0)):(r.xn=!0,i&&ye(e))}}var Se={setState:function(e,t,r){n.i||T(),be(e,t,r)},forceUpdate:function(e,t){be(e,null,t)}};function Te(e,t,n){try{return e()}catch(e){n?n(e):function(e,t){var n=K(e,(function(e){return e.componentDidCatch||e.constructor&&e.constructor.getDerivedStateFromError}));n?w((function(){var e=n[x];e&&Te((function(){if(n.componentDidCatch&&n.componentDidCatch(t),n.constructor&&n.constructor.getDerivedStateFromError){var e=n.constructor.getDerivedStateFromError(t);n.setState(e)}}),e.m)})):g((function(){throw t}),0)}(t,e)}}function we(e,t){w((function(){Te(e,t)}))}function Re(e,t){e&&we((function(){k(e,t)}),t)}var Ce=function(e){function t(){return e.apply(this,arguments)||this}J(t,e);var r=t.prototype;return r.R=function(e,t,r,i){this.$(e,t,r);var a,s,c=this.Z,u=c.type,d=c.ref,l=c.props,p=u.prototype,f=this.yn(r);if(Te((function(){p&&p.render?a=new u(l,f):o(u)?a=new he(u,d):C(6,u)}),t),a){a.props=l,a.context=f,a.refs={},a.updater=Se,a[x]=this,this[L]=a;var h=a.state;void 0===h&&(a.state=h=null),a.componentWillMount&&Te((function(){a.componentWillMount()}),a),n.owner=this,a.state=this.jn(l,f);var _=this.wn;return this.wn=null,Te((function(){s=a.render()}),a),n.owner=null,this[U]=q(s),this[U].R(this._parent,a,this.U(r),i),!c.type._forwardRef&&d&&re(c._owner,d,this),a.componentDidMount&&we((function(){a.componentDidMount()}),a),Re(_,a),a}},r.unmountComponent=function(e){var t=this[L];if(t&&t.componentWillUnmount&&Te((function(){t.componentWillUnmount()}),t),null!=this[U]){var n=this.Z,r=n.ref;!n.type._forwardRef&&r&&ie(n._owner,r,this),this[U].unmountComponent(e),this[U]=null}this._n=null,this.xn=!1,this.q()},r.yn=function(e){var t={},n=this.Z.type.contextTypes;if(n)for(var r in n)t[r]=e[r];return t},r.U=function(e){var t=this[L],n=t.getChildContext&&t.getChildContext();return n?ue({},e,n):e},r.jn=function(e,t){var n=this[L],r=this._n;if(!r)return n.state;this._n=null;for(var i=ue({},n.state),a=0;a<r.length;a++){var s=r[a];ue(i,o(s)?s.call(n,i,e,t):s)}return i},r.M=function(e,t,n,r){var i=this,o=this[L];o&&Te((function(){var n,a,s;i._context===r?a=o.context:(a=i.yn(r),n=!0),s=t.props,e!==t&&(n=!0),n&&o.componentWillReceiveProps&&(i.bn=!0,o.componentWillReceiveProps(s,a),i.bn=!1),i.Z.type._forwardRef?(o.cn=e.ref,o._forwardRef=t.ref):ne(e,t,i);var c=!0,u=o.props,d=o.state,l=i.jn(s,a),p=i.wn;if(i.wn=null,i.xn||(o.shouldComponentUpdate?c=o.shouldComponentUpdate(s,l,a):o.A&&(c=!D(u,s)||!D(d,l))),c){i.xn=!1;var f=o.context;o.componentWillUpdate&&o.componentWillUpdate(s,l,a),i.Z=t,i._context=r,o.props=s,o.state=l,o.context=a,i.mn(r),o.componentDidUpdate&&we((function(){o.componentDidUpdate(u,d,f)}),o)}else i.Z=t,i._context=r,o.props=s,o.state=l,o.context=a;Re(p,o)}),o)},r.mn=function(e){var t,r=this[U],i=r.Z,o=this[L];if(n.owner=this,t=o.render(),n.owner=null,oe(i,t)){var a=r._context,s=this.U(e);i===t&&a===s||r.M(i,t,a,s)}else{var u=null,d=r.W();c(d)&&0===d.length&&null==o.D&&(u=se(r)),r.unmountComponent(!0),this[U]=q(t),this[U].R(this._parent,o,this.U(e),(function(e,t){var r=n.driver;d=z(d),e=z(e);for(var i=0;i<e.length;i++){var o=e[i];d[i]?r.replaceChild(o,d[i]):u?r.insertAfter(o,u):r.appendChild(o,t),u=o}for(var a=e.length;a<d.length;a++)r.removeChild(d[a])}))}},r.W=function(){var e=this[U];if(e)return e.W()},r.N=function(){var e=this[L];return e.tn?null:e},t}(ce),Oe=function(e){function t(){return e.apply(this,arguments)||this}J(t,e);var r=t.prototype;return r.M=function(e,t){e!==(t=""+t)&&(this.Z=t,n.driver.updateText(this.W(),t))},r.F=function(){return n.driver.createText(this.Z,this)},t}(ce),Ae=function(e){function t(){return e.apply(this,arguments)||this}J(t,e);var r=t.prototype;return r.R=function(e,t,r,i){this.$(e,t,r);var o=this[L]={};o[x]=this;var a=[];if(this.K(this._parent,this.Z,r,(function(e){e=z(e);for(var t=0;t<e.length;t++)a.push(e[t])})),i)i(a,e);else for(var s=0;s<a.length;s++)n.driver.appendChild(a[s],e);return o},r.unmountComponent=function(e){if(!e)for(var t=this.W(),r=0,i=t.length;r<i;r++)n.driver.removeChild(t[r]);this.L(!0),this.q()},r.M=function(e,t,n,r){this.Z=t,this.Y(this.Z,r)},r.W=function(){var e=this.T||{};return[].concat.apply([],Object.keys(e).map((function(t){return e[t].W()})))},t}(fe),Ie=function(e){function t(){return e.apply(this,arguments)||this}J(t,e);var r=t.prototype;return r.F=function(){return n.driver.createEmpty(this)},r.M=function(){},t}(ce);n.C=Ie,n.O=fe,n.k=Oe,n.I=Ae,n.g=Ce;var ke={Host:n,Instance:te,Element:r,flattenChildren:h};t.Component=Q,t.Fragment=function(e){return e.children},t.PureComponent=Z,t.createContext=function(e){var t="_c"+Y++;function n(e){return K(e,(function(e){return e.On===t}))}return{Provider:function(){function n(){this.On=t,this.gn=[]}var r=n.prototype;return r.pn=function(e){this.gn.push(e)},r.dn=function(e){this.gn=this.gn.filter((function(t){return t!==e}))},r._getChildContext=function(){var e;return(e={})[t]=this,e},r.getValue=function(){return void 0!==this.props.value?this.props.value:e},r.componentDidUpdate=function(e){this.props.value!==e.value&&k(this.gn,null,this.getValue())},r.render=function(){return this.props.children},n}(),Consumer:function(r,i){var a=this,s=F((function(){return i[t]||n(a)}))[0],c=s?s.getValue():e,u=F(c),d=u[1];if(c===u[0]){W((function(){if(s)return s.pn(d),function(){s.dn(d)}}),[]);var l=z(r.children)[0];return o(l)?l(c):void 0}d(c)},_contextID:t,_defaultValue:e,an:n}},t.createElement=I,t.createRef=function(){return{current:null}},t.forwardRef=function(e){return e._forwardRef=!0,e},t.memo=function(e,t){return t=t||D,e.hn?e.hn.push(t):e.hn=[t],e},t.render=function(e,t,r,i){o(r)&&(i=r,r=null),(n.driver=(r=r||f).driver||n.driver)||C(5);var a=te.mount(e,t,r).N();return i&&i.call(a),a},t.shared=ke,t.useCallback=function(e,t){return H((function(){return e}),t)},t.useContext=function(e){return V().useContext(e)},t.useEffect=function(e,t){G(e,t,!0)},t.useImperativeHandle=function(e,t,n){W((function(){return o(e)?(e(t()),function(){return e(null)}):null!=e?(e.current=t(),function(){e.current=null}):void 0}),c(n)?n.concat([e]):null)},t.useLayoutEffect=W,t.useMemo=H,t.useReducer=function(e,t,r){var i=V(),a=i.getHookID(),s=i.getHooks(),c=s[a];if(!c){var u=o(r)?r(t):t;return s[a]=[u,function(e){n.i||T();var t=s[a][2];if(j()===i)t.kn.push(e),i.o=!0;else{var r=t.In,o=(0,t.Cn)(r,e);if(P(o,r))return;t.In=o,t.kn.push(e),i.h()}},{kn:[],Cn:e,In:u}]}var d=c[2],l=c[0];if(i.fn>0)for(var p=0;p<d.kn.length;p++)l=e(l,d.kn[p]);else l=d.In;return P(l,c[0])||(c[0]=l,i.v=!0),d.Cn=e,d.In=l,d.kn.length=0,s[a]},t.useRef=function(e){var t=V(),n=t.getHookID(),r=t.getHooks();return r[n]||(r[n]={current:e}),r[n]},t.useState=F,t.version="1.2.3"},function(e,t,n){"use strict";function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}n.r(t),n.d(t,"_interop_require_wildcard",(function(){return i})),n.d(t,"_",(function(){return i}))},function(e,t,n){var r=n(42).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=i=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof E?t:E,o=Object.create(i.prototype),a=new P(r||[]);return s(o,"_invoke",{value:A(e,n,a)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var _="suspendedStart",v="executing",m="completed",g={};function E(){}function y(){}function b(){}var S={};p(S,u,(function(){return this}));var T=Object.getPrototypeOf,w=T&&T(T(D([])));w&&w!==o&&a.call(w,u)&&(S=w);var R=b.prototype=E.prototype=Object.create(S);function C(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(i,o,s,c){var u=h(e[i],e,o);if("throw"!==u.type){var d=u.arg,l=d.value;return l&&"object"==r(l)&&a.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(l).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var i;s(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function A(e,n,r){var i=_;return function(o,a){if(i===v)throw new Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=I(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===_)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var u=h(e,n,r);if("normal"===u.type){if(i=r.done?m:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function I(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=h(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(r(e)+" is not iterable")}return y.prototype=b,s(R,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:y,configurable:!0}),y.displayName=p(b,l,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,p(e,l,"GeneratorFunction")),e.prototype=Object.create(R),e},n.awrap=function(e){return{__await:e}},C(O.prototype),p(O.prototype,d,(function(){return this})),n.AsyncIterator=O,n.async=function(e,t,r,i,o){void 0===o&&(o=Promise);var a=new O(f(e,t,r,i),o);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(R),p(R,l,"Generator"),p(R,u,(function(){return this})),p(R,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=D,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},n}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(44),a=(r=o)&&r.__esModule?r:{default:r};var s={},c=function(e){this.initAttrs(e)};c.prototype={attrs:{isLoggedIn:!1,isNewUser:!1,isFirstIn:!0,country:"",firstName:"",lastName:"",serviceType:"",memberSeq:"",locale:"",buyerLocale:"",buyerSite:"",buyerCurrency:""},get:function(e){return this._attrs[e]},set:function(e,t){this._attrs[e]=t},initAttrs:function(e){this._attrs=i(this.attrs,e||{})},setup:function(){var e={};if(a.default.get("xman_us_f"))for(var t=a.default.get("xman_us_f").split("&"),n=t.length;n--;){var r=t[n].split("=");e[r[0]]=r[1]}var i=a.default.get("xman_us_t"),o=a.default.get("xman_us_f"),s=/x_user=([^&"]+)/;i&&-1!==i.indexOf("sign=y")?this.set("isLoggedIn",!0):this.set("isLoggedIn",!1),o&&s.test(o)&&(o.match(s),(o=(o=RegExp.$1).split("|")).length>=5&&(this.set("country",o[0]),this.set("firstName",o[1].replace(/</g,"&lt;").replace(/>/g,"&gt;")),this.set("lastName",o[2].replace(/</g,"&lt;").replace(/>/g,"&gt;")),this.set("serviceType",o[3]),this.set("memberSeq",o[4])));var c=a.default.get("sc_g_cfg_f"),u={};if("string"==typeof c&&""!=c){for(var d=c.split("&"),l=d.length;l--;){var p=d[l].split("=");u[p[0]]=p[1]}this.set("buyerLocale",u.sc_b_locale),this.set("buyerSite",u.sc_b_site),this.set("buyerCurrency",u.sc_b_currency)}return""!==this.get("memberSeq")&&this.set("isNewUser",!0),""===a.default.get("ali_intl_firstIn")&&this.set("isFirstIn",!0),this.set("locale",e.x_locale||a.default.get("intl_locale")||"en_US"),this}},s=(new c).setup();var u=function(){var e=!0;return""!==s.get("memberSeq")&&(s.set("isNewUser",!1),e=!1),e};t.default={isLoggedIn:s.get("isLoggedIn"),isNewUser:u(),isFirstIn:s.get("isFirstIn"),country:s.get("country"),firstName:s.get("firstName"),lastName:s.get("lastName"),serviceType:s.get("serviceType"),memberSeq:s.get("memberSeq"),serverDomain:function(){var e;return s.setup(),e=s.get("serviceType"),["gs","cgs","twgs","hkgs","cnfm"].indexOf(e)>-1?"hz":"us"},getIsLoggedIn:function(){return s.setup(),s.get("isLoggedIn")},getIsNewUser:function(){return s.setup(),u()},getCountry:function(){return s.setup(),s.get("country")},getFirstName:function(){return s.setup(),s.get("firstName")},getLastName:function(){return s.setup(),s.get("lastName")},getServiceType:function(){return s.setup(),s.get("serviceType")},getMemberSeq:function(){return s.setup(),s.get("memberSeq")},getLocale:function(){return s.setup(),s.get("locale")},getIPData:function(e){s.getIPData(e)},getCNA:function(){return a.default.get("cna")},getCookie:function(e){return a.default.get(e)},getMemberId:function(){var e=a.default.get("ali_apache_track"),t="";return"string"==typeof e&&(e.match(/mid=([^&"]+)/),t=RegExp.$1),t},getBuyerLocale:function(){return s.setup(),s.get("buyerLocale")},getBuyerCurrency:function(){return s.setup(),s.get("buyerCurrency")},getBuyerSite:function(){return s.setup(),s.get("buyerSite")},getIsOversea:function(){var e=!0,t=a.default.get("xman_us_f");return t&&-1!==t.indexOf("x_l=1")&&(e=!1),t&&-1!==t.indexOf("x_l=0")&&(e=!0),e}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},i=decodeURIComponent,o=encodeURIComponent;function a(e){return"string"==typeof e}function s(e){return a(e)&&""!==e}function c(e){if(!s(e))throw new TypeError("Cookie name must be a non-empty string")}function u(e){return e}r.get=function(e,t){c(e),t="function"==typeof t?{converter:t}:t||{};var n=function(e,t){var n={};if(a(e)&&e.length>0)for(var r,o,s,c=t?i:u,d=e.split(/;\s/g),l=0,p=d.length;l<p;l++){if((s=d[l].match(/([^=]+)=/i))instanceof Array)try{r=i(s[1]),o=c(d[l].substring(s[1].length+1))}catch(e){}else r=i(d[l]),o="";r&&(n[r]=o)}return n}(document.cookie,!t.raw);return(t.converter||u)(n[e])},r.set=function(e,t,n){c(e);var r=(n=n||{}).expires,i=n.domain,a=n.path;n.raw||(t=o(String(t)));var u=e+"="+t,d=r;return"number"==typeof d&&(d=new Date).setDate(d.getDate()+r),d instanceof Date&&(u+="; expires="+d.toUTCString()),s(i)&&(u+="; domain="+i),s(a)&&(u+="; path="+a),n.secure&&(u+="; secure"),document.cookie=u,u},r.remove=function(e,t){return(t=t||{}).expires=new Date(0),this.set(e,"",t)},t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{_pluginList:function(){return o},getRegisterFunction:function(){return a},isPluginAvailable:function(){return s},_setPropertyWritable:function(){return c}});var r=n(46),i=n(50),o={};function a(e){return function(t){r._(t,Array)||(t=[t]),t.forEach((function(e){e&&e.isEnable&&!e.isEnable()||o[e.name]||(o[e.name]=e)})),function(e){var t=function(t){var n=function(e,t){var n=function(n){e[n]&&console.info("\u63d2\u4ef6\u4fee\u6539",e,n),Object.defineProperty(e,n,{get:function(){return t[n]},enumerable:!0,configurable:!0})};for(var r in t)n(r)},r=o[t],a=(r.name,r.version,i._(r,["name","version"]));for(var s in a){var c=a[s];"function"==typeof c&&(c=c(e)),n(e[s],c)}};for(var n in o)t(n)}(e)}}function s(e,t){if(!o[e])return!1;var n=o[e];return parseInt(n.version)>=parseInt(t)}function c(e){var t=function(t){Object.defineProperty(n,t,{get:function(){return e[t]},set:function(e){n[t]=e},enumerable:!0,configurable:!0})},n={};for(var r in e)t(r);return n}},function(e,t,n){"use strict";function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}n.r(t),n.d(t,"_instanceof",(function(){return r})),n.d(t,"_",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoxHeader=void 0;var r=function(e,t){var n=e.offset;this.start=t,this.size=e.read(4),this.type=String.fromCharCode(e.read(1),e.read(1),e.read(1),e.read(1)).trim(),1===this.size&&(this.size=e.read(8)),this.length=e.offset-n};t.BoxHeader=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasicLoader=t.ELoaderStatus=void 0;var a,s=o(n(21)),c=n(16),u=n(20);!function(e){e[e.IDLE=0]="IDLE",e[e.LOADING=1]="LOADING",e[e.SUSPENDED=2]="SUSPENDED",e[e.ERROR=3]="ERROR"}(a=t.ELoaderStatus||(t.ELoaderStatus={}));var d=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.timeout=15e3,n.total=1/0,n.offset=0,n.status=a.IDLE,n.url="",n._handleError=function(e){"AbortError"!==e.name&&(n._changeStatus(a.ERROR),n.emit("error",{code:c.EErrorCode.NETWORK,message:e.message,origin:e}))},n.timeout=t.timeout||n.timeout,n}return i(t,e),Object.defineProperty(t.prototype,"eof",{get:function(){return this.offset===this.total},enumerable:!1,configurable:!0}),t.prototype._changeStatus=function(e){this.status!==e&&(u.logger.log("loader status changed: ".concat(a[this.status]," -> ").concat(a[e])),this.status=e)},t.prototype.jump=function(e){this.offset=e},t.prototype.load=function(e,t,n){return this.reset(),this.url=e,this.loadRange(t,n)},t.prototype.resume=function(){return this.loadRange(this.offset)},t.prototype.suspend=function(){var e=this.status;this._abort(),e===a.LOADING&&(this._changeStatus(a.SUSPENDED),this.emit("suspend"))},t.prototype.abort=function(){var e=this.status;this._abort(),e!==a.SUSPENDED&&e!==a.LOADING||this.emit("abort")},t.prototype.reset=function(){this.abort(),this.offset=0,this.total=1/0,this.url=""},t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},t}(s.default);t.BasicLoader=d},function(e,t,n){"use strict";n.r(t),n.d(t,"$adapter",(function(){return a})),n.d(t,"$env",(function(){return s})),n.d(t,"$helper",(function(){return c})),n.d(t,"$tracker",(function(){return i})),n.d(t,"$fetch",(function(){return ui})),n.d(t,"$logger",(function(){return di})),n.d(t,"$i18n",(function(){return li})),n.d(t,"$emitter",(function(){return pi})),n.d(t,"$perf",(function(){return fi})),n.d(t,"$hook",(function(){return hi})),n.d(t,"version",(function(){return _i})),n.d(t,"$call",(function(){return vi})),n.d(t,"$noop",(function(){return mi}));var r={};n.r(r),n.d(r,"PERF_FIRST_SCREEN",(function(){return ne})),n.d(r,"LOGGER_BEFORE_SEND",(function(){return re})),n.d(r,"FETCH_VALIDATE",(function(){return ie})),n.d(r,"FETCH_BEFORE",(function(){return oe})),n.d(r,"FETCH_SUCCESS",(function(){return ae}));var i={};n.r(i),n.d(i,"getItraceInstance",(function(){return pe})),n.d(i,"logger",(function(){return fe}));var o={};n.r(o),n.d(o,"setNativeBackHook",(function(){return Ze})),n.d(o,"on",(function(){return $e})),n.d(o,"off",(function(){return et})),n.d(o,"networkDetection",(function(){return tt})),n.d(o,"emit",(function(){return nt})),n.d(o,"setClipboard",(function(){return rt})),n.d(o,"setTitle",(function(){return it})),n.d(o,"isMethodAvailable",(function(){return ot})),n.d(o,"default",(function(){return at}));var a={};n.r(a),n.d(a,"app",(function(){return o})),n.d(a,"storage",(function(){return dn})),n.d(a,"user",(function(){return bn})),n.d(a,"cookie",(function(){return gt})),n.d(a,"env",(function(){return St})),n.d(a,"fetch",(function(){return xn})),n.d(a,"windVane",(function(){return Z})),n.d(a,"goto",(function(){return Un})),n.d(a,"jsonp",(function(){return Rn})),n.d(a,"getPerfInfo",(function(){return Ne})),n.d(a,"reportPageLoad",(function(){return Pe})),n.d(a,"loadFile",(function(){return jn}));var s={};n.r(s),n.d(s,"device",(function(){return Gn})),n.d(s,"speed",(function(){return Hn})),n.d(s,"user",(function(){return Kn})),n.d(s,"findLocale",(function(){return Nt})),n.d(s,"getLocale",(function(){return kt})),n.d(s,"getLocaleSync",(function(){return At})),n.d(s,"getDefaultLocale",(function(){return It})),n.d(s,"is",(function(){return Yn})),n.d(s,"app",(function(){return qn})),n.d(s,"locale",(function(){return Jn})),n.d(s,"defaultLocale",(function(){return Xn})),n.d(s,"getDirection",(function(){return Qn})),n.d(s,"direction",(function(){return Zn})),n.d(s,"setHTMLDir",(function(){return $n}));var c={};n.r(c),n.d(c,"is",(function(){return m})),n.d(c,"to",(function(){return er})),n.d(c,"xPath",(function(){return b})),n.d(c,"string",(function(){return w})),n.d(c,"object",(function(){return T})),n.d(c,"util",(function(){return S})),n.d(c,"url",(function(){return nr})),n.d(c,"goto",(function(){return ir}));var u=n(2),d=n.n(u),l="5.38",p="redfox",f=function(e,t){return Object.prototype.toString.call(e)===t};function h(e){return f(e,"[object Array]")}function _(e){return f(e,"[object Object]")}function v(e){return f(e,"[object Function]")}var m={integer:function(e){return/^[1-9]\d*$/.test(e)},decimal:function(e){return/^[-+]?[0-9]\d*(\.\d+)?$/.test(e)},string:function(e){return f(e,"[object String]")},object:_,number:function(e){return f(e,"[object Number]")},date:function(e){return f(e,"[object Date]")},bool:function(e){return f(e,"[object Boolean]")},array:h,func:v,existy:function(e){return null!=e},url:function(e){return"string"==typeof e&&/^(https?:)?[/]{2}/.test(e)}},g=Date.now(),E={tech:p,redfoxVersion:l,wk_trace:g},y={set:function(e,t){_(e)?Object.assign(E,e):E[e]=t},get:function(e){return e?E[e]:Object.assign({},E)}},b={get:function(e,t){var n=t.split("."),r=e;if(r){for(var i=0;i<n.length;i++){var o=n[i];if(!r||void 0===r[o])return;r=r[o]}return r}}},S={getICBUKitData:function(e){return b.get(e,"result")||b.get(e,"data")},call:function(e){if(m.func(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},noop:function(){}},T={pick:function(e,t,n){var r={};if(!m.object(e))return r;m.array(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];n&&!Object.prototype.hasOwnProperty.call(e,o)||(r[o]=e[o])}return r},filter:function(e,t){if(!m.object(e))return e;var n={};for(var r in e){var i=e[r];!0===S.call(t,i)&&(n[r]=i)}return n},map:function(e,t){var n={};for(var r in e)n[r]=S.call(t,r,e[r]);return n},merge:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){m.object(t)&&Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}))})),e},assign:function(e){if(!m.object(e))return e;var t={};for(var n in e){for(var r=e[n],i=void 0,o=(arguments.length<=1?0:arguments.length-1)-1;o>=0;o--){var a=o+1<1||arguments.length<=o+1?void 0:arguments[o+1];if(m.object(a)&&(i=a[n]),void 0!==i)break}void 0!==i&&(r=i),t[n]=r}return t}},w={hash:function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0},simpleRandom:function(){return Date.now()+"_"+Math.ceil(1e5*Math.random())},extract:function(e,t,n){var r=t.exec(e);if(r)return m.number(n)?r[n]:m.object(n)?T.map(n,(function(e,t){return m.number(t)?r[t]:void 0})):void 0},isEqual:function(e,t,n){return e=String(e),t=String(t),n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t},isMTOP:function(e){return/^mtop\./.test(e)}},R={get rawUrl(){var e=R.parse()||{};return""+e.host+e.path},get query(){return(R.parse()||{}).query||{}},get host(){return(R.parse()||{}).host},get hash(){return(R.parse()||{}).hash||{}},get path(){return(R.parse()||{}).path||""},getSafeLink:function(e){if(!e)return"";e&&(e=e.trim());/^\/\//.test(e)&&(e="https:"+e);return e},parse:A,appendQuery:function(e,t){var n=A(e);return Object.assign(n.query,t),O(n)},paramsToObject:function(e){var t={};if(!e)return t;var n=e.match(/(\w+)=([^&]+)/gi);if(!n)return t;for(var r=0;r<n.length;r++){var i=n[r].split("=");t[i[0]]=i[1]}return t},objectToParams:C,stringify:O};function C(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n="&"),!m.object(e))return"";var r=[];for(var i in e){var o=e[i],a=o;m.object(o)?a=C(o):m.array(o)&&(a=o.join(",")),t&&(a=encodeURIComponent(a)),r.push(i+"="+a)}return r.join(n)}function O(e){var t=e.host,n=e.protocol,r=e.path,i=e.query,o=e.hash,a=e.port,s=n+"://"+t;a&&(s+=":"+a),s+=r;var c=C(i),u=C(o);return c&&(s+="?"+c),u&&(s+="#"+u),s}function A(e){var t;if(e||"undefined"!=typeof location){e=e||(null===(t=location)||void 0===t?void 0:t.href);var n=w.extract(e,/^(https?):\/\/(.+?)(:(\d+))?(\/(.*?))?([#?].*)?$/gi,{protocol:1,host:2,port:4,path:5,extendString:7});if(n){var r=w.extract(n.extendString,/\?(.+?)(#.*)?$/,1),i=w.extract(n.extendString,/#(.+?)(\?.*)?$/,1);return delete n.extendString,Object.assign(n,{queryString:r,hashString:i,query:R.paramsToObject(r),hash:R.paramsToObject(i)}),n.rawUrl=n.host,n.port&&(n.rawUrl+=":"+n.port),n.rawUrl+=n.path,n}}}var I=R,k=n(8),N="pageName",P={get systemVersion(){return D()},get systemVersionCode(){return x()},get isDebug(){return!!(e=D())&&!/^(\d+\.){2}\d+$/gi.test(e);var e},leVersion:L,geVersion:M,getSystemVersion:function(e){e(D())},getSystemVerCode:function(e){e(x())},compareVersion:U,geVersionAsync:function(e,t){t({result:M(e)})},leVersionAsync:function(e,t){t({result:L(e)})}};function D(){if(k.c){var e=navigator.userAgent.match(/AliApp\(\w+\/((\d+\.){2}\d+\.*[\w]*)/);if(e&&e.length>1)return e[1]}return""}function x(){var e=999999,t=k.b&&window.__alibaba_environment__;return t&&t.appVersionCode&&(e=parseInt(t.appVersionCode)),e}function L(e){return U(e,null)>=0}function M(e){return U(e,null)<=0}function U(e,t){var n=t||D();if(!n)return 0;for(var r=e.split("."),i=n.split("."),o=0;o<3;o++){var a=Number(r[o]),s=Number(i[o]);if(a>s)return 1;if(s>a)return-1;if(!isNaN(a)&&isNaN(s))return 1;if(isNaN(a)&&!isNaN(s))return-1}return 0}var j=n(17),V=n.n(j),B=null;function F(){return B||(!function(){var e=window,t=window.lib||(window.lib={}),n=e.Promise,r=e.document,i=e.navigator.userAgent,o=/Windows\sPhone\s(?:OS\s)?[\d\.]+/i.test(i)||/Windows\sNT\s[\d\.]+/i.test(i),a=o&&e.WindVane_Win_Private&&e.WindVane_Win_Private.call,s=/iPhone|iPad|iPod/i.test(i),c=/Android/i.test(i),u=i.match(/WindVane[\/\s](\d+[._]\d+[._]\d+)/),d=Object.prototype.hasOwnProperty,l=t.windvane=e.WindVane||(e.WindVane={version:"3.0.7"}),p=Math.floor(65536*Math.random()),f=1,h=[];function _(e,t){e=e.toString().split("."),t=t.toString().split(".");for(var n=0;n<e.length||n<t.length;n++){var r=parseInt(e[n],10),i=parseInt(t[n],10);if(isNaN(r)&&(r=0),isNaN(i)&&(i=0),r<i)return-1;if(r>i)return 1}return 0}var v={isAvailable:1===_(u=u?(u[1]||"0.0.0").replace(/\_/g,"."):"0.0.0","0"),isNewBridgeAvailable:1===_(u,c?"8.3.0":"8.2.0"),call2:function(e,t,n,r,i){var o=e.indexOf(".");return v.call(e.substr(0,o),e.substr(o+1),t,n,r,i)},call:function(t,r,i,o,a,s){var u,d;"number"==typeof arguments[arguments.length-1]&&(s=arguments[arguments.length-1]),"function"!=typeof o&&(o=null),"function"!=typeof a&&(a=null),!n||o||a||(d=new n((function(e,t){o=e,a=t})));var l=(""+r).indexOf(".")>-1;if((!c||!l)&&v.isNewBridgeAvailable&&e.__windvane__&&(!e.__windvane__.call&&e.__windvane__.windVaneCoreJs&&new Function(e.__windvane__.windVaneCoreJs())(),e.__windvane__.call))return e.__windvane__.call(t+"."+r,i,o,a,s),d;u=m.getSid();var p={success:o,failure:a};return s>0&&(p.timeout=setTimeout((function(){v.onFailure(u,{ret:"HY_TIMEOUT"})}),s)),m.registerCall(u,p),m.registerGC(u,s),v.isAvailable?m.callMethod(t,r,i,u):v.onFailure(u,{ret:"HY_NOT_IN_WINDVANE"}),d},fireEvent:function(e,t){var n=r.createEvent("HTMLEvents");n.initEvent(e,!1,!0),n.param=m.parseData(t),r.dispatchEvent(n)},getParam:function(e){return m.getParam(e)},setData:function(){},find:function(e,t){t||m.unregisterCall(e,!1)},onSuccess:function(e,t,n){m.onComplete(e,t,"success",n)},onFailure:function(e,t){m.onComplete(e,t,"failure")}};v.isNewBridgeAvailable&&e.__windvane__&&e.__windvane__.callSync&&(v.callSync=function(t,n){if(s)return e.__windvane__.callSync(t,n);if(c){var r={name:t};n&&(r.params=JSON.stringify(n));var i=e.__windvane__.callSync(r);if(i)try{return JSON.parse(i)}catch(e){}}});var m={params:{},calls:{},getSid:function(){return""+(p+f++)%65536},buildParam:function(e){return e&&"object"==typeof e?JSON.stringify(e):e||""},getParam:function(e){return this.params["param_"+e]||""},setParam:function(e,t){this.params["param_"+e]=t},parseData:function(e){var t;if(e&&"string"==typeof e)try{t=JSON.parse(e)}catch(n){t={ret:"HY_RESULT_PARSE_ERROR",originValue:e}}else t=e||{};return t},registerCall:function(e,t){this.calls[e]=t},unregisterCall:function(e,t){var n=this.calls[e]||{},r=n.timeout;return r&&clearTimeout(r),t||delete this.calls[e],n},useIframe:function(e,t){var n=h.pop();n||((n=r.createElement("iframe")).setAttribute("frameborder","0"),n.style.cssText="width:0;height:0;border:0;display:none;"),n.setAttribute("id","iframe_"+e),n.setAttribute("src",t),n.parentNode||setTimeout((function(){r.body.appendChild(n)}),5)},retrieveIframe:function(e){var t=r.querySelector("#iframe_"+e);if(t)if(h.length>=3)try{r.body.removeChild(t)}catch(e){}else h.indexOf(t)<0&&h.push(t)},callMethod:function(t,n,r,i){var u=m.buildParam(r);if(o)a?e.WindVane_Win_Private.call(t,n,i,u):this.onComplete(i,{ret:"HY_NO_HANDLER_ON_WP"},"failure");else if(s){this.setParam(i,u);var d="hybrid://"+t+":"+i+"/"+n+"?"+encodeURIComponent(u);this.useIframe(i,d)}else if(c){this.setParam(i,r);d="hybrid://"+t+":"+i+"/"+n+"?"+u;window.prompt(d,"wv_hybrid:")}else this.onComplete(i,{ret:"HY_NOT_SUPPORT_DEVICE"},"failure")},registerGC:function(e,t){var n=this,r=Math.max(t||0,6e5),i=Math.max(t||0,6e4);setTimeout((function(){n.unregisterCall(e)}),r),s&&setTimeout((function(){n.params["param_"+e]&&delete n.params["param_"+e]}),i)},onComplete:function(e,t,n,r){var i=this.unregisterCall(e,r),o=i.success,a=i.failure,c=(t=this.parseData(t)).ret;"string"==typeof c&&((t=t.value||t).ret||(t.ret=[c])),"success"===n?o&&o(t):"failure"===n&&a&&a(t),s&&(this.retrieveIframe(e),this.params["param_"+e]&&delete this.params["param_"+e])}};for(var g in v)d.call(l,g)||(l[g]=v[g])}(),B=window.WindVane),B}var W=S.call;function G(){return F()}var H=function(e,t,n,r,i){return function(e){if(m.string(e))try{e=JSON.parse(e)}catch(e){return W(r,e)}if(e){var t=m.array(e.ret)?e.ret[0]:e.ret;"HY_SUCCESS"!==t&&m.existy(t)?W(r,t):W(n,i?i(e):e)}else W(r)}},z=["apiName","parameters","apiVersion","method","auth"];function K(e,t){var n=H(0,0,e,t);X("ALICommon","getPlatFormInfo",{},(function(e){n(e)}))}function Y(e,t,n){X("ALICommon","fetchData",e,H(0,0,t,n),n)}function q(e,t,n){var r=e.apiName,i=e.parameters,o=e.apiVersion,a=e.method,s=void 0===a?"GET":a,c=e.auth,u=void 0===c?0:c,l=V()(e,z),p=d()({api:r,data:i,v:o||"1.0",method:s,needLogin:u},l),f=H(0,0,t,n,(function(e){var t=S.getICBUKitData(e),n=b.get(t,"data");if(n){n._reason_={msg:b.get(t,"msg"),ret:b.get(t,"ret"),code:b.get(t,"code")};var r=t._mtopStat_;r&&(n._mtopStat_=r)}return n}));Q("network","sendMtop",p,(function(e){f(e)}),n)}function J(e){var t={},n=Date.now();k.a.is.android&&Q("performance","recordInfo",{key:"clientOffset"}),Q("performance","getInfo",{},(function(r){var i=S.getICBUKitData(r),o=void 0!==i.mainDocZCacheTime,a=0,s=0;if(i){var c=1*i.clientOffset;for(var u in t.offset=n-c,i){var l=i[u];m.url(u)&&o?(u.indexOf(".css")>-1&&-1===l&&a++,u.indexOf(".js")>-1&&-1===l&&s++):t[u]=l}}t=d()({},t,{nonCacheForCSS:o?a:-1,nonCacheForJS:o?s:-1}),e(t)}))}function X(e,t,n,r,i,o){if(k.a.is.web&&k.a.is.windVane){var a=G();e=e||"ALICommon",n=n||{};var s=H(0,0,r,i);a.call(e,t,n,s,i,o)}else i&&i({msg:"not in windvane or not in web"})}function Q(e,t,n,r,i,o){if(k.a.is.web&&k.a.is.windVane){var a=G();n=n||{};var s=H(0,0,r,i,(function(e){var t=S.getICBUKitData(e);return e.data=t,e.result=t,e})),c=function(e,t,n){return function(r){n&&n(r);var i="unknown";try{i=JSON.stringify(r)}catch(e){console.error(e)}throw new Error("[redfox]\u7edf\u4e00\u5bb9\u5668\u9519\u8bef\uff0cclassName:"+e+",methodName:"+t+",\u539f\u56e0:"+i)}}(e,t,i),u={module:e,method:t,parameters:n};a.call("dispatcher","invoke",u,s,c,o)}else i&&i({msg:"not in windvane or not in web"})}var Z={getPerformanceLogInfo:J,getPlatFormInfo:K,fetchData:Y,fetchDataByICBUKit:q,doRouter:function(e,t){X("ALICommon","doRouter",e,t)},isMethodAvailable:function(e,t,n){S.call(n,!0)},call:X,callKit:Q},$={},ee={register:function(e,t){var n=$[e];n||($[e]=[],n=$[e]),h(t)||(t=[t]),t.forEach((function(e){v(e)&&n.push(e)}))},call:function(e,t){var n=$[e],r=S.call,i=0;return{next:function(e){!function o(){if(!h(n)||n.length<=i)return r(e,t);var a=n[i++];r(a,t,o)}()}}}};var te=function(){if(k.a.is.web){var e=window.lib||(window.lib={});return e._redfox_hook=e._redfox_hook||ee,e._redfox_hook}return ee}(),ne="$perf.firstScreen",re="$logger.beforeSend",ie="$fetch.validate",oe="$fetch.before",ae="$fetch.success",se={click:"commitClick",expose:"commitExposure",enter:"commitEnter",update:"commitUpdate",response:"commitResponse"},ce={click:"commitClickV2",expose:"commitExposureV2",enter:"commitEnterV2",update:"commitUpdateV2",response:"commitResponse"},ue=Z.callKit;var de=function(e,t,n,i){var o=i||{},a=o.isUseNewVersion,s=void 0!==a&&a,c=o.pageName,u=void 0===c?encodeURIComponent(""+location.host+location.pathname).replace(/%2F/g,"-").replace(/%/g,":"):c;for(var d in n)if(Object.prototype.hasOwnProperty.call(n,d)){var l=typeof n[d];"number"!==l&&"boolean"!==l||(n[d]=""+n[d])}te.call(r.LOGGER_BEFORE_SEND,{params:n,event:e,pageName:u,logKey:t}).next((function(r){var i=(s?ce:se)[e],o={pageName:u,args:r.params};"click"===e?o.controlName=t:"expose"===e?(o.exposeName=t,o.exposeTime=0):"enter"===e||"update"===e?o.pageURL=n.spm_id:"response"===e&&(o.eventName=t),ue("userTrack",i,o)}))},le=function(e,t,n){var i=I.objectToParams(n);/^\/.+\..+\..+$/.test(t)||(t="/sc.mobile."+t);var o="expose"===e?"EXP":"CLK",a={extend:i,params:n,event:e,eventType:o,logKey:t};te.call(r.LOGGER_BEFORE_SEND,a).next((function(e){(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[t,o,e.extend,"POST"]})}))};var pe=function(){return new Promise((function(e){var t=window.__wpk;t?e(t):location.host.indexOf(".alibaba.com")>-1&&new Promise((function(e){var t="https://s.alicdn.com/@g/woodpeckerx/jssdk??wpkReporter.js,plugins/flow.js";function n(e,t){void 0===t&&(t=function(){});var n=document.createElement("script");n.src=e,n.onload=t,document.head.append(n)}k.a.is.windVane?k.a.is.android?n(t,e):k.a.is.iOS&&e():n(t,e)})).then((function(){!function(e){var t=null;if(window.wpkReporter){try{var n,r=(null===(n=document.getElementsByTagName("meta")["wpk-bid"])||void 0===n?void 0:n.content)||"1rzf0qwp-hlppmnjl";t=new window.wpkReporter({bid:r,rel:function(){return l+"-"+(k.a.is.windVane?"app":"h5")},cluster:"intl",onlyCustomInUCCore:!1,plugins:k.a.is.android?[[window.wpkflowPlugin,{enable:!1}]]:[],supportBeaconBody:!1}),k.a.is.android?t.install():t.installAll()}catch(e){console.error("init wpkReporter fail",e)}window.__wpk=t,t&&S.call(e,t)}}((function(t){e(t)}))}))}))},fe=k.a.is.windVane?de:le,he=function(e,t,n){var r=y.get(N)||"",i=y.get("spm_id");n=Object.assign({},n,y.get());var o=null;(n=T.filter(n,(function(e){return m.existy(e)}))).customUTVersion&&(o=n.customUTVersion,delete n.customUTVersion);var a,s,c=o||y.get("utVersion"),u=(a=c,s=k.a.is.AliBuyer&&P.geVersion("7.46.0"),"v2"===a&&s);if(u){if(n.spmc=n.spmc||"0",n.spmd=n.spmd||"0",i){var l=i.split(".");n.spm=l[0]+"."+l[1]+"."+(n.spmc||"1")+"."+(n.spmd||"1")}}else if((n.spmc||n.spmd)&&i){var p=i.split(".");n.spm_id=p[0]+"."+p[1]+"."+(n.spmc||"")+"."+(n.spmd||""),delete n.spmc,delete n.spmd}k.a.is.windVane?(["rawUrl",N].forEach((function(e){n[e]=encodeURIComponent(n[e])})),n.rawUrl&&(n.rawUrl=n.rawUrl.replace(/%2F/g,"-").replace(/%/g,":"))):/^\/.+\..+\..+$/.test(t)||(t="/sc.mobile."+t);var f=d()({"spm-cnt":n.spm_id,pageName:r},n);fe(e,t,f,{pageName:r,isUseNewVersion:u})};function _e(){}var ve,me={firstScreen:_e,click:function(e,t){he("click",e,t)},expose:function(e,t){he("expose",e,t)},response:function(e,t){he("click",e,t)},enter:function(){},update:function(){},spaUpdate:function(){},_sendPagePV_:function(){}},ge=N,Ee={},ye=!1;k.a.is.web&&(ve=window.goldlog_queue||(window.goldlog_queue=[]));function be(e){var t=k.a.is.AliBuyer&&P.geVersion("7.46.0");return"v2"===e&&t}var Se=function(e){var t=function(){he(e?"update":"enter","",{});try{ve.push({action:"goldlog.setMetaInfo",arguments:["isonepage","1|Page_"+y.get(ge)]})}catch(e){console.error(e)}};t(),document.addEventListener("WV.Event.APP.Active",(function(){setTimeout((function(){t()}),500)}),!1)},Te=function(){var e;k.a.is.iOS&&(e=be(y.get("utVersion"))?"commitPageAppearV2":"commitPageAppear",Z.callKit("userTrack",e,{},(function(){})))};var we={firstScreen:_e,click:function(e,t){he("click",e,t)},expose:function(e,t){he("expose",e,t)},enter:function(){Se()},response:function(e,t){he("response",e,t)},update:function(){Se(!0)},spaUpdate:function(e,t){void 0===e&&(e={}),void 0===t&&(t=!1),function(e){if(k.a.is.windVane){var t=0;!function n(){try{var r=window.goldlog;if(r&&r.getMetaInfo&&r.getMetaInfo("aplus_chnl")){var i,o="icbuWindVane"===(null===(i=r.getMetaInfo("aplus_chnl"))||void 0===i?void 0:i.bridgeName);if(o)return void e(o)}}catch(e){console.info(e)}t>=10?e(!1):(t++,setTimeout(n,400))}()}}((function(n){t&&(Ee=e),n&&(ye=!0,ve.push({action:"goldlog.sendPV",arguments:[]})),Te(),k.a.is.iOS&&he("update","",d()({pageName:y.get(ge)},Ee)),document.addEventListener("WV.Event.APP.Active",(function(){Te(),he("update","",d()({pageName:y.get(ge)},Ee))}),!1)}))},_sendPagePV_:function(e){if(void 0===e&&(e={}),ye)return ye=!1,Ee=e,void he("update","",d()({pageName:y.get(ge)},Ee));var t;Ee=e,t=be(y.get("utVersion"))?"commitPageDisAppearV2":"commitPageDisAppear",Z.callKit("userTrack",t,{},(function(){})),Te(),he("update","",d()({pageName:y.get(ge)},Ee))}},Re=k.a.is.windVane?we:me,Ce=d()({CACHE:y,CACHE_KEY_PAGE_NAME:N,CACHE_KEY_UT_VERSION:"utVersion",CACHE_KEY_NEXT_SPM:"spmcd"},Re),Oe=function(){function e(){this.times=void 0,this.startStash=void 0,this.times={},this.startStash={}}var t=e.prototype;return t.get=function(e){var t=this.times;return e?t[e]:t},t.set=function(e,t){var n=this.times,r=this.startStash,i=n[e];if(m.existy(i))return i;var o=t||r[e]||Date.now();if(m.existy(r[e]))return n[e]=(t||Date.now())-r[e],delete r[e],n[e];r[e]=o},e}(),Ae=function(e){return"/sc.mobile.redfox-"+e},Ie=function(e,t,n){var r=e||{};function i(e){return e||"1"}return t&&m.object(t)&&(r.spmc=i(t.spmc),r.spmd=i(t.spmd)),r.spmd&&n&&(y.set("spmcd",i(r.spmc)+"."+i(r.spmd)),r.isPageView=!0),r},ke={Time:Oe,time:new Oe,get:y.get,set:y.set,constant:{CACHE_KEY_NEXT_SPM:"spmcd"},initial:function(e,t){var n=I,r=(t||{}).version,i=void 0===r?"v1":r;(e=Object.assign({rawUrl:n.rawUrl,displayName:(n.path||"").replace(/^\//,"").replace(/\/index\.html?/,"").replace(/[^\w]/gi,"_"),pageName:encodeURIComponent(n.rawUrl),bundleType:"app",techEnv:k.a.is.web?"web":"weex",wk_trace:y.get("wk_trace")},e)).enablePrefetchX=n.query.wh_prefetch?"Y":"N",e.wk_trace=""+e.wk_trace,e.utVersion=i,k.a.is.windVane&&e.pageName&&e.pageName.startsWith("Page_")&&(e.pageName=e.pageName.slice(5)),y.set(e)},click:function(e,t,n){m.bool(n)&&(e=Ae(e)),t=Ie(t,n,!0),Ce.click(e,t)},expose:function(e,t,n){m.bool(n)&&(e=Ae(e)),t=Ie(t,n),Ce.expose(e,t)},response:function(e,t,n){t=Ie(t,n),Ce.response(e,t)},enter:function(){Ce.enter()},update:function(){Ce.update()},_sendPagePV_:function(e){Ce._sendPagePV_(e)},spaEnter:function(){(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.sendPV",arguments:[{is_auto:!1},d()({},y.get())]})},spaUpdate:function(e,t){Ce.spaUpdate(e,t)}};function Ne(e){k.a.is.windVane&&k.a.is.web?J(e):e(null)}var Pe=function(e){if(k.a.is.windVane){var t=(e||{}).exposed,n=void 0!==t&&t;try{Q("container","pageLoad",{exposed:n})}catch(e){console.error("reportPageLoad error",e)}}};var De="actived";function xe(){I.query.wx_page_prefetch&&k.a.is.windVane&&(De="waiting",document.addEventListener("WV.Event.APP.Active",(function(){De="actived"}),!1))}xe();var Le={},Me=new Oe,Ue={time:Me,initial:function(e){this.set("initial",1*(e||y.get("wk_trace")))},firstScreen:function(){},get:function(e){return e?Le[e]:Le},set:function(e,t){var n=m;n.string(e)&&!n.existy(t)&&(t=Date.now());var r=function(e,t){var n,r,i=m;i.string(e)?((r={})[e]=t,n=r):i.object(e)&&(n=e);if(n){var o={};for(var a in n)Le.hasOwnProperty(a)||(o[a]=n[a]);return o}}(e,t);Object.assign(Le,r,function(){var e=Me.get(),t={};for(var n in e)t[n+"Time"]=e[n];return t}())},setDiffAbs:function(e,t,n){var r=m,i=Le[t||"initial"];if(r.number(i)){var o=Le[n];r.number(o)||(o=Date.now());var a=Math.abs(i-o);this.set(e,a)}}};!function(){if(k.a.is.web){var e,t=null===(e=document.getElementsByTagName("meta")["icbu-h5-disable-shake-hands"])||void 0===e?void 0:e.content;if(t&&"true"===t)return;Pe(),"complete"===document.readyState?Pe({exposed:!0}):window.addEventListener("load",(function(){Pe({exposed:!0})}))}}(),k.a.is.web&&(xe(),te.register(r.LOGGER_BEFORE_SEND,(function(e,t){!function e(t){"actived"===De?t&&t():setTimeout((function(){e(t)}),500)}((function(){S.call(t,e)}))})));var je=Ue,Ve=k.a.is.web,Be=k.a.is.windVane;var Fe={isMethodAvailable:function(e,t,n){n(!(!Be||!Ve))},setTitle:function(e){Ve&&(document.title=e),Be&&Ve&&X(null,"setNavigationInfo",{titleText:e})},getNetworkTypeFormat:function(e){var t="unknown";if("string"==typeof e)switch(e=e.toLowerCase()){case"wifi":case"ethernet":case"wimax":t="wifi";break;case"cell":case"2g":case"3g":case"4g":case"5g":case"cellular":t="cell"}return t.toUpperCase()}},We={__hasInit:!1};var Ge=n(24),He=n.n(Ge),ze=n(14),Ke=n.n(ze),Ye=k.a.is.web,qe={},Je={};function Xe(){return(Xe=He()(Ke.a.mark((function e(t){var n,r;return Ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ye&&(n=qe[t],r=Je[t],document.removeEventListener("Broadcast.Message."+n,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){return(Qe=He()(Ke.a.mark((function e(t,n){var r,i,o;return Ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),Ye&&(i=function(e){var t=e.param;n(t)},o=r+"-"+t,qe[t]=o,Je[t]=i,X("WVBroadcast","createChannel",{instanceId:o,name:t}),document.addEventListener("Broadcast.Message."+o,i));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ze=k.a.is.windVane?function(e,t,n){var r=e.disableiOSGesture;window._windvane_backControl=function(){return!1};var i=P.geVersion("7.44.0")&&k.a.is.AliBuyer,o=P.geVersion("10.27.0")&&k.a.is.AliSeller;i||o?(Q("container","enableHookNativeBack",{}),r&&k.a.is.iOS&&Q("container","forbidPanGesture",{}),window._windvane_backControl=function(){return!0},document.addEventListener("wvBackClickEvent",(function(){t&&t()}))):n&&n()}:function(){},$e=k.a.is.windVane?function(e,t){!function(){Qe.apply(this,arguments)}(e,(function(e){try{var n=null;n="string"==typeof e?JSON.parse(e):e,t(n)}catch(e){console.error(e)}}))}:function(e,t){We.__hasInit?window.addEventListener("message",(function(e){var t=b.get(e,"data.eventName"),n=We[t];n&&(e.origin.indexOf(".alibaba.com")>-1?n(b.get(e,"data.data")):console.info("origin\u975ealibaba\u57df\uff0cevent\u5931\u6548",e))}),!1):We.__hasInit=!0,We["@ali/redfox-"+e]=t},et=k.a.is.windVane?function(e){!function(){Xe.apply(this,arguments)}(e)}:function(e){var t="@ali/redfox-"+e;We[t]&&delete We[t]},tt=k.a.is.windVane?function(e){X("WVNetwork","getNetworkType",{},(function(t){e&&e({type:Fe.getNetworkTypeFormat(t.type)})}),(function(){e&&e({type:Fe.getNetworkTypeFormat("unknown")})}))}:function(e){var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{},n=t.type,r=t.effectiveType;e&&e({type:Fe.getNetworkTypeFormat(n||r)})},nt=k.a.is.windVane?function(e,t){void 0===t&&(t={}),Q("broadcast","emit",{name:e,data:t})}:function(e,t){void 0===t&&(t={});for(var n=window.frames,r=[window.parent],i=n.length,o=0;o<i;o++)r.push(n[o]);var a=I.query.wx_page_origin||location.origin;r.forEach((function(n){n.postMessage({eventName:"@ali/redfox-"+e,data:t},a)}))},rt=k.a.is.windVane?function(e,t){var n=t.hintStr,r=t.successHandler;X("Base","copyToClipboard",{text:e},(function(){n&&X("WVUIToast","toast",{message:n,duration:3}),r&&r()}),t.failHandler)}:function(e,t){void 0===e&&(e="");var n=t.successHandler,r=t.failHandler;navigator.clipboard.writeText(e).then(n).catch(r)},it=Fe.setTitle,ot=Fe.isMethodAvailable,at={setTitle:it,isMethodAvailable:ot,setNativeBackHook:Ze,on:$e,off:et,emit:nt,setClipboard:rt,networkDetection:tt},st=S.call,ct={},ut=function(e){if(ct.platform)return st(e,ct.platform);K((function(t){m.string(t)&&(t=JSON.parse(t)),ct.platform=t,st(e,t)}))};function dt(){var e,t=k.a.is.web&&window.__alibaba_environment__,n=k.a.is.node&&"undefined"!=typeof alibaba_ssr_env&&(null===(e=alibaba_ssr_env)||void 0===e?void 0:e.request_headers);if(t||n)return{language:(null==t?void 0:t.appLanguage)||(null==n?void 0:n.language),region:k.a.is.AliSeller?"CN":(null==t?void 0:t.appCountry)||(null==n?void 0:n.region),currency:(null==t?void 0:t.appCurrency)||(null==n?void 0:n.currency),deviceId:(null==t?void 0:t.deviceId)||(null==n?void 0:n.deviceId)||(null==n?void 0:n.utdid),statusBarHeight:(null==t?void 0:t.statusBarHeight)||(null==n?void 0:n.statusBarHeight)||(null==n?void 0:n.statusbarheight)}}var lt=function(){var e=dt();if(e)return T.pick(e,["language","region","currency"])};function pt(e){var t=e.indexOf("_");return t>0?e.substring(0,t):e}var ft={getLocaleFromWindVane:function(e){var t=lt();if(t)return st(e,t);k.a.is.web&&(k.a.is.AliBuyer?ut((function(t){if(!t)return st(e,{});var n={language:t.currentLang,region:t.localeCode,currency:t.currency||t.currencyCode};st(e,n)})):Q("locale","getLocaleInfo",{},(function(t){var n={language:S.getICBUKitData(t).languageMcms.toLowerCase().replace("_","-"),region:"CN",currency:""};st(e,n)})))},getPlatFormInfo:ut,detectConnection:tt,getLocaleFromEnv:lt,getAliEnv:dt};function ht(){}var _t=decodeURIComponent;function vt(e){return"string"==typeof e}function mt(e){return e}var gt={get:function(e,t){!function(e){if(t=e,!vt(t)||""===t)throw new TypeError("Cookie name must be a non-empty string");var t}(e),t="function"==typeof t?{converter:t}:t||{};var n=function(e,t){var n={};if(vt(e)&&e.length>0)for(var r,i,o,a=t?_t:mt,s=e.split(/;\s/g),c=0,u=s.length;c<u;c++){if((o=s[c].match(/([^=]+)=/i))instanceof Array)try{r=_t(o[1]),i=a(s[c].substring(o[1].length+1))}catch(e){}else r=_t(s[c]),i="";r&&(n[r]=i)}return n}(k.a.is.web?document.cookie:"",!t.raw);return(t.converter||mt)(n[e])},set:ht,remove:ht},Et=S.call;function yt(){var e=I.paramsToObject(gt.get("sc_g_cfg_f")||""),t=e.sc_b_locale||"";return{currency:e.sc_b_currency||"USD",region:e.sc_b_site||"us",language:pt(t)}}var bt,St={getLocale:function(e){if(k.a.is.windVane)return ft.getLocaleFromWindVane(e);var t=yt();Et(e,t)},getLocaleSync:function(){var e=ft.getLocaleFromEnv();return e||(k.a.is.web?yt():null)},getPlatFormInfo:ft.getPlatFormInfo,detectConnection:ft.detectConnection,getAliEnv:ft.getAliEnv},Tt=S.call,wt=["MM/DD/YYYY,US,en,en-us","DD/MM/YYYY,GB,en,en-us","DD/MM/YYYY,FR,fr,fr-fr","DD/MM/YYYY,ES,es,es-es","DD/MM/YYYY,IN,en,en-us","DD/MM/YYYY,ID,id,in-id","DD/MM/YYYY,ID,in,in-id","DD/MM/YYYY,PT,pt,pt-pt","DD/MM/YYYY,TR,tr,tr-tr","DD/MM/YYYY,UR,ur,en-us","DD/MM/YYYY,TH,th,th-th","DD/MM/YYYY,AR,ar,ar-sa","DD/MM/YYYY,MS,ms,ms-my","MM/DD/YYYY,CA,fr,fr-fr","DD/MM/YYYY,AU,en,en-us","DD.MM.YYYY,DE,de,de-de","DD.MM.YYYY,RU,ru,ru-ru","YYYY/MM/DD,JP,ja,ja-jp","MM/DD/YYYY,IT,it,it-it","YYYY/MM/DD,CN,zh-Hans,zh-cn","YYYY/MM/DD,CN,zh-Hant,zh-tw","YYYY/MM/DD,CN,zh,zh-cn","MM/DD/YYYY,KO,ko,ko-kr","MM/DD/YYYY,VN,vi,vi-vn","MM/DD/YYYY,IW,iw,iw-il","MM/DD/YYYY,IW,he,iw-il","MM/DD/YYYY,IN,hi,hi-in","MM/DD/YYYY,NL,nl,nl-nl","MM/DD/YYYY,US,en,pd-kv"],Rt={dateFormat:"YYYY-MM-DD",dateTimeFormat:"YYYY-MM-DD hh:mm:ss",language:"en",currency:"USD",region:"us",mcms:"en-us"},Ct={dateFormat:"YYYY/MM/DD",dateTimeFormat:"YYYY/MM/DD hh:mm:ss",language:"zh",currency:"USD",region:"cn",mcms:"zh-cn"};function Ot(e){var t=T.pick(e,["region","currency"],!0),n=Nt(e.language||"en-us");return Object.assign(n,t),bt=n}function At(){var e=St.getLocaleSync();return e?Ot(e):Object.assign({},bt||It())}function It(){return k.a.is.AliSeller?Ct:Rt}function kt(e){if(bt)return Tt(e,bt);St.getLocale((function(t){Tt(e,Ot(t))}))}function Nt(e){for(var t=0;t<wt.length;t++){var n=wt[t].split(","),r=n[0],i=n[1],o=n[2],a=n[3],s=/^\w\w-\w\w$/gi.test(e)?a:o;if(w.isEqual(e,s,!0))return{region:i,mcms:a,language:o,dateFormat:r,dateTimeFormat:r+" hh:mm:ss"}}return It()}var Pt=n(11),Dt=n.n(Pt);function xt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mt=Object.defineProperty,Ut=Object.defineProperties,jt=Object.getOwnPropertyDescriptors,Vt=Object.getOwnPropertySymbols,Bt=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable,Wt=function(e,t,n){return t in e?Mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Gt=function(e,t){for(var n in t||(t={}))Bt.call(t,n)&&Wt(e,n,t[n]);if(Vt)for(var r,i=xt(Vt(t));!(r=i()).done;){n=r.value;Ft.call(t,n)&&Wt(e,n,t[n])}return e},Ht=null,zt={init:function(e){try{return Ht||(Ht=new MutationObserver((t=e,n=100,r=null,function(){r&&clearTimeout(r),r=setTimeout((function(){t&&t()}),n)}))),zt}catch(e){console.log(e)}var t,n,r},start:function(){try{Ht&&Ht.observe(document.body,{childList:!0,subtree:!0})}catch(e){console.log(e)}},stop:function(){}},Kt=function(e){var t=e.queueArrayNormal,n=e.queueArrayEmpty;try{qt.mcmsAppnames.length&&qt.mcmsAppnames.forEach((function(e){var r,i,o=[],a=[];Array.isArray(t)&&t.length&&t.forEach((function(t){(e===qt.config.mcmsAppname&&!t.mcmsAppname||t.mcmsAppname===e)&&o.push(t.key)})),Array.isArray(n)&&n.length&&n.forEach((function(t){(e===qt.config.mcmsAppname&&!t.mcmsAppname||t.mcmsAppname===e)&&a.push(t.key)})),(o.length||a.length)&&function(e){try{if(null==window?void 0:window.__server__)return;var t=[];for(var n in e)"object"==typeof e[n]?t.push(n+"="+JSON.stringify(e[n])):t.push(n+"="+String(e[n]));var r=new Image;r.src="https://sc-assets-trade.cn-beijing.log.aliyuncs.com/logstores/intl_trace/track?APIVersion=0.6.0&__topic__=intl_trace-log&"+t.join("&"),r.onload=function(){r=null}}catch(e){console.log(e)}}({queueArrayNormal:o,queueArrayEmpty:a,config:(r=Gt({},qt.config),i={mcmsAppname:e},Ut(r,jt(i)))})}))}catch(e){console.log(e)}},Yt=function(){if(qt.queueArrayNormal.length||qt.queueArrayEmpty.length)try{for(;qt.queueArrayNormal.length>20||qt.queueArrayEmpty.length>20;){var e=qt.queueArrayNormal.splice(0,20),t=qt.queueArrayEmpty.splice(0,20);Kt({queueArrayNormal:e,queueArrayEmpty:t})}Kt({queueArrayNormal:qt.queueArrayNormal,queueArrayEmpty:qt.queueArrayEmpty}),qt.queueArrayNormal=[],qt.queueArrayEmpty=[]}catch(e){console.log(e)}},qt={config:{},queueArrayNormal:[],queueArrayEmpty:[],totalArray:[],totalEmptyArray:[],mcmsAppnames:[],setready:function(e){try{var t=(new Date).getTime(),n=Dt.a.getMemberSeq()||t;!Object.keys(qt.config).length&&e.defaultMcmsAppname&&parseInt((""+n).slice(-2),10)<(e.sampleRate||10)&&(qt.config={sceneName:window.location.origin+window.location.pathname||"",locale:Dt.a.getLocale().toLocaleLowerCase()||"",mcmsAppname:e.defaultMcmsAppname,serviceType:Dt.a.getServiceType()||""},e.defaultMcmsAppname&&!qt.mcmsAppnames.includes(e.defaultMcmsAppname)&&qt.mcmsAppnames.push(e.defaultMcmsAppname),"ifm"===Dt.a.getServiceType()&&(qt.config.locale=Dt.a.getBuyerLocale()||""),e.lang&&(qt.config.locale=e.lang),zt.init(Yt),zt.start()),e.mcmsAppname&&!qt.mcmsAppnames.includes(e.mcmsAppname)&&qt.mcmsAppnames.push(e.mcmsAppname)}catch(e){console.log(e)}},pushQueue:function(e,t,n){void 0===t&&(t="normal"),void 0===n&&(n="");try{if(n&&!qt.mcmsAppnames.includes(n)&&qt.mcmsAppnames.push(n),qt.totalArray.includes(e)){if("normal"===t&&qt.totalEmptyArray.length){var r=qt.totalEmptyArray.filter((function(t){return t!==e}));r.length!==qt.totalEmptyArray.length&&(qt.totalEmptyArray=r,qt.queueArrayNormal.push({key:e,mcmsAppname:n}))}}else qt.totalArray.push(e),"normal"===t?qt.queueArrayNormal.push({key:e,mcmsAppname:n}):(qt.queueArrayEmpty.push({key:e,mcmsAppname:n}),qt.totalEmptyArray.push(e))}catch(e){console.log(e)}}},Jt={},Xt="",Qt="",Zt=function(e,t,n,r){!function(e){var t=e.defaultMcmsAppname,n=void 0===t?"":t,r=e.sampleRate,i=void 0===r?10:r,o=e.lang;qt.setready({defaultMcmsAppname:n,sampleRate:i,lang:o})}({lang:t,defaultMcmsAppname:n,sampleRate:r}),Qt=t,Xt=n;for(var i=0;i<e.length;i++){var o=e[i],a=o[t]||{},s=o["en-us"]||{};for(var c in a){var u=a[c]||s[c];$t.set(c,u)}}},$t={has:function(e){return void 0!==Jt[e]},get:function(e){if("pd-kv"===Qt)return"##@@@"+e+"##"+Xt+"@@@##";var t=Jt[e]?"normal":"empty";return qt.pushQueue(e,t),Jt[e]||e},set:function(e,t){var n=m;n.string(e)?Jt[e]=t:n.object(e)&&Object.assign(Jt,e)},load:function(e,t){if(e){m.array(e)||(e=[e]),"string"==typeof t&&(t={searchWord:t,mcmsAppName:"",sampleRate:10});var n=t||{},r=n.searchWord,i=n.mcmsAppName,o=n.sampleRate;if(r){var a=Nt(r);Zt(e,a.mcms,i,o)}else kt((function(t){Zt(e,t.mcms,i,o)}))}}},en=$t;function tn(){}function nn(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this}function rn(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this}tn.prototype.on=nn,tn.prototype.addEventListener=nn,tn.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},tn.prototype.off=rn,tn.prototype.removeListener=rn,tn.prototype.removeAllListeners=rn,tn.prototype.removeEventListener=rn,tn.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},tn.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},tn.prototype.hasListeners=function(e){return!!this.listeners(e).length};var on=new tn,an={Emitter:tn,on:on.on,emit:on.emit,off:on.off},sn=function(e,t,n){fetch(e,{method:"get"}).then((function(e){e.text().then((function(e){t&&t(e)}))})).catch((function(e){n&&n(e)}))},cn={};"undefined"!=typeof localStorage&&localStorage&&(cn=localStorage);var un={getItem:function(e){return new Promise((function(t,n){cn.getItem?t(cn.getItem(e)):n()}))},setItem:function(e,t){return new Promise((function(n,r){cn.setItem?(cn.setItem(e,t),n(null)):r()}))},removeItem:function(e){return new Promise((function(t,n){cn.removeItem?(cn.removeItem(e),t(null)):n()}))},getAllKeys:function(){return new Promise((function(e){cn.length?e(Object.keys(cn)):e([])}))},clear:function(){return new Promise((function(e,t){cn.clear?(cn.clear(),e(null)):un.getAllKeys().then((function(n){Promise.all(n.map((function(e){return un.removeItem(e)}))).then((function(){return e(null)})).catch(t)}))}))},length:function(){return new Promise((function(e){null!=cn.length?e(cn.length):e(0)}))}},dn=un,ln=S.call,pn=function(){var e="",t=(gt.get("ali_apache_track")||"").match(/mid=([^&"]+)/);return m.array(t)&&t.length>0&&(e=t[1].split("|")[0]),e},fn=function(e){ln(e,hn())},hn=function(){var e=gt.get("xman_us_t");return!!e&&-1!==e.indexOf("sign=y")},_n=function(){return I.paramsToObject(gt.get("xman_us_t")).ctoken},vn={getCToken:_n,getUserInfo:function(e){var t={userId:pn(),loginId:pn(),cna:gt.get("cna")||"",aliBeaconId:gt.get("ali_beacon_id")||""};ln(e,t)},isLogin:fn,login:function(e,t){var n=t=t||{},r=n.isFocusLogin,i=n.isForceLogin;function o(){var e="https://passport.alibaba.com/mini_login.htm?appName=icbu&appEntrance=icbu_h5&styleType=auto&bizParams=&notLoadSsoView=false&notKeepLogin=false&isMobile=true&showKeepLogin=true&showHead=true&showWelcomePage=true&lang="+(t.mSiteLang||"en_US")+"&return_url="+encodeURIComponent(t.returnUrl);location.assign(e)}t=Object.assign({returnUrl:location.href},t),r||i?o():fn((function(t){if(t)return ln(e);o()}))},logout:function(e,t){var n=(t||{}).returnUrl,r="https://login.alibaba.com/xman/xlogout.htm?return_url="+(n=encodeURIComponent(n||location.href));location.assign(r)}},mn=S.call,gn=S.noop,En=function(e){var t=!1;Q("user","isLogin",{},(function(n){var r=S.getICBUKitData(n)||{};t=r.isLogin,mn(e,t)}))},yn={getCToken:gn,login:function(e,t){var n=t=t||{},r=n.isForceLogin,i=n.requestCookie,o=n.useLoadingUI,a={status:"notLogin"},s=P.geVersion("7.36.0")&&k.a.is.AliBuyer;if(!(P.geVersion("10.43.0")&&k.a.is.AliSeller)&&!s)return mn(e,a);function c(){var t=o&&i;t&&X(null,"showDialogLoading",{}),Q("user","login",{requestCookie:i},(function(n){t&&X(null,"dismissDialogLoading",{});var r=S.getICBUKitData(n);a.status=r.type,mn(e,a)}))}r?c():En((function(t){if(t&&hn())return a.status="fromSession",mn(e,a);c()}))},logout:function(e,t){var n=(t||{}).aliId;if(k.a.is.AliBuyer)X("ALICommon","logout",{},(function(){e()}));else if(k.a.is.AliSeller){var r={};n&&(r.aliId=n),X("user","logout",r,(function(){e()}))}else e()},getUserInfo:function(e,t){var n=(t||{}).aliId,r={};n&&(r.aliId=n),Q("user","getBaseInfo",r,(function(t){var n=S.getICBUKitData(t)||{};n.userId=n.loginId,mn(e,n)}),(function(){mn(e,{})}))},isLogin:En},bn=k.a.is.windVane?yn:vn;var Sn=S.call;function Tn(e){document.getElementsByTagName("head")[0].removeChild(e)}function wn(e){try{delete window[e]}catch(t){window[e]=void 0}}var Rn=function(e,t,n,r){var i,o=function(e){var t=null==e?void 0:e.fetchOptions;return Object.assign({},{callbackName:"jsonp_"+w.simpleRandom(),callbackKey:"callback",timeout:15e3},e,t)}(t),a=document.createElement("script"),s=o.callbackName,c=o.timeout,u=function(e,t){var n,r=t.callbackKey,i=t.callbackName,o=t.params,a=I.parse(e);return Object.assign(a.query,((n={})[r]=i,n),o),I.stringify(a)}(e,o);window[s]=function(e){var t=function(e){if(!performance)return[];var t=function(e,t,n){var r=e.serverTiming,i=r&&r.find((function(e){return e.name===t}));return i&&i[n]};try{var n=[];return performance.getEntriesByName(e).forEach((function(e){var r={rt:t(e,"rt","duration"),eagleid:t(e,"eagleid","description"),size:e.encodedBodySize,duration:e.duration};n.push(r)})),n}catch(e){return console.log(e),[]}}(u);Sn(n,e,t&&t[0]),i&&clearTimeout(i),Tn(a),wn(s)},a.setAttribute("src",u),document.getElementsByTagName("head")[0].appendChild(a),i=setTimeout((function(){Sn(r,new Error("JSONP request to "+u+" timed out")),Tn(a),window[s]=function(){wn(s)}}),c)},Cn=S.call,On=w.isMTOP,An={isMTOP:On,getFetchType:function(e,t){var n=t.type;return!n&&On(e)&&(n="mtop"),!n&&/^http/.test(e)&&(n="jsonp"),n},normalFetch:function(e,t,n,r){if(e){var i=d()({method:t.method,credentials:"same-origin"},t.fetchOptions);if(t.method||(t.method="get"),"post"===t.method.toLowerCase()&&m.object(t.params)){var o=P.geVersion("8.28.0")&&k.a.is.AliBuyer&&k.a.is.iOS,a=P.geVersion("10.76.0")&&k.a.is.AliSeller&&k.a.is.iOS;if(o||a){var s={api:I.getSafeLink(e),data:t.params,ua:navigator.userAgent,extraHeader:t.fetchOptions.headers};return void Z.callKit("network","sendPost",s,n,r)}var c=t.fetchOptions.headers["Content-Type"];c&&c.indexOf("application/json")>-1?i.body=JSON.stringify(t.params):i.body=function(e){var t,n=new FormData;for(var r in e)n.append(r,(t=e[r],(m.object(t)||m.array(t))&&(t=JSON.stringify(t)),t));return n}(t.params)}else"get"===t.method.toLowerCase()?m.object(t.params)&&(e=I.appendQuery(e,t.params)):i.body=t.params;fetch(e,i).then((function(e){return e.json()})).then((function(e){Cn(n,e)})).catch((function(e){Cn(r,e)}))}else Cn(r,{message:"no apiName, "+JSON.stringify(t)})},call:function(e,t,n,r,i){var o=this.getFetchType(e,t),a=this.normalFetch;switch(o){case"mtop":a=i;break;case"jsonp":a=Rn}"mtop"!==o&&(t.params=Object.assign({ctoken:_n(),_tb_token_:gt.get("_tb_token_")},t.params)),Cn(a,e,t,n,r)}};function In(e){var t=Object.keys(e),n={};return t.forEach((function(t){var r=e[t];m.string(r)?n[t]=r:n[t]=r+""})),n}var kn=S.call,Nn=function(e,t,n,r){var i=yt();t.params=t.params||{},["language","currency","countryCode"].forEach((function(e){t.params[e]=t.params[e]||i[e]})),function(e,t,n,r){var i=window.lib&&window.lib.mtop,o=t.v,a=t.params,s=t.ecode,c=t.method,u=void 0===c?"GET":c,d=t.env,l=t.fetchOptions||{},p=l.dataType,f=l.extraHeader;if(!i)return kn(r,"mtop.js is not found.");var h,_="acs",v="h";"pre"===d&&(h="pre-acs-cn",v="m"),/\.us$/.test(e)&&("pre"===d&&(h="use-pre-acs"),_="trade-acs",v="m"),i.config.prefix=h||_,i.config.subDomain=v,i.config.mainDomain="alibaba.com";var m={api:e,v:o||"1.0",type:u,data:JSON.stringify(a),appKey:i.config.appKey||"24889839",ecode:s,H5Request:!0};p&&(m.dataType=p),f&&(m.dataType="json",m.ext_headers=In(f)),i.request(m).then((function(e){kn(n,e)}),(function(e){var t=e.ret,n=(void 0===t?[]:t)[0],i=200;n&&n.indexOf("SESSION_EXPIRED")>-1&&(i=401),kn(r,{message:n=n||"mtop fetch error",statusCode:i,response:e})}))}(e,t,n,r)},Pn=["extraHeader"],Dn=function(e,t,n,r){var i,o=t.fetchOptions||{},a=o.extraHeader,s=V()(o,Pn),c=d()({parameters:t.params,apiVersion:t.v,auth:t.ecode,method:t.method},s),u=An.isMTOP(e)?"apiName":"interfaceName";return c[u]=e,a&&(c.extraHeader=In(a)),i=t.ecode,void(k.a.is.AliSeller||!i?q(c,n,r):Y(c,n,r))},xn=k.a.is.windVane?function(e,t,n,r){An.call(e,t,n,r,Dn)}:function(e,t,n,r){An.call(e,t,n,r,Nn)},Ln=S.call,Mn=S.noop,Un={back:function(e){var t=(e||{}).delta,n=void 0===t?1:t;if(k.a.is.windVane){if(k.a.is.AliBuyer&&location.href.indexOf("wx_no_anim=true")>-1&&k.a.is.iOS)return void X(null,"finishThisPage",{});Q("navigation","pop",{delta:n})}else history&&history.back()},assign:function(e,t){k.a.is.windVane?Q("navigation","push",{url:e,animated:!0},(function(){Ln(t)})):location.assign(e)},replace:function(e,t){if(k.a.is.windVane){if(k.a.is.AliBuyer&&k.a.is.iOS&&e.indexOf("enalibaba://")>-1)return void X(null,"doRouter",{url:e,backStep:1},(function(){Ln(t)}),Mn);Q("navigation","push",{url:e,animated:!1,isCloseSelf:!0},(function(){Ln(t)}))}else location.replace(e)},reload:function(){location.reload()}};var jn=sn,Vn=function(){return!("undefined"==typeof window||!window)&&(/iphone/gi.test(window.navigator.userAgent)&&window.screen.height>=812)},Bn=0,Fn=0;k.a.is.web&&Vn()&&(Bn=33e3/screen.width,Fn=25500/screen.width);var Wn={isIphoneXSeries:Vn(),isIphoneX:Vn(),statusBarHeight:Bn,navBarHeight:0,bottomBarHeight:Fn},Gn={get appBarHeight(){var e=104;return k.a.is.windVane&&(e=112),e},get navbarHeight(){return this.appBarHeight+this.statusBarHeight},get statusBarHeight(){var e=0;k.a.is.windVane&&(e=k.a.is.iOS?88:48);return e},get screenWidth(){return 750},get screenHeight(){var e=window.innerHeight,t=window.innerWidth;return Math.round(e*this.screenWidth/t)},get bottomBarHeight(){return Wn.bottomBarHeight||0}},Hn={getSpeed:function(){},setSpeed:function(){},detectConnection:function(e){return o.networkDetection(e)}},zn=S.call,Kn={isLogin:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){bn.isLogin(e)})),getUserInfo:function(e,t){bn.getUserInfo((function(t){zn(e,t)}),t)},login:function(e,t){bn.login(e,t)},logout:function(e){bn.logout(e)}},Yn=k.a.is,qn=P,Jn=At(),Xn=It(),Qn="he"===Jn.language||"iw"===Jn.language||"ar"===Jn.language?"rtl":"ltr",Zn=Qn,$n=function(){k.a.is.web&&document.getElementsByTagName("html")[0].setAttribute("dir",Qn)},er={JSON:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){try{if(m.string(e))return JSON.parse(e)}catch(e){console.warn(e)}})),bool:function(e){return Boolean(e)}},tr={ES:"spanish",PT:"portuguese",FR:"french",DE:"german",IT:"italian",TR:"turkish",TH:"thai",JP:"japanese",RU:"russian",KO:"korean",NL:"dutch",VN:"vietnamese",ID:"indonesian",AR:"arabic",IW:"hebrew",CN:"chinese"};var nr={appendQuery:I.appendQuery,getSafeLink:I.getSafeLink,objectToParams:I.objectToParams,stringify:I.stringify,parse:I.parse,paramsToObject:I.paramsToObject,get query(){return I.query},get hash(){return I.hash},get rawUrl(){return I.rawUrl},get host(){return I.host},get path(){return I.path},getSubDomain:function(e){return e=e||{ja:"JP",vi:"VN",in:"ID",he:"IW","zh-Hans":"CN","zh-Hant":"CN"}[Jn.language]||"",tr[e.toUpperCase()]||""},getHome:function(e){var t=this.getSubDomain(e);return"https://m."+(t+=t?".":"")+"alibaba.com/"},getDetail:function(e){void 0===e&&(e={});var t,n=e,r=n.id,i=n.region,o=e.subject,a=void 0===o?"product":o,s=Object.assign({},e.query);if(k.a.is.app)t="enalibaba://detail/",Object.assign(s,{id:r});else{a=a.replace(/[^\w]/gi,"-");var c=this.getSubDomain(i)?"p-detail/product-"+r+".html":"product/"+r+"/"+a+".html";t=""+this.getHome(i)+c}var u=I.objectToParams(s);return u&&(t+="?"+u),t},getMiniSite:function(e){var t,n=e=Object.assign({tab:"index"},e),r=n.id,i=n.tab,o=n.query,a=void 0===o?{}:o,s=n.host,c=Jn;if(Object.assign(a,{language:c.language,currency:c.currency}),k.a.is.app)t="https://alisite-mobile.alibaba.com/minisite/"+r+"/"+i+".htm",Object.assign(a,{wx_navbar_transparent:!0,wx_screen_direc:"portrait"});else{if(!s)return;t="//"+s+"/"+i+".html"}return t+="?"+I.objectToParams(a)},getPerformance:function(e){if(performance){var t=function(e,t,n){var r=e.serverTiming,i=r&&r.find((function(e){return e.name===t}));return i&&i[n]};try{var n=[];return performance.getEntriesByName(e).forEach((function(e){var r={rt:t(e,"rt","duration"),eagleid:t(e,"eagleid","description"),size:e.encodedBodySize,duration:e.duration};n.push(r)})),n}catch(e){console.log(e)}}}},rr=o.setNativeBackHook,ir={assign:function(e,t,n){m.object(t)&&!m.existy(n)&&(n=t,t=null),e=I.getSafeLink(e);var r=y.get("spm_id")||"";if(r&&k.a.is.web){var i="";if(/^\w+\.\w+$/.test(r)){var o=y.get("spmcd");i=r+"."+(o?encodeURI(o):"1.1")}else i=r;var a=e.indexOf("?")>-1?"&":"?";e=""+e+a+"spm="+i}Un.assign(e,t)},detail:function(e){var t=nr.getDetail(e);this.assign(t,{ignoreTrack:!0})},minisite:function(e){var t=nr.getMiniSite(e);t?this.assign(t,{ignoreTrack:!0}):console.error("Parameter is incorrect")},back:function(e){var t=(e||{}).delta,n=void 0===t?1:t;Un.back({delta:1*n})},setNativeBackHook:function(e,t,n){rr(e,t,n)},replace:function(e,t){e=I.getSafeLink(e),Un.replace(e,t)},reload:function(){Un.reload()},home:function(e){e=e||{};var t="//m.alibaba.com/";k.a.is.windVane&&(t="enalibaba://",k.a.is.iOS?t+="home":(t+="sc-home",e.frag="home")),t+="?"+I.objectToParams(e),this.assign(t)}},or=S.call,ar=function(e,t,n){var r=(n=n||{})[t];if(void 0===r)return"";switch(e){case"$":return decodeURIComponent(r);case"@":return encodeURIComponent(r);default:return r}},sr=function(e,t,n){for(var r,i=0;i<e.length;i++){var o=e[i],a=/^([@#$])(.+)\1$/gi.exec(o);if(a){var s=a[1],c=a[2];if(""!==(r=ar(s,c,t)))return r}else{var u=/^\$props\.(.+)$/gi.exec(o);if(u){if(r=b.get(n,u[1]),m.existy(r))return r}else r=o}}return r},cr=function(e,t,n,r){var i={};for(var o in e){var a=e[o],s=void 0;s=m.object(t)&&t.hasOwnProperty(o)?t[o]:m.object(a)&&a.detectable?sr(a.expression,n,r):a,i[o]=s}return i},ur=(w.isMTOP,function(e){return"preload_"+e}),dr=function(e,t,n){var r=Object.assign({freshAge:3600,cacheAge:86400,downloadTimestamp:Date.now()},{response:t},n);dn.setItem(e,JSON.stringify(r))},lr=function(e,t){return dn.getItem(e).then((function(n){var r;try{if(n){var i=JSON.parse(n),o=i.downloadTimestamp,a=i.cacheAge,s=i.freshAge,c=i.response,u=(Date.now()-o)/1e3;u>a?dn.removeItem(e):r={isFresh:u<=s,cacheKey:e,response:c}}}catch(e){console.warn(e)}return or(t,r)}))},pr=function(e,t,n){var r,i=e.apiConfig,o=e.params,a=e.method,s=i.api,c=i.data,u=i.v,d=i.ecode,l=i.method,p={v:u,ecode:d,method:a||l||"GET"};if(m.string(s))r=s;else if(m.object(s)){var f=k.a.is.windVane?s.weex||s.app:s.web;m.string(f)?r=f:m.object(f)&&(r=f.apiName,Object.assign(p,{type:f.type,method:f.method,options:f.options}))}return Object.assign(p,{apiName:r,params:cr(c,o,t,n)}),p},fr=function(e,t){var n=e.params,r=e.apiName,i=e.type,o={};Object.keys(n).sort().forEach((function(e){o[e]=n[e]}));var a="";a=w.isMTOP(r)&&k.a.is.windVane?JSON.stringify({apiName:r,data:o}):JSON.stringify({language:Jn.language,currency:Jn.currency,region:Jn.region,apiName:r,data:o,type:i});var s=w.hash(a);return or(t,s),s},hr=sr,_r=function(e,t){var n=t.match(e);return n.length>1?n[1]:n[0]},vr=function(e,t,n,r,i){var o=r.apiName,a=r.key,s=r.isFirstScreen,c=r.fetchRT,u=r.traceId,d=r.response,l=r.params,p=r.mtopStat,f=void 0===p?{}:p,h=f.netTotalTime,_=f.buildParamsTime,v=f.totalTime,m=f.waitCallbackTime,g=Date.now()+0,E=n+0,y=d&&JSON.stringify(d).length||0,b=l&&l.modelId,S=Object.assign({modelId:b,bodySize:y,status:t,fetchRT:c,traceId:u,startTimestamp:E,endTimestamp:g,apiName:encodeURIComponent(o),uniqueKey:a,isFirstScreen:s,isEarlyPrefetch:"false",duration:g-E,netTotalTime:h,buildParamsTime:_,totalTime:v,waitCallbackTime:m},i);fe("click",e,S);var T=b?"modelId-"+b+"/":"",w="";if(i&&"success"!==t)try{w=""+JSON.stringify(i)}catch(e){console.error(e)}if(pe().then((function(e){e.reportApiError&&e.reportApiError({msg:w,url:""+T+r.apiName,method:r.method,queryString:r.params,status:"success"===t?200:t,spent:g-E,c1:c,c2:y,c3:u,c4:b})})),s){var R=S,C="";if("false"===R.isEarlyPrefetch)try{C=JSON.stringify(window.__earlyPrefetchData||window.__epd2)}catch(e){console.error(e)}pe().then((function(e){e.report({category:104,msg:"\u9996\u5c4fAPI-\u65b0",wl_avgv1:R.totalTime,wl_avgv2:R.fetchRT,wl_avgv3:R.duration,w_succ:"true"===R.isEarlyPrefetch?1:0,bl1:C})}))}},mr=S.call,gr={},Er={},yr=function(e){e.success=!0,te.call(r.FETCH_SUCCESS,e).next(e.successHandler)},br=function(e,t,n){e.onFetchCompleteLog&&(n=d()({},e.onFetchCompleteLog(e,n)||{},n)),vr("api","success",t,e,n)},Sr=function(e,t){var n=t.errorHandler,i=t.apiName;te.call(r.FETCH_ERROR,t).next((function(){mr(n,e,t)})),console.error("API=>"+i+", message=>"+JSON.stringify(b.get(e,"message")))},Tr=function(e,t,n){var r={};t.onFetchCompleteLog&&(r=d()({},t.onFetchCompleteLog(t,r)||{},r)),vr("api","error",n,t,d()({reason:e,errorMsg:b.get(e,"errorMessage")},r))},wr=function(e,t){gr[e]=t},Rr=function(e){return gr[e]},Cr=function(e){return Er[e]},Or=function(e,t){Er[e]=t},Ar=function(e){return delete Er[e]},Ir=function(e){var t=e.response,n=e.isPrefetch,r=e.key,i={workerType:e.workerType,response:t};wr(r,i),n&&Or(r,i)},kr=function(e){var t=e.useCache,n=e.key,r=Rr(n),i=!1;if(t.session&&r){var o=r.workerType,a=r.response;e.response=a,e.workerType=o,e.useSession=!0,yr(e),i=!0}return i},Nr=function(e){var t=e.useCache,n=e.key,r=Cr(n),i=!1;if(t.prefetch&&r){var o=r.workerType,a=r.response;e.response=a,e.workerType=o,e.usePrefetch=!0,Ar(n),yr(e),i=!0}return i},Pr=Sr,Dr=Tr,xr=yr,Lr=br,Mr=function(e){var t=e.v,n=e.ecode,i=e.apiName,o=e.key,a=e.params,s=e.onValidate,c=e.env,u=e.method,d=e.fetchOptions,l=e.type,p=Date.now(),f=function(t){var n=m.object(t),r=function(){if(n){var e=b.get(t,"message")||b.get(t,"data.message")||b.get(t,"errorMessage")||b.get(t,"ret")||b.get(t,"data.ret")||b.get(t,"msg")||b.get(t,"resReason.msg");e instanceof Array&&e[0]&&(e=e[0])}return t}(),i={message:r,stack:n?t.stack:null,toString:function(){return JSON.stringify(i)}};e.response=t.response||{},e.resReason=e.resReason||{msg:r,ret:n?b.get(t,"ret"):"",code:""},Tr(i,e,p),Sr(i,e)};xn(i,{key:o,params:a,v:t,ecode:n,env:c,method:u,fetchOptions:d,type:l},(function(t,n){e.endTime=Date.now(),e.response=t,e.workerType="fetch",e.success=!0,te.call(r.FETCH_VALIDATE,e).next((function(e){if(!1!==(mr(s,e)||{}).success){yr(e);var r=function(e,t,n){var r={rt0:0,rt1:0,rd:0};return k.a.is.web&&(r.rt0=n&&1e3*n.rt,r.rt1=t&&t.time,r.rd=n&&~~n.duration),r}(0,t,n);br(e,p,r)}else f(e)}))}),f)},Ur={util:S,url:I,xPath:b,object:T},jr=Ur.util.call,Vr=new an.Emitter,Br={},Fr={},Wr=function(e){var t=(e.apiConfig||{}).isFirstScreen;return void 0===t&&(t=e.isFirstScreen),t},Gr=function(e){return"running_"+e},Hr="preload",zr="prefetchX",Kr="prfetch",Yr="session",qr=function(e){if(e.isPreload)return Jr(e);Nr(e)||kr(e)||function(e){var t=e.isPrefetch,n=e.useCache,r=void 0===n?{}:n,i=e.key,o=e.isPreload;if(t||!r.preload||o)return Jr(e);var a=ur(i);lr(a,(function(t){if(!t)return Jr(e);xr(Object.assign({},e,{response:t.response,workerType:Hr})),t.isFresh||Jr(Object.assign({},e,{refresh:!0}))}))}(e)},Jr=function(e){var t=e.key,n=e.errorHandler,r=e.useCache;if(!Br[t]||!r.session)return Br[t]=!0,void Xr(e);Vr.once(Gr(t),(function(){Nr(e)||kr(e)||jr(n)}))},Xr=function(e){te.call(r.FETCH_BEFORE,e).next((function(e){var t=e.response,n=e.success,i=e.onValidate;n&&t?te.call(r.FETCH_VALIDATE,e).next((function(e){var t=jr(i,e)||{};if(!1===t.success){var n={message:Ur.xPath.get(t,"message"),stack:null,toString:function(){return JSON.stringify(n)}};return Dr(n,e,e.startTime),void Pr(n,e)}return e.endTime=Date.now(),Lr(e,e.startTime,{isEarlyPrefetch:"true"}),xr(e)})):Mr(e)}))},Qr=function(e,t,n,r){var i=n.replace(/\./gi,"_").replace(/[A-Z]/g,(function(e){return"_"+e.toLowerCase()})),o=t[p+"_"+i];if("0"===o)return!1;if("1"===o)return!0;var a=Ur.xPath.get(e,n);return void 0===a&&(a=r),a},Zr=S.call,$r=!1,ei="prefetchX",ti={status:[]},ni=function(e){return"string"==typeof e&&!!e.match(/\$.*\$/)},ri=function(e){return"string"==typeof e&&!!e.match(/\^.*\$/)},ii=function(e){var t=decodeURIComponent(I.query.wh_prefetch),n=(JSON.parse(t)||{}).params;for(var r in n)n[r]=e[r];return ti.prefetchDataString=JSON.stringify(e),ti.orderedPrefetchString=JSON.stringify(n),n},oi=function(e,t){var n={apiName:e.apiName,params:ii(e.params),isAuth:e.ecode||0,apiVersion:e.apiVersion||"1.0"};e.ecode&&e.apiVersion||ti.status.push("auto complete 'isAuth':"+e.ecode+"and 'apiVersion':"+e.apiVersion);var r,i,o,a,s,c=Date.now();je.set("prefetchXStart"),je.time.set("prefetchXStart"),r=setTimeout((function(){vr(ei,"timeout",c,e),ti.status.push("read timeout"),Zr(t,e)}),3e3),ti.status.push("start read prefetch"),i=n,o=function(n){$r=!0,je.set(ei+"End"),je.setDiffAbs(ei+"Time","prefetchXStart"),clearTimeout(r),n=n||{},m.string(n)&&(n=JSON.parse(n)),m.existy(n.api)&&n.api.toLowerCase()===e.apiName.toLowerCase()&&n.data&&(n=n.data),e.workerType=ei,e.response=n,e.success=!0,ti.status.push("success"),Zr(t,e)},a=function(n){ti.status.push("windvane fail: "+(n&&n.error)),vr(ei,"windvane fail",Date.now(),e),clearTimeout(r),Zr(t,e)},s="fetchEarlyData2",ti.status.push("use "+s),je.set(s+"Start"),Z.call(null,s,i,(function(e){"success"===e.status?o(e.data):a(e)}),(function(e){a(e)}),null)};var ai=S.call,si=S.call,ci=function(e,t){void 0===e&&(e={});var n=e.response||{},r=n.traceId,i=n.time,o=n.data||{};r=r||o.__traceId__,i=i||o.__time__;var a=/^mtop\./.test(e.apiName)&&!k.a.is.windVane;if(e.data=a?n.data:e.response,e.traceId=r,e.fetchRT=i,k.a.is.windVane){var s=n._mtopStat_||n.mtopStat||{},c=n._reason_||{};delete n._mtopStat_,delete n.mtopStat,delete n._reason_,e.resReason=c,e.traceId=s.eagleId,e.fetchRT=s.serverRT,e.mtopTime=s.totalTime,e.mtopStat=s}si(t,e)};te.register(r.FETCH_BEFORE,[function(e,t){var n=e.isFirstScreen,r=e.isPreload,i=e.useCache;if(window.__earlyPrefetchData=ti,ti.status.push("start"),r||!i.prefetchX||!k.a.is.windVane||!k.a.is.web||!n||$r)return Zr(t,e);ti.status.push("fetch config ok");var o=I.query.wh_prefetch;if(!(!!o&&"false"!==o))return ti.status.push("no wh_prefetch"),Zr(t,e);var a=function(e){var t=e.apiName,n=e.params,r=decodeURIComponent(I.query.wh_prefetch),i=JSON.parse(r)||{},o=i.apiName,a=void 0===o?"":o,s=i.params,c=void 0===s?{}:s,u=!0,d={errorParamTotal:0};t!=a&&(d.apiError=1,ti.status.push("apiName not match"),u=!1);var l=[Object.keys(n),Object.keys(c)],p=l[0],f=l[1];if(p.length!==f.length){d.paramsLengthError=1;var h=[].concat(p,f),_=h.filter((function(e){return!p.includes(e)})),v=h.filter((function(e){return!f.includes(e)}));_.length>0&&ti.status.push("params not match "+_.join(",")),v.length>0&&ti.status.push("url not match "+v.join(",")),u=!1}for(var m in c){var g=void 0;g=ni(c[m])?hr([c[m],""],I.query,{}):ri(c[m])?_r(c[m],location.href):c[m];var E=n[m];g!==E&&g===decodeURIComponent(E)&&(E=decodeURIComponent(E),n[m]=decodeURIComponent(E)),g!==E&&(u=!1,ti.status.push("params invalid, key:"+m+" ,currentValue: ["+typeof E+"]"+E+",prefetchValue: ["+typeof g+"]"+g),d.paramError=1,d.errorParamTotal++)}return u||(d.currentParams=encodeURIComponent(JSON.stringify(n)),d.prefetchXParams=encodeURIComponent(JSON.stringify(c)),vr(ei,"notMatch",Date.now(),e,d)),u}(e);if(ti.status.push("isMatch: "+a),!a)return Zr(t,e);oi(e,t)},function(e,t){var n=e.params,r=void 0===n?{}:n,i=e.fetchOptions,o=void 0===i?{}:i;if(o&&o.autoEncodeParams)for(var a in r)r[a]=encodeURIComponent(r[a]);ai(t,e)}]),te.register(r.FETCH_VALIDATE,[ci]),te.register(r.FETCH_ERROR,[ci]);var ui=function(e,t,n){var i=e.onSuccess,o=e.onError,a=e.reportPerformance,s=je.time,c=t?"prefetch":"fetch",u=Wr(e);u&&(je.set(c+"Start"),je.setDiffAbs(c+"StartTime"),s.set(c)),e.errorHandler=function(e,t){var n=t.key;delete Br[n],t.reason=e,jr(o,t)},e.successHandler=function(n){var o=Ur.object.pick(n,["response","data","workerType","fetchRT","success","refresh","usePrefetch","useSession","mtopTime"]);o.duration=Date.now()-n.startTime,n.workerType!==Hr&&(Ir(n),function(e,t,n){if(n&&n.enable){var r=ur(e),i=Ur.object.pick(n,["freshAge","cacheAge"],!0);i.source=p+".storage",dr(r,t,i)}}(n.key,n.response,e.storage));var d=n.key,l=n.apiName,f=n.params,h=n.workerType,_=!!Br[d];_&&delete Br[d],u&&(s.set(c),je.set(c+"End"),je.set("fetchWorkerType",h),t?(je.set("prefetchKey",d),Fr.prefetchOptions={key:d,apiName:l,params:f}):(je.set("apiRT",o.fetchRT||-1),je.set("mtopTime",o.mtopTime||-1),je.set("fetchKey",d),!1!==a&&te.call(r.PERF_FIRST_SCREEN,{time:Date.now(),from:"fs_api"}).next())),t||jr(i,o),_&&Vr.emit(Gr(d),n)},function(e,t,n){var r=Ur.url.query,i=Qr(e,r,"disableCache",!1),o={};[Hr,zr,Kr,Yr].forEach((function(t){var n=!1;if(!i){var a=!0;t!==Hr&&t!==Yr||(a=!1),n=Qr(e,r,"useCache."+t,a)}o[t]=n}));var a={storage:e.storage,useCache:o,isPreload:e.isPreload,method:e.method,env:e.env,isFirstScreen:Wr(e),isPrefetch:t,disableCache:i,startTime:Date.now(),key:null},s=e.onPrepare,c=e.successHandler,u=e.errorHandler,d=e.onValidate,l=e.onFetchCompleteLog,p=pr(e,Ur.url.query,n),f=jr(s,p)||p,h=f.apiName,_=f.params,v=f.method,m=f.type,g=f.options,E=f.v,y=f.ecode;fr({params:_,apiName:h,type:m},(function(t){a.key=t,e.isPreload&&(_.__preload__=1),Object.assign(a,{v:E,ecode:y,onValidate:d,onFetchCompleteLog:l,successHandler:c,errorHandler:u,apiName:h,params:_,method:v,type:m,fetchOptions:g}),qr(a)}))}(e,t,n)},di=ke,li=en,pi=an,fi=je,hi=te,_i=l,vi=S.call;function mi(){}},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.r(t),n.d(t,"_object_without_properties",(function(){return r})),n.d(t,"_",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"ELoggerLevel",(function(){return r})),n.d(t,"ELoggerMode",(function(){return u})),n.d(t,"Logger",(function(){return v})),n.d(t,"commonLogger",(function(){return m})),n.d(t,"loggerManager",(function(){return g}));var r,i=function(){},o=function(e){return e<10?"0"+e:e},a=function(e,t){void 0===t&&(t=!0);var n=Math.floor(e/1e3);return function(e,t){return void 0===t&&(t=!1),e===1/0?e:(r=Math.floor(e/60),r-=60*(n=Math.floor(r/60)),e=Math.floor(e-60*(60*n+r)),i=[],(t||n>0)&&i.push(o(n)),i.push(o(r)),i.push(o(e)),i.join(":"));var n,r,i}(n,t)+"."+Math.floor(1e3*(e-1e3*n))},s="undefined"!=typeof performance&&"function"==typeof performance.now;function c(){return s?performance.now():Date.now()}!function(e){e[e.TRACE=-1]="TRACE",e[e.DEBUG=0]="DEBUG",e[e.LOG=1]="LOG",e[e.INFO=2]="INFO",e[e.WARN=10]="WARN",e[e.ERROR=11]="ERROR",e[e.NONE=1e3]="NONE"}(r||(r={}));var u,d=["trace","debug","log","info","warn","error"];!function(e){e.PRINT="print",e.CACHE="cache"}(u||(u={}));var l=c(),p=2e3,f=[],h=[],_=0,v=function(){function e(e){this.mode=u.PRINT,this.level=r.INFO,this.trace=i,this.debug=i,this.log=i,this.info=i,this.warn=i,this.error=i,this.name=e,this._apply(),f.push(this)}var t=e.prototype;return t._apply=function(){var e=this;this.mode===u.CACHE?d.forEach((function(t){r[t.toUpperCase()]>=e.level?e[t]=function(){for(var n=c()-l,r="["+t+"]["+e.name+"]["+a(n,!0)+"]",i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];h.push({id:_++,level:e.level,name:e.name,timestamp:n,prefix:r,message:o.join(" ")}),h.length>p&&h.shift()}:e[t]=i})):this.mode===u.PRINT&&d.forEach((function(t){if(r[t.toUpperCase()]>=e.level){var n="["+t+"]["+e.name+"]";e[t]=console[t].bind(console,n)}else e[t]=i}))},t.setMode=function(e){this.mode=e,this._apply()},t.setLevel=function(e){this.level=e,this._apply()},t.reset=function(){var e=this;this.level=r.INFO,d.forEach((function(t){e[t]=i}))},e}();v.LogLevel=r;var m=new v("common"),g={setMode:function(e){f.forEach((function(t){return t.setMode(e)}))},setLevel:function(e){f.forEach((function(t){return t.setLevel(e)}))},setSize:function(e){p=e},getLogs:function(){return h},clear:function(){h=[]},destroy:function(){p=2e3,h=[],_=0,f.forEach((function(e){return e.reset()})),f=[m]}}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||e,o),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},u.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var c,u,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,r),!0;case 5:return d.fn.call(d.context,t,n,r,o),!0;case 6:return d.fn.call(d.context,t,n,r,o,a),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];d.fn.apply(d.context,c)}else{var p,f=d.length;for(u=0;u<f;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),l){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,n);break;case 4:d[u].fn.call(d[u].context,t,n,r);break;default:if(!c)for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];d[u].fn.apply(d[u].context,c)}}return!0},u.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return c(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||c(this,o);else{for(var s=0,u=[],d=a.length;s<d;s++)(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);u.length?this._events[o]=1===u.length?u[0]:u:c(this,o)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},function(e,t,n){"use strict";n.r(t),n.d(t,"defaultMetadata",(function(){return f})),n.d(t,"defaultVideoMetadata",(function(){return h})),n.d(t,"defaultAudioMetadata",(function(){return _})),n.d(t,"EHandlerType",(function(){return i})),n.d(t,"EFormatType",(function(){return o})),n.d(t,"ETrackType",(function(){return a})),n.d(t,"CTrackTypeMap",(function(){return d})),n.d(t,"ESampleFlag",(function(){return s})),n.d(t,"EErrorCode",(function(){return c})),n.d(t,"EDiscardType",(function(){return u})),n.d(t,"BitBuffer",(function(){return v})),n.d(t,"ByteBuffer",(function(){return m})),n.d(t,"Loader",(function(){return I})),n.d(t,"ELoaderStatus",(function(){return p})),n.d(t,"BasicLoader",(function(){return b})),n.d(t,"Demuxer",(function(){return P}));var r,i,o,a;n(150);!function(e){e.VIDE="vide",e.SOUN="soun"}(i||(i={})),function(e){e.FLV="flv",e.MP4="mp4",e.HLS="hls",e.AVI="avi",e.MPEGTS="mpegts",e.UNKNOWN="unknown"}(o||(o={})),function(e){e.UNKNOWN="unknown",e.VIDEO="video",e.AUDIO="audio"}(a||(a={}));var s,c,u,d=((r={})[i.VIDE]=a.VIDEO,r[i.SOUN]=a.AUDIO,r);!function(e){e[e.DEGRADATION_PRIORITY_MASK=65535]="DEGRADATION_PRIORITY_MASK",e[e.IS_NON_SYNC=65536]="IS_NON_SYNC",e[e.PADDING_MASK=917504]="PADDING_MASK",e[e.REDUNDANCY_MASK=3145728]="REDUNDANCY_MASK",e[e.DEPENDED_MASK=12582912]="DEPENDED_MASK",e[e.DEPENDS_MASK=50331648]="DEPENDS_MASK",e[e.DEPENDS_NO=33554432]="DEPENDS_NO",e[e.DEPENDS_YES=16777216]="DEPENDS_YES"}(s||(s={})),function(e){e[e.ABORTED=1]="ABORTED",e[e.NETWORK=2]="NETWORK",e[e.DECODE=3]="DECODE",e[e.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",e[e.PARSER=1001]="PARSER",e[e.COROUTINE=10001]="COROUTINE",e[e.WEBGL_NOT_SUPPORTED=10002]="WEBGL_NOT_SUPPORTED",e[e.BUFFERING=10004]="BUFFERING",e[e.RENDERER=10005]="RENDERER"}(c||(c={})),function(e){e[e.NONE=-16]="NONE",e[e.DEFAULT=0]="DEFAULT",e[e.NONREF=8]="NONREF",e[e.BIDIR=16]="BIDIR",e[e.NONINTRA=24]="NONINTRA",e[e.NONKEY=32]="NONKEY",e[e.ALL=48]="ALL"}(u||(u={}));var l,p,f=Object.freeze({formatType:o.UNKNOWN,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]}),h=Object.freeze({type:a.VIDEO,id:0,baseDTS:0,basePTS:0,timescale:1e3,codec:"",width:0,height:0,vps:[],pps:[],sps:[],pixelRatio:[]}),_=Object.freeze({type:a.AUDIO,id:1,baseDTS:0,basePTS:0,timescale:1e3,codec:"",audioObjectType:2,sampleRate:0,sampleSize:16,channelCount:0}),v=function(){function e(e,t){this.num=e,this.len=t,this.offset=0}return e.fromByte=function(t,n){return new e(t.read(n),n<<3)},e.prototype.skip=function(e){this.offset+=e},e.prototype.read=function(e){var t=this.len-this.offset-e;if(t>=0){for(var n=0,r=0;r<e;r++)n+=1<<r;return this.offset+=e,this.num>>>t&n}return console.warn("bit \u8bfb\u53d6\u4f4d\u6570\u8d85\u8fc7\u9650\u5236"),0},e}(),m=function(){function e(e,t,n){this.dv=new DataView(e),this.start=this.offset=t||this.dv.byteOffset,this.end=n?this.start+n:this.dv.byteLength}return e.fromUint8=function(t){return new e(t.buffer,t.byteOffset,t.byteLength)},e.concatUint8s=function(e){return this.concatUint8.apply(this,e)},e.concatUint8=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length<=1)return e[0]||new Uint8Array(0);var n=new Uint8Array(e.reduce((function(e,t){return e+t.byteLength}),0)),r=0;return e.forEach((function(e){n.set(e,r),r+=e.byteLength})),n},e.concat=function(t,n){return e.concatUint8(new Uint8Array(t),new Uint8Array(n)).buffer},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.dv.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unreadLength",{get:function(){return Math.max(this.end-this.offset,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),e.prototype.readFloat=function(e){var t=0;switch(e){case 4:t=this.dv.getFloat32(this.offset);break;case 8:t=this.dv.getFloat64(this.offset);break;default:throw new Error("not supported for read float byte with "+e)}return this.offset+=e,t},e.prototype.back=function(e){this.offset-=e},e.prototype.skip=function(e){this.offset+=e},e.prototype.readInt=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getInt8(t);case 2:return this.dv.getInt16(t);case 4:return this.dv.getInt32(t);default:throw new Error("not supported for read byte with "+e)}},e.prototype.readString=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.dv.getUint8(this.offset)),this.offset++;return t},e.prototype.readLE=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t,!0);case 3:return this.dv.getUint16(t,!0)+this.dv.getUint8(t+2)<<16;case 4:return this.dv.getUint32(t,!0);default:return this.read(e-4)+this.dv.getUint32(t,!0)*Math.pow(256,e-4)}},e.prototype.read=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t);case 3:return(this.dv.getUint16(t)<<8)+this.dv.getUint8(t+2);case 4:return this.dv.getUint32(t);default:return this.back(e-4),this.read(e-4)+this.dv.getUint32(t)*Math.pow(256,e-4)}},e.prototype.writeInt=function(e,t){var n=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setInt8(n,t);case 2:return this.dv.setInt16(n,t);case 3:return this.dv.setInt8(n,t>>16),this.dv.setInt16(n+1,65535&t);case 4:return this.dv.setInt32(n,t);default:throw new Error("Byte write is not supported, byteLength:"+e)}},e.prototype.write=function(e,t){var n=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setUint8(n,t);case 2:return this.dv.setUint16(n,t);case 3:return this.dv.setUint8(n,t>>>16),this.dv.setUint16(n+1,65535&t);case 4:return this.dv.setUint32(n,t);default:throw new Error("Byte write is not supported, byteLength"+e)}},e.prototype.readToUint8=function(e){var t=new Uint8Array(this.dv.buffer,this.offset,e||this.unreadLength);return this.offset+=t.byteLength,t},e.prototype.readToBuffer=function(e){var t;return t=this.offset||e?this.dv.buffer.slice(this.offset,e?this.offset+e:void 0):this.dv.buffer,this.offset+=t.byteLength,t},e.prototype.clone=function(){return new e(this.dv.buffer,this.offset,this.end-this.offset)},e}(),g=new(n(51).Logger)("format"),E=n(21),y=(l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e[e.IDLE=0]="IDLE",e[e.LOADING=1]="LOADING",e[e.SUSPENDED=2]="SUSPENDED",e[e.ERROR=3]="ERROR"}(p||(p={}));var b=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.timeout=15e3,n.total=1/0,n.offset=0,n.status=p.IDLE,n.url="",n._handleError=function(e){"AbortError"!==e.name&&(n._changeStatus(p.ERROR),n.emit("error",{code:c.NETWORK,message:e.message,origin:e}))},n.timeout=t.timeout||n.timeout,n}return y(t,e),Object.defineProperty(t.prototype,"eof",{get:function(){return this.offset===this.total},enumerable:!1,configurable:!0}),t.prototype._changeStatus=function(e){this.status!==e&&(g.log("loader status changed: ".concat(p[this.status]," -> ").concat(p[e])),this.status=e)},t.prototype.jump=function(e){this.offset=e},t.prototype.load=function(e,t,n){return this.reset(),this.url=e,this.loadRange(t,n)},t.prototype.resume=function(){return this.loadRange(this.offset)},t.prototype.suspend=function(){var e=this.status;this._abort(),e===p.LOADING&&(this._changeStatus(p.SUSPENDED),this.emit("suspend"))},t.prototype.abort=function(){var e=this.status;this._abort(),e!==p.SUSPENDED&&e!==p.LOADING||this.emit("abort")},t.prototype.reset=function(){this.abort(),this.offset=0,this.total=1/0,this.url=""},t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},t}(E.default),S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),T=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},w=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controller=null,t.timer=-1,t._abort=function(){clearTimeout(t.timer),t.controller&&!t.controller.signal.aborted&&(g.info("fetch abort,",t.url),t.controller.abort(),t.controller=null),t._changeStatus(p.IDLE)},t.triggerTimeout=function(){t._abort(),t._handleError(new Error("Request timed out, please try again"))},t.handleCompleteBuffer=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),T(t,void 0,void 0,(function(){var t=this;return w(this,(function(i){return[2,e.arrayBuffer?e.arrayBuffer().then((function(e){return t.total=e.byteLength,t.offset=Math.min(t.total,r),t.emit("progress",{offset:n,data:new Uint8Array(e).subarray(n,r)}),t.controller&&(t._changeStatus(p.IDLE),t.emit("loadend")),t.controller=null,!0})):Promise.reject(new Error("unsupport response.arraybuffer()"))]}))}))},t}return S(t,e),t.isSupported=function(){return"undefined"!=typeof AbortController&&"undefined"!=typeof ReadableStream},t.prototype.loadRange=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1/0),T(this,void 0,void 0,(function(){var n,r,i=this;return w(this,(function(o){return!this.url||e>=this.total||this.status===p.LOADING||this.status===p.ERROR?[2,Promise.resolve(!1)]:(this.abort(),g.info("fetch load, from=".concat(e," to=").concat(t," url=").concat(this.url)),this._changeStatus(p.LOADING),this.emit("loadstart"),/^blob:/.test(this.url)?[2,fetch(this.url).then((function(n){return i.handleCompleteBuffer(n,e,t)}))]:(n=new Headers,(r=e>0||t<1/0)&&(t=Math.min(this.total-1,t),n.set("Range","bytes=".concat(e,"-").concat(t===1/0?"":t))),this.controller=new AbortController,this.timer=setTimeout(this.triggerTimeout,this.timeout),[2,fetch(this.url,{method:"GET",headers:n,signal:this.controller.signal}).then((function(n){if(clearTimeout(i.timer),n.status>=200&&n.status<300){if(i.offset=e,r){var o=n.headers.get("Content-Range")||"";i.total=Number(o.split("/")[1])||i.total}else i.total=Number(n.headers.get("Content-Length"))||i.total;if(n.body){var a=n.body.getReader();return function e(){return T(i,void 0,void 0,(function(){var t=this;return w(this,(function(n){return[2,a.read().then((function(n){return n.done?(t.controller=null,t._changeStatus(p.IDLE),t.emit("loadend"),!0):(t.offset+=n.value.byteLength,t.emit("progress",{offset:t.offset-n.value.byteLength,data:n.value}),e())}))]}))}))}()}return i.handleCompleteBuffer(n,e,t)}throw new Error("Media stream data does not exist: ".concat(i.url))})).catch((function(e){return clearTimeout(i.timer),i._handleError(e),!1}))]))}))}))},t}(b);n(35);function C(e,t,n,r){n.forEach((function(n){e[r||"on"](n,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.unshift(n),t.emit.apply(t,e)}))}))}var O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.xhr=null,t._timer=-1,t._resolve=function(){},t.triggerTimeout=function(){t._abort(),t._handleError(new Error("Request timed out, please try again"))},t}return O(t,e),t.prototype._abort=function(){var e=this.xhr;e&&(e.onerror=null,e.onprogress=null,e.onloadend=null,e.onreadystatechange=null,e.abort(),this.xhr=null,this._resolve(!1)),this._changeStatus(p.IDLE)},t.prototype.loadRange=function(e,t){var n=this;return void 0===e&&(e=0),void 0===t&&(t=1/0),!this.url||e>=this.total||this.status===p.LOADING||this.status===p.ERROR?Promise.resolve(!1):(this.abort(),new Promise((function(r,i){n.xhr=new XMLHttpRequest,n._resolve=r;var o=n.xhr,a=e>0||t<1/0;o.open("GET",n.url),a&&o.setRequestHeader("Range","bytes=".concat(e,"-").concat(t===1/0?"":t)),o.onreadystatechange=function(){if(o.readyState===o.HEADERS_RECEIVED&&o.status>=200&&o.status<300)if(a){var e=o.getResponseHeader("Content-Range")||"";n.total=Number(e.split("/")[1])||n.total}else n.total=Number(o.getResponseHeader("Content-Length"))||n.total;o.readyState>=o.HEADERS_RECEIVED&&clearTimeout(n._timer)},n.offset=e;var s=0,c=function(e){var t,r=o.responseText,i=r.length,c=s,u=n.offset,d=i-c;d>0&&(n.offset+=d),!a&&e&&n.total===1/0&&(n.total=n.offset),d>0&&(s=i,n.emit("progress",{offset:u,data:(t=r.substring(c,i),new Uint8Array(t.length).map((function(e,n){return t.charCodeAt(n)})))}))};o.timeout=n.timeout,o.onprogress=function(){c(!1)},o.onloadend=function(){c(!0),n.xhr=null,n._changeStatus(p.IDLE),n.emit("loadend"),r(!0)},o.onerror=function(e){n.xhr=null;var t=new Error(e.constructor.name);n._handleError(t),i(t)},o.overrideMimeType("text/plain; charset=x-user-defined"),n._changeStatus(p.LOADING),n.emit("loadstart"),n._timer=setTimeout(n.triggerTimeout,n.timeout),o.send()})))},t}(b),I=R.isSupported()?R:A,k=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=["loadedmetadata","updatedmetadata","updatedtrackmetadata","loadeddata","error","end"],P=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.loader=new I,n.parsers=[],n.logger=g,n.handleFirstLoadData=function(e){var t;if(e){var r=n.parsers.find((function(t){return t.probe(e.data)}));if(r){var i=null===(t=n.activeParser)||void 0===t?void 0:t.constructor.name;n.activeParser&&n.resetParsr(n.activeParser),n.activeParser=n.setupParser(r),n.emit("parserchange"),n.activeParser.onProgress(e),g.info("\u5207\u6362parser, ".concat(i," -> ").concat(n.activeParser.constructor.name))}else{var o="No Parser was found, Byte data"+e.data.slice(0,20).join(",");g.error(o),n.emit("error",{code:c.SRC_NOT_SUPPORTED,message:o})}}},n.options=t,n.parsers=t.parsers||[],n.loader=n.createLoader(),n.logger.info("demuxer options",t),n}return k(t,e),t.prototype.createLoader=function(){var e=new I(this.options);return C(e,this,["progress","error"]),C(e,this,["loadstart","loadend"],"once"),e.once("progress",this.handleFirstLoadData),e},t.prototype.setupParser=function(e){return e.setLoader(this.loader),C(e,this,N),e},t.prototype.resetParsr=function(e){e.reset(),e.setLoader(),N.forEach((function(t){return e.off(t)}))},Object.defineProperty(t.prototype,"status",{get:function(){return this.activeParser?this.activeParser.status:this.loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),t.prototype.append=function(e){g.info("\u6267\u884cparse"),this.loader.reset(),this.activeParser?this.activeParser.onProgress(e):this.handleFirstLoadData(e)},t.prototype.end=function(){this.activeParser?this.activeParser.onLoadEnd():this.emit("end")},t.prototype.load=function(e){return g.info("\u6267\u884cload",e),this.loader.destroy(),this.loader=this.createLoader(),this.loader.load(e)},t.prototype.seek=function(e){var t;return g.info("\u6267\u884cseek",e),null===(t=this.activeParser)||void 0===t?void 0:t.seek(e)},t.prototype.suspend=function(){var e;return null===(e=this.activeParser)||void 0===e?void 0:e.suspend()},t.prototype.resume=function(){var e;return null===(e=this.activeParser)||void 0===e?void 0:e.resume()},t.prototype.reset=function(){this.loader.reset(),this.activeParser&&this.resetParsr(this.activeParser),this.activeParser=void 0},t.prototype.destroy=function(){var e;g.info("\u6267\u884cdestory"),this.loader.destroy(),null===(e=this.activeParser)||void 0===e||e.destroy(),this.removeAllListeners()},t}(E.default)},function(e,t,n){(function(t){var r,i,o,a,s;e.exports=(r=n(53),i=n(151),o=n(217),a=n(21),s=n(162),function(){var e={773:function(e,t){"use strict";var n,r=function(){},i=function(e){return e<10?"0"+e:e},o=function(e,t){void 0===t&&(t=!0);var n=Math.floor(e/1e3);return function(e,t){return void 0===t&&(t=!1),1/0===e?e:(r=Math.floor(e/60),r-=60*(n=Math.floor(r/60)),e=Math.floor(e-60*(60*n+r)),o=[],(t||n>0)&&o.push(i(n)),o.push(i(r)),o.push(i(e)),o.join(":"));var n,r,o}(n,t)+"."+Math.floor(1e3*(e-1e3*n))},a="undefined"!=typeof performance&&"function"==typeof performance.now;function s(){return a?performance.now():Date.now()}(n=t.vp||(t.vp={}))[n.TRACE=-1]="TRACE",n[n.DEBUG=0]="DEBUG",n[n.LOG=1]="LOG",n[n.INFO=2]="INFO",n[n.WARN=10]="WARN",n[n.ERROR=11]="ERROR",n[n.NONE=1e3]="NONE";var c,u=["trace","debug","log","info","warn","error"];(c=t.gt||(t.gt={})).PRINT="print",c.CACHE="cache";var d=s(),l=2e3,p=[],f=[],h=0,_=function(){function e(e){this.mode=t.gt.PRINT,this.level=t.vp.INFO,this.trace=r,this.debug=r,this.log=r,this.info=r,this.warn=r,this.error=r,this.name=e,this._apply(),p.push(this)}var n=e.prototype;return n._apply=function(){var e=this;this.mode===t.gt.CACHE?u.forEach((function(n){e[n]=t.vp[n.toUpperCase()]>=e.level?function(){for(var t=s()-d,r="["+n+"]["+e.name+"]["+o(t,!0)+"]",i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];f.push({id:h++,level:e.level,name:e.name,timestamp:t,prefix:r,message:a.join(" ")}),f.length>l&&f.shift()}:r})):this.mode===t.gt.PRINT&&u.forEach((function(n){e[n]=t.vp[n.toUpperCase()]>=e.level?console[n].bind(console,"["+n+"]["+e.name+"]"):r}))},n.setMode=function(e){this.mode=e,this._apply()},n.setLevel=function(e){this.level=e,this._apply()},n.reset=function(){var e=this;this.level=t.vp.INFO,u.forEach((function(t){e[t]=r}))},e}();_.LogLevel=t.vp;var v=new _("common");t.loggerManager={setMode:function(e){p.forEach((function(t){return t.setMode(e)}))},setLevel:function(e){p.forEach((function(t){return t.setLevel(e)}))},setSize:function(e){l=e},getLogs:function(){return f},clear:function(){f=[]},destroy:function(){l=2e3,f=[],h=0,p.forEach((function(e){return e.reset()})),p=[v]}}},38:function(e,t,n){"use strict";e.exports=n(773)},725:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".videox-icon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.2em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  font-size: 14px;\n}\n.videox-icon > svg {\n  fill: white;\n}\n",""]);var o=i},212:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".videox-menu-item {\n  padding: 6px 10px;\n}\n.videox-menu-item.videox-active {\n  color: red;\n}\n.videox-menu-item:hover {\n  background-color: rgba(0, 0, 0, 0.25);\n}\n",""]);var o=i},669:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".videox-popover {\n  position: relative;\n  cursor: pointer;\n}\n.videox-popover-content {\n  position: absolute;\n  top: -20px;\n  left: 50%;\n  white-space: nowrap;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 99;\n  transform: translate(-50%, -100%);\n  border-radius: 4px;\n}\n",""]);var o=i},100:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".videox-slider {\n  padding: 0 4px;\n}\n.videox-slider-inner {\n  display: flex;\n  position: relative;\n  cursor: pointer;\n  height: 10px;\n}\n.videox-slider-inner:hover .videox-slider-tips {\n  display: block;\n}\n.videox-slider-track {\n  display: flex;\n  margin-top: 3px;\n  width: 100%;\n  height: 4px;\n  border-radius: 8px;\n  overflow: hidden;\n  background-color: rgba(120, 120, 120, 0.5);\n}\n.videox-slider-track-fill {\n  width: 0;\n  height: 100%;\n  background-color: red;\n  z-index: 10;\n}\n.videox-slider-tips {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  padding: 2px 4px;\n  border-radius: 2px;\n  background-color: rgba(0, 0, 0, 0.25);\n  transform: translate(-50%, -100%);\n  font-family: Arial;\n  font-size: 12px;\n}\n.videox-slider-thumb {\n  position: absolute;\n  top: 0;\n  left: 0;\n  margin-left: -5px;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: red;\n  box-shadow: 0 -1px 2px black;\n}\n.videox-slider-disabled {\n  cursor: not-allowed;\n}\n.videox-slider-disabled .videox-slider-inner {\n  cursor: not-allowed;\n}\n.videox-slider-vertical.videox-slider {\n  padding: 4px 0;\n  height: 100%;\n}\n.videox-slider-vertical .videox-slider-inner {\n  width: 10px;\n  height: 100%;\n}\n.videox-slider-vertical .videox-slider-track {\n  align-items: flex-end;\n  height: 100%;\n  width: 4px;\n  margin-top: 0;\n  margin-left: 3px;\n}\n.videox-slider-vertical .videox-slider-track-fill {\n  height: 0;\n  width: 100%;\n}\n.videox-slider-vertical .videox-slider-thumb {\n  top: auto;\n  margin-left: 0;\n  margin-bottom: -5px;\n}\n",""]);var o=i},895:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".videox-volume-content {\n  height: 100px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 6px;\n}\n.videox-volume-number {\n  padding-bottom: 5px;\n  font-family: Arial, Helvetica, sans-serif;\n  color: #ddd;\n  font-size: 12px;\n}\n.videox-rate-content {\n  padding: 4px 0;\n}\n.videox-rate-menu {\n  text-align: center;\n  font-family: Arial;\n}\n",""]);var o=i},219:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".videox-contextmenu {\n  cursor: pointer;\n  position: absolute;\n  background-color: rgba(28, 28, 28, 0.9);\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n  padding: 8px 18px;\n  border-radius: 2px;\n  font-size: 14px;\n  color: #fff;\n}\n.videox-contextmenu-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n",""]);var o=i},141:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".videox-control {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  transition: opacity 0.5s ease-out;\n  z-index: 100000 !important;\n}\n.videox-control.videox-playing {\n  opacity: 0;\n}\n.videox-control.videox-playing:hover {\n  opacity: 1;\n}\n.videox-debugger {\n  position: absolute;\n  color: white;\n  left: 0;\n  top: 0;\n  font-size: 12px;\n  padding: 10px;\n  line-height: 1.75;\n  background-color: rgba(0, 0, 0, 0.25);\n}\n",""]);var o=i},548:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".videox-matte {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n}\n.videox-matte-icon-btn {\n  cursor: pointer;\n  width: 80px;\n  height: 80px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  background-color: rgba(0, 0, 0, 0.25);\n}\n.videox-matte-icon-btn .videox-icon {\n  font-size: 36px;\n}\n.videox-icon-reload {\n  cursor: pointer;\n  font-size: 28px !important;\n  padding: 20px;\n}\n.videox-icon-play {\n  padding: 0 10px;\n}\n.videox-icon-loading {\n  font-size: 64px !important;\n  animation: loading-rotate linear 1s infinite;\n}\n.videox-icon-loading > svg {\n  fill: #ddd !important;\n}\n.videox-error {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-family: tahoma, arial, 'Hiragino Sans GB', '\\5b8b\\4f53', sans-serif;\n  background-color: rgba(0, 0, 0, 0.9);\n  width: 100%;\n  height: 100%;\n}\n@keyframes loading-rotate {\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n",""]);var o=i},992:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".videox-progress {\n  position: absolute !important;\n  top: -4px;\n  left: 0;\n  width: 100%;\n}\n.videox-progress-container {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  padding: 10px 15px 10px 0px;\n  font-size: 12px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.videox-progress-container .videox-icon {\n  cursor: pointer;\n}\n.videox-progress-container .videox-btn + .videox-btn {\n  margin-left: 12px;\n}\n.videox-progress-buffered {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.videox-progress-buffered-item {\n  position: absolute;\n  top: 0;\n  height: 4px;\n  background-color: gray;\n}\n.videox-progress-placeholder {\n  height: 4px;\n  background-color: red;\n}\n.videox-time {\n  flex: 1;\n  text-align: left;\n  color: #bbb;\n  font-size: 12px;\n  font-family: Arial;\n}\n",""]);var o=i},849:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".videox-container {\n  position: relative;\n  left: 0;\n  top: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #000;\n  z-index: 100000 !important;\n  overflow: hidden;\n  color: #fff;\n}\n.videox-container * {\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n  box-sizing: border-box;\n}\n",""]);var o=i},645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},307:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",l="[object Map]",p="[object Number]",f="[object Object]",h="[object Promise]",_="[object RegExp]",v="[object Set]",m="[object String]",g="[object WeakMap]",E="[object ArrayBuffer]",y="[object DataView]",b=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,T={};T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T[o]=T[a]=T[E]=T[s]=T[y]=T[c]=T[u]=T[d]=T[l]=T[p]=T[f]=T[_]=T[v]=T[m]=T[g]=!1;var w="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,R="object"==typeof self&&self&&self.Object===Object&&self,C=w||R||Function("return this")(),O=t&&!t.nodeType&&t,A=O&&e&&!e.nodeType&&e,I=A&&A.exports===O,k=I&&w.process,N=function(){try{return k&&k.binding&&k.binding("util")}catch(e){}}(),P=N&&N.isTypedArray;function D(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function x(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function L(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var M,U,j,V=Array.prototype,B=Function.prototype,F=Object.prototype,W=C["__core-js_shared__"],G=B.toString,H=F.hasOwnProperty,z=(M=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",K=F.toString,Y=RegExp("^"+G.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=I?C.Buffer:void 0,J=C.Symbol,X=C.Uint8Array,Q=F.propertyIsEnumerable,Z=V.splice,$=J?J.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=q?q.isBuffer:void 0,ne=(U=Object.keys,j=Object,function(e){return U(j(e))}),re=Ae(C,"DataView"),ie=Ae(C,"Map"),oe=Ae(C,"Promise"),ae=Ae(C,"Set"),se=Ae(C,"WeakMap"),ce=Ae(Object,"create"),ue=Pe(re),de=Pe(ie),le=Pe(oe),pe=Pe(ae),fe=Pe(se),he=J?J.prototype:void 0,_e=he?he.valueOf:void 0;function ve(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ee(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ge;++t<n;)this.add(e[t])}function ye(e){var t=this.__data__=new me(e);this.size=t.size}function be(e,t){for(var n=e.length;n--;)if(De(e[n][0],t))return n;return-1}function Se(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":$&&$ in Object(e)?function(e){var t=H.call(e,$),n=e[$];try{e[$]=void 0;var r=!0}catch(e){}var i=K.call(e);return r&&(t?e[$]=n:delete e[$]),i}(e):function(e){return K.call(e)}(e)}function Te(e){return Be(e)&&Se(e)==o}function we(e,t,n,r,i){return e===t||(null==e||null==t||!Be(e)&&!Be(t)?e!=e&&t!=t:function(e,t,n,r,i,d){var h=Le(e),g=Le(t),b=h?a:ke(e),S=g?a:ke(t),T=(b=b==o?f:b)==f,w=(S=S==o?f:S)==f,R=b==S;if(R&&Me(e)){if(!Me(t))return!1;h=!0,T=!1}if(R&&!T)return d||(d=new ye),h||Fe(e)?Re(e,t,n,r,i,d):function(e,t,n,r,i,o,a){switch(n){case y:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!o(new X(e),new X(t)));case s:case c:case p:return De(+e,+t);case u:return e.name==t.name&&e.message==t.message;case _:case m:return e==t+"";case l:var d=x;case v:var f=1&r;if(d||(d=L),e.size!=t.size&&!f)return!1;var h=a.get(e);if(h)return h==t;r|=2,a.set(e,t);var g=Re(d(e),d(t),r,i,o,a);return a.delete(e),g;case"[object Symbol]":if(_e)return _e.call(e)==_e.call(t)}return!1}(e,t,b,n,r,i,d);if(!(1&n)){var C=T&&H.call(e,"__wrapped__"),O=w&&H.call(t,"__wrapped__");if(C||O){var A=C?e.value():e,I=O?t.value():t;return d||(d=new ye),i(A,I,n,r,d)}}return!!R&&(d||(d=new ye),function(e,t,n,r,i,o){var a=1&n,s=Ce(e),c=s.length;if(c!=Ce(t).length&&!a)return!1;for(var u=c;u--;){var d=s[u];if(!(a?d in t:H.call(t,d)))return!1}var l=o.get(e);if(l&&o.get(t))return l==t;var p=!0;o.set(e,t),o.set(t,e);for(var f=a;++u<c;){var h=e[d=s[u]],_=t[d];if(r)var v=a?r(_,h,d,t,e,o):r(h,_,d,e,t,o);if(!(void 0===v?h===_||i(h,_,n,r,o):v)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var m=e.constructor,g=t.constructor;m==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,d))}(e,t,n,r,we,i))}function Re(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var d=-1,l=!0,p=2&n?new Ee:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],h=t[d];if(r)var _=a?r(h,f,d,t,e,o):r(f,h,d,e,t,o);if(void 0!==_){if(_)continue;l=!1;break}if(p){if(!D(t,(function(e,t){if(a=t,!p.has(a)&&(f===e||i(f,e,n,r,o)))return p.push(t);var a}))){l=!1;break}}else if(f!==h&&!i(f,h,n,r,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function Ce(e){return function(e,t,n){var r=t(e);return Le(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,We,Ie)}function Oe(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Ae(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ve(e)||function(e){return!!z&&z in e}(e))&&(Ue(e)?Y:b).test(Pe(e))}(n)?n:void 0}ve.prototype.clear=function(){this.__data__=ce?ce(null):{},this.size=0},ve.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ve.prototype.get=function(e){var t=this.__data__;if(ce){var n=t[e];return n===r?void 0:n}return H.call(t,e)?t[e]:void 0},ve.prototype.has=function(e){var t=this.__data__;return ce?void 0!==t[e]:H.call(t,e)},ve.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ce&&void 0===t?r:t,this},me.prototype.clear=function(){this.__data__=[],this.size=0},me.prototype.delete=function(e){var t=this.__data__,n=be(t,e);return!(n<0||(n==t.length-1?t.pop():Z.call(t,n,1),--this.size,0))},me.prototype.get=function(e){var t=this.__data__,n=be(t,e);return n<0?void 0:t[n][1]},me.prototype.has=function(e){return be(this.__data__,e)>-1},me.prototype.set=function(e,t){var n=this.__data__,r=be(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ge.prototype.clear=function(){this.size=0,this.__data__={hash:new ve,map:new(ie||me),string:new ve}},ge.prototype.delete=function(e){var t=Oe(this,e).delete(e);return this.size-=t?1:0,t},ge.prototype.get=function(e){return Oe(this,e).get(e)},ge.prototype.has=function(e){return Oe(this,e).has(e)},ge.prototype.set=function(e,t){var n=Oe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ee.prototype.add=Ee.prototype.push=function(e){return this.__data__.set(e,r),this},Ee.prototype.has=function(e){return this.__data__.has(e)},ye.prototype.clear=function(){this.__data__=new me,this.size=0},ye.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ye.prototype.get=function(e){return this.__data__.get(e)},ye.prototype.has=function(e){return this.__data__.has(e)},ye.prototype.set=function(e,t){var n=this.__data__;if(n instanceof me){var r=n.__data__;if(!ie||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ge(r)}return n.set(e,t),this.size=n.size,this};var Ie=ee?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a)&&(o[i++]=a)}return o}(ee(e),(function(t){return Q.call(e,t)})))}:function(){return[]},ke=Se;function Ne(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&e<t}function Pe(e){if(null!=e){try{return G.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function De(e,t){return e===t||e!=e&&t!=t}(re&&ke(new re(new ArrayBuffer(1)))!=y||ie&&ke(new ie)!=l||oe&&ke(oe.resolve())!=h||ae&&ke(new ae)!=v||se&&ke(new se)!=g)&&(ke=function(e){var t=Se(e),n=t==f?e.constructor:void 0,r=n?Pe(n):"";if(r)switch(r){case ue:return y;case de:return l;case le:return h;case pe:return v;case fe:return g}return t});var xe=Te(function(){return arguments}())?Te:function(e){return Be(e)&&H.call(e,"callee")&&!Q.call(e,"callee")},Le=Array.isArray,Me=te||function(){return!1};function Ue(e){if(!Ve(e))return!1;var t=Se(e);return t==d||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function je(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Ve(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Be(e){return null!=e&&"object"==typeof e}var Fe=P?function(e){return function(t){return e(t)}}(P):function(e){return Be(e)&&je(e.length)&&!!T[Se(e)]};function We(e){return null!=(t=e)&&je(t.length)&&!Ue(t)?function(e,t){var n=Le(e),r=!n&&xe(e),i=!n&&!r&&Me(e),o=!n&&!r&&!i&&Fe(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var u in e)!t&&!H.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ne(u,c))||s.push(u);return s}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||F))return ne(e);var t,n,r=[];for(var i in Object(e))H.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e);var t}e.exports=function(e,t){return we(e,t)}},96:function(e,t,n){var r="Expected a function",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,l=u||d||Function("return this")(),p=Object.prototype.toString,f=Math.max,h=Math.min,_=function(){return l.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=a.test(e);return n||s.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return v(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),function(e,t,n){var i,o,a,s,c,u,d=0,l=!1,p=!1,g=!0;if("function"!=typeof e)throw new TypeError(r);function E(t){var n=i,r=o;return i=o=void 0,d=t,s=e.apply(r,n)}function y(e){return d=e,c=setTimeout(S,t),l?E(e):s}function b(e){var n=e-u;return void 0===u||n>=t||n<0||p&&e-d>=a}function S(){var e=_();if(b(e))return T(e);c=setTimeout(S,function(e){var n=t-(e-u);return p?h(n,a-(e-d)):n}(e))}function T(e){return c=void 0,g&&i?E(e):(i=o=void 0,s)}function w(){var e=_(),n=b(e);if(i=arguments,o=this,u=e,n){if(void 0===c)return y(u);if(p)return c=setTimeout(S,t),E(u)}return void 0===c&&(c=setTimeout(S,t)),s}return t=m(t)||0,v(n)&&(l=!!n.leading,a=(p="maxWait"in n)?f(m(n.maxWait)||0,t):a,g="trailing"in n?!!n.trailing:g),w.cancel=function(){void 0!==c&&clearTimeout(c),d=0,i=u=o=c=void 0},w.flush=function(){return void 0===c?s:T(_())},w}(e,t,{leading:i,maxWait:t,trailing:o})}},379:function(e){"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},a=[],s=0;s<e.length;s++){var c=e[s],u=r.base?c[0]+r.base:c[0],d=o[u]||0,l="".concat(u," ").concat(d);o[u]=d+1;var p=n(l),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var h=i(f,r);r.byIndex=s,t.splice(s,0,{identifier:l,updater:h,references:1})}a.push(l)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=n(o[a]);t[s].references--}for(var c=r(e,i),u=0;u<o.length;u++){var d=n(o[u]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=c}}},569:function(e){"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:function(e,t,n){"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},37:function(e){"use strict";var t,n=(t=[],function(e,n){return t[e]=n,t.filter(Boolean).join("\n")});function r(e,t,r,i){var o;if(r)o="";else{o="",i.supports&&(o+="@supports (".concat(i.supports,") {")),i.media&&(o+="@media ".concat(i.media," {"));var a=void 0!==i.layer;a&&(o+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),o+=i.css,a&&(o+="}"),i.media&&(o+="}"),i.supports&&(o+="}")}if(e.styleSheet)e.styleSheet.cssText=n(t,o);else{var s=document.createTextNode(o),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(s,c[t]):e.appendChild(s)}}var i={singleton:null,singletonCounter:0};e.exports=function(e){var t=i.singletonCounter++,n=i.singleton||(i.singleton=e.insertStyleElement(e));return{update:function(e){r(n,t,!1,e)},remove:function(e){r(n,t,!0,e)}}}},249:function(){"use strict";window.AudioContext||(window.AudioContext=window.webkitAudioContext),window.OfflineAudioContext||(window.OfflineAudioContext=window.webkitOfflineAudioContext)},469:function(e){"use strict";e.exports=s},331:function(e){"use strict";e.exports=r},683:function(e){"use strict";e.exports=i},382:function(e){"use strict";e.exports=o},854:function(e){"use strict";e.exports=a}},n={};function c(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={id:t,loaded:!1,exports:{}};return e[t](i,i.exports,c),i.loaded=!0,i.exports}c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,{a:t}),t},c.d=function(e,t){for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},c.nc=void 0;var u={};return function(){"use strict";c.r(u),c.d(u,{EDiscardType:function(){return e.EDiscardType},EErrorCode:function(){return e.EErrorCode},MSERenderer:function(){return De},Videox:function(){return ho},WASMRenderer:function(){return It},default:function(){return _o}});var e=c(331),n=c(683),r=c(382),i=c(854),o=c.n(i);function a(e,t,n,r){n.forEach((function(n){e[r||"on"](n,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.unshift(n),t.emit.apply(t,e)}))}))}var s,d,l=new n.Logger("core");c(249),function(e){e[e.PLAYING=0]="PLAYING",e[e.WAITING=1]="WAITING",e[e.SUSPEND=2]="SUSPEND",e[e.PAUSED=3]="PAUSED",e[e.ENDED=4]="ENDED"}(s||(s={})),function(e){e[e.IDLE=0]="IDLE",e[e.LOADED=1]="LOADED",e[e.PLAYING=2]="PLAYING",e[e.WAITING=3]="WAITING",e[e.PAUSED=4]="PAUSED",e[e.ENDED=5]="ENDED"}(d||(d={}));var p,f,h=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e[e.EMPTY=0]="EMPTY",e[e.LOW=1]="LOW",e[e.NORMAL=2]="NORMAL",e[e.HIGH=3]="HIGH",e[e.FULL=4]="FULL"}(f||(f={}));var _=function(e){function t(t){var n=e.call(this)||this;return n.queue=[],n.status=f.EMPTY,n.maxSize=t,n}return h(t,e),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),t.prototype._changeStatus=function(e){if(this.status!==e){var t=this.status;this.status=e,this.emit("statuschange",{currentStatus:e,previousStatus:t})}},t.prototype._cacaluteStatus=function(){var e=this.queue.length;e>=this.maxSize?this._changeStatus(f.FULL):e>=.7*this.maxSize?this._changeStatus(f.HIGH):e>=.3*this.maxSize?this._changeStatus(f.NORMAL):e>0?this._changeStatus(f.LOW):this._changeStatus(f.EMPTY)},t.prototype.clear=function(){this.queue=[],this._changeStatus(f.EMPTY)},t.prototype.writeList=function(e){var t=this;e.forEach((function(e){return t.queue.push(e)})),this.queue.length&&this._cacaluteStatus()},t.prototype.write=function(e){this.queue.push(e),this._cacaluteStatus()},t.prototype.readAll=function(){var e=this.queue;return this.clear(),e},t.prototype.first=function(){return this.queue[0]},t.prototype.last=function(){return this.queue[this.queue.length-1]},t.prototype.read=function(){var e=this.queue.shift();return this._cacaluteStatus(),e},t}(o()),v=function(e){return e<10?"0"+e:e},m=function(e,t){return void 0===t&&(t=!1),e===1/0?e.toString():(r=Math.floor(e/60),r-=60*(n=Math.floor(r/60)),e=Math.floor(e-60*(60*n+r)),i=[],(t||n>0)&&i.push(v(n)),i.push(v(r)),i.push(v(e)),i.join(":"));var n,r,i};function g(e){return void 0===e}function E(e){return/avc/i.test(e)}function y(e,t){var n={},r=[];return e.forEach((function(e){var i=t(e);n[i]||(r.push(e),n[i]=!0)})),r}var b,S,T,w,R,C,O,A,I=(R=function(e,t){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}R(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),k=["loadstart","loadedmetadata","loadeddata","canplay","play","pause","waiting","playing","seeking","seeked","progress","ended","timeupdate","volumechange","ratechange","fullscreenchange","error","update"],N=function(e){function t(t){void 0===t&&(t={});var n,r,i,o=e.call(this)||this;return o.metadata={},o.status=d.IDLE,o._noticeUpdate=function(){o.emit("update")},o.options=t,n=o,r=["status"],i=o._noticeUpdate,r.forEach((function(e){var t=n[e];Object.defineProperty(n,e,{set:function(n){t!==n&&i(e,t=n,n)},get:function(){return t}})})),o}return I(t,e),t.isSupported=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,Promise,(function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){throw new Error("Renderer should implements static method [isSupported]")}))}))},t.prototype.reset=function(){this.metadata={},this.status=d.IDLE,this.clear()},t}(o());!function(e){e.VIDE="vide",e.SOUN="soun"}(S||(S={})),function(e){e.FLV="flv",e.MP4="mp4",e.HLS="hls",e.AVI="avi",e.MPEGTS="mpegts",e.UNKNOWN="unknown"}(T||(T={})),function(e){e.UNKNOWN="unknown",e.VIDEO="video",e.AUDIO="audio"}(w||(w={})),(b={})[S.VIDE]=w.VIDEO,b[S.SOUN]=w.AUDIO,function(e){e[e.DEGRADATION_PRIORITY_MASK=65535]="DEGRADATION_PRIORITY_MASK",e[e.IS_NON_SYNC=65536]="IS_NON_SYNC",e[e.PADDING_MASK=917504]="PADDING_MASK",e[e.REDUNDANCY_MASK=3145728]="REDUNDANCY_MASK",e[e.DEPENDED_MASK=12582912]="DEPENDED_MASK",e[e.DEPENDS_MASK=50331648]="DEPENDS_MASK",e[e.DEPENDS_NO=33554432]="DEPENDS_NO",e[e.DEPENDS_YES=16777216]="DEPENDS_YES"}(C||(C={})),function(e){e[e.ABORTED=1]="ABORTED",e[e.NETWORK=2]="NETWORK",e[e.DECODE=3]="DECODE",e[e.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",e[e.PARSER=1001]="PARSER",e[e.COROUTINE=10001]="COROUTINE",e[e.WEBGL_NOT_SUPPORTED=10002]="WEBGL_NOT_SUPPORTED",e[e.BUFFERING=10004]="BUFFERING",e[e.RENDERER=10005]="RENDERER"}(O||(O={})),function(e){e[e.NONE=-16]="NONE",e[e.DEFAULT=0]="DEFAULT",e[e.NONREF=8]="NONREF",e[e.BIDIR=16]="BIDIR",e[e.NONINTRA=24]="NONINTRA",e[e.NONKEY=32]="NONKEY",e[e.ALL=48]="ALL"}(A||(A={}));var P,D,x,L=(P=function(e,t){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}P(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return L(t,e),t.prototype.end=function(){this.emit("end")},t.prototype.pipe=function(e,t){return t?this.on("data",(function(n){return e.write(t(n))})):this.on("data",(function(t){return e.write(t)})),this.on("end",(function(){return e.end()})),e},t}(o()),U=function(){function e(e,t){this.num=e,this.len=t,this.offset=0}return e.fromByte=function(t,n){return new e(t.read(n),n<<3)},e.prototype.skip=function(e){this.offset+=e},e.prototype.read=function(e){var t=this.len-this.offset-e;if(t>=0){for(var n=0,r=0;r<e;r++)n+=1<<r;return this.offset+=e,this.num>>>t&n}return console.warn("bit \u8bfb\u53d6\u4f4d\u6570\u8d85\u8fc7\u9650\u5236"),0},e}(),j=function(){function e(e,t,n){this.dv=new DataView(e),this.start=this.offset=t||this.dv.byteOffset,this.end=n?this.start+n:this.dv.byteLength}return e.fromUint8=function(t){return new e(t.buffer,t.byteOffset,t.byteLength)},e.concatUint8s=function(e){return this.concatUint8.apply(this,e)},e.concatUint8=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length<=1)return e[0]||new Uint8Array(0);var n=new Uint8Array(e.reduce((function(e,t){return e+t.byteLength}),0)),r=0;return e.forEach((function(e){n.set(e,r),r+=e.byteLength})),n},e.concat=function(t,n){return e.concatUint8(new Uint8Array(t),new Uint8Array(n)).buffer},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.dv.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unreadLength",{get:function(){return Math.max(this.end-this.offset,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),e.prototype.readFloat=function(e){var t=0;switch(e){case 4:t=this.dv.getFloat32(this.offset);break;case 8:t=this.dv.getFloat64(this.offset);break;default:throw new Error("not supported for read float byte with "+e)}return this.offset+=e,t},e.prototype.back=function(e){this.offset-=e},e.prototype.skip=function(e){this.offset+=e},e.prototype.readInt=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getInt8(t);case 2:return this.dv.getInt16(t);case 4:return this.dv.getInt32(t);default:throw new Error("not supported for read byte with "+e)}},e.prototype.readString=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.dv.getUint8(this.offset)),this.offset++;return t},e.prototype.readLE=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t,!0);case 3:return this.dv.getUint16(t,!0)+this.dv.getUint8(t+2)<<16;case 4:return this.dv.getUint32(t,!0);default:return this.read(e-4)+this.dv.getUint32(t,!0)*Math.pow(256,e-4)}},e.prototype.read=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t);case 3:return(this.dv.getUint16(t)<<8)+this.dv.getUint8(t+2);case 4:return this.dv.getUint32(t);default:return this.back(e-4),this.read(e-4)+this.dv.getUint32(t)*Math.pow(256,e-4)}},e.prototype.writeInt=function(e,t){var n=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setInt8(n,t);case 2:return this.dv.setInt16(n,t);case 3:return this.dv.setInt8(n,t>>16),this.dv.setInt16(n+1,65535&t);case 4:return this.dv.setInt32(n,t);default:throw new Error("Byte write is not supported, byteLength:"+e)}},e.prototype.write=function(e,t){var n=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setUint8(n,t);case 2:return this.dv.setUint16(n,t);case 3:return this.dv.setUint8(n,t>>>16),this.dv.setUint16(n+1,65535&t);case 4:return this.dv.setUint32(n,t);default:throw new Error("Byte write is not supported, byteLength"+e)}},e.prototype.readToUint8=function(e){var t=new Uint8Array(this.dv.buffer,this.offset,e||this.unreadLength);return this.offset+=t.byteLength,t},e.prototype.readToBuffer=function(e){var t;return t=this.offset||e?this.dv.buffer.slice(this.offset,e?this.offset+e:void 0):this.dv.buffer,this.offset+=t.byteLength,t},e.prototype.clone=function(){return new e(this.dv.buffer,this.offset,this.end-this.offset)},e}(),V=function(){function e(){}return e.createAnnexbStartCode=function(){return new Uint8Array([0,0,0,1])},e.createAVCCStartCode=function(e){return new Uint8Array([e>>24&255,e>>16&255,e>>8&255,255&e])},e.extractAVCCNAL=function(e,t){for(var n,r=[],i=new j(e.buffer,e.byteOffset,e.byteLength);i.unreadLength>t;){if((n=i.read(t+1))<=0||n>i.unreadLength){console.warn("extract avc nalu size wrong! lengthSizeMinusOne:",t,"size:",n);break}var o=i.offset-i.start;r.push(e.subarray(o,o+n)),i.skip(n)}return r},e.extractAnnexbNAL=function(e){for(var t=e.byteLength,n=[],r=0;r<t-3;)0===e[r]?0===e[r+1]?0===e[r+2]?0===e[r+3]?r++:1===e[r+3]&&r+4<t?(n.push({prefixStart:r,start:r+4}),r+=4):r+=4:1===e[r+2]?(n.push({prefixStart:r,start:r+3}),r+=3):r+=3:r+=2:r++;return n.length?n.map((function(t,r){var i=n[r+1];return i?e.subarray(t.start,i.prefixStart):e.subarray(t.start)})):[]},e}(),B=(x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e[e.TRAIL_N=0]="TRAIL_N",e[e.TRAIL_R=1]="TRAIL_R",e[e.TSA_N=2]="TSA_N",e[e.TSA_R=3]="TSA_R",e[e.STSA_N=4]="STSA_N",e[e.STSA_R=5]="STSA_R",e[e.RADL_N=6]="RADL_N",e[e.RADL_R=7]="RADL_R",e[e.RASL_N=8]="RASL_N",e[e.RASL_R=9]="RASL_R",e[e.VCL_N10=10]="VCL_N10",e[e.VCL_R11=11]="VCL_R11",e[e.VCL_N12=12]="VCL_N12",e[e.VCL_R13=13]="VCL_R13",e[e.VCL_N14=14]="VCL_N14",e[e.VCL_R15=15]="VCL_R15",e[e.BLA_W_LP=16]="BLA_W_LP",e[e.BLA_W_RADL=17]="BLA_W_RADL",e[e.BLA_N_LP=18]="BLA_N_LP",e[e.IDR_W_RADL=19]="IDR_W_RADL",e[e.IDR_N_LP=20]="IDR_N_LP",e[e.CRA=21]="CRA",e[e.VPS=32]="VPS",e[e.SPS=33]="SPS",e[e.PPS=34]="PPS",e[e.ACCESS_UNIT_DELIMITER=35]="ACCESS_UNIT_DELIMITER",e[e.EOS=36]="EOS",e[e.EOB=37]="EOB",e[e.FILLER_DATA=38]="FILLER_DATA",e[e.SEI=39]="SEI",e[e.SEI_SUFFIX=40]="SEI_SUFFIX",e[e.INVALID=64]="INVALID"}(D||(D={}));var F,W,G=function(e){function t(t){var n=e.call(this)||this,r=new U(t.read(2),16);return n.forbiddenZeroBit=r.read(1),n.nalType=r.read(6),n.nhLayerId=r.read(6),n.nhTimeId=r.read(3),n}return B(t,e),t.extractNALType=function(e,t){return void 0===t&&(t=0),(126&e[t])>>1},t.isNonRefNALType=function(e){switch(e){case D.TRAIL_N:case D.STSA_N:case D.RADL_N:case D.RASL_N:case D.VCL_N10:case D.VCL_N12:case D.VCL_N14:return!0;default:return!1}},t.isNonRef=function(e){return this.isNonRefNALType(this.extractNALType(e))},t.isSlice=function(e){var t=this.extractNALType(e);return t>=D.TRAIL_N&&t<=D.CRA},t}(V),H=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],z=function(e,t){var n=t.audioObjectType,r=t.sampleRate,i=t.channelCount,o=t.numberOfRawDataBlocksInFrame,a=void 0===o?0:o,s=e.byteLength+7,c=H.indexOf(r),u=new Uint8Array(7);return u[0]=255,u[1]=241,u[2]=n-1<<6,u[2]|=c<<2,u[2]|=(4&i)>>2,u[3]=(3&i)<<6,u[3]|=(6144&s)>>11,u[4]=(2047&s)>>3,u[5]=(7&s)<<5,u[5]|=31,u[6]=252,u[6]|=3&a,j.concatUint8(u,e)},K=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Y=function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))},q=function(){function e(){}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=new Uint8Array(8),i=[r].concat(t.map((function(e){return new Uint8Array(e)}))),o=i.reduce((function(e,t){return e+t.byteLength}),0),a=new j(r.buffer);return a.write(4,o),Y(e).forEach((function(e){return a.write(1,e)})),j.concatUint8s(i)},e.prototype.avc1=function(e){var t=e.pixelRatio,n=e.vps,r=new ArrayBuffer(78),i=new j(r);i.write(4,0),i.write(2,0),i.write(2,1),i.write(4,0),i.write(4,0),i.write(4,0),i.write(4,0),i.write(2,e.width),i.write(2,e.height),i.write(4,4718592),i.write(4,4718592),i.write(4,0),i.write(2,1);var o="@ali/videox";i.write(1,o.length),Y(o).forEach((function(e){return i.write(1,e)})),i.skip(32-(o.length+1)),i.write(2,24),i.write(2,65535);var a=2===t.length?this.pasp(t[0],t[1]):[];return n.length?this.create("hvc1",r,this.hvcC(e),a):this.create("avc1",r,this.avcC(e),a)},e.prototype.avcC=function(e){var t=e.sps,n=e.pps,r=[],i=[];r.push(t.length),t.forEach((function(e){r.push(e.byteLength>>>8&255),r.push(255&e.byteLength),e.forEach((function(e){return r.push(e)}))})),i.push(n.length),n.forEach((function(e){i.push(e.byteLength>>>8&255),i.push(255&e.byteLength),e.forEach((function(e){return i.push(e)}))}));var o=new ArrayBuffer(5),a=new j(o);return a.write(1,1),a.write(1,r[4]||0),a.write(1,r[5]||0),a.write(1,r[6]||0),a.write(1,255),this.create("avcC",o,r,i)},e.prototype.btrt=function(){var e=new ArrayBuffer(12),t=new j(e);return t.write(4,1875072),t.write(4,3e6),t.write(4,3e6),this.create("btrt",e)},e.prototype.pasp=function(e,t){var n=new ArrayBuffer(8),r=new j(n);return r.write(4,e),r.write(4,t),this.create("pasp",n)},e.prototype.dinf=function(){return this.create("dinf",this.dref())},e.prototype.dref=function(){var e=new ArrayBuffer(8),t=new j(e);return t.write(4,0),t.write(4,1),this.create("dref",e,this.url())},e.prototype.esds=function(e){var t=e.audioObjectType,n=e.sampleRate,r=e.channelCount,i=new ArrayBuffer(33),o=new j(i),a=t>=5;o.write(4,0),o.write(1,3),o.write(1,a?27:25),o.write(2,1),o.write(1,0),o.write(1,4),o.write(1,a?19:17),o.write(1,64),o.write(1,21),o.write(3,0),o.write(4,0),o.write(4,0),o.write(1,5),o.write(1,a?4:2);var s=H.findIndex((function(e){return n===e}));if(o.write(1,t<<3|(14&s)>>1),a){var c=s;o.write(1,(1&s)<<7|r<<3|(14&c)>>1),o.write(1,(1&c)<<7|8),o.write(1,0)}else o.write(1,(1&s)<<7|r<<3);return o.back(4),o.skip(4),o.write(1,6),o.write(1,1),o.write(1,2),this.create("esds",i)},e.prototype.ftyp=function(){var e=new ArrayBuffer(16),t=new j(e);return Y("isom").forEach((function(e){return t.write(1,e)})),t.write(4,1),Y("isom").forEach((function(e){return t.write(1,e)})),Y("avc1").forEach((function(e){return t.write(1,e)})),this.create("ftyp",e)},e.prototype.hdlr=function(e){var t=new ArrayBuffer(37),n=new j(t);return n.skip(8),e===w.VIDEO?Y("vide").forEach((function(e){return n.write(1,e)})):e===w.AUDIO&&Y("soun").forEach((function(e){return n.write(1,e)})),n.skip(12),e===w.VIDEO?Y("VideoHandler").forEach((function(e){return n.write(1,e)})):e===w.AUDIO&&Y("SoundHandler").forEach((function(e){return n.write(1,e)})),n.write(1,0),this.create("hdlr",t)},e.prototype.hvcC=function(e){var t=e.vps,n=e.sps,r=e.pps,i=[],o=[{type:D.VPS,data:t},{type:D.SPS,data:n},{type:D.PPS,data:r}];o.forEach((function(e){var t=e.type,n=e.data;i.push(128|t),i.push(n.length>>>8&255),i.push(255&n.length),n.forEach((function(e){i.push(e.byteLength>>>8&255),i.push(255&e.byteLength),e.forEach((function(e){return i.push(e)}))}))}));var a=new ArrayBuffer(23),s=new j(a),c=n.length?n[0]:[];s.write(1,1);for(var u=1;u<12;u++)s.write(1,c[u]||0);return s.write(1,0),s.write(2,0),s.write(1,0),s.write(1,1),s.write(1,0),s.write(1,0),s.write(2,0),s.write(1,15),s.write(1,o.length),this.create("hvcC",a,i)},e.prototype.mdat=function(e){return this.create("mdat",e)},e.prototype.mdhd=function(e){var t=new ArrayBuffer(24),n=new j(t);return n.write(4,0),n.write(4,0),n.write(4,0),n.write(4,e.timescale),n.write(4,0),n.write(2,21956),n.write(2,0),this.create("mdhd",t)},e.prototype.mdia=function(e){return this.create("mdia",this.mdhd(e),this.hdlr(e.type),this.minf(e))},e.prototype.mfhd=function(e){var t=new ArrayBuffer(8),n=new j(t);return n.write(4,0),n.write(4,e),this.create("mfhd",t)},e.prototype.minf=function(e){var t=e.type===w.VIDEO?this.vmhd():this.smhd();return this.create("minf",t,this.dinf(),this.stbl(e))},e.prototype.moof=function(e,t,n){var r=this,i=this.mfhd(t),o=8+i.byteLength+60*e.tracks.length+16*n.length+8,a=e.tracks.map((function(e){var t=n.filter((function(t){return t.trackType===e.type})),i=r.traf(e,t,o);return o+=t.reduce((function(e,t){return e+t.size}),0),i}));return this.create.apply(this,K(["moof",i],a,!1))},e.prototype.moov=function(e){var t=this,n=e.tracks.map((function(e){return t.trak(e)}));return this.create.apply(this,K(K(["moov",this.mvhd(e)],n,!1),[this.mvex(e)],!1))},e.prototype.mp4a=function(e){var t=new ArrayBuffer(28),n=new j(t);return n.write(4,0),n.write(2,0),n.write(2,1),n.write(4,0),n.write(4,0),n.write(2,e.channelCount),n.write(2,e.sampleSize),n.write(4,0),n.write(4,e.sampleRate<<16),this.create("mp4a",t,this.esds(e))},e.prototype.mvex=function(e){var t=this;return this.create.apply(this,K(["mvex"],e.tracks.map((function(e){return t.trex(e)})),!1))},e.prototype.mvhd=function(e){var t=new ArrayBuffer(100),n=new j(t);return n.write(4,0),n.write(4,0),n.write(4,0),n.write(4,e.timescale),n.write(4,e.duration),n.write(2,1),n.skip(2),n.write(1,1),n.skip(1),n.skip(10),[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0].forEach((function(e){return n.write(1,e)})),n.skip(24),n.write(4,4294967295),this.create("mvhd",t)},e.prototype.sdtp=function(e){var t=e.length,n=new ArrayBuffer(4+t),r=new j(n);r.write(4,0);for(var i=0;i<t;i++){var o=e[i];r.write(1,o.flag)}return this.create("sdtp",n)},e.prototype.smhd=function(){var e=new ArrayBuffer(8),t=new j(e);return t.write(4,0),t.write(4,0),this.create("smhd",e)},e.prototype.stbl=function(e){return this.create("stbl",this.stsd(e),this.stts(),this.stsc(),this.stsz(),this.stco())},e.prototype.stco=function(){var e=new ArrayBuffer(8),t=new j(e);return t.write(4,0),t.write(4,0),this.create("stco",e)},e.prototype.stsc=function(){var e=new ArrayBuffer(8),t=new j(e);return t.write(4,0),t.write(4,0),this.create("stsc",e)},e.prototype.stsd=function(e){var t=new ArrayBuffer(8),n=new j(t);return n.write(4,0),n.write(4,1),e.type===w.VIDEO?this.create("stsd",t,this.avc1(e)):e.type===w.AUDIO?this.create("stsd",t,this.mp4a(e)):this.create("stsd",t)},e.prototype.stsz=function(){var e=new ArrayBuffer(12),t=new j(e);return t.write(4,0),t.write(4,0),t.write(4,0),this.create("stsz",e)},e.prototype.stts=function(){var e=new ArrayBuffer(8),t=new j(e);return t.write(4,0),t.write(4,0),this.create("stts",e)},e.prototype.tkhd=function(e){var t=new ArrayBuffer(84),n=new j(t);return n.write(4,7),n.write(4,0),n.write(4,0),n.write(4,e.id),n.write(4,0),n.write(4,0),n.write(4,0),n.write(4,0),n.write(4,0),n.write(1,0),n.write(1,0),n.write(2,0),[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0].forEach((function(e){return n.write(1,e)})),n.write(2,e.width||0),n.write(2,0),n.write(2,e.height||0),n.write(2,0),this.create("tkhd",t)},e.prototype.tfdt=function(e){var t=new ArrayBuffer(8),n=new j(t);return n.write(4,0),n.write(4,e),this.create("tfdt",t)},e.prototype.tfhd=function(e){var t=new ArrayBuffer(8),n=new j(t);return n.write(4,0),n.write(4,e.id),this.create("tfhd",t)},e.prototype.traf=function(e,t,n){void 0===n&&(n=0);var r=t.length?t[0].dts:0;return this.create("traf",this.tfhd(e),this.tfdt(r),this.trun(t,n))},e.prototype.trak=function(e){return this.create("trak",this.tkhd(e),this.mdia(e))},e.prototype.trex=function(e){var t=new ArrayBuffer(24),n=new j(t);return n.write(4,0),n.write(4,e.id),n.write(4,1),n.write(4,0),n.write(4,0),n.write(4,65537),this.create("trex",t)},e.prototype.trun=function(e,t){var n=e.length,r=new ArrayBuffer(12+16*n),i=new j(r);i.write(4,3841),i.write(4,e.length),i.write(4,t);for(var o=0;o<n;o++){var a=e[o];i.write(4,a.duration),i.write(4,a.size),i.write(4,a.flag),i.write(4,a.cts)}return this.create("trun",r)},e.prototype.vmhd=function(){var e=new ArrayBuffer(12),t=new j(e);return t.write(4,1),t.write(2,0),t.write(2,0),t.write(2,0),t.write(2,0),this.create("vmhd",e)},e.prototype.url=function(){var e=new ArrayBuffer(4);return new j(e).write(4,1),this.create("url ",e)},e}(),J=function(){function e(){}return e.createSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return new Uint8Array},e.FRAME_DURATION=1024,e}(),X=(W=function(e,t){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}W(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e[e.UNUSED=0]="UNUSED",e[e.NON_IDR_SLICE=1]="NON_IDR_SLICE",e[e.DP_A=2]="DP_A",e[e.DP_B=3]="DP_B",e[e.DP_C=4]="DP_C",e[e.IDR=5]="IDR",e[e.SEI=6]="SEI",e[e.SPS=7]="SPS",e[e.PPS=8]="PPS",e[e.DIVIDER=9]="DIVIDER",e[e.SEQUENCE_END=10]="SEQUENCE_END",e[e.STREAM_END=11]="STREAM_END",e[e.FILL=12]="FILL"}(F||(F={}));var Q,Z,$,ee,te=function(e){function t(t){var n=e.call(this)||this,r=new U(t.read(1),8);return n.forbiddenZeroBit=r.read(1),n.nalRefIdc=r.read(2),n.nalType=r.read(5),n}return X(t,e),t.extractNALType=function(e){return 31&e[0]},t.isSlice=function(e){var t=this.extractNALType(e);return t>=F.NON_IDR_SLICE&&t<=F.IDR},t}(V),ne=function(){function e(){this.logger=new n.Logger("remux"),this.generator=new q,this.config={formatType:T.MP4,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]},this.sequenceNumber=0,this.offset=0,this.videoInited=!1,this.audioInited=!1,this.lastPacketMap=new Map}return e.prototype.updateConfig=function(e){Object.assign(this.config,e)},e.prototype.createInitSegment=function(){var e=j.concatUint8(this.generator.ftyp(),this.generator.moov(this.config));return this.offset=e.byteLength,e},e.prototype.createSegment=function(e){var t=this;if(!e.length)return new Uint8Array;var n=[];this.config.tracks.forEach((function(r){var i=e.filter((function(e){return e.trackType===r.type}));if(i.length){var o=null;r.type===w.VIDEO?o=t.recaculateVideoSamples(i,r):r.type===w.AUDIO&&(o=t.recaculateAudioSamples(i,r)),o&&(n.push(t.generator.moof(t.config,++t.sequenceNumber,o)),n.push(t.generator.mdat(j.concatUint8s(o.map((function(e){return e.data}))))))}}));var r=j.concatUint8s(n);return this.offset+=r.byteLength,r},e.prototype.createSlientFrames=function(e,t,n,r){var i=[];if(n>1.5*r){this.logger.warn("remux audio found pts hole at pts:",e,"timestamp:",(e-this.config.basePTS)/t.timescale,"gap duration:",n,"sample duration:",r);for(var o=J.createSilentFrame(t.codec,t.channelCount),a=Math.ceil(n/r),s=0;s<a;s++)i.push({flag:C.DEPENDS_NO,trackType:w.AUDIO,dts:e+r*s,cts:0,duration:r,size:o.byteLength,data:o});i.length&&(i[i.length-1].duration=n-(a-1)*r)}return i},e.prototype.recaculateAudioSamples=function(e,t){var n=[];this.prevAudioPacket&&(e.unshift(this.prevAudioPacket),this.prevAudioPacket=void 0);var r,i,o=Math.round(J.FRAME_DURATION/t.sampleRate*t.timescale);if(!this.audioInited&&e.length){this.audioInited=!0;var a=e[0].pts-this.config.basePTS;this.createSlientFrames(this.config.basePTS,t,a,o).forEach((function(e){n.push(e)}))}for(var s=0,c=0,u=0,d=e.length;s<d;s++){if(r=e[s],i=e[s+1]){if((u=i.dts-r.dts)<0){if(!((c=e.findIndex((function(e){return r.dts<e.dts})))>s+1))break;u=e[c].dts-r.dts,s=c-1,this.logger.warn("remux audio found pts overlap at pts:",r.pts,"timestamp:",(r.pts-(this.config.basePTS||0))/t.timescale,"gap duration:",u,"sample duration:",o)}}else{if(!r.isLast||!n.length){this.prevAudioPacket=r;break}u=n[n.length-1].duration}if(u>0){var l=this.createSlientFrames(r.pts+o,t,u-o,o);l.length&&(u=o);var p=j.concatUint8s(r.data);n.push({flag:C.DEPENDS_NO,trackType:w.AUDIO,size:p.byteLength,dts:r.dts-this.config.baseDTS,cts:r.pts-r.dts,duration:u,data:p}),l.forEach((function(e){n.push(e)}))}}return n},e.prototype.recaculateVideoSamples=function(e,t){this.prevVideoPacket&&(e.unshift(this.prevVideoPacket),this.prevVideoPacket=void 0);for(var n,r,i,o,a=[],s=function(s,u,d,l){if(n=e[s],r=e[s+1]){if((d=r.dts-n.dts)<0){for(r.dts=n.dts,u=s+1;u<l-1;u++)e[u].dts>e[u+1].dts&&(e[u+1].dts=e[u].dts);c.logger.warn("remux video found pts overlap at pts:",n.pts,"timestamp:",(n.pts-c.config.basePTS)/t.timescale,"gap packet number:",u-s,"gap duration:",d),d=0}}else{if(!n.isLast||!a.length)return c.prevVideoPacket=n,i=u,o=d,"break";d=a[a.length-1].duration}if(d>=0){var p=[];n.data.forEach((function(e){p.push(te.createAVCCStartCode(e.length),e)}));var f=j.concatUint8s(p);a.push({flag:n.isSync?C.DEPENDS_NO:C.IS_NON_SYNC|C.DEPENDS_YES,trackType:w.VIDEO,size:f.byteLength,dts:n.dts-c.config.baseDTS,cts:n.pts-n.dts,duration:d,data:f})}i=u,o=d},c=this,u=0,d=0,l=0,p=e.length;u<p;u++){var f=s(u,d,l,p);if(d=i,l=o,"break"===f)break}return a},e.prototype.flush=function(){this.prevAudioPacket=void 0,this.prevVideoPacket=void 0},e}(),re=(ee=function(e,t){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ie=function(){return(ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},oe=function(e){function t(){var t=e.call(this)||this;return t.remuxerMap=new Map,t.pendingPacketsMap=new Map,t.metadata={},t.remuxerMap.set(w.VIDEO,new ne),t.remuxerMap.set(w.AUDIO,new ne),t}return re(t,e),t.prototype.remux=function(e,t){var n=this.remuxerMap.get(e);n&&t.length&&this.emit("data",{type:e,buffer:n.createSegment(t).buffer,eos:!!t[t.length-1].isLast})},t.prototype.eos=function(){var e=this;this.pendingPacketsMap.forEach((function(t,n){e.pendingPacketsMap.delete(n),e.remux(n,t)}))},t.prototype.writeMetadata=function(e){var t=this;this.metadata=e,e.tracks.forEach((function(e){return t.writeTrackMetadata(e)}))},t.prototype.writeTrackMetadata=function(e){this.eos();var t=this.remuxerMap.get(e.type);t&&(t.updateConfig(ie(ie({},this.metadata),{tracks:[e]})),this.emit("data",{type:e.type,buffer:t.createInitSegment().buffer,eos:!1}))},t.prototype.write=function(e){var t=this,n=e.packets,r=this.pendingPacketsMap;n.forEach((function(e){var n=r.get(e.trackType);n?(n.push(e),n.length>=10&&(r.set(e.trackType,[]),t.remux(e.trackType,n))):r.set(e.trackType,[e])}))},t.prototype.flush=function(){this.remuxerMap.forEach((function(e){return e.flush()})),this.pendingPacketsMap.clear()},t.prototype.end=function(){this.eos(),e.prototype.end.call(this)},t}(M),ae="object"==typeof t&&"object"==typeof t.versions&&"string"==typeof t.versions.node,se="object"==typeof window&&"object"==typeof document,ce=se?window:ae?c.g:{},ue=c(469),de={},le=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var t,n;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(r){switch(r.label){case 0:return t="".concat(e.codec,":").concat(e.codedWidth,":").concat(e.codedHeight),g(de[t])?[4,ue.VideoHardwareDecoder.isConfigSupported(e)]:[3,2];case 1:return n=r.sent(),de[t]=!!n.supported,[2,!!n.supported];case 2:return[2,de[t]]}}))}))},pe=($=function(e,t){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}$(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),fe=function(e){function t(t,n){var r=e.call(this)||this;return r.pendingBufferSegments=[],r.pendingRemoveRanges=[],r.handleSourceBufferUpdateEnd=function(){r.pendingRemoveRanges.length?r.doRemoveRange():(r.checkBufferNeedRemove(),r.doAppendBuffer()),r.emit("updateend")},r.checkBufferNeedRemove=function(){for(var e=r.node,t=e.currentTime,n=e.ariaLive===String(!0),i=n?30:1800,o=n?10:1200,a=0,s=0,c=r.sb.buffered.length;a<c;a++)t-(s=r.sb.buffered.start(a))>i&&r.pendingRemoveRanges.push({start:s,end:t-o})},r.node=n,r.sb=t,t.addEventListener("updateend",r.handleSourceBufferUpdateEnd),r}return pe(t,e),Object.defineProperty(t.prototype,"size",{get:function(){return this.pendingBufferSegments.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return this.sb.updating},enumerable:!1,configurable:!0}),t.isTimestampBuffered=function(e,t){for(var n=0,r=void 0,i=void 0;n<e.length;n++)if(r=e.start(n),i=e.end(n),t>=r&&t<i)return!0;return!1},t.prototype.doRemoveRange=function(){if(!this.sb.updating){var e=this.pendingRemoveRanges.shift();e&&this.sb.remove(e.start,e.end)}},t.prototype.doAppendBuffer=function(){if(!this.sb.updating){var e=this.pendingBufferSegments.shift();e&&this.sb.appendBuffer(e.buffer)}},t.prototype.seek=function(e){var n=this.sb.buffered;t.isTimestampBuffered(n,e)||(this.pendingBufferSegments=[]);for(var r=0,i=void 0,o=void 0,a=n.length;r<a;r++)i=n.start(r),o=n.end(r),e<i&&this.pendingRemoveRanges.push({start:i,end:o});this.doAppendBuffer()},t.prototype.appendSegment=function(e){this.pendingBufferSegments.push(e),this.doAppendBuffer()},t.prototype.destroy=function(){this.pendingBufferSegments=[],this.pendingRemoveRanges=[],this.removeAllListeners(),this.sb.removeEventListener("updateend",this.handleSourceBufferUpdateEnd);try{this.sb.abort()}catch(e){}},t}(o()),he="name",_e="version",ve="function",me=function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},ge={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_e,[he,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_e,[he,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[he,_e],[/opios[\/ ]+([\w\.]+)/i],[_e,[he,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[_e,[he,"Opera"]],[/coast\/([\w\.]+)/i],[_e,[he,"Opera Coast"]],[/fxios\/([-\w\.]+)/i],[_e,[he,"Firefox"]],[/(electron)\/([\w\.]+) safari/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[he,_e],[/(chromium|instagram)[\/ ]([-\w\.]+)/i],[he,_e],[/headlesschrome(?:\/([\w\.]+)| )/i],[_e,[he,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[he,"Chrome WebView"],_e],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_e,[he,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[he,_e],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[_e,[he,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[_e,he],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[he,[_e,function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(me(t[n][r],e))return"?"===n?void 0:n}else if(me(t[n],e))return"?"===n?void 0:n;return e},{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]]]},Ee="undefined"!=typeof navigator,ye=Ee?navigator.userAgent:"",be=((Q={}).name="",Q.version="",Q);(function(e,t){for(var n,r,i,o,a,s,c=0;c<t.length&&!a;){var u=t[c],d=t[c+1];for(n=r=0;n<u.length&&!a;)if(a=u[n++].exec(e))for(i=0;i<d.length;i++)s=a[++r],"object"==typeof(o=d[i])&&o.length>0?2===o.length?typeof o[1]===ve?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3===o.length?typeof o[1]!==ve||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4===o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;c+=2}}).call(be,ye,ge.browser);var Se=!1;if(Ee)if("maxTouchPoints"in navigator)Se=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)Se=navigator.msMaxTouchPoints>0;else{var Te=null===(Z=window.matchMedia)||void 0===Z?void 0:Z.call(window,"(pointer:coarse)");if(Te&&"(pointer:coarse)"===Te.media)Se=!!Te.matches;else if("orientation"in window)Se=!0;else{var we=navigator.userAgent;Se=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(we)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(we)}}var Re="Safari"===be.name||"Mobile Safari"===be.name,Ce=Se;be.name;var Oe,Ae,Ie=(Ae=function(e,t){return(Ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ae(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ke=["loadstart","seeking","seeked","canplay","progress","play"],Ne=function(t){function n(e){void 0===e&&(e={});var n=t.call(this,e)||this;n.passThrougnEventRemovers=[],n._playbackRate=1,n.handleError=function(){var e=n.el.error;e&&n.emit("error",{code:e.code,message:e.message,origin:e})},n.handlePlaying=function(){n.status!==d.PLAYING&&(n.status=d.PLAYING,n.emit("playing"))},n.handlePause=function(){n.status=d.PAUSED,n.emit("pause")},n.handleEnded=function(){n.status=d.ENDED,n.emit("ended")},n.handleWaiting=function(){n.status=d.WAITING,n.emit("waiting")},n.handleTimeUpdate=function(){Ce&&Re&&n.status===d.WAITING&&n.handlePlaying(),n.emit("timeupdate")},n.handleVolumeChange=function(){n.emit("volumechange"),n._noticeUpdate()},n.handleLoadedMetadata=function(){n.emit("loadedmetadata"),n._noticeUpdate()},n.handleLoadedData=function(){n.el.playbackRate=n._playbackRate,n.emit("loadeddata")},n.options=e,n.el=document.createElement("video"),n.el.addEventListener("loadeddata",n.handleLoadedData),n.el.addEventListener("loadedmetadata",n.handleLoadedMetadata),n.el.addEventListener("playing",n.handlePlaying),n.el.addEventListener("ended",n.handleEnded),n.el.addEventListener("pause",n.handlePause),n.el.addEventListener("waiting",n.handleWaiting),n.el.addEventListener("timeupdate",n.handleTimeUpdate),n.el.addEventListener("volumechange",n.handleVolumeChange),n.el.addEventListener("error",n.handleError),n.passThrougnEventRemovers=ke.map((function(e){var t=function(){n.emit(e)};return n.el.addEventListener(e,t),function(){return n.el.removeEventListener(e,t)}})),n.el.style.width="100%",n.el.style.height="100%",Object.assign(n.el,{playsInline:!0,controls:!1,crossOrigin:"anonymous"});var r={renderer:"standard","webkit-playsinline":"webkit-playsinline","x5-video-player-type":"h5-page"};return Object.keys(r).forEach((function(e){n.el.setAttribute(e,r[e])})),n}return Ie(n,t),Object.defineProperty(n.prototype,"objectFit",{get:function(){return this.el.style.objectFit},set:function(e){this.el.style.objectFit=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"src",{set:function(e){this.el.src=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return this.el.duration},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buffered",{get:function(){return this.el.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"poster",{get:function(){return this.el.poster},set:function(e){this.el.poster=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"autoplay",{get:function(){return this.el.autoplay},set:function(e){this.el.autoplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"loop",{get:function(){return this.el.loop},set:function(e){this.el.loop=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"paused",{get:function(){return this.el.paused},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"muted",{get:function(){return this.el.muted},set:function(e){this.el.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"volume",{get:function(){return this.el.volume},set:function(e){this.el.volume=e,e>0&&(this.muted=!1)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentTime",{get:function(){return this.el.currentTime},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"playbackRate",{get:function(){return this._playbackRate||this.el.playbackRate},set:function(e){e!==this.el.playbackRate&&(this._playbackRate=e,this.el.playbackRate=e,this.emit("ratechange"),this._noticeUpdate())},enumerable:!1,configurable:!0}),n.isSupported=function(t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var n,r,i,o;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(a){return n=t.tracks,r=t.formatType,(i=n.find((function(t){return t.type===e.ETrackType.VIDEO})))&&(o=r===e.EFormatType.MP4,(r===e.EFormatType.HLS||r===e.EFormatType.MPEGTS)&&Re||o)?E(i.codec)?[2,!0]:[2,le({codec:i.codec,codedWidth:i.width,codedHeight:i.height})]:[2,r===e.EFormatType.UNKNOWN]}))}))},n.prototype.write=function(e){},n.prototype.attach=function(e){e.appendChild(this.el)},n.prototype.load=function(e){this.metadata=e,this.status=d.LOADED,this._noticeUpdate(),this.el.src=e.url,this.el.load()},n.prototype.append=function(e){},n.prototype.toggle=function(){return this.status===d.ENDED?(this.seek(0),this.play()):this.el.paused?this.play():this.pause()},n.prototype.play=function(){return this.el.play()},n.prototype.pause=function(){return Promise.resolve(this.el.pause())},n.prototype.seek=function(e){this.el.currentTime=e,this.status===d.ENDED&&(this.status=d.PAUSED)},n.prototype.clear=function(){this.el.removeAttribute("src"),this.el.load()},n.prototype.reset=function(){t.prototype.reset.call(this),this.el.load()},n.prototype.destroy=function(){this.reset(),this.removeAllListeners(),this.el.poster="",this.el.removeEventListener("loadeddata",this.handleLoadedData),this.el.removeEventListener("loadedmetadata",this.handleLoadedMetadata),this.el.removeEventListener("playing",this.handlePlaying),this.el.removeEventListener("ended",this.handleEnded),this.el.removeEventListener("pause",this.handlePause),this.el.removeEventListener("waiting",this.handleWaiting),this.el.removeEventListener("timeupdate",this.handleTimeUpdate),this.el.removeEventListener("volumechange",this.handleVolumeChange),this.el.removeEventListener("error",this.handleError),this.passThrougnEventRemovers.forEach((function(e){return e()})),this.el.remove()},n}(N),Pe=(Oe=function(e,t){return(Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Oe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),De=function(t){function r(e){var r=t.call(this,e)||this;return r.pendingTrackConfigs=[],r.cacheSegments=[],r.remuxerStream=new oe,r.pendingEOS=!1,r.sbpMap=new Map,r.skipSeekingHandler=!1,r.seeking=!1,r.logger=new n.Logger("mse-renderer"),r.findNearestBufferedTimestamp=function(){for(var e=r.el,t=e.buffered,n=e.currentTime,i=0,o=void 0;i<t.length;i++)if(n<(o=t.start(i)))return o;return-1},r.handleRemuxEnd=function(){r.pendingEOS=!0},r.handleEnd=function(){r.remuxerStream.end()},r.handleUpdatedTrackMetadata=function(e){r.remuxerStream.writeTrackMetadata(e)},r.handleRemuxData=function(e){var t=r.sbpMap.get(e.type);t?t.appendSegment(e):r.cacheSegments.push(e)},r.handleMSETimeUpdate=function(){r.checkSuspendOrResume()},r.handleBuffering=function(){if(!r.seeking&&(r.status===d.WAITING||r.status===d.IDLE||r.status===d.LOADED)){var e=r.findNearestBufferedTimestamp();e>0&&(r.skipSeekingHandler=!0,r.el.currentTime=e)}},r.closeMediaSource=function(){"open"===r.ms.readyState&&(r.ms.endOfStream(),r.logger.info("endOfStream"))},r.handleMSEWaiting=function(){r.checkSuspendOrResume(),r.logger.info("waiting")},r.handleSourceOpen=function(){if(r.logger.info("mse sourceopen"),r.pendingTrackConfigs.forEach((function(e){return r.createTrack(e.type,e.mimeType)})),r.pendingTrackConfigs=[],r.cacheSegments.length){var e=[];r.cacheSegments.forEach((function(t){var n=r.sbpMap.get(t.type);n?n.appendSegment(t):e.push(t)})),r.cacheSegments=e}},r.handleSourceClose=function(){r.destroy()},r.handleProcessUpdateEnd=function(){r.logger.debug("source buffer updateend"),r.checkSuspendOrResume(),r.checkEOS()},r.checkEOS=function(){r.pendingEOS&&Array.from(r.sbpMap.values()).every((function(e){return!e.updating&&0===e.size}))&&(r.logger.info("close mse"),r.closeMediaSource())},r.checkSuspendOrResume=function(){var e=r.metadata,t=e.live,n=e.progressive;if(t||n){for(var i=t?10:60,o=r.el,a=o.currentTime,s=o.buffered,c=0,u=s.length;c<u;c++)if(a>=s.start(c)&&a+i<=s.end(c))return void((t&&r.paused||n)&&r.demuxer.suspend());r.demuxer.resume()}},r.write=function(e){r.remuxerStream.write({packets:e})},r.handleMSESeeking=function(){if(r.seeking=!0,r.skipSeekingHandler)r.skipSeekingHandler=!1;else{r.cacheSegments=[],r.pendingEOS=!1;var e=r.el.currentTime;r.sbpMap.forEach((function(t){return t.seek(e)})),r.metadata.live||!r.metadata.progressive||fe.isTimestampBuffered(r.buffered,e)||(r.logger.info("seek\u6e05\u9664\u810f\u6570\u636e"),r.remuxerStream.flush(),r.demuxer.seek(e))}},r.handleMSESeeked=function(){r.seeking=!1},r.createTrack=function(e,t){if("open"===r.ms.readyState)try{var n=new fe(r.ms.addSourceBuffer(t),r.el);n.on("updateend",r.handleProcessUpdateEnd),r.sbpMap.set(e,n)}catch(e){r.logger.error("create source buffer fail",e)}else r.pendingTrackConfigs.push({type:e,mimeType:t})},r.options=e,r.demuxer=e.demuxer,r.ms=r.createMediaSource(),r.el.src=URL.createObjectURL(r.ms),r.el.addEventListener("seeking",r.handleMSESeeking),r.el.addEventListener("seeked",r.handleMSESeeked),r.el.addEventListener("timeupdate",r.handleMSETimeUpdate),r.el.addEventListener("waiting",r.handleMSEWaiting),r.el.addEventListener("progress",r.handleBuffering),r.demuxer.on("updatedtrackmetadata",r.handleUpdatedTrackMetadata),r.demuxer.on("end",r.handleEnd),r.remuxerStream.on("data",r.handleRemuxData),r.remuxerStream.on("end",r.handleRemuxEnd),r}return Pe(r,t),r.isSupported=function(t){var n;return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var r,i,o;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(a){return[ce.MediaSource,ce.Blob,null===(n=ce.URL)||void 0===n?void 0:n.createObjectURL].every((function(e){return!!e}))&&(r=t.tracks,i=t.formatType,(o=r.find((function(t){return t.type===e.ETrackType.VIDEO})))&&(i===e.EFormatType.FLV||i===e.EFormatType.HLS||i===e.EFormatType.MPEGTS))?E(o.codec)?[2,!0]:[2,le({codec:o.codec,codedWidth:o.width,codedHeight:o.height})]:[2,!1]}))}))},r.prototype.createMediaSource=function(){var e=new MediaSource;return e.addEventListener("sourceopen",this.handleSourceOpen),e.addEventListener("sourceclose",this.handleSourceClose),e},r.prototype.load=function(t){var n=this;this.metadata=t,this.status=d.LOADED,t.tracks.forEach((function(t){t.type===e.ETrackType.VIDEO?n.createTrack(t.type,"video/mp4;codecs="+t.codec):t.type===e.ETrackType.AUDIO&&n.createTrack(t.type,"audio/mp4;codecs="+t.codec)})),this.el.ariaLive=String(this.metadata.live),this.remuxerStream.writeMetadata(t),this.logger.info("load metadata",t.basePTS)},r.prototype.reset=function(){var e=this;this.logger.info("reset"),this.seeking=!1,this.skipSeekingHandler=!1,this.cacheSegments=[],t.prototype.reset.call(this),this.remuxerStream.flush(),Array.from(this.sbpMap.values()).forEach((function(t){t.destroy();try{e.ms.removeSourceBuffer(t.sb)}catch(e){}})),this.sbpMap.clear(),this.pendingTrackConfigs=[],this.ms.removeEventListener("sourceopen",this.handleSourceOpen),this.ms.removeEventListener("sourceclose",this.handleSourceClose);try{this.closeMediaSource()}catch(e){this.logger.warn("endOfStream \u5f02\u5e38",e.message)}this.ms=this.createMediaSource(),this.el.src=URL.createObjectURL(this.ms),this.pendingEOS=!1},r.prototype.destroy=function(){t.prototype.destroy.call(this),this.el.removeEventListener("seeking",this.handleMSESeeking),this.el.removeEventListener("seeked",this.handleMSESeeked),this.el.removeEventListener("waiting",this.handleMSEWaiting),this.el.removeEventListener("timeupdate",this.handleMSETimeUpdate),this.el.removeEventListener("progress",this.handleBuffering),this.demuxer.off("end",this.handleEnd),this.demuxer.off("updatedtrackmetadata",this.handleUpdatedTrackMetadata),this.remuxerStream.removeAllListeners()},r}(Ne),xe=new n.Logger("format");!function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&xe.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,n=8,r=8;for(t=0;t<e;t++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r}}(),c(307);var Le,Me,Ue=c(96),je=c.n(Ue),Ve=!1,Be=(Me=function(e,t){return(Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Me(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e[e.EMPTY=0]="EMPTY",e[e.LOW=1]="LOW",e[e.NORMAL=2]="NORMAL",e[e.HIGH=3]="HIGH",e[e.FULL=4]="FULL"}(Le||(Le={}));var Fe,We,Ge,He,ze,Ke,Ye,qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Be(t,e),t.prototype.end=function(){this.emit("end")},t.prototype.pipe=function(e,t){var n=this;return this.on("data",(function(r){e.write(t?t(r):r),!e.writable&&n.running&&n.suspend()})),e.on("writable",(function(){e.queue.status<f.NORMAL&&!n.running&&n.resume()})),this.on("end",(function(){return e.end()})),e},t}(o()),Je=(Ye=function(e,t){return(Ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ye(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Xe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Qe=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Ze=function(t){function r(r){var i=t.call(this)||this;return i.logger=new n.Logger("decoder"),i.activeCodec="",i.pendingEOS=!1,i.ended=!1,i.timer=-1,i.running=!1,i.queue=new _(100),i.readable=!1,i.task=function(){return Xe(i,void 0,Promise,(function(){var e,t,n=this;return Qe(this,(function(r){switch(r.label){case 0:return!this.running||this.ended?[2,clearTimeout(this.timer)]:(e=this.queue.first())&&e.codec!==this.activeCodec?(this.changeActiveCodec(e.codec),[2,this.configureByPacket(e).then((function(){return n.task()}))]):"configured"!==this.decoder.state?[2,this.runTask(1e3)]:this.decoder.decodeQueueSize<10?(t=this.queue.read())?(this.isOutdatedPacket(t)||this.decoder.decode({type:t.isSync?"key":"delta",timestamp:t.pts,data:t.uint8}),[3,4]):[3,1]:[3,5];case 1:return this.pendingEOS?[4,this.decoder.flush()]:[3,3];case 2:return r.sent(),this.running=!1,this.ended=!0,this.logger.log("eos",this.activeCodec),this.decoder.reset(),this.emit("end"),[2];case 3:this.emit("drain"),r.label=4;case 4:return this.runTask(0),[3,6];case 5:this.runTask(1e3),r.label=6;case 6:return this.writable&&this.emit("writable"),[2]}}))}))},i.runTask=function(e){clearTimeout(i.timer),i.timer=setTimeout(i.task,e)},i.handleOutput=function(e){i.emit("data",e),i.runTask(0)},i.handleError=function(t){i.emit("error",{code:e.EErrorCode.DECODE,message:t.message,origin:t})},i.timeline=r.timeline,i._hardwareAcceleration=r.hardwareAcceleration||"prefer-hardware",i}return Je(r,t),Object.defineProperty(r.prototype,"hardwareAcceleration",{get:function(){return this._hardwareAcceleration},set:function(e){this._hardwareAcceleration=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"writable",{get:function(){return this.queue.status<f.FULL},enumerable:!1,configurable:!0}),r.prototype.isOutdatedPacket=function(e){return e.isNonRef&&(e.pts-e.basePTS)/e.timescale<this.timeline.currentTime},r.prototype.changeActiveCodec=function(e){e!==this.activeCodec&&(this.logger.info("\u5207\u6362\u89e3\u7801\u5668 ".concat(this.activeCodec||"none"," -> ").concat(e||"none")),this.activeCodec=e)},r.prototype.write=function(e){Array.isArray(e)?this.queue.writeList(e):this.queue.write(e),this.resume()},r.prototype.suspend=function(){this.running=!1,clearTimeout(this.timer)},r.prototype.resume=function(){this.running=!0,this.runTask(0)},r.prototype.end=function(){return Xe(this,void 0,void 0,(function(){return Qe(this,(function(e){return this.logger.info("pending eos",this.activeCodec),this.pendingEOS=!0,[2]}))}))},r.prototype.reset=function(){return Xe(this,void 0,void 0,(function(){return Qe(this,(function(e){return this.logger.info("reset",this.activeCodec),this.suspend(),this.ended=!1,this.pendingEOS=!1,this.queue.clear(),this.changeActiveCodec(""),[2,this.decoder.reset()]}))}))},r.prototype.destroy=function(){this.suspend(),this.ended=!1,this.pendingEOS=!1,this.queue.clear(),this.queue.removeAllListeners(),this.decoder.reset(),this.decoder.close(),this.removeAllListeners()},r}(qe),$e=(Ke=function(e,t){return(Ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ke(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),et=function(e){function t(t){var n=e.call(this,t)||this;return n.decoder=new ue.AudioCompatDecoder({output:n.handleOutput,error:n.handleError}),n}return $e(t,e),t.prototype.configureByPacket=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){return[2,this.decoder.configure({codec:e.codec,sampleRate:e.sampleRate,numberOfChannels:e.numberOfChannels,hardwareAcceleration:this.hardwareAcceleration})]}))}))},t}(Ze),tt=(ze=function(e,t){return(ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ze(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),nt=function(e){function t(t){var n=e.call(this,t)||this,r={output:n.handleOutput,error:n.handleError};return n.decoder=new ue.VideoCompatDecoder(r),n}return tt(t,e),t.prototype.configureByPacket=function(e){var t=e.isSync&&(/avc/.test(e.codec)&&e.data.length<=3||/h(vc|ev)/.test(e.codec)&&e.data.length<=4);return this.decoder.configure({codec:e.codec,hardwareAcceleration:t?this.hardwareAcceleration:"prefer-software",convert:!1})},t}(Ze),rt=function(){function e(){this.posterEl=document.createElement("img"),Object.assign(this.posterEl.style,{position:"absolute",width:"100%",height:"100%",objectFit:"contain",backgroundColor:"#000",zIndex:1})}return Object.defineProperty(e.prototype,"src",{set:function(e){this.posterEl.src=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{set:function(e){this.posterEl.style.display=e?"":"none"},enumerable:!1,configurable:!0}),e.prototype.attach=function(e){e.appendChild(this.posterEl)},e.prototype.destroy=function(){var e;null===(e=this.posterEl.parentNode)||void 0===e||e.removeChild(this.posterEl)},e}(),it=(He=function(e,t){return(He=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}He(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ot=function(e){function t(t){var n=e.call(this)||this;return n.maxSize=100,n.basePTS=0,n.pendingEOS=!1,n.running=!0,n.ended=!1,n.timescale=1,n.options=t,n.timeline=t.timeline,n.maxSize=t.maxSize||100,n.queue=new _(n.maxSize),n}return it(t,e),Object.defineProperty(t.prototype,"buffered",{get:function(){if(this.queue.size>1){var e=(this.queue.first().pts-this.basePTS)/this.timescale,t=(this.queue.last().pts-this.basePTS)/this.timescale;return{length:1,start:function(t){return e},end:function(e){return t}}}return{length:0,start:function(e){return 0},end:function(e){return 0}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readable",{get:function(){return this.queue.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"writable",{get:function(){return this.queue.size<this.maxSize},enumerable:!1,configurable:!0}),t.prototype.convertPTSToSeconds=function(e){return(e-this.basePTS)/this.timescale},t.prototype.convertSecondsToPTS=function(e){return e*this.timescale+this.basePTS},t.prototype.readCurrentNearestFrame=function(){var e=this.queue.read();return this.writable&&this.emit("writable"),e},t.prototype.getCurrentNearestFrame=function(){return this.queue.first()},t.prototype.canPlay=function(){return this.queue.size>=3},t.prototype.load=function(e){this.basePTS=e.basePTS,this.timescale=e.timescale},t.prototype.write=function(e){var t;return this.convertPTSToSeconds(e.pts)<this.timeline.currentTime?(null===(t=e.native)||void 0===t||t.close(),!1):(this.queue.write(e),!0)},t.prototype.suspend=function(){},t.prototype.resume=function(){},t.prototype.clear=function(){this.ended=!1,this.pendingEOS=!1,this.queue.readAll().forEach((function(e){var t;return null===(t=e.native)||void 0===t?void 0:t.close()})),this.writable&&this.emit("writable")},t.prototype.end=function(){this.pendingEOS=!0},t.prototype.destroy=function(){this.pause(),this.removeAllListeners(),this.clear()},t}(qe),at=(Ge=function(e,t){return(Ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ge(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),st=function(){return(st=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bindedAudioBufferDuration=0,t.renderedFrames=[],t.baseCurrentTime=0,t._volume=1,t.logger=new n.Logger("audio-process"),t.clear=function(){t.renderedFrames=[],e.prototype.clear.call(t)},t.play=function(){if(!t.ended){if(!t.renderedFrames.length)return t.emit("waiting");var e=new AudioContext,n=e.createGain();n.connect(e.destination),n.gain.value=t._volume,t.ctx=e,t.gainNode=n,t.baseCurrentTime=t.timeline.currentTime,t.bindedAudioBufferDuration=0,t.renderedFrames.forEach((function(r){t.bindFrameToContext(e,n,r)}))}},t.pause=function(){t.ctx&&(t.baseCurrentTime=0,t.bindedAudioBufferDuration=0,"closed"!==t.ctx.state&&t.ctx.close(),t.ctx=void 0,t.gainNode=void 0)},t}return at(t,e),Object.defineProperty(t.prototype,"volume",{get:function(){var e;return(null===(e=this.gainNode)||void 0===e?void 0:e.gain.value)||this._volume},set:function(e){this._volume=e,this.gainNode&&(this.gainNode.gain.value=e)},enumerable:!1,configurable:!0}),t.prototype.bindFrameToContext=function(e,t,n){var r=this;if("closed"!==e.state){var i=e.createBufferSource(),o=this.baseCurrentTime,a=n.buffer,s=this.convertPTSToSeconds(n.pts);i.buffer=a,i.onended=function(){r.readCurrentNearestFrame(),r.renderedFrames.shift(),i.onended=null,i.disconnect(),r.renderedFrames.length||(r.pendingEOS?(r.ended=!0,r.pause(),r.emit("ended")):(r.pause(),r.logger.warn("lack data at",r.timeline.currentTime),r.emit("waiting")))},i.playbackRate.value=this.timeline.playbackRate||1,s>=o?(i.connect(t),(0===this.bindedAudioBufferDuration||Math.abs(this.bindedAudioBufferDuration-(s-o))>.04)&&(this.bindedAudioBufferDuration=s-o),i.start(this.bindedAudioBufferDuration/this.timeline.playbackRate),this.bindedAudioBufferDuration+=a.duration):s<o&&s+a.duration>o&&(i.connect(t),i.start(0,(o-s)/this.timeline.playbackRate),this.bindedAudioBufferDuration=a.duration-(o-s))}},t.prototype.canPlay=function(){return this.renderedFrames.length>=3},t.prototype.write=function(t){var n=this,r=e.prototype.write.call(this,t);if(r){for(var i=t.channels,o=t.data,a=t.sampleRate,s=new Float32Array(o.buffer),c=s.length/i,u=new OfflineAudioContext(i,c,a),d=u.createBufferSource(),l=u.createBuffer(i,c,a),p=0,f=l.numberOfChannels;p<f;p++)l.getChannelData(p).set(s.slice(l.length*p,l.length*(p+1)));d.buffer=l,d.connect(u.destination),d.start(),u.oncomplete=function(e){var r=e.renderedBuffer;u.oncomplete=null;var i=st(st({},t),{buffer:r});n.renderedFrames.push(i),n.ctx&&n.gainNode&&n.bindFrameToContext(n.ctx,n.gainNode,i),3===n.renderedFrames.length&&n.emit("canplay"),n.emit("progress")},u.startRendering()}return r},t}(ot),ut=(We=function(e,t){return(We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}We(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},lt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};!function(e){e[e.PAUSED=0]="PAUSED",e[e.PLAYING=1]="PLAYING",e[e.WAITING=2]="WAITING"}(Fe||(Fe={}));var pt,ft,ht=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseCurrentTime=0,t.timeUpdateTimer=-1,t._playbackRate=1,t.status=Fe.PAUSED,t}return ut(t,e),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(e){var t=this.currentTime;this.currentTime=t,this._playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"waiting",{get:function(){return this.status===Fe.WAITING},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.status===Fe.PAUSED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.ctx?this.ctx.currentTime*this._playbackRate+this.baseCurrentTime:this.baseCurrentTime},set:function(e){if(this.ctx){var t=this.ctx.state;this.ctx.close(),this.ctx=new AudioContext,"suspended"===t?this.ctx.suspend():"running"===t&&this.ctx.resume()}this.baseCurrentTime=e,this.emit("timeupdate")},enumerable:!1,configurable:!0}),t.prototype.setTimeUpdateTimer=function(){var e=this;this.timeUpdateTimer=setInterval((function(){e.emit("timeupdate")}),100)},t.prototype.clearTimeUpdateTimer=function(){clearInterval(this.timeUpdateTimer)},t.prototype.play=function(){var e;return dt(this,void 0,void 0,(function(){var t=this;return lt(this,(function(n){return"running"===(null===(e=this.ctx)||void 0===e?void 0:e.state)?[2,this.ctx]:(this.setTimeUpdateTimer(),this.status=Fe.PLAYING,this.ctx=new AudioContext,this.emit("play"),[2,this.ctx.resume().then((function(){t.emit("playing")}))])}))}))},t.prototype.pause=function(){return dt(this,void 0,void 0,(function(){var e,t=this;return lt(this,(function(n){return this.clearTimeUpdateTimer(),this.baseCurrentTime=this.currentTime,e=this.ctx?this.ctx.close():Promise.resolve(),this.ctx=void 0,[2,e.then((function(){t.status=Fe.PAUSED,t.emit("pause")}))]}))}))},t.prototype.suspend=function(){return dt(this,void 0,void 0,(function(){var e=this;return lt(this,(function(t){return this.clearTimeUpdateTimer(),this.ctx?[2,this.ctx.suspend().then((function(){e.status=Fe.WAITING,e.emit("waiting")}))]:(this.status!==Fe.WAITING&&(this.status=Fe.WAITING,this.emit("waiting")),[2])}))}))},t.prototype.resume=function(){return dt(this,void 0,void 0,(function(){var e,t=this;return lt(this,(function(n){return this.setTimeUpdateTimer(),(e=this.ctx)?[2,e.resume().then((function(){return t.status=Fe.PLAYING,t.emit("playing"),e}))]:[2,this.play()]}))}))},t.prototype.reset=function(){this.baseCurrentTime=0,this.status=Fe.PAUSED,this.clearTimeUpdateTimer(),this.ctx&&(this.ctx.close(),this.ctx=void 0)},t}(o()),_t=function(){function e(e){this.yTexture=null,this.uTexture=null,this.vTexture=null,this.gl=e}return e.prototype.setup=function(){var e=this.createProgram();this.createBuffer(e),this.createTextures(e)},e.prototype.createProgram=function(){var e=this.gl,t=e.createShader(e.VERTEX_SHADER),n=e.createShader(e.FRAGMENT_SHADER),r=e.createProgram();if(!(t&&n&&r))throw new DOMException("Brower do not support WebGL shader");if(e.shaderSource(t,"\n    attribute vec4 vertexPos;\n    attribute vec2 texturePos;\n    varying vec2 textureCoord;\n\n    void main() {\n        gl_Position = vertexPos;\n        textureCoord = texturePos;\n    }\n"),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))throw new DOMException("Vertex shader failed to compile: "+e.getShaderInfoLog(t));if(e.shaderSource(n,"\n    precision highp float;\n    varying highp vec2 textureCoord;\n    uniform sampler2D ySampler;\n    uniform sampler2D uSampler;\n    uniform sampler2D vSampler;\n    const mat4 YUV2RGB = mat4(\n        1.1643828125, 0, 1.59602734375, -.87078515625,\n        1.1643828125, -.39176171875, -.81296875, .52959375,\n        1.1643828125, 2.017234375, 0, -1.081390625,\n        0, 0, 0, 1\n    );\n\n    void main(void) {\n        highp float y = texture2D(ySampler,  textureCoord).r;\n        highp float u = texture2D(uSampler,  textureCoord).r;\n        highp float v = texture2D(vSampler,  textureCoord).r;\n        gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;\n    }\n"),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new DOMException("Fragment shader failed to compile: "+e.getShaderInfoLog(n));if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new DOMException("Program failed to compile: "+e.getProgramInfoLog(r));return e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.useProgram(r),r},e.prototype.createBuffer=function(e){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,1,-1,-1,1,-1,-1]),t.STATIC_DRAW);var n=t.getAttribLocation(e,"vertexPos");t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,1,1,0,0,0,1]),t.STATIC_DRAW);var r=t.getAttribLocation(e,"texturePos");t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0)},e.prototype.createTextures=function(e){var t=this.gl,n=this._createTexture(),r=t.getUniformLocation(e,"ySampler");t.uniform1i(r,0),this.yTexture=n;var i=this._createTexture(),o=t.getUniformLocation(e,"uSampler");t.uniform1i(o,1),this.uTexture=i;var a=this._createTexture(),s=t.getUniformLocation(e,"vSampler");t.uniform1i(s,2),this.vTexture=a},e.prototype._createTexture=function(){var e=this.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t},e.prototype.draw=function(e,t,n){var r=this,i=r.yTexture,o=r.uTexture,a=r.vTexture,s=r.gl,c=t*n;s.viewport(0,0,t,n);var u=c,d=e.subarray(0,u);s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,i),s.texImage2D(s.TEXTURE_2D,0,s.LUMINANCE,t,n,0,s.LUMINANCE,s.UNSIGNED_BYTE,d);var l=c/4,p=e.subarray(u,u+l);s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,o),s.texImage2D(s.TEXTURE_2D,0,s.LUMINANCE,t/2,n/2,0,s.LUMINANCE,s.UNSIGNED_BYTE,p);var f=l,h=e.subarray(u+l,u+l+f);s.activeTexture(s.TEXTURE2),s.bindTexture(s.TEXTURE_2D,a),s.texImage2D(s.TEXTURE_2D,0,s.LUMINANCE,t/2,n/2,0,s.LUMINANCE,s.UNSIGNED_BYTE,h),s.drawArrays(s.TRIANGLES,0,6)},e}(),vt=function(){function e(e){this.texture=null,this.gl=e}return e.prototype.setup=function(){var e=this.createProgram();this.createBuffer(e),this.createTextures()},e.prototype.createProgram=function(){var e=this.gl,t=e.createShader(e.VERTEX_SHADER),n=e.createShader(e.FRAGMENT_SHADER);if(!t||!n)throw new DOMException("Brower do not support WebGL shader");if(e.shaderSource(t,"\n    attribute vec2 xy;\n    varying highp vec2 uv;\n    void main(void) {\n        gl_Position = vec4(xy, 0.0, 1.0);\n        // Map vertex coordinates (-1 to +1) to UV coordinates (0 to 1).\n        // UV coordinates are Y-flipped relative to vertex coordinates.\n        uv = vec2((1.0 + xy.x) / 2.0, (1.0 - xy.y) / 2.0);\n    }\n"),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))throw new DOMException("Vertex shader failed to compile: "+e.getShaderInfoLog(t));if(e.shaderSource(n,"\n    varying highp vec2 uv;\n    uniform sampler2D texture;\n    void main(void) {\n        gl_FragColor = texture2D(texture, uv);\n    }\n"),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new DOMException("Fragment shader failed to compile: "+e.getShaderInfoLog(n));var r=e.createProgram();if(!r)throw new DOMException("Brower do not support Program");if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new DOMException("Program failed to compile: "+e.getProgramInfoLog(r));return e.useProgram(r),r},e.prototype.createBuffer=function(e){var t=this.gl,n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),t.STATIC_DRAW);var r=t.getAttribLocation(e,"xy");return t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r),n},e.prototype.createTextures=function(){this.texture=this._createTexture()},e.prototype._createTexture=function(){var e=this.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t},e.prototype.draw=function(e){var t=this.gl;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),e.close(),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.drawArrays(t.TRIANGLE_FAN,0,4)},e}(),mt=(ft=function(e,t){return(ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ft(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e[e.NONE=0]="NONE",e[e.VIDEO_FRAME=1]="VIDEO_FRAME",e[e.YUV_BUFFER=2]="YUV_BUFFER"}(pt||(pt={}));var gt,Et,yt,bt=function(e){function t(t){var n=e.call(this)||this;return n.ctx=null,n.videoframeGL=null,n.yuvGL=null,n.renderType=pt.NONE,n.options=t,n.ctx=n.createContext(),n.ctx&&(n.videoframeGL=new vt(n.ctx),n.yuvGL=new _t(n.ctx)),n}return mt(t,e),t.prototype.createContext=function(){for(var e=this.options,t=e.el,n=e.contextOptions,r=["webgl2","webgl","experimental-webgl","moz-webgl","webkit-3d"],i=0,o=null;!o&&i<r.length;){var a=r[i];try{o=t.getContext(a,n)}catch(e){}++i}return o||this.emit("error",new DOMException("Brower do not support WebGL")),o},t.prototype.clear=function(){this.ctx&&(this.ctx.clearColor(0,0,0,1),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT))},t.prototype.drawYUV=function(e,t,n){if(this.yuvGL){if(this.renderType!==pt.YUV_BUFFER){try{this.yuvGL.setup()}catch(e){this.emit("error",e)}this.renderType=pt.YUV_BUFFER}this.yuvGL.draw(e,t,n)}},t.prototype.drawVideoFrame=function(e){if(this.videoframeGL){if(this.renderType!==pt.VIDEO_FRAME){try{this.videoframeGL.setup()}catch(e){this.emit("error",e)}this.renderType=pt.VIDEO_FRAME}this.videoframeGL.draw(e)}},t.prototype.draw=function(e){e.native?this.drawVideoFrame(e.native):this.drawYUV(e.data,e.width,e.height)},t}(o()),St=(yt=function(e,t){return(yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}yt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Tt=function(e){function t(t){var r=e.call(this,t)||this;return r.timer=-1,r.stopRender=!1,r.firstFrameRendered=!1,r.meta=null,r.logger=new n.Logger("video-process"),r.cancelAnimation=function(){r.stopRender=!0,clearTimeout(r.timer)},r.startAnimation=function(){r.stopRender=!1,r.playWithElapsed()},r.triggerEnd=function(){r.ended=!0,r.cancelAnimation(),r.emit("ended")},r.playWithElapsed=function(){var e;if(!r.stopRender&&!r.ended){var t=r.getCurrentNearestFrame();if(t){var n=r.convertPTSToSeconds(t.pts)-r.timeline.currentTime;if(n<-.04)return r.readCurrentNearestFrame(),r.playWithElapsed();if(n>.1)clearTimeout(r.timer),r.timer=setTimeout(r.playWithElapsed,1e3*n/r.timeline.playbackRate);else{r.readCurrentNearestFrame(),document.hidden||(r.frameCanvas.draw(t),null===(e=t.native)||void 0===e||e.close());var i=r.getCurrentNearestFrame();if(i){var o=r.convertPTSToSeconds(i.pts),a=r.timeline.currentTime;r.timer=setTimeout(r.playWithElapsed,1e3*(o-a)/r.timeline.playbackRate)}else r.pendingEOS?r.triggerEnd():r.timer=setTimeout(r.playWithElapsed,40/r.timeline.playbackRate)}}else{if(r.pendingEOS)return r.triggerEnd();r.logger.warn("lack data at",r.timeline.currentTime),r.cancelAnimation(),r.emit("waiting")}}},r.autoAdjustSize=function(){if(r.meta){var e=r.meta,t=e.width,n=e.height,i=e.rotate,o=void 0===i?0:i,a="cover"===r.el.style.objectFit;r.el.width=t,r.el.height=n;var s=t/n,c=r.el.parentElement;if(c){var u=c.offsetWidth||0,d=c.offsetHeight||0,l=s>(c?u/d:1);if(a?(r.el.style.width=l?"":"100%",r.el.style.height=l?"100%":""):(r.el.style.width=l?"100%":"",r.el.style.height=l?"":"100%"),o%360){var p=o%360/180*Math.PI,f=Math.abs(t*Math.cos(p)+n*Math.sin(p)),h=Math.abs(n*Math.cos(p)+t*Math.sin(p)),_=l?t/f:n/h;r.el.style.transform="scale(".concat(_,") rotate(").concat(o,"deg)")}}}},r.el=document.createElement("canvas"),Object.assign(r.el.style,{verticalAlign:"middle"}),r.frameCanvas=new bt({el:r.el,contextOptions:{preserveDrawingBuffer:!0}}),r}return St(t,e),Object.defineProperty(t.prototype,"objectFit",{get:function(){return this.el.style.objectFit},set:function(e){this.el.style.objectFit=e,this.autoAdjustSize()},enumerable:!1,configurable:!0}),t.prototype.pause=function(){this.cancelAnimation()},t.prototype.play=function(){this.cancelAnimation(),this.startAnimation()},t.prototype.clear=function(){this.firstFrameRendered=!1,e.prototype.clear.call(this)},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return n&&!this.firstFrameRendered&&(this.frameCanvas.draw(t),this.firstFrameRendered=!0),3===this.queue.size&&this.emit("canplay"),this.emit("progress"),n},t.prototype.attach=function(e){e.appendChild(this.el)},t.prototype.load=function(t){e.prototype.load.call(this,t),this.meta=t,this.autoAdjustSize(),window.addEventListener("resize",this.autoAdjustSize)},t.prototype.destroy=function(){var t;e.prototype.destroy.call(this),this.meta=null,window.removeEventListener("resize",this.autoAdjustSize),null===(t=this.el.parentNode)||void 0===t||t.removeChild(this.el)},t}(ot),wt=(Et=function(e,t){return(Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Et(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Rt=function(){return(Rt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ct=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ot=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},At=G.createAnnexbStartCode(),It=function(t){function r(r){var i=t.call(this,r)||this;return i._muted=!1,i._loop=!1,i._volume=1,i._autoplay=!1,i.logger=new n.Logger("wasm-renderer"),i.posterRenderer=new rt,i.seeking=!1,i.hasError=!1,i.handleProgress=je()((function(){i.emit("progress")}),500),i.handleDemuxEnd=function(){i.audioDecodeStream.end(),i.videoDecodeStream.end()},i.handleError=function(e){i.hasError=!0,i.emit("error",e),i.demuxer.suspend()},i.handleStatusChange=function(e){!i.hasError&&!i.seeking&&e.previousStatus>=f.NORMAL&&e.currentStatus<f.NORMAL&&i.metadata.progressive&&i.demuxer.resume()},i.handleEnded=function(){i.logger.log("ended",i.availableProcesses.map((function(e){return e.logger.name+":"+e.ended}))),i.ended&&(i.loop?i.seek(0):i.pause().then((function(){i.emit("ended")})))},i.handleWaiting=function(){i.timeline.suspend().then((function(){i.availableProcesses.forEach((function(e){return e.pause()})),i.status=d.WAITING}))},i.handleCanplay=function(){i.logger.log("canplay",i.availableProcesses.map((function(e){return e.logger.name+":"+e.canPlay()})),i.timeline.status),i.availableProcesses.every((function(e){return e.canPlay()}))&&((i.timeline.waiting||i.timeline.paused)&&i.emit("canplay"),i.timeline.waiting&&i.timeline.resume().then((function(){i.availableProcesses.forEach((function(e){return e.play()})),i.status=d.PLAYING})))},i.write=function(t){if(t.length){i.seeking&&(i.seeking=!1,i.emit("seeked"));var n=i.metadata,r=n.tracks,o=n.basePTS,a=void 0===o?0:o;r&&(r.forEach((function(n){var r=i.currentTime,o=y(t.filter((function(e){return e.trackType===n.type&&!(e.isNonRef&&(e.pts-a)/n.timescale<r)})),(function(e){return e.dts.toString()}));if(o.length)if(n.type===e.ETrackType.VIDEO){if(!o.length)return;i.videoDecodeStream.write(o.map((function(t){var r=[];return t.data.forEach((function(e){return r.push(At,e)})),Rt(Rt({},t),{basePTS:a,timescale:n.timescale,data:t.data,uint8:e.ByteBuffer.concatUint8s(r)})})))}else n.type===e.ETrackType.AUDIO&&i.audioDecodeStream.write(o.map((function(t){return Rt(Rt({},t),{basePTS:a,sampleRate:n.sampleRate,numberOfChannels:n.channelCount,timescale:n.timescale,data:t.data,uint8:z(e.ByteBuffer.concatUint8s(t.data),n)})})))})),!i.metadata.progressive||i.videoDecodeStream.writable||i.audioDecodeStream.writable||i.demuxer.suspend())}},i.options=r,i.timeline=new ht,i.demuxer=r.demuxer,a(i.timeline,i,["play","pause","waiting","playing","timeupdate"]),i.audioDecodeStream=new et({timeline:i.timeline,hardwareAcceleration:r.hardwareAcceleration}),i.videoDecodeStream=new nt({timeline:i.timeline,hardwareAcceleration:r.hardwareAcceleration}),i.audioDecodeStream.queue.on("statuschange",i.handleStatusChange),i.videoDecodeStream.queue.on("statuschange",i.handleStatusChange),i.audioDecodeStream.on("error",i.handleError),i.videoDecodeStream.on("error",i.handleError),i.audioDecodeStream.on("end",(function(){i.audioProcess.end()})),i.videoDecodeStream.on("end",(function(){i.videoProcess.end()})),i.audioProcess=new ct({timeline:i.timeline,maxSize:100}),i.videoProcess=new Tt({timeline:i.timeline,maxSize:10}),i.audioDecodeStream.pipe(i.audioProcess),i.videoDecodeStream.pipe(i.videoProcess),i.audioProcess.on("progress",i.handleProgress),i.videoProcess.on("progress",i.handleProgress),i.audioProcess.on("waiting",i.handleWaiting),i.videoProcess.on("waiting",i.handleWaiting),i.audioProcess.on("ended",i.handleEnded),i.videoProcess.on("ended",i.handleEnded),i.audioProcess.on("canplay",i.handleCanplay),i.videoProcess.on("canplay",i.handleCanplay),i.audioProcess.on("error",i.handleError),i.videoProcess.on("error",i.handleError),i.demuxer.on("end",i.handleDemuxEnd),Ce&&se&&!Ve&&document.addEventListener("touchstart",(function e(){var t,n=document.createElement("audio");n.controls=!1,n.preload="auto",n.loop=!1,n.src="data:audio/mp3;base64,//MkxAAHiAICWABElBeKPL/RANb2w+yiT1g/gTok//lP/W/l3h8QO/OCdCqCW2Cw//MkxAQHkAIWUAhEmAQXWUOFW2dxPu//9mr60ElY5sseQ+xxesmHKtZr7bsqqX2L//MkxAgFwAYiQAhEAC2hq22d3///9FTV6tA36JdgBJoOGgc+7qvqej5Zu7/7uI9l//MkxBQHAAYi8AhEAO193vt9KGOq+6qcT7hhfN5FTInmwk8RkqKImTM55pRQHQSq//MkxBsGkgoIAABHhTACIJLf99nVI///yuW1uBqWfEu7CgNPWGpUadBmZ////4sL//MkxCMHMAH9iABEmAsKioqKigsLCwtVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVV//MkxCkECAUYCAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",n.onended=function(){Ve=!0,document.removeEventListener("touchstart",e)},null===(t=n.play())||void 0===t||t.catch((function(){}))})),i}return wt(r,t),Object.defineProperty(r.prototype,"availableProcesses",{get:function(){var t,n=this,r=[];return null===(t=this.metadata.tracks)||void 0===t||t.forEach((function(t){t.type===e.ETrackType.AUDIO?r.push(n.audioProcess):t.type===e.ETrackType.VIDEO&&r.push(n.videoProcess)})),r},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hardwareAcceleration",{get:function(){return this.options.hardwareAcceleration||"prefer-hardware"},set:function(e){this.options.hardwareAcceleration=e,this.videoDecodeStream.hardwareAcceleration=e,this.audioDecodeStream.hardwareAcceleration=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"objectFit",{get:function(){return this.videoProcess.objectFit},set:function(e){this.videoProcess.objectFit=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"loop",{get:function(){return!!this._loop},set:function(e){this._loop=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoplay",{get:function(){return!!this._autoplay},set:function(e){this._autoplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"duration",{get:function(){var e=this.metadata,t=e.duration,n=void 0===t?0:t,r=e.timescale;return n/(void 0===r?1:r)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffered",{get:function(){var e=this.availableProcesses.map((function(e){return e.buffered})),t=Math.min.apply(Math,e.map((function(e){return e.start(0)}))),n=Math.min.apply(Math,e.map((function(e){return e.end(0)})));return{length:1,start:function(e){return t},end:function(e){return n}}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"poster",{get:function(){return this.posterRenderer.src},set:function(e){this.posterRenderer.src=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ended",{get:function(){return this.availableProcesses.every((function(e){return e.ended}))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"paused",{get:function(){return this.timeline.paused},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentTime",{get:function(){return this.timeline.currentTime},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playbackRate",{get:function(){return this.timeline.playbackRate},set:function(e){e!==this.timeline.playbackRate&&(this.timeline.playbackRate=e,this.audioProcess.pause(),this.videoProcess.pause(),this.audioProcess.play(),this.videoProcess.play(),this.emit("ratechange"),this._noticeUpdate())},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"muted",{get:function(){return this._muted},set:function(e){e!==this._muted&&(this._muted=e,this.audioProcess.volume=e?0:this._volume,this.emit("volumechange"),this._noticeUpdate())},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"volume",{get:function(){return this._volume},set:function(e){e!==this.volume&&(this._volume=e,this.audioProcess.volume=e,this.emit("volumechange"),this._noticeUpdate())},enumerable:!1,configurable:!0}),r.isSupported=function(e){var t;return Ct(this,void 0,void 0,(function(){return Ot(this,(function(n){return[ce.WebAssembly,ce.Worker,ce.AudioContext,ce.OfflineAudioContext,ce.Blob,null===(t=ce.URL)||void 0===t?void 0:t.createObjectURL].every((function(e){return!!e}))?[2,e.tracks.some((function(e){return/(avc1|hvc1|hev1)/i.test(e.codec)}))]:[2,!1]}))}))},r.prototype.attach=function(e){this.videoProcess.attach(e)},r.prototype.load=function(t){var n,r=this;this.reset(),t.tracks.forEach((function(n){n.type===e.ETrackType.VIDEO?r.videoProcess.load(Rt(Rt({},n),{basePTS:t.basePTS})):n.type===e.ETrackType.AUDIO&&r.audioProcess.load(Rt(Rt({},n),{basePTS:t.basePTS}))})),this.metadata=t,this.status=d.LOADED,this.emit("loadedmetadata"),this.emit("loadeddata"),this.autoplay&&(n=this._muted,function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){return[2,new Promise((function(e){setTimeout((function(){e(!1)}),150);var t=new AudioContext,r=t.createBuffer(1,1,22050),i=t.createBufferSource();if(i.buffer=r,n){var o=t.createGain();o.gain.value=0,i.connect(o),o.connect(t.destination)}i.connect(t.destination),i.onended=function(){e(!0)},i.start()})).catch((function(){return!1}))]}))}))).then((function(e){r.logger.info("\u68c0\u67e5\u73af\u5883\u662f\u5426\u5141\u8bb8 webaudio autoplay:",e),e&&r.play()})),this._noticeUpdate()},r.prototype.seek=function(e){return Ct(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,c,u;return Ot(this,(function(l){switch(l.label){case 0:return t=this.metadata,n=t.live,r=t.progressive,i=t.duration,o=void 0===i?1/0:i,a=t.timescale,s=void 0===a?1:a,n?(this.logger.warn("don't allow to seek in live mode"),[2]):(this.hasError=!1,this.seeking=!0,this.emit("seeking"),c=Math.min(e,o/s||1/0),this.availableProcesses.forEach((function(e){return e.clear()})),r?(u=this.timeline.paused,this.demuxer.suspend(),[4,this.pause()]):[3,3]);case 1:return l.sent(),[4,this.clear()];case 2:return l.sent(),this.demuxer.seek(c),this.timeline.currentTime=c,u||this.play(),[3,4];case 3:this.timeline.currentTime=c,l.label=4;case 4:return this.status===d.ENDED&&(this.status=d.PAUSED),[2]}}))}))},r.prototype.play=function(){return Ct(this,void 0,void 0,(function(){var e,t=this;return Ot(this,(function(n){return this.posterRenderer.visible=!1,(this.currentTime>=this.duration&&this.duration>0||this.ended)&&(this.clear(),this.seek(0)),!(e=this.availableProcesses).length||e.some((function(e){return!e.canPlay()}))?[2,this.timeline.suspend().then((function(){t.status=d.WAITING}))]:[2,this.timeline.play().then((function(){t.availableProcesses.forEach((function(e){return e.play()})),t.status=d.PLAYING}))]}))}))},r.prototype.pause=function(){var e=this;return this.timeline.pause().then((function(){e.availableProcesses.forEach((function(e){return e.pause()})),e.status=d.PAUSED}))},r.prototype.toggle=function(){return this.paused?this.play():this.pause()},r.prototype.clear=function(){return Ct(this,void 0,void 0,(function(){return Ot(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.videoDecodeStream.reset(),this.audioDecodeStream.reset()])];case 1:return e.sent(),this.videoProcess.clear(),this.audioProcess.clear(),[2]}}))}))},r.prototype.reset=function(){this.audioProcess.pause(),this.videoProcess.pause(),this.seeking=!1,this.hasError=!1,this.timeline.reset(),this.posterRenderer.visible=!0,t.prototype.reset.call(this)},r.prototype.destroy=function(){this.demuxer.off("end",this.handleDemuxEnd),this.posterRenderer.destroy(),this.timeline.removeAllListeners(),this.reset(),this.removeAllListeners(),this.videoDecodeStream.destroy(),this.audioDecodeStream.destroy(),this.videoProcess.destroy(),this.audioProcess.destroy()},r}(N),kt=(gt=function(e,t){return(gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}gt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Nt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Pt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Dt=["volume","autoplay","loop","muted","poster","playbackRate","objectFit","hardwareAcceleration"],xt=["loadstart"],Lt=y(k.concat(xt,"beforerendererchange"),(function(e){return e})),Mt=function(t){function r(e){var r=t.call(this)||this;return r.metadata=null,r._src="",r.logger=new n.Logger("controller"),r.cachePacketQueue=new _(1/0),r.error=null,r.handleError=function(e){var t;null===(t=r.demuxer)||void 0===t||t.suspend(),r.error=e,r.emit("update")},r.handleDemuxerError=function(e){r.emit("error",e)},r.handleLoadedData=function(e){var t=e.packets;r.cachePacketQueue.writeList(t),r.metadata&&r.activeRenderer.write(r.cachePacketQueue.readAll())},r.handleLoadedMetadata=function(e){return Nt(r,void 0,void 0,(function(){var t,n,r,i,o;return Pt(this,(function(a){switch(a.label){case 0:t=this.activeRenderer.status,this.emit("beforerendererchange",e),n=this.options.hardwareAcceleration,r=0,i="prefer-software"===n?[It,Ne,De]:[Ne,De,It],a.label=1;case 1:return r<i.length?[4,(o=i[r]).isSupported(e)]:[3,4];case 2:if(a.sent())return this.activeRenderer.constructor!==o&&(this.logger.info("\u5207\u6362renderer, ".concat(this.activeRenderer.constructor.name," -> ").concat(o.name)),this.activeRenderer.pause(),this.activeRenderer.destroy(),this.activeRenderer=this.createRenderer(o)),[3,4];a.label=3;case 3:return r++,[3,1];case 4:return this.metadata=e,this.logger.info("\u52a0\u8f7dmetadata",e),this.activeRenderer.load(e),t!==d.WAITING&&t!==d.PLAYING||(this.logger.log("[handleLoadedMetadata] \u6062\u590d\u72b6\u6001"),this.activeRenderer.play()),[2]}}))}))},r.handleRendererVolumeChange=function(){r.options.volume=r.activeRenderer.volume,r.options.muted=r.activeRenderer.muted},r.options=e,r.demuxer=e.demuxer,r.demuxer&&(a(r.demuxer,r,xt),r.demuxer.on("loadedmetadata",r.handleLoadedMetadata),r.demuxer.on("loadeddata",r.handleLoadedData),r.demuxer.on("error",r.handleDemuxerError)),r.nativeRenderer=r.createRenderer(Ne),r.activeRenderer=r.nativeRenderer,r.on("error",r.handleError),setTimeout((function(){e.src&&(r.src=e.src)}),0),r}return kt(r,t),Object.defineProperty(r.prototype,"buffered",{get:function(){return this.activeRenderer.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"live",{get:function(){var e;return!!(null===(e=this.metadata)||void 0===e?void 0:e.live)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"progressive",{get:function(){var e;return!!(null===(e=this.metadata)||void 0===e?void 0:e.progressive)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoplay",{get:function(){return!!this.activeRenderer.autoplay},set:function(e){this.options.autoplay=e,this.activeRenderer.autoplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"muted",{get:function(){return this.activeRenderer.muted},set:function(e){this.activeRenderer.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"preload",{get:function(){return this.options.preload||""},set:function(e){this.options.preload=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"paused",{get:function(){return this.activeRenderer.paused},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"loop",{get:function(){return!!this.activeRenderer.loop},set:function(e){this.options.loop=e,this.activeRenderer.loop=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"objectFit",{get:function(){return this.activeRenderer.objectFit},set:function(e){this.activeRenderer.objectFit=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"controlsList",{get:function(){return this.options.controlsList||""},set:function(e){this.options.controlsList=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playbackRate",{get:function(){return this.activeRenderer.playbackRate},set:function(e){this.options.playbackRate=e,this.activeRenderer.playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"audioTrack",{get:function(){var t;return null===(t=this.metadata)||void 0===t?void 0:t.tracks.find((function(t){return t.type===e.ETrackType.AUDIO}))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"audioCodec",{get:function(){var e;return null===(e=this.audioTrack)||void 0===e?void 0:e.codec},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"videoCodec",{get:function(){var e,t;return(null===(e=this.videoTrack)||void 0===e?void 0:e.codec)||(E(this.type)?"avc1":(t=this.type,/h(vc|ev)/i.test(t)?"hvc1":""))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"videoTrack",{get:function(){var t;return null===(t=this.metadata)||void 0===t?void 0:t.tracks.find((function(t){return t.type===e.ETrackType.VIDEO}))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"videoWidth",{get:function(){var e;return null===(e=this.videoTrack)||void 0===e?void 0:e.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"videoHeight",{get:function(){var e;return null===(e=this.videoTrack)||void 0===e?void 0:e.height},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"duration",{get:function(){return this.activeRenderer.duration},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentTime",{get:function(){return this.activeRenderer.currentTime},set:function(e){this.error=null,this.activeRenderer.seek(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"src",{get:function(){return this._src},set:function(e){var t;this.reset(),this._src=e;var n=this.options,r=n.autoplay,i=n.preload;this.demuxer?(r||"none"!==i)&&(null===(t=this.demuxer)||void 0===t||t.load(e)):this.nativeRenderer.src=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"type",{get:function(){return this.options.type||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"volume",{get:function(){return this.activeRenderer.volume},set:function(e){this.options.volume=e,this.activeRenderer.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"poster",{get:function(){return this.options.poster||""},set:function(e){this.options.poster=e,this.activeRenderer.poster=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"formatType",{get:function(){var e;return null===(e=this.metadata)||void 0===e?void 0:e.formatType},enumerable:!1,configurable:!0}),r.prototype.createRenderer=function(e){var t=this.options.container,n=this.options,r=new e({demuxer:this.demuxer});return Dt.forEach((function(e){g(n[e])||g(r[e])||(r[e]=n[e])})),r.on("volumechange",this.handleRendererVolumeChange),r.attach(t),a(r,this,k),r},r.prototype.load=function(){return Nt(this,void 0,void 0,(function(){return Pt(this,(function(e){return this.src=this._src,[2]}))}))},r.prototype.play=function(){var t,n,r=this;return!this._src&&!(null===(t=this.demuxer)||void 0===t?void 0:t.url)||this.live&&(null===(n=this.demuxer)||void 0===n?void 0:n.status)!==e.ELoaderStatus.LOADING?this.load().then((function(){return r.activeRenderer.play().catch((function(e){return"AbortError"===e.name&&e.message.indexOf("play()")>-1?(r.logger.warn(e),Promise.resolve()):Promise.reject(e)}))})):this.activeRenderer.play()},r.prototype.pause=function(){return this.activeRenderer.pause()},r.prototype.toggle=function(){var e=this;return this.error?this.load().then((function(){return e.play()})):this.paused?this.play():this.pause()},r.prototype.reset=function(){var e;this.error=null,this._src="",this.metadata=null,this.cachePacketQueue.clear(),null===(e=this.demuxer)||void 0===e||e.reset(),this.activeRenderer.reset(),this.emit("update")},r.prototype.destroy=function(){var e;this.reset(),null===(e=this.demuxer)||void 0===e||e.destroy(),this.activeRenderer.destroy(),this.removeAllListeners()},r}(o()),Ut=c(379),jt=c.n(Ut),Vt=c(37),Bt=c.n(Vt),Ft=c(569),Wt=c.n(Ft),Gt=c(565),Ht=c.n(Gt),zt=c(216),Kt=c.n(zt),Yt=c(849),qt={};Yt.Z&&Yt.Z.locals&&(qt.locals=Yt.Z.locals);var Jt,Xt=0,Qt={};Qt.setAttributes=Ht(),Qt.insert=Wt().bind(null,"head"),Qt.domAPI=Bt(),Qt.insertStyleElement=Kt(),qt.use=function(e){return Qt.options=e||{},Xt++||(Jt=jt()(Yt.Z,Qt)),qt},qt.unuse=function(){Xt>0&&!--Xt&&(Jt(),Jt=null)};var Zt,$t,en,tn,nn,rn,on=qt,an={},sn=[],cn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function un(e,t){for(var n in t)e[n]=t[n];return e}function dn(e){var t=e.parentNode;t&&t.removeChild(e)}function ln(e,t,n){var r,i,o,a={};for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?Zt.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===a[o]&&(a[o]=e.defaultProps[o]);return pn(e,a,r,i,null)}function pn(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++en:i};return null==i&&null!=$t.vnode&&$t.vnode(o),o}function fn(e){return e.children}function hn(e,t){this.props=e,this.context=t}function _n(e,t){if(null==t)return e.__?_n(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?_n(e):null}function vn(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return vn(e)}}function mn(e){(!e.__d&&(e.__d=!0)&&tn.push(e)&&!gn.__r++||nn!==$t.debounceRendering)&&((nn=$t.debounceRendering)||setTimeout)(gn)}function gn(){for(var e;gn.__r=tn.length;)e=tn.sort((function(e,t){return e.__v.__b-t.__v.__b})),tn=[],e.some((function(e){var t,n,r,i,o,a;e.__d&&(o=(i=(t=e).__v).__e,(a=t.__P)&&(n=[],(r=un({},i)).__v=i.__v+1,On(a,i,r,t.__n,void 0!==a.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?_n(i):o,i.__h),An(n,i),i.__e!=o&&vn(i)))}))}function En(e,t,n,r,i,o,a,s,c,u){var d,l,p,f,h,_,v,m=r&&r.__k||sn,g=m.length;for(n.__k=[],d=0;d<t.length;d++)if(null!=(f=n.__k[d]=null==(f=t[d])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?pn(null,f,null,null,f):Array.isArray(f)?pn(fn,{children:f},null,null,null):f.__b>0?pn(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(p=m[d])||p&&f.key==p.key&&f.type===p.type)m[d]=void 0;else for(l=0;l<g;l++){if((p=m[l])&&f.key==p.key&&f.type===p.type){m[l]=void 0;break}p=null}On(e,f,p=p||an,i,o,a,s,c,u),h=f.__e,(l=f.ref)&&p.ref!=l&&(v||(v=[]),p.ref&&v.push(p.ref,null,f),v.push(l,f.__c||h,f)),null!=h?(null==_&&(_=h),"function"==typeof f.type&&f.__k===p.__k?f.__d=c=yn(f,c,e):c=Sn(e,f,p,m,h,c),"function"==typeof n.type&&(n.__d=c)):c&&p.__e==c&&c.parentNode!=e&&(c=_n(p))}for(n.__e=_,d=g;d--;)null!=m[d]&&kn(m[d],m[d]);if(v)for(d=0;d<v.length;d++)In(v[d],v[++d],v[++d])}function yn(e,t,n){for(var r,i=e.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=e,t="function"==typeof r.type?yn(r,t,n):Sn(n,r,r,i,r.__e,t));return t}function bn(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){bn(e,t)})):t.push(e)),t}function Sn(e,t,n,r,i,o){var a,s,c;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||i!=o||null==i.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(i),a=null;else{for(s=o,c=0;(s=s.nextSibling)&&c<r.length;c+=2)if(s==i)break e;e.insertBefore(i,o),a=o}return void 0!==a?a:i.nextSibling}function Tn(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||cn.test(t)?n:n+"px"}function wn(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Tn(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Tn(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?Cn:Rn,o):e.removeEventListener(t,o?Cn:Rn,o);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function Rn(e){this.l[e.type+!1]($t.event?$t.event(e):e)}function Cn(e){this.l[e.type+!0]($t.event?$t.event(e):e)}function On(e,t,n,r,i,o,a,s,c){var u,d,l,p,f,h,_,v,m,g,E,y,b,S=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(c=n.__h,s=t.__e=n.__e,t.__h=null,o=[s]),(u=$t.__b)&&u(t);try{e:if("function"==typeof S){v=t.props,m=(u=S.contextType)&&r[u.__c],g=u?m?m.props.value:u.__:r,n.__c?_=(d=t.__c=n.__c).__=d.__E:("prototype"in S&&S.prototype.render?t.__c=d=new S(v,g):(t.__c=d=new hn(v,g),d.constructor=S,d.render=Nn),m&&m.sub(d),d.props=v,d.state||(d.state={}),d.context=g,d.__n=r,l=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=S.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=un({},d.__s)),un(d.__s,S.getDerivedStateFromProps(v,d.__s))),p=d.props,f=d.state;for(u=0;u<d._sb.length;u++)d.__h.push(d._sb[u]),d._sb=[];if(l)null==S.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==S.getDerivedStateFromProps&&v!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(v,g),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(v,d.__s,g)||t.__v===n.__v){d.props=v,d.state=d.__s,t.__v!==n.__v&&(d.__d=!1),d.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(v,d.__s,g),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(p,f,h)}))}if(d.context=g,d.props=v,d.__v=t,d.__P=e,E=$t.__r,y=0,"prototype"in S&&S.prototype.render)d.state=d.__s,d.__d=!1,E&&E(t),u=d.render(d.props,d.state,d.context);else do{d.__d=!1,E&&E(t),u=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++y<25);d.state=d.__s,null!=d.getChildContext&&(r=un(un({},r),d.getChildContext())),l||null==d.getSnapshotBeforeUpdate||(h=d.getSnapshotBeforeUpdate(p,f)),b=null!=u&&u.type===fn&&null==u.key?u.props.children:u,En(e,Array.isArray(b)?b:[b],t,n,r,i,o,a,s,c),d.base=t.__e,t.__h=null,d.__h.length&&a.push(d),_&&(d.__E=d.__=null),d.__e=!1}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,i,o,a,s){var c,u,d,l=n.props,p=t.props,f=t.type,h=0;if("svg"===f&&(i=!0),null!=o)for(;h<o.length;h++)if((c=o[h])&&"setAttribute"in c==!!f&&(f?c.localName===f:3===c.nodeType)){e=c,o[h]=null;break}if(null==e){if(null===f)return document.createTextNode(p);e=i?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,p.is&&p),o=null,s=!1}if(null===f)l===p||s&&e.data===p||(e.data=p);else{if(o=o&&Zt.call(e.childNodes),u=(l=n.props||an).dangerouslySetInnerHTML,d=p.dangerouslySetInnerHTML,!s){if(null!=o)for(l={},h=0;h<e.attributes.length;h++)l[e.attributes[h].name]=e.attributes[h].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(function(e,t,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in t||wn(e,o,null,n[o],r);for(o in t)i&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||wn(e,o,t[o],n[o],r)}(e,p,l,i,s),d)t.__k=[];else if(h=t.props.children,En(e,Array.isArray(h)?h:[h],t,n,r,i&&"foreignObject"!==f,o,a,o?o[0]:n.__k&&_n(n,0),s),null!=o)for(h=o.length;h--;)null!=o[h]&&dn(o[h]);s||("value"in p&&void 0!==(h=p.value)&&(h!==e.value||"progress"===f&&!h||"option"===f&&h!==l.value)&&wn(e,"value",h,l.value,!1),"checked"in p&&void 0!==(h=p.checked)&&h!==e.checked&&wn(e,"checked",h,l.checked,!1))}return e}(n.__e,t,n,r,i,o,a,c);(u=$t.diffed)&&u(t)}catch(e){t.__v=null,(c||null!=o)&&(t.__e=s,t.__h=!!c,o[o.indexOf(s)]=null),$t.__e(e,t,n)}}function An(e,t){$t.__c&&$t.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){$t.__e(e,t.__v)}}))}function In(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){$t.__e(e,n)}}function kn(e,t,n){var r,i;if($t.unmount&&$t.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||In(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){$t.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&kn(r[i],t,n||"function"!=typeof e.type);n||null==e.__e||dn(e.__e),e.__=e.__e=e.__d=void 0}function Nn(e,t,n){return this.constructor(e,n)}function Pn(e,t,n){var r,i,o;$t.__&&$t.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,o=[],On(t,e=(!r&&n||t).__k=ln(fn,null,[e]),i||an,an,void 0!==t.ownerSVGElement,!r&&n?[n]:i?null:t.firstChild?Zt.call(t.childNodes):null,o,!r&&n?n:i?i.__e:t.firstChild,r),An(o,e)}Zt=sn.slice,$t={__e:function(e,t,n,r){for(var i,o,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),a=i.__d),a)return i.__E=i}catch(t){e=t}throw e}},en=0,hn.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=un({},this.state),"function"==typeof e&&(e=e(un({},n),this.props)),e&&un(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),mn(this))},hn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),mn(this))},hn.prototype.render=fn,tn=[],gn.__r=0,rn=0;var Dn,xn,Ln,Mn,Un=0,jn=[],Vn=[],Bn=$t.__b,Fn=$t.__r,Wn=$t.diffed,Gn=$t.__c,Hn=$t.unmount;function zn(e,t){$t.__h&&$t.__h(xn,e,Un||t),Un=0;var n=xn.__H||(xn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Vn}),n.__[e]}function Kn(e){return Un=1,Yn(sr,e)}function Yn(e,t,n){var r=zn(Dn++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):sr(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=xn,!xn.u)){xn.u=!0;var i=xn.shouldComponentUpdate;xn.shouldComponentUpdate=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(e){return e.__c}));if(o.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var a=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(a=!0)}})),!(!a&&r.__c.props===e)&&(!i||i.call(this,e,t,n))}}return r.__N||r.__}function qn(e,t){var n=zn(Dn++,3);!$t.__s&&ar(n.__H,t)&&(n.__=e,n.i=t,xn.__H.__h.push(n))}function Jn(e,t){var n=zn(Dn++,4);!$t.__s&&ar(n.__H,t)&&(n.__=e,n.i=t,xn.__h.push(n))}function Xn(e){return Un=5,Zn((function(){return{current:e}}),[])}function Qn(e,t,n){Un=6,Jn((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))}function Zn(e,t){var n=zn(Dn++,7);return ar(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function $n(e,t){return Un=8,Zn((function(){return e}),t)}function er(e){var t=xn.context[e.__c],n=zn(Dn++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(xn)),t.props.value):e.__}function tr(){for(var e;e=jn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ir),e.__H.__h.forEach(or),e.__H.__h=[]}catch(t){e.__H.__h=[],$t.__e(t,e.__v)}}$t.__b=function(e){"function"!=typeof e.type||e.__m||e.type===fn?e.__m||(e.__m=e.__&&e.__.__m?e.__.__m:""):e.__m=(e.__&&e.__.__m?e.__.__m:"")+(e.__&&e.__.__k?e.__.__k.indexOf(e):0),xn=null,Bn&&Bn(e)},$t.__r=function(e){Fn&&Fn(e),Dn=0;var t=(xn=e.__c).__H;t&&(Ln===xn?(t.__h=[],xn.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=Vn,e.__N=e.i=void 0}))):(t.__h.forEach(ir),t.__h.forEach(or),t.__h=[])),Ln=xn},$t.diffed=function(e){Wn&&Wn(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==jn.push(t)&&Mn===$t.requestAnimationFrame||((Mn=$t.requestAnimationFrame)||rr)(tr)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==Vn&&(e.__=e.__V),e.i=void 0,e.__V=Vn}))),Ln=xn=null},$t.__c=function(e,t){t.some((function(e){try{e.__h.forEach(ir),e.__h=e.__h.filter((function(e){return!e.__||or(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],$t.__e(n,e.__v)}})),Gn&&Gn(e,t)},$t.unmount=function(e){Hn&&Hn(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{ir(e)}catch(e){t=e}})),n.__H=void 0,t&&$t.__e(t,n.__v))};var nr="function"==typeof requestAnimationFrame;function rr(e){var t,n=function(){clearTimeout(r),nr&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);nr&&(t=requestAnimationFrame(n))}function ir(e){var t=xn,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),xn=t}function or(e){var t=xn;e.__c=e.__(),xn=t}function ar(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function sr(e,t){return"function"==typeof t?t(e):t}function cr(e,t){for(var n in t)e[n]=t[n];return e}function ur(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function dr(e){this.props=e}function lr(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:ur(this.props,e)}function r(t){return this.shouldComponentUpdate=n,ln(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(dr.prototype=new hn).isPureReactComponent=!0,dr.prototype.shouldComponentUpdate=function(e,t){return ur(this.props,e)||ur(this.state,t)};var pr=$t.__b;$t.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),pr&&pr(e)};var fr="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function hr(e){function t(t){var n=cr({},t);return delete n.ref,e(n,t.ref||null)}return t.$$typeof=fr,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var _r=$t.__e;$t.__e=function(e,t,n,r){if(e.then)for(var i,o=t;o=o.__;)if((i=o.__c)&&i.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t);_r(e,t,n,r)};var vr=$t.unmount;function mr(){this.__u=0,this.t=null,this.__b=null}function gr(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Er(){this.u=null,this.o=null}$t.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),vr&&vr(e)},(mr.prototype=new hn).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=gr(r.__v),o=!1,a=function(){o||(o=!0,n.__R=null,i?i(s):s())};n.__R=a;var s=function(){if(!--r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)})),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}},c=!0===t.__h;r.__u++||c||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(a,a)},mr.prototype.componentWillUnmount=function(){this.t=[]},mr.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=cr({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)}))),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&ln(fn,null,e.fallback);return i&&(i.__h=null),[ln(fn,null,t.__a?null:e.children),i]};var yr=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(Er.prototype=new hn).__a=function(e){var t=this,n=gr(t.__v),r=t.o.get(e);return r[0]++,function(i){var o=function(){t.props.revealOrder?(r.push(i),yr(t,e,r)):i()};n?n(o):o()}},Er.prototype.render=function(e){this.u=null,this.o=new Map;var t=bn(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Er.prototype.componentDidUpdate=Er.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){yr(e,n,t)}))};var br="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Sr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Tr="undefined"!=typeof document,wr=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};hn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(hn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Rr=$t.event;function Cr(){}function Or(){return this.cancelBubble}function Ar(){return this.defaultPrevented}$t.event=function(e){return Rr&&(e=Rr(e)),e.persist=Cr,e.isPropagationStopped=Or,e.isDefaultPrevented=Ar,e.nativeEvent=e};var Ir={configurable:!0,get:function(){return this.class}},kr=$t.vnode;$t.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){var i=-1===t.indexOf("-");for(var o in r={},n){var a=n[o];Tr&&"children"===o&&"noscript"===t||"value"===o&&"defaultValue"in n&&null==a||("defaultValue"===o&&"value"in n&&null==n.value?o="value":"download"===o&&!0===a?a="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+t)&&!wr(n.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():i&&Sr.test(o)?o=o.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===a&&(a=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),r[o]&&(o="oninputCapture")),r[o]=a)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=bn(n.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=bn(n.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),e.props=r,n.class!=n.className&&(Ir.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",Ir))}e.$$typeof=br,kr&&kr(e)};var Nr=$t.__r;function Pr(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}$t.__r=function(e){Nr&&Nr(e),e.__c};var Dr,xr=function(){return(xr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Lr(e,t){var n;return t.type===Dr.TRIGGER_STORE_DIFF?(n={__storeUpdated:e.__storeUpdated+1},xr(xr({},e),n)):e}!function(e){e[e.TRIGGER_STORE_DIFF=0]="TRIGGER_STORE_DIFF"}(Dr||(Dr={}));var Mr,Ur=function(e,t){var n={__c:t="__cC"+rn++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(mn)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}({}),jr=(Mr=Ur,function(e){var t,n=er(Mr).store,r=Yn((function(e){return e+1}),0)[1],i=Xn((function(){})),o=Xn({}),a=n.getState();return t=i.current!==e?e(a):o.current,Jn((function(){i.current=e,o.current=t})),Jn((function(){return n.subscribe((function(){var e=i.current(n.getState());(function(e,t){if(Pr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Pr(e[n[i]],t[n[i]]))return!1;return!0})(o.current,e)||(o.current=e,r(1))}))}),[n]),t}),Vr=function(e){return function(){return er(e).store.dispatch}}(Ur);function Br(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[];return e.forEach((function(e){e&&("string"==typeof e?n.push(e):Object.keys(e).forEach((function(t){e[t]&&n.push(t)})))})),n.join(" ")}var Fr=c(725),Wr={};Fr.Z&&Fr.Z.locals&&(Wr.locals=Fr.Z.locals);var Gr,Hr=0,zr={};zr.setAttributes=Ht(),zr.insert=Wt().bind(null,"head"),zr.domAPI=Bt(),zr.insertStyleElement=Kt(),Wr.use=function(e){return zr.options=e||{},Hr++||(Gr=jt()(Fr.Z,zr)),Wr},Wr.unuse=function(){Hr>0&&!--Hr&&(Gr(),Gr=null)};var Kr=Wr,Yr=function(){return(Yr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},qr={play:lr((function(e){return void 0===e&&(e={}),ln("svg",Yr({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3700",width:"1em",height:"1em"}),ln("path",{d:"M370.57024 856.02304c-57.81504 36.03968-134.26176-3.7376-134.26176-69.90336V236.30848c0-66.12992 76.4416-105.94304 134.26176-69.86752l460.32896 275.69152A81.5104 81.5104 0 0 1 870.41024 512a81.49504 81.49504 0 0 1-39.51104 69.86752l-460.32896 274.11968v0.03584z",fill:"#ffffff","p-id":"3701"}))})),"play-circle":lr((function(e){return void 0===e&&(e={}),ln("svg",Yr({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2241",width:"1em",height:"1em"}),ln("path",{d:"M512 79.8892047A426.8607953 426.8607953 0 1 1 85.1392047 506.75 427.34403441 427.34403441 0 0 1 512 79.8892047m0-16.1079547A442.96875 442.96875 0 1 0 954.96875 506.75 442.96875 442.96875 0 0 0 512 63.78125z","p-id":"2242"}),ln("path",{d:"M654.07215941 510.61590941l-231.31022735-133.53494382v267.06988676l231.31022735-133.53494294z","p-id":"2243"}))})),"volume-muted":lr((function(e){return void 0===e&&(e={}),ln("svg",Yr({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4545",width:"1em",height:"1em"}),ln("path",{d:"M469.333333 853.333333c-8.533333 0-17.066667-4.266667-25.6-8.533333L238.933333 682.666667H85.333333c-25.6 0-42.666667-17.066667-42.666666-42.666667V384c0-25.6 17.066667-42.666667 42.666666-42.666667h153.6l200.533334-162.133333c12.8-8.533333 29.866667-12.8 46.933333-4.266667 17.066667 8.533333 25.6 21.333333 25.6 38.4v597.333334c0 17.066667-8.533333 29.866667-25.6 38.4-4.266667 4.266667-12.8 4.266667-17.066667 4.266666z m-341.333333-256h128c8.533333 0 17.066667 4.266667 25.6 8.533334l145.066667 115.2V302.933333L281.6 418.133333c-8.533333 4.266667-17.066667 8.533333-25.6 8.533334H128v170.666666zM725.333333 682.666667c-12.8 0-21.333333-4.266667-29.866666-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733334l256-256c17.066667-17.066667 42.666667-17.066667 59.733333 0 17.066667 17.066667 17.066667 42.666667 0 59.733334l-256 256c-8.533333 8.533333-17.066667 12.8-29.866667 12.8z","p-id":"4546"}),ln("path",{d:"M981.333333 682.666667c-12.8 0-21.333333-4.266667-29.866666-12.8l-256-256c-17.066667-17.066667-17.066667-42.666667 0-59.733334 17.066667-17.066667 42.666667-17.066667 59.733333 0l256 256c17.066667 17.066667 17.066667 42.666667 0 59.733334-8.533333 8.533333-17.066667 12.8-29.866667 12.8z","p-id":"4547"}))})),volume:lr((function(e){return void 0===e&&(e={}),ln("svg",Yr({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4408",width:"1em",height:"1em"}),ln("path",{d:"M469.333333 853.333333c-8.533333 0-17.066667-4.266667-25.6-8.533333L238.933333 682.666667H85.333333c-25.6 0-42.666667-17.066667-42.666666-42.666667V384c0-25.6 17.066667-42.666667 42.666666-42.666667h153.6l200.533334-162.133333c12.8-8.533333 29.866667-12.8 46.933333-4.266667 17.066667 8.533333 25.6 21.333333 25.6 38.4v597.333334c0 17.066667-8.533333 29.866667-25.6 38.4-4.266667 4.266667-12.8 4.266667-17.066667 4.266666z m-341.333333-256h128c8.533333 0 17.066667 4.266667 25.6 8.533334l145.066667 115.2V302.933333L281.6 418.133333c-8.533333 4.266667-17.066667 8.533333-25.6 8.533334H128v170.666666zM814.933333 857.6c-12.8 0-21.333333-4.266667-29.866666-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733333 149.333333-149.333333 149.333333-392.533333 0-541.866667-17.066667-17.066667-17.066667-42.666667 0-59.733333 17.066667-17.066667 42.666667-17.066667 59.733333 0 183.466667 183.466667 183.466667 482.133333 0 665.6-8.533333 4.266667-21.333333 8.533333-29.866667 8.533333z m-153.6-153.6c-12.8 0-21.333333-4.266667-29.866666-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733333 68.266667-68.266667 68.266667-174.933333 0-243.2-17.066667-17.066667-17.066667-42.666667 0-59.733334 17.066667-17.066667 42.666667-17.066667 59.733333 0 98.133333 98.133333 98.133333 260.266667 0 362.666667-4.266667 8.533333-17.066667 12.8-29.866667 12.8z","p-id":"4409"}))})),fullscreen:lr((function(e){return void 0===e&&(e={}),ln("svg",Yr({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2092",width:"1em",height:"1em"}),ln("path",{d:"M176 798c0 27.338 21.94 49.552 49.173 49.993L226 848h118c22.091 0 40 17.909 40 40s-17.909 40-40 40H196c-55.228 0-100-44.772-100-100V672c0-22.091 17.909-40 40-40s40 17.909 40 40v126z m712-166c22.091 0 40 17.909 40 40v156c0 55.228-44.772 100-100 100H680c-22.091 0-40-17.909-40-40s17.909-40 40-40h118c27.338 0 49.552-21.94 49.993-49.173L848 798V672c0-22.091 17.909-40 40-40zM828 96c55.228 0 100 44.772 100 100v156c0 22.091-17.909 40-40 40s-40-17.909-40-40V226c0-27.614-22.386-50-50-50H680c-22.091 0-40-17.909-40-40s17.909-40 40-40h148z m-484 0c22.091 0 40 17.909 40 40s-17.909 40-40 40H226c-27.338 0-49.552 21.94-49.993 49.173L176 226v126c0 22.091-17.909 40-40 40s-40-17.909-40-40V196c0-55.228 44.772-100 100-100h148z","p-id":"2093"}))})),pause:lr((function(e){return void 0===e&&(e={}),ln("svg",Yr({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2827",width:"1em",height:"1em"}),ln("path",{d:"M426.666667 288v448a32.426667 32.426667 0 0 1-32 32h-64a32.426667 32.426667 0 0 1-32-32V288A32.426667 32.426667 0 0 1 330.666667 256h64a32.426667 32.426667 0 0 1 32 32zM693.333333 256h-64a32.426667 32.426667 0 0 0-32 32v448a32.426667 32.426667 0 0 0 32 32h64a32.426667 32.426667 0 0 0 32-32V288a32.426667 32.426667 0 0 0-32-32z","p-id":"2828"}))})),loading:lr((function(e){return void 0===e&&(e={}),ln("svg",Yr({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2369",width:"1em",height:"1em"}),ln("path",{d:"M512 0c282.7776 0 512 229.2224 512 512s-229.2224 512-512 512a512 512 0 0 1-462.1824-291.4304 36.608 36.608 0 1 1 66.048-31.5904A438.784 438.784 0 1 0 73.216 512 36.608 36.608 0 1 1 0 512C0 229.2224 229.2224 0 512 0z","p-id":"2370"}))})),replay:lr((function(e){return void 0===e&&(e={}),ln("svg",Yr({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1208",width:"1em",height:"1em"}),ln("path",{d:"M512 213.333333v59.648c0 6.826667-2.986667 13.354667-8.362667 18.176a30.805333 30.805333 0 0 1-40.32 0L349.696 188.8a23.893333 23.893333 0 0 1 0-36.266667l113.621333-102.357333A30.208 30.208 0 0 1 483.498667 42.666667c15.744 0 28.501333 11.52 28.501333 25.685333V128a384 384 0 1 1-366.293333 268.544 42.666667 42.666667 0 1 1 81.365333 25.6 299.178667 299.178667 0 0 0-12.586667 115.882667A298.666667 298.666667 0 1 0 512 213.333333z",fill:"#ffffff","p-id":"1209"}))}))},Jr=function(){return(Jr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Xr=lr((function(e){var t=e.type,n=e.className,r=(e.class,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["type","className","class"])),i=qr[t];return qn((function(){return Kr.use(),function(){return Kr.unuse()}}),[]),i?ln("span",{className:Br("videox-icon",n)},ln(i,Jr({},r))):ln("i",null)})),Qr=c(212),Zr={};Qr.Z&&Qr.Z.locals&&(Zr.locals=Qr.Z.locals);var $r,ei=0,ti={};ti.setAttributes=Ht(),ti.insert=Wt().bind(null,"head"),ti.domAPI=Bt(),ti.insertStyleElement=Kt(),Zr.use=function(e){return ti.options=e||{},ei++||($r=jt()(Qr.Z,ti)),Zr},Zr.unuse=function(){ei>0&&!--ei&&($r(),$r=null)};var ni=Zr,ri=lr((function(e){var t=e.dataSource,n=e.style,r=e.className,i=e.onSelect,o=e.value,a=Kn(),s=a[0],c=a[1],u=i?o:s,d=$n((function(e){i?i(e):c(e)}),[i]);return qn((function(){return ni.use(),function(){return ni.unuse()}}),[]),ln("div",{className:Br(r,"videox-menu"),style:n},t.map((function(e,t){return ln("div",{className:Br("videox-menu-item",{"videox-active":e.value===u}),key:t,onClick:function(){return d(e.value)}},e.title)})))})),ii=c(669),oi={};ii.Z&&ii.Z.locals&&(oi.locals=ii.Z.locals);var ai,si=0,ci={};ci.setAttributes=Ht(),ci.insert=Wt().bind(null,"head"),ci.domAPI=Bt(),ci.insertStyleElement=Kt(),oi.use=function(e){return ci.options=e||{},si++||(ai=jt()(ii.Z,ci)),oi},oi.unuse=function(){si>0&&!--si&&(ai(),ai=null)};var ui=oi,di={display:"none"},li=lr(hr((function(e,t){var n=e.children,r=e.trigger,i=e.className,o=e.contentClassName,a=Xn(null),s=Xn(-1),c=Xn(!1),u=Xn(!1);qn((function(){return ui.use(),function(){return ui.unuse()}}),[]),Qn(t,(function(){return{setForceVisible:function(e){c.current=e;var t=a.current;e&&clearTimeout(s.current),t&&(e?t.style.display="":u.current||(t.style.display="none"))}}}));var d=$n((function(){u.current=!0,clearTimeout(s.current),a.current&&(a.current.style.display="")}),[]),l=$n((function(){u.current=!1,clearTimeout(s.current),s.current=setTimeout((function(){a.current&&!c.current&&(a.current.style.display="none")}),300)}),[]);return ln("div",{className:Br("videox-popover",i),onMouseEnter:d,onMouseLeave:l},r,ln("div",{ref:a,className:Br("videox-popover-content",o),style:di},n))}))),pi=c(100),fi={};pi.Z&&pi.Z.locals&&(fi.locals=pi.Z.locals);var hi,_i=0,vi={};vi.setAttributes=Ht(),vi.insert=Wt().bind(null,"head"),vi.domAPI=Bt(),vi.insertStyleElement=Kt(),fi.use=function(e){return vi.options=e||{},_i++||(hi=jt()(pi.Z,vi)),fi},fi.unuse=function(){_i>0&&!--_i&&(hi(),hi=null)};var mi=fi,gi=lr((function(e){var t=e.className,n=e.sliderTrackInner,r=e.onChange,i=e.onDragStart,o=e.onDragEnd,a=e.tipsFormat,s=e.max,c=e.value,u=e.vertical,d=e.disabled,l=Kn(c),p=l[0],f=l[1],h=Xn(!1),_=Xn(null);qn((function(){return mi.use(),function(){return mi.unuse()}}),[]),qn((function(){h.current||f(c)}),[c]);var v=Zn((function(){return 100*(Math.max(Math.min(p/s,1),0)||0)+"%"}),[s,p]),m=Xn(null),g=$n((function(e){if(e.cancelable&&e.preventDefault(),m.current){var t=e.touches,n=t?t[0]:e,i=n.clientX,o=n.clientY,c=m.current.getBoundingClientRect(),d=void 0;if(u){if(c.height<=0)return;d=(c.height-(o-c.y))/c.height}else{if(c.width<=0)return;d=(i-c.x)/c.width}var l=Math.max(Math.min(d,1),0),p=l*s,v=_.current;v&&a&&(v.textContent=a(p)),h.current?(f(p),null==r||r(l)):v&&(v.style.left=100*l+"%")}}),[r,u,s,a]),E=$n((function(e){g(e)}),[g]),y=Zn((function(){return je()(E,10)}),[E]),b=$n((function(e){d||(h.current=!0,null==i||i(),document.addEventListener("touchmove",y,{passive:!1}),document.addEventListener("mousemove",y),g(e))}),[g,y,i,d]);qn((function(){var e=function(){h.current&&(document.removeEventListener("touchmove",y),document.removeEventListener("mousemove",y),h.current=!1,null==o||o())};return document.addEventListener("touchend",e),document.addEventListener("mouseup",e),function(){document.removeEventListener("touchend",e),document.removeEventListener("mouseup",e)}}),[o,y]);var S=Zn((function(){return u?{height:v}:{width:v}}),[v,u]),T=Zn((function(){return u?{bottom:v}:{left:v}}),[v,u]);return ln("div",{className:Br("videox-slider",t,{"videox-slider-vertical":u,"videox-slider-disabled":d})},ln("div",{className:"videox-slider-inner",onMouseDown:b,onMouseMove:y,onTouchStart:b},ln("div",{className:"videox-slider-track",ref:m},n,ln("div",{className:"videox-slider-track-fill",style:S})),ln("div",{className:"videox-slider-tips",ref:_}),ln("div",{className:"videox-slider-thumb",style:T})))})),Ei=c(895),yi={};Ei.Z&&Ei.Z.locals&&(yi.locals=Ei.Z.locals);var bi,Si=0,Ti={};Ti.setAttributes=Ht(),Ti.insert=Wt().bind(null,"head"),Ti.domAPI=Bt(),Ti.insertStyleElement=Kt(),yi.use=function(e){return Ti.options=e||{},Si++||(bi=jt()(Ei.Z,Ti)),yi},yi.unuse=function(){Si>0&&!--Si&&(bi(),bi=null)};var wi=yi,Ri=["2.0","1.5","1.0","0.75","0.5"].map((function(e){return{title:e+" x",value:Number(e)}})),Ci=lr((function(){var e=jr((function(e){var t=e.controller;return{root:e.root,controller:t,status:t.activeRenderer.status,live:t.live,muted:t.muted,volume:t.volume,rate:t.playbackRate,controlsList:t.controlsList}})),t=e.controller,n=e.status,r=e.live,i=e.muted,o=e.root,a=e.volume,s=e.rate,c=e.controlsList,u=Xn(),l=Xn(),p=i?0:Math.round(100*a),f=0===a,h=i||0===p,_=Zn((function(){return-1===c.indexOf("nofullscreen")}),[c]);qn((function(){return wi.use(),function(){return wi.unuse()}}),[]),qn((function(){var e=function(){t.emit("fullscreenchange")};return o.addEventListener("fullscreenchange",e),function(){o.removeEventListener("fullscreenchange",e)}}),[t,o]);var v=$n((function(){var e;null===(e=u.current)||void 0===e||e.setForceVisible(!0)}),[]),m=$n((function(){var e;null===(e=u.current)||void 0===e||e.setForceVisible(!1)}),[]),g=$n((function(e){t.volume=Math.round(100*e)/100}),[t]),E=$n((function(){h?(t.muted=!1,f&&(t.volume=.1)):t.muted=!0}),[t,h,f]),y=$n((function(){if("fullscreen"in document||"fullscreenElement"in document)document.fullscreen||document.fullscreenElement?(t=document).exitFullscreen?t.exitFullscreen():t.webkitExitFullScreen?t.webkitExitFullScreen():t.mozExitFullScreen?t.mozExitFullScreen():t.msExitFullscreen&&t.msExitFullscreen():function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}(o);else{var e=o.style;"fixed"!==e.position?(e.position="fixed",e.left="0",e.top="0",e.width="100%",e.height="100%"):(e.position="relative",e.left="",e.top="",e.width="",e.height=""),o.dispatchEvent(new Event("fullscreenchange"))}var t}),[o]),b=Zn((function(){return ln("span",null,"\u500d\u901f")}),[]),S=Zn((function(){return ln(Xr,{className:"videox-icon-volume",type:h?"volume-muted":"volume",onClick:E})}),[h,E]),T=$n((function(e){t.playbackRate=e}),[t]);return ln(fn,null,n!==d.IDLE&&!r&&ln(li,{ref:l,className:"videox-btn",contentClassName:"videox-rate-content",trigger:b},ln(ri,{className:"videox-rate-menu",value:s,dataSource:Ri,onSelect:T})),Ce?ln("span",{className:"videox-btn"},S):ln(li,{ref:u,className:"videox-btn",contentClassName:"videox-volume-content",trigger:S},ln("span",{className:"videox-volume-number"},p),ln(gi,{className:"videox-volume-progress",value:p,max:100,onChange:g,onDragStart:v,onDragEnd:m,vertical:!0})),_&&ln(Xr,{className:"videox-btn videox-fullscreen",type:"fullscreen",onClick:y}))})),Oi=c(38),Ai=c(219),Ii={};Ai.Z&&Ai.Z.locals&&(Ii.locals=Ai.Z.locals);var ki,Ni=0,Pi={};Pi.setAttributes=Ht(),Pi.insert=Wt().bind(null,"head"),Pi.domAPI=Bt(),Pi.insertStyleElement=Kt(),Ii.use=function(e){return Pi.options=e||{},Ni++||(ki=jt()(Ai.Z,Pi)),Ii},Ii.unuse=function(){Ni>0&&!--Ni&&(ki(),ki=null)};var Di,xi=Ii;!function(e){e[e.DOWNLOAD_LOG=0]="DOWNLOAD_LOG"}(Di||(Di={}));var Li=[{title:"\u4e0b\u8f7d\u65e5\u5fd7",value:Di.DOWNLOAD_LOG}],Mi=lr(hr((function(e,t){var n=Kn(),r=n[0],i=n[1];Qn(t,(function(){return{open:function(e){i(e)}}}));var o=$n((function(e){if(e===Di.DOWNLOAD_LOG){var t=Oi.loggerManager.getLogs().map((function(e){return e.message+"\n"})),n=document.createElement("a");n.href=URL.createObjectURL(new Blob(t)),n.download="videox."+Date.now()+".log",n.click()}}),[]),a=$n((function(){i(void 0)}),[]);return qn((function(){return xi.use(),function(){return xi.unuse()}}),[]),r?ln("div",{className:"videox-contextmenu-bg",onClick:a},ln(ri,{className:"videox-contextmenu",style:r,dataSource:Li,onSelect:o})):null}))),Ui=c(141),ji={};Ui.Z&&Ui.Z.locals&&(ji.locals=Ui.Z.locals);var Vi,Bi=0,Fi={};Fi.setAttributes=Ht(),Fi.insert=Wt().bind(null,"head"),Fi.domAPI=Bt(),Fi.insertStyleElement=Kt(),ji.use=function(e){return Fi.options=e||{},Bi++||(Vi=jt()(Ui.Z,Fi)),ji},ji.unuse=function(){Bi>0&&!--Bi&&(Vi(),Vi=null)};var Wi=ji,Gi=c(548),Hi={};Gi.Z&&Gi.Z.locals&&(Hi.locals=Gi.Z.locals);var zi,Ki=0,Yi={};Yi.setAttributes=Ht(),Yi.insert=Wt().bind(null,"head"),Yi.domAPI=Bt(),Yi.insertStyleElement=Kt(),Hi.use=function(e){return Yi.options=e||{},Ki++||(zi=jt()(Gi.Z,Yi)),Hi},Hi.unuse=function(){Ki>0&&!--Ki&&(zi(),zi=null)};var qi=Hi,Ji=lr((function(){var e=jr((function(e){var t=e.controller;return{controller:t,status:t.activeRenderer.status,err:t.error}})),t=e.controller,n=e.err,r=e.status;qn((function(){return qi.use(),function(){return qi.unuse()}}),[]);var i=$n((function(){t.toggle()}),[t]),o=$n((function(){t.load()}),[t]),a=$n((function(){if(n)o();else switch(r){case d.ENDED:case d.LOADED:case d.PLAYING:case d.IDLE:case d.PAUSED:return i();case d.WAITING:default:return null}}),[i,o,n,r]),s=Zn((function(){if(n)return ln("div",{className:"videox-error"},ln(Xr,{className:"videox-icon-reload",type:"replay"}),ln("span",{className:"videox-error-text"},n.message||"\u64ad\u653e\u5f02\u5e38\uff0c\u8bf7\u91cd\u8bd5"));switch(r){case d.WAITING:return ln(Xr,{className:"videox-icon-loading",type:"loading"});case d.IDLE:case d.PAUSED:case d.LOADED:return ln("div",{className:"videox-matte-icon-btn"},ln(Xr,{className:"videox-icon-play",type:"play"}));default:return null}}),[r,n]);return ln("div",{className:"videox-matte",onClick:a},s)})),Xi=lr((function(){var e=Kn([]),t=e[0],n=e[1],r=jr((function(e){return{renderer:e.controller.activeRenderer,duration:e.controller.activeRenderer.duration}})),i=r.renderer,o=r.duration;return qn((function(){var e=function(){var e=i.buffered;n(Array.from(Array(e.length)).map((function(t,n){return{start:e.start(n),end:e.end(n)}})))};return i.on("progress",e),function(){i.off("progress",e)}}),[i]),o!==1/0&&t.length?ln("div",{className:"videox-progress-buffered"},t.map((function(e,t){return ln("span",{key:t,className:"videox-progress-buffered-item",style:{left:e.start/o*100+"%",width:(e.end-e.start)/o*100+"%"}})}))):null})),Qi=c(992),Zi={};Qi.Z&&Qi.Z.locals&&(Zi.locals=Qi.Z.locals);var $i,eo=0,to={};to.setAttributes=Ht(),to.insert=Wt().bind(null,"head"),to.domAPI=Bt(),to.insertStyleElement=Kt(),Zi.use=function(e){return to.options=e||{},eo++||($i=jt()(Qi.Z,to)),Zi},Zi.unuse=function(){eo>0&&!--eo&&($i(),$i=null)};var no,ro=Zi,io=lr((function(e){var t=e.left,n=e.right,r=Kn(0),i=r[0],o=r[1],a=jr((function(e){return{controller:e.controller,live:e.controller.live,progressive:e.controller.progressive,duration:e.controller.duration}})),s=a.controller,c=a.live,u=a.duration,d=Zn((function(){return m(i)}),[i]),l=Zn((function(){return m(u)}),[u]),p=c?d:d+" / "+l,f=Xn(0),h=$n((function(e){f.current=s.duration*e}),[s]),_=$n((function(){s.currentTime=f.current}),[s]),v=$n((function(e){return m(e)}),[]);return qn((function(){return ro.use(),function(){return ro.unuse()}}),[]),qn((function(){var e=function(){o(s.currentTime)};return s.on("timeupdate",e),function(){s.off("timeupdate",e)}}),[s]),ln("div",{className:"videox-progress-container"},c?ln("div",{className:"videox-progress videox-progress-placeholder"}):ln(gi,{className:"videox-progress",value:i,max:s.duration,onChange:h,onDragEnd:_,tipsFormat:v,sliderTrackInner:ln(Xi,null)}),t,ln("div",{className:"videox-time"},p),n)})),oo=lr((function(){var e=jr((function(e){var t=e.controller;return{controller:t,status:t.activeRenderer.status}})),t=e.controller,n=e.status,r=Xn(null),i=Xn(null),o=n===d.PLAYING,a=$n((function(){t.toggle()}),[t]);qn((function(){return Wi.use(),function(){return Wi.unuse()}}),[]);var s=Zn((function(){return n===d.IDLE||n===d.LOADED||n===d.PAUSED?"play":n===d.ENDED?"replay":"pause"}),[n]),c=Zn((function(){return ln(Xr,{className:"videox-icon-play",type:s,onClick:a})}),[s,a]),u=$n((function(e){var t;e.preventDefault(),null===(t=r.current)||void 0===t||t.open({left:e.offsetX+"px",top:e.offsetY+"px"})}),[]);return ln("div",{ref:i,className:Br("videox-control",{"videox-playing":o}),onContextMenu:u},ln(Ji,null),ln(Mi,{ref:r}),ln(io,{left:c,right:ln(Ci,null)}))})),ao=lr((function(){var e=jr((function(e){return{controller:e.controller}})),t=Vr();return qn((function(){var n=function(){t({type:Dr.TRIGGER_STORE_DIFF})};return e.controller.on("update",n),function(){return e.controller.off("update",n)}}),[]),ln(oo,null)})),so=function(){function e(e){var t=this;this.listeners=[],this.dispatch=function(e){var n=t.state;t.state=t.reducer(t.state,e),n!==t.state&&t.listeners.forEach((function(e){return e()}))},this.state=e.state,this.reducer=e.reducer}return e.prototype.subscribe=function(e){var t=this;return this.listeners.push(e),function(){t.listeners=t.listeners.filter((function(t){return t!==e}))}},e.prototype.getState=function(){return this.state},e}(),co=function(){function e(e){this.mounted=!1,this.options=e,e.container.classList.add("videox-container"),on.use()}return e.prototype.mount=function(){if(!this.mounted){var e=this.options.container;this.compWrapper=document.createElement("div");var t=new so({state:{controller:this.options.controller,root:e,__storeUpdated:0},reducer:Lr});e.appendChild(this.compWrapper),function(e,t,n){null==t.__k&&(t.textContent=""),Pn(e,t),"function"==typeof n&&n(),e&&e.__c}(ln(Ur.Provider,{value:{store:t}},ln(ao,null)),this.compWrapper),this.mounted=!0}},e.prototype.unmount=function(){var e;if(this.mounted){var t=this.compWrapper;t&&(function(e){e.__k&&Pn(null,e)}(t),null===(e=t.parentNode)||void 0===e||e.removeChild(t)),this.mounted=!1}},e.prototype.destroy=function(){on.unuse(),this.unmount(),this.options.container.classList.remove("videox-container")},e}(),uo=(no=function(e,t){return(no=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}no(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),lo=function(){return(lo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},po=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},fo={objectFit:"contain"},ho=function(t){function i(e){var i,o=this;(o=t.call(this)||this).tracker=null,o.name="@ali/videox",o.version="1.0.1",o.removeEventListener=o.off,o.addEventListener=o.on;var s=lo(lo({},fo),e);return o.container=s.container,o.container.setAttribute("data-core","1.0.1"),o.container.setAttribute("data-format","0.3.1"),o.container.setAttribute("data-codec","0.4.2"),o.controller=new Mt(s),o.ui=new co({controller:o.controller,container:o.container}),s.controls&&o.ui.mount(),a(o.controller,o,Lt),(null===(i=s.trackOptions)||void 0===i?void 0:i.disable)||(o.tracker=new r.VideoTracker(s.trackOptions),o.tracker.start(o,{methodMap:{addEventListener:"on",getBoundingClientRect:"container.getBoundingClientRect"}})),n.loggerManager.clear(),o}return uo(i,t),Object.defineProperty(i.prototype,"error",{get:function(){return this.controller.error},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffered",{get:function(){return this.controller.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"muted",{get:function(){return this.controller.muted},set:function(e){this.controller.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"paused",{get:function(){return this.controller.paused},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectFit",{get:function(){return this.controller.objectFit},set:function(e){this.controller.objectFit=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"playbackRate",{get:function(){return this.controller.playbackRate},set:function(e){this.controller.playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"controls",{get:function(){return this.ui.mounted},set:function(e){e?this.ui.mount():this.ui.unmount()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"src",{get:function(){return this.controller.src},set:function(e){this.controller.src=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"volume",{get:function(){return this.controller.volume},set:function(e){this.controller.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"formatType",{get:function(){return this.controller.formatType},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"audioCodec",{get:function(){return this.controller.audioCodec},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"videoCodec",{get:function(){return this.controller.videoCodec},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"videoWidth",{get:function(){return this.controller.videoWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"videoHeight",{get:function(){return this.controller.videoHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"duration",{get:function(){return this.controller.duration},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentTime",{get:function(){return this.controller.currentTime},set:function(e){this.controller.currentTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoplay",{get:function(){return this.controller.autoplay},set:function(e){this.controller.autoplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"preload",{get:function(){return this.controller.preload},set:function(e){this.controller.preload=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"poster",{get:function(){return this.controller.poster},set:function(e){this.controller.poster=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"controlsList",{get:function(){return console.warn("controlsList \u5c5e\u6027 getter \u6682\u672a\u4e0e W3C \u6807\u51c6\u5bf9\u9f50\uff0c\u4e0d\u5efa\u8bae\u83b7\u53d6\u6b64\u5c5e\u6027"),this.controller.controlsList},set:function(e){this.controller.controlsList=e},enumerable:!1,configurable:!0}),i.prototype.setLogLevel=function(e){l.setLevel(e)},i.prototype.getLogs=function(){return n.loggerManager.getLogs()},i.prototype.load=function(){return this.controller.load()},i.prototype.play=function(){return this.controller.play()},i.prototype.pause=function(){return this.controller.pause()},i.prototype.destroy=function(){var e;n.loggerManager.destroy(),this.ui.destroy(),this.controller.destroy(),this.removeAllListeners(),(null===(e=this.tracker)||void 0===e?void 0:e.stop)&&this.tracker.stop(this)},i.prototype.dispatchEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.emit.apply(this,po([e.type],t,!0))},i.ErrorCode=Object.assign({},e.EErrorCode),i.LogLevel=n.ELoggerLevel,i.DiscardType=e.EDiscardType,i}(o()),_o=ho}(),u}())}).call(this,n(18))},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||e,o),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},u.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var c,u,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,r),!0;case 5:return d.fn.call(d.context,t,n,r,o),!0;case 6:return d.fn.call(d.context,t,n,r,o,a),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];d.fn.apply(d.context,c)}else{var p,f=d.length;for(u=0;u<f;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),l){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,n);break;case 4:d[u].fn.call(d[u].context,t,n,r);break;default:if(!c)for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];d[u].fn.apply(d[u].context,c)}}return!0},u.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return c(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||c(this,o);else{for(var s=0,u=[],d=a.length;s<d;s++)(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);u.length?this._events[o]=1===u.length?u[0]:u:c(this,o)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},function(e,t,n){(function(t,n,r){function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),a=new w(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=d(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function p(){}function f(){}function h(){}var _={};s(_,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(R([])));m&&m!==t&&n.call(m,i)&&(_=m);var g=h.prototype=p.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function R(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=h,s(g,"constructor",h),s(h,"constructor",f),f.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},E(y.prototype),s(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new y(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function u(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,s,"next",e)}function s(e){u(o,r,i,a,s,"throw",e)}a(void 0)}))}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v(e,t)}function f(e){var t="function"==typeof Map?new Map:void 0;return(f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return h(e,arguments,m(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)})(e)}function h(){return(h=_()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i}).apply(null,arguments)}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e.exports=function(){"use strict";var e,o,a,u,h,_=!0,v=!0;function m(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function g(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function E(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(_=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function y(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(v=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function b(){if("object"==typeof window){if(_)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function S(e,t){v&&console.warn(e+" is deprecated, please use "+t+" instead.")}function T(e){return"[object Object]"===Object.prototype.toString.call(e)}function w(e){return T(e)?Object.keys(e).reduce((function(t,n){var r,i=T(e[n]),o=i?w(e[n]):e[n],a=i&&!Object.keys(o).length;return void 0===o||a?t:Object.assign(t,((r={})[n]=o,r))}),{}):e}function R(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach((function(i){i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach((function(n){e(t,t.get(n),r)}))})))}(e,n,i)}))})),i}var C=b;function O(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){var a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});var s,c=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||c)&&(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?s=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(s=["front"]),s))return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),C("chrome: "+JSON.stringify(e)),i(e)}));e.video=r(e.video)}return C("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return a(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(o(e))}))}))}}}}function A(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function I(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else g(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function k(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function N(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=arguments[0],r=arguments[1],i=arguments[2];if(arguments.length>0&&"function"==typeof n)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof n))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var s=function(e){r(a(o(e)))};return t.apply(this,[s,n])}return new Promise((function(n,r){t.apply(e,[function(e){n(a(o(e)))},r])})).then(r,i)}}}function P(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return R(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),g(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return R(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach((function(e){e.track===o&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===o&&(n?r=!0:n=e),e.track===o})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function D(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function x(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return D(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n,r=e.RTCPeerConnection.prototype[t],i=((n={})[t]=function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then((function(t){return s(e,t)}))},n);e.RTCPeerConnection.prototype[t]=i[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function L(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n,r=e.RTCPeerConnection.prototype[t],i=((n={})[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)},n);e.RTCPeerConnection.prototype[t]=i[t]}))}function M(e,t){g(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var U=Object.freeze({__proto__:null,fixNegotiationNeeded:M,shimAddTrackRemoveTrack:x,shimAddTrackRemoveTrackWithNative:D,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:k,shimGetStats:N,shimGetUserMedia:O,shimMediaStream:A,shimOnTrack:I,shimPeerConnection:L,shimSenderReceiverGetStats:P});function j(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){S("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var a=r.prototype.getSettings;r.prototype.getSettings=function(){var e=a.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function V(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function B(e,t){if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n,r=e.RTCPeerConnection.prototype[t],i=((n={})[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)},n);e.RTCPeerConnection.prototype[t]=i[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=arguments[0],i=arguments[1],o=arguments[2];return r.apply(this,[e||null]).then((function(e){if(t.version<53&&!i)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}}function F(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function W(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),g(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function G(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;S("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function H(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function z(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]);var n=(e=[].concat(e)).length>0;n&&e.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e,i.sendEncodings=e,this.setParametersPromises.push(i.setParameters(o).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function K(e){if("object"==typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function Y(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function q(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}var J=Object.freeze({__proto__:null,shimAddTransceiver:z,shimCreateAnswer:q,shimCreateOffer:Y,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:K,shimGetUserMedia:j,shimOnTrack:V,shimPeerConnection:B,shimRTCDataChannel:H,shimReceiverGetStats:W,shimRemoveStream:G,shimSenderGetStats:F});function X(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function Q(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function Z(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}}function $(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(ee(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function ee(e){return e&&void 0!==e.video?Object.assign({},e,{video:w(e.video)}):e}function te(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(S("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function ne(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function re(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function ie(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var oe=Object.freeze({__proto__:null,shimAudioContext:ie,shimCallbacksAPI:Z,shimConstraints:ee,shimCreateOfferLegacy:re,shimGetUserMedia:$,shimLocalStreamsAPI:X,shimRTCIceServerUrls:te,shimRemoteStreamsAPI:Q,shimTrackEventTransceiver:ne}),ae="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function se(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ce={exports:{}};!function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){var t=e.substring(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substring(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){var t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){var t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(var i=3;i<r.length;i++){var o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))}));var u=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((function(e){u.forEach((function(t){e.rtcpFeedback.find((function(e){return e.type===t.type&&e.parameter===t.parameter}))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substring(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var d=t.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substring(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substring(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=d}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substring(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=parseInt(i[0].substring(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:n};var a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){var s=a[0].substring(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}(ce);var ue=ce.exports,de=se(ue),le=function(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}({__proto__:null,default:de},[ue]);function pe(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=de.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,g(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function fe(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||g(e,"icecandidate",(function(e){if(e.candidate){var t=de.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function he(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=de.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=de.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=de.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),s=e.sdpSemantics;"plan-b"===s&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var c,u=r(arguments[0]),d=i(u),l=o(arguments[0],u);c=0===d&&0===l?Number.POSITIVE_INFINITY:0===d||0===l?Math.max(d,l):Math.min(d,l);var p={};Object.defineProperty(p,"maxMessageSize",{get:function(){return c}}),this._sctp=p}return a.apply(this,arguments)}}}function _e(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},g(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function ve(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function me(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function ge(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function Ee(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,t=arguments[0]||{};if("object"!=typeof t||t.type&&t.sdp)return n.apply(this,arguments);if(!(t={type:t.type,sdp:t.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}return t.sdp||"offer"!==t.type&&"answer"!==t.type?n.apply(this,[t]):("offer"===t.type?this.createOffer:this.createAnswer).apply(this).then((function(t){return n.apply(e,[t])}))})}}var ye=Object.freeze({__proto__:null,removeExtmapAllowMixed:me,shimAddIceCandidateNullOrEmpty:ge,shimConnectionState:ve,shimMaxMessageSize:he,shimParameterlessSetLocalDescription:Ee,shimRTCIceCandidate:pe,shimRTCIceCandidateRelayProtocol:fe,shimSendThrowTypeError:_e});!function(e,t){var n=(void 0===e?{}:e).window;void 0===t&&(t={shimChrome:!0,shimFirefox:!0,shimSafari:!0});var r=b,i=function(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=m(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=m(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=m(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(n),o={browserDetails:i,commonShim:ye,extractVersion:m,disableLog:E,disableWarnings:y,sdp:le};switch(i.browser){case"chrome":if(!U||!L||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),o;if(null===i.version)return r("Chrome shim can not determine version, not shimming."),o;r("adapter.js shimming chrome."),o.browserShim=U,ge(n,i),Ee(n),O(n,i),A(n),L(n,i),I(n),x(n,i),k(n),N(n),P(n),M(n,i),pe(n),fe(n),ve(n),he(n,i),_e(n),me(n,i);break;case"firefox":if(!J||!B||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),o;r("adapter.js shimming firefox."),o.browserShim=J,ge(n,i),Ee(n),j(n,i),B(n,i),V(n),G(n),F(n),W(n),H(n),z(n),K(n),Y(n),q(n),pe(n),ve(n),he(n,i),_e(n);break;case"safari":if(!oe||!t.shimSafari)return r("Safari shim is not included in this adapter release."),o;r("adapter.js shimming safari."),o.browserShim=oe,ge(n,i),Ee(n),te(n),re(n),Z(n),X(n),Q(n),ne(n),$(n),ie(n),pe(n),fe(n),he(n,i),_e(n),me(n,i);break;default:r("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var be=function(e){try{return!!e()}catch(e){return!0}},Se=!be((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),Te=Se,we=Function.prototype,Re=we.call,Ce=Te&&we.bind.bind(Re,Re),Oe=Te?Ce:function(e){return function(){return Re.apply(e,arguments)}},Ae=Oe({}.isPrototypeOf),Ie=function(e){return e&&e.Math==Math&&e},ke=Ie("object"==typeof globalThis&&globalThis)||Ie("object"==typeof window&&window)||Ie("object"==typeof self&&self)||Ie("object"==typeof ae&&ae)||function(){return this}()||ae||Function("return this")(),Ne=Function.prototype,Pe=Ne.apply,De=Ne.call,xe="object"==typeof Reflect&&Reflect.apply||(Se?De.bind(Pe):function(){return De.apply(Pe,arguments)}),Le=Oe,Me=Le({}.toString),Ue=Le("".slice),je=function(e){return Ue(Me(e),8,-1)},Ve=function(e){if("Function"===je(e))return Oe(e)},Be="object"==typeof document&&document.all,Fe={all:Be,IS_HTMLDDA:void 0===Be&&void 0!==Be},We=Fe.all,Ge=Fe.IS_HTMLDDA?function(e){return"function"==typeof e||e===We}:function(e){return"function"==typeof e},He={},ze=!be((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Ke=Function.prototype.call,Ye=Se?Ke.bind(Ke):function(){return Ke.apply(Ke,arguments)},qe={},Je={}.propertyIsEnumerable,Xe=Object.getOwnPropertyDescriptor,Qe=Xe&&!Je.call({1:2},1);qe.f=Qe?function(e){var t=Xe(this,e);return!!t&&t.enumerable}:Je;var Ze,$e,et=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},tt=Object,nt=Oe("".split),rt=be((function(){return!tt("z").propertyIsEnumerable(0)}))?function(e){return"String"==je(e)?nt(e,""):tt(e)}:tt,it=function(e){return null==e},ot=TypeError,at=function(e){if(it(e))throw ot("Can't call method on "+e);return e},st=function(e){return rt(at(e))},ct=Ge,ut=Fe.all,dt=Fe.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:ct(e)||e===ut}:function(e){return"object"==typeof e?null!==e:ct(e)},lt={},pt=lt,ft=ke,ht=function(e){return Ge(e)?e:void 0},_t=function(e,t){return arguments.length<2?ht(pt[e])||ht(ft[e]):pt[e]&&pt[e][t]||ft[e]&&ft[e][t]},vt="undefined"!=typeof navigator&&String(navigator.userAgent)||"",mt=ke,gt=vt,Et=mt.process,yt=mt.Deno,bt=Et&&Et.versions||yt&&yt.version,St=bt&&bt.v8;St&&($e=(Ze=St.split("."))[0]>0&&Ze[0]<4?1:+(Ze[0]+Ze[1])),!$e&&gt&&(!(Ze=gt.match(/Edge\/(\d+)/))||Ze[1]>=74)&&(Ze=gt.match(/Chrome\/(\d+)/))&&($e=+Ze[1]);var Tt=$e,wt=Tt,Rt=ke.String,Ct=!!Object.getOwnPropertySymbols&&!be((function(){var e=Symbol();return!Rt(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&wt&&wt<41})),Ot=Ct&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,At=Object,It=Ot?function(e){return"symbol"==typeof e}:function(e){var t=_t("Symbol");return Ge(t)&&Ae(t.prototype,At(e))},kt=String,Nt=function(e){try{return kt(e)}catch(e){return"Object"}},Pt=TypeError,Dt=function(e){if(Ge(e))return e;throw Pt(Nt(e)+" is not a function")},xt=function(e,t){var n=e[t];return it(n)?void 0:Dt(n)},Lt=Ye,Mt=Ge,Ut=dt,jt=TypeError,Vt={exports:{}},Bt=ke,Ft=Object.defineProperty,Wt="__core-js_shared__",Gt=ke[Wt]||function(e,t){try{Ft(Bt,e,{value:t,configurable:!0,writable:!0})}catch(n){Bt[e]=t}return t}(Wt,{}),Ht=Gt;(Vt.exports=function(e,t){return Ht[e]||(Ht[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var zt=Vt.exports,Kt=Object,Yt=function(e){return Kt(at(e))},qt=Oe({}.hasOwnProperty),Jt=Object.hasOwn||function(e,t){return qt(Yt(e),t)},Xt=0,Qt=Math.random(),Zt=Oe(1..toString),$t=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Zt(++Xt+Qt,36)},en=Jt,tn=ke.Symbol,nn=zt("wks"),rn=Ot?tn.for||tn:tn&&tn.withoutSetter||$t,on=function(e){return en(nn,e)||(nn[e]=Ct&&en(tn,e)?tn[e]:rn("Symbol."+e)),nn[e]},an=dt,sn=It,cn=TypeError,un=on("toPrimitive"),dn=function(e,t){if(!an(e)||sn(e))return e;var n,r=xt(e,un);if(r){if(void 0===t&&(t="default"),n=Ye(r,e,t),!an(n)||sn(n))return n;throw cn("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&Mt(n=e.toString)&&!Ut(r=Lt(n,e)))return r;if(Mt(n=e.valueOf)&&!Ut(r=Lt(n,e)))return r;if("string"!==t&&Mt(n=e.toString)&&!Ut(r=Lt(n,e)))return r;throw jt("Can't convert object to primitive value")}(e,t)},ln=function(e){var t=dn(e,"string");return It(t)?t:t+""},pn=dt,fn=ke.document,hn=pn(fn)&&pn(fn.createElement),_n=function(e){return hn?fn.createElement(e):{}},vn=!ze&&!be((function(){return 7!=Object.defineProperty(_n("div"),"a",{get:function(){return 7}}).a})),mn=Object.getOwnPropertyDescriptor;He.f=ze?mn:function(e,t){if(e=st(e),t=ln(t),vn)try{return mn(e,t)}catch(e){}if(Jt(e,t))return et(!Ye(qe.f,e,t),e[t])};var gn=/#|\.prototype\./,En=function(e,t){var n=bn[yn(e)];return n==Tn||n!=Sn&&(Ge(t)?be(t):!!t)},yn=En.normalize=function(e){return String(e).replace(gn,".").toLowerCase()},bn=En.data={},Sn=En.NATIVE="N",Tn=En.POLYFILL="P",wn=En,Rn=Ve(Ve.bind),Cn=function(e,t){return Dt(e),void 0===t?e:Se?Rn(e,t):function(){return e.apply(t,arguments)}},On={},An=ze&&be((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),In=String,kn=TypeError,Nn=function(e){if(dt(e))return e;throw kn(In(e)+" is not an object")},Pn=Nn,Dn=ln,xn=TypeError,Ln=Object.defineProperty,Mn=Object.getOwnPropertyDescriptor,Un="enumerable",jn="configurable",Vn="writable";On.f=ze?An?function(e,t,n){if(Pn(e),t=Dn(t),Pn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Vn in n&&!n[Vn]){var r=Mn(e,t);r&&r[Vn]&&(e[t]=n.value,n={configurable:jn in n?n[jn]:r[jn],enumerable:Un in n?n[Un]:r[Un],writable:!1})}return Ln(e,t,n)}:Ln:function(e,t,n){if(Pn(e),t=Dn(t),Pn(n),vn)try{return Ln(e,t,n)}catch(e){}if("get"in n||"set"in n)throw xn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Bn=ze?function(e,t,n){return On.f(e,t,et(1,n))}:function(e,t,n){return e[t]=n,e},Fn=ke,Wn=He.f,Gn=lt,Hn=Bn,zn=Jt,Kn=function(e){var t=function t(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return xe(e,this,arguments)};return t.prototype=e.prototype,t},Yn=function(e,t){var n,r,i,o,a,s,c,u,d,l=e.target,p=e.global,f=e.stat,h=e.proto,_=p?Fn:f?Fn[l]:(Fn[l]||{}).prototype,v=p?Gn:Gn[l]||Hn(Gn,l,{})[l],m=v.prototype;for(o in t)r=!(n=wn(p?o:l+(f?".":"#")+o,e.forced))&&_&&zn(_,o),s=v[o],r&&(c=e.dontCallGetSet?(d=Wn(_,o))&&d.value:_[o]),a=r&&c?c:t[o],r&&typeof s==typeof a||(u=e.bind&&r?Cn(a,Fn):e.wrap&&r?Kn(a):h&&Ge(a)?Ve(a):a,(e.sham||a&&a.sham||s&&s.sham)&&Hn(u,"sham",!0),Hn(v,o,u),h&&(zn(Gn,i=l+"Prototype")||Hn(Gn,i,{}),Hn(Gn[i],o,a),e.real&&m&&(n||!m[o])&&Hn(m,o,a)))},qn=Math.ceil,Jn=Math.floor,Xn=Math.trunc||function(e){var t=+e;return(t>0?Jn:qn)(t)},Qn=function(e){var t=+e;return t!=t||0===t?0:Xn(t)},Zn=Math.max,$n=Math.min,er=function(e,t){var n=Qn(e);return n<0?Zn(n+t,0):$n(n,t)},tr=Math.min,nr=function(e){return function(e){return e>0?tr(Qn(e),9007199254740991):0}(e.length)},rr=function(e){return function(t,n,r){var i,o=st(t),a=nr(o),s=er(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},ir={includes:rr(!0),indexOf:rr(!1)},or=ir.includes;Yn({target:"Array",proto:!0,forced:be((function(){return!Array(1).includes()}))},{includes:function(e){return or(this,e,arguments.length>1?arguments[1]:void 0)}});var ar=function(e){return lt[e+"Prototype"]},sr=ar("Array").includes,cr=on("match"),ur=TypeError,dr={};dr[on("toStringTag")]="z";var lr="[object z]"===String(dr),pr=je,fr=on("toStringTag"),hr=Object,_r="Arguments"==pr(function(){return arguments}()),vr=lr?pr:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=hr(e),fr))?n:_r?pr(t):"Object"==(r=pr(t))&&Ge(t.callee)?"Arguments":r},mr=String,gr=function(e){if("Symbol"===vr(e))throw TypeError("Cannot convert a Symbol value to a string");return mr(e)},Er=on("match"),yr=function(e){if(function(e){var t;return dt(e)&&(void 0!==(t=e[cr])?!!t:"RegExp"==je(e))}(e))throw ur("The method doesn't accept regular expressions");return e},br=gr,Sr=Oe("".indexOf);Yn({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Er]=!1,"/./"[e](t)}catch(e){}}return!1}("includes")},{includes:function(e){return!!~Sr(br(at(this)),br(yr(e)),arguments.length>1?arguments[1]:void 0)}});var Tr=ar("String").includes,wr=Ae,Rr=Array.prototype,Cr=String.prototype,Or=se((function(e){var t=e.includes;return e===Rr||wr(Rr,e)&&t===Rr.includes?sr:"string"==typeof e||e===Cr||wr(Cr,e)&&t===Cr.includes?Tr:t})),Ar={exports:{}},Ir=On.f;Yn({target:"Object",stat:!0,forced:Object.defineProperty!==Ir,sham:!ze},{defineProperty:Ir});var kr=lt.Object,Nr=Ar.exports=function(e,t,n){return kr.defineProperty(e,t,n)};kr.defineProperty.sham&&(Nr.sham=!0);var Pr=se(Ar.exports),Dr=Array.isArray||function(e){return"Array"==je(e)},xr=TypeError,Lr=function(e,t,n){var r=ln(t);r in e?On.f(e,r,et(0,n)):e[r]=n},Mr=Gt,Ur=Oe(Function.toString);Ge(Mr.inspectSource)||(Mr.inspectSource=function(e){return Ur(e)});var jr=Mr.inspectSource,Vr=Ge,Br=function(){},Fr=[],Wr=_t("Reflect","construct"),Gr=/^\s*(?:class|function)\b/,Hr=Oe(Gr.exec),zr=!Gr.exec(Br),Kr=function(e){if(!Vr(e))return!1;try{return Wr(Br,Fr,e),!0}catch(e){return!1}},Yr=function(e){if(!Vr(e))return!1;switch(vr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return zr||!!Hr(Gr,jr(e))}catch(e){return!0}};Yr.sham=!0;var qr=!Wr||be((function(){var e;return Kr(Kr.call)||!Kr(Object)||!Kr((function(){e=!0}))||e}))?Yr:Kr,Jr=Dr,Xr=on("species"),Qr=Array,Zr=function(e,t){return new(function(e){var t;return Jr(e)&&(t=e.constructor,(qr(t)&&(t===Qr||Jr(t.prototype))||dt(t)&&null===(t=t[Xr]))&&(t=void 0)),void 0===t?Qr:t}(e))(0===t?0:t)},$r=on("species"),ei=function(e){if(e>9007199254740991)throw xr("Maximum allowed index exceeded");return e},ti=Lr,ni=on("isConcatSpreadable"),ri=Tt>=51||!be((function(){var e=[];return e[ni]=!1,e.concat()[0]!==e})),ii=function(e){if(!dt(e))return!1;var t=e[ni];return void 0!==t?!!t:Dr(e)};Yn({target:"Array",proto:!0,arity:1,forced:!ri||!function(e){return Tt>=51||!be((function(){var t=[];return(t.constructor={})[$r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}("concat")},{concat:function(e){var t,n,r,i,o,a=Yt(this),s=Zr(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(ii(o=-1===t?a:arguments[t]))for(i=nr(o),ei(c+i),n=0;n<i;n++,c++)n in o&&ti(s,c,o[n]);else ei(c+1),ti(s,c++,o);return s.length=c,s}});var oi={},ai={},si=Jt,ci=ir.indexOf,ui=Oe([].push),di=function(e,t){var n,r=st(e),i=0,o=[];for(n in r)!si(ai,n)&&si(r,n)&&ui(o,n);for(;t.length>i;)si(r,n=t[i++])&&(~ci(o,n)||ui(o,n));return o},li=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],pi=Object.keys||function(e){return di(e,li)};oi.f=ze&&!An?Object.defineProperties:function(e,t){Nn(e);for(var n,r=st(t),i=pi(t),o=i.length,a=0;o>a;)On.f(e,n=i[a++],r[n]);return e};var fi,hi=_t("document","documentElement"),_i=zt("keys"),vi=function(e){return _i[e]||(_i[e]=$t(e))},mi=li,gi="prototype",Ei="script",yi=vi("IE_PROTO"),bi=function(){},Si=function(e){return"<script>"+e+"</"+Ei+">"},Ti=function(e){e.write(Si("")),e.close();var t=e.parentWindow.Object;return e=null,t},wi=function(){try{fi=new ActiveXObject("htmlfile")}catch(e){}var e,t;wi="undefined"!=typeof document?document.domain&&fi?Ti(fi):((t=_n("iframe")).style.display="none",hi.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Si("document.F=Object")),e.close(),e.F):Ti(fi);for(var n=mi.length;n--;)delete wi[gi][mi[n]];return wi()};ai[yi]=!0;var Ri=Object.create||function(e,t){var n;return null!==e?(bi[gi]=Nn(e),n=new bi,bi[gi]=null,n[yi]=e):n=wi(),void 0===t?n:oi.f(n,t)},Ci={},Oi=li.concat("length","prototype");Ci.f=Object.getOwnPropertyNames||function(e){return di(e,Oi)};var Ai={},Ii=er,ki=Array,Ni=Math.max,Pi=function(e,t,n){for(var r=nr(e),i=Ii(t,r),o=Ii(void 0===n?r:n,r),a=ki(Ni(o-i,0)),s=0;i<o;i++,s++)Lr(a,s,e[i]);return a.length=s,a},Di=Ci.f,xi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Ai.f=function(e){return xi&&"Window"==je(e)?function(e){try{return Di(e)}catch(e){return Pi(xi)}}(e):Di(st(e))};var Li={};Li.f=Object.getOwnPropertySymbols;var Mi=function(e,t,n,r){return r&&r.enumerable?e[t]=n:Bn(e,t,n),e},Ui=function(e,t,n){return On.f(e,t,n)},ji={};ji.f=on;var Vi,Bi,Fi,Wi=lt,Gi=On.f,Hi=function(e){var t=Wi.Symbol||(Wi.Symbol={});Jt(t,e)||Gi(t,e,{value:ji.f(e)})},zi=function(){var e=_t("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=on("toPrimitive");t&&!t[r]&&Mi(t,r,(function(e){return Ye(n,this)}),{arity:1})},Ki=lr?{}.toString:function(){return"[object "+vr(this)+"]"},Yi=On.f,qi=on("toStringTag"),Ji=function(e,t,n,r){if(e){var i=n?e:e.prototype;Jt(i,qi)||Yi(i,qi,{configurable:!0,value:t}),r&&!lr&&Bn(i,"toString",Ki)}},Xi=ke.WeakMap,Qi=Ge(Xi)&&/native code/.test(String(Xi)),Zi=ke,$i=Jt,eo=Gt,to="Object already initialized",no=Zi.TypeError,ro=Zi.WeakMap;if(Qi||eo.state){var io=eo.state||(eo.state=new ro);io.get=io.get,io.has=io.has,io.set=io.set,Vi=function(e,t){if(io.has(e))throw no(to);return t.facade=e,io.set(e,t),t},Bi=function(e){return io.get(e)||{}},Fi=function(e){return io.has(e)}}else{var oo=vi("state");ai[oo]=!0,Vi=function(e,t){if($i(e,oo))throw no(to);return t.facade=e,Bn(e,oo,t),t},Bi=function(e){return $i(e,oo)?e[oo]:{}},Fi=function(e){return $i(e,oo)}}var ao={set:Vi,get:Bi,has:Fi,enforce:function(e){return Fi(e)?Bi(e):Vi(e,{})},getterFor:function(e){return function(t){var n;if(!dt(t)||(n=Bi(t)).type!==e)throw no("Incompatible receiver, "+e+" required");return n}}},so=Oe([].push),co=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,d,l){for(var p,f,h=Yt(c),_=rt(h),v=Cn(u,d),m=nr(_),g=0,E=l||Zr,y=t?E(c,m):n||a?E(c,0):void 0;m>g;g++)if((s||g in _)&&(f=v(p=_[g],g,h),e))if(t)y[g]=f;else if(f)switch(e){case 3:return!0;case 5:return p;case 6:return g;case 2:so(y,p)}else switch(e){case 4:return!1;case 7:so(y,p)}return o?-1:r||i?i:y}},uo={forEach:co(0),map:co(1),filter:co(2),some:co(3),every:co(4),find:co(5),findIndex:co(6),filterReject:co(7)},lo=Yn,po=ke,fo=Ye,ho=ze,_o=Ct,vo=Jt,mo=Nn,go=st,Eo=ln,yo=et,bo=Ri,So=pi,To=Ai,wo=He,Ro=On,Co=qe,Oo=Mi,Ao=zt,Io=ai,ko=$t,No=ao,Po=uo.forEach,Do=vi("hidden"),xo="Symbol",Lo="prototype",Mo=No.set,Uo=No.getterFor(xo),jo=Object[Lo],Vo=po.Symbol,Bo=Vo&&Vo[Lo],Fo=po.TypeError,Wo=po.QObject,Go=wo.f,Ho=Ro.f,zo=To.f,Ko=Co.f,Yo=Oe([].push),qo=Ao("symbols"),Jo=Ao("op-symbols"),Xo=Ao("wks"),Qo=!Wo||!Wo[Lo]||!Wo[Lo].findChild,Zo=ho&&be((function(){return 7!=bo(Ho({},"a",{get:function(){return Ho(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Go(jo,t);r&&delete jo[t],Ho(e,t,n),r&&e!==jo&&Ho(jo,t,r)}:Ho,$o=function(e,t){var n=qo[e]=bo(Bo);return Mo(n,{type:xo,tag:e,description:t}),ho||(n.description=t),n},ea=function e(t,n,r){t===jo&&e(Jo,n,r),mo(t);var i=Eo(n);return mo(r),vo(qo,i)?(r.enumerable?(vo(t,Do)&&t[Do][i]&&(t[Do][i]=!1),r=bo(r,{enumerable:yo(0,!1)})):(vo(t,Do)||Ho(t,Do,yo(1,{})),t[Do][i]=!0),Zo(t,i,r)):Ho(t,i,r)},ta=function(e,t){mo(e);var n=go(t),r=So(n).concat(oa(n));return Po(r,(function(t){ho&&!fo(na,n,t)||ea(e,t,n[t])})),e},na=function(e){var t=Eo(e),n=fo(Ko,this,t);return!(this===jo&&vo(qo,t)&&!vo(Jo,t))&&(!(n||!vo(this,t)||!vo(qo,t)||vo(this,Do)&&this[Do][t])||n)},ra=function(e,t){var n=go(e),r=Eo(t);if(n!==jo||!vo(qo,r)||vo(Jo,r)){var i=Go(n,r);return!i||!vo(qo,r)||vo(n,Do)&&n[Do][r]||(i.enumerable=!0),i}},ia=function(e){var t=zo(go(e)),n=[];return Po(t,(function(e){vo(qo,e)||vo(Io,e)||Yo(n,e)})),n},oa=function(e){var t=e===jo,n=zo(t?Jo:go(e)),r=[];return Po(n,(function(e){!vo(qo,e)||t&&!vo(jo,e)||Yo(r,qo[e])})),r};_o||(Oo(Bo=(Vo=function(){if(Ae(Bo,this))throw Fo("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?gr(arguments[0]):void 0,t=ko(e),n=function e(n){this===jo&&fo(e,Jo,n),vo(this,Do)&&vo(this[Do],t)&&(this[Do][t]=!1),Zo(this,t,yo(1,n))};return ho&&Qo&&Zo(jo,t,{configurable:!0,set:n}),$o(t,e)})[Lo],"toString",(function(){return Uo(this).tag})),Oo(Vo,"withoutSetter",(function(e){return $o(ko(e),e)})),Co.f=na,Ro.f=ea,oi.f=ta,wo.f=ra,Ci.f=To.f=ia,Li.f=oa,ji.f=function(e){return $o(on(e),e)},ho&&Ui(Bo,"description",{configurable:!0,get:function(){return Uo(this).description}})),lo({global:!0,constructor:!0,wrap:!0,forced:!_o,sham:!_o},{Symbol:Vo}),Po(So(Xo),(function(e){Hi(e)})),lo({target:xo,stat:!0,forced:!_o},{useSetter:function(){Qo=!0},useSimple:function(){Qo=!1}}),lo({target:"Object",stat:!0,forced:!_o,sham:!ho},{create:function(e,t){return void 0===t?bo(e):ta(bo(e),t)},defineProperty:ea,defineProperties:ta,getOwnPropertyDescriptor:ra}),lo({target:"Object",stat:!0,forced:!_o},{getOwnPropertyNames:ia}),zi(),Ji(Vo,xo),Io[Do]=!0;var aa=Ct&&!!Symbol.for&&!!Symbol.keyFor,sa=zt,ca=sa("string-to-symbol-registry"),ua=sa("symbol-to-string-registry");Yn({target:"Symbol",stat:!0,forced:!aa},{for:function(e){var t=gr(e);if(Jt(ca,t))return ca[t];var n=_t("Symbol")(t);return ca[t]=n,ua[n]=t,n}});var da=zt("symbol-to-string-registry");Yn({target:"Symbol",stat:!0,forced:!aa},{keyFor:function(e){if(!It(e))throw TypeError(Nt(e)+" is not a symbol");if(Jt(da,e))return da[e]}});var la=Oe([].slice),pa=Dr,fa=je,ha=Oe([].push),_a=_t,va=xe,ma=Oe,ga=be,Ea=Ge,ya=It,ba=la,Sa=function(e){if(Ge(e))return e;if(pa(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];"string"==typeof i?ha(n,i):"number"!=typeof i&&"Number"!=fa(i)&&"String"!=fa(i)||ha(n,gr(i))}var o=n.length,a=!0;return function(e,t){if(a)return a=!1,t;if(pa(this))return t;for(var r=0;r<o;r++)if(n[r]===e)return t}}},Ta=String,wa=_a("JSON","stringify"),Ra=ma(/./.exec),Ca=ma("".charAt),Oa=ma("".charCodeAt),Aa=ma("".replace),Ia=ma(1..toString),ka=/[\uD800-\uDFFF]/g,Na=/^[\uD800-\uDBFF]$/,Pa=/^[\uDC00-\uDFFF]$/,Da=!Ct||ga((function(){var e=_a("Symbol")();return"[null]"!=wa([e])||"{}"!=wa({a:e})||"{}"!=wa(Object(e))})),xa=ga((function(){return'"\\udf06\\ud834"'!==wa("\udf06\ud834")||'"\\udead"'!==wa("\udead")})),La=function(e,t){var n=ba(arguments),r=Sa(t);if(Ea(r)||void 0!==e&&!ya(e))return n[1]=function(e,t){if(Ea(r)&&(t=Ye(r,this,Ta(e),t)),!ya(t))return t},va(wa,null,n)},Ma=function(e,t,n){var r=Ca(n,t-1),i=Ca(n,t+1);return Ra(Na,e)&&!Ra(Pa,i)||Ra(Pa,e)&&!Ra(Na,r)?"\\u"+Ia(Oa(e,0),16):e};wa&&Yn({target:"JSON",stat:!0,arity:3,forced:Da||xa},{stringify:function(e,t,n){var r=ba(arguments),i=va(Da?La:wa,null,r);return xa&&"string"==typeof i?Aa(i,ka,Ma):i}});var Ua=Li;Yn({target:"Object",stat:!0,forced:!Ct||be((function(){Ua.f(1)}))},{getOwnPropertySymbols:function(e){var t=Ua.f;return t?t(Yt(e)):[]}}),Hi("asyncIterator"),Hi("hasInstance"),Hi("isConcatSpreadable"),Hi("iterator"),Hi("match"),Hi("matchAll"),Hi("replace"),Hi("search"),Hi("species"),Hi("split"),Hi("toPrimitive"),zi(),Hi("toStringTag"),Ji(_t("Symbol"),"Symbol"),Hi("unscopables"),Ji(ke.JSON,"JSON",!0);var ja,Va,Ba,Fa=lt.Symbol,Wa={},Ga=ze,Ha=Function.prototype,za=Ga&&Object.getOwnPropertyDescriptor,Ka=Jt(Ha,"name"),Ya={EXISTS:Ka,PROPER:Ka&&"something"===function(){}.name,CONFIGURABLE:Ka&&(!Ga||Ga&&za(Ha,"name").configurable)},qa=!be((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Ja=vi("IE_PROTO"),Xa=Object,Qa=Xa.prototype,Za=qa?Xa.getPrototypeOf:function(e){var t=Yt(e);if(Jt(t,Ja))return t[Ja];var n=t.constructor;return Ge(n)&&t instanceof n?n.prototype:t instanceof Xa?Qa:null},$a=Za,es=on("iterator"),ts=!1;[].keys&&("next"in(Ba=[].keys())?(Va=$a($a(Ba)))!==Object.prototype&&(ja=Va):ts=!0);var ns=!dt(ja)||be((function(){var e={};return ja[es].call(e)!==e}));Ge((ja=ns?{}:Ri(ja))[es])||Mi(ja,es,(function(){return this}));var rs={IteratorPrototype:ja,BUGGY_SAFARI_ITERATORS:ts},is=rs.IteratorPrototype,os=function(){return this},as=String,ss=TypeError,cs=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=function(e,t,n){try{return Oe(Dt(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Nn(n),function(e){if("object"==typeof e||Ge(e))return e;throw ss("Can't set "+as(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),us=Mi,ds=Wa,ls=Ya.PROPER,ps=rs.BUGGY_SAFARI_ITERATORS,fs=on("iterator"),hs="values",_s="entries",vs=function(){return this},ms=function(e,t,n,r,i,o,a){!function(e,t,n,r){var i=t+" Iterator";e.prototype=Ri(is,{next:et(+!r,n)}),Ji(e,i,!1,!0),Wa[i]=os}(n,t,r);var s,c,u,d=function(e){if(e===i&&_)return _;if(!ps&&e in f)return f[e];switch(e){case"keys":case hs:case _s:return function(){return new n(this,e)}}return function(){return new n(this)}},l=t+" Iterator",p=!1,f=e.prototype,h=f[fs]||f["@@iterator"]||i&&f[i],_=!ps&&h||d(i),v="Array"==t&&f.entries||h;if(v&&(s=Za(v.call(new e)))!==Object.prototype&&s.next&&(Ji(s,l,!0,!0),ds[l]=vs),ls&&i==hs&&h&&h.name!==hs&&(p=!0,_=function(){return Ye(h,this)}),i)if(c={values:d(hs),keys:o?_:d("keys"),entries:d(_s)},a)for(u in c)(ps||p||!(u in f))&&us(f,u,c[u]);else Yn({target:t,proto:!0,forced:ps||p},c);return a&&f[fs]!==_&&us(f,fs,_,{name:i}),ds[t]=_,c},gs=function(e,t){return{value:e,done:t}},Es=Wa,ys=ao;On.f;var bs=gs,Ss="Array Iterator",Ts=ys.set,ws=ys.getterFor(Ss);ms(Array,"Array",(function(e,t){Ts(this,{type:Ss,target:st(e),index:0,kind:t})}),(function(){var e=ws(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,bs(void 0,!0)):bs("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),Es.Arguments=Es.Array;var Rs=Wa,Cs=on("toStringTag");for(var Os in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var As=ke[Os],Is=As&&As.prototype;Is&&vr(Is)!==Cs&&Bn(Is,Cs,Os),Rs[Os]=Rs.Array}var ks=On.f,Ns=on("metadata"),Ps=Function.prototype;void 0===Ps[Ns]&&ks(Ps,Ns,{value:null}),Hi("dispose"),Hi("metadata"),Hi("asyncDispose");var Ds=_t("Symbol"),xs=Ds.keyFor,Ls=Oe(Ds.prototype.valueOf),Ms=Ds.isRegisteredSymbol||function(e){try{return void 0!==xs(Ls(e))}catch(e){return!1}};Yn({target:"Symbol",stat:!0},{isRegisteredSymbol:Ms});for(var Us=_t,js=Us("Symbol"),Vs=js.isWellKnownSymbol,Bs=Us("Object","getOwnPropertyNames"),Fs=Oe(js.prototype.valueOf),Ws=zt("wks"),Gs=0,Hs=Bs(js),zs=Hs.length;Gs<zs;Gs++)try{var Ks=Hs[Gs];It(js[Ks])&&on(Ks)}catch(e){}var Ys=function(e){if(Vs&&Vs(e))return!0;try{for(var t=Fs(e),n=0,r=Bs(Ws),i=r.length;n<i;n++)if(Ws[r[n]]==t)return!0}catch(e){}return!1};Yn({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Ys}),Hi("matcher"),Hi("observable"),Yn({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Ms}),Yn({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Ys}),Hi("metadataKey"),Hi("patternMatch"),Hi("replaceAll");var qs=se(Fa),Js=Oe,Xs=Js("".charAt),Qs=Js("".charCodeAt),Zs=Js("".slice),$s=function(e){return function(t,n){var r,i,o=gr(at(t)),a=Qn(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=Qs(o,a))<55296||r>56319||a+1===s||(i=Qs(o,a+1))<56320||i>57343?e?Xs(o,a):r:e?Zs(o,a,a+2):i-56320+(r-55296<<10)+65536}},ec=($s(!1),$s(!0)),tc=ao,nc=gs,rc="String Iterator",ic=tc.set,oc=tc.getterFor(rc);ms(String,"String",(function(e){ic(this,{type:rc,string:gr(e),index:0})}),(function(){var e,t=oc(this),n=t.string,r=t.index;return r>=n.length?nc(void 0,!0):(e=ec(n,r),t.index+=e.length,nc(e,!1))}));var ac=se(ji.f("iterator"));function sc(e){return(sc="function"==typeof qs&&"symbol"==typeof ac?function(e){return typeof e}:function(e){return e&&"function"==typeof qs&&e.constructor===qs&&e!==qs.prototype?"symbol":typeof e})(e)}var cc=se(ji.f("toPrimitive"));function uc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==sc(e)||null===e)return e;var n=e[cc];if(void 0!==n){var r=n.call(e,t);if("object"!==sc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===sc(t)?t:String(t)}(t))in e?Pr(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dc=ar("Array").keys,lc=Array.prototype,pc={DOMTokenList:!0,NodeList:!0},fc=se((function(e){var t=e.keys;return e===lc||Ae(lc,e)&&t===lc.keys||Jt(pc,vr(e))?dc:t})),hc=Nt,_c=TypeError,vc=Pi,mc=Math.floor,gc=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},Ec=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},yc=function(e,t){var n=[][e];return!!n&&be((function(){n.call(null,t||function(){return 1},1)}))},bc=vt.match(/firefox\/(\d+)/i),Sc=!!bc&&+bc[1],Tc=/MSIE|Trident/.test(vt),wc=vt.match(/AppleWebKit\/(\d+)\./),Rc=!!wc&&+wc[1],Cc=Oe,Oc=nr,Ac=function(e,t){if(!delete e[t])throw _c("Cannot delete property "+hc(t)+" of "+hc(e))},Ic=gr,kc=be,Nc=Sc,Pc=Tt,Dc=Rc,xc=[],Lc=Cc(xc.sort),Mc=Cc(xc.push),Uc=kc((function(){xc.sort(void 0)})),jc=kc((function(){xc.sort(null)})),Vc=yc("sort"),Bc=!kc((function(){if(Pc)return Pc<70;if(!(Nc&&Nc>3)){if(Tc)return!0;if(Dc)return Dc<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)xc.push({k:t+r,v:n})}for(xc.sort((function(e,t){return t.v-e.v})),r=0;r<xc.length;r++)t=xc[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));Yn({target:"Array",proto:!0,forced:Uc||!jc||!Vc||!Bc},{sort:function(e){void 0!==e&&Dt(e);var t=Yt(this);if(Bc)return void 0===e?Lc(t):Lc(t,e);var n,r,i=[],o=Oc(t);for(r=0;r<o;r++)r in t&&Mc(i,t[r]);for(function e(t,n){var r=t.length,i=mc(r/2);return r<8?gc(t,n):Ec(t,e(vc(t,0,i),n),e(vc(t,i),n),n)}(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Ic(t)>Ic(n)?1:-1}}(e)),n=Oc(i),r=0;r<n;)t[r]=i[r++];for(;r<o;)Ac(t,r++);return t}});var Fc=ar("Array").sort,Wc=Array.prototype,Gc=se((function(e){var t=e.sort;return e===Wc||Ae(Wc,e)&&t===Wc.sort?Fc:t})),Hc=Oe([].concat),zc=_t("Reflect","ownKeys")||function(e){var t=Ci.f(Nn(e)),n=Li.f;return n?Hc(t,n(e)):t},Kc=Jt,Yc=Error,qc=Oe("".replace),Jc=String(Yc("zxcasd").stack),Xc=/\n\s*at [^:]*:[^\n]*/,Qc=Xc.test(Jc),Zc=!be((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",et(1,7)),7!==e.stack)})),$c=Error.captureStackTrace,eu=on("iterator"),tu=Array.prototype,nu=xt,ru=on("iterator"),iu=function(e){if(!it(e))return nu(e,ru)||nu(e,"@@iterator")||Wa[vr(e)]},ou=TypeError,au=Nn,su=Ae,cu=function(e,t,n){var r,i;au(e);try{if(!(r=xt(e,"return"))){if("throw"===t)throw n;return n}r=Ye(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return au(r),n},uu=TypeError,du=function(e,t){this.stopped=e,this.result=t},lu=du.prototype,pu=function(e,t,n){var r,i,o,a,s,c,u,d=n&&n.that,l=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),f=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),_=Cn(t,d),v=function(e){return r&&cu(r,"normal",e),new du(!0,e)},m=function(e){return l?(Nn(e),h?_(e[0],e[1],v):_(e[0],e[1])):h?_(e,v):_(e)};if(p)r=e.iterator;else if(f)r=e;else{if(!(i=iu(e)))throw uu(Nt(e)+" is not iterable");if(function(e){return void 0!==e&&(Wa.Array===e||tu[eu]===e)}(i)){for(o=0,a=nr(e);a>o;o++)if((s=m(e[o]))&&su(lu,s))return s;return new du(!1)}r=function(e,t){var n=arguments.length<2?iu(e):t;if(Dt(n))return Nn(Ye(n,e));throw ou(Nt(e)+" is not iterable")}(e,i)}for(c=p?e.next:r.next;!(u=Ye(c,r)).done;){try{s=m(u.value)}catch(e){cu(r,"throw",e)}if("object"==typeof s&&s&&su(lu,s))return s}return new du(!1)},fu=cs,hu=Ri,_u=Bn,vu=et,mu=function(e,t){dt(t)&&"cause"in t&&Bn(e,"cause",t.cause)},gu=function(e,t,n,r){Zc&&($c?$c(e,t):Bn(e,"stack",function(e,t){if(Qc&&"string"==typeof e&&!Yc.prepareStackTrace)for(;t--;)e=qc(e,Xc,"");return e}(n,r)))},Eu=function(e,t){return void 0===e?arguments.length<2?"":t:gr(e)},yu=on("toStringTag"),bu=Error,Su=[].push,Tu=function e(t,n){var r,i=Ae(wu,this);fu?r=fu(bu(),i?Za(this):wu):(r=i?this:hu(wu),_u(r,yu,"Error")),void 0!==n&&_u(r,"message",Eu(n)),gu(r,e,r.stack,1),arguments.length>2&&mu(r,arguments[2]);var o=[];return pu(t,Su,{that:o}),_u(r,"errors",o),r};fu?fu(Tu,bu):function(e,t,n){for(var r=zc(t),i=On.f,o=He.f,a=0;a<r.length;a++){var s=r[a];Kc(e,s)||n&&Kc(n,s)||i(e,s,o(t,s))}}(Tu,bu,{name:!0});var wu=Tu.prototype=hu(bu.prototype,{constructor:vu(1,Tu),message:vu(1,""),name:vu(1,"AggregateError")});Yn({global:!0,constructor:!0,arity:2},{AggregateError:Tu});var Ru,Cu,Ou,Au,Iu=void 0!==n&&"process"==je(n),ku=on("species"),Nu=TypeError,Pu=TypeError,Du=Nn,xu=on("species"),Lu=function(e,t){var n,r=Du(e).constructor;return void 0===r||it(n=Du(r)[xu])?t:function(e){if(qr(e))return e;throw Pu(Nt(e)+" is not a constructor")}(n)},Mu=TypeError,Uu=/(?:ipad|iphone|ipod).*applewebkit/i.test(vt),ju=ke,Vu=Ge,Bu=be,Fu=hi,Wu=_n,Gu=function(e,t){if(e<t)throw Mu("Not enough arguments");return e},Hu=ju.setImmediate,zu=ju.clearImmediate,Ku=ju.process,Yu=ju.Dispatch,qu=ju.Function,Ju=ju.MessageChannel,Xu=ju.String,Qu=0,Zu={},$u="onreadystatechange";Bu((function(){Ru=ju.location}));var ed=function(e){if(Jt(Zu,e)){var t=Zu[e];delete Zu[e],t()}},td=function(e){return function(){ed(e)}},nd=function(e){ed(e.data)},rd=function(e){ju.postMessage(Xu(e),Ru.protocol+"//"+Ru.host)};Hu&&zu||(Hu=function(e){Gu(arguments.length,1);var t=Vu(e)?e:qu(e),n=la(arguments,1);return Zu[++Qu]=function(){xe(t,void 0,n)},Cu(Qu),Qu},zu=function(e){delete Zu[e]},Iu?Cu=function(e){Ku.nextTick(td(e))}:Yu&&Yu.now?Cu=function(e){Yu.now(td(e))}:Ju&&!Uu?(Au=(Ou=new Ju).port2,Ou.port1.onmessage=nd,Cu=Cn(Au.postMessage,Au)):ju.addEventListener&&Vu(ju.postMessage)&&!ju.importScripts&&Ru&&"file:"!==Ru.protocol&&!Bu(rd)?(Cu=rd,ju.addEventListener("message",nd,!1)):Cu=$u in Wu("script")?function(e){Fu.appendChild(Wu("script"))[$u]=function(){Fu.removeChild(this),ed(e)}}:function(e){setTimeout(td(e),0)});var id={set:Hu,clear:zu},od=function(){this.head=null,this.tail=null};od.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var ad,sd,cd,ud,dd,ld=od,pd=/ipad|iphone|ipod/i.test(vt)&&"undefined"!=typeof Pebble,fd=/web0s(?!.*chrome)/i.test(vt),hd=ke,_d=Cn,vd=He.f,md=id.set,gd=Iu,Ed=hd.MutationObserver||hd.WebKitMutationObserver,yd=hd.document,bd=hd.process,Sd=hd.Promise,Td=vd(hd,"queueMicrotask"),wd=Td&&Td.value;if(!wd){var Rd=new ld,Cd=function(){var e,t;for(gd&&(e=bd.domain)&&e.exit();t=Rd.get();)try{t()}catch(e){throw Rd.head&&ad(),e}e&&e.enter()};Uu||gd||fd||!Ed||!yd?!pd&&Sd&&Sd.resolve?((ud=Sd.resolve(void 0)).constructor=Sd,dd=_d(ud.then,ud),ad=function(){dd(Cd)}):gd?ad=function(){bd.nextTick(Cd)}:(md=_d(md,hd),ad=function(){md(Cd)}):(sd=!0,cd=yd.createTextNode(""),new Ed(Cd).observe(cd,{characterData:!0}),ad=function(){cd.data=sd=!sd}),wd=function(e){Rd.head||ad(),Rd.add(e)}}var Od=wd,Ad=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Id=ke.Promise,kd="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Nd=!kd&&!Iu&&"object"==typeof window&&"object"==typeof document,Pd=Id,Dd=Tt,xd=Pd&&Pd.prototype,Ld=on("species"),Md=!1,Ud=Ge(ke.PromiseRejectionEvent),jd={CONSTRUCTOR:wn("Promise",(function(){var e=jr(Pd),t=e!==String(Pd);if(!t&&66===Dd)return!0;if(!xd.catch||!xd.finally)return!0;if(!Dd||Dd<51||!/native code/.test(e)){var n=new Pd((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[Ld]=r,!(Md=n.then((function(){}))instanceof r))return!0}return!t&&(Nd||kd)&&!Ud})),REJECTION_EVENT:Ud,SUBCLASSING:Md},Vd={},Bd=Dt,Fd=TypeError,Wd=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw Fd("Bad Promise constructor");t=e,n=r})),this.resolve=Bd(t),this.reject=Bd(n)};Vd.f=function(e){return new Wd(e)};var Gd,Hd,zd=Iu,Kd=ke,Yd=Ye,qd=Ge,Jd=id.set,Xd=Od,Qd=ao,Zd=Id,$d=Vd,el="Promise",tl=jd.CONSTRUCTOR,nl=jd.REJECTION_EVENT,rl=Qd.getterFor(el),il=Qd.set,ol=Zd&&Zd.prototype,al=Zd,sl=ol,cl=Kd.TypeError,ul=Kd.document,dl=Kd.process,ll=$d.f,pl=ll,fl=!!(ul&&ul.createEvent&&Kd.dispatchEvent),hl="unhandledrejection",_l=function(e){var t;return!(!dt(e)||!qd(t=e.then))&&t},vl=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,d=e.domain;try{s?(a||(2===t.rejection&&bl(t),t.rejection=1),!0===s?n=o:(d&&d.enter(),n=s(o),d&&(d.exit(),i=!0)),n===e.promise?u(cl("Promise-chain cycle")):(r=_l(n))?Yd(r,n,c,u):c(n)):u(o)}catch(e){d&&!i&&d.exit(),u(e)}},ml=function(e,t){e.notified||(e.notified=!0,Xd((function(){for(var n,r=e.reactions;n=r.get();)vl(n,e);e.notified=!1,t&&!e.rejection&&El(e)})))},gl=function(e,t,n){var r,i;fl?((r=ul.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Kd.dispatchEvent(r)):r={promise:t,reason:n},!nl&&(i=Kd["on"+e])?i(r):e===hl&&function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}}("Unhandled promise rejection",n)},El=function(e){Yd(Jd,Kd,(function(){var t,n=e.facade,r=e.value;if(yl(e)&&(t=Ad((function(){zd?dl.emit("unhandledRejection",r,n):gl(hl,n,r)})),e.rejection=zd||yl(e)?2:1,t.error))throw t.value}))},yl=function(e){return 1!==e.rejection&&!e.parent},bl=function(e){Yd(Jd,Kd,(function(){var t=e.facade;zd?dl.emit("rejectionHandled",t):gl("rejectionhandled",t,e.value)}))},Sl=function(e,t,n){return function(r){e(t,r,n)}},Tl=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ml(e,!0))},wl=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw cl("Promise can't be resolved itself");var i=_l(n);i?Xd((function(){var r={done:!1};try{Yd(i,n,Sl(e,r,t),Sl(Tl,r,t))}catch(e){Tl(r,e,t)}})):(t.value=n,t.state=1,ml(t,!1))}catch(n){Tl({done:!1},n,t)}}};tl&&(sl=(al=function(e){(function(e,t){if(Ae(t,e))return e;throw Nu("Incorrect invocation")})(this,sl),Dt(e),Yd(Gd,this);var t=rl(this);try{e(Sl(wl,t),Sl(Tl,t))}catch(e){Tl(t,e)}}).prototype,(Gd=function(e){il(this,{type:el,done:!1,notified:!1,parent:!1,reactions:new ld,rejection:!1,state:0,value:void 0})}).prototype=Mi(sl,"then",(function(e,t){var n=rl(this),r=ll(Lu(this,al));return n.parent=!0,r.ok=!qd(e)||e,r.fail=qd(t)&&t,r.domain=zd?dl.domain:void 0,0==n.state?n.reactions.add(r):Xd((function(){vl(r,n)})),r.promise})),Hd=function(){var e=new Gd,t=rl(e);this.promise=e,this.resolve=Sl(wl,t),this.reject=Sl(Tl,t)},$d.f=ll=function(e){return e===al||void 0===e?new Hd(e):pl(e)}),Yn({global:!0,constructor:!0,wrap:!0,forced:tl},{Promise:al}),Ji(al,el,!1,!0),function(e){var t=_t(e);ze&&t&&!t[ku]&&Ui(t,ku,{configurable:!0,get:function(){return this}})}(el);var Rl=on("iterator"),Cl=!1;try{var Ol=0,Al={next:function(){return{done:!!Ol++}},return:function(){Cl=!0}};Al[Rl]=function(){return this},Array.from(Al,(function(){throw 2}))}catch(e){}var Il=jd.CONSTRUCTOR||!function(e,t){if(!t&&!Cl)return!1;var n=!1;try{var r={};r[Rl]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}((function(e){Id.all(e).then(void 0,(function(){}))}));Yn({target:"Promise",stat:!0,forced:Il},{all:function(e){var t=this,n=Vd.f(t),r=n.resolve,i=n.reject,o=Ad((function(){var n=Dt(t.resolve),o=[],a=0,s=1;pu(e,(function(e){var c=a++,u=!1;s++,Ye(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise}});var kl=jd.CONSTRUCTOR;Id&&Id.prototype,Yn({target:"Promise",proto:!0,forced:kl,real:!0},{catch:function(e){return this.then(void 0,e)}}),Yn({target:"Promise",stat:!0,forced:Il},{race:function(e){var t=this,n=Vd.f(t),r=n.reject,i=Ad((function(){var i=Dt(t.resolve);pu(e,(function(e){Ye(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),Yn({target:"Promise",stat:!0,forced:jd.CONSTRUCTOR},{reject:function(e){var t=Vd.f(this);return Ye(t.reject,void 0,e),t.promise}});var Nl=function(e,t){if(Nn(e),dt(t)&&t.constructor===e)return t;var n=Vd.f(e);return(0,n.resolve)(t),n.promise},Pl=jd.CONSTRUCTOR,Dl=_t("Promise");Yn({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return Nl(Pl||this!==Dl?this:Id,e)}}),Yn({target:"Promise",stat:!0,forced:Il},{allSettled:function(e){var t=this,n=Vd.f(t),r=n.resolve,i=n.reject,o=Ad((function(){var n=Dt(t.resolve),i=[],o=0,a=1;pu(e,(function(e){var s=o++,c=!1;a++,Ye(n,t,e).then((function(e){c||(c=!0,i[s]={status:"fulfilled",value:e},--a||r(i))}),(function(e){c||(c=!0,i[s]={status:"rejected",reason:e},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var xl="No one promise resolved";Yn({target:"Promise",stat:!0,forced:Il},{any:function(e){var t=this,n=_t("AggregateError"),r=Vd.f(t),i=r.resolve,o=r.reject,a=Ad((function(){var r=Dt(t.resolve),a=[],s=0,c=1,u=!1;pu(e,(function(e){var d=s++,l=!1;c++,Ye(r,t,e).then((function(e){l||u||(u=!0,i(e))}),(function(e){l||u||(l=!0,a[d]=e,--c||o(new n(a,xl)))}))})),--c||o(new n(a,xl))}));return a.error&&o(a.value),r.promise}});var Ll=Id,Ml=Nl,Ul=Ll&&Ll.prototype;Yn({target:"Promise",proto:!0,real:!0,forced:!!Ll&&be((function(){Ul.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Lu(this,_t("Promise")),n=Ge(e);return this.then(n?function(n){return Ml(t,e()).then((function(){return n}))}:e,n?function(n){return Ml(t,e()).then((function(){throw n}))}:e)}});var jl=lt.Promise,Vl=se(jl),Bl=function(){};function Fl(){var e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:Bl};return e.promise=new Vl((function(t,n){e.resolve=function(n){e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=function(t){e.isFinished||(e.isRejected=!0,e.isFinished=!0,n(t))}})),e}var Wl,Gl,Hl=new Map,zl=new Map,Kl=new Map;!function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(Wl||(Wl={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(Gl||(Gl={}));var Yl={exports:{}};!function(e,t){!function(n,r){var i="function",o="undefined",a="object",s="string",c="major",u="model",d="name",l="type",p="vendor",f="version",h="architecture",_="console",v="mobile",m="tablet",g="smarttv",E="wearable",y="embedded",b="Amazon",S="Apple",T="ASUS",w="BlackBerry",R="Browser",C="Chrome",O="Firefox",A="Google",I="Huawei",k="LG",N="Microsoft",P="Motorola",D="Opera",x="Samsung",L="Sharp",M="Sony",U="Xiaomi",j="Zebra",V="Facebook",B="Chromium OS",F="Mac OS",W=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},G=function(e,t){return typeof e===s&&-1!==H(t).indexOf(H(e))},H=function(e){return e.toLowerCase()},z=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,350)},K=function(e,t){for(var n,o,s,c,u,d,l=0;l<t.length&&!u;){var p=t[l],f=t[l+1];for(n=o=0;n<p.length&&!u&&p[n];)if(u=p[n++].exec(e))for(s=0;s<f.length;s++)d=u[++o],typeof(c=f[s])===a&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,d):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=d?d.replace(c[1],c[2]):r:this[c[0]]=d?c[1].call(this,d,c[2]):r:4===c.length&&(this[c[0]]=d?c[3].call(this,d.replace(c[1],c[2])):r):this[c]=d||r;l+=2}},Y=function(e,t){for(var n in t)if(typeof t[n]===a&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(G(t[n][i],e))return"?"===n?r:n}else if(G(t[n],e))return"?"===n?r:n;return e},q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,f],[/opios[\/ ]+([\w\.]+)/i],[f,[d,D+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[d,D]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[d,"UC"+R]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[f,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+R],f],[/\bfocus\/([\w\.]+)/i],[f,[d,O+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[d,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[d,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[d,"MIUI "+R]],[/fxios\/([-\w\.]+)/i],[f,[d,O]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+R]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+R],f],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,V],f],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[d,C+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,C+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[d,"Android "+R]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[f,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[d,O+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,f],[/(cobalt)\/([\w\.]+)/i],[d,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,H]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",H]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,H]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[p,x],[l,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[p,x],[l,v]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[p,S],[l,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[p,S],[l,m]],[/(macintosh);/i],[u,[p,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[p,L],[l,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[p,I],[l,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[p,I],[l,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[p,U],[l,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[p,U],[l,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[p,"OPPO"],[l,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[p,"Vivo"],[l,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[p,"Realme"],[l,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[p,P],[l,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[p,P],[l,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[p,k],[l,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[p,k],[l,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[p,"Lenovo"],[l,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[p,"Nokia"],[l,v]],[/(pixel c)\b/i],[u,[p,A],[l,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[p,A],[l,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[p,M],[l,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[p,M],[l,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[p,"OnePlus"],[l,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[p,b],[l,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[p,b],[l,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,p,[l,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[p,w],[l,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[p,T],[l,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[p,T],[l,v]],[/(nexus 9)/i],[u,[p,"HTC"],[l,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[u,/_/g," "],[l,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[p,"Acer"],[l,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[p,"Meizu"],[l,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,u,[l,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,u,[l,m]],[/(surface duo)/i],[u,[p,N],[l,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[p,"Fairphone"],[l,v]],[/(u304aa)/i],[u,[p,"AT&T"],[l,v]],[/\bsie-(\w*)/i],[u,[p,"Siemens"],[l,v]],[/\b(rct\w+) b/i],[u,[p,"RCA"],[l,m]],[/\b(venue[\d ]{2,7}) b/i],[u,[p,"Dell"],[l,m]],[/\b(q(?:mv|ta)\w+) b/i],[u,[p,"Verizon"],[l,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[p,"Barnes & Noble"],[l,m]],[/\b(tm\d{3}\w+) b/i],[u,[p,"NuVision"],[l,m]],[/\b(k88) b/i],[u,[p,"ZTE"],[l,m]],[/\b(nx\d{3}j) b/i],[u,[p,"ZTE"],[l,v]],[/\b(gen\d{3}) b.+49h/i],[u,[p,"Swiss"],[l,v]],[/\b(zur\d{3}) b/i],[u,[p,"Swiss"],[l,m]],[/\b((zeki)?tb.*\b) b/i],[u,[p,"Zeki"],[l,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],u,[l,m]],[/\b(ns-?\w{0,9}) b/i],[u,[p,"Insignia"],[l,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[p,"NextBook"],[l,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],u,[l,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],u,[l,v]],[/\b(ph-1) /i],[u,[p,"Essential"],[l,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[p,"Envizen"],[l,m]],[/\b(trio[-\w\. ]+) b/i],[u,[p,"MachSpeed"],[l,m]],[/\btu_(1491) b/i],[u,[p,"Rotor"],[l,m]],[/(shield[\w ]+) b/i],[u,[p,"Nvidia"],[l,m]],[/(sprint) (\w+)/i],[p,u,[l,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[p,N],[l,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[p,j],[l,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[p,j],[l,v]],[/smart-tv.+(samsung)/i],[p,[l,g]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[p,x],[l,g]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,k],[l,g]],[/(apple) ?tv/i],[p,[u,S+" TV"],[l,g]],[/crkey/i],[[u,C+"cast"],[p,A],[l,g]],[/droid.+aft(\w)( bui|\))/i],[u,[p,b],[l,g]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[p,L],[l,g]],[/(bravia[\w ]+)( bui|\))/i],[u,[p,M],[l,g]],[/(mitv-\w{5}) bui/i],[u,[p,U],[l,g]],[/Hbbtv.*(technisat) (.*);/i],[p,u,[l,g]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,z],[u,z],[l,g]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,u,[l,_]],[/droid.+; (shield) bui/i],[u,[p,"Nvidia"],[l,_]],[/(playstation [345portablevi]+)/i],[u,[p,M],[l,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[p,N],[l,_]],[/((pebble))app/i],[p,u,[l,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[p,S],[l,E]],[/droid.+; (glass) \d/i],[u,[p,A],[l,E]],[/droid.+; (wt63?0{2,3})\)/i],[u,[p,j],[l,E]],[/(quest( 2| pro)?)/i],[u,[p,V],[l,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[l,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[l,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[f,Y,q]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[f,Y,q]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,F],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,f],[/\(bb(10);/i],[f,[d,w]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[d,O+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[d,C+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,B],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,f],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,f]]},X=function e(t,_){if(typeof t===a&&(_=t,t=r),!(this instanceof e))return new e(t,_).getResult();var g=typeof n!==o&&n.navigator?n.navigator:r,E=t||(g&&g.userAgent?g.userAgent:""),y=g&&g.userAgentData?g.userAgentData:r,b=_?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(J,_):J;return this.getBrowser=function(){var e={};return e[d]=r,e[f]=r,K.call(e,E,b.browser),e[c]=function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e[f]),g&&g.brave&&typeof g.brave.isBrave==i&&(e[d]="Brave"),e},this.getCPU=function(){var e={};return e[h]=r,K.call(e,E,b.cpu),e},this.getDevice=function(){var e={};return e[p]=r,e[u]=r,e[l]=r,K.call(e,E,b.device),!e[l]&&y&&y.mobile&&(e[l]=v),"Macintosh"==e[u]&&g&&typeof g.standalone!==o&&g.maxTouchPoints&&g.maxTouchPoints>2&&(e[u]="iPad",e[l]=m),e},this.getEngine=function(){var e={};return e[d]=r,e[f]=r,K.call(e,E,b.engine),e},this.getOS=function(){var e={};return e[d]=r,e[f]=r,K.call(e,E,b.os),!e[d]&&y&&"Unknown"!=y.platform&&(e[d]=y.platform.replace(/chrome os/i,B).replace(/macos/i,F)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return E},this.setUA=function(e){return E=typeof e===s&&e.length>350?z(e,350):e,this},this.setUA(E),this};X.VERSION="0.7.34",X.BROWSER=W([d,f,c]),X.CPU=W([h]),X.DEVICE=W([u,p,l,_,v,g,m,E,y]),X.ENGINE=X.OS=W([d,f]),e.exports&&(t=e.exports=X),t.UAParser=X;var Q=typeof n!==o&&(n.jQuery||n.Zepto);if(Q&&!Q.ua){var Z=new X;Q.ua=Z.getResult(),Q.ua.get=function(){return Z.getUA()},Q.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var n in t)Q.ua[n]=t[n]}}}("object"==typeof window?window:ae)}(Yl,Yl.exports);var ql,Jl=new(se(Yl.exports)),Xl=Jl.getResult(),Ql=null;function Zl(e){if(!Ql){e&&Jl.setUA(e);var t=function(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return Gl.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Gl.CHROME;case"Safari":case"Mobile Safari":return Gl.SAFARI;case"Edge":return Gl.EDGE;case"Firefox":return Gl.FIREFOX;case"QQBrowser":return Gl.QQ;case"Opera":return Gl.OPERA;case"WeChat":return Gl.WECHAT;default:return e.browser.name||""}}(Xl=Jl.getResult()),n=function(e){return("Blink"===e.engine.name?e.engine.version||"":e.browser.version||"").split(".")[0]}(Xl),r=function(e){return"Windows"===e.os.name?e.os.version?e.os.name+" "+e.os.version:e.os.name:e.os.name||""}(Xl),i=Xl.os.version;if(!(t&&n&&r&&i))return{name:t,version:n,os:r,osVersion:i};Ql={name:t,version:n,os:r,osVersion:i}}return Ql}function $l(){return Zl().os}function ep(){var e=Zl();return"".concat(e.os," ").concat(e.osVersion)}function tp(){var e=Zl();return!!("WebKit"===Xl.engine.name&&e.os===Wl.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==Gl.SAFARI||op()&&e.name!==Gl.SAFARI)}function np(){return Zl().name===Gl.CHROME}function rp(){return Zl().name===Gl.SAFARI}function ip(){return Zl().name===Gl.FIREFOX}function op(){return Zl().os===Wl.IOS}function ap(e){var t=Zl();return!(t.name!==Gl.CHROME||!t.osVersion)&&Number(t.version)>=e}function sp(e){var t=Zl();return!(t.name!==Gl.EDGE||!t.osVersion)&&Number(t.version)>=e}function cp(e){var t=Zl();return!(t.name!==Gl.OPERA||!t.osVersion)&&Number(t.version)>=e}function up(){var e=Zl();return!(e.name!==Gl.CHROME||!e.osVersion)&&Number(e.version)<=90}function dp(){var e=Zl();if(e.os!==Wl.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function lp(){var e=Zl();if(e.os!==Wl.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 15===Number(t[0])}function pp(){var e=Zl();if(e.os!==Wl.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 16===Number(t[0])}function fp(){var e=Zl();if(e.os!==Wl.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function hp(){return rp()&&navigator.maxTouchPoints>0}function _p(){return Zl().name===Gl.WECHAT}function vp(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function mp(){var e=Zl();return e.name!==Gl.EDGE&&e.name!==Gl.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function gp(){return $l()===Wl.ANDROID}function Ep(){var e=Zl();return gp()&&(e.name===Gl.CHROME||e.name===Gl.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED"}(ql||(ql={}));var yp,bp,Sp=function(e){function t(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0;return uc(l(n=e.call(this,r)||this),"code",void 0),uc(l(n),"message",void 0),uc(l(n),"data",void 0),uc(l(n),"name","AgoraRTCException"),n.code=t,n.message="AgoraRTCError ".concat(n.code,": ").concat(r),n.data=i,n}p(t,e);var n=t.prototype;return n.toString=function(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)},n.print=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return"error"===e&&(t||console).error(this.toString()),"warning"===e&&(t||console).warn(this.toString()),this},n.throw=function(e){throw this.print("error",e),this},t}(f(Error));function Tp(e,t){if("boolean"!=typeof e)throw new Sp(ql.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function wp(e,t,n){if(!Or(n).call(n,e))throw new Sp(ql.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function Rp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<n||e>r||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!function(e){return"number"==typeof e&&e%1==0}(e))throw new Sp(ql.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function Cp(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new Sp(ql.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));void 0!==e.min&&Rp(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&Rp(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&Rp(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&Rp(e.ideal,"".concat(t,".ideal"),1,1/0)}else Rp(e,t,1,1/0)}function Op(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new Sp(ql.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!kp(e,n,r,i))throw new Sp(ql.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))}function Ap(e,t){if(!Array.isArray(e))throw new Sp(ql.INVALID_PARAMS,"".concat(t," should be an array"))}function Ip(e){return null==e}function kp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=n&&e.length>=t&&(!r||function(e){if("string"!=typeof e)return!1;for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}(e))}function Np(e,t,n){if("getBigUint64"in DataView.prototype)return e.getBigUint64(t,n);var r=e.getUint32(t,n),i=e.getUint32(t+4,n),o=Number(!!n),a=Number(!n);return BigInt(r*a+i*o)<<BigInt(32)|BigInt(r*o+i*a)}function Pp(e,t,n,r){if("setBigUint64"in DataView.prototype)return e.setBigUint64(t,n,r);var i=Number(n>>BigInt(32)),o=Number(n&BigInt(4294967295));r?(e.setUint32(t+4,i,r),e.setUint32(t,o,r)):(e.setUint32(t,i,r),e.setUint32(t+4,o,r))}!function(e){e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE"}(yp||(yp={})),function(e){e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(bp||(bp={}));var Dp=new(function(){return function(){var e=this;uc(this,"_clientSize",null),uc(this,"getClientWidth",(function(){return document.documentElement?document.documentElement.clientWidth:document.body.clientWidth})),uc(this,"getClientHeight",(function(){return document.documentElement?document.documentElement.clientHeight:document.body.clientHeight})),uc(this,"getStyle",(function(e){return window.getComputedStyle(e,null)})),uc(this,"checkCssVisibleProperty",(function(t){var n,r=!0,i=e.getStyle(t),o=i.display,a=i.visibility,s=i.opacity,c=i.filter;return("none"===o||Or(n=["hidden","collapse"]).call(n,a)||Number(s)<.1)&&(r=!1),!!r&&(c&&c.split(" ").filter((function(e){var t,n=e.split("(")[0];return Or(t=["brightness","blur","opacity"]).call(t,n)})).map((function(e){var t=e.split(/\(|\)/),n=t[0],r=t[1];return[n,Number(r.match(/^[0-9\.]+/))]})).forEach((function(e){var t=e[0],n=e[1];switch(t){case"brightness":(n<.1||n>3)&&(r=!1);break;case"blur":n>3&&(r=!1);break;case"opacity":n<.1&&(r=!1)}})),r)})),uc(this,"checkPropertyUpToAllParentNodes",(function(e,t){for(var n=!0,r=!0,i=function(e){return t(e)},o=e;o&&r;)i(o)||(n=!1,r=!1),(o=o.parentElement)||(r=!1);return n})),uc(this,"checkActualCssVisibleIncludeInherit",(function(t){return e.checkPropertyUpToAllParentNodes(t,e.checkCssVisibleProperty)})),uc(this,"getSizeAboutClient",(function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height,o=n.left,a=n.right,s=n.top,c=n.bottom,u=e.getClientWidth(),d=e.getClientHeight();return{width:r,height:i,left:o,right:a,top:s,bottom:c,clientWidth:u,clientHeight:d,clientMin:Math.min(u,d)}})),uc(this,"checkActualSize",(function(){var t=e._clientSize,n=t.width,r=t.height,i=t.clientMin;return e.checkSizeIsVisible(n,r,i)})),uc(this,"elementFromPoint",(function(e,t){return document.elementFromPoint?document.elementFromPoint(e,t):null})),uc(this,"checkCoverForAPoint",(function(t,n,r){var i=e.elementFromPoint(t,n);return null!==i&&i!==r})),uc(this,"getPointPositionList",(function(){for(var t=e._clientSize,n=t.width,r=t.height,i=t.left,o=t.top,a=n/6,s=r/6,c=[],u=Math.pow(10,6),d=0;d<5;d++)for(var l=0;l<5;l++){var p=(i*u+(0===d?.1:4===d?(a*d*u-1e5)/u:a*d)*u)/u,f=(o*u+(0===l?.1:4===l?(s*l*u-1e5)/u:s*l)*u)/u;c.push({x:p,y:f})}return[].concat(c)})),uc(this,"checkElementCover",(function(t){return e.getPointPositionList().map((function(n){return e.checkCoverForAPoint(n.x,n.y,t)})).filter((function(e){return!!e})).length>6})),uc(this,"checkSizeIsVisible",(function(e,t,n){return(e>50||n/e<=10)&&(t>50||n/t<=10)})),uc(this,"checkSizeOfPartInClient",(function(){var t,n,r=e._clientSize,i=r.left,o=r.right,a=r.top,s=r.bottom,c=r.clientHeight,u=r.clientWidth,d=r.clientMin;if(i<0)t=0;else{if(!(i<u))return!1;t=i}if(o<0)return!1;if(a<0)n=0;else{if(!(a<c))return!1;n=a}if(s<0)return!1;var l=(o<u?o:u)-t,p=(s<c?s:c)-n;return e.checkSizeIsVisible(l,p,d)})),uc(this,"returnHiddenResult",(function(t){return e._clientSize=null,{visible:!1,reason:t}})),uc(this,"checkOneElementVisible",(function(t){if(t instanceof HTMLElement){if(e.checkElementIsMountedOnDom(t)){if(e.checkActualCssVisibleIncludeInherit(t)){if(e._clientSize=e.getSizeAboutClient(t),e.checkElementCover(t))return e.returnHiddenResult(yp.COVERED);var n=e.checkActualSize(),r=e.checkSizeOfPartInClient();return n&&!r?e.returnHiddenResult(yp.POSITION):n?(e._clientSize=null,{visible:!0}):e.returnHiddenResult(yp.SIZE)}return e.returnHiddenResult(yp.STYLE)}return e.returnHiddenResult(bp.UNMOUNTED)}return e.returnHiddenResult(bp.INVALID_HTML_ELEMENT)})),uc(this,"checkElementIsMountedOnDom",(function(t){return e.checkPropertyUpToAllParentNodes(t,(function(e){return"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement}))}))}}());function xp(e){return(new TextEncoder).encode(e)}var Lp,Mp,Up,jp,Vp,Bp,Fp,Wp,Gp=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},Hp=function(){var e=d(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){for(var t=window.atob("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),n=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}(),e.next=3,window.crypto.subtle.importKey("spki",n,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]);case 3:return r=e.sent,i=xp(t),e.next=7,window.crypto.subtle.encrypt({name:"RSA-OAEP"},r,i);case 7:return o=e.sent,e.abrupt("return",function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}(new Uint8Array(o)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zp=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){var n="";return new Uint8Array(e).forEach((function(e){n+=e.toString(t).padStart(2,"0")})),n},e.next=3,crypto.subtle.digest("SHA-256",xp(t));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,16));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kp=function(){function e(){uc(this,"_events",{}),uc(this,"addListener",this.on)}var t=e.prototype;return t.getListeners=function(e){return this._events[e]?this._events[e].map((function(e){return e.listener})):[]},t.on=function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})},t.once=function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})},t.off=function(e,t){if(this._events[e]){var n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}},t.removeAllListeners=function(e){e?delete this._events[e]:this._events={}},t.emit=function(e){this._events[e]||(this._events[e]=[]);for(var t=this._events[e].map((function(e){return e})),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o+=1){var a=t[o];a.once&&this.off(e,a.listener),a.listener.apply(this,r||[])}},t.safeEmit=function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];[].concat(this._events[e]||[]).forEach((function(n){n.once&&t.off(e,n.listener);try{n.listener.apply(t,r)}catch(n){console.error("safeEmit event:".concat(e," error ").concat(null==n?void 0:n.toString()))}}))},t._indexOfListener=function(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1},e}(),Yp=null;function qp(){if(Yp)return Yp;if(window.electron)return Yp=window.electron;if(!window.require)return null;try{return Yp=window.require("electron")}catch(e){return null}}function Jp(e){return Rp(e.timeout,"config.timeout",0,1e5),Rp(e.timeoutFactor,"config.timeoutFactor",0,100,!1),Rp(e.maxRetryCount,"config.maxRetryConfig",0,1/0),Rp(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function Xp(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((function(e){if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function Qp(e){return Op(e.turnServerURL,"turnServerURL"),Op(e.username,"username"),Op(e.password,"password"),e.udpport&&Rp(e.udpport,"udpport",1,99999,!0),e.forceturn&&Tp(e.forceturn,"forceturn"),e.security&&Tp(e.security,"security"),e.tcpport&&Rp(e.tcpport,"tcpport",1,99999,!0),!0}function Zp(e){return void 0!==e.level&&wp(e.level,"level",[1,2,3]),void 0!==e.delay&&Rp(e.delay,"delay",0,3e3,!0),!0}function $p(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===e.getListeners(t).length?Vl.reject(new Sp(ql.UNEXPECTED_ERROR,"can not emit promise")):new Vl((function(n,i){e.emit.apply(e,[t].concat(r,[n,i]))}))}function ef(e,t){if(0===e.getListeners(t).length)return Vl.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return $p.apply(void 0,[e,t].concat(r))}function tf(e,t){if(0===e.getListeners(t).length)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return nf.apply(void 0,[e,t].concat(r))}function nf(e,t){for(var n=null,r=null,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if(e.emit.apply(e,[t].concat(o,[function(e){n=e},function(e){r=e}])),null!==r)throw r;if(null===n)throw new Sp(ql.UNEXPECTED_ERROR,"handler is not sync");return n}!function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.DATACHANNEL_FAILBACK="Client._datachannelFailback",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",e.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload"}(Lp||(Lp={})),function(e){e.TRACER="tracer"}(Mp||(Mp={})),function(e){e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(Up||(Up={})),function(e){e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.FALLBACK="FALLBACK",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE"}(jp||(jp={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change"}(Vp||(Vp={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(Bp||(Bp={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Fp||(Fp={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Wp||(Wp={}));var rf=new(function(e){function t(){var t;return uc(l(t=e.call(this)||this),"_moduleName","network-indicator"),uc(l(t),"_networkState",Fp.ONLINE),uc(l(t),"onlineWaiter",void 0),window.addEventListener("online",(function(){t.networkState=Fp.ONLINE})),window.addEventListener("offline",(function(){t.networkState=Fp.OFFLINE})),t}return p(t,e),s(t,[{key:"networkState",get:function(){return this._networkState},set:function(e){var t=this;this.emit(Wp.NETWORK_STATE_CHANGE,e,this._networkState),e===Fp.ONLINE?this.emit(Wp.ONLINE):e===Fp.OFFLINE&&(this.onlineWaiter=new Vl((function(e){t.once(Wp.ONLINE,(function(){t.onlineWaiter=void 0,e(Fp.ONLINE)}))})),this.emit(Wp.OFFLINE)),this._networkState=e}},{key:"isOnline",get:function(){return this._networkState===Fp.ONLINE}}]),t}(Kp));function of(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function af(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?of(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):of(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sf(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function cf(e){var t=[];return e.forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t}function uf(e){void 0!==Vl?Vl.resolve().then(e):setTimeout(e,0)}function df(e){return JSON.parse(JSON.stringify(e))}function lf(e){try{return df(e)}catch(t){return e}}var pf={};function ff(e,t){pf[t]||(pf[t]=!0,e())}function hf(e){for(var t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}function _f(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function vf(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function mf(e){var t=0;return/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData),e.forEach((function(e){t+="string"==typeof e?vf(e):e.size})),t+138}function gf(e){var t=new Sp(ql.TIMEOUT,"timeout");return new Vl((function(n,r){window.setTimeout((function(){return r(t)}),e)}))}function Ef(e){return new Vl((function(t){window.setTimeout(t,e)}))}function yf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0,n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+yf(e-n.length,"")}function bf(){return yf(32,"").toUpperCase()}var Sf=function(){},Tf=new(function(){function e(){uc(this,"fnMap",new Map)}return e.prototype.throttleByKey=function(e,t,n,r){for(var i=this,o=arguments.length,a=new Array(o>4?o-4:0),s=4;s<o;s++)a[s-4]=arguments[s];if(this.fnMap.has(t)){var c=this.fnMap.get(t);if(c.threshold!==n){c.fn.apply(c,c.args),clearTimeout(c.timer);var u=window.setTimeout((function(){var e=i.fnMap.get(t);e&&e.fn.apply(e,e.args),i.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:u,args:a,skipFn:r})}else c.skipFn&&c.skipFn.apply(c,c.args),this.fnMap.set(t,af(af({},c),{},{fn:e,args:a,skipFn:r}))}else{var d=window.setTimeout((function(){var e=i.fnMap.get(t);e&&e.fn.apply(e,e.args),i.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:d,args:a,skipFn:r})}},e}()),wf=Tf.throttleByKey.bind(Tf);function Rf(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}function Cf(e,t){if(!Rf(e)||!Rf(t))return t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){for(var n=[].concat(e),r=0;r<t.length;r++)n[r]=Cf(e[r],t[r]);return n}var i=af({},e);for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(Object.prototype.hasOwnProperty.call(e,o)?i[o]=Cf(e[o],t[o]):i[o]=t[o]);return i}var Of=1,Af=console,If=function(){function e(e){uc(this,"lockingPromise",Vl.resolve()),uc(this,"locks",0),uc(this,"name",""),uc(this,"lockId",void 0),this.lockId=Of++,e&&(this.name=e),Af.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}return e.setLogger=function(e){Af=e},e.prototype.lock=function(e){var t,n=this;this.locks+=1,Af.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:""));var r=new Vl((function(r){t=function(){n.locks-=1,Af.debug("[lock-".concat(n.name,"-").concat(n.lockId,"] is not locked, current queue ").concat(n.locks,". ").concat("string"==typeof e?e:"")),r()}})),i=this.lockingPromise.then((function(){return t}));return this.lockingPromise=this.lockingPromise.then((function(){return r})),i},s(e,[{key:"isLocked",get:function(){return this.locks>0}}]),e}();function kf(e,t){return function(n,r,i){var o=i.value;if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return i.value=d(c().mark((function n(){var i,a,s,u,d,l=arguments;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this[t]){n.next=3;break}throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));case 3:return n.next=5,i.lock("From ".concat(e,".").concat(r));case 5:for(a=n.sent,n.prev=6,s=l.length,u=new Array(s),d=0;d<s;d++)u[d]=l[d];return n.next=10,o.apply(this,u);case 10:return n.abrupt("return",n.sent);case 11:return n.prev=11,a(),n.finish(11);case 14:case"end":return n.stop()}}),n,this,[[6,,11,14]])}))),i}}var Nf={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Pf(e,t){var n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function Df(e,t,n,r){var i=Object.assign({},Nf,r),o=i.timeout,a=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){return new Vl((function(t){window.setTimeout(t,e)}))}(o);case 2:o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=!1,u=new Vl(function(){var r=d(c().mark((function r(o,u){var d,l;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=t||function(){return!1},n=n||function(){return!0},d=0;case 2:if(!(d<i.maxRetryCount)){r.next=28;break}if(!s){r.next=5;break}return r.abrupt("return",u(new Sp(ql.OPERATION_ABORTED)));case 5:return r.prev=5,r.next=8,e();case 8:if(l=r.sent,t(l,d)){r.next=11;break}return r.abrupt("return",o(l));case 11:if(d+1!==i.maxRetryCount){r.next=13;break}return r.abrupt("return",o(l));case 13:return r.next=15,a();case 15:r.next=25;break;case 17:if(r.prev=17,r.t0=r.catch(5),n(r.t0,d)){r.next=21;break}return r.abrupt("return",u(r.t0));case 21:if(d+1!==i.maxRetryCount){r.next=23;break}return r.abrupt("return",u(r.t0));case 23:return r.next=25,a();case 25:d+=1,r.next=2;break;case 28:case"end":return r.stop()}}),r,null,[[5,17]])})));return function(e,t){return r.apply(this,arguments)}}());return u.cancel=function(){return s=!0},u}var xf=TypeError,Lf=function(e){return function(t,n,r,i){Dt(n);var o=Yt(t),a=rt(o),s=nr(o),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw xf("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},Mf=[Lf(!1),Lf(!0)][0];Yn({target:"Array",proto:!0,forced:!Iu&&Tt>79&&Tt<83||!yc("reduce")},{reduce:function(e){var t=arguments.length;return Mf(this,e,t,t>1?arguments[1]:void 0)}});var Uf,jf=ar("Array").reduce,Vf=Array.prototype,Bf=se((function(e){var t=e.reduce;return e===Vf||Ae(Vf,e)&&t===Vf.reduce?jf:t})),Ff=function(){function e(e){uc(this,"input",[]),uc(this,"size",void 0),this.size=e}var t=e.prototype;return t.add=function(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)},t.mean=function(){var e;return 0===this.input.length?0:Bf(e=this.input).call(e,(function(e,t){return e+t}))/this.input.length},e}(),Wf={exports:{}},Gf=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},Hf=Object.prototype.toString,zf=(Uf=Object.create(null),function(e){var t=Hf.call(e);return Uf[t]||(Uf[t]=t.slice(8,-1).toLowerCase())});function Kf(e){return e=e.toLowerCase(),function(t){return zf(t)===e}}function Yf(e){return Array.isArray(e)}function qf(e){return void 0===e}var Jf=Kf("ArrayBuffer");function Xf(e){return null!==e&&"object"==typeof e}function Qf(e){if("object"!==zf(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var Zf=Kf("Date"),$f=Kf("File"),eh=Kf("Blob"),th=Kf("FileList");function nh(e){return"[object Function]"===Hf.call(e)}var rh=Kf("URLSearchParams");function ih(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Yf(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var oh,ah=(oh="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return oh&&e instanceof oh}),sh={isArray:Yf,isArrayBuffer:Jf,isBuffer:function(e){return null!==e&&!qf(e)&&null!==e.constructor&&!qf(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||Hf.call(e)===t||nh(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Jf(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Xf,isPlainObject:Qf,isUndefined:qf,isDate:Zf,isFile:$f,isBlob:eh,isFunction:nh,isStream:function(e){return Xf(e)&&nh(e.pipe)},isURLSearchParams:rh,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:ih,merge:function e(){var t={};function n(n,r){Qf(t[r])&&Qf(n)?t[r]=e(t[r],n):Qf(n)?t[r]=e({},n):Yf(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)ih(arguments[r],n);return t},extend:function(e,t,n){return ih(t,(function(t,r){e[r]=n&&"function"==typeof t?Gf(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,i,o,a={};t=t||{};do{for(i=(r=Object.getOwnPropertyNames(e)).length;i-- >0;)a[o=r[i]]||(t[o]=e[o],a[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:zf,kindOfTest:Kf,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(qf(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:ah,isFileList:th},ch=sh;function uh(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var dh,lh,ph=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(ch.isURLSearchParams(t))r=t.toString();else{var i=[];ch.forEach(t,(function(e,t){null!=e&&(ch.isArray(e)?t+="[]":e=[e],ch.forEach(e,(function(e){ch.isDate(e)?e=e.toISOString():ch.isObject(e)&&(e=JSON.stringify(e)),i.push(uh(t)+"="+uh(e))})))})),r=i.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function fh(){this.handlers=[]}function hh(){if(lh)return dh;lh=1;var e=sh;function t(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}e.inherits(t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var n=t.prototype,r={};return["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){r[e]={value:e}})),Object.defineProperties(t,r),Object.defineProperty(n,"isAxiosError",{value:!0}),t.from=function(r,i,o,a,s,c){var u=Object.create(n);return e.toFlatObject(r,u,(function(e){return e!==Error.prototype})),t.call(u,r.message,i,o,a,s),u.name=r.name,c&&Object.assign(u,c),u},dh=t}fh.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},fh.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},fh.prototype.forEach=function(e){sh.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var _h,vh,mh,gh,Eh,yh,bh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};function Sh(){if(vh)return _h;vh=1;var e=sh;return _h=function(t,n){n=n||new FormData;var i=[];function o(t){return null===t?"":e.isDate(t)?t.toISOString():e.isArrayBuffer(t)||e.isTypedArray(t)?"function"==typeof Blob?new Blob([t]):r.from(t):t}return function t(r,a){if(e.isPlainObject(r)||e.isArray(r)){if(-1!==i.indexOf(r))throw Error("Circular reference detected in "+a);i.push(r),e.forEach(r,(function(r,i){if(!e.isUndefined(r)){var s,c=a?a+"."+i:i;if(r&&!a&&"object"==typeof r)if(e.endsWith(i,"{}"))r=JSON.stringify(r);else if(e.endsWith(i,"[]")&&(s=e.toArray(r)))return void s.forEach((function(t){!e.isUndefined(t)&&n.append(c,o(t))}));t(r,c)}})),i.pop()}else n.append(a,o(r))}(t),n}}var Th,wh,Rh,Ch,Oh,Ah,Ih,kh,Nh,Ph,Dh,xh,Lh=function(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t};function Mh(){if(Ah)return Oh;Ah=1;var e=hh();function t(t){e.call(this,null==t?"canceled":t,e.ERR_CANCELED),this.name="CanceledError"}return sh.inherits(t,e,{__CANCEL__:!0}),Oh=t}var Uh=sh,jh=function(e,t){sh.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},Vh=hh(),Bh=Sh(),Fh={"Content-Type":"application/x-www-form-urlencoded"};function Wh(e,t){!Uh.isUndefined(e)&&Uh.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Gh,Hh={transitional:bh,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==n&&"[object process]"===Object.prototype.toString.call(n))&&(Gh=function(){if(Ph)return Nh;Ph=1;var e=sh,t=function(){if(gh)return mh;gh=1;var e=hh();return mh=function(t,n,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?n(new e("Request failed with status code "+r.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}}(),n=function(){if(yh)return Eh;yh=1;var e=sh;return Eh=e.isStandardBrowserEnv()?{write:function(t,n,r,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(n)),e.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),e.isString(i)&&s.push("path="+i),e.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}}(),r=ph,i=Lh,o=function(){if(wh)return Th;wh=1;var e=sh,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Th=function(n){var r,i,o,a={};return n?(e.forEach(n.split("\n"),(function(n){if(o=n.indexOf(":"),r=e.trim(n.substr(0,o)).toLowerCase(),i=e.trim(n.substr(o+1)),r){if(a[r]&&t.indexOf(r)>=0)return;a[r]="set-cookie"===r?(a[r]?a[r]:[]).concat([i]):a[r]?a[r]+", "+i:i}})),a):a}}(),a=function(){if(Ch)return Rh;Ch=1;var e=sh;return Rh=e.isStandardBrowserEnv()?function(){var t,n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var t=e;return n&&(r.setAttribute("href",t),t=r.href),r.setAttribute("href",t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=i(window.location.href),function(n){var r=e.isString(n)?i(n):n;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}}(),s=bh,c=hh(),u=Mh(),d=(kh||(kh=1,Ih=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}),Ih);return Nh=function(l){return new Promise((function(p,f){var h,_=l.data,v=l.headers,m=l.responseType;function g(){l.cancelToken&&l.cancelToken.unsubscribe(h),l.signal&&l.signal.removeEventListener("abort",h)}e.isFormData(_)&&e.isStandardBrowserEnv()&&delete v["Content-Type"];var E=new XMLHttpRequest;if(l.auth){var y=l.auth.username||"",b=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";v.Authorization="Basic "+btoa(y+":"+b)}var S=i(l.baseURL,l.url);function T(){if(E){var e="getAllResponseHeaders"in E?o(E.getAllResponseHeaders()):null,n={data:m&&"text"!==m&&"json"!==m?E.response:E.responseText,status:E.status,statusText:E.statusText,headers:e,config:l,request:E};t((function(e){p(e),g()}),(function(e){f(e),g()}),n),E=null}}if(E.open(l.method.toUpperCase(),r(S,l.params,l.paramsSerializer),!0),E.timeout=l.timeout,"onloadend"in E?E.onloadend=T:E.onreadystatechange=function(){E&&4===E.readyState&&(0!==E.status||E.responseURL&&0===E.responseURL.indexOf("file:"))&&setTimeout(T)},E.onabort=function(){E&&(f(new c("Request aborted",c.ECONNABORTED,l,E)),E=null)},E.onerror=function(){f(new c("Network Error",c.ERR_NETWORK,l,E,E)),E=null},E.ontimeout=function(){var e=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",t=l.transitional||s;l.timeoutErrorMessage&&(e=l.timeoutErrorMessage),f(new c(e,t.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,l,E)),E=null},e.isStandardBrowserEnv()){var w=(l.withCredentials||a(S))&&l.xsrfCookieName?n.read(l.xsrfCookieName):void 0;w&&(v[l.xsrfHeaderName]=w)}"setRequestHeader"in E&&e.forEach(v,(function(e,t){void 0===_&&"content-type"===t.toLowerCase()?delete v[t]:E.setRequestHeader(t,e)})),e.isUndefined(l.withCredentials)||(E.withCredentials=!!l.withCredentials),m&&"json"!==m&&(E.responseType=l.responseType),"function"==typeof l.onDownloadProgress&&E.addEventListener("progress",l.onDownloadProgress),"function"==typeof l.onUploadProgress&&E.upload&&E.upload.addEventListener("progress",l.onUploadProgress),(l.cancelToken||l.signal)&&(h=function(e){E&&(f(!e||e&&e.type?new u:e),E.abort(),E=null)},l.cancelToken&&l.cancelToken.subscribe(h),l.signal&&(l.signal.aborted?h():l.signal.addEventListener("abort",h))),_||(_=null);var R=d(S);R&&-1===["http","https","file"].indexOf(R)?f(new c("Unsupported protocol "+R+":",c.ERR_BAD_REQUEST,l)):E.send(_)}))}}()),Gh),transformRequest:[function(e,t){if(jh(t,"Accept"),jh(t,"Content-Type"),Uh.isFormData(e)||Uh.isArrayBuffer(e)||Uh.isBuffer(e)||Uh.isStream(e)||Uh.isFile(e)||Uh.isBlob(e))return e;if(Uh.isArrayBufferView(e))return e.buffer;if(Uh.isURLSearchParams(e))return Wh(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,r=Uh.isObject(e),i=t&&t["Content-Type"];if((n=Uh.isFileList(e))||r&&"multipart/form-data"===i){var o=this.env&&this.env.FormData;return Bh(n?{"files[]":e}:e,o&&new o)}return r||"application/json"===i?(Wh(t,"application/json"),function(e,t,n){if(Uh.isString(e))try{return(0,JSON.parse)(e),Uh.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Hh.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||r&&Uh.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw Vh.from(e,Vh.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xh?Dh:(xh=1,Dh=null)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Uh.forEach(["delete","get","head"],(function(e){Hh.headers[e]={}})),Uh.forEach(["post","put","patch"],(function(e){Hh.headers[e]=Uh.merge(Fh)}));var zh,Kh,Yh=Hh;function qh(){return Kh?zh:(Kh=1,zh=function(e){return!(!e||!e.__CANCEL__)})}var Jh=sh,Xh=function(e,t,n){var r=this||Yh;return sh.forEach(n,(function(n){e=n.call(r,e,t)})),e},Qh=qh(),Zh=Mh();function $h(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Zh}var e_,t_,n_=sh,r_=function(e,t){t=t||{};var n={};function r(e,t){return n_.isPlainObject(e)&&n_.isPlainObject(t)?n_.merge(e,t):n_.isPlainObject(t)?n_.merge({},t):n_.isArray(t)?t.slice():t}function i(n){return n_.isUndefined(t[n])?n_.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function o(e){if(!n_.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return n_.isUndefined(t[n])?n_.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function s(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return n_.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||i,r=t(e);n_.isUndefined(r)&&t!==s||(n[e]=r)})),n};function i_(){return t_?e_:(t_=1,e_={version:"0.27.2"})}var o_=i_().version,a_=hh(),s_={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){s_[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var c_={};s_.transitional=function(e,t,n){function r(e,t){return"[Axios v"+o_+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,o){if(!1===e)throw new a_(r(i," has been removed"+(t?" in "+t:"")),a_.ERR_DEPRECATED);return t&&!c_[i]&&(c_[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var u_,d_,l_,p_,f_,h_,__=sh,v_=fh,m_=function(e){return $h(e),e.headers=e.headers||{},e.data=Xh.call(e,e.data,e.headers,e.transformRequest),e.headers=Jh.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Jh.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Yh.adapter)(e).then((function(t){return $h(e),t.data=Xh.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return Qh(t)||($h(e),t&&t.response&&(t.response.data=Xh.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},g_=r_,E_={assertOptions:function(e,t,n){if("object"!=typeof e)throw new a_("options must be an object",a_.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],c=void 0===s||a(s,o,e);if(!0!==c)throw new a_("option "+o+" must be "+c,a_.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new a_("Unknown option "+o,a_.ERR_BAD_OPTION)}},validators:s_},y_=E_.validators;function b_(e){this.defaults=e,this.interceptors={request:new v_,response:new v_}}b_.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=g_(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&E_.assertOptions(n,{silentJSONParsing:y_.transitional(y_.boolean),forcedJSONParsing:y_.transitional(y_.boolean),clarifyTimeoutError:y_.transitional(y_.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!i){var s=[m_,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(a),o=Promise.resolve(t);s.length;)o=o.then(s.shift(),s.shift());return o}for(var c=t;r.length;){var u=r.shift(),d=r.shift();try{c=u(c)}catch(e){d(e);break}}try{o=m_(c)}catch(e){return Promise.reject(e)}for(;a.length;)o=o.then(a.shift(),a.shift());return o},b_.prototype.getUri=function(e){e=g_(this.defaults,e);var t=Lh(e.baseURL,e.url);return ph(t,e.params,e.paramsSerializer)},__.forEach(["delete","get","head","options"],(function(e){b_.prototype[e]=function(t,n){return this.request(g_(n||{},{method:e,url:t,data:(n||{}).data}))}})),__.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(g_(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}b_.prototype[e]=t(),b_.prototype[e+"Form"]=t(!0)}));var S_=sh,T_=b_,w_=function e(t){var n=new T_(t),r=Gf(T_.prototype.request,n);return S_.extend(r,T_.prototype,n),S_.extend(r,n),r.create=function(n){return e(r_(t,n))},r}(Yh);w_.Axios=T_,w_.CanceledError=Mh(),w_.CancelToken=function(){if(d_)return u_;d_=1;var e=Mh();function t(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(t){r.reason||(r.reason=new e(t),n(r.reason))}))}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},t.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},t.source=function(){var e;return{token:new t((function(t){e=t})),cancel:e}},u_=t}(),w_.isCancel=qh(),w_.VERSION=i_().version,w_.toFormData=Sh(),w_.AxiosError=hh(),w_.Cancel=w_.CanceledError,w_.all=function(e){return Promise.all(e)},w_.spread=p_?l_:(p_=1,l_=function(e){return function(t){return e.apply(null,t)}}),w_.isAxiosError=function(){if(h_)return f_;h_=1;var e=sh;return f_=function(t){return e.isObject(t)&&!0===t.isAxiosError}}(),Wf.exports=w_,Wf.exports.default=w_;var R_,C_=se(Wf.exports);function O_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O_(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I_(e,t,n,r){return new Vl((function(i,o){t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),vf(t.data)):n&&(t.data.size?t.data.size:t.data instanceof FormData?mf(t.data):vf(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,C_.request(t).then((function(e){"string"==typeof e.data?vf(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?e.data.byteLength:vf(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((function(e){C_.isCancel(e)?o(new Sp(ql.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new Sp(ql.NETWORK_TIMEOUT,e.message)):e.response?o(new Sp(ql.NETWORK_RESPONSE_ERROR,e.response.status)):o(new Sp(ql.NETWORK_ERROR,e.message))}))}))}function k_(e,t){return N_.apply(this,arguments)}function N_(){return(N_=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Blob([n.data],{type:"buffer"}),e.next=3,I_(t,A_(A_({},n),{},{data:r,headers:{"Content-Type":"application/octet-stream"}}),!0);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P_,D_=function(){return void 0!==window.isSecureContext};function x_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x_(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL",e.SET_USE_P2P="SET_USE_P2P"}(P_||(P_={}));var M_=function(){function e(e,t,n,r){uc(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:n,clientId:r,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1,useP2P:!1}}var t=e.prototype;return t.dispatch=function(e){this.state=function(e,t){switch(t.type){case P_.SET_SESSION_ID:return L_(L_({},e),{},{sessionId:t.sessionId});case P_.SET_P2P_ID:return L_(L_({},e),{},{p2pId:t.p2pId});case P_.SET_UID:return L_(L_({},e),{},{uid:t.uid});case P_.SET_PUB_ID:return L_(L_({},e),{},{pubId:t.pubId});case P_.KEY_METRIC_CLIENT_CREATED:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{clientCreated:t.metric})});case P_.KEY_METRIC_JOIN_START:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{joinStart:t.metric})});case P_.AVOID_JOIN_START:return L_(L_({},e),{},{avoidJoinStart:t.avoidJoinStart});case P_.KEY_METRIC_JOIN_END:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{joinEnd:t.metric})});case P_.KEY_METRIC_REQUEST_AP_START:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{requestAPStart:t.metric})});case P_.KEY_METRIC_REQUEST_AP_END:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{requestAPEnd:t.metric})});case P_.KEY_METRIC_JOIN_GATEWAY_START:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case P_.KEY_METRIC_JOIN_GATEWAY_END:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case P_.KEY_METRIC_PEER_CONNECTION_START:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case P_.KEY_METRIC_PEER_CONNECTION_END:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case P_.KEY_METRIC_DESCRIPTION_START:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{descriptionStart:t.metric})});case P_.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case P_.KEY_METRIC_ICE_CONNECTION_END:return L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case P_.KEY_METRIC_PUBLISH:var n=e.keyMetrics.publish,r=n.findIndex((function(e){return e.trackId===t.metric.trackId}));return-1!==r?(n[r]=L_(L_({},n[r]),t.metric),L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{publish:[].concat(n)})})):L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{publish:[].concat(e.keyMetrics.publish,[t.metric])})});case P_.KEY_METRIC_SUBSCRIBE:var i=e.keyMetrics.subscribe,o=i.findIndex((function(e){return e.userId===t.metric.userId&&e.type===t.metric.type}));return-1!==o?(i[o]=L_(L_({},i[o]),t.metric),L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{subscribe:[].concat(i)})})):L_(L_({},e),{},{keyMetrics:L_(L_({},e.keyMetrics),{},{subscribe:[].concat(e.keyMetrics.subscribe,[t.metric])})});case P_.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case P_.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[].concat(e.joinChannelServiceRecords,[t.record]):(e.joinChannelServiceRecords[t.index]=L_(L_({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[].concat(e.joinChannelServiceRecords)),e;case P_.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case P_.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case P_.SET_USE_DATACHANNEL:return L_(L_({},e),{},{useDataChannel:t.val});case P_.SET_USE_P2P:return L_(L_({},e),{},{useP2P:t.val});default:return e}}(this.state,e)},t.clientCreated=function(){this.dispatch({type:P_.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})},t.joinStart=function(){this.dispatch({type:P_.KEY_METRIC_JOIN_START,metric:Date.now()})},t.joinEnd=function(){this.dispatch({type:P_.KEY_METRIC_JOIN_END,metric:Date.now()})},t.requestAPStart=function(){this.dispatch({type:P_.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})},t.requestAPEnd=function(){this.dispatch({type:P_.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})},t.joinGatewayStart=function(){this.dispatch({type:P_.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})},t.joinGatewayEnd=function(){this.dispatch({type:P_.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})},t.peerConnectionStart=function(){this.dispatch({type:P_.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})},t.peerConnectionEnd=function(){this.dispatch({type:P_.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})},t.descriptionStart=function(){this.dispatch({type:P_.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})},t.signalChannelOpen=function(){this.dispatch({type:P_.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})},t.iceConnectionEnd=function(){this.dispatch({type:P_.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})},t.publish=function(e,t,n,r){this.dispatch({type:P_.KEY_METRIC_PUBLISH,metric:L_(L_({trackId:e,type:t},n&&{publishStart:n}),r&&{publishEnd:r})})},t.subscribe=function(e,t,n,r,i,o,a){this.dispatch({type:P_.KEY_METRIC_SUBSCRIBE,metric:L_(L_(L_(L_(L_({userId:e,type:t},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),i&&{firstFrame:i}),o&&{streamAdded:o}),a&&{firstDecoded:a})})},t.massSubscribe=function(e,t,n,r){var i=this;e.forEach((function(e){i.dispatch({type:P_.KEY_METRIC_SUBSCRIBE,metric:L_(L_(L_({userId:e.userId,type:e.type},t&&{subscribeStart:t}),n&&{subscribeEnd:n}),r&&{firstFrame:r})})}))},t.recordJoinChannelService=function(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((function(e){return e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")})));try{return"number"!=typeof t?(this.dispatch({type:P_.RECORD_JOIN_CHANNEL_SERVICE,record:L_(L_({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:P_.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}},t.resetJoinChannelServiceRecords=function(){this.dispatch({type:P_.RESET_JOIN_CHANNEL_SERVICE_RECORDS})},t.resetKeyMetrics=function(){this.dispatch({type:P_.RESET_KEY_METRICS})},s(e,[{key:"sessionId",get:function(){return this.state.sessionId},set:function(e){this.dispatch({type:P_.SET_SESSION_ID,sessionId:e})}},{key:"codec",get:function(){return this.state.codec},set:function(e){this.state.codec=e}},{key:"audioCodec",get:function(){return this.state.audioCodec}},{key:"clientId",get:function(){return this.state.clientId}},{key:"p2pId",get:function(){return this.state.p2pId},set:function(e){this.dispatch({type:P_.SET_P2P_ID,p2pId:e})}},{key:"dcId",get:function(){return this.state.dcId},set:function(e){this.dispatch({type:P_.SET_DC_ID,dcId:e})}},{key:"uid",get:function(){return this.state.uid},set:function(e){this.dispatch({type:P_.SET_UID,uid:e})}},{key:"pubId",get:function(){return this.state.pubId},set:function(e){this.dispatch({type:P_.SET_PUB_ID,pubId:e})}},{key:"cloudProxyServerMode",get:function(){return this.state.cloudProxyServerMode},set:function(e){this.dispatch({type:P_.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}},{key:"useDataChannel",get:function(){return this.state.useDataChannel},set:function(e){this.dispatch({type:P_.SET_USE_DATACHANNEL,val:e})}},{key:"useP2P",get:function(){return this.state.useP2P},set:function(e){this.dispatch({type:P_.SET_USE_P2P,val:e})}},{key:"keyMetrics",get:function(){return this.state.keyMetrics}},{key:"joinChannelServiceRecords",get:function(){try{return this.state.joinChannelServiceRecords}catch(e){return[]}}},{key:"avoidJoinStart",get:function(){return this.state.avoidJoinStart},set:function(e){this.dispatch({type:P_.AVOID_JOIN_START,avoidJoinStart:e})}}]),e}(),U_=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;var t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){var n=t[1],r=t[2];return"".concat(n,".").concat(r)}var i=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(i&&i[1]&&i[2]){var o=i[1],a=i[2];return"".concat(o,".").concat(100*(Number(a)+1))}return"4.0.0.999"}("4.19.3"),j_=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}(),V_="v4.19.3-0-gb2ca8ca7(11/2/2023, 2:57:33 PM)",B_={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:100,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,DISABLE_FEC:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,RTM2_FLAG:void 0,AP_RTM:!1,ENABLE_DATASTREAM_2:!1,DATASTREAM_MAX_RETRANSMITS:10,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_INSTANT_VIDEO:!1,ENABLE_NTP_REPORT:!1,USE_XR:!1,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:1e4,P2P:!1,SHOW_P2P_LOG:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[]};function F_(e,t,n){var r,i;Or(r=Object.keys(B_)).call(r,e)&&(!n&&Or(i=Object.keys(z_)).call(i,e)||(B_[e]=t))}function W_(e){return B_[e]}var G_,H_,z_={};!function(e){e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1"}(G_||(G_={})),function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"}(H_||(H_={}));var K_=new(function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.reportLogUploadError=function(e){this.emit("REPORT_LOG_UPLOAD",e)},t}(Kp)),Y_=function(){function e(e){uc(this,"logger",void 0),uc(this,"prefixLists",[]),this.logger=e}var t=e.prototype;return t.debug=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).debug.apply(e,this.prefixLists.concat(n))},t.info=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).info.apply(e,this.prefixLists.concat(n))},t.warning=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).warning.apply(e,this.prefixLists.concat(n))},t.error=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).error.apply(e,this.prefixLists.concat(n))},t.prefix=function(e){return this.prefixLists.push(e),this},t.popPrefix=function(){return this.prefixLists.pop(),this},e}();function q_(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function J_(){var e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}var X_,Q_,Z_={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},$_=Date.now(),ev=function(e){for(var t in Z_)if(Object.prototype.hasOwnProperty.call(Z_,t)&&Z_[t]===e)return t;return"DEFAULT"},tv=new(function(){function e(){var e=this;uc(this,"proxyServerURL",void 0),uc(this,"logLevel",Z_.DEBUG),uc(this,"uploadState","collecting"),uc(this,"uploadLogWaitingList",[]),uc(this,"uploadLogUploadingList",[]),uc(this,"uploadErrorCount",0),uc(this,"currentLogID",0),uc(this,"url",void 0),uc(this,"extLog",(function(t,n){e.appendLogToWaitingList.apply(e,[t].concat(n))}))}var t=e.prototype;return t.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[Z_.DEBUG].concat(t);this.log.apply(this,r)},t.info=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[Z_.INFO].concat(t);this.log.apply(this,r)},t.warning=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[Z_.WARNING].concat(t);this.log.apply(this,r)},t.warn=function(){this.warning.apply(this,arguments)},t.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[Z_.ERROR].concat(t);this.log.apply(this,r)},t.upload=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[Z_.DEBUG].concat(t);this.uploadLog.apply(this,r)},t.setLogLevel=function(e){e=Math.min(Math.max(0,e),4),this.logLevel=e},t.enableLogUpload=function(){F_("UPLOAD_LOG",!0)},t.disableLogUpload=function(){F_("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]},t.setProxyServer=function(e){this.proxyServerURL=e},t.prefix=function(e){return new Y_(this).prefix(e)},t.log=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Date.now()-$_<100)setTimeout((function(){e.log.apply(e,n)}),Date.now()-$_);else{var i=Math.max(0,Math.min(4,n[0]));if(n[0]=q_()+" Agora-SDK [".concat(ev(i),"]:"),this.appendLogToWaitingList.apply(this,[i].concat(n)),!(i<this.logLevel)){var o=q_()+" %cAgora-SDK [".concat(ev(i),"]:"),a=[];if(!W_("USE_NEW_LOG"))switch(i){case Z_.DEBUG:a=[o,"color: #64B5F6;"].concat(n.slice(1)),console.log.apply(console,a);break;case Z_.INFO:a=[o,"color: #1E88E5; font-weight: bold;"].concat(n.slice(1)),console.log.apply(console,a);break;case Z_.WARNING:a=[o,"color: #FB8C00; font-weight: bold;"].concat(n.slice(1)),console.warn.apply(console,a);break;case Z_.ERROR:a=[o,"color: #B00020; font-weight: bold;"].concat(n.slice(1)),console.error.apply(console,a)}}}},t.uploadLog=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Date.now()-$_<100)setTimeout((function(){e.uploadLog.apply(e,n)}),Date.now()-$_);else{var i=Math.max(0,Math.min(4,n[0]));n[0]=q_()+" Agora-SDK [".concat(ev(i),"]:"),this.appendLogToWaitingList.apply(this,[i].concat(n))}},t.appendLogToWaitingList=function(e){if(W_("UPLOAD_LOG")){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Array.isArray(n[0])?n[0][0]=J_()+" Agora-SDK [".concat(ev(e),"]:"):n[0]=J_()+" Agora-SDK [".concat(ev(e),"]:");var i="";n.forEach((function(e){"object"==typeof e&&(e=JSON.stringify(e)),i+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}},t.startUpload=function(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()},t.uploadLogs=function(){var e=d(c().mark((function e(){var t,n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.uploadLogUploadingList,n={sdk_version:U_,process_id:W_("PROCESS_ID"),payload:JSON.stringify(t)},e.abrupt("return",Df(d(c().mark((function e(){var t,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C_.post(r.url||(r.proxyServerURL?"https://".concat(r.proxyServerURL,"/ls/?h=").concat(W_("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(W_("LOG_UPLOAD_SERVER"),"/upload/v1")),n,{responseType:"text"});case 2:if("OK"===(t=e.sent).data){e.next=6;break}throw(i=new Error("unexpected upload log response")).response=t,i;case 6:case"end":return e.stop()}}),e)}))),(function(){return r.uploadLogUploadingList=[],!1}),(function(e){return e.response?K_.reportLogUploadError({status:e.response.status,data:e.response.data,headers:e.response.headers,message:e.message}):e.request?K_.reportLogUploadError({status:e.request.status,message:e.message}):K_.reportLogUploadError({status:-1,message:e.message}),!0}),{timeout:W_("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:W_("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.uploadLogInterval=function(){var e=this;0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,W_("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((function(){e.uploadErrorCount=0,e.uploadLogWaitingList.length>0&&window.setTimeout((function(){return e.uploadLogInterval()}),W_("UPLOAD_LOG_INTERVAL"))})).catch((function(t){e.uploadErrorCount+=1,e.uploadErrorCount<2?window.setTimeout((function(){return e.uploadLogInterval()}),W_("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((function(){return e.uploadLogInterval()}),W_("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))},e}());function nv(e){return Op(e.reportId,"params.reportId",0,100,!1),Op(e.category,"params.category",0,100,!1),Op(e.event,"params.event",0,100,!1),Op(e.label,"params.label",0,100,!1),Rp(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}!function(e){e.FREE="free",e.UPLOADING="uploading"}(X_||(X_={})),function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}(Q_||(Q_={}));var rv,iv,ov,av,sv={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};function cv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cv(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats"}(rv||(rv={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats"}(iv||(iv={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(ov||(ov={})),function(e){e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(av||(av={}));var dv=function(){function e(){var e=this;uc(this,"baseInfoMap",new Map),uc(this,"proxyServer",void 0),uc(this,"eventUploadTimer",void 0),uc(this,"setSessionIdTimer",void 0),uc(this,"url",void 0),uc(this,"backupUrl",void 0),uc(this,"_appId",void 0),uc(this,"keyEventUploadPendingItems",[]),uc(this,"normalEventUploadPendingItems",[]),uc(this,"apiInvokeUploadPendingItems",[]),uc(this,"apiInvokeCount",0),uc(this,"ltsList",[]),uc(this,"lastSendNormalEventTime",Date.now()),uc(this,"customReportCounterTimer",void 0),uc(this,"customReportCount",0),uc(this,"extApiInvoke",function(){var t=d(c().mark((function t(n){var r,o,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=i(n);!(o=r()).done;)a=o.value,s=uv(uv({},a),{},{sid:null,invokeId:++e.apiInvokeCount,tag:Mp.TRACER}),e.sendApiInvoke(s);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),W_("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),W_("EVENT_REPORT_SEND_INTERVAL"))}var t=e.prototype;return t.getBaseInfoBySessionId=function(e){return this.baseInfoMap.get(e)},t.adjustSessionStartTime=function(e){if(this.baseInfoMap.has(e)||this.baseInfoMap.get(e)){var t=this.baseInfoMap.get(e),n=Date.now(),r=t.startTime;t.startTime=n,tv.debug("rewrite session ".concat(e," startTime: ").concat(n," , ").concat(n-r,"ms")),this.baseInfoMap.set(e,t)}else tv.error("adjust session ".concat(e," start time, sid is not exist or info is undefined"))},t.setAppId=function(e){this._appId=e},t.reportApiInvoke=function(e,t,n){var r=this;t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;var i=Date.now();this.apiInvokeCount+=1;var o=this.apiInvokeCount,a=function(){return{tag:t.tag,invokeId:o,sid:e,name:t.name,apiInvokeTime:i,options:t.options,states:t.states||null}},s=!!W_("SHOW_REPORT_INVOKER_LOG");s&&tv.info("".concat(t.name," start"),t.options);var c=!1;Ef(t.timeout).then((function(){c||(r.sendApiInvoke(uv(uv({},a()),{},{error:ql.API_INVOKE_TIMEOUT,success:!1})),tv.debug("".concat(t.name," timeout")))}));var u=new Sp(ql.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:function(e){var i=function(){if(c)throw u;return c=!0,r.sendApiInvoke(uv(uv({},a()),{},{success:!0},t.reportResult&&{result:e})),s&&tv.info("".concat(t.name," onSuccess")),e};return n?wf(i,t.name+"Success",n,(function(){return c=!0})):i()},onError:function(e){var i=function(){if(c)throw e;c=!0,r.sendApiInvoke(uv(uv({},a()),{},{success:!1,error:e})),s&&tv.info("".concat(t.name," onFailure"),e.toString())};return n?wf(i,t.name+"Error",n,(function(){return c=!0})):i()}}},t.sessionInit=function(e,t){if(!this.baseInfoMap.has(e)){var n=Date.now(),r=this.createBaseInfo(e,n);r.cname=t.cname;var i=Object.assign({},{willUploadConsoleLog:W_("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:j_?"global":"oversea",areas:W_("AREAS")&&W_("AREAS").join(",")},t.extend),o=Date.now(),a=uv(uv({},r),{},{eventType:rv.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:V_,lts:o,elapse:o-n,extend:JSON.stringify(i),mode:t.mode,process:W_("PROCESS_ID"),appType:W_("APP_TYPE"),success:!0,version:U_});this.send({type:iv.SESSION,data:a},!0)}},t.joinChooseServer=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=uv(uv({},r),{},{eventType:rv.JOIN_CHOOSE_SERVER,lts:i,eventElapse:i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-n.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3});this.send({type:iv.JOIN_CHOOSE_SERVER,data:o},!0)}},t.reqUserAccount=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=uv(uv({},r),{},{eventType:rv.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:i-n.startTime,eventElapse:i-t.lts,extend:JSON.stringify(t.extend)});this.send({type:iv.REQ_USER_ACCOUNT,data:o},!0)}},t.joinGateway=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;var i=Date.now(),o=t.firstSuccess,a=t.avoidJoinStartTime,s=t.isProxy,c=t.addr,u=i-(o&&a?a:n.startTime),d=uv(uv({},r),{},{eventType:rv.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:u,eventElapse:i-t.lts,firstSuccess:o,signalChannel:t.signalChannel}),l=d.success?1:0;if(t.succ&&(n.lastJoinSuccessTime=i),o)this.send({type:iv.JOIN_GATEWAY,data:d},!0);else{var p;if(c)if(s){var f=c.match(/h=(\d{1,3}-){3}\d{1,3}/g),h=c.match(/p=[0-9]{1,6}/g);p={isSuccess:l,gatewayIp:f&&f.length?f[0].split("=")[1].replace(/-/g,"."):"",port:h&&h.length?h[0].split("=")[1]:"",isProxy:s?1:0}}else{var _=c.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),v=c.match(/(:|p=)[0-9]{1,6}/g);p={isSuccess:l,gatewayIp:_&&_.length?_[0].split("//")[1].replace(/-/g,"."):"",port:v&&v.length?v[0].split(/:|p=/g)[1]:"",isProxy:s?1:0}}else p={isSuccess:l,gatewayIp:"",port:"",isProxy:s?1:0};delete d.success,delete d.eventType,delete d.firstSuccess,d.vid=Number(d.vid);var m=Object.assign({},d,p,{eventType:rv.REJOIN_GATEWAY});this.send({type:iv.RE_JOIN_GATEWAY,data:m},!0)}}},t.joinChannelTimeout=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=Date.now(),i=uv(uv({},n.info),{},{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:iv.JOIN_CHANNEL_TIMEOUT,data:i},!0)}},t.publish=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=uv(uv({},r),{},{eventType:rv.PUBLISH,lts:i,eventElapse:t.eventElapse,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:iv.PUBLISH,data:o},!0)}},t.subscribe=function(e,t,n){var r=this.baseInfoMap.get(e);if(r){var i=r.info,o=Date.now(),a=uv(uv({},i),{},{eventType:rv.SUBSCRIBE,lts:o,eventElapse:t.eventElapse,elapse:o-r.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?a.peerSuid=t.peerid:a.peer=t.peerid,this.send({type:iv.SUBSCRIBE,data:a},!0)}},t.wsCompressorInit=function(e){var t,n=[].concat(fc(t=this.baseInfoMap).call(t)),r=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(r);if(i){var o=i.info,a=Date.now(),s=uv(uv({},o),{},{eventType:rv.WS_COMPRESSOR_INIT,lts:a,eventElapse:e.eventElapse,elapse:a-i.startTime,status:e.status?1:2});this.send({type:iv.WS_COMPRESSOR_INIT,data:s},!0)}},t.firstRemoteVideoDecode=function(e,t,n,r){var i=this.baseInfoMap.get(e);if(i){var o=i.info,a=Date.now(),s=uv(uv(uv({},o),r),{},{elapse:a-i.startTime,eventType:t,lts:a,firstDecodeFrame:Math.max(a-i.startTime,0),apEnd:Math.max(r.apEnd-i.startTime,0),apStart:Math.max(r.apStart-i.startTime,0),joinGwEnd:Math.max(r.joinGwEnd-i.startTime,0),joinGwStart:Math.max(r.joinGwStart-i.startTime,0),pcEnd:Math.max(r.pcEnd-i.startTime,0),pcStart:Math.max(r.pcStart-i.startTime,0),subscriberEnd:Math.max(r.subscriberEnd-i.startTime,0),subscriberStart:Math.max(r.subscriberStart-i.startTime,0),videoAddNotify:Math.max(r.videoAddNotify-i.startTime,0)});this.send({type:n,data:s},!0)}},t.firstRemoteFrame=function(e,t,n,r){var i=this.baseInfoMap.get(e);if(i){var o=i.info,a=Date.now(),s=uv(uv(uv({},o),r),{},{elapse:a-i.startTime,eventType:t,lts:a});this.send({type:n,data:s},!0)}},t.pcStats=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=uv(uv(uv({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),elapse:i-n.startTime,eventType:rv.PC_STATS,lts:i});this.send({type:iv.PC_STATS,data:o},!0)}},t.updateRemoteRTPCapabilities=function(e,t){this.reportApiInvoke(e,{name:"Client.updateRemoteRTPCapabilities",options:t,tag:Mp.TRACER}).onSuccess()},t.onGatewayStream=function(e,t,n,r){var i=this.baseInfoMap.get(e);if(i){var o=i.info,a=Date.now(),s=uv(uv(uv({},o),r),{},{eventType:t,lts:a});this.send({type:n,data:s},!0)}},t.streamSwitch=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=uv(uv({},r),{},{eventType:rv.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-n.startTime,success:t.succ});this.send({type:iv.STREAM_SWITCH,data:o},!0)}},t.requestProxyAppCenter=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=uv(uv({},r),{},{eventType:rv.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:iv.REQUEST_PROXY_APPCENTER,data:o},!0)}},t.requestProxyWorkerManager=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=uv(uv({},r),{},{eventType:rv.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:iv.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}},t.setProxyServer=function(e){this.proxyServer=e,e?tv.debug("reportProxyServerurl: ".concat(e)):tv.debug("disable reportProxyServerurl: ".concat(e))},t.peerPublishStatus=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=uv(uv({},r),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:iv.PEER_PUBLISH_STATUS,data:o},!0)}},t.workerEvent=function(e,t){var n=this,r=this.baseInfoMap.get(e);if(r){var i=r.info,o=Date.now();(function(e,t,n){var r,i=e[t];if(!i||"string"!=typeof i)return[e];e[t]="";for(var o=vf(JSON.stringify(e)),a=0,s=[],c=0,u=0;u<i.length;u++){var d;(c+=i.charCodeAt(u)<=127?1:3)<=1300-o||(s[s.length]=af(af({},e),{},((d={})[t]=i.substring(a,u),d)),a=u,c=i.charCodeAt(u)<=127?1:3)}return a!==i.length-1&&(s[s.length]=af(af({},e),{},((r={})[t]=i.substring(a),r))),s})(uv(uv(uv({},i),t),{},{elapse:o-r.startTime,lts:o,productType:"WebRTC"}),"payload").forEach((function(e){return n.send({type:iv.WORKER_EVENT,data:e},!0)}))}},t.apworkerEvent=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=uv(uv(uv({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:iv.AP_WORKER_EVENT,data:o},!0)}},t.joinWebProxyAP=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=uv(uv(uv({},r),t),{},{elapse:i-n.startTime,lts:i,extend:t.extend||void 0});this.send({type:iv.JOIN_WEB_PROXY_AP,data:o},!0)}},t.WebSocketQuit=function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=uv(uv(uv({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:iv.WEBSOCKET_QUIT,data:o},!0)}},t.sendCustomReportMessage=function(){var e=d(c().mark((function e(t,n){var r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.customReportCount+=n.length,!(this.customReportCount>W_("CUSTOM_REPORT_LIMIT"))){e.next=2;break}throw new Sp(ql.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);case 2:if(this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((function(){o.customReportCount=0}),5e3)),r=Date.now(),i=n.map((function(e){return{type:iv.USER_ANALYTICS,data:uv(uv({sid:t},e),{},{lts:r})}})),e.prev=4,!W_("NEW_REPORT_SERVER")){e.next=10;break}return e.next=8,this.postDataToStatsCollector2(i);case 8:e.next=12;break;case 10:return e.next=12,this.postDataToStatsCollector(i);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(4),tv.error("send custom report message failed",e.t0.toString()),new Sp(ql.CUSTOM_REPORT_SEND_FAILED,e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[4,14]])})));return function(t,n){return e.apply(this,arguments)}}(),t.sendApiInvoke=function(e){var t=W_("NOT_REPORT_EVENT");if(e.tag&&Or(t)&&Or(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;var n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;var r,i=n.info,o=i.cname,a=i.uid,s=i.cid;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof Sp){var c=e.error,u=c.code,d=c.message;r=u||d||e.error.toString()}else r=e.error.toString();var l={invokeId:e.invokeId,sid:e.sid,cname:o,cid:s,uid:a,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?r:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:iv.API_INVOKE,data:l},!1),!0},t.appendSessionId=function(){var t=this;e.__CLIENT_LIST__.forEach((function(e){if(e._sessionId)for(var n=t.apiInvokeUploadPendingItems.length,r=0;r<n;r++){var i=t.apiInvokeUploadPendingItems.shift();i&&(i.sid=e._sessionId,t.sendApiInvoke(Object.assign({},i)))}}))},t.send=function(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>W_("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)},t.doSend=function(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)},t.sendItems=function(e,t){for(var n=this,r=[],i=[];e.length;){var o=e.shift();r.length<20?r.push(o):i.push(o)}e.push.apply(e,i);for(var a=0,s=[].concat(r);a<s.length;a++){var c,u=s[a];-1!==this.ltsList.indexOf(u.data.lts)?(u.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(u.data.lts)):(this.ltsList.push(u.data.lts),Gc(c=this.ltsList).call(c,(function(e,t){return e-t})))}return t||(this.lastSendNormalEventTime=Date.now()),W_("ENABLE_EVENT_REPORT")?(r.length&&(W_("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(r):this.postDataToStatsCollector(r)).catch(function(e){return function(r){W_("EVENT_REPORT_RETRY")&&(t?n.keyEventUploadPendingItems=n.keyEventUploadPendingItems.concat(e):(n.normalEventUploadPendingItems=n.normalEventUploadPendingItems.concat(e),n.normalEventUploadPendingItems.length>W_("NORMAL_EVENT_QUEUE_CAPACITY")&&(n.normalEventUploadPendingItems.splice(0,n.normalEventUploadPendingItems.length-W_("NORMAL_EVENT_QUEUE_CAPACITY")),tv.warning("report: drop normal events"))))}}(r)),e):e},t.postDataToStatsCollector2=function(){var e=d(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=rf.networkState===Fp.OFFLINE,!e.t0){e.next=4;break}return e.next=4,Vl.race([rf.onlineWaiter,Ef(2*Nf.maxRetryTimeout)]);case 4:n=function(e){var t=new Uint8Array;return e.forEach((function(e){var n=xp(JSON.stringify(e.data)),r=new ArrayBuffer(5),i=function(e){var t=0;return Object.entries(iv).forEach((function(n){var r=n[0];n[1]===e.type&&(t=EventNameToID[r])})),t}(e),o=new DataView(r);o.setUint16(0,n.byteLength,!0),o.setUint8(2,255&i),o.setUint8(3,i>>>8&255),o.setUint8(4,i>>>16&255),t=Gp(t,new Uint8Array(r)),t=Gp(t,n)})),t},r="event",i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(W_("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(r):"https://".concat(W_("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(r),o=0;case 7:if(!(o<2)){e.next=23;break}return 1===o&&(i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(W_("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(r):"https://".concat(W_("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(r)),e.prev=9,e.next=12,I_(i,{timeout:1e4,data:n(t),headers:uv(uv({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0);case 12:e.next=19;break;case 14:if(e.prev=14,e.t1=e.catch(9),1!==o){e.next=18;break}throw e.t1;case 18:return e.abrupt("continue",20);case 19:return e.abrupt("return");case 20:o+=1,e.next=7;break;case 23:case"end":return e.stop()}}),e,this,[[9,14]])})));return function(t){return e.apply(this,arguments)}}(),t.postDataToStatsCollector=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s=this,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]&&u[1],r={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:t.map((function(e){return JSON.stringify(e)})),vid:function(e){var t=e&&e.data.sid&&s.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0}(t[0])},e.t0=rf.networkState===Fp.OFFLINE,!e.t0){e.next=6;break}return e.next=6,Vl.race([rf.onlineWaiter,Ef(2*Nf.maxRetryTimeout)]);case 6:i=n?"/events/proto-raws":"/events/messages",o=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(W_("EVENT_REPORT_DOMAIN"),"&p=").concat(W_("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(W_("EVENT_REPORT_DOMAIN"),":").concat(W_("STATS_COLLECTOR_PORT")).concat(i)),a=0;case 9:if(!(a<2)){e.next=30;break}if(1===a&&(o=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(W_("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(W_("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(W_("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(W_("STATS_COLLECTOR_PORT")).concat(i))),e.prev=11,!n){e.next=17;break}return e.next=15,k_(o,{timeout:1e4,data:r});case 15:e.next=19;break;case 17:return e.next=19,I_(o,{timeout:1e4,data:r});case 19:e.next=26;break;case 21:if(e.prev=21,e.t1=e.catch(11),1!==a){e.next=25;break}throw e.t1;case 25:return e.abrupt("continue",27);case 26:return e.abrupt("return");case 27:a+=1,e.next=9;break;case 30:case"end":return e.stop()}}),e,this,[[11,21]])})));return function(t){return e.apply(this,arguments)}}(),t.createBaseInfo=function(e,t){var n=Object.assign({},sv);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n},t.reportResourceTiming=function(e,t){var n=performance.getEntriesByName(e),r=n[n.length-1];r&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:r,tag:Mp.TRACER}).onSuccess()},e}();function lv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var i=r.value;if("function"==typeof i){var o=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);r.value=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r;if(e.argsMap)try{s=e.argsMap.apply(e,[this].concat(r))}catch(e){tv.warning(e),s=[]}try{JSON.stringify(s)}catch(e){tv.warning("arguments for method ".concat(o,".").concat(String(n)," not serializable for apiInvoke.")),s=[]}var c=(e.report||pv).reportApiInvoke(this._sessionId||null,{name:"".concat(o,".").concat(String(n)),options:s,tag:Mp.TRACER,reportResult:e.reportResult},e.throttleTime);try{var u=i.apply(this,r);return u instanceof Vl?u.then((function(t){return c.onSuccess(e.reportResult&&t),t})).catch((function(e){throw c.onError(e),e})):(c.onSuccess(e.reportResult&&u),u)}catch(e){throw c.onError(e),e}}}return r}}uc(dv,"__CLIENT_LIST__",[]);var pv=new dv;K_.on("REPORT_LOG_UPLOAD",(function(e){e.networkState=rf.networkState,pv.reportApiInvoke(null,{name:"logUploadError",options:e,tag:Mp.TRACER})}));var fv=["CHINA","GLOBAL"],hv=function(){var e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");for(var r=n.join(""),i=[],o=0;o<6;o++)i.push("1");var a=i.join(""),s={};return s[e]=r,s[t]=a,Object.assign(s,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=hv,j_||(B_.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],B_.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],B_.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],B_.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],B_.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],B_.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],B_.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",B_.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",B_.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",B_.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",B_.AREAS=["NORTH_AMERICA","OVERSEA"]);var _v=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],vv=[];function mv(e,t){return!!t&&vv.some((function(n){return n.uid===e&&n.channelName===t}))}dv.__CLIENT_LIST__=vv;var gv,Ev,yv,bv,Sv,Tv,wv,Rv,Cv,Ov,Av,Iv,kv,Nv,Pv,Dv,xv,Lv=ar("Array").values,Mv=Array.prototype,Uv={DOMTokenList:!0,NodeList:!0},jv=se((function(e){var t=e.values;return e===Mv||Ae(Mv,e)&&t===Mv.values||Jt(Uv,vr(e))?Lv:t}));function Vv(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function Bv(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}!function(e){e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY"}(gv||(gv={})),function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(Ev||(Ev={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(yv||(yv={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(bv||(bv={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Sv||(Sv={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Tv||(Tv={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(wv||(wv={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(Rv||(Rv={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_CONNECTING="datachannel_connecting",e.DATACHANNEL_FAILBACK="datachannel_failback",e.P2P_START="p2p_start",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream"}(Cv||(Cv={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag"}(Ov||(Ov={})),function(e){e.PUBLISH_STATS="publish_stats",e.PUBLISH_RELATED_STATS="publish_related_stats",e.SUBSCRIBE_STATS="subscribe_stats",e.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.TRANSPORT_STATS="transport_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats"}(Av||(Av={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Iv||(Iv={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(kv||(kv={})),function(e){e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY"}(Nv||(Nv={})),function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"}(Pv||(Pv={}));var Fv=function(e){function t(t){var n;return uc(l(n=e.call(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2?arguments[2]:void 0)||this),"name","AgoraRTCException"),n}p(t,e);var n=t.prototype;return n.print=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return e.prototype.print.call(this,t,tv)},n.throw=function(){e.prototype.throw.call(this,tv)},t}(Sp);function Wv(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw tv.error("Invalid Channel Name ".concat(e)),new Fv(ql.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function Gv(e){if(!("number"==typeof(t=e)&&Math.floor(t)===t&&0<=t&&t<=4294967295||kp(e,1,255)))throw new Fv(ql.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var t;"string"==typeof e&&tv.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}!function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(Dv||(Dv={})),function(e){e[e.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",e[e.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",e[e.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",e[e.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",e[e.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",e[e.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",e[e.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",e[e.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",e[e.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(xv||(xv={}));var Hv={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},zv={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function Kv(e,t){Op(e.url,"".concat(t,".url"),1,1e3,!1),Ip(e.x)||Rp(e.x,"".concat(t,".x"),0,1e4),Ip(e.y)||Rp(e.y,"".concat(t,".y"),0,1e4),Ip(e.width)||Rp(e.width,"".concat(t,".width"),0,1e4),Ip(e.height)||Rp(e.height,"".concat(t,".height"),0,1e4),Ip(e.zOrder)||Rp(e.zOrder,"".concat(t,".zOrder"),0,255),Ip(e.alpha)||Rp(e.alpha,"".concat(t,".alpha"),0,1,!1)}var Yv,qv,Jv,Xv,Qv,Zv,$v,em,tm,nm,rm,im,om,am,sm={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},cm={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};function um(e){if(!e.channelName)throw new Fv(ql.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new Fv(ql.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&Op(e.token,"info.token",1,2047),Gv(e.uid),Wv(e.channelName),!0}!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(Yv||(Yv={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(qv||(qv={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(Jv||(Jv={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(Xv||(Xv={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(Qv||(Qv={})),function(e){e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(Zv||(Zv={})),function(e){e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}($v||($v={})),function(e){e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(em||(em={})),function(e){e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low"}(tm||(tm={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_FAILBACK="datachannel_failback",e.RESET_SIGNAL="reset-signal"}(nm||(nm={})),function(e){e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON"}(rm||(rm={})),function(e){e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7"}(im||(im={})),function(e){e[e.websocket=0]="websocket",e[e.datachannel=1]="datachannel"}(om||(om={})),function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS"}(am||(am={}));var dm,lm=[am.AFRICA,am.ASIA,am.CHINA,am.EUROPE,am.GLOBAL,am.INDIA,am.JAPAN,am.NORTH_AMERICA,am.OCEANIA,am.OVERSEA,am.SOUTH_AMERICA];!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL"}(dm||(dm={}));var pm,fm,hm,_m,vm,mm,gm,Em,ym,bm,Sm,Tm,wm,Rm,Cm,Om,Am,Im,km,Nm,Pm,Dm,xm={CHINA:{},ASIA:{CODE:dm.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:dm.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:dm.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:dm.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:dm.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:dm.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:dm.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:dm.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:dm.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:dm.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:dm.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:dm.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:dm.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};j_&&(xm.CHINA={CODE:dm.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(pm||(pm={}));var Lm=function(e){function t(t,n){var r;return uc(l(r=e.call(this)||this),"onICEConnectionStateChange",void 0),uc(l(r),"onConnectionStateChange",void 0),uc(l(r),"onDTLSTransportStateChange",void 0),uc(l(r),"onDTLSTransportError",void 0),uc(l(r),"onICETransportStateChange",void 0),uc(l(r),"onFirstAudioReceived",void 0),uc(l(r),"onFirstVideoReceived",void 0),uc(l(r),"onFirstAudioDecoded",void 0),uc(l(r),"onFirstVideoDecoded",void 0),uc(l(r),"onFirstVideoDecodedTimeout",void 0),uc(l(r),"onSelectedLocalCandidateChanged",void 0),uc(l(r),"onSelectedRemoteCandidateChanged",void 0),r}return p(t,e),t}(Kp),Mm=function(e){function t(t,n){return e.call(this,t,n)||this}return p(t,e),t}(Lm);!function(e){e.SEND="sendonly",e.RECV="recvonly",e.SENDRECV="sendrecv",e.INACTIVE="inactive"}(fm||(fm={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(hm||(hm={})),function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY"}(_m||(_m={})),function(e){e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(vm||(vm={})),function(e){e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack"}(mm||(mm={})),function(e){e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected"}(gm||(gm={})),function(e){e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PPublish="RequestP2PPublish",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE"}(Em||(Em={})),function(e){e.MUTE_LOCAL_VIDEO="mute_local_video",e.MUTE_LOCAL_AUDIO="mute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.MUTE_REMOTE_VIDEO="mute_remote_video",e.MUTE_REMOTE_AUDIO="mute_remote_audio",e.UNMUTE_REMOTE_VIDEO="unmute_remote_video",e.UNMUTE_REMOTE_AUDIO="unmute_remote_audio"}(ym||(ym={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(bm||(bm={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(Sm||(Sm={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(Tm||(Tm={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(wm||(wm={})),function(e){e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback"}(Rm||(Rm={})),function(e){e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.SECURITY_POLICY_VIOLATION="security-policy-violation"}(Cm||(Cm={})),function(e){e[e.APP_TYPE_INVALID_VALUE=-1]="APP_TYPE_INVALID_VALUE",e[e.APP_TYPE_NATIVE=0]="APP_TYPE_NATIVE",e[e.APP_TYPE_NATIVE_COCOS=1]="APP_TYPE_NATIVE_COCOS",e[e.APP_TYPE_NATIVE_UNITY=2]="APP_TYPE_NATIVE_UNITY",e[e.APP_TYPE_NATIVE_ELECTRON=3]="APP_TYPE_NATIVE_ELECTRON",e[e.APP_TYPE_NATIVE_FLUTTER=4]="APP_TYPE_NATIVE_FLUTTER",e[e.APP_TYPE_NATIVE_UNREAL=5]="APP_TYPE_NATIVE_UNREAL",e[e.APP_TYPE_NATIVE_XAMARIN=6]="APP_TYPE_NATIVE_XAMARIN",e[e.APP_TYPE_NATIVE_API_CLOUD=7]="APP_TYPE_NATIVE_API_CLOUD",e[e.APP_TYPE_NATIVE_REACT_NATIVE=8]="APP_TYPE_NATIVE_REACT_NATIVE",e[e.APP_TYPE_NATIVE_PYTHON=9]="APP_TYPE_NATIVE_PYTHON",e[e.APP_TYPE_NATIVE_COCOS_CREATOR=10]="APP_TYPE_NATIVE_COCOS_CREATOR",e[e.APP_TYPE_NATIVE_RUST=11]="APP_TYPE_NATIVE_RUST",e[e.APP_TYPE_NATIVE_C_SHARP=12]="APP_TYPE_NATIVE_C_SHARP",e[e.APP_TYPE_NATIVE_CEF=13]="APP_TYPE_NATIVE_CEF",e[e.APP_TYPE_NATIVE_UNI_APP=14]="APP_TYPE_NATIVE_UNI_APP",e[e.APP_TYPE_WEBRTC=1e3]="APP_TYPE_WEBRTC",e[e.APP_TYPE_WEBRTC_REACT=1001]="APP_TYPE_WEBRTC_REACT",e[e.APP_TYPE_WEBRTC_VUE=1002]="APP_TYPE_WEBRTC_VUE",e[e.APP_TYPE_WEBRTC_ANGULAR=1003]="APP_TYPE_WEBRTC_ANGULAR"}(Om||(Om={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(Am||(Am={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(Im||(Im={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(km||(km={})),function(e){e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.JOIN="join",e.EXCHANGE_SDP="exchange_sdp",e.DO_SUBSCRIBE="do_subscribe",e.DO_UNSUBSCRIBE="do_unsubscribe"}(Nm||(Nm={})),function(e){e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video"}(Pm||(Pm={})),function(e){e[e.SUCCESS=1]="SUCCESS",e[e.FAILED=0]="FAILED"}(Dm||(Dm={}));var Um=((u={})[yv.ACCESS_POINT]=((e={})[Tv.NO_FLAG_SET]={desc:"flag is zero",retry:!1},e[Tv.FLAG_SET_BUT_EMPTY]={desc:"flag is empty",retry:!1},e[Tv.INVALID_FALG_SET]={desc:"invalid flag",retry:!1},e[Tv.FLAG_SET_BUT_NO_RE]={desc:"flag set unilbs but no request",retry:!1},e[Tv.INVALID_SERVICE_ID]={desc:"invalid service id",retry:!1},e[Tv.NO_SERVICE_AVAILABLE]={desc:"no service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_P2P]={desc:"no unilbs p2p service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_VOICE]={desc:"no unilbs voice service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_WEBRTC]={desc:"no unilbs webrtc service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_CDS]={desc:"no cds service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_CDN]={desc:"no cdn dispatcher service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_TDS]={desc:"no tds service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_REPORT]={desc:"no unilbs report service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_APP_CENTER]={desc:"no app center service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_ENV0]={desc:"no unilbs sig env0 service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_VOET]={desc:"no unilbs voet service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_STRING_UID]={desc:"no string uid service available",retry:!0},e[Tv.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]={desc:"no webrtc unilbs service available",retry:!0},e),u[yv.UNILBS]=((o={})[Sv.INVALID_VENDOR_KEY]={desc:"invalid vendor key, can not find appid",retry:!1},o[Sv.INVALID_CHANNEL_NAME]={desc:"invalid channel name",retry:!1},o[Sv.INTERNAL_ERROR]={desc:"unilbs internal error",retry:!1},o[Sv.NO_AUTHORIZED]={desc:"invalid token, authorized failed",retry:!1},o[Sv.DYNAMIC_KEY_TIMEOUT]={desc:"dynamic key or token timeout",retry:!1},o[Sv.NO_ACTIVE_STATUS]={desc:"no active status",retry:!1},o[Sv.DYNAMIC_KEY_EXPIRED]={desc:"dynamic key expired",retry:!1},o[Sv.STATIC_USE_DYNAMIC_KEY]={desc:"static use dynamic key",retry:!1},o[Sv.DYNAMIC_USE_STATIC_KEY]={desc:"dynamic use static key",retry:!1},o[Sv.USER_OVERLOAD]={desc:"amount of users over load",retry:!1},o[Sv.FORBIDDEN_REGION]={desc:"the request is forbidden in this area",retry:!1},o[Sv.CANNOT_MEET_AREA_DEMAND]={desc:"unable to allocate services in this area",retry:!1},o),u[yv.STRING_UID_ALLOCATOR]=((a={})[bv.IIIEGAL_APPID]={desc:"invalid appid",retry:!1},a[bv.IIIEGAL_UID]={desc:"invalid string uid",retry:!1},a[bv.INTERNAL_ERROR]={desc:"string uid allocator internal error",retry:!0},a),u);function jm(e){var t=Um[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};var n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===yv.ACCESS_POINT){var r=e%1e4;if("1"===r.toString()[0])return{desc:e.toString(),retry:!1};if("2"===r.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return n}var Vm=((h={})[wv.K_TIMESTAMP_EXPIRED]={desc:"K_TIMESTAMP_EXPIRED",action:"failed"},h[wv.K_CHANNEL_PERMISSION_INVALID]={desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},h[wv.K_CERTIFICATE_INVALID]={desc:"K_CERTIFICATE_INVALID",action:"failed"},h[wv.K_CHANNEL_NAME_EMPTY]={desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},h[wv.K_CHANNEL_NOT_FOUND]={desc:"K_CHANNEL_NOT_FOUND",action:"failed"},h[wv.K_TICKET_INVALID]={desc:"K_TICKET_INVALID",action:"failed"},h[wv.K_CHANNEL_CONFLICTED]={desc:"K_CHANNEL_CONFLICTED",action:"failed"},h[wv.K_SERVICE_NOT_READY]={desc:"K_SERVICE_NOT_READY",action:"tryNext"},h[wv.K_SERVICE_TOO_HEAVY]={desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},h[wv.K_UID_BANNED]={desc:"K_UID_BANNED",action:"failed"},h[wv.K_IP_BANNED]={desc:"K_IP_BANNED",action:"failed"},h[wv.K_AUTO_REBALANCE]={desc:"k_AUTO_REBALANCE",action:"recover"},h[wv.ERR_INVALID_VENDOR_KEY]={desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},h[wv.ERR_INVALID_CHANNEL_NAME]={desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},h[wv.WARN_NO_AVAILABLE_CHANNEL]={desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},h[wv.WARN_LOOKUP_CHANNEL_TIMEOUT]={desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},h[wv.WARN_LOOKUP_CHANNEL_REJECTED]={desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},h[wv.WARN_OPEN_CHANNEL_TIMEOUT]={desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},h[wv.WARN_OPEN_CHANNEL_REJECTED]={desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},h[wv.WARN_REQUEST_DEFERRED]={desc:"WARN_REQUEST_DEFERRED",action:"failed"},h[wv.ERR_DYNAMIC_KEY_TIMEOUT]={desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},h[wv.ERR_NO_AUTHORIZED]={desc:"ERR_NO_AUTHORIZED",action:"failed"},h[wv.ERR_VOM_SERVICE_UNAVAILABLE]={desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},h[wv.ERR_NO_CHANNEL_AVAILABLE_CODE]={desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},h[wv.ERR_MASTER_VOCS_UNAVAILABLE]={desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},h[wv.ERR_INTERNAL_ERROR]={desc:"ERR_INTERNAL_ERROR",action:"tryNext"},h[wv.ERR_NO_ACTIVE_STATUS]={desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},h[wv.ERR_INVALID_UID]={desc:"ERR_INVALID_UID",action:"failed"},h[wv.ERR_DYNAMIC_KEY_EXPIRED]={desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},h[wv.ERR_STATIC_USE_DYANMIC_KE]={desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},h[wv.ERR_DYNAMIC_USE_STATIC_KE]={desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},h[wv.ERR_NO_VOCS_AVAILABLE]={desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},h[wv.ERR_NO_VOS_AVAILABLE]={desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},h[wv.ERR_JOIN_CHANNEL_TIMEOUT]={desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},h[wv.ERR_JOIN_BY_MULTI_IP]={desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},h[wv.ERR_NOT_JOINED]={desc:"ERR_NOT_JOINED",action:"failed"},h[wv.ERR_REPEAT_JOIN_REQUEST]={desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},h[wv.ERR_REPEAT_JOIN_CHANNEL]={desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},h[wv.ERR_INVALID_STRINGUID]={desc:"ERR_INVALID_STRINGUID",action:"failed"},h[wv.ERR_TOO_MANY_USERS]={desc:"ERR_TOO_MANY_USERS",action:"tryNext"},h[wv.ERR_SET_CLIENT_ROLE_TIMEOUT]={desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},h[wv.ERR_SET_CLIENT_ROLE_NO_PERMISSION]={desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},h[wv.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]={desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},h[wv.ERR_PUBLISH_REQUEST_INVALID]={desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},h[wv.ERR_SUBSCRIBE_REQUEST_INVALID]={desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},h[wv.ERR_NOT_SUPPORTED_MESSAGE]={desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},h[wv.ERR_ILLEAGAL_PLUGIN]={desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},h[wv.ILLEGAL_CLIENT_ROLE_LEVEL]={desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},h[wv.ERR_REJOIN_TOKEN_INVALID]={desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},h[wv.ERR_REJOIN_USER_NOT_JOINED]={desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},h[wv.ERR_INVALID_OPTIONAL_INFO]={desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},h[wv.ERR_TEST_RECOVER]={desc:"ERR_TEST_RECOVER",action:"recover"},h[wv.ERR_TEST_TRYNEXT]={desc:"ERR_TEST_TRYNEXT",action:"recover"},h[wv.ERR_TEST_RETRY]={desc:"ERR_TEST_RETRY",action:"recover"},h[wv.ILLEGAL_AES_PASSWORD]={desc:"ERR_TEST_RETRY",action:"failed"},h[wv.ERR_TOO_MANY_BROADCASTERS]={desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},h[wv.ERR_TOO_MANY_SUBSCRIBERS]={desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},h[wv.ERR_LICENSE_ILLEGAL]={desc:"ERR_LICENSE_ILLEGAL",action:"quit"},h[wv.ERR_LICENSE_MISSING]={desc:"ERR_LICENSE_MISSING",action:"quit"},h[wv.ERR_LICENSE_EXPIRED]={desc:"ERR_LICENSE_EXPIRED",action:"quit"},h[wv.ERR_LICENSE_MINUTES_EXCEEDED]={desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},h[wv.ERR_LICENSE_PERIOD_INVALID]={desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},h[wv.ERR_LICENSE_MULTIPLE_SDK_SERVICE]={desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"},h);function Bm(e){return Vm[e]||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}function Fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fm(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gm(e){return e.every((function(e){return e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING}))}function Hm(e,t){if("string"==typeof e)return e;var n=e.proxy,r=e.host,i=e.port;if(t){var o=W_("JOIN_GATEWAY_FALLBACK_PORT")||443;return 443===o?"wss://".concat(r,"/ws/?p=").concat(Number(i)+150):"wss://".concat(r,":").concat(o,"/ws/?p=").concat(Number(i)+150)}return n?"wss://".concat(n,"/ws/?h=").concat(r,"&p=").concat(i):"wss://".concat(r,":").concat(i)}var zm=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,Km=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,Ym=/wss:\/\/(.+):([0-9]+)\/?/,qm=/wss:\/\/(.[^\/]+)\/?/,Jm=0,Xm=function(){function e(e,t){uc(this,"id",0),uc(this,"store",void 0),uc(this,"recordIndex",void 0),uc(this,"websockets",[]),uc(this,"try443PortDuration",2e3),uc(this,"forceCloseWSDuration",5e3),uc(this,"try443PortTimeout",null),uc(this,"forceCloseTimeout",null),uc(this,"isTry443PortFailed",!1),uc(this,"isNormalPortFailed",!1),uc(this,"useDoubleDomain",!1),uc(this,"useProxy",!1),uc(this,"startTime",Date.now()),this.id=++Jm,this.try443PortDuration=W_("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}var t=e.prototype;return t.closeAllWebsockets=function(){this.websockets.forEach((function(e){e.onopen=null,e.onclose=null,e.onmessage=null,e.close()})),this.websockets.length=0},t.clearTimeout=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)})),t.logger=function(){for(var e,t=Date.now()-this.startTime,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];tv.debug.apply(tv,["[choose-best-ws ".concat(null===(e=this.store)||void 0===e?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:")].concat(r))},t.createWebSocket=function(e,t,n){var r,i=this;this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:n});var o=W_("GATEWAY_DOMAINS"),a=Date.now(),s=[],c=o.find((function(t){var n;return Or(n=e.host).call(n,t)}));c||(this.useDoubleDomain=!1);var u=[];if(this.useDoubleDomain)o.forEach((function(n){u.push(Hm(Wm(Wm({},e),{},{host:e.host.replace(c,n)}),t))}));else{var d=Wm({},e);if(t&&c){var l=o.find((function(e){return e!==c}));l&&(d.host=d.host.replace(c,l))}u.push(Hm(d,t))}try{u.forEach((function(e){var t=new WebSocket(e);t.binaryType="arraybuffer",s.push(t),i.logger("ws is connecting:",t.url)}))}catch(o){if(this.logger("ws create failed"),s.forEach((function(e){return e.close()})),s.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,n);if(!t&&443!==Number(e.port))return this.createWebSocket(e,!0,n);throw new Fv(ql.WS_ERR,"init websocket failed! Error: ".concat(o.toString()))}var p=Fl();return this.store&&this.store.recordJoinChannelService({urls:s.map((function(e){return e.url})),service:"gateway"},this.recordIndex),s.forEach((function(e){e.onopen=function(){i.logger("onopen: ws ".concat(e.url," open cost ").concat(Date.now()-a,"ms")),i.websockets.forEach((function(t){t!==e&&(t.onopen=null,t.onclose=null,t.onmessage=null,t.close(),i.logger("close backup websocket: ".concat(t.url)))})),i.websockets.length=0,p.resolve(e)},e.onclose=function(n){i.logger("onclose: ws ".concat(e.url," closed cost ").concat(Date.now()-a,"ms state: ").concat(e.readyState)),t?i.isTry443PortFailed=Gm(s):i.isNormalPortFailed=Gm(s),i.logger("443: ".concat(i.useProxy?"not try":i.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(i.isNormalPortFailed?"failed":"trying")),(t&&i.isTry443PortFailed||!t&&(i.isTry443PortFailed||i.useProxy)&&i.isNormalPortFailed)&&(i.logger("onclose: all websocket is closed, ".concat(n.reason)),p.reject({code:n.code,reason:rm.A_ROUND_WS_FAILED}))},e.onmessage=function(t){return i.logger("".concat(e.url," onmessage: ").concat(t.data))}})),(r=this.websockets).push.apply(r,s),n||function(){var n=function(){i.logger("5s timeout close un-opens, isWebsocket created: ",p.isResolved),i.websockets.forEach((function(e){return e.readyState!==WebSocket.OPEN&&e.close()}))};if(t||i.useProxy)return i.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),i.forceCloseTimeout=window.setTimeout(n,i.forceCloseWSDuration);i.try443PortTimeout=window.setTimeout((function(){if(i.logger("2s timeout, isWebsocket created: ",p.isResolved),p.isResolved)return n();Zl().os===Wl.MAC_OS&&ip()&&n(),i.createWebSocket(e,!0,!0).then((function(e){return p.resolve(e)})).catch((function(e){i.isNormalPortFailed&&p.reject(e),i.logger("try 443 port to create ws failed")})),i.forceCloseTimeout=window.setTimeout(n,i.forceCloseWSDuration)}),i.try443PortDuration)}(),p.promise},t.chooseBestWebsocket=function(e,t,n,r){var i=this;return this.useDoubleDomain=!!t,"string"==typeof e&&(e=function(e){var t,n,r,i,o,a;return i=(t=e.match(zm)||[])[1],o=t[2],a=t[3],i||(o=(n=e.match(Km)||[])[1],a=n[2]),o&&a||(o=(r=e.match(Ym)||[])[1],a=r[2]),o&&a||(o=(e.match(qm)||[])[1]),o||tv.warning("un-destructible url: ",e),{proxy:i,host:o,port:a||"443"}}(e)),this.recordIndex=r,this.useProxy=!!e.proxy,n&&this.useProxy&&(tv.warn("cannot use 443 only when use proxy"),n=!1),this.createWebSocket(e,!!n,!1).finally((function(){return i.clearTimeout()}))},e}();function Qm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Zm=function(e){p(n,e);var t=n.prototype;function n(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;uc(l(r=e.call(this)||this),"connectionID",0),uc(l(r),"currentURLIndex",0),uc(l(r),"urls",[]),uc(l(r),"_reconnectMode","tryNext"),uc(l(r),"reconnectReason",void 0),uc(l(r),"_initMutex",new If("websocket")),uc(l(r),"name",void 0),uc(l(r),"_state","closed"),uc(l(r),"reconnectInterrupter",void 0),uc(l(r),"websocket",void 0),uc(l(r),"retryConfig",void 0),uc(l(r),"reconnectCount",0),uc(l(r),"forceCloseTimeout",5e3),uc(l(r),"onlineReconnectListener",void 0),uc(l(r),"useCompress",void 0),uc(l(r),"tryDoubleDomain",!1),uc(l(r),"use443PortOnly",!1),uc(l(r),"wsInflateLength",0),uc(l(r),"wsDeflateLength",0),uc(l(r),"closeEstablishingWs",(function(){})),uc(l(r),"store",void 0),uc(l(r),"joinGatewayRecordIndex",void 0),r.store=s,r.name=t,r.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qm(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n),r.useCompress=i,r.tryDoubleDomain=o,r.use443PortOnly=a;var c=n.timeout,u=n.timeoutFactor,d=Math.max(300,Math.floor(3*c/5)),p=Math.max(1.2,Math.floor(8*u)/10);return Fp.ONLINE&&(r.retryConfig.timeout=d,r.retryConfig.timeoutFactor=p),rf.on(Wp.NETWORK_STATE_CHANGE,(function(e,t){e!==t&&(r.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===Fp.ONLINE?(r.retryConfig.timeout=d,r.retryConfig.timeoutFactor=p):(r.retryConfig.timeout=c,r.retryConfig.timeoutFactor=u))})),r}return t.resetReconnectCount=function(e){tv.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0},t.getConnection=function(){return this.websocket||void 0},t.init=function(){var e=d(c().mark((function e(t){var n,r,i,o,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:5e3,e.next=3,this._initMutex.lock();case 3:return r=e.sent,this.forceCloseTimeout=n,this.urls=t,this.state="connecting",e.prev=5,i=Fl(),o=this.urls[this.currentURLIndex],this.createWebSocketConnection(o).then(i.resolve).catch(i.reject),this.once(Pv.CLOSED,(function(){i.reject(new Sp(ql.WS_DISCONNECT))})),this.once(Pv.CONNECTED,i.resolve),e.next=12,i.promise;case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(5);case 16:return e.prev=16,r(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[5,14,16,19]])})));return function(t){return e.apply(this,arguments)}}(),t.close=function(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var n=this.websocket;t?setTimeout((function(){return n.close()}),500):n.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()},t.reconnect=function(e,t){if(this.websocket){void 0!==e&&(this.reconnectMode=e),tv.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinGatewayRecordIndex&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);var n=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),n&&n.bind(this.websocket)({code:9999,reason:t})}else tv.warning("[".concat(this.name,"] can not reconnect, no websocket"))},t.sendMessage=function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Sp(ql.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new Sp(ql.WS_ERR,"send websocket message error"+e.toString())}},t.setWsInflateData=function(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength},t.getWsInflateData=function(){var e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}},t.clearWsInflateData=function(){this.wsInflateLength=0,this.wsDeflateLength=0},t.createWebSocketConnection=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s,u,l,p,f,h,_,v,m,g=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fl(),this.connectionID+=1,this.joinGatewayRecordIndex=void 0,i=function(e){var t;null===(t=g.store)||void 0===t||t.signalChannelOpen(),tv.debug("[".concat(g.name,"] websocket opened:"),e),g.reconnectMode="retry",g.state="connected",g.resetReconnectCount("opened"),r.resolve()},o=function(){var e=d(c().mark((function e(t){var n,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tv.debug("[".concat(g.name,"] websocket close ").concat(null===(n=g.websocket)||void 0===n?void 0:n.url,", code: ").concat(t.code,", reason: ").concat(t.reason,", current mode: ").concat(g.reconnectMode)),!(g.reconnectCount>=g.retryConfig.maxRetryCount)){e.next=4;break}r.reject(new Sp(ql.WS_DISCONNECT,"websocket close: ".concat(t.code))),g.close(),e.next=14;break;case 4:return"connected"===g.state&&(g.reconnectReason=t.reason,g.state="reconnecting"),i=tf(g,Pv.WILL_RECONNECT,g.reconnectMode,t.reason)||g.reconnectMode,e.next=8,g.reconnectWithAction(i);case 8:if(o=e.sent,"closed"!==g.state){e.next=11;break}return e.abrupt("return",void tv.debug("[".concat(g.connectionID,"] ws is closed, no need to reconnect")));case 11:if(o){e.next=13;break}return e.abrupt("return",(r.reject(new Sp(ql.WS_DISCONNECT,"websocket reconnect failed: ".concat(t.code))),g.close(!0)));case 13:r.resolve();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(e){g.emit(Pv.ON_MESSAGE,e)},s=function(e){tv.warn("[".concat(g.connectionID,"] ws open error ").concat(e))},this.websocket&&(this.websocket.onclose=null,this.websocket.close()),W_("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(t=W_("GATEWAY_WSS_ADDRESS")),tv.debug("[".concat(this.name,"] start connect, url:"),t),u=null===(n=this.store)||void 0===n?void 0:n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),e.prev=5,e.next=8,this.chooseBestWebsocketConnection(t);case 8:p=e.sent,this.websocket=p,i&&i(this.websocket.url),this.websocket.onclose=o,this.websocket.onmessage=a,this.websocket.onerror=s,null===(l=this.store)||void 0===l||l.recordJoinChannelService({endTs:Date.now(),status:"success"},u),this.joinGatewayRecordIndex=u,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),f="closed"===this.state,h=e.t0 instanceof Sp,_=h&&e.t0.code===ql.WS_ABORT,v=h&&e.t0.code===ql.WS_ERR,m=h?e.t0.message:e.t0&&(e.t0.reason||e.t0.toString()),tv.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(m)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:_?"aborted":"error",errors:[e.t0]},u),f||v?(r.reject(f?new Sp(ql.WS_DISCONNECT,"websocket is closed: ".concat(m)):new Sp(ql.WS_ERR,"init websocket failed: ".concat(m))),v&&tv.error("[".concat(this.name,"] init websocket failed: ").concat(m))):o&&o(e.t0);case 16:return e.abrupt("return",r.promise);case 17:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),t.reconnectWithAction=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s,u=this,l=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(l.length>1&&void 0!==l[1])||l[1],!(this.reconnectCount>=this.retryConfig.maxRetryCount)){e.next=3;break}return e.abrupt("return",!1);case 3:if(0!==this.urls.length){e.next=5;break}return e.abrupt("return",!1);case 5:if("closed"!==this.state){e.next=7;break}return e.abrupt("return",!1);case 7:if(tv.warning("[choose-best-ws] action: =>",t),this.onlineReconnectListener||rf.isOnline||!rf.onlineWaiter||(this.onlineReconnectListener=rf.onlineWaiter.then((function(){u.onlineReconnectListener=void 0}))),r=!0,this.reconnectInterrupter=function(){return r=!1},!n){e.next=14;break}return i=Pf(this.reconnectCount,this.retryConfig),tv.debug("[".concat(this.name,"] wait ").concat(i,"ms to reconnect websocket, mode: ").concat(t)),e.next=14,Vl.race([Ef(i),this.onlineReconnectListener||new Vl((function(){}))]);case 14:if("closed"!==this._state&&r){e.next=16;break}return e.abrupt("return",!1);case 16:if(this.reconnectCount+=1,o=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.emit(Pv.RECONNECT_CREATE_CONNECTION,n),e.next=3,u.createWebSocketConnection(t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=18,"retry"!==t){e.next=25;break}return this.emit(Pv.RECONNECT_WAITTING_FINISH,t),e.next=23,o(this.urls[this.currentURLIndex],t);case 23:e.next=45;break;case 25:if("tryNext"!==t){e.next=34;break}if(this.currentURLIndex+=1,!(this.currentURLIndex>=this.urls.length)){e.next=28;break}return e.abrupt("return",this.reconnectWithAction("recover",!1));case 28:return tv.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(Pv.RECONNECT_WAITTING_FINISH,t),e.next=32,o(this.urls[this.currentURLIndex],t);case 32:e.next=45;break;case 34:if(e.t0="recover"===t,!e.t0){e.next=45;break}return tv.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(Pv.RECONNECT_WAITTING_FINISH,t),e.next=41,$p(this,Pv.REQUEST_NEW_URLS);case 41:return this.urls=e.sent,this.currentURLIndex=0,e.next=45,o(this.urls[this.currentURLIndex],t);case 45:e.next=52;break;case 47:return e.prev=47,e.t1=e.catch(18),tv.error("[".concat(this.name,"] reconnect failed ").concat(e.t1&&e.t1.toString())),s=null==e.t1||null===(a=e.t1.data)||void 0===a?void 0:a.desc,e.abrupt("return",Array.isArray(s)&&Or(s).call(s,"dynamic key expired")?(this.emit(Pv.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(t,n));case 52:return e.abrupt("return",!0);case 53:case"end":return e.stop()}}),e,this,[[18,47]])})));return function(t){return e.apply(this,arguments)}}(),s(n,[{key:"url",get:function(){return this.websocket&&this.websocket.url||null}},{key:"reconnectMode",get:function(){return this._reconnectMode},set:function(e){var t;Or(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}},{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(Pv.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(Pv.CONNECTED):"closed"===this._state?this.emit(Pv.CLOSED):"failed"===this._state&&this.emit(Pv.FAILED))}}]),n}(Kp),$m=function(e){function t(t,n){return e.call(this,t,n,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)||this}return p(t,e),t.prototype.chooseBestWebsocketConnection=function(){var e=d(c().mark((function e(t,n){var r,i,o,a=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fl(),i=function(e,t){return new Xm(e,t)}(this.forceCloseTimeout,this.store),this.closeEstablishingWs=function(){tv.debug("[choose-best-ws] close establishing websockets"),i.closeAllWebsockets(),r.reject(new Sp(ql.WS_ABORT,"choose best websocket aborted"))},o=W_("GATEWAY_DOMAINS"),e.abrupt("return",(tv.debug("[choose-best-ws] currentDomain: ",t,", domains: ",o,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),i.chooseBestWebsocket(t,this.tryDoubleDomain,this.use443PortOnly,n).then(r.resolve).catch(r.reject),r.promise.finally((function(){a.closeEstablishingWs=void 0}))));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t}(Zm),eg=function(e){function t(t,n){return e.call(this,t,n,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)||this}return p(t,e),t.prototype.chooseBestWebsocketConnection=function(){var e=d(c().mark((function e(t,n){var r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Vl((function(e,i){var o=!1,a=[];r.closeEstablishingWs=function(){tv.debug("[choose-best-ws] close establishing websockets"),a.forEach((function(e){e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),i(new Sp(ql.WS_ABORT,"choose best websocket aborted"))};var s,c=W_("GATEWAY_DOMAINS"),u=t.indexOf("?h="),d=c.find((function(e){return-1!==u?Or(t).call(t,e,u):Or(t).call(t,e)}));tv.debug("[choose-best-ws] currentDomain: ",d,", domains: ",c);var l=!r.tryDoubleDomain||!d;if(!l&&d){var p,f=Date.now();try{c.forEach((function(e){var n=-1===u?t.replace(d,e):t.substr(0,u)+t.substr(u).replace(d,e),r=new WebSocket(n);r.binaryType="arraybuffer",a.push(r),tv.debug("[choose-best-ws] ws is connecting:",r.url)}))}catch(e){for(tv.debug("[choose-best-ws] ws create failed, fallback to single url"),a.forEach((function(e){return e.close()}));a.length;)a.pop();l=!0}null===(p=r.store)||void 0===p||p.recordJoinChannelService({urls:a.map((function(e){return e.url})),service:"gateway"},n),a.forEach((function(t){t.onopen=function(){if(!o){var n=Date.now()-f;tv.debug("[choose-best-ws] ws open cost ".concat(n,"ms")),a.filter((function(e){return e!==t})).forEach((function(e){tv.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()})),o=!0,e(t)}},t.onclose=function(e){s=e,o||a.find((function(e){return!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)}))||(tv.debug("[choose-best-ws] all websocket is closed"),o=!0,i(s))},t.onmessage=function(e){tv.debug("[choose-best-ws]".concat(t.url," onmessage: ").concat(e.data))}})),Ef(r.forceCloseTimeout).then((function(){a.forEach((function(e){e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(l){var h,_;tv.debug("[choose-best-ws] use single url: ",t),null===(h=r.store)||void 0===h||h.recordJoinChannelService({urls:[t],service:"gateway"},n);try{_=new WebSocket(t),a.push(_),_.binaryType="arraybuffer"}catch(e){var v=new Sp(ql.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return tv.error("[".concat(r.name,"]").concat(v)),void i(v)}_.onopen=function(){e(_)},_.onclose=function(e){i(e)},_.onmessage=function(e){tv.debug("[choose-best-ws]".concat(_.url," onmessage: ").concat(e.data))},Ef(r.forceCloseTimeout).then((function(){_&&_.readyState!==WebSocket.OPEN&&_.close()}))}})).then((function(e){return r.closeEstablishingWs=void 0,e})).catch((function(e){throw r.closeEstablishingWs=void 0,e})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}(Zm),tg=function(e){function t(t,n){var r;return uc(l(r=e.call(this)||this),"_disconnectedReason",void 0),uc(l(r),"_websocketReconnectReason",void 0),uc(l(r),"_connectionState",Rv.CLOSED),uc(l(r),"reconnectToken",void 0),uc(l(r),"websocket",void 0),uc(l(r),"openConnectionTime",void 0),uc(l(r),"clientId",void 0),uc(l(r),"lastMsgTime",Date.now()),uc(l(r),"uploadCache",[]),uc(l(r),"uploadCacheInterval",void 0),uc(l(r),"rttRolling",new Ff(5)),uc(l(r),"pingpongTimer",void 0),uc(l(r),"wsInflateDataTimer",void 0),uc(l(r),"pingpongTimeoutCount",0),uc(l(r),"joinResponse",void 0),uc(l(r),"multiIpOption",void 0),uc(l(r),"initError",void 0),uc(l(r),"spec",void 0),uc(l(r),"store",void 0),uc(l(r),"onWebsocketMessage",(function(e){if(e.data instanceof ArrayBuffer)r.emit(Cv.ON_BINARY_DATA,e.data);else{var t=JSON.parse(e.data);if(r.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){var n="res-@".concat(t._id);r.emit(n,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(r.emit(t._type,t._message),t._type===Iv.ON_NOTIFICATION&&r.handleNotification(t._message),t._type===Iv.ON_USER_BANNED)switch(t._message.error_code){case 14:r.close(jp.UID_BANNED);break;case 15:r.close(jp.IP_BANNED);break;case 16:r.close(jp.CHANNEL_BANNED)}if(t._type===Iv.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case wv.ERR_LICENSE_MISSING:r.close(jp.LICENSE_MISSING);break;case wv.ERR_LICENSE_EXPIRED:r.close(jp.LICENSE_EXPIRED);break;case wv.ERR_LICENSE_MINUTES_EXCEEDED:r.close(jp.LICENSE_MINUTES_EXCEEDED);break;case wv.ERR_LICENSE_PERIOD_INVALID:r.close(jp.LICENSE_PERIOD_INVALID);break;case wv.ERR_LICENSE_MULTIPLE_SDK_SERVICE:r.close(jp.LICENSE_MULTIPLE_SDK_SERVICE);break;case wv.ERR_LICENSE_ILLEGAL:r.close(jp.LICENSE_ILLEGAL);break;default:r.close()}}}})),r.clientId=t.clientId,r.spec=t,r.store=n,r.websocket=new $m("gateway-".concat(r.clientId),r.spec.retryConfig,!0,W_("JOIN_GATEWAY_USE_DUAL_DOMAIN"),W_("JOIN_GATEWAY_USE_443PORT_ONLY"),n),r.handleWebsocketEvents(),window.addEventListener("offline",(function(){r.connectionState===Rv.CONNECTED&&r.reconnect("retry",Bp.OFFLINE)})),r}p(t,e);var n=t.prototype;return n.request=function(){var e=d(c().mark((function e(t,n,r,i){var o,a,s,u,d,l,p,f,h,_=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=yf(6,""),a={_id:o,_type:t,_message:n},s=this.websocket.connectionID,u=function(){return new Vl((function(e,n){if(_.connectionState===Rv.CONNECTED)return e();var r=function(){_.off(Cv.WS_CLOSED,i),e()},i=function(){_.off(Cv.WS_CONNECTED,r),n(new Fv(ql.WS_ABORT))};_.once(Cv.WS_CONNECTED,r),_.once(Cv.WS_CLOSED,i),t!==Ov.PUBLISH&&t!==Ov.SUBSCRIBE&&t!==Ov.UNSUBSCRIBE&&t!==Ov.UNPUBLISH&&t!==Ov.CONTROL&&t!==Ov.RESTART_ICE||_.once(Cv.DISCONNECT_P2P,(function(){n(new Fv(ql.DISCONNECT_P2P))})),t!==Ov.PUBLISH&&t!==Ov.RESTART_ICE||_.once(Cv.ABORT_P2P_EXECUTION,(function(){n(new Fv(ql.DISCONNECT_P2P))}))}))},e.t0=this.connectionState!==Rv.CONNECTING&&this.connectionState!==Rv.RECONNECTING||t===Ov.JOIN||t===Ov.REJOIN,e.t0){e.next=5;break}return e.next=5,u();case 5:if(this.websocket.sendMessage(a,!0),!i){e.next=8;break}return e.abrupt("return");case 8:return d=new Vl((function(e,r){var i=!1,a=function(r,o){i=!0,e({isSuccess:"success"===r,message:o||{}}),_.off(Cv.WS_CLOSED,c),_.off(Cv.WS_RECONNECTING,c),_.emit(Cv.REQUEST_SUCCESS,t,n)};_.once("res-@".concat(o),a);var c=function e(){r(new Fv(ql.WS_ABORT,"type: ".concat(t))),_.off(Cv.WS_CLOSED,e),_.off(Cv.WS_RECONNECTING,e),_.off("res-@".concat(o),a)};_.once(Cv.WS_CLOSED,c),_.once(Cv.WS_RECONNECTING,c),Ef(W_("SIGNAL_REQUEST_TIMEOUT")).then((function(){_.websocket.connectionID!==s||i||(tv.warning("[".concat(_.clientId,"] ws request timeout, type: ").concat(t)),_.emit(Cv.REQUEST_TIMEOUT,t,n))}))})),l=null,e.prev=10,e.next=13,d;case 13:l=e.sent,e.next=35;break;case 16:if(e.prev=16,e.t1=e.catch(10),this.connectionState!==Rv.CLOSED&&t!==Ov.LEAVE){e.next=20;break}throw new Fv(ql.WS_ABORT);case 20:if(this.spec.forceWaitGatewayResponse&&!r){e.next=24;break}e.t2=e.t1.throw(),e.next=34;break;case 24:if(t!==Ov.JOIN&&t!==Ov.REJOIN){e.next=28;break}e.t3=null,e.next=33;break;case 28:return e.next=30,u();case 30:return e.next=32,this.request(t,n);case 32:e.t3=e.sent;case 33:e.t2=e.t3;case 34:return e.abrupt("return",e.t2);case 35:if(!l.isSuccess){e.next=37;break}return e.abrupt("return",l.message);case 37:if(p=Number(l.message.error_code||l.message.code),f=Bm(p),h=new Fv(ql.UNEXPECTED_RESPONSE,"".concat(f.desc,": ").concat(l.message.error_str),{code:p,data:l.message}),"success"!==f.action){e.next=42;break}e.t4=l.message,e.next=67;break;case 42:if(tv.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(t,", error_code: ").concat(p,", message: ").concat(f.desc,", action: ").concat(f.action)),p!==wv.ERR_TOO_MANY_BROADCASTERS){e.next=47;break}e.t5=t===Ov.JOIN||t===Ov.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw(),e.next=66;break;case 47:if("failed"!==f.action){e.next=51;break}e.t6=h.throw(),e.next=65;break;case 51:if("quit"!==f.action){e.next=55;break}e.t7=(this.initError=h,this.close(),h.throw()),e.next=64;break;case 55:if(p===wv.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,tv.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Bp.MULTI_IP)):this.reconnect(f.action,Bp.SERVER_ERROR),t!==Ov.JOIN&&t!==Ov.REJOIN){e.next=60;break}e.t8=null,e.next=63;break;case 60:return e.next=62,this.request(t,n);case 62:e.t8=e.sent;case 63:e.t7=e.t8;case 64:e.t6=e.t7;case 65:e.t5=e.t6;case 66:e.t4=e.t5;case 67:return e.abrupt("return",e.t4);case 68:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),n.waitMessage=function(e,t){var n=this;return new Vl((function(r){n.on(e,(function i(o){(!t||t(o))&&(n.off(e,i),r(o))}))}))},n.upload=function(e,t){var n=this,r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch(e){var i=W_("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>i&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((function(){if(n.connectionState===Rv.CONNECTED){var e=n.uploadCache.splice(0,1)[0];0===n.uploadCache.length&&(window.clearInterval(n.uploadCacheInterval),n.uploadCacheInterval=void 0),n.upload(e._type,e._message)}}),W_("UPLOAD_CACHE_INTERVAL")||2e3))}},n.send=function(e,t){var n={_type:e,_message:t};this.websocket.sendMessage(n)},n.init=function(e,t){var n=this;return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Vl((function(t,r){n.once(Cv.WS_CONNECTED,(function(){return t(n.joinResponse)})),n.once(Cv.WS_CLOSED,(function(){return r(n.initError||new Fv(ql.WS_ABORT))})),n.connectionState=Rv.CONNECTING,n.websocket.init(e).catch(r),n.wsInflateDataTimer&&window.clearInterval(n.wsInflateDataTimer),n.wsInflateDataTimer=window.setInterval((function(){n.handleWsInflateData()}),2e4)}))},n.close=function(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||jp.LEAVE,this.connectionState=Rv.CLOSED,tv.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===jp.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new $m("gateway-".concat(this.clientId),this.spec.retryConfig,!0,W_("JOIN_GATEWAY_USE_DUAL_DOMAIN"),W_("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents())},n.join=function(){var e=d(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.joinResponse){e.next=11;break}return this.emit(Cv.ABORT_P2P_EXECUTION),e.next=4,$p(this,Cv.REQUEST_JOIN_INFO);case 4:return t=e.sent,e.next=7,this.request(Ov.JOIN,t);case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return",(this.emit(Cv.REPORT_JOIN_GATEWAY,rm.TIMEOUT,this.url||""),!1));case 10:this.joinResponse=n,this.emit(Cv.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token;case 11:return e.abrupt("return",(this.connectionState=Rv.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.rejoin=function(){var e=d(c().mark((function e(){var t,n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reconnectToken){e.next=2;break}throw new Fv(ql.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");case 2:return(t=nf(this,Cv.REQUEST_REJOIN_INFO)).token=this.reconnectToken,e.next=6,this.request(Ov.REJOIN,t);case 6:return n=e.sent,e.abrupt("return",!!n&&(this.connectionState=Rv.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),n.peers&&n.peers.forEach((function(e){r.emit(Iv.ON_USER_ONLINE,{uid:e.uid}),e.audio&&r.emit(Iv.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&r.emit(Iv.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?r.emit(Iv.MUTE_AUDIO,{uid:e.uid}):r.emit(Iv.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?r.emit(Iv.MUTE_VIDEO,{uid:e.uid}):r.emit(Iv.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?r.emit(Iv.ENABLE_LOCAL_AUDIO,{uid:e.uid}):r.emit(Iv.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?r.emit(Iv.ENABLE_LOCAL_VIDEO,{uid:e.uid}):r.emit(Iv.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||r.emit(Iv.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.reconnect=function(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)},n.handleNotification=function(e){tv.debug("[".concat(this.clientId,"] receive notification: "),e);var t=Bm(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(jp.UID_BANNED),void this.close()):void this.reconnect(t.action,Bp.SERVER_ERROR);tv.error("[".concat(this.clientId,"] ignore error: "),t.desc)}},n.handlePingPong=function(){var e=this;if(this.websocket&&"connected"===this.websocket.state){this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;var t=W_("PING_PONG_TIME_OUT"),n=Date.now();this.pingpongTimeoutCount>=t&&(tv.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(n-this.lastMsgTime,"ms")),n-this.lastMsgTime>W_("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Bp.TIMEOUT):this.request(Ov.PING,void 0,!0).then((function(){e.pingpongTimeoutCount=0;var t=Date.now()-n;e.rttRolling.add(t),W_("REPORT_STATS")&&e.send(Ov.PING_BACK,{pingpongElapse:t})})).catch((function(e){}))}},n.handleWsInflateData=function(){var e=this.websocket.getWsInflateData(),t=e.wsInflateLength,n=e.wsDeflateLength;0!==t&&0!==n&&this.upload(Av.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:n,ws_inflate_length:t})},n.handleWebsocketEvents=function(){var e=this;this.websocket.on(Pv.RECONNECT_WAITTING_FINISH,(function(t){e.emit(Cv.WS_RECONNECT_WAITTING_FINISH,t)})),this.websocket.on(Pv.RECONNECT_CREATE_CONNECTION,(function(t){e.emit(Cv.WS_RECONNECT_CREATE_CONNECTION,t)})),this.websocket.on(Pv.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Pv.CLOSED,(function(){e.connectionState=Rv.CLOSED})),this.websocket.on(Pv.FAILED,(function(){e._disconnectedReason=jp.NETWORK_ERROR,e.connectionState=Rv.CLOSED})),this.websocket.on(Pv.RECONNECTING,(function(t){e._websocketReconnectReason=t,e.joinResponse=void 0,e.connectionState===Rv.CONNECTED?e.connectionState=Rv.RECONNECTING:e.connectionState=Rv.CONNECTING})),this.websocket.on(Pv.WILL_RECONNECT,(function(t,n,r){var i=nf(e,Cv.IS_P2P_DISCONNECTED),o=i||"retry"!==t;i&&"retry"===t&&(tv.debug("".concat(e.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),t="tryNext",n=rm.P2P_DISCONNECTED),o&&(tv.debug("".concat(e.clientId," will renewSession, reconnect mode: ").concat(t)),e.emit(Cv.REPORT_JOIN_GATEWAY,n||rm.UNKNOWN_REASON,e.url||""),e.reconnectToken=void 0,e.emit(Cv.NEED_RENEW_SESSION),e.emit(Cv.DISCONNECT_P2P)),r(t)})),this.websocket.on(Pv.CONNECTED,(function(){e.openConnectionTime=Date.now(),e.reconnectToken?e.rejoin().catch((function(t){tv.warning("[".concat(e.clientId,"] rejoin failed ").concat(t)),e.reconnect("tryNext",Bp.SERVER_ERROR)})):e.join().catch((function(t){if(e.emit(Cv.REPORT_JOIN_GATEWAY,t.message||t.code||rm.UNKNOWN_REASON,e.url||""),t instanceof Fv&&t.code===ql.UNEXPECTED_RESPONSE&&t.data.code===wv.ERR_NO_AUTHORIZED)return tv.warning("[".concat(e.clientId,"] reconnect no authorized, recover")),void e.reconnect("recover",Bp.SERVER_ERROR);tv.error("[".concat(e.clientId,"] join gateway request failed"),t.toString()),e.spec.forceWaitGatewayResponse?e.reconnect("tryNext",Bp.SERVER_ERROR):(e.initError=t,e.close())}))})),this.websocket.on(Pv.REQUEST_NEW_URLS,(function(t,n){$p(e,Cv.REQUEST_RECOVER,e.multiIpOption).then(t).catch(n)})),this.websocket.on(Pv.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(function(){e.emit(Iv.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))},s(t,[{key:"connectionState",get:function(){return this._connectionState},set:function(e){e!==this._connectionState&&(this._connectionState=e,e===Rv.CONNECTED?this.emit(Cv.WS_CONNECTED):e===Rv.RECONNECTING?this.emit(Cv.WS_RECONNECTING,this._websocketReconnectReason):e===Rv.CLOSED&&this.emit(Cv.WS_CLOSED,this._disconnectedReason))}},{key:"currentURLIndex",get:function(){return this.websocket.currentURLIndex}},{key:"url",get:function(){return this.websocket&&this.websocket.url||null}},{key:"rtt",get:function(){return this.rttRolling.mean()}}]),t}(Kp),ng="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",rg=ng,ig=Oe("".replace),og=RegExp("^["+rg+"]+"),ag=RegExp("(^|[^"+rg+"])["+rg+"]+$"),sg=function(e){return function(t){var n=gr(at(t));return 1&e&&(n=ig(n,og,"")),2&e&&(n=ig(n,ag,"$1")),n}},cg={start:sg(1),end:sg(2),trim:sg(3)},ug=Ya.PROPER,dg=ng,lg=cg.trim;Yn({target:"String",proto:!0,forced:function(e){return be((function(){return!!dg[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||ug&&dg[e].name!==e}))}("trim")},{trim:function(){return lg(this)}});var pg,fg,hg=ar("String").trim,_g=String.prototype,vg=se((function(e){var t=e.trim;return"string"==typeof e||e===_g||Ae(_g,e)&&t===_g.trim?hg:t}));function mg(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function gg(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function Eg(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function yg(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(pg||(pg={})),function(e){e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change"}(fg||(fg={}));var bg={"90p":gg(160,90),"90p_1":gg(160,90),"120p":gg(160,120,15,30,65),"120p_1":gg(160,120,15,30,65),"120p_3":gg(120,120,15,30,50),"120p_4":gg(212,120),"180p":gg(320,180,15,30,140),"180p_1":gg(320,180,15,30,140),"180p_3":gg(180,180,15,30,100),"180p_4":gg(240,180,15,30,120),"240p":gg(320,240,15,40,200),"240p_1":gg(320,240,15,40,200),"240p_3":gg(240,240,15,40,140),"240p_4":gg(424,240,15,40,220),"360p":gg(640,360,15,80,400),"360p_1":gg(640,360,15,80,400),"360p_3":gg(360,360,15,80,260),"360p_4":gg(640,360,30,80,600),"360p_6":gg(360,360,30,80,400),"360p_7":gg(480,360,15,80,320),"360p_8":gg(480,360,30,80,490),"360p_9":gg(640,360,15,80,800),"360p_10":gg(640,360,24,80,800),"360p_11":gg(640,360,24,80,1e3),"480p":gg(640,480,15,100,500),"480p_1":gg(640,480,15,100,500),"480p_2":gg(640,480,30,100,1e3),"480p_3":gg(480,480,15,100,400),"480p_4":gg(640,480,30,100,750),"480p_6":gg(480,480,30,100,600),"480p_8":gg(848,480,15,100,610),"480p_9":gg(848,480,30,100,930),"480p_10":gg(640,480,10,100,400),"720p":gg(1280,720,15,120,1130),"720p_auto":gg(1280,720,30,900,3e3),"720p_1":gg(1280,720,15,120,1130),"720p_2":gg(1280,720,30,120,2e3),"720p_3":gg(1280,720,30,120,1710),"720p_5":gg(960,720,15,120,910),"720p_6":gg(960,720,30,120,1380),"1080p":gg(1920,1080,15,120,2080),"1080p_1":gg(1920,1080,15,120,2080),"1080p_2":gg(1920,1080,30,120,3e3),"1080p_3":gg(1920,1080,30,120,3150),"1080p_5":gg(1920,1080,60,120,4780),"1440p":gg(2560,1440,30,120,4850),"1440p_1":gg(2560,1440,30,120,4850),"1440p_2":gg(2560,1440,60,120,7350),"4k":gg(3840,2160,30,120,8910),"4k_1":gg(3840,2160,30,120,8910),"4k_3":gg(3840,2160,60,120,13500)},Sg=[{scaleResolutionDownBy:2,width:1280,height:720,frameRate:30,bitrateMin:300,bitrateMax:900},{scaleResolutionDownBy:1.333333,width:1280,height:720,frameRate:30,bitrateMin:600,bitrateMax:2e3},{scaleResolutionDownBy:1,width:1280,height:720,frameRate:30,bitrateMin:900,bitrateMax:3e3}],Tg={"480p":Eg(640,480,5),"480p_1":Eg(640,480,5),"480p_2":Eg(640,480,30),"480p_3":Eg(640,480,15),"720p":Eg(1280,720,5),"720p_auto":gg(1280,720,30,900,3e3),"720p_1":Eg(1280,720,5),"720p_2":Eg(1280,720,30),"720p_3":Eg(1280,720,15),"1080p":Eg(1920,1080,5),"1080p_1":Eg(1920,1080,5),"1080p_2":Eg(1920,1080,30),"1080p_3":Eg(1920,1080,15)},wg={"1SL1TL":yg(1,1),"3SL3TL":yg(3,3),"2SL3TL":yg(2,3)};function Rg(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},bg[e]):e}function Cg(e){return"string"==typeof e?Object.assign({},Tg[e]):e}function Og(e){return"string"==typeof e?Object.assign({},wg[e]):e}var Ag={speech_low_quality:mg(16e3,!1),speech_standard:mg(32e3,!1,18),music_standard:mg(48e3,!1),standard_stereo:mg(48e3,!0,56),high_quality:mg(48e3,!1,128),high_quality_stereo:mg(48e3,!0,192)};function Ig(e){return"string"==typeof e?Object.assign({},Ag[e]):e}var kg,Ng,Pg,Dg,xg,Lg,Mg,Ug,jg,Vg,Bg=[];function Fg(e){return wp(e,"mediaSource",["screen","window","application"]),!0}!function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track"}(kg||(kg={})),function(e){e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream"}(Ng||(Ng={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(Pg||(Pg={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(Dg||(Dg={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY"}(xg||(xg={})),function(e){e.TRANSCEIVER_UPDATED="transceiver-updated"}(Lg||(Lg={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed"}(Mg||(Mg={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(Ug||(Ug={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source"}(jg||(jg={})),function(e){e.UPDATE_TRACK_SOURCE="update-track-source"}(Vg||(Vg={}));var Wg,Gg,Hg,zg,Kg,Yg={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},qg={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},Jg={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},Xg={uplinkNetworkQuality:0,downlinkNetworkQuality:0},Qg={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};!function(e){e.ON_TRACK="on_track",e.ON_NODE="on_node"}(Wg||(Wg={})),function(e){e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints"}(Gg||(Gg={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(Hg||(Hg={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(zg||(zg={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata"}(Kg||(Kg={}));var Zg,$g={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};!function(e){e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error"}(Zg||(Zg={}));var eE=function(e){function t(t,n){var r;return uc(l(r=e.call(this)||this),"_ID",void 0),uc(l(r),"_rtpTransceiver",void 0),uc(l(r),"_lowRtpTransceiver",void 0),uc(l(r),"_hints",[]),uc(l(r),"_isClosed",!1),uc(l(r),"_originMediaStreamTrack",void 0),uc(l(r),"_mediaStreamTrack",void 0),uc(l(r),"_external",{}),r._ID=n||yf(8,"track-"),r._originMediaStreamTrack=t,r._mediaStreamTrack=t,function(e){Or(Bg).call(Bg,e)||Bg.push(e)}(l(r)),r}p(t,e);var n=t.prototype;return n.toString=function(){return this._ID},n.getTrackId=function(){return this._ID},n.getMediaStreamTrack=function(e){if(!e){var t=pv.reportApiInvoke(null,{name:Lp.GET_MEDIA_STREAM_TRACK,options:[],tag:Mp.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?t.onSuccess(this._mediaStreamTrack.label):t.onSuccess("")}return this._mediaStreamTrack},n.getRTCRtpTransceiver=function(e){return e===Pg.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver},n.getMediaStreamTrackSettings=function(){return this.getMediaStreamTrack(!0).getSettings()},n.close=function(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){var t=Bg.indexOf(e);-1!==t&&Bg.splice(t,1)}(this),this.emit(Mg.CLOSED)},n._updateRtpTransceiver=function(e,t){if(t===Pg.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(Lg.TRANSCEIVER_UPDATED,e,t)},t}(Kp),tE=function(e){function t(t,n){var r;return uc(l(r=e.call(this,t,n)||this),"_enabled",!0),uc(l(r),"_muted",!1),uc(l(r),"_isExternalTrack",!1),uc(l(r),"_isClosed",!1),uc(l(r),"_enabledMutex",void 0),uc(l(r),"processor",void 0),uc(l(r),"_handleTrackEnded",(function(){r.onTrackEnded()})),r._enabledMutex=new If("".concat(r.getTrackId())),t.addEventListener("ended",r._handleTrackEnded),r}p(t,e);var n=t.prototype;return n.getTrackLabel=function(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""},n.close=function(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,tv.debug("[".concat(this.getTrackId(),"] close")),this.emit(kg.NEED_CLOSE),e.prototype.close.call(this))},n._updateOriginMediaStreamTrack=function(){var e=d(c().mark((function e(t,n){var r,i=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]&&i[2],this._isExternalTrack=r,e.t0=t!==this._originMediaStreamTrack,!e.t0){e.next=13;break}return this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop()),t.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=t,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),e.next=12,ef(this,kg.NEED_REPLACE_TRACK,this);case 12:this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext});case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n._getDefaultPlayerConfig=function(){return{}},n.onTrackEnded=function(){tv.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Mg.TRACK_ENDED)},n.stateCheck=function(e,t){if(tv.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),Tp(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new Sp(ql.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",tv);if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new Sp(ql.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",tv)},n.getProcessorStats=function(){return this.processorContext.gatherStats()},n.getProcessorUsage=function(){return this.processorContext.gatherUsage()},s(t,[{key:"isExternalTrack",get:function(){return this._isExternalTrack}},{key:"muted",get:function(){return this._muted}},{key:"enabled",get:function(){return this._enabled}},{key:"processorContext",get:function(){return this._processorContext},set:function(e){this._processorContext=e}}]),t}(eE);function nE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rE=window.AudioContext||window.webkitAudioContext,iE=null,oE=new(function(e){function t(){var t;return uc(l(t=e.apply(this,arguments)||this),"prevState",void 0),uc(l(t),"curState",void 0),uc(l(t),"currentTime",void 0),uc(l(t),"currentTimeStuckAt",void 0),uc(l(t),"interruptDetectorTrack",void 0),uc(l(t),"onLocalAudioTrackMute",(function(){tv.info("ios15-interruption-start"),t.emit(fg.IOS_15_16_INTERRUPTION_START)})),uc(l(t),"onLocalAudioTrackUnmute",d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tv.info("ios15-interruption-end"),"running"===t.curState&&!t.duringInterruption){e.next=5;break}tv.info("ios15-interruption-end-canceled"),e.next=10;break;case 5:if(e.t0=iE,!e.t0){e.next=9;break}return e.next=9,iE.suspend();case 9:t.emit(fg.IOS_15_16_INTERRUPTION_END);case 10:case"end":return e.stop()}}),e)})))),t}p(t,e);var n=t.prototype;return n.bindInterruptDetectorTrack=function(e){tv.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)},n.unbindInterruptDetectorTrack=function(e){tv.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)},s(t,[{key:"duringInterruption",get:function(){return"running"===this.prevState&&"interrupted"===this.curState}}]),t}(Kp));function aE(){if(!iE){if(function(){if(rE){tv.info("create audio context");var e,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nE(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},W_("WEBAUDIO_INIT_OPTIONS"));tv.debug("audio context init option:",JSON.stringify(t)),iE=new rE(t),oE.curState=iE.state,iE.onstatechange=function(){oE.prevState=oE.curState,oE.curState=iE?iE.state:void 0;var e=oE.prevState,t=oE.curState,n="running"===t,r="interrupted"===t,i="running"===e,o="suspended"===e,a="interrupted"===e,s=Zl().osVersion;(op()||hp())&&i&&r&&(tv.info("ios".concat(s,"-interruption-start")),oE.emit(fg.IOS_INTERRUPTION_START)),(op()||hp())&&(o||a)&&n&&(tv.info("ios".concat(s,"-interruption-end")),oE.emit(fg.IOS_INTERRUPTION_END)),e!==t&&(tv.debug("AudioContext State Change","".concat(e,"=>").concat(t)),oE.emit(fg.STATE_CHANGE))},setInterval((function(){var e,t=null===(e=iE)||void 0===e?void 0:e.currentTime;oE.currentTime!==t?(oE.currentTimeStuckAt&&(tv.debug("AudioContext current time resume at ".concat(t)),oE.currentTimeStuckAt=void 0),oE.currentTime=t):(t!==oE.currentTimeStuckAt&&(pv.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:Mp.TRACER}).onSuccess(),tv.warning("AudioContext current time stuck at ".concat(t))),oE.currentTimeStuckAt=t)}),5e3),(e=d(c().mark((function e(t){var n,r,i,o,a,s,u,d,l,p,f,h,_,v,m,g;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v=function(){f(!0)},_=function(){r.removeEventListener("playing",_),r.removeEventListener("abort",_),r.removeEventListener("error",_),a=!1,f(!1)},h=function(e){if(o!==e){o=e;for(var t=0,r=n;t<r.length;t++){var i=r[t];e?window.addEventListener(i,v,{capture:!0,passive:!0}):window.removeEventListener(i,v,{capture:!0,passive:!0})}}},f=function(e){if(!a)if(r.paused)if(e){var t;h(!1),a=!0;try{(t=r.play())?t.then(_,_):(r.addEventListener("playing",_),r.addEventListener("abort",_),r.addEventListener("error",_))}catch(e){_()}}else h(!0);else h(!1)},p=function(){s(!0)},l=function(){s(!1)},d=function(){s(!0)},u=function(e){if(i!==e){i=e;for(var t=0,r=n;t<r.length;t+=1){var o=r[t];e?window.addEventListener(o,p,{capture:!0,passive:!0}):window.removeEventListener(o,p,{capture:!0,passive:!0})}}},s=function(e){"running"===t.state?u(!1):op()||hp()?"suspended"===t.state&&(u(!0),e&&t.resume().then(l,l)):"closed"!==t.state&&(u(!0),e&&t.resume().then(l,l))},n=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"],i=!1,o=!1,a=!1,op()&&(m=t.createMediaStreamDestination(),(g=document.createElement("div")).innerHTML="<audio x-webkit-airplay='deny'></audio>",(r=g.children.item(0)).controls=!1,r.disableRemotePlayback=!0,r.preload="auto",r.srcObject=m.stream,f(!0)),oE.on(fg.STATE_CHANGE,d),s(!1);case 13:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})(iE)}else tv.error("your browser is not support web audio")}(),!iE)throw new Sp(ql.NOT_SUPPORTED,"can not create audio context");return iE}return iE}function sE(){return!!iE}function cE(e){if(!function(){if(null!==uE)return uE;var e=aE(),t=e.createBufferSource(),n=e.createGain(),r=e.createGain();t.connect(n),t.connect(r),t.disconnect(n);var i=!1;try{t.disconnect(n)}catch(e){i=!0}return t.disconnect(),uE=i,i}()){var t=e.connect,n=e.disconnect;e.connect=function(n,r,i){var o;return e._inputNodes||(e._inputNodes=[]),Or(o=e._inputNodes).call(o,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,i)):t.call(e,n,r)),e},e.disconnect=function(r,o,a){n.call(e),r?sf(e._inputNodes,r):e._inputNodes=[];for(var s,c=i(e._inputNodes);!(s=c()).done;){var u=s.value;t.call(e,u)}}}}var uE=null;function dE(e,t){var n=!1,r=1/t;if(W_("DISABLE_WEBAUDIO"))var i=window.setInterval((function(){n?window.clearInterval(i):e(performance.now()/1e3)}),1e3*r);else{var o=aE(),a=o.createGain();a.gain.value=0,a.connect(o.destination),function t(){if(n)a=null;else{var i=o.createOscillator();i.onended=t,i.connect(a),i.start(0),i.stop(o.currentTime+r),e(o.currentTime)}}()}return function(){n=!0}}var lE={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1};function pE(){return lE}var fE=function(){function e(){uc(this,"context",void 0),uc(this,"analyserNode",void 0),uc(this,"sourceNode",void 0),this.context=aE(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}var t=e.prototype;return t.updateSource=function(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}},t.getVolumeLevel=function(){if(!this.sourceNode)return 0;if(!this.context||op()||hp()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;var e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{var t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(var n=0;n<e.length;++n)e[n]=t[n]/128-1}var r=Bf(e).call(e,(function(e,t){return e+t*t}),0)/e.length;return Math.max(10*Math.log10(r)+100,0)/100},t.getAnalyserNode=function(){return this.analyserNode},t.rebuildAnalyser=function(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){tv.warning("rebuild analyser node failed.")}},t.destroy=function(){this.updateSource(void 0)},e}(),hE=function(e){function t(){var t;return uc(l(t=e.call(this)||this),"outputNode",void 0),uc(l(t),"outputTrack",void 0),uc(l(t),"isPlayed",!1),uc(l(t),"context",void 0),uc(l(t),"audioBufferNode",void 0),uc(l(t),"destNode",void 0),uc(l(t),"audioOutputLevel",0),uc(l(t),"volumeLevelAnalyser",void 0),uc(l(t),"_processedNode",void 0),uc(l(t),"playNode",void 0),uc(l(t),"isDestroyed",!1),uc(l(t),"onNoAudioInput",void 0),uc(l(t),"isNoAudioInput",!1),uc(l(t),"_noAudioInputCount",0),t.context=aE(),t.playNode=t.context.destination,t.outputNode=t.context.createGain(),cE(t.outputNode),t.volumeLevelAnalyser=new fE,t}p(t,e);var n=t.prototype;return n.startGetAudioBuffer=function(e){var t=this;this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=function(e){t.emit(jg.ON_AUDIO_BUFFER,function(e){for(var t=0;t<e.outputBuffer.numberOfChannels;t+=1)for(var n=e.outputBuffer.getChannelData(t),r=0;r<n.length;r+=1)n[r]=0;return e.inputBuffer}(e))})},n.stopGetAudioBuffer=function(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)},n.createOutputTrack=function(){if(!pE().webAudioMediaStreamDest)throw new Sp(ql.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack},n.play=function(e){"running"!==this.context.state&&uf((function(){oE.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)},n.stop=function(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1},n.getAccurateVolumeLevel=function(){return this.volumeLevelAnalyser.getVolumeLevel()},n.checkHasAudioInput=function(){var e=d(c().mark((function e(){var t,n,r,i,o,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=a.length>0&&void 0!==a[0]?a[0]:0)>5)){e.next=3;break}return e.abrupt("return",(this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1));case 3:for(op()||hp()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume(),(n=this.volumeLevelAnalyser.getAnalyserNode()).getFloatTimeDomainData?(r=new Float32Array(n.fftSize),n.getFloatTimeDomainData(r)):(r=new Uint8Array(n.fftSize),n.getByteTimeDomainData(r)),i=!1,o=0;o<r.length;o++)0!==r[o]&&(i=!0);if(!i){e.next=12;break}e.t0=(this.isNoAudioInput=!1,!0),e.next=20;break;case 12:return e.next=14,Ef(200);case 14:return e.next=16,this.checkHasAudioInput(t?t+1:1);case 16:if(e.t1=e.sent,!e.t1){e.next=19;break}e.t1=i;case 19:e.t0=e.t1;case 20:return e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getAudioVolume=function(){return this.outputNode.gain.value},n.setVolume=function(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)},n.destroy=function(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0},n.disconnect=function(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()},n.connect=function(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)},s(t,[{key:"processSourceNode",get:function(){return this.sourceNode}},{key:"processedNode",get:function(){return this._processedNode},set:function(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}}]),t}(Kp),_E=function(e){function t(t,n,r){var i,o;if(uc(l(i=e.call(this)||this),"sourceNode",void 0),uc(l(i),"track",void 0),uc(l(i),"clonedTrack",void 0),uc(l(i),"audioElement",void 0),uc(l(i),"isCurrentTrackCloned",!1),uc(l(i),"isRemoteTrack",!1),uc(l(i),"originVolumeLevelAnalyser",void 0),uc(l(i),"rebuildWebAudio",d(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tv.debug("ready to rebuild web audio, state:",i.context.state),e.t0=i.isNoAudioInput,!e.t0){e.next=5;break}return e.next=5,i.checkHasAudioInput();case 5:if(i.isNoAudioInput&&!i.isDestroyed){e.next=7;break}return e.abrupt("return",(document.body.removeEventListener("click",i.rebuildWebAudio,!0),void tv.debug("rebuild web audio success, current volume status",i.getAccurateVolumeLevel())));case 7:i.context.resume().then((function(){return tv.info("resume success")})),tv.debug("rebuild web audio because of ios 12 bugs"),i.disconnect(),t=i.track,i.track=i.track.clone(),i.isCurrentTrackCloned?t.stop():i.isCurrentTrackCloned=!0,n=new MediaStream([i.track]),i.sourceNode=i.context.createMediaStreamSource(n),cE(i.sourceNode),i.volumeLevelAnalyser.rebuildAnalyser(),r=i.outputNode.gain.value,i.outputNode=i.context.createGain(),i.outputNode.gain.setValueAtTime(r,i.context.currentTime),cE(i.outputNode),i.emit(jg.UPDATE_SOURCE),i.connect(),i.audioElement.srcObject=n,i.isPlayed&&i.play(i.playNode),i.checkHasAudioInput();case 14:case"end":return e.stop()}}),e)})))),"audio"!==t.kind)throw new Sp(ql.UNEXPECTED_ERROR);i.track=t;var a=new MediaStream([i.track]);if(i.isRemoteTrack=!!n,i.sourceNode=i.context.createMediaStreamSource(a),cE(i.sourceNode),r){var s=r.clone();s.enabled=!0,i.clonedTrack=s,tv.debug("create an unmuted track ".concat(s.id," from the original track ").concat(r.id," to get the volume"));var u=i.context.createMediaStreamSource(new MediaStream([s]));cE(u),i.originVolumeLevelAnalyser=new fE,i.originVolumeLevelAnalyser.updateSource(u)}i.connect(),i.audioElement=document.createElement("audio"),i.audioElement.srcObject=a;var p=Zl();return n&&p.os===Wl.IOS&&Number(null===(o=p.osVersion)||void 0===o?void 0:o.split(".")[0])<15&&(oE.on(fg.STATE_CHANGE,(function(){"suspended"===i.context.state?document.body.addEventListener("click",i.rebuildWebAudio,!0):"running"===i.context.state&&i.rebuildWebAudio()})),i.checkHasAudioInput().then((function(e){e||document.body.addEventListener("click",i.rebuildWebAudio,!0)}))),l(i)}p(t,e);var n=t.prototype;return n.updateTrack=function(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;var t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),cE(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(jg.UPDATE_SOURCE),this.audioElement.srcObject=t},n.destroy=function(){var t;this.audioElement.srcObject=null,this.audioElement.remove(),oE.off("state-change",this.rebuildWebAudio),null===(t=this.originVolumeLevelAnalyser)||void 0===t||t.destroy(),this.clonedTrack=void 0,e.prototype.destroy.call(this)},n.createMediaStreamSourceNode=function(e){return this.context.createMediaStreamSource(new MediaStream([e]))},n.updateOriginTrack=function(e){var t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),tv.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));var n=this.context.createMediaStreamSource(new MediaStream([t]));cE(n),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(n)},n.getOriginVolumeLevel=function(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()},s(t,[{key:"isFreeze",get:function(){return!1}}]),t}(hE);function vE(e,t,n){return mE.apply(this,arguments)}function mE(){return(mE=d(c().mark((function e(t,n,r){var i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={audio:!!r&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxHeight:(i=function(e,t){return e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t})(n.height,1080),maxWidth:i(n.width,1920)}}},n.frameRate&&"number"!=typeof n.frameRate?(o.video.mandatory.maxFrameRate=n.frameRate.max,o.video.mandatory.minFrameRate=n.frameRate.min):"number"==typeof n.frameRate&&(o.video.mandatory.maxFrameRate=n.frameRate),e.next=4,navigator.mediaDevices.getUserMedia(o);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gE(e,t){return EE.apply(this,arguments)}function EE(){return(EE=d(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yE(t.mediaSource);case 2:return r=e.sent,e.next=5,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Vl((function(n,r){var i=document.createElement("div");i.innerText="share screen",i.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var o=document.createElement("div");o.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var a=document.createElement("div");a.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",a.setAttribute("style","height: 12%;");var s=document.createElement("div");s.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var c=document.createElement("div");c.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");var u=document.createElement("button");u.innerHTML="cancel",u.setAttribute("style","width: 85px;"),u.onclick=function(){document.body.removeChild(h);var e=new Error("NotAllowedError");e.name="NotAllowedError",r(e)};var d=t,l=document.createElement("div");if(t){var p=document.createElement("input");p.setAttribute("type","checkbox");var f=document.createElement("span");p.setAttribute("style","margin-right: 6px;"),f.innerText="Share audio",p.checked=d,p.onchange=function(){d=p.checked},l.appendChild(p),l.appendChild(f)}c.appendChild(l),c.appendChild(u),o.appendChild(a),o.appendChild(s),o.appendChild(c);var h=document.createElement("div");h.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),h.appendChild(i),h.appendChild(o),document.body.appendChild(h),e.map((function(e){if(e.id){var t=document.createElement("div");t.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");var r=e.thumbnail;try{r.getSize().width>1920&&(r=r.resize({width:1920}))}catch(e){throw e&&e.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),e}t.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",t.onclick=function(){document.body.removeChild(h),n({sourceId:e.id,audio:d})},s.appendChild(t)}}))}))}(r,n);case 5:return i=e.sent,o=i.sourceId,a=i.audio,e.next=10,vE(o,t,a);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yE(e){return bE.apply(this,arguments)}function bE(){return(bE=d(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=["window","screen"],"application"!==t&&"window"!==t||(n=["window"]),"screen"===t&&(n=["screen"]),r=qp()){e.next=5;break}throw console.error("failed to fetch electron, please mount it to window"),new Sp(ql.ELECTRON_IS_NULL);case 5:i=null;try{i=(null===(o=r.desktopCapturer)||void 0===o?void 0:o.getSources({types:n}))||r.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:n})}catch(e){i=null}return i&&i.then||(i=new Vl((function(e,t){r.desktopCapturer.getSources({types:n},(function(n,r){n?t(n):e(r)}))}))),e.prev=8,e.next=11,i;case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(8),new Sp(ql.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.t0.toString());case 17:case"end":return e.stop()}}),e,null,[[8,14]])})))).apply(this,arguments)}function SE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var TE=new If("safari"),wE=!1,RE=!1;function CE(e,t){return OE.apply(this,arguments)}function OE(){return(OE=d(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,i=null;case 1:if(!(r<2)){e.next=23;break}return e.prev=2,e.next=5,AE(t,n,r>0);case 5:return i=e.sent,e.abrupt("break",23);case 9:if(e.prev=9,e.t0=e.catch(2),!(e.t0 instanceof Sp)){e.next=13;break}throw tv.error("[".concat(n,"] ").concat(e.t0.toString())),e.t0;case 13:if((o=kE(e.t0.name||e.t0.code||e.t0,e.t0.message)).code!==ql.MEDIA_OPTION_INVALID){e.next=20;break}return tv.debug("[".concat(n,"] detect media option invalid, retry")),r+=1,e.next=19,Ef(500);case 19:return e.abrupt("continue",21);case 20:throw tv.error("[".concat(n,"] ").concat(o.toString())),o;case 21:e.next=1;break;case 23:if(i){e.next=25;break}throw new Sp(ql.UNEXPECTED_ERROR,"can not find stream after getUserMedia");case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function AE(e,t,n){return IE.apply(this,arguments)}function IE(){return(IE=d(c().mark((function e(t,n,r){var i,o,a,s,u,d,l,p,f,h,_,v,m,g,E,y,b,S;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Sp(ql.NOT_SUPPORTED,"can not find getUserMedia");case 2:if(r&&(t.video&&(delete t.video.width,delete t.video.height),t.screen&&(delete t.screen.width,delete t.screen.height)),i=pE(),o=new MediaStream,t.audioSource&&o.addTrack(t.audioSource),t.videoSource&&o.addTrack(t.videoSource),t.audio||t.video||t.screen){e.next=6;break}return e.abrupt("return",(tv.debug("Using Video Source/ Audio Source"),o));case 6:if(!t.screen){e.next=62;break}if(!qp()){e.next=25;break}if(!t.screen.sourceId){e.next=17;break}return e.t0=NE,e.t1=o,e.next=13,vE(t.screen.sourceId,t.screen,t.screenAudio);case 13:e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=23;break;case 17:return e.t3=NE,e.t4=o,e.next=21,gE(t.screen,t.screenAudio);case 21:e.t5=e.sent,(0,e.t3)(e.t4,e.t5);case 23:e.next=62;break;case 25:if(!(np()&&t.screen.extensionId&&t.screen.mandatory)){e.next=41;break}if(i.getStreamFromExtension){e.next=28;break}throw new Sp(ql.NOT_SUPPORTED,"This browser does not support screen sharing");case 28:return tv.debug("[".concat(n,'] Screen access on chrome stable, looking for extension"')),e.next=31,m=t.screen.extensionId,g=n,new Vl((function(e,t){try{chrome.runtime.sendMessage(m,{getStream:!0},(function(n){if(!n||!n.streamId)return tv.error("[".concat(g,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new Sp(ql.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(e){tv.error("[".concat(g,"] AgoraRTC screensharing plugin is not accessible(").concat(m,")"),e.toString()),t(new Sp(ql.CHROME_PLUGIN_NOT_INSTALL))}}));case 31:return a=e.sent,t.screen.mandatory.chromeMediaSourceId=a,e.t6=NE,e.t7=o,e.next=37,navigator.mediaDevices.getUserMedia({video:{mandatory:t.screen.mandatory}});case 37:e.t8=e.sent,(0,e.t6)(e.t7,e.t8),e.next=62;break;case 41:if(!i.getDisplayMedia){e.next=51;break}return t.screen.mediaSource&&Fg(t.screen.mediaSource),u={width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate,displaySurface:null!==(s=t.screen.displaySurface)&&void 0!==s?s:"screen"===t.screen.mediaSource?"monitor":t.screen.mediaSource},d=t.screen,l=d.selfBrowserSurface,p=d.surfaceSwitching,f=d.systemAudio,h={selfBrowserSurface:l,surfaceSwitching:p,systemAudio:f},!l&&delete h.selfBrowserSurface,!p&&delete h.surfaceSwitching,!f&&delete h.systemAudio,tv.debug("[".concat(n,"] getDisplayMedia:"),JSON.stringify({video:u,audio:!!t.screenAudio,controls:h})),e.next=47,navigator.mediaDevices.getDisplayMedia(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SE(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({video:u,audio:!!t.screenAudio},h));case 47:_=e.sent,NE(o,_),e.next=62;break;case 51:if(ip()){e.next=53;break}throw tv.error("[".concat(n,"] This browser does not support screenSharing")),new Sp(ql.NOT_SUPPORTED,"This browser does not support screen sharing");case 53:return t.screen.mediaSource&&Fg(t.screen.mediaSource),v={video:{mediaSource:t.screen.mediaSource,width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate}},tv.debug("[".concat(n,"] getUserMedia: ").concat(JSON.stringify(v))),e.t9=NE,e.t10=o,e.next=60,navigator.mediaDevices.getUserMedia(v);case 60:e.t11=e.sent,(0,e.t9)(e.t10,e.t11);case 62:if(t.video||t.audio){e.next=64;break}return e.abrupt("return",o);case 64:if(E={video:t.video,audio:t.audio},y=W_("MEDIA_DEVICE_CONSTRAINTS"))try{"string"==typeof y&&(y=JSON.parse(y)),E=Cf(E,y)}catch(e){}if(tv.debug("[".concat(n,"] GetUserMedia"),JSON.stringify(E)),Zl(),S=null,e.t12=rp()||op()||tp(),!e.t12){e.next=73;break}return e.next=72,TE.lock();case 72:S=e.sent;case 73:return e.prev=73,e.next=76,navigator.mediaDevices.getUserMedia(E);case 76:b=e.sent,e.next=82;break;case 79:throw e.prev=79,e.t13=e.catch(73),S&&S(),e.t13;case 82:return e.abrupt("return",(E.audio&&(wE=!0),E.video&&(RE=!0),NE(o,b),S&&S(),o));case 83:case"end":return e.stop()}}),e,null,[[73,79]])})))).apply(this,arguments)}function kE(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Sp(ql.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new Sp(ql.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new Sp(ql.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new Sp(ql.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Sp(ql.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new Sp(ql.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return tv.error("getUserMedia unexpected error",e),new Sp(ql.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function NE(e,t){var n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(r&&e.removeTrack(r),e.addTrack(o)),i&&(n&&e.removeTrack(n),e.addTrack(i))}var PE=new(function(e){function t(){var t;return uc(l(t=e.call(this)||this),"_state",Hg.IDLE),uc(l(t),"isAccessMicrophonePermission",!1),uc(l(t),"isAccessCameraPermission",!1),uc(l(t),"lastAccessMicrophonePermission",!1),uc(l(t),"lastAccessCameraPermission",!1),uc(l(t),"checkdeviceMatched",!1),uc(l(t),"deviceInfoMap",new Map),t.init().then((function(){navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",t.updateDevicesInfo.bind(l(t))),window.setInterval((function(){(W_("ENUMERATE_DEVICES_INTERVAL")||(gp()||$l()===Wl.HARMONY_OS)&&mp())&&t.updateDevicesInfo()}),W_("ENUMERATE_DEVICES_INTERVAL_TIME"))})).catch((function(e){return tv.error(e.toString())})),t}p(t,e);var n=t.prototype;return n.enumerateDevices=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u,d,l,p,f,h,_,v=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.length>2&&void 0!==v[2]&&v[2],navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=3;break}return e.abrupt("return",new Sp(ql.NOT_SUPPORTED,"enumerateDevices() not supported.").throw());case 3:return e.next=5,navigator.mediaDevices.enumerateDevices();case 5:if(i=e.sent,o=this.checkMediaDeviceInfoIsOk(i),a=!this.isAccessMicrophonePermission&&t,s=!this.isAccessCameraPermission&&n,o.audio&&(a=!1),o.video&&(s=!1),u=null,d=null,l=null,r||!a&&!s){e.next=65;break}if(!TE.isLocked){e.next=18;break}return tv.debug("[device manager] wait GUM lock"),e.next=15,TE.lock();case 15:e.t0=e.sent,(0,e.t0)(),tv.debug("[device manager] GUM unlock");case 18:if(wE&&(a=!1,this.isAccessMicrophonePermission=!0),RE&&(s=!1,this.isAccessCameraPermission=!0),tv.debug("[device manager] check media device permissions",t,n,a,s),!a||!s){e.next=34;break}return e.prev=19,e.next=22,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 22:l=e.sent,e.next=31;break;case 25:if(e.prev=25,e.t1=e.catch(19),(p=kE(e.t1.name||e.t1.code||e.t1,e.t1.message)).code!==ql.PERMISSION_DENIED){e.next=30;break}throw p;case 30:tv.warning("getUserMedia failed in getDevices",p);case 31:this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0,e.next=64;break;case 34:if(!a){e.next=50;break}return e.prev=35,e.next=38,navigator.mediaDevices.getUserMedia({audio:t});case 38:u=e.sent,e.next=47;break;case 41:if(e.prev=41,e.t2=e.catch(35),(f=kE(e.t2.name||e.t2.code||e.t2,e.t2.message)).code!==ql.PERMISSION_DENIED){e.next=46;break}throw f;case 46:tv.warning("getUserMedia failed in getDevices",f);case 47:this.isAccessMicrophonePermission=!0,e.next=64;break;case 50:if(!s){e.next=64;break}return e.prev=51,e.next=54,navigator.mediaDevices.getUserMedia({video:n});case 54:d=e.sent,e.next=63;break;case 57:if(e.prev=57,e.t3=e.catch(51),(h=kE(e.t3.name||e.t3.code||e.t3,e.t3.message)).code!==ql.PERMISSION_DENIED){e.next=62;break}throw h;case 62:tv.warning("getUserMedia failed in getDevices",h);case 63:this.isAccessCameraPermission=!0;case 64:tv.debug("[device manager] mic permission",t,"cam permission",n);case 65:return e.prev=65,e.next=68,navigator.mediaDevices.enumerateDevices();case 68:return _=e.sent,e.abrupt("return",(u&&u.getTracks().forEach((function(e){return e.stop()})),d&&d.getTracks().forEach((function(e){return e.stop()})),l&&l.getTracks().forEach((function(e){return e.stop()})),u=null,d=null,l=null,_));case 72:return e.prev=72,e.t4=e.catch(65),u&&u.getTracks().forEach((function(e){return e.stop()})),d&&d.getTracks().forEach((function(e){return e.stop()})),l&&l.getTracks().forEach((function(e){return e.stop()})),u=null,d=null,l=null,e.abrupt("return",new Sp(ql.ENUMERATE_DEVICES_FAILED,e.t4.toString()).throw());case 76:case"end":return e.stop()}}),e,this,[[19,25],[35,41],[51,57],[65,72]])})));return function(t,n){return e.apply(this,arguments)}}(),n.getRecordingDevices=function(){var e=d(c().mark((function e(){var t,n=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.enumerateDevices(!0,!1,t);case 3:return e.abrupt("return",e.sent.filter((function(e){return"audioinput"===e.kind})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getCamerasDevices=function(){var e=d(c().mark((function e(){var t,n=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.enumerateDevices(!1,!0,t);case 3:return e.abrupt("return",e.sent.filter((function(e){return"videoinput"===e.kind})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getSpeakers=function(){var e=d(c().mark((function e(){var t,n=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.enumerateDevices(!0,!1,t);case 3:return e.abrupt("return",e.sent.filter((function(e){return"audiooutput"===e.kind})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.searchDeviceIdByName=function(e){var t=null;return this.deviceInfoMap.forEach((function(n){n.device.label===e&&(t=n.device.deviceId)})),t},n.getDeviceById=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices(!0,!0,!0);case 2:if(n=e.sent.find((function(e){return e.deviceId===t}))){e.next=5;break}throw new Sp(ql.DEVICE_NOT_FOUND,"deviceId: ".concat(t));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.init=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state=Hg.INITING,e.prev=1,e.next=4,this.updateDevicesInfo();case 4:this.state=Hg.INITEND,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),tv.warning("Device Detection functionality cannot start properly.",e.t0.toString()),this.state=Hg.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new Sp(ql.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e.t0;case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),n.updateDevicesInfo=function(){var e=d(c().mark((function e(){var t,n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices(!0,!0,!0);case 2:if(t=e.sent,n=Date.now(),r=[],t[0]&&t[0].label&&!1===this.checkdeviceMatched&&(this.checkdeviceMatched=!0,i=t.find((function(e){return"audioinput"===e.kind&&"default"===e.deviceId})),o=t.find((function(e){return"audiooutput"===e.kind&&"default"===e.deviceId})),i&&o?o.groupId===i.groupId?tv.debug("[device-check] default input ".concat(i.label," and output ").concat(o.label," is the same group")):tv.warning("[device-check] default input ".concat(i.label," and output ").concat(o.label," is not the same group")):tv.debug("[device-check] default input or output not found")),a=this.checkMediaDeviceInfoIsOk(t),t.forEach((function(e){if(e.deviceId){var t=s.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(t?t.state:"INACTIVE")){var i={initAt:n,updateAt:n,device:e,state:"ACTIVE"};s.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),i),r.push(i)}t&&(t.updateAt=n)}})),this.deviceInfoMap.forEach((function(e,t){"ACTIVE"===e.state&&e.updateAt!==n&&(e.state="INACTIVE",r.push(e))})),this.state===Hg.INITEND){e.next=9;break}return e.abrupt("return",(a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0))));case 9:r.forEach((function(e){switch(e.device.kind){case"audioinput":s.lastAccessMicrophonePermission&&s.isAccessMicrophonePermission&&s.emit(zg.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":s.lastAccessCameraPermission&&s.isAccessCameraPermission&&s.emit(zg.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":s.lastAccessMicrophonePermission&&s.isAccessMicrophonePermission&&s.emit(zg.PLAYOUT_DEVICE_CHANGED,e)}})),a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.checkMediaDeviceInfoIsOk=function(e){for(var t,n=e.filter((function(e){return"audioinput"===e.kind})),r=e.filter((function(e){return"videoinput"===e.kind})),o={audio:!1,video:!1},a=i(n);!(t=a()).done;){var s=t.value;if(s.label&&s.deviceId){o.audio=!0;break}}for(var c,u=i(r);!(c=u()).done;){var d=c.value;if(d.label&&d.deviceId){o.video=!0;break}}return o},s(t,[{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(this.emit(zg.STATE_CHANGE,e),this._state=e)}}]),t}(Kp)),DE=!1,xE=new(function(e){function t(){var t;return uc(l(t=e.apply(this,arguments)||this),"onAutoplayFailed",void 0),uc(l(t),"onAudioAutoplayFailed",void 0),t}return p(t,e),t}(Kp));function LE(){if(Zl(),!DE){var e=function e(t){t.preventDefault(),DE=!1,Ep()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};DE=!0,Ep()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),tv.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),xE.onAutoplayFailed?xE.onAutoplayFailed():xE.onAudioAutoplayFailed?tv.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):tv.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),xE.emit("autoplay-failed")}}function ME(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ME(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jE(e,t,n,r){if(e){var i=pv.getBaseInfoBySessionId(e);if(i){var o=i.info,a=Date.now(),s=UE(UE({},o),{},{vid:void 0===o.vid?0:Number(o.vid),lts:a,elapse:a-i.startTime,cbRegistered:xE.onAutoplayFailed||xE.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});pv.send({type:iv.AUTOPLAY_FAILED,data:s},!0)}}}var VE=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],BE=new(function(){function e(){var e=this;uc(this,"onAutoplayFailed",void 0),uc(this,"elementMap",new Map),uc(this,"elementStateMap",new Map),uc(this,"elementsNeedToResume",[]),uc(this,"sinkIdMap",new Map),uc(this,"autoResumeAfterInterruption",(function(){Array.from(e.elementMap.entries()).forEach((function(t){var n=t[0],r=t[1],i=e.elementStateMap.get(n),o=r.srcObject.getAudioTracks()[0];lp()?o&&"live"===o.readyState&&"running"===oE.curState&&(tv.debug("auto resume after interruption for iOS 15"),r.pause(),r.play()):i&&"paused"===i&&o&&"live"===o.readyState&&"running"===oE.curState&&(tv.debug("auto resume after interruption for iOS"),r.play())}))})),uc(this,"autoResumeAfterInterruptionOnIOS15_16",(function(){Array.from(e.elementMap.entries()).forEach((function(e){e[0];var t=e[1],n=t.srcObject.getAudioTracks()[0];n&&"live"===n.readyState&&(tv.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),t.pause(),t.play())}))})),this.autoResumeAudioElement(),oE.on(fg.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),oE.on(fg.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),oE.on(fg.STATE_CHANGE,(function(){op()&&"suspended"===oE.prevState&&"running"===oE.curState&&e.autoResumeAfterInterruption()}))}var t=e.prototype;return t.setSinkID=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.elementMap.get(t),this.sinkIdMap.set(t,n),!r){e.next=10;break}return e.prev=2,e.next=5,r.setSinkId(n);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new Sp(ql.PERMISSION_DENIED,"can not set sink id: "+e.t0.toString());case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),t.play=function(e,t,n,r){var i=this;if(!this.elementMap.has(t)){var o=document.createElement("audio");o.autoplay=!0,o.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,o),this.elementMap.set(t,o),this.elementStateMap.set(t,Kg.INIT),this.setVolume(t,n);var a=this.sinkIdMap.get(t);if(a)try{o.setSinkId(a).catch((function(e){tv.warning("[".concat(t,"] set sink id failed"),e.toString())}))}catch(e){tv.warning("[".concat(t,"] set sink id failed"),e.toString())}var s=o.play();s&&s.then&&s.catch((function(e){r&&jE(r,"audio",e.message,t),tv.warning("audio element play warning",e.toString()),i.elementMap.has(t)&&"NotAllowedError"===e.name&&(tv.warning("detected audio element autoplay failed"),i.elementsNeedToResume.push(o),uf((function(){i.onAutoplayFailed&&i.onAutoplayFailed(),LE()})))}))}},t.updateTrack=function(e,t){var n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))},t.isPlaying=function(e){return this.elementMap.has(e)&&"playing"===this.elementStateMap.get(e)},t.setVolume=function(e,t){var n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)},t.stop=function(e){var t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),t){var n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}},t.bindAudioElementEvents=function(e,t){var n=this;VE.forEach((function(r){t.addEventListener(r,(function(r){var i=n.elementStateMap.get(e),o="pause"===r.type?"paused":r.type;if(tv.debug("[".concat(e,"] audio-element-status change ").concat(i," => ").concat(o)),"error"===r.type){var a=null==t?void 0:t.error;a&&tv.error("[".concat(e,"] media error, code: ").concat(a.code,", message: ").concat(a.message))}n.elementStateMap.set(e,o)}))}))},t.getPlayerState=function(e){return this.elementStateMap.get(e)||"uninit"},t.autoResumeAudioElement=function(){var e=this,t=function(){e.elementsNeedToResume.forEach((function(e){e.play().then((function(e){tv.debug("Auto resume audio element success")})).catch((function(e){tv.warning("Auto resume audio element failed!",e)}))})),e.elementsNeedToResume=[]};new Vl((function(e){document.body?e():window.addEventListener("load",(function(){return e()}))})).then((function(){Ep()?document.body.addEventListener("click",t,!0):(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0))}))},e}());function FE(){return function(e,t,n){var r=n.value;return"function"==typeof r&&(n.value=function(){this._isClosed&&new Sp(ql.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",tv);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.apply(this,t);return i instanceof Vl?new Vl((function(e,t){i.then(e).catch(t)})):i}),n}}function WE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WE(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var HE=function(e){function t(t){var n;return uc(l(n=e.call(this)||this),"name","VideoProcessorDestination"),uc(l(n),"ID","0"),uc(l(n),"_source",void 0),uc(l(n),"videoContext",void 0),uc(l(n),"inputTrack",void 0),n.videoContext=t,n}p(t,e);var n=t.prototype;return n.pipe=function(){throw new Sp(ql.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")},n.unpipe=function(){throw new Sp(ql.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")},n.enable=function(){},n.disable=function(){},n.updateInput=function(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(Wg.ON_TRACK,e.track))},n.reset=function(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(Wg.ON_TRACK,void 0)},s(t,[{key:"kind",get:function(){return"video"}},{key:"enabled",get:function(){return!0}}]),t}(Kp),zE=function(e){function t(t,n){var r;return uc(l(r=e.call(this)||this),"constraintsMap",new Map),uc(l(r),"statsRegistry",[]),uc(l(r),"usageRegistry",[]),uc(l(r),"trackId",void 0),uc(l(r),"direction",void 0),uc(l(r),"_chained",!1),r.trackId=t,r.direction=n,r}p(t,e);var n=t.prototype;return n.getConstraints=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$p(this,Gg.REQUEST_CONSTRAINTS);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.requestApplyConstraints=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(tv.info("processor ".concat(n.name," requestApplyConstraints for ").concat(this.trackId)),t&&this.constraintsMap.set(n,t),ef(this,Gg.REQUEST_UPDATE_CONSTRAINTS,Array.from(jv(r=this.constraintsMap).call(r)))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.requestRevertConstraints=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.constraintsMap.has(t)){e.next=2;break}return e.abrupt("return",(tv.info("processor ".concat(t.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(t),ef(this,Gg.REQUEST_UPDATE_CONSTRAINTS,Array.from(jv(n=this.constraintsMap).call(n)))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.registerStats=function(e,t,n){this.statsRegistry.find((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})},n.unregisterStats=function(e,t){var n=this.statsRegistry.findIndex((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}));-1!==n&&this.statsRegistry.splice(n,1)},n.gatherStats=function(){for(var e,t=[],n=i(this.statsRegistry);!(e=n()).done;){var r=e.value,o=r.processorID,a=r.processorName,s=r.type,c=r.cb;try{var u=c();t.push({processorID:o,processorName:a,type:s,stats:u})}catch(t){tv.error(new Sp(ql.UNEXPECTED_ERROR,t.message))}}return t},n.registerUsage=function(e,t){this.usageRegistry.find((function(t){return t.processorID===e.ID&&t.processorName===e.name}))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})},n.unregisterUsage=function(e){var t=this.usageRegistry.findIndex((function(t){return t.processorID===e.ID&&t.processorName===e.name}));-1!==t&&this.usageRegistry.splice(t,1)},n.gatherUsage=function(){var e=d(c().mark((function e(){var t,n,r,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.chained){e.next=3;break}return e.abrupt("return",[]);case 3:n=i(this.usageRegistry);case 4:if((r=n()).done){e.next=21;break}if(o=r.value.cb,e.prev=6,a=o(),e.t0=a instanceof Vl,!e.t0){e.next=13;break}return e.next=12,a;case 12:a=e.sent;case 13:t.push(GE(GE({},a),{},{direction:this.direction})),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(6),tv.error("gather extension usage error",e.t1);case 19:e.next=4;break;case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(){return e.apply(this,arguments)}}(),n.getDirection=function(){return this.direction},s(t,[{key:"chained",get:function(){return this._chained},set:function(e){this._chained=e}}]),t}(Kp),KE=function(e){function t(t){var n;return uc(l(n=e.call(this)||this),"name","AudioProcessorDestination"),uc(l(n),"ID","0"),uc(l(n),"inputTrack",void 0),uc(l(n),"inputNode",void 0),uc(l(n),"audioProcessorContext",void 0),uc(l(n),"_source",void 0),n.audioProcessorContext=t,n}p(t,e);var n=t.prototype;return n.pipe=function(){throw new Sp(ql.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")},n.unpipe=function(){throw new Sp(ql.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")},n.enable=function(){},n.disable=function(){},n.reset=function(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(Wg.ON_TRACK,void 0),this.emit(Wg.ON_NODE,void 0)},n.updateInput=function(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(Wg.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(Wg.ON_NODE,this.inputNode))},s(t,[{key:"kind",get:function(){return"audio"}},{key:"enabled",get:function(){return!0}}]),t}(Kp),YE=function(e){function t(t,n,r){var i;return uc(l(i=e.call(this)||this),"constraintsMap",new Map),uc(l(i),"statsRegistry",[]),uc(l(i),"audioContext",void 0),uc(l(i),"trackId",void 0),uc(l(i),"direction",void 0),uc(l(i),"usageRegistry",[]),uc(l(i),"_chained",!1),i.audioContext=t,i.trackId=n,i.direction=r,i}p(t,e);var n=t.prototype;return n.getConstraints=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$p(this,Gg.REQUEST_CONSTRAINTS));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getAudioContext=function(){return this.audioContext},n.requestApplyConstraints=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(tv.info("processor ".concat(n.name," requestApplyConstraints for ").concat(this.trackId)),t&&this.constraintsMap.set(n,t),ef(this,Gg.REQUEST_UPDATE_CONSTRAINTS,Array.from(jv(r=this.constraintsMap).call(r)))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.requestRevertConstraints=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.constraintsMap.has(t)){e.next=2;break}return e.abrupt("return",(this.constraintsMap.delete(t),ef(this,Gg.REQUEST_UPDATE_CONSTRAINTS,Array.from(jv(n=this.constraintsMap).call(n)))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.registerStats=function(e,t,n){this.statsRegistry.find((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})},n.unregisterStats=function(e,t){var n=this.statsRegistry.findIndex((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}));-1!==n&&this.statsRegistry.splice(n,1)},n.gatherStats=function(){for(var e,t=[],n=i(this.statsRegistry);!(e=n()).done;){var r=e.value,o=r.processorID,a=r.processorName,s=r.type,c=r.cb;try{var u=c();t.push({processorID:o,processorName:a,type:s,stats:u})}catch(t){tv.error(new Sp(ql.UNEXPECTED_ERROR,t.message))}}return t},n.registerUsage=function(e,t){this.usageRegistry.find((function(t){return t.processorID===e.ID&&t.processorName===e.name}))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})},n.unregisterUsage=function(e){var t=this.usageRegistry.findIndex((function(t){return t.processorID===e.ID&&t.processorName===e.name}));-1!==t&&this.usageRegistry.splice(t,1)},n.gatherUsage=function(){var e=d(c().mark((function e(){var t,n,r,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.chained){e.next=3;break}return e.abrupt("return",[]);case 3:n=i(this.usageRegistry);case 4:if((r=n()).done){e.next=21;break}if(o=r.value.cb,e.prev=6,a=o(),e.t0=a instanceof Vl,!e.t0){e.next=13;break}return e.next=12,a;case 12:a=e.sent;case 13:t.push(GE(GE({},a),{},{direction:this.direction})),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(6),tv.error("gather extension usage error",e.t1);case 19:e.next=4;break;case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(){return e.apply(this,arguments)}}(),n.getDirection=function(){return this.direction},s(t,[{key:"chained",get:function(){return this._chained},set:function(e){this._chained=e}}]),t}(Kp),qE=function(e){function t(){var t;return uc(l(t=e.call(this)||this),"context",void 0),uc(l(t),"processSourceNode",void 0),uc(l(t),"outputTrack",void 0),uc(l(t),"processedNode",void 0),uc(l(t),"clonedTrack",void 0),uc(l(t),"outputNode",void 0),t.outputNode=new JE,t}p(t,e);var n=t.prototype;return n.setVolume=function(){},n.createOutputTrack=function(){throw new Sp(ql.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")},n.getOriginVolumeLevel=function(){return 0},n.getAccurateVolumeLevel=function(){return 0},n.stopGetAudioBuffer=function(){},n.startGetAudioBuffer=function(){},n.play=function(){},n.stop=function(){},n.destroy=function(){},n.updateTrack=function(){},n.updateOriginTrack=function(){},n.createMediaStreamSourceNode=function(){},s(t,[{key:"isPlayed",get:function(){return!0}},{key:"isFreeze",get:function(){return!1}}]),t}(Kp),JE=function(){function e(){}var t=e.prototype;return t.disconnect=function(){},t.connect=function(){},e}(),XE=null,QE=function(){function e(){var e=this;uc(this,"state","open"),uc(this,"trigger",void 0),uc(this,"tasks",[]),tv.debug("[macro-task-queue] is created."),this.trigger=window.setTimeout((function(){e.state="closed",tv.debug("[macro-task-queue] will be closed, all remaining tasks will execute. [".concat(e.tasks.map((function(e){return e.key})),"]")),e.trigger=void 0,e.tasks.forEach((function(e){return(0,e.func)()})),e.tasks.length=0,tv.debug("[macro-task-queue] is closed.")}))}var t=e.prototype;return t.enqueue=function(e,t){"closed"!==this.state&&(this.tasks.push({key:e,func:t}),tv.debug("[macro-task-queue] is queued, current queue ".concat(this.tasks.length,". ").concat("string"==typeof e?e:"")))},t.runTask=function(e){if("closed"!==this.state){var t=this.tasks.findIndex((function(t){return t.key===e}));if(-1!==t){var n=this.tasks.splice(t,1);tv.debug("[macro-task-queue] is unqueued, current queue ".concat(this.tasks.length,". ").concat("string"==typeof e?e:"")),n[0].func()}}},t.release=function(){this.trigger&&(this.state="closed",clearTimeout(this.trigger),this.trigger=void 0,this.tasks.length=0,tv.debug("[macro-task-queue] is closed."))},e}();function ZE(e){return function(t,n,r){var i,o=null!==(i=r.value)&&void 0!==i?i:r.get,a=function(){XE&&"open"===XE.state&&XE.runTask(e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null==o?void 0:o.apply.apply(o,[this].concat(n))};return r.value?r.value=a:r.get=a,r}}function $E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ey(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$E(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ty=function(e){function t(t,n,r,i,o){var a;uc(l(a=e.call(this,t,r)||this),"trackMediaType","audio"),uc(l(a),"_encoderConfig",void 0),uc(l(a),"_trackSource",void 0),uc(l(a),"_enabled",!0),uc(l(a),"_volume",100),uc(l(a),"_useAudioElement",!1),uc(l(a),"_bypassWebAudio",!1),uc(l(a),"processor",void 0),uc(l(a),"_processorContext",void 0),uc(l(a),"_processorDestination",void 0),uc(l(a),"_getOriginVolumeLevel",void 0),a._encoderConfig=n,a._getOriginVolumeLevel=!!i;var s=function(){a.processorContext=new YE(a._source.context,a.getTrackId(),"local"),a.processorDestination=new KE(a.processorContext),a.bindProcessorDestinationEvents(),a._source.on(jg.UPDATE_SOURCE,(function(){a.processor&&a.processor.updateInput({node:a._source.processSourceNode,context:a.processorContext})}))},c=o&&rp()&&!sE();return W_("DISABLE_WEBAUDIO")?(a._source=new qE,a._useAudioElement=!0,a._bypassWebAudio=!0):c?a._source=new qE:(a._source=new _E(t,!1,a._getOriginVolumeLevel?t:void 0),W_("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(a._useAudioElement=!0)),s(),!W_("DISABLE_WEBAUDIO")&&c&&(XE||(XE=new QE),XE).enqueue("INIT_WEBAUDIO",(function(){a._source=new _E(t,!1,a._getOriginVolumeLevel?t:void 0),W_("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(a._useAudioElement=!0),s(),a.emit(Vg.UPDATE_TRACK_SOURCE)})),a}p(t,e);var n=t.prototype;return n.setVolume=function(e){var t=this;Rp(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&BE.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void tv.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));var n=this._source.createOutputTrack();this._mediaStreamTrack!==n&&(this._mediaStreamTrack=n,ef(this,kg.NEED_REPLACE_TRACK,this).then((function(){tv.debug("[".concat(t.getTrackId(),"] replace web audio track success"))})).catch((function(e){tv.warning("[".concat(t.getTrackId(),"] replace web audio track failed"),e)})))}catch(e){}},n.getVolumeLevel=function(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()},n.setPlaybackDevice=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._useAudioElement){e.next=2;break}throw new Sp(ql.NOT_SUPPORTED,"your browser does not support setting the audio output device");case 2:return e.next=4,BE.setSinkID(this.getTrackId(),t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setEnabled=function(){var e=d(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._setEnabled(t,n,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n._setEnabled=function(){var e=d(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}if(t!==this._enabled){e.next=3;break}return e.abrupt("return");case 3:this.stateCheck("enabled",t);case 4:if(tv.info("[".concat(this.getTrackId(),"] start setEnabled"),t),!t){e.next=18;break}return this._originMediaStreamTrack.enabled=!0,e.prev=6,r||(this._enabled=!0),e.next=10,ef(this,kg.NEED_ENABLE_TRACK,this);case 10:tv.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(t," success")),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(6),r||(this._enabled=!1),tv.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.t0.toString()),e.t0;case 16:e.next=27;break;case 18:return this._originMediaStreamTrack.enabled=!1,r||(this._enabled=!1),e.prev=19,e.next=22,ef(this,kg.NEED_DISABLE_TRACK,this);case 22:e.next=27;break;case 24:throw e.prev=24,e.t1=e.catch(19),r||(this._enabled=!0),tv.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.t1.toString()),e.t1;case 27:case"end":return e.stop()}}),e,this,[[6,13],[19,24]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n.setMuted=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t!==this._muted,!e.t0){e.next=13;break}if(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,tv.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),!t){e.next=11;break}return e.next=9,ef(this,kg.NEED_MUTE_TRACK,this);case 9:e.next=13;break;case 11:return e.next=13,ef(this,kg.NEED_UNMUTE_TRACK,this);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getStats=function(){return ff((function(){tv.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),tf(this,kg.GET_STATS)||ey({},Yg)},n.setAudioFrameCallback=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(jg.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(jg.ON_AUDIO_BUFFER),this._source.on(jg.ON_AUDIO_BUFFER,(function(t){return e(t)}))},n.play=function(){tv.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(tv.debug("[".concat(this.getTrackId(),"] start audio playback in element")),BE.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()},n.stop=function(){tv.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?BE.stop(this.getTrackId()):this._source.stop()},n.close=function(){e.prototype.close.call(this),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()},n._updatePlayerSource=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];tv.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&BE.updateTrack(this.getTrackId(),this._mediaStreamTrack)},n._updateOriginMediaStreamTrack=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._originMediaStreamTrack!==t,!e.t0){e.next=16;break}if(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop()),t.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=t,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:t,context:this.processorContext}),this._mediaStreamTrack===this._source.outputTrack){e.next=14;break}return this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),e.next=12,ef(this,kg.NEED_REPLACE_TRACK,this);case 12:e.next=15;break;case 14:this._source.updateTrack(this._originMediaStreamTrack);case 15:this._getOriginVolumeLevel&&this._source.updateOriginTrack(t);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.renewMediaStreamTrack=function(e){return Vl.resolve(void 0)},n.pipe=function(e){if(this._bypassWebAudio)throw new Sp(ql.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new Sp(ql.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e},n.unpipe=function(){var e;if(this.processor){var t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}},n.bindProcessorDestinationEvents=function(){var e=this;this.processorDestination.on(Wg.ON_TRACK,function(){var t=d(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=10;break}if(t.t0=n!==e._mediaStreamTrack,!t.t0){t.next=8;break}return e._mediaStreamTrack=n,e._updatePlayerSource(!1),e._source.processedNode=e._source.createMediaStreamSourceNode(n),t.next=8,ef(e,kg.NEED_REPLACE_TRACK,e);case 8:t.next=16;break;case 10:if(t.t1=e._mediaStreamTrack!==e._originMediaStreamTrack,!t.t1){t.next=16;break}return e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource(),t.next=16,ef(e,kg.NEED_REPLACE_TRACK,e);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.processorDestination.on(Wg.ON_NODE,(function(t){e._source.processedNode=t}))},n.unbindProcessorDestinationEvents=function(){this.processorDestination.removeAllListeners(Wg.ON_TRACK),this.processorDestination.removeAllListeners(Wg.ON_NODE)},n.unbindProcessorContextEvents=function(){this.processorContext.removeAllListeners(Gg.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Gg.REQUEST_CONSTRAINTS)},s(t,[{key:"_source",get:function(){return this._trackSource},set:function(e){this._trackSource=e}},{key:"processorContext",get:function(){return this._processorContext},set:function(e){this._processorContext=e}},{key:"processorDestination",get:function(){return this._processorDestination},set:function(e){this._processorDestination=e}},{key:"isPlaying",get:function(){return this._useAudioElement?BE.isPlaying(this.getTrackId()):this._source.isPlayed}},{key:"__className__",get:function(){return"LocalAudioTrack"}}]),t}(tE);Vv([ZE("INIT_WEBAUDIO"),Bv("design:type",Object),Bv("design:paramtypes",[Object])],ty.prototype,"_source",null),Vv([ZE("INIT_WEBAUDIO"),Bv("design:type",YE),Bv("design:paramtypes",[YE])],ty.prototype,"processorContext",null),Vv([ZE("INIT_WEBAUDIO"),Bv("design:type",KE),Bv("design:paramtypes",[KE])],ty.prototype,"processorDestination",null),Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t]},throttleTime:300}),Bv("design:type",Function),Bv("design:paramtypes",[Number]),Bv("design:returntype",void 0)],ty.prototype,"setVolume",null),Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],ty.prototype,"setPlaybackDevice",null),Vv([kf("LocalAudioTrack","_enabledMutex"),lv({argsMap:function(e,t){return[e.getTrackId(),t]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Boolean,Object,Boolean]),Bv("design:returntype",Vl)],ty.prototype,"setEnabled",null),Vv([kf("LocalAudioTrack","_enabledMutex"),lv({argsMap:function(e,t){return[e.getTrackId(),t]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Boolean]),Bv("design:returntype",Vl)],ty.prototype,"setMuted",null),Vv([FE(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Object)],ty.prototype,"getStats",null),Vv([FE(),Bv("design:type",Function),Bv("design:paramtypes",[Object,Number]),Bv("design:returntype",void 0)],ty.prototype,"setAudioFrameCallback",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],ty.prototype,"play",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],ty.prototype,"stop",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],ty.prototype,"close",null),Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Object)],ty.prototype,"pipe",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],ty.prototype,"unpipe",null);var ny=function(e){function t(t,n,r,i){var o;return uc(l(o=e.call(this,t,n.encoderConfig?Ig(n.encoderConfig):{},i,W_("GET_VOLUME_OF_MUTED_AUDIO_TRACK"),!0)||this),"_config",void 0),uc(l(o),"_deviceName","default"),uc(l(o),"_constraints",void 0),uc(l(o),"_originalConstraints",void 0),uc(l(o),"_enabled",!0),o._config=n,o._constraints=r,o._originalConstraints=r,o._deviceName=t.label,"boolean"==typeof n.bypassWebAudio&&(o._bypassWebAudio=n.bypassWebAudio),(lp()||pp())&&oE.bindInterruptDetectorTrack(l(o)),o.on(Vg.UPDATE_TRACK_SOURCE,(function(){o.bindProcessorContextEvents()})),sE()&&o.bindProcessorContextEvents(),o}p(t,e);var n=t.prototype;return n.setDevice=function(){var e=d(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tv.info("[".concat(this.getTrackId(),"] start set device to ").concat(t)),!this._enabled){e.next=35;break}return e.prev=1,e.next=4,PE.getDeviceById(t);case 4:return n=e.sent,(r={}).audio=ey({},this._constraints),r.audio.deviceId={exact:t},this._originMediaStreamTrack.stop(),i=null,e.prev=8,e.next=11,CE(r,this.getTrackId());case 11:i=e.sent,e.next=23;break;case 14:return e.prev=14,e.t0=e.catch(8),tv.error("[".concat(this.getTrackId(),"] setDevice failed"),e.t0.toString()),e.next=19,CE({audio:this._constraints},this.getTrackId());case 19:return i=e.sent,e.next=22,this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1);case 22:throw e.t0;case 23:return e.next=25,this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1);case 25:this._deviceName=n.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t},e.next=33;break;case 30:throw e.prev=30,e.t1=e.catch(1),tv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t1.toString()),e.t1;case 33:e.next=45;break;case 35:return e.prev=35,e.next=38,PE.getDeviceById(t);case 38:o=e.sent,this._deviceName=o.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t},e.next=45;break;case 42:throw e.prev=42,e.t2=e.catch(35),tv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t2.toString()),e.t2;case 45:tv.info("[".concat(this.getTrackId(),"] set device to ").concat(t," success"));case 46:case"end":return e.stop()}}),e,this,[[1,30],[8,14],[35,42]])})));return function(t){return e.apply(this,arguments)}}(),n.setEnabled=function(){var t=d(c().mark((function t(n,r,i){var o,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=5;break}return tv.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),t.next=4,e.prototype._setEnabled.call(this,n);case 4:return t.abrupt("return",t.sent);case 5:if(i){t.next=9;break}if(n!==this._enabled){t.next=8;break}return t.abrupt("return");case 8:this.stateCheck("enabled",n);case 9:if(tv.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){t.next=20;break}return this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(o=this._source.clonedTrack)||void 0===o||o.stop(),i||(this._enabled=!1),t.prev=11,t.next=14,ef(this,kg.NEED_DISABLE_TRACK,this);case 14:t.next=19;break;case 16:throw t.prev=16,t.t0=t.catch(11),tv.error("[".concat(this.getTrackId(),"] setEnabled false failed"),t.t0.toString()),t.t0;case 19:return t.abrupt("return");case 20:return a=ey({},this._constraints),(s=PE.searchDeviceIdByName(this._deviceName))&&!a.deviceId&&(a.deviceId=s),t.prev=22,i||(this._enabled=!0),t.next=26,CE({audio:this._constraints},this.getTrackId());case 26:return u=t.sent,t.next=29,this._updateOriginMediaStreamTrack(u.getAudioTracks()[0],!1);case 29:return t.next=31,ef(this,kg.NEED_ENABLE_TRACK,this);case 31:t.next=36;break;case 33:throw t.prev=33,t.t1=t.catch(22),i||(this._enabled=!1),tv.error("[".concat(this.getTrackId(),"] setEnabled true failed"),t.t1.toString()),t.t1;case 36:tv.info("[".concat(this.getTrackId(),"] setEnabled success"));case 37:case"end":return t.stop()}}),t,this,[[11,16],[22,33]])})));return function(e,n,r){return t.apply(this,arguments)}}(),n.close=function(){e.prototype.close.call(this),(lp()||pp())&&oE.unbindInterruptDetectorTrack(this)},n.onTrackEnded=function(){var e=this;if((op()||hp())&&this._enabled&&!this._isClosed&&oE.duringInterruption){var t=function(){var n=d(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(oE.off(fg.IOS_INTERRUPTION_END,t),n.t0=e._enabled&&!e._isClosed,!n.t0){n.next=8;break}return tv.debug("[".concat(e.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),n.next=6,e.setEnabled(!1);case 6:return n.next=8,e.setEnabled(!0);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();oE.on(fg.IOS_INTERRUPTION_END,t)}else tv.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Mg.TRACK_ENDED)},n.renewMediaStreamTrack=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t||this._constraints,(r=PE.searchDeviceIdByName(this._deviceName))&&!n.deviceId&&(n.deviceId=r),this._constraints=n,!this._enabled){e.next=8;break}return this._originMediaStreamTrack.stop(),e.next=5,CE({audio:this._constraints},this.getTrackId());case 5:return i=e.sent,e.next=8,this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!0);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.bindProcessorContextEvents=function(){var e=this;this.processorContext.on(Gg.REQUEST_UPDATE_CONSTRAINTS,function(){var t=d(c().mark((function t(n,r,i){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=Object.assign.apply(Object,[{},e._originalConstraints].concat(n)),t.next=4,e.renewMediaStreamTrack(o);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this.processorContext.on(Gg.REQUEST_CONSTRAINTS,function(){var t=d(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(e._originMediaStreamTrack.getSettings());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},s(t,[{key:"__className__",get:function(){return"MicrophoneAudioTrack"}}]),t}(ty);Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],ny.prototype,"setDevice",null),Vv([kf("MicrophoneAudioTrack","_enabledMutex"),lv({argsMap:function(e,t,n){return[e.getTrackId(),t,n]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Boolean,Boolean,Boolean]),Bv("design:returntype",Vl)],ny.prototype,"setEnabled",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],ny.prototype,"close",null);var ry=function(e){function t(t,n,r,i){var o;uc(l(o=e.call(this,n.createOutputTrack(),r,i)||this),"source",void 0),uc(l(o),"_bufferSource",void 0),o.source=t,o._bufferSource=n,o._bufferSource.on(jg.AUDIO_SOURCE_STATE_CHANGE,(function(e){o.safeEmit(Mg.SOURCE_STATE_CHANGE,e)}));try{o._mediaStreamTrack=o._source.createOutputTrack()}catch(t){}return o}p(t,e);var n=t.prototype;return n.getCurrentTime=function(){return this._bufferSource.currentTime},n.startProcessAudioBuffer=function(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()},n.pauseProcessAudioBuffer=function(){this._bufferSource.pauseProcessAudioBuffer()},n.seekAudioBuffer=function(e){this._bufferSource.seekAudioBuffer(e)},n.resumeProcessAudioBuffer=function(){this._bufferSource.resumeProcessAudioBuffer()},n.stopProcessAudioBuffer=function(){this._bufferSource.stopProcessAudioBuffer()},n.close=function(){this.source=null,this._bufferSource.destroy(),e.prototype.close.call(this)},n.setAudioBufferPlaybackSpeed=function(e){Rp(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)},s(t,[{key:"__className__",get:function(){return"BufferSourceAudioTrack"}},{key:"currentState",get:function(){return this._bufferSource.currentState}},{key:"duration",get:function(){return this._bufferSource.duration}},{key:"playbackSpeed",get:function(){return this._bufferSource.playbackSpeed}}]),t}(ty);Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t,e.duration]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",void 0)],ry.prototype,"startProcessAudioBuffer",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],ry.prototype,"pauseProcessAudioBuffer",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Number]),Bv("design:returntype",void 0)],ry.prototype,"seekAudioBuffer",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],ry.prototype,"resumeProcessAudioBuffer",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],ry.prototype,"stopProcessAudioBuffer",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],ry.prototype,"close",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Number]),Bv("design:returntype",void 0)],ry.prototype,"setAudioBufferPlaybackSpeed",null);var iy=function(e){function t(){var t,n=aE().createMediaStreamDestination();uc(l(t=e.call(this,n.stream.getAudioTracks()[0],void 0,yf(8,"track-mix-"))||this),"trackList",void 0),uc(l(t),"destNode",void 0);try{t._mediaStreamTrack=t._source.createOutputTrack()}catch(n){}return t.destNode=n,t.trackList=[],t}p(t,e);var n=t.prototype;return n.hasAudioTrack=function(e){return-1!==this.trackList.indexOf(e)},n.addAudioTrack=function(e){-1===this.trackList.indexOf(e)?(tv.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):tv.debug("track ".concat(e.getTrackId()," is already added"))},n.removeAudioTrack=function(e){if(-1!==this.trackList.indexOf(e)){tv.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}sf(this.trackList,e),this.updateEncoderConfig()}},n.updateEncoderConfig=function(){var e={};this.trackList.forEach((function(t){t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e},n._updateRtpTransceiver=function(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((function(n){n instanceof t?n.emit(Lg.TRANSCEIVER_UPDATED,e):n._updateRtpTransceiver(e)})))},s(t,[{key:"__className__",get:function(){return"MixingAudioTrack"}},{key:"isActive",get:function(){for(var e,t=i(this.trackList);!(e=t()).done;){var n=e.value;if(n._enabled&&!n._isClosed&&!n.muted)return!0}return!1}}]),t}(ty);function oy(e){var t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});var n=Rg(e.encoderConfig);return null!=n.width&&(t.width=n.width),null!=n.height&&(t.height=n.height),!vp()&&n.frameRate&&(t.frameRate=n.frameRate),Zl().name===Gl.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),ip()&&(t.frameRate={ideal:30,max:30}),t}function ay(e){var t={};if(vp()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,np()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){var n=Ig(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),gp()&&(t.sampleRate=void 0),t}var sy=function(e){function t(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return uc(l(n=e.call(this)||this),"audioBuffer",void 0),uc(l(n),"sourceNode",void 0),uc(l(n),"startPlayTime",0),uc(l(n),"startPlayOffset",0),uc(l(n),"pausePlayTime",0),uc(l(n),"options",void 0),uc(l(n),"currentLoopCount",0),uc(l(n),"currentPlaybackSpeed",100),uc(l(n),"_currentState","stopped"),n.audioBuffer=t,n.options=r,n.startPlayOffset=n.options.startPlayTime||0,n}p(t,e);var n=t.prototype;return n.createWebAudioDiagram=function(){return this.context.createGain()},n.updateOptions=function(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):tv.warning("can not set audio source options")},n.startProcessAudioBuffer=function(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"},n.pauseProcessAudioBuffer=function(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")},n.seekAudioBuffer=function(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))},n.resumeProcessAudioBuffer=function(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")},n.stopProcessAudioBuffer=function(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}},n.destroy=function(){this.audioBuffer=null,e.prototype.destroy.call(this)},n.setAudioBufferPlaybackSpeed=function(e){this.sourceNode&&("playing"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e},n.startSourceNode=function(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))},n.createSourceNode=function(){var e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e},n.handleSourceNodeEnded=function(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()},n.reset=function(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0},s(t,[{key:"currentState",get:function(){return this._currentState},set:function(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(jg.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}},{key:"duration",get:function(){return this.audioBuffer?this.audioBuffer.duration:0}},{key:"playbackSpeed",get:function(){return this.currentPlaybackSpeed}},{key:"currentTime",get:function(){return this.audioBuffer?"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}}]),t}(hE),cy=new Map;function uy(e,t){return dy.apply(this,arguments)}function dy(){return(dy=d(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,"string"!=typeof t){e.next=16;break}if(!(i=cy.get(t))){e.next=5;break}return e.abrupt("return",(tv.debug("use cached audio resource: ",t),i));case 5:return e.prev=5,e.next=8,Df((function(){return C_.get(t,{responseType:"arraybuffer"})}),void 0,void 0,{maxRetryCount:3});case 8:r=e.sent.data,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),new Sp(ql.FETCH_AUDIO_FILE_FAILED,e.t0.toString());case 14:e.next=20;break;case 16:return o=new Vl((function(e,n){var r=new FileReader;r.onload=function(t){t.target?e(t.target.result):n(new Sp(ql.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=function(){n(new Sp(ql.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(t)})),e.next=19,o;case 19:r=e.sent;case 20:return e.next=22,function(e){var t=aE();return new Vl((function(n,r){t.decodeAudioData(e,(function(e){n(e)}),(function(e){r(new Sp(ql.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(r);case 22:return a=e.sent,e.abrupt("return",("string"==typeof t&&n&&cy.set(t,a),a));case 24:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}var ly=function(e){var t=document.createElement("canvas");return t.width=2,t.height=2,new Vl((function(n,r){t.toBlob(function(){var e=d(c().mark((function e(i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.remove(),!i){e.next=7;break}return e.next=3,py(i);case 3:o=e.sent,n({buffer:o,width:t.width,height:t.height}),e.next=8;break;case 7:r(new Sp(ql.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e,1)}))},py=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:return n=e.sent,e.abrupt("return",new Uint8Array(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fy=new(function(e){function t(){var t;return uc(l(t=e.call(this)||this),"_lastHiddenTime",0),uc(l(t),"_lastVisibleTime",0),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState?t._lastHiddenTime=performance.now():t._lastVisibleTime=performance.now(),tv.debug("document visibility went ".concat(document.visibilityState)),t.emit("VISIBILITY_CHANGE",document.visibilityState)})),t}return p(t,e),s(t,[{key:"visibility",get:function(){return document.visibilityState}},{key:"lastHiddenTime",get:function(){return this._lastHiddenTime}},{key:"lastVisibleTime",get:function(){return this._lastVisibleTime}}]),t}(Kp));function hy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hy(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vy=function(){function e(e){var t=this;uc(this,"trackId",void 0),uc(this,"config",void 0),uc(this,"onFirstVideoFrameDecoded",void 0),uc(this,"freezeTimeCounterList",[]),uc(this,"renderFreezeAccTime",0),uc(this,"isKeepLastFrame",!1),uc(this,"timeUpdatedCount",0),uc(this,"freezeTime",0),uc(this,"playbackTime",0),uc(this,"lastTimeUpdatedTime",0),uc(this,"autoplayFailed",!1),uc(this,"videoTrack",void 0),uc(this,"videoElement",void 0),uc(this,"cacheVideoElement",void 0),uc(this,"videoElementCheckInterval",void 0),uc(this,"_videoElementStatus",Kg.NONE),uc(this,"isGettingVideoDimensions",!1),uc(this,"startGetVideoDimensions",(function(){!t.isGettingVideoDimensions&&function e(){if(t.isGettingVideoDimensions=!0,t.videoElement.videoWidth*t.videoElement.videoHeight>4)return tv.debug("[".concat(t.trackId,"] current video dimensions:"),t.videoElement.videoWidth,t.videoElement.videoHeight),void(t.isGettingVideoDimensions=!1);setTimeout(e,500)}()})),uc(this,"autoResumeAfterInterruption",(function(){t.videoTrack&&"live"===t.videoTrack.readyState&&"running"===oE.curState&&(tv.debug("[track-".concat(t.trackId,"] video element paused, auto resume for ").concat(ep())),fp()?(t.videoElement.srcObject=null,t.videoElement.srcObject=new MediaStream([t.videoTrack]),t.videoElement.play()):(t.videoElement.pause(),t.videoElement.play()))})),uc(this,"handleVideoEvents",(function(e){switch(e.type){case"play":case"playing":t.startGetVideoDimensions(),t.videoElementStatus=Kg.PLAYING;break;case"loadeddata":if(t.onFirstVideoFrameDecoded&&t.onFirstVideoFrameDecoded(),t.cacheVideoElement){try{t.cacheVideoElement.srcObject=null,t.cacheVideoElement.remove()}catch(e){}t.cacheVideoElement=void 0}break;case"canplay":t.videoElementStatus=Kg.CANPLAY;break;case"stalled":t.videoElementStatus=Kg.STALLED;break;case"suspend":t.videoElementStatus=Kg.SUSPEND;break;case"pause":t.videoElementStatus=Kg.PAUSED,op()||hp()||rp()&&t.autoplayFailed||!t.videoTrack||"live"!==t.videoTrack.readyState||(tv.debug("[track-".concat(t.trackId,"] video element paused, auto resume")),t.videoElement.play());break;case"waiting":t.videoElementStatus=Kg.WAITING;break;case"abort":t.videoElementStatus=Kg.ABORT;break;case"ended":t.videoElementStatus=Kg.ENDED;break;case"emptied":t.videoElementStatus=Kg.EMPTIED;break;case"error":t.videoElementStatus=Kg.ERROR;var n=t.videoElement.error;n&&tv.error("[".concat(t.trackId,"] media error, code: ").concat(n.code,", message: ").concat(n.message));break;case"timeupdate":var r=performance.now();if(t.timeUpdatedCount+=1,t.timeUpdatedCount<10)return void(t.lastTimeUpdatedTime=r);var i=r-t.lastTimeUpdatedTime,o=t.lastTimeUpdatedTime;if(t.lastTimeUpdatedTime=r,fy.lastVisibleTime<fy.lastHiddenTime||o<fy.lastHiddenTime||o<fy.lastVisibleTime)return;for(i>W_("VIDEO_FREEZE_DURATION")&&(t.freezeTime+=i),t.playbackTime+=i;t.playbackTime>=6e3;){t.playbackTime-=6e3;var a=Math.min(6e3,t.freezeTime);t.freezeTimeCounterList.push(a),t.freezeTime=Math.max(0,t.freezeTime-6e3)}}})),uc(this,"autoResumeAfterInterruptionOnIOS15_16",(function(){t.videoTrack&&"live"===t.videoTrack.readyState&&(tv.debug("[track-".concat(t.trackId,"] video element paused, auto resume for ").concat(ep())),fp()?(t.videoElement.srcObject=null,t.videoElement.srcObject=new MediaStream([t.videoTrack]),t.videoElement.play()):(t.videoElement.pause(),t.videoElement.play()))})),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),oE.on(fg.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),oE.on(fg.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}var t=e.prototype;return t.getVideoElement=function(){return this.videoElement},t.getContainerElement=function(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0},t.updateConfig=function(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()},t.updateVideoTrack=function(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())},t.play=function(e){var t=this,n=this.videoElement.play();n&&n.catch&&n.catch((function(n){e&&jE(e,"video",n.message,t.trackId),"NotAllowedError"===n.name?(tv.warning("detected video element autoplay failed",n),t.autoplayFailed=!0,t.handleAutoPlayFailed()):tv.warning("[".concat(t.trackId,"] play warning: "),n)}));var r=Zl();if(("Safari"===r.name&&15===Number(r.version)||lp())&&n&&n.then){var i=function(){t.config.mirror&&(t.videoElement.style.transform="rotateY(180deg)")};n.then(i).catch(i)}},t.getCurrentFrame=function(){var e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;var t=e.getContext("2d");if(!t)return tv.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);var n=t.getImageData(0,0,e.width,e.height);return e.remove(),n},t.getCurrentFrameToUint8Array=function(){var e=d(c().mark((function e(t){var n,r,i,o=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:1,(r=document.createElement("canvas")).width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight,!(i=r.getContext("2d"))){e.next=8;break}e.t0=(i.drawImage(this.videoElement,0,0,r.width,r.height),new Vl((function(e,i){r.toBlob(function(){var t=d(c().mark((function t(n){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.remove(),!n){t.next=7;break}return t.next=3,py(n);case 3:o=t.sent,e({buffer:o,width:r.width,height:r.height}),t.next=8;break;case 7:i(new Sp(ql.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t,n<0?.1:n>1?1:n)}))),e.next=11;break;case 8:return e.next=10,ly(t);case 10:e.t0=e.sent;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.destroy=function(){oE.off(fg.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),oE.off(fg.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[]},t.initVideoElement=function(){var e,t,n,r=this;(this.videoElementStatus=Kg.INIT,!this.videoElementCheckInterval&&(my.forEach((function(e){r.videoElement.addEventListener(e,r.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((function(){(function(e){return e!==document.body&&document.body.contains(e)})(r.videoElement)||(r.videoElementStatus=Kg.DESTROYED)}),1e3),W_("ENABLE_VIDEO_FRAME_CALLBACK")))&&(null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,(function e(t,i){if(r.videoElementStatus===Kg.PLAYING){if(n){var o=i.presentationTime-n.presentationTime;o>W_("VIDEO_FREEZE_DURATION")&&fy.lastVisibleTime>=fy.lastHiddenTime&&n.timestamp>fy.lastVisibleTime&&n.timestamp>fy.lastHiddenTime&&(r.renderFreezeAccTime+=o)}n=_y(_y({},i),{},{timestamp:t})}var a,s;W_("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(a=(s=r.videoElement).requestVideoFrameCallback)||void 0===a||a.call(s,e))})));this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),gp()&&(this.videoElement.poster="noposter");var i=Zl();"Safari"===i.name&&15===Number(i.version)||lp()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,ip()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,ip()&&this.videoElement.load());var o=this.videoElement.play();void 0!==o&&o.catch((function(e){tv.debug("[".concat(r.trackId,"] playback interrupted"),e.toString())}))},t.resetVideoElement=function(){var e=this;my.forEach((function(t){e.videoElement&&e.videoElement.removeEventListener(t,e.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=Kg.NONE},t.handleAutoPlayFailed=function(){var e=this,t=function t(n){n.preventDefault(),e.videoElement.play().then((function(){tv.debug("[".concat(e.trackId,"] Video element for trackId:").concat(e.trackId," autoplay resumed."))})).catch((function(e){tv.error(e)})),e.autoplayFailed=!1,Ep()?document.body.removeEventListener("click",t,!0):(document.body.removeEventListener("touchstart",t,!0),document.body.removeEventListener("mousedown",t,!0))};Ep()?document.body.addEventListener("click",t,!0):(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0)),LE()},s(e,[{key:"videoElementStatus",get:function(){return this._videoElementStatus},set:function(e){e!==this._videoElementStatus&&(tv.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}}]),e}(),my=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"],gy=function(e){function t(t){var n;return uc(l(n=e.call(this,t)||this),"container",void 0),uc(l(n),"slot",void 0),n.slot=t.element,n.updateConfig(t),n}p(t,e);var n=t.prototype;return n.updateConfig=function(e){this.config=e,this.trackId=e.trackId;var t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()},n.updateVideoTrack=function(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())},n.play=function(t){var n;null!==(n=this.container)&&void 0!==n&&n.contains(this.videoElement)&&e.prototype.play.call(this,t)},n.getCurrentFrame=function(){var t;return null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)?e.prototype.getCurrentFrame.call(this):new ImageData(2,2)},n.getCurrentFrameToUint8Array=function(){var t=d(c().mark((function t(n){var r,i,o=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=o.length>1&&void 0!==o[1]?o[1]:1,null===(r=this.container)||void 0===r||!r.contains(this.videoElement)){t.next=7;break}return t.next=4,e.prototype.getCurrentFrameToUint8Array.call(this,n,i);case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,ly(n);case 9:t.t0=t.sent;case 10:return t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.destroy=function(){if(e.prototype.destroy.call(this),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}},n.createElements=function(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",W_("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)},n.mountedVideoElement=function(){var t;!this.container||null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)||this.container.appendChild(this.videoElement),e.prototype.initVideoElement.call(this),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"},n.unmountedVideoElement=function(){var t;if(null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)){e.prototype.resetVideoElement.call(this);try{this.container&&this.container.removeChild(this.videoElement)}catch(t){}this.videoElement=document.createElement("video")}},n.resetVideoElement=function(){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&(e.prototype.resetVideoElement.call(this),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))},n.getContainerElement=function(){return this.container},t}(vy);function Ey(e){return new Vl((function(t,n){var r=!1,i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);var o=op()?"canplay":"playing";i.addEventListener(o,(function(){var e=i.videoWidth,n=i.videoHeight;!e&&ip()||(r=!0,i.srcObject=null,i.remove(),t([e,n]))})),i.srcObject=new MediaStream([e]),i.play().catch(Sf),setTimeout((function(){r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))}),4e3)}))}var yy=function(){var e=d(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.slice(n,n+2),16));return Uint8Array.from(t)}(function(e){var t="0123456789abcdef";function n(e){var n,r="";for(n=0;n<=3;n++)r+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return r}function r(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,o,a){return r(function(e,t){return e<<t|e>>>32-t}(r(r(t,e),r(i,a)),o),n)}function o(e,t,n,r,o,a,s){return i(t&n|~t&r,e,t,o,a,s)}function a(e,t,n,r,o,a,s){return i(t&r|n&~r,e,t,o,a,s)}function s(e,t,n,r,o,a,s){return i(t^n^r,e,t,o,a,s)}function c(e,t,n,r,o,a,s){return i(n^(t|~r),e,t,o,a,s)}var u,d,l,p,f,h=function(e){var t,n=1+(e.length+8>>6),r=new Array(16*n);for(t=0;t<16*n;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*n-2]=8*e.length,r}(e),_=1732584193,v=-271733879,m=-1732584194,g=271733878;for(u=0;u<h.length;u+=16)d=_,l=v,p=m,f=g,_=o(_,v,m,g,h[u+0],7,-680876936),g=o(g,_,v,m,h[u+1],12,-389564586),m=o(m,g,_,v,h[u+2],17,606105819),v=o(v,m,g,_,h[u+3],22,-1044525330),_=o(_,v,m,g,h[u+4],7,-176418897),g=o(g,_,v,m,h[u+5],12,1200080426),m=o(m,g,_,v,h[u+6],17,-1473231341),v=o(v,m,g,_,h[u+7],22,-45705983),_=o(_,v,m,g,h[u+8],7,1770035416),g=o(g,_,v,m,h[u+9],12,-1958414417),m=o(m,g,_,v,h[u+10],17,-42063),v=o(v,m,g,_,h[u+11],22,-1990404162),_=o(_,v,m,g,h[u+12],7,1804603682),g=o(g,_,v,m,h[u+13],12,-40341101),m=o(m,g,_,v,h[u+14],17,-1502002290),_=a(_,v=o(v,m,g,_,h[u+15],22,1236535329),m,g,h[u+1],5,-165796510),g=a(g,_,v,m,h[u+6],9,-1069501632),m=a(m,g,_,v,h[u+11],14,643717713),v=a(v,m,g,_,h[u+0],20,-373897302),_=a(_,v,m,g,h[u+5],5,-701558691),g=a(g,_,v,m,h[u+10],9,38016083),m=a(m,g,_,v,h[u+15],14,-660478335),v=a(v,m,g,_,h[u+4],20,-405537848),_=a(_,v,m,g,h[u+9],5,568446438),g=a(g,_,v,m,h[u+14],9,-1019803690),m=a(m,g,_,v,h[u+3],14,-187363961),v=a(v,m,g,_,h[u+8],20,1163531501),_=a(_,v,m,g,h[u+13],5,-1444681467),g=a(g,_,v,m,h[u+2],9,-51403784),m=a(m,g,_,v,h[u+7],14,1735328473),_=s(_,v=a(v,m,g,_,h[u+12],20,-1926607734),m,g,h[u+5],4,-378558),g=s(g,_,v,m,h[u+8],11,-2022574463),m=s(m,g,_,v,h[u+11],16,1839030562),v=s(v,m,g,_,h[u+14],23,-35309556),_=s(_,v,m,g,h[u+1],4,-1530992060),g=s(g,_,v,m,h[u+4],11,1272893353),m=s(m,g,_,v,h[u+7],16,-155497632),v=s(v,m,g,_,h[u+10],23,-1094730640),_=s(_,v,m,g,h[u+13],4,681279174),g=s(g,_,v,m,h[u+0],11,-358537222),m=s(m,g,_,v,h[u+3],16,-722521979),v=s(v,m,g,_,h[u+6],23,76029189),_=s(_,v,m,g,h[u+9],4,-640364487),g=s(g,_,v,m,h[u+12],11,-421815835),m=s(m,g,_,v,h[u+15],16,530742520),_=c(_,v=s(v,m,g,_,h[u+2],23,-995338651),m,g,h[u+0],6,-198630844),g=c(g,_,v,m,h[u+7],10,1126891415),m=c(m,g,_,v,h[u+14],15,-1416354905),v=c(v,m,g,_,h[u+5],21,-57434055),_=c(_,v,m,g,h[u+12],6,1700485571),g=c(g,_,v,m,h[u+3],10,-1894986606),m=c(m,g,_,v,h[u+10],15,-1051523),v=c(v,m,g,_,h[u+1],21,-2054922799),_=c(_,v,m,g,h[u+8],6,1873313359),g=c(g,_,v,m,h[u+15],10,-30611744),m=c(m,g,_,v,h[u+6],15,-1560198380),v=c(v,m,g,_,h[u+13],21,1309151649),_=c(_,v,m,g,h[u+4],6,-145523070),g=c(g,_,v,m,h[u+11],10,-1120210379),m=c(m,g,_,v,h[u+2],15,718787259),v=c(v,m,g,_,h[u+9],21,-343485551),_=r(_,d),v=r(v,l),m=r(m,p),g=r(g,f);return n(_)+n(v)+n(m)+n(g)}(""+n+r)).slice(0,16),o=i.slice(0,12),e.next=4,window.crypto.subtle.importKey("raw",i,"AES-GCM",!0,["encrypt"]);case 4:return a=e.sent,e.t0=Uint8Array,e.next=8,window.crypto.subtle.encrypt({name:"AES-GCM",iv:o},a,t);case 8:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),by=function(){var e=d(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yy(t.buffer,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Sy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ty(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sy(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wy=function(e){function t(t,n,r,i,o,a){var s;if(uc(l(s=e.call(this,t,o)||this),"trackMediaType","video"),uc(l(s),"_player",void 0),uc(l(s),"isUseScaleResolutionDownBy",!1),uc(l(s),"_videoVisibleTimer",null),uc(l(s),"_statsTimer",null),uc(l(s),"_previousVideoVisibleStatus",void 0),uc(l(s),"_clearPreviousVideoVisibleStatus",(function(){return s._previousVideoVisibleStatus=void 0})),uc(l(s),"_encoderConfig",void 0),uc(l(s),"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),uc(l(s),"_optimizationMode",void 0),uc(l(s),"_videoHeight",void 0),uc(l(s),"_videoWidth",void 0),uc(l(s),"_forceBitrateLimit",void 0),uc(l(s),"_enabled",!0),uc(l(s),"processorDestination",void 0),uc(l(s),"_processorContext",void 0),rp()){var c=t.getSettings(),u=c.width,d=c.height;s._videoWidth=u,s._videoHeight=d}else s.updateMediaStreamTrackResolution();if(s._encoderConfig=n,s._scalabilityMode=r,s._optimizationMode=i,s._hints=a||[],-1===s._hints.indexOf(Ng.SCREEN_TRACK))s.updateBitrateFromProfile();else if(function(e,t,n){var r=Zl();return!(r.name!==e||!r.osVersion)&&115===Number(r.version)}(Gl.CHROME)&&-1!==$l().indexOf("Windows")){var p=function(e,t){if("VideoFrame"in window&&"TransformStream"in window&&pE().supportWebRTCInsertableStream){var n,r,i=new MediaStreamTrackProcessor(e),o=new MediaStreamTrackGenerator({kind:"video"}),a=Date.now(),s=function t(){c&&(clearInterval(c),c=void 0),n&&(n.close(),n=void 0),e.stop(),r=void 0,o.removeEventListener("ended",t)},c=window.setInterval((function(){if(r&&n&&Date.now()-a>1e3)try{"live"===o.readyState?r.enqueue(n.clone()):s()}catch(e){s()}}),1e3),u=new TransformStream({transform:function(e,t){"live"===o.readyState?(r=t,a=Date.now(),void 0===n?(n=e,t.enqueue(e.clone())):(t.enqueue(n),n=e)):e.close()}});return o.addEventListener("ended",s),i.readable.pipeThrough(u).pipeTo(o.writable),o}}(t);p&&(tv.info("local screen video track begin to inject frame"),s._mediaStreamTrack=p)}return n&&-1!==s._hints.indexOf(Ng.CUSTOM_TRACK)&&s.setEncoderConfiguration(n),s.processorContext=new zE(s.getTrackId(),"local"),s.processorDestination=new HE(s.processorContext),s.bindProcessorDestinationEvents(),l(s)}p(t,e);var n=t.prototype;return n.play=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){var r=document.getElementById(e);r?e=r:(tv.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}tv.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(n));var i=Ty(Ty(Ty({},this._getDefaultPlayerConfig()),n),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(e instanceof HTMLVideoElement?this._player=new vy(i):this._player=new gy(i),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((function(){try{var e=t.getVideoElementVisibleStatus();t.safeEmit(Mg.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),W_("CHECK_VIDEO_VISIBLE_INTERVAL"))},n.stop=function(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._statsTimer&&(this.isUseScaleResolutionDownBy=!1,window.clearInterval(this._statsTimer),this._statsTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,tv.debug("[".concat(this.getTrackId(),"] stop video playback")))},n.setEnabled=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}if(t!==this._enabled){e.next=3;break}return e.abrupt("return");case 3:this.stateCheck("enabled",t);case 4:if(tv.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){e.next=15;break}return this._originMediaStreamTrack.enabled=!1,e.prev=6,e.next=9,ef(this,kg.NEED_DISABLE_TRACK,this);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),tv.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.t0.toString()),e.t0;case 14:return e.abrupt("return",(n||(this._enabled=!1),void tv.info("[".concat(this.getTrackId(),"] setEnabled to false success"))));case 15:return this._originMediaStreamTrack.enabled=!0,e.prev=16,e.next=19,ef(this,kg.NEED_ENABLE_TRACK,this);case 19:e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(16),tv.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.t1.toString()),e.t1;case 24:tv.info("[".concat(this.getTrackId(),"] setEnabled to true success")),n||(this._enabled=!0);case 25:case"end":return e.stop()}}),e,this,[[6,11],[16,21]])})));return function(t,n){return e.apply(this,arguments)}}(),n.setMuted=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t!==this._muted,!e.t0){e.next=13;break}if(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,tv.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),!t){e.next=11;break}return e.next=9,ef(this,kg.NEED_MUTE_TRACK,this);case 9:e.next=13;break;case 11:return e.next=13,ef(this,kg.NEED_UNMUTE_TRACK,this);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setEncoderConfiguration=function(){var e=d(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._enabled){e.next=2;break}throw new Sp(ql.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");case 2:if("720p_auto"===t?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),t=Rg(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),!(t.width||t.height||t.frameRate)){e.next=15;break}return r=oy({encoderConfig:t}),(rp()||op()||hp())&&(r.deviceId=void 0),tv.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(r)),e.prev=5,e.next=8,this._originMediaStreamTrack.applyConstraints(r);case 8:this.updateMediaStreamTrackResolution(),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),i=new Sp(ql.UNEXPECTED_ERROR,e.t0.toString()),tv.error("[".concat(this.getTrackId(),"] applyConstraints error"),i.toString()),i;case 15:return this._encoderConfig=t,-1===this._hints.indexOf(Ng.SCREEN_TRACK)&&this.updateBitrateFromProfile(),e.prev=16,e.next=19,ef(this,kg.NEED_UPDATE_VIDEO_ENCODER,this);case 19:e.next=24;break;case 21:return e.prev=21,e.t1=e.catch(16),e.abrupt("return",e.t1.throw(tv));case 24:case"end":return e.stop()}}),e,this,[[5,11],[16,21]])})));return function(t,n){return e.apply(this,arguments)}}(),n.getStats=function(){return ff((function(){tv.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),tf(this,kg.GET_STATS)||Ty({},qg)},n.setBeautyEffect=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tv.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getCurrentFrameData=function(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)},n.getCurrentFrameImage=function(){var e=d(c().mark((function e(t){var n,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:1,!this._player){e.next=5;break}e.t0=this._player.getCurrentFrameToUint8Array(t,n),e.next=8;break;case 5:return e.next=7,ly(t);case 7:e.t0=e.sent;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setBitrateLimit=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tv.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(t))),!t){e.next=10;break}return this._forceBitrateLimit=t,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<t.max_bitrate?this._encoderConfig.bitrateMax:t.max_bitrate:this._encoderConfig.bitrateMax=t.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=t.min_bitrate),e.prev=2,e.next=5,ef(this,kg.NEED_UPDATE_VIDEO_ENCODER,this);case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",e.t0.throw(tv));case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),n.setOptimizationMode=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("motion"===t||"detail"===t||"balanced"===t){e.next=2;break}return e.abrupt("return",void tv.error(ql.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"));case 2:return n=this._optimizationMode,e.prev=3,this._optimizationMode=t,e.next=7,ef(this,kg.SET_OPTIMIZATION_MODE,this);case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(3),this._optimizationMode=n,tv.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.t0.toString()),e.t0;case 12:tv.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(t,")"));case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),n.setScalabiltyMode=function(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return tv.error(ql.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=e,tv.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))},n.updateMediaStreamTrackResolution=function(){var e=this;Ey(this._originMediaStreamTrack).then((function(t){var n=t[0],r=t[1];e._videoHeight=r,e._videoWidth=n})).catch(Sf)},n._updatePlayerSource=function(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)},n._getDefaultPlayerConfig=function(){return{fit:"contain"}},n.setSenderConfiguration=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._enabled){e.next=2;break}throw new Sp(ql.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");case 2:return tv.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(t)),t=Rg(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),this._encoderConfig=t,-1===this._hints.indexOf(Ng.SCREEN_TRACK)&&this.updateBitrateFromProfile(),e.prev=3,e.next=6,ef(this,kg.NEED_UPDATE_VIDEO_ENCODER,this);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(3),e.abrupt("return",e.t0.throw(tv));case 11:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),n.updateBitrateFromProfile=function(){if(this._encoderConfig){var e=this.getMediaStreamTrackSettings(),t=e.width,n=e.height,r=e.frameRate;if(t&&n&&r){var i=function(e,t,n,r){var i,o=200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75),a=o;if("STANDARD_BITRATE"===r)i=4*o;else{if("COMPATIABLE_BITRATE"!==r)return;i=2*o}return[Math.floor(i),Math.floor(a)]}(t,n,r,W_("BITRATE_ADAPTER_TYPE"))||[void 0,void 0],o=i[0],a=i[1];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=a,this._encoderConfig.bitrateMax=o,tv.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(t,", h: ").concat(n,", fps: ").concat(r,"] => [brMax: ").concat(o,", brMin: ").concat(a,"]")))}}},n.getVideoElementVisibleStatus=function(){try{var e,t,n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},i=r.element,o=r.slot;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){var a=Dp.checkOneElementVisible(i),s=Object.assign({},a);if(s.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=s.visible;var c=pv.reportApiInvoke(null,{tag:Mp.TRACER,name:Lp.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});s.visible?c.onSuccess("Video is visible"):c.onSuccess("Invisible because of ".concat(s.reason))}return s}return}catch(e){throw new Sp(ql.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}},n.renewMediaStreamTrack=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.pipe=function(e){if(this.processor===e)return e;if(e._source)throw new Sp(ql.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e},n.unpipe=function(){if(this.processor){var e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}},n.close=function(){e.prototype.close.call(this),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()},n.clone=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._encoderConfig;e&&(r=Ty(Ty({},r),Rg(e))),r=lf(r);var i=yf(8,"track-video-cloned-"),o=new t(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,r,lf(this._scalabilityMode),this._optimizationMode,i,lf(this._hints));return e&&r&&o.setEncoderConfiguration(r),tv.debug("clone video track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(n)),o},n.replaceTrack=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof MediaStreamTrack){e.next=2;break}throw new Sp(ql.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");case 2:if("video"===t.kind){e.next=4;break}throw new Sp(ql.INVALID_PARAMS,"track should be a video MediaStreamTrack");case 4:return e.next=6,this._updateOriginMediaStreamTrack(t,n,!0);case 6:this.updateMediaStreamTrackResolution();case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.startMonitorStats=function(){var e=this;if(rp()||op()){this._statsTimer&&window.clearInterval(this._statsTimer);var t=2,n=Sg[t],r=-1,i=Date.now(),o=function(t){t>2||t<0||(i=Date.now(),n=Sg[t],e.setSenderConfiguration(n))};this.isUseScaleResolutionDownBy=!0,this._statsTimer=window.setInterval((function(){var a=e.getStats(),s=tf(e,kg.GET_RTC_STATS);if(a.sendPackets>0&&s){-1===r&&(r=Date.now());var c=Date.now();if(c-r<1e3||c-i<W_("PROFILE_SWITCH_INTERVAL"))return;var u=a.sendFrameRate,d=.6*n.frameRate,l=.9*n.frameRate;"number"==typeof u&&u>0&&u<d?t>0&&(t--,o(t),tv.debug("[".concat(e.getTrackId(),"] step down for fps ").concat(u,", switchProfile to ").concat(t))):s.OutgoingAvailableBandwidth<n.bitrateMin?t>0&&(t--,o(t),tv.debug("[".concat(e.getTrackId(),"] step down for OutgoingAvailableBandwidth ").concat(s.OutgoingAvailableBandwidth,", bitrateMin ").concat(n.bitrateMin,", switchProfile to ").concat(t))):"number"==typeof u&&u>l&&t<Sg.length-1&&s.OutgoingAvailableBandwidth>1.2*Sg[t+1].bitrateMin&&(t++,o(t),tv.debug("[".concat(e.getTrackId(),"] step up for fps ").concat(u,", OutgoingAvailableBandwidth ").concat(s.OutgoingAvailableBandwidth,", switchProfile to ").concat(t)))}}),W_("CHECK_LOCAL_STATS_INTERVAL"))}},n.bindProcessorDestinationEvents=function(){var e=this;this.processorDestination.on(Wg.ON_TRACK,function(){var t=d(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}if(t.t0=n!==e._mediaStreamTrack,!t.t0){t.next=7;break}return e._mediaStreamTrack=n,e._updatePlayerSource(),t.next=7,ef(e,kg.NEED_REPLACE_TRACK,e);case 7:t.next=15;break;case 9:if(t.t1=e._mediaStreamTrack!==e._originMediaStreamTrack,!t.t1){t.next=15;break}return e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource(),t.next=15,ef(e,kg.NEED_REPLACE_TRACK,e);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},n.unbindProcessorDestinationEvents=function(){this.processorDestination.removeAllListeners(Wg.ON_TRACK)},n.unbindProcessorContextEvents=function(){this.processorContext.removeAllListeners(Gg.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Gg.REQUEST_CONSTRAINTS)},s(t,[{key:"isPlaying",get:function(){return!(!this._player||this._player.videoElementStatus!==Kg.PLAYING)}},{key:"processorContext",get:function(){return this._processorContext},set:function(e){this._processorContext=e}},{key:"__className__",get:function(){return"LocalVideoTrack"}}]),t}(tE);Vv([lv({argsMap:function(e,t,n){return[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Object,Object]),Bv("design:returntype",void 0)],wy.prototype,"play",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],wy.prototype,"stop",null),Vv([kf("LocalVideoTrack","_enabledMutex"),lv({argsMap:function(e,t){return[e.getTrackId(),t]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Boolean,Boolean]),Bv("design:returntype",Vl)],wy.prototype,"setEnabled",null),Vv([kf("LocalVideoTrack","_enabledMutex"),lv({argsMap:function(e,t){return[e.getTrackId(),t]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Boolean]),Bv("design:returntype",Vl)],wy.prototype,"setMuted",null),Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Object,Boolean]),Bv("design:returntype",Vl)],wy.prototype,"setEncoderConfiguration",null),Vv([FE(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Object)],wy.prototype,"getStats",null),Vv([lv({argsMap:function(e,t,n){return[e.getTrackId(),t,n]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Boolean,Object]),Bv("design:returntype",Vl)],wy.prototype,"setBeautyEffect",null),Vv([FE(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",ImageData)],wy.prototype,"getCurrentFrameData",null),Vv([FE(),Bv("design:type",Function),Bv("design:paramtypes",[String,Number]),Bv("design:returntype",Vl)],wy.prototype,"getCurrentFrameImage",null),Vv([FE(),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Vl)],wy.prototype,"setBitrateLimit",null),Vv([FE(),Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],wy.prototype,"setOptimizationMode",null),Vv([FE(),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",void 0)],wy.prototype,"setScalabiltyMode",null),Vv([FE(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],wy.prototype,"updateMediaStreamTrackResolution",null),Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Object)],wy.prototype,"pipe",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],wy.prototype,"unpipe",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],wy.prototype,"close",null),Vv([lv({argsMap:function(e,t,n){return[e.getTrackId(),t.label,n]}}),Bv("design:type",Function),Bv("design:paramtypes",[MediaStreamTrack,Boolean]),Bv("design:returntype",Vl)],wy.prototype,"replaceTrack",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],wy.prototype,"startMonitorStats",null);var Ry=function(e){function t(t,n,r,i,o,a){var s;return uc(l(s=e.call(this,t,Rg(n.encoderConfig),i,o,a)||this),"_config",void 0),uc(l(s),"_originalConstraints",void 0),uc(l(s),"_constraints",void 0),uc(l(s),"_enabled",!0),uc(l(s),"_deviceName","default"),uc(l(s),"tryResumeVideoForIOS15_16WeChat",d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=(lp()||pp())&&!function(){var e=Zl();if(e.os!==Wl.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}()&&_p()&&s._enabled&&!s._isClosed,!e.t0){e.next=5;break}return tv.debug("[".concat(s.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),e.next=5,s.renewMediaStreamTrack();case 5:case"end":return e.stop()}}),e)})))),s._config=n,s._originalConstraints=r,s._constraints=r,s._deviceName=t.label,s._encoderConfig=Rg(s._config.encoderConfig),oE.on(fg.IOS_15_16_INTERRUPTION_END,s.tryResumeVideoForIOS15_16WeChat),oE.on(fg.IOS_INTERRUPTION_END,s.tryResumeVideoForIOS15_16WeChat),s.bindProcessorContextEvents(),s}p(t,e);var n=t.prototype;return n.setDevice=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","string"==typeof t?this._setDeviceById(t):t.deviceId?this._setDeviceById(t.deviceId):t.facingMode?this._setDeviceByFacingModel(t.facingMode):void 0);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n._setDeviceById=function(){var e=d(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tv.info("[".concat(this.getTrackId(),"] set device to ").concat(t)),!this._enabled){e.next=36;break}return e.prev=1,e.next=4,PE.getDeviceById(t);case 4:return n=e.sent,(r={}).video=Ty({},this._constraints),r.video.deviceId={exact:t},r.video.facingMode=void 0,this._originMediaStreamTrack.stop(),i=null,e.prev=8,e.next=11,CE(r,this.getTrackId());case 11:i=e.sent,e.next=23;break;case 14:return e.prev=14,e.t0=e.catch(8),tv.error("[".concat(this.getTrackId(),"] setDevice failed"),e.t0.toString()),e.next=19,CE({video:this._constraints},this.getTrackId());case 19:return i=e.sent,e.next=22,this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1);case 22:throw e.t0;case 23:return e.next=25,this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1);case 25:this.updateMediaStreamTrackResolution(),this._deviceName=n.label,this._config.cameraId=t,this._constraints.deviceId={exact:t},e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(1),tv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t1.toString()),e.t1;case 34:e.next=46;break;case 36:return e.prev=36,e.next=39,PE.getDeviceById(t);case 39:o=e.sent,this._deviceName=o.label,this._config.cameraId=t,this._constraints.deviceId={exact:t},e.next=46;break;case 43:throw e.prev=43,e.t2=e.catch(36),tv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t2.toString()),e.t2;case 46:tv.info("[".concat(this.getTrackId(),"] setDevice success"));case 47:case"end":return e.stop()}}),e,this,[[1,31],[8,14],[36,43]])})));return function(t){return e.apply(this,arguments)}}(),n._setDeviceByFacingModel=function(){var e=d(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tv.info("[".concat(this.getTrackId(),"] set facingMode ").concat(t)),n={video:Ty(Ty({},this._constraints),{},{deviceId:void 0,facingMode:{exact:t}})},!this._enabled){e.next=23;break}return this._originMediaStreamTrack.stop(),r=null,e.prev=5,e.next=8,CE(n,this.getTrackId());case 8:r=e.sent,e.next=20;break;case 11:return e.prev=11,e.t0=e.catch(5),tv.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),e.t0.toString()),e.next=16,CE({video:this._constraints},this.getTrackId());case 16:return r=e.sent,e.next=19,this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1);case 19:throw e.t0;case 20:return e.next=22,this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1);case 22:this.updateMediaStreamTrackResolution();case 23:this._deviceName="",this._config.facingMode=t,this._config.cameraId=void 0,this._constraints=Ty({},n.video),tv.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"));case 24:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),n.setEnabled=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}if(t!==this._enabled){e.next=3;break}return e.abrupt("return");case 3:this.stateCheck("enabled",t);case 4:if(tv.info("[".concat(this.getTrackId(),"] start setEnabled"),t),!t){e.next=25;break}if(e.prev=5,!this.isExternalTrack){e.next=10;break}this._originMediaStreamTrack.enabled=!0,e.next=15;break;case 10:return e.next=12,CE({video:this._constraints},this.getTrackId());case 12:return r=e.sent,e.next=15,this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1);case 15:return e.next=17,ef(this,kg.NEED_ENABLE_TRACK,this);case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(5),tv.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.t0.toString()),e.t0;case 22:this.updateMediaStreamTrackResolution(),tv.info("[".concat(this.getTrackId(),"] setEnabled to true success")),n||(this._enabled=!0),e.next=35;break;case 25:return this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),n||(this._enabled=!1),e.prev=26,e.next=29,ef(this,kg.NEED_DISABLE_TRACK,this);case 29:e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(26),tv.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.t1.toString()),e.t1;case 34:tv.info("[".concat(this.getTrackId(),"] setEnabled to false success"));case 35:case"end":return e.stop()}}),e,this,[[5,19],[26,31]])})));return function(t,n){return e.apply(this,arguments)}}(),n.setEncoderConfiguration=function(){var e=d(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._enabled){e.next=2;break}throw new Sp(ql.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");case 2:return"720p_auto"===t?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),t=Rg(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),(r=df(this._config)).encoderConfig=t,i=oy(r),(rp()||op()||hp())&&(i.deviceId=void 0),tv.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(i)),e.prev=7,e.next=10,this._originMediaStreamTrack.applyConstraints(i);case 10:this.updateMediaStreamTrackResolution(),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(7),o=new Sp(ql.UNEXPECTED_ERROR,e.t0.toString()),tv.error("[".concat(this.getTrackId(),"] applyConstraints error"),o.toString()),o;case 17:return this._config=r,this._constraints=i,this._originalConstraints=i,this._encoderConfig=t,-1===this._hints.indexOf(Ng.SCREEN_TRACK)&&this.updateBitrateFromProfile(),e.prev=18,e.next=21,ef(this,kg.NEED_UPDATE_VIDEO_ENCODER,this);case 21:e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(18),e.abrupt("return",e.t1.throw(tv));case 26:case"end":return e.stop()}}),e,this,[[7,13],[18,23]])})));return function(t,n){return e.apply(this,arguments)}}(),n._getDefaultPlayerConfig=function(){return{mirror:!0,fit:"cover"}},n.onTrackEnded=function(){var e=this;if((op()||hp())&&this._enabled&&!this._isClosed&&oE.duringInterruption){var t=function(){var n=d(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(oE.off(fg.IOS_INTERRUPTION_END,t),n.t0=e._enabled&&!e._isClosed,!n.t0){n.next=8;break}return tv.debug("[".concat(e.getTrackId(),"] try capture camera media device for interrupted iOS device.")),n.next=6,e.setEnabled(!1);case 6:return n.next=8,e.setEnabled(!0);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();oE.on(fg.IOS_INTERRUPTION_END,t)}else tv.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Mg.TRACK_ENDED)},n.renewMediaStreamTrack=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t||this._constraints,(r=PE.searchDeviceIdByName(this._deviceName))&&!n.deviceId&&(n.deviceId={exact:r}),!this._enabled){e.next=9;break}return e.next=4,CE({video:n},this.getTrackId());case 4:return i=e.sent,this._constraints=n,e.next=8,this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0);case 8:this.updateMediaStreamTrackResolution();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.close=function(){e.prototype.close.call(this),oE.off(fg.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),oE.off(fg.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)},n.clone=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._encoderConfig;e&&(r=Ty(Ty({},r),Rg(e))),r=lf(r);var i=yf(8,"track-cam-cloned-"),o=new t(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,lf(Ty(Ty({},this._config),{},{encoderConfig:r})),lf(this._constraints),lf(this._scalabilityMode),this._optimizationMode,i);return e&&r&&o.setEncoderConfiguration(r),tv.debug("clone track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(n)),o},n.bindProcessorContextEvents=function(){var e=this;this.processorContext.on(Gg.REQUEST_UPDATE_CONSTRAINTS,function(){var t=d(c().mark((function t(n,r,i){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=Object.assign.apply(Object,[{},e._originalConstraints].concat(n)),t.next=4,e.renewMediaStreamTrack(o);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this.processorContext.on(Gg.REQUEST_CONSTRAINTS,function(){var t=d(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(e._originMediaStreamTrack.getSettings());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},s(t,[{key:"__className__",get:function(){return"CameraVideoTrack"}}]),t}(wy);function Cy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cy(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ay(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=Oy(Oy({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?tv.debug("[".concat(e,"] set content hint to"),n.optimizationMode):tv.debug("[".concat(e,"] set content hint failed")))):tv.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}function Iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ky(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iy(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Vl)],Ry.prototype,"setDevice",null),Vv([kf("CameraVideoTrack","_enabledMutex"),lv({argsMap:function(e,t){return[e.getTrackId(),t]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Boolean,Boolean]),Bv("design:returntype",Vl)],Ry.prototype,"setEnabled",null),Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t]}}),FE(),Bv("design:type",Function),Bv("design:paramtypes",[Object,Boolean]),Bv("design:returntype",Vl)],Ry.prototype,"setEncoderConfiguration",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],Ry.prototype,"close",null);var Ny=function(e){p(n,e);var t=n.prototype;function n(t,n,r,i){var o;return uc(l(o=e.call(this,t,"track-".concat(t.kind,"-").concat(n,"-").concat(i.clientId,"_").concat(yf(5,"")))||this),"_userId",void 0),uc(l(o),"_uintId",void 0),uc(l(o),"_isDestroyed",!1),uc(l(o),"store",void 0),uc(l(o),"processor",void 0),o._userId=n,o._uintId=r,o.store=i,o}return t.getUserId=function(){return this._userId},t._updateOriginMediaStreamTrack=function(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})},t._destroy=function(){this._isDestroyed=!0,tv.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),e.prototype.close.call(this)},t.getProcessorStats=function(){return this.processorContext.gatherStats()},t.getProcessorUsage=function(){return this.processorContext.gatherUsage()},n}(eE),Py=function(e){function t(t,n,r,i){var o;return uc(l(o=e.call(this,t,n,r,i)||this),"_videoVisibleTimer",null),uc(l(o),"_previousVideoVisibleStatus",void 0),uc(l(o),"_clearPreviousVideoVisibleStatus",(function(){return o._previousVideoVisibleStatus=void 0})),uc(l(o),"trackMediaType","video"),uc(l(o),"_videoWidth",void 0),uc(l(o),"_videoHeight",void 0),uc(l(o),"_player",void 0),uc(l(o),"processorDestination",void 0),uc(l(o),"processorContext",void 0),o.updateMediaStreamTrackResolution(),o.processorContext=new zE(o.getTrackId(),"remote"),o.processorDestination=new HE(o.processorContext),o.bindProcessorDestinationEvents(),o}p(t,e);var n=t.prototype;return n.getStats=function(){return ff((function(){tv.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),tf(this,kg.GET_STATS)||ky({},Qg)},n.play=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){var r=document.getElementById(e);r?e=r:(tv.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}tv.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(n));var i=ky(ky({fit:"cover"},n),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(e instanceof HTMLVideoElement?this._player=new vy(i):this._player=new gy(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=function(){t.store.subscribe(t.getUserId(),"video",void 0,void 0,Date.now()),t.safeEmit(Ug.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((function(){try{var e=t.getVideoElementVisibleStatus();t.safeEmit(Ug.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),W_("CHECK_VIDEO_VISIBLE_INTERVAL"))},n.stop=function(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,tv.debug("[".concat(this.getTrackId(),"] stop video playback")))},n.getCurrentFrameData=function(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)},n.updateMediaStreamTrackResolution=function(){var e=this;Ey(this._originMediaStreamTrack).then((function(t){var n=t[0],r=t[1];e._videoHeight=r,e._videoWidth=n})).catch(Sf)},n._updatePlayerSource=function(){tv.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)},n.getVideoElementVisibleStatus=function(){try{var e,t,n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},i=r.element,o=r.slot;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){var a=Dp.checkOneElementVisible(i),s=Object.assign({},a);if(s.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=s.visible;var c=pv.reportApiInvoke(null,{tag:Mp.TRACER,name:Lp.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});s.visible?c.onSuccess("Video is visible"):c.onSuccess("Invisible because of ".concat(s.reason))}return s}return}catch(e){throw new Sp(ql.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}},n.pipe=function(e){if(this.processor===e)return e;if(e._source)throw new Sp(ql.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e},n.unpipe=function(){if(this.processor){var e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}},n.bindProcessorDestinationEvents=function(){var e=this;this.processorDestination.on(Wg.ON_TRACK,function(){var t=d(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n?n!==e._mediaStreamTrack&&(e._mediaStreamTrack=n,e._updatePlayerSource()):e._mediaStreamTrack!==e._originMediaStreamTrack&&(e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},n.unbindProcessorDestinationEvents=function(){this.processorDestination.removeAllListeners(Wg.ON_TRACK)},n._destroy=function(){e.prototype._destroy.call(this),this.unbindProcessorDestinationEvents()},s(t,[{key:"isPlaying",get:function(){return!(!this._player||this._player.videoElementStatus!==Kg.PLAYING)}},{key:"__className__",get:function(){return"RemoteVideoTrack"}}]),t}(Ny);Vv([lv({argsMap:function(e,t,n){return[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}}),Bv("design:type",Function),Bv("design:paramtypes",[Object,Object]),Bv("design:returntype",void 0)],Py.prototype,"play",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],Py.prototype,"stop",null),Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Object)],Py.prototype,"pipe",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],Py.prototype,"unpipe",null);var Dy=function(e){function t(t,n,r,i){var o;return uc(l(o=e.call(this,t,n,r,i)||this),"trackMediaType","audio"),uc(l(o),"_source",void 0),uc(l(o),"_useAudioElement",!0),uc(l(o),"_volume",100),uc(l(o),"processorContext",void 0),uc(l(o),"processorDestination",void 0),uc(l(o),"_played",!1),uc(l(o),"_bypassWebAudio",!1),W_("DISABLE_WEBAUDIO")?(o._source=new qE,o._bypassWebAudio=!0,o._useAudioElement=!0):(o._source=new _E(t,!0),W_("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(o._useAudioElement=!1)),o._source.once(jg.RECEIVE_TRACK_BUFFER,(function(){o.safeEmit(Ug.FIRST_FRAME_DECODED)})),o.processorContext=new YE(o._source.context,o.getTrackId(),"remote"),o.processorDestination=new KE(o.processorContext),o.bindProcessorDestinationEvents(),o._source.on(jg.UPDATE_SOURCE,(function(){o.processor&&o.processor.updateInput({node:o._source.processSourceNode,context:o.processorContext})})),o}p(t,e);var n=t.prototype;return n.setAudioFrameCallback=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(jg.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(jg.ON_AUDIO_BUFFER),this._source.on(jg.ON_AUDIO_BUFFER,(function(t){return e(t)}))},n.setVolume=function(e){this._volume=e,this._useAudioElement?BE.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)},n.setPlaybackDevice=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._useAudioElement){e.next=2;break}throw new Sp(ql.NOT_SUPPORTED,"your browser does not support setting the audio output device");case 2:return e.next=4,BE.setSinkID(this.getTrackId(),t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getVolumeLevel=function(){return this._source.getAccurateVolumeLevel()},n.getStats=function(){return ff((function(){tv.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),tf(this,kg.GET_STATS)||ky({},Jg)},n.play=function(){tv.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(tv.debug("[".concat(this.getTrackId(),"] use audio element to play")),BE.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()},n.stop=function(){tv.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?BE.stop(this.getTrackId()):this._source.stop()},n._destroy=function(){e.prototype._destroy.call(this),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()},n._isFreeze=function(){return this._source.isFreeze},n._updatePlayerSource=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];tv.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&BE.updateTrack(this.getTrackId(),this._mediaStreamTrack)},n.pipe=function(e){if(this._bypassWebAudio)throw new Sp(ql.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new Sp(ql.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e},n.unpipe=function(){var e;if(this._bypassWebAudio)throw new Sp(ql.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(this.processor){var t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}},n.bindProcessorDestinationEvents=function(){var e=this;this.processorDestination.on(Wg.ON_TRACK,function(){var t=d(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n?n!==e._mediaStreamTrack&&(e._mediaStreamTrack=n,e._updatePlayerSource(!1),e._source.processedNode=e._source.createMediaStreamSourceNode(n)):e._mediaStreamTrack!==e._originMediaStreamTrack&&(e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.processorDestination.on(Wg.ON_NODE,(function(t){e._source.processedNode=t;var n=!t;e._useAudioElement!==n&&(e._played?(e.stop(),e._useAudioElement=n,e.play()):e._useAudioElement=n)}))},n.unbindProcessorDestinationEvents=function(){this.processorDestination.removeAllListeners(Wg.ON_TRACK),this.processorDestination.removeAllListeners(Wg.ON_NODE)},s(t,[{key:"isPlaying",get:function(){return this._useAudioElement?BE.isPlaying(this.getTrackId()):this._source.isPlayed}},{key:"__className__",get:function(){return"RemoteAudioTrack"}}]),t}(Ny);function xy(e){for(var t=e.length;--t>=0;)e[t]=0}Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t]},throttleTime:300}),Bv("design:type",Function),Bv("design:paramtypes",[Number]),Bv("design:returntype",void 0)],Dy.prototype,"setVolume",null),Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t]}}),Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],Dy.prototype,"setPlaybackDevice",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],Dy.prototype,"play",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],Dy.prototype,"stop",null),Vv([lv({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Object)],Dy.prototype,"pipe",null),Vv([lv({argsMap:function(e){return[e.getTrackId()]}}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],Dy.prototype,"unpipe",null);var Ly=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),My=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Uy=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),jy=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vy=new Array(576);xy(Vy);var By=new Array(60);xy(By);var Fy=new Array(512);xy(Fy);var Wy=new Array(256);xy(Wy);var Gy=new Array(29);xy(Gy);var Hy,zy,Ky,Yy=new Array(30);function qy(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function Jy(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}xy(Yy);var Xy=function(e){return e<256?Fy[e]:Fy[256+(e>>>7)]},Qy=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Zy=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Qy(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},$y=function(e,t,n){Zy(e,n[2*t],n[2*t+1])},eb=function(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},tb=function(e,t,n){var r,i,o=new Array(16),a=0;for(r=1;r<=15;r++)a=a+n[r-1]<<1,o[r]=a;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=eb(o[s]++,s))}},nb=function(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},rb=function(e){e.bi_valid>8?Qy(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ib=function(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},ob=function(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&ib(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!ib(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},ab=function(e,t,n){var r,i,o,a,s=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+s++],r+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],0===r?$y(e,i,t):(o=Wy[i],$y(e,o+256+1,t),0!==(a=Ly[o])&&(i-=Gy[o],Zy(e,i,a)),r--,o=Xy(r),$y(e,o,n),0!==(a=My[o])&&(r-=Yy[o],Zy(e,r,a)))}while(s<e.sym_next);$y(e,256,t)},sb=function(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)ob(e,o,n);i=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ob(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,ob(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,c=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,l=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,h=t.stat_desc.max_length,_=0;for(o=0;o<=15;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=c[2*c[2*(r=e.heap[n])+1]+1]+1)>h&&(o=h,_++),c[2*r+1]=o,r>u||(e.bl_count[o]++,a=0,r>=f&&(a=p[r-f]),s=c[2*r],e.opt_len+=s*(o+a),l&&(e.static_len+=s*(d[2*r+1]+a)));if(0!==_){do{for(o=h-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[h]--,_-=2}while(_>0);for(o=h;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>u||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(e,t),tb(o,u,e.bl_count)},cb=function(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<c&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,0===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4))},ub=function(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<u)do{$y(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&($y(e,i,e.bl_tree),s--),$y(e,16,e.bl_tree),Zy(e,s-3,2)):s<=10?($y(e,17,e.bl_tree),Zy(e,s-3,3)):($y(e,18,e.bl_tree),Zy(e,s-11,7));s=0,o=i,0===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4)}},db=!1,lb=function(e,t,n,r){Zy(e,0+(r?1:0),3),rb(e),Qy(e,n),Qy(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},pb=function(e){db||(function(){var e,t,n,r,i,o=new Array(16);for(n=0,r=0;r<28;r++)for(Gy[r]=n,e=0;e<1<<Ly[r];e++)Wy[n++]=r;for(Wy[n-1]=r,i=0,r=0;r<16;r++)for(Yy[r]=i,e=0;e<1<<My[r];e++)Fy[i++]=r;for(i>>=7;r<30;r++)for(Yy[r]=i<<7,e=0;e<1<<My[r]-7;e++)Fy[256+i++]=r;for(t=0;t<=15;t++)o[t]=0;for(e=0;e<=143;)Vy[2*e+1]=8,e++,o[8]++;for(;e<=255;)Vy[2*e+1]=9,e++,o[9]++;for(;e<=279;)Vy[2*e+1]=7,e++,o[7]++;for(;e<=287;)Vy[2*e+1]=8,e++,o[8]++;for(tb(Vy,287,o),e=0;e<30;e++)By[2*e+1]=5,By[2*e]=eb(e,5);Hy=new qy(Vy,Ly,257,286,15),zy=new qy(By,My,0,30,15),Ky=new qy(new Array(0),Uy,0,19,7)}(),db=!0),e.l_desc=new Jy(e.dyn_ltree,Hy),e.d_desc=new Jy(e.dyn_dtree,zy),e.bl_desc=new Jy(e.bl_tree,Ky),e.bi_buf=0,e.bi_valid=0,nb(e)},fb=lb,hb=function(e,t,n,r){var i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),sb(e,e.l_desc),sb(e,e.d_desc),a=function(e){var t;for(cb(e,e.dyn_ltree,e.l_desc.max_code),cb(e,e.dyn_dtree,e.d_desc.max_code),sb(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*jy[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?lb(e,t,n,r):4===e.strategy||o===i?(Zy(e,2+(r?1:0),3),ab(e,Vy,By)):(Zy(e,4+(r?1:0),3),function(e,t,n,r){var i;for(Zy(e,t-257,5),Zy(e,n-1,5),Zy(e,r-4,4),i=0;i<r;i++)Zy(e,e.bl_tree[2*jy[i]+1],3);ub(e,e.dyn_ltree,t-1),ub(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),ab(e,e.dyn_ltree,e.dyn_dtree)),nb(e),r&&rb(e)},_b=function(e,t,n){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Wy[n]+256+1)]++,e.dyn_dtree[2*Xy(t)]++),e.sym_next===e.sym_end},vb=function(e){Zy(e,2,3),$y(e,256,Vy),function(e){16===e.bi_valid?(Qy(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)},mb=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0},gb=new Uint32Array(function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}()),Eb=function(e,t,n,r){var i=gb,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},yb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bb={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Sb=pb,Tb=fb,wb=hb,Rb=_b,Cb=vb,Ob=bb.Z_NO_FLUSH,Ab=bb.Z_PARTIAL_FLUSH,Ib=bb.Z_FULL_FLUSH,kb=bb.Z_FINISH,Nb=bb.Z_BLOCK,Pb=bb.Z_OK,Db=bb.Z_STREAM_END,xb=bb.Z_STREAM_ERROR,Lb=bb.Z_DATA_ERROR,Mb=bb.Z_BUF_ERROR,Ub=bb.Z_DEFAULT_COMPRESSION,jb=bb.Z_FILTERED,Vb=bb.Z_HUFFMAN_ONLY,Bb=bb.Z_RLE,Fb=bb.Z_FIXED,Wb=bb.Z_UNKNOWN,Gb=bb.Z_DEFLATED,Hb=262,zb=function(e,t){return e.msg=yb[t],t},Kb=function(e){return 2*e-(e>4?9:0)},Yb=function(e){for(var t=e.length;--t>=0;)e[t]=0},qb=function(e){var t,n,r,i=e.w_size;r=t=e.hash_size;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);r=t=i;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)},Jb=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},Xb=function(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Qb=function(e,t){wb(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Xb(e.strm)},Zb=function(e,t){e.pending_buf[e.pending++]=t},$b=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},eS=function(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=mb(e.adler,t,i,n):2===e.state.wrap&&(e.adler=Eb(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},tS=function(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-Hb?e.strstart-(e.w_size-Hb):0,u=e.window,d=e.w_mask,l=e.prev,p=e.strstart+258,f=u[o+a-1],h=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+a]===h&&u[n+a-1]===f&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<p);if(r=258-(p-o),o=p-258,r>a){if(e.match_start=t,a=r,r>=s)break;f=u[o+a-1],h=u[o+a]}}}while((t=l[t&d])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead},nS=function(e){var t,n,r,i=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-Hb)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),qb(e),n+=i),0===e.strm.avail_in)break;if(t=eS(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Jb(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Jb(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Hb&&0!==e.strm.avail_in)},rS=function(e,t){var n,r,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,n>(r=e.strstart-e.block_start)+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<o&&(0===n&&t!==kb||t===Ob||n!==r+e.strm.avail_in))break;a=t===kb&&n===r+e.strm.avail_in?1:0,Tb(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Xb(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(eS(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===a);return(s-=e.strm.avail_in)&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==Ob&&t!==kb&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(eS(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,o=(i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((r=e.strstart-e.block_start)>=o||(r||t===kb)&&t!==Ob&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,a=t===kb&&0===e.strm.avail_in&&n===r?1:0,Tb(e,e.block_start,n,a),e.block_start+=n,Xb(e.strm)),a?3:1)},iS=function(e,t){for(var n,r;;){if(e.lookahead<Hb){if(nS(e),e.lookahead<Hb&&t===Ob)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Jb(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Hb&&(e.match_length=tS(e,n)),e.match_length>=3)if(r=Rb(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Jb(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Jb(e,e.ins_h,e.window[e.strstart+1]);else r=Rb(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Qb(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===kb?(Qb(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Qb(e,!1),0===e.strm.avail_out)?1:2},oS=function(e,t){for(var n,r,i;;){if(e.lookahead<Hb){if(nS(e),e.lookahead<Hb&&t===Ob)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Jb(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Hb&&(e.match_length=tS(e,n),e.match_length<=5&&(e.strategy===jb||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=Rb(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Jb(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Qb(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=Rb(e,0,e.window[e.strstart-1]))&&Qb(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Rb(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===kb?(Qb(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Qb(e,!1),0===e.strm.avail_out)?1:2};function aS(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var sS=[new aS(0,0,0,0,rS),new aS(4,4,8,4,iS),new aS(4,5,16,8,iS),new aS(4,6,32,32,iS),new aS(4,4,16,16,oS),new aS(8,16,32,32,oS),new aS(8,16,128,128,oS),new aS(8,32,128,256,oS),new aS(32,128,258,1024,oS),new aS(32,258,258,4096,oS)];function cS(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Gb,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Yb(this.dyn_ltree),Yb(this.dyn_dtree),Yb(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Yb(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Yb(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var uS=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||42!==t.status&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&113!==t.status&&666!==t.status?1:0},dS=function(e){if(uS(e))return zb(e,xb);e.total_in=e.total_out=0,e.data_type=Wb;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,Sb(t),Pb},lS=function(e){var t,n=dS(e);return n===Pb&&((t=e.state).window_size=2*t.w_size,Yb(t.head),t.max_lazy_match=sS[t.level].max_lazy,t.good_match=sS[t.level].good_length,t.nice_match=sS[t.level].nice_length,t.max_chain_length=sS[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},pS=function(e,t,n,r,i,o){if(!e)return xb;var a=1;if(t===Ub&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||n!==Gb||r<8||r>15||t<0||t>9||o<0||o>Fb||8===r&&1!==a)return zb(e,xb);8===r&&(r=9);var s=new cS;return e.state=s,s.strm=e,s.status=42,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=n,lS(e)},fS=pS,hS=function(e,t){return uS(e)||2!==e.state.wrap?xb:(e.state.gzhead=t,Pb)},_S=function(e,t){if(uS(e)||t>Nb||t<0)return e?zb(e,xb):xb;var n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==kb)return zb(e,0===e.avail_out?Mb:xb);var r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Xb(e),0===e.avail_out)return n.last_flush=-1,Pb}else if(0===e.avail_in&&Kb(t)<=Kb(r)&&t!==kb)return zb(e,Mb);if(666===n.status&&0!==e.avail_in)return zb(e,Mb);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){var i=Gb+(n.w_bits-8<<4)<<8;if(i|=(n.strategy>=Vb||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(i|=32),$b(n,i+=31-i%31),0!==n.strstart&&($b(n,e.adler>>>16),$b(n,65535&e.adler)),e.adler=1,n.status=113,Xb(e),0!==n.pending)return n.last_flush=-1,Pb}if(57===n.status)if(e.adler=0,Zb(n,31),Zb(n,139),Zb(n,8),n.gzhead)Zb(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Zb(n,255&n.gzhead.time),Zb(n,n.gzhead.time>>8&255),Zb(n,n.gzhead.time>>16&255),Zb(n,n.gzhead.time>>24&255),Zb(n,9===n.level?2:n.strategy>=Vb||n.level<2?4:0),Zb(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Zb(n,255&n.gzhead.extra.length),Zb(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Eb(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Zb(n,0),Zb(n,0),Zb(n,0),Zb(n,0),Zb(n,0),Zb(n,9===n.level?2:n.strategy>=Vb||n.level<2?4:0),Zb(n,3),n.status=113,Xb(e),0!==n.pending)return n.last_flush=-1,Pb;if(69===n.status){if(n.gzhead.extra){for(var o=n.pending,a=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+a>n.pending_buf_size;){var s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>o&&(e.adler=Eb(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex+=s,Xb(e),0!==n.pending)return n.last_flush=-1,Pb;o=0,a-=s}var c=new Uint8Array(n.gzhead.extra);n.pending_buf.set(c.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending+=a,n.gzhead.hcrc&&n.pending>o&&(e.adler=Eb(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){var u,d=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>d&&(e.adler=Eb(e.adler,n.pending_buf,n.pending-d,d)),Xb(e),0!==n.pending)return n.last_flush=-1,Pb;d=0}u=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Zb(n,u)}while(0!==u);n.gzhead.hcrc&&n.pending>d&&(e.adler=Eb(e.adler,n.pending_buf,n.pending-d,d)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){var l,p=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>p&&(e.adler=Eb(e.adler,n.pending_buf,n.pending-p,p)),Xb(e),0!==n.pending)return n.last_flush=-1,Pb;p=0}l=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Zb(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>p&&(e.adler=Eb(e.adler,n.pending_buf,n.pending-p,p))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Xb(e),0!==n.pending))return n.last_flush=-1,Pb;Zb(n,255&e.adler),Zb(n,e.adler>>8&255),e.adler=0}if(n.status=113,Xb(e),0!==n.pending)return n.last_flush=-1,Pb}if(0!==e.avail_in||0!==n.lookahead||t!==Ob&&666!==n.status){var f=0===n.level?rS(n,t):n.strategy===Vb?function(e,t){for(var n;;){if(0===e.lookahead&&(nS(e),0===e.lookahead)){if(t===Ob)return 1;break}if(e.match_length=0,n=Rb(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Qb(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===kb?(Qb(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Qb(e,!1),0===e.strm.avail_out)?1:2}(n,t):n.strategy===Bb?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=258){if(nS(e),e.lookahead<=258&&t===Ob)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+258;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=258-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Rb(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Rb(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Qb(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===kb?(Qb(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Qb(e,!1),0===e.strm.avail_out)?1:2}(n,t):sS[n.level].func(n,t);if(3!==f&&4!==f||(n.status=666),1===f||3===f)return 0===e.avail_out&&(n.last_flush=-1),Pb;if(2===f&&(t===Ab?Cb(n):t!==Nb&&(Tb(n,0,0,!1),t===Ib&&(Yb(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Xb(e),0===e.avail_out))return n.last_flush=-1,Pb}return t!==kb?Pb:n.wrap<=0?Db:(2===n.wrap?(Zb(n,255&e.adler),Zb(n,e.adler>>8&255),Zb(n,e.adler>>16&255),Zb(n,e.adler>>24&255),Zb(n,255&e.total_in),Zb(n,e.total_in>>8&255),Zb(n,e.total_in>>16&255),Zb(n,e.total_in>>24&255)):($b(n,e.adler>>>16),$b(n,65535&e.adler)),Xb(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Pb:Db)},vS=function(e){if(uS(e))return xb;var t=e.state.status;return e.state=null,113===t?zb(e,Lb):Pb},mS=function(e,t){var n=t.length;if(uS(e))return xb;var r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return xb;if(1===i&&(e.adler=mb(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(Yb(r.head),r.strstart=0,r.block_start=0,r.insert=0);var o=new Uint8Array(r.w_size);o.set(t.subarray(n-r.w_size,n),0),t=o,n=r.w_size}var a=e.avail_in,s=e.next_in,c=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,nS(r);r.lookahead>=3;){var u=r.strstart,d=r.lookahead-2;do{r.ins_h=Jb(r,r.ins_h,r.window[u+3-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++}while(--d);r.strstart=u,r.lookahead=2,nS(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=c,e.avail_in=a,r.wrap=i,Pb},gS=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},ES=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)gS(n,r)&&(e[r]=n[r])}}return e},yS=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var i=new Uint8Array(t),o=0,a=0,s=e.length;o<s;o++){var c=e[o];i.set(c,a),a+=c.length}return i},bS=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){bS=!1}for(var SS=new Uint8Array(256),TS=0;TS<256;TS++)SS[TS]=TS>=252?6:TS>=248?5:TS>=240?4:TS>=224?3:TS>=192?2:1;SS[254]=SS[254]=1;var wS=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},RS=function(e,t){var n,r,i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var o=new Array(2*i);for(r=0,n=0;n<i;){var a=e[n++];if(a<128)o[r++]=a;else{var s=SS[a];if(s>4)o[r++]=65533,n+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&n<i;)a=a<<6|63&e[n++],s--;s>1?o[r++]=65533:a<65536?o[r++]=a:(a-=65536,o[r++]=55296|a>>10&1023,o[r++]=56320|1023&a)}}}return function(e,t){if(t<65534&&e.subarray&&bS)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}(o,r)},CS=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+SS[e[n]]>t?n:t},OS=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},AS=Object.prototype.toString,IS=bb.Z_NO_FLUSH,kS=bb.Z_SYNC_FLUSH,NS=bb.Z_FULL_FLUSH,PS=bb.Z_FINISH,DS=bb.Z_OK,xS=bb.Z_STREAM_END,LS=bb.Z_DEFAULT_COMPRESSION,MS=bb.Z_DEFAULT_STRATEGY,US=bb.Z_DEFLATED;function jS(e){this.options=ES({level:LS,method:US,chunkSize:16384,windowBits:15,memLevel:8,strategy:MS},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new OS,this.strm.avail_out=0;var n=fS(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==DS)throw new Error(yb[n]);if(t.header&&hS(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?wS(t.dictionary):"[object ArrayBuffer]"===AS.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=mS(this.strm,r))!==DS)throw new Error(yb[n]);this._dict_set=!0}}function VS(e,t){var n=new jS(t);if(n.push(e,!0),n.err)throw n.msg||yb[n.err];return n.result}jS.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?PS:IS,"string"==typeof e?i.input=wS(e):"[object ArrayBuffer]"===AS.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(r===kS||r===NS)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if((n=_S(i,r))===xS)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),n=vS(this.strm),this.onEnd(n),this.ended=!0,n===DS;if(0!==i.avail_out){if(r>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},jS.prototype.onData=function(e){this.chunks.push(e)},jS.prototype.onEnd=function(e){e===DS&&(this.result=yS(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var BS=VS,FS=16209,WS=function(e,t){var n,r,i,o,a,s,c,u,d,l,p,f,h,_,v,m,g,E,y,b,S,T,w,R,C=e.state;n=e.next_in,w=e.input,r=n+(e.avail_in-5),i=e.next_out,R=e.output,o=i-(t-e.avail_out),a=i+(e.avail_out-257),s=C.dmax,c=C.wsize,u=C.whave,d=C.wnext,l=C.window,p=C.hold,f=C.bits,h=C.lencode,_=C.distcode,v=(1<<C.lenbits)-1,m=(1<<C.distbits)-1;e:do{f<15&&(p+=w[n++]<<f,f+=8,p+=w[n++]<<f,f+=8),g=h[p&v];t:for(;;){if(p>>>=E=g>>>24,f-=E,0==(E=g>>>16&255))R[i++]=65535&g;else{if(!(16&E)){if(0==(64&E)){g=h[(65535&g)+(p&(1<<E)-1)];continue t}if(32&E){C.mode=16191;break e}e.msg="invalid literal/length code",C.mode=FS;break e}y=65535&g,(E&=15)&&(f<E&&(p+=w[n++]<<f,f+=8),y+=p&(1<<E)-1,p>>>=E,f-=E),f<15&&(p+=w[n++]<<f,f+=8,p+=w[n++]<<f,f+=8),g=_[p&m];n:for(;;){if(p>>>=E=g>>>24,f-=E,!(16&(E=g>>>16&255))){if(0==(64&E)){g=_[(65535&g)+(p&(1<<E)-1)];continue n}e.msg="invalid distance code",C.mode=FS;break e}if(b=65535&g,f<(E&=15)&&(p+=w[n++]<<f,(f+=8)<E&&(p+=w[n++]<<f,f+=8)),(b+=p&(1<<E)-1)>s){e.msg="invalid distance too far back",C.mode=FS;break e}if(p>>>=E,f-=E,b>(E=i-o)){if((E=b-E)>u&&C.sane){e.msg="invalid distance too far back",C.mode=FS;break e}if(S=0,T=l,0===d){if(S+=c-E,E<y){y-=E;do{R[i++]=l[S++]}while(--E);S=i-b,T=R}}else if(d<E){if(S+=c+d-E,(E-=d)<y){y-=E;do{R[i++]=l[S++]}while(--E);if(S=0,d<y){y-=E=d;do{R[i++]=l[S++]}while(--E);S=i-b,T=R}}}else if(S+=d-E,E<y){y-=E;do{R[i++]=l[S++]}while(--E);S=i-b,T=R}for(;y>2;)R[i++]=T[S++],R[i++]=T[S++],R[i++]=T[S++],y-=3;y&&(R[i++]=T[S++],y>1&&(R[i++]=T[S++]))}else{S=i-b;do{R[i++]=R[S++],R[i++]=R[S++],R[i++]=R[S++],y-=3}while(y>2);y&&(R[i++]=R[S++],y>1&&(R[i++]=R[S++]))}break}}break}}while(n<r&&i<a);n-=y=f>>3,p&=(1<<(f-=y<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<a?a-i+257:257-(i-a),C.hold=p,C.bits=f},GS=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),HS=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),zS=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),KS=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),YS=function(e,t,n,r,i,o,a,s){var c,u,d,l,p,f,h,_,v,m=s.bits,g=0,E=0,y=0,b=0,S=0,T=0,w=0,R=0,C=0,O=0,A=null,I=new Uint16Array(16),k=new Uint16Array(16),N=null;for(g=0;g<=15;g++)I[g]=0;for(E=0;E<r;E++)I[t[n+E]]++;for(S=m,b=15;b>=1&&0===I[b];b--);if(S>b&&(S=b),0===b)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(y=1;y<b&&0===I[y];y++);for(S<y&&(S=y),R=1,g=1;g<=15;g++)if(R<<=1,(R-=I[g])<0)return-1;if(R>0&&(0===e||1!==b))return-1;for(k[1]=0,g=1;g<15;g++)k[g+1]=k[g]+I[g];for(E=0;E<r;E++)0!==t[n+E]&&(a[k[t[n+E]]++]=E);if(0===e?(A=N=a,f=20):1===e?(A=GS,N=HS,f=257):(A=zS,N=KS,f=0),O=0,E=0,g=y,p=o,T=S,w=0,d=-1,l=(C=1<<S)-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){h=g-w,a[E]+1<f?(_=0,v=a[E]):a[E]>=f?(_=N[a[E]-f],v=A[a[E]-f]):(_=96,v=0),c=1<<g-w,y=u=1<<T;do{i[p+(O>>w)+(u-=c)]=h<<24|_<<16|v|0}while(0!==u);for(c=1<<g-1;O&c;)c>>=1;if(0!==c?(O&=c-1,O+=c):O=0,E++,0==--I[g]){if(g===b)break;g=t[n+a[E]]}if(g>S&&(O&l)!==d){for(0===w&&(w=S),p+=y,R=1<<(T=g-w);T+w<b&&!((R-=I[T+w])<=0);)T++,R<<=1;if(C+=1<<T,1===e&&C>852||2===e&&C>592)return 1;i[d=O&l]=S<<24|T<<16|p-o|0}}return 0!==O&&(i[p+O]=g-w<<24|64<<16|0),s.bits=S,0},qS=bb.Z_FINISH,JS=bb.Z_BLOCK,XS=bb.Z_TREES,QS=bb.Z_OK,ZS=bb.Z_STREAM_END,$S=bb.Z_NEED_DICT,eT=bb.Z_STREAM_ERROR,tT=bb.Z_DATA_ERROR,nT=bb.Z_MEM_ERROR,rT=bb.Z_BUF_ERROR,iT=bb.Z_DEFLATED,oT=16180,aT=16190,sT=16191,cT=16199,uT=16200,dT=16209,lT=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function pT(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var fT,hT,_T=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<oT||t.mode>16211?1:0},vT=function(e){if(_T(e))return eT;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=oT,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,QS},mT=function(e){if(_T(e))return eT;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,vT(e)},gT=function(e,t){var n;if(_T(e))return eT;var r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?eT:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,mT(e))},ET=function(e,t){if(!e)return eT;var n=new pT;e.state=n,n.strm=e,n.window=null,n.mode=oT;var r=gT(e,t);return r!==QS&&(e.state=null),r},yT=!0,bT=function(e){if(yT){fT=new Int32Array(512),hT=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(YS(1,e.lens,0,288,fT,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;YS(2,e.lens,0,32,hT,0,e.work,{bits:5}),yT=!1}e.lencode=fT,e.lenbits=9,e.distcode=hT,e.distbits=5},ST=function(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},TT=mT,wT=ET,RT=function(e,t){var n,r,i,o,a,s,c,u,d,l,p,f,h,_,v,m,g,E,y,b,S,T,w,R,C=0,O=new Uint8Array(4),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(_T(e)||!e.output||!e.input&&0!==e.avail_in)return eT;(n=e.state).mode===sT&&(n.mode=16192),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,d=n.bits,l=s,p=c,T=QS;e:for(;;)switch(n.mode){case oT:if(0===n.wrap){n.mode=16192;break}for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,O[0]=255&u,O[1]=u>>>8&255,n.check=Eb(n.check,O,2,0),u=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=dT;break}if((15&u)!==iT){e.msg="unknown compression method",n.mode=dT;break}if(d-=4,S=8+(15&(u>>>=4)),0===n.wbits&&(n.wbits=S),S>15||S>n.wbits){e.msg="invalid window size",n.mode=dT;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&u?16189:sT,u=0,d=0;break;case 16181:for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(n.flags=u,(255&n.flags)!==iT){e.msg="unknown compression method",n.mode=dT;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=dT;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(O[0]=255&u,O[1]=u>>>8&255,n.check=Eb(n.check,O,2,0)),u=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(O[0]=255&u,O[1]=u>>>8&255,O[2]=u>>>16&255,O[3]=u>>>24&255,n.check=Eb(n.check,O,4,0)),u=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(O[0]=255&u,O[1]=u>>>8&255,n.check=Eb(n.check,O,2,0)),u=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(O[0]=255&u,O[1]=u>>>8&255,n.check=Eb(n.check,O,2,0)),u=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((f=n.length)>s&&(f=s),f&&(n.head&&(S=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+f),S)),512&n.flags&&4&n.wrap&&(n.check=Eb(n.check,r,f,o)),s-=f,o+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break e;f=0;do{S=r[o+f++],n.head&&S&&n.length<65536&&(n.head.name+=String.fromCharCode(S))}while(S&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=Eb(n.check,r,f,o)),s-=f,o+=f,S)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break e;f=0;do{S=r[o+f++],n.head&&S&&n.length<65536&&(n.head.comment+=String.fromCharCode(S))}while(S&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=Eb(n.check,r,f,o)),s-=f,o+=f,S)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(4&n.wrap&&u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=dT;break}u=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=sT;break;case 16189:for(;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}e.adler=n.check=lT(u),u=0,d=0,n.mode=aT;case aT:if(0===n.havedict)return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=d,$S;e.adler=n.check=1,n.mode=sT;case sT:if(t===JS||t===XS)break e;case 16192:if(n.last){u>>>=7&d,d-=7&d,n.mode=16206;break}for(;d<3;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}switch(n.last=1&u,d-=1,3&(u>>>=1)){case 0:n.mode=16193;break;case 1:if(bT(n),n.mode=cT,t===XS){u>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=dT}u>>>=2,d-=2;break;case 16193:for(u>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=dT;break}if(n.length=65535&u,u=0,d=0,n.mode=16194,t===XS)break e;case 16194:n.mode=16195;case 16195:if(f=n.length){if(f>s&&(f=s),f>c&&(f=c),0===f)break e;i.set(r.subarray(o,o+f),a),s-=f,o+=f,c-=f,a+=f,n.length-=f;break}n.mode=sT;break;case 16196:for(;d<14;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(n.nlen=257+(31&u),u>>>=5,d-=5,n.ndist=1+(31&u),u>>>=5,d-=5,n.ncode=4+(15&u),u>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=dT;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.lens[A[n.have++]]=7&u,u>>>=3,d-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,w={bits:n.lenbits},T=YS(0,n.lens,0,19,n.lencode,0,n.work,w),n.lenbits=w.bits,T){e.msg="invalid code lengths set",n.mode=dT;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;m=(C=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,g=65535&C,!((v=C>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(g<16)u>>>=v,d-=v,n.lens[n.have++]=g;else{if(16===g){for(R=v+2;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(u>>>=v,d-=v,0===n.have){e.msg="invalid bit length repeat",n.mode=dT;break}S=n.lens[n.have-1],f=3+(3&u),u>>>=2,d-=2}else if(17===g){for(R=v+3;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}d-=v,S=0,f=3+(7&(u>>>=v)),u>>>=3,d-=3}else{for(R=v+7;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}d-=v,S=0,f=11+(127&(u>>>=v)),u>>>=7,d-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=dT;break}for(;f--;)n.lens[n.have++]=S}}if(n.mode===dT)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=dT;break}if(n.lenbits=9,w={bits:n.lenbits},T=YS(1,n.lens,0,n.nlen,n.lencode,0,n.work,w),n.lenbits=w.bits,T){e.msg="invalid literal/lengths set",n.mode=dT;break}if(n.distbits=6,n.distcode=n.distdyn,w={bits:n.distbits},T=YS(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,w),n.distbits=w.bits,T){e.msg="invalid distances set",n.mode=dT;break}if(n.mode=cT,t===XS)break e;case cT:n.mode=uT;case uT:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=d,WS(e,p),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,d=n.bits,n.mode===sT&&(n.back=-1);break}for(n.back=0;m=(C=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,g=65535&C,!((v=C>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(m&&0==(240&m)){for(E=v,y=m,b=g;m=(C=n.lencode[b+((u&(1<<E+y)-1)>>E)])>>>16&255,g=65535&C,!(E+(v=C>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}u>>>=E,d-=E,n.back+=E}if(u>>>=v,d-=v,n.back+=v,n.length=g,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=sT;break}if(64&m){e.msg="invalid literal/length code",n.mode=dT;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(R=n.extra;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;m=(C=n.distcode[u&(1<<n.distbits)-1])>>>16&255,g=65535&C,!((v=C>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(0==(240&m)){for(E=v,y=m,b=g;m=(C=n.distcode[b+((u&(1<<E+y)-1)>>E)])>>>16&255,g=65535&C,!(E+(v=C>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}u>>>=E,d-=E,n.back+=E}if(u>>>=v,d-=v,n.back+=v,64&m){e.msg="invalid distance code",n.mode=dT;break}n.offset=g,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(R=n.extra;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=dT;break}n.mode=16204;case 16204:if(0===c)break e;if(f=p-c,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=dT;break}f>n.wnext?(f-=n.wnext,h=n.wsize-f):h=n.wnext-f,f>n.length&&(f=n.length),_=n.window}else _=i,h=a-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do{i[a++]=_[h++]}while(--f);0===n.length&&(n.mode=uT);break;case 16205:if(0===c)break e;i[a++]=n.length,c--,n.mode=uT;break;case 16206:if(n.wrap){for(;d<32;){if(0===s)break e;s--,u|=r[o++]<<d,d+=8}if(p-=c,e.total_out+=p,n.total+=p,4&n.wrap&&p&&(e.adler=n.check=n.flags?Eb(n.check,i,p,a-p):mb(n.check,i,p,a-p)),p=c,4&n.wrap&&(n.flags?u:lT(u))!==n.check){e.msg="incorrect data check",n.mode=dT;break}u=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(4&n.wrap&&u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=dT;break}u=0,d=0}n.mode=16208;case 16208:T=ZS;break e;case dT:T=tT;break e;case 16210:return nT;default:return eT}return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=d,(n.wsize||p!==e.avail_out&&n.mode<dT&&(n.mode<16206||t!==qS))&&ST(e,e.output,e.next_out,p-e.avail_out),l-=e.avail_in,p-=e.avail_out,e.total_in+=l,e.total_out+=p,n.total+=p,4&n.wrap&&p&&(e.adler=n.check=n.flags?Eb(n.check,i,p,e.next_out-p):mb(n.check,i,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===sT?128:0)+(n.mode===cT||16194===n.mode?256:0),(0===l&&0===p||t===qS)&&T===QS&&(T=rT),T},CT=function(e){if(_T(e))return eT;var t=e.state;return t.window&&(t.window=null),e.state=null,QS},OT=function(e,t){if(_T(e))return eT;var n=e.state;return 0==(2&n.wrap)?eT:(n.head=t,t.done=!1,QS)},AT=function(e,t){var n,r=t.length;return _T(e)||0!==(n=e.state).wrap&&n.mode!==aT?eT:n.mode===aT&&mb(1,t,r,0)!==n.check?tT:ST(e,t,r,r)?(n.mode=16210,nT):(n.havedict=1,QS)},IT=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},kT=Object.prototype.toString,NT=bb.Z_NO_FLUSH,PT=bb.Z_FINISH,DT=bb.Z_OK,xT=bb.Z_STREAM_END,LT=bb.Z_NEED_DICT,MT=bb.Z_STREAM_ERROR,UT=bb.Z_DATA_ERROR,jT=bb.Z_MEM_ERROR;function VT(e){this.options=ES({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new OS,this.strm.avail_out=0;var n=wT(this.strm,t.windowBits);if(n!==DT)throw new Error(yb[n]);if(this.header=new IT,OT(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=wS(t.dictionary):"[object ArrayBuffer]"===kT.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=AT(this.strm,t.dictionary))!==DT))throw new Error(yb[n])}function BT(e,t){var n=new VT(t);if(n.push(e),n.err)throw n.msg||yb[n.err];return n.result}VT.prototype.push=function(e,t){var n,r,i,o=this.strm,a=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?PT:NT,"[object ArrayBuffer]"===kT.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;;){for(0===o.avail_out&&(o.output=new Uint8Array(a),o.next_out=0,o.avail_out=a),(n=RT(o,r))===LT&&s&&((n=AT(o,s))===DT?n=RT(o,r):n===UT&&(n=LT));o.avail_in>0&&n===xT&&o.state.wrap>0&&0!==e[o.next_in];)TT(o),n=RT(o,r);switch(n){case MT:case UT:case LT:case jT:return this.onEnd(n),this.ended=!0,!1}if(i=o.avail_out,o.next_out&&(0===o.avail_out||n===xT))if("string"===this.options.to){var c=CS(o.output,o.next_out),u=o.next_out-c,d=RS(o.output,c);o.next_out=u,o.avail_out=a-u,u&&o.output.set(o.output.subarray(c,c+u),0),this.onData(d)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out));if(n!==DT||0!==i){if(n===xT)return n=CT(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===o.avail_in)break}}return!0},VT.prototype.onData=function(e){this.chunks.push(e)},VT.prototype.onEnd=function(e){e===DT&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=yS(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var FT,WT=BT,GT=BS,HT=WT;!function(e){e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE"}(FT||(FT={}));var zT=function(){function e(){uc(this,"_sequence",0),uc(this,"_startTime",Date.now()),uc(this,"isUseOneByte",!0)}var t=e.prototype;return t.serialize=function(e){var t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){var n=new Uint8Array(4);n.set([1,0,0,0]);var r={id:0,length:4,data:n.buffer},i={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[r]};t.commonPacketHeader.extension=1,t.extension=i,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;var o=new ArrayBuffer(t.commonPacketHeader.length),a=new Uint8Array(o),s=new DataView(o),c=0;if(s.setUint16(c,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),c+=2,s.setUint32(c,t.commonPacketHeader.sequence,!0),c+=4,s.setUint16(c,t.commonStreamHeader,!0),c+=2,t.extension){var u=this.serializeExtension(t.extension);a.set(new Uint8Array(u),c),c+=u.byteLength}if(a.set(new Uint8Array(t.payload),c),(c+=t.payload.byteLength)!==t.commonPacketHeader.length)throw Error("serialize error!");return o},t.deserialize=function(e){if(e.byteLength<4)return new ArrayBuffer(0);var t=new DataView(e),n=0,r=t.getUint16(n,!0);n+=2;var i,o,a=(32768&r)>>15;if(t.getUint16(n+2,!0),t.getUint16(n,!0),n+=4,t.getUint16(n,!0),n+=2,a){n+=2+(o=this.deserializeExtension(e.slice(n))).length,i=e.slice(n);var s=!1;if(o.datas.length>0){var c=o.datas.find((function(e){return 0===e.id}));c&&(s=1==(1&new DataView(c.data).getUint32(0,!0)))}i=s?this.decompress(i):i}else i=e.slice(8);return i},t.serializeExtension=function(e){var t=e.profile,n=e.length,r=e.datas,i=new ArrayBuffer(n+2),o=new Uint8Array(i),a=new DataView(i),s=0;if(a.setUint8(s++,t),a.setUint8(s++,n),r.forEach((function(e){t?(a.setUint8(s++,e.id),a.setUint8(s++,e.length),o.set(new Uint8Array(e.data),s),s+=e.data.byteLength):(a.setUint8(s++,e.id|e.length<<4),o.set(new Uint8Array(e.data),s),s+=e.data.byteLength)})),s!==n+2)throw Error("serialize extension error, is ".concat(s,"!==").concat(n+2));return i},t.deserializeExtension=function(e){var t=new DataView(e),n=0,r=t.getUint8(n);n++;var i=t.getUint8(n);n++;for(var o=r===FT.TWO_BYTE,a=[],s=new DataView(e,2),c=0;c<i;){var u=0,d=0,l=new ArrayBuffer(0);o?(u=s.getUint8(c),c++,d=s.getUint8(c),c++):(u=15&s.getUint8(c),d=s.getUint8(c)>>4,c++),d>0&&(c+=(l=s.buffer.slice(c+2,c+2+d)).byteLength),a.push({id:u,length:d,data:l})}if(c!==i)throw Error("parse error");return{profile:r,length:i,datas:a}},t.decompress=function(e){return HT(new Uint8Array(e))},t.compress=function(e){return GT(new Uint8Array(e))},s(e,[{key:"startTime",get:function(){var e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}},{key:"sequence",get:function(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}}]),e}(),KT=function(e){function t(t,n){var r;return uc(l(r=e.call(this)||this),"_version",1),uc(l(r),"_type",3),uc(l(r),"_config",void 0),uc(l(r),"_originDataChannel",void 0),uc(l(r),"_dataStreamPacketHeader",new ArrayBuffer(4)),uc(l(r),"_dataStreamPacketHandler",void 0),uc(l(r),"_datachannelEventMap",new Map),r._config=t,n&&(r._originDataChannel=n,r._bandDataChannelEvents(n)),r._initPacketHeader(),r._dataStreamPacketHandler=new zT,r}p(t,e);var n=t.prototype;return n.getChannelId=function(){return this.id},n.getConfig=function(){return this._config},n._close=function(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)},n._waitTillOpen=function(){var e=d(c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Vl((function(e,n){if(t._originDataChannel){"open"===t._originDataChannel.readyState&&e();var r=setTimeout((function(){var e;n(new Sp(ql.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat(null===(e=t._originDataChannel)||void 0===e?void 0:e.id)))}),1e4);t._originDataChannel.onopen=function(){clearTimeout(r),t._originDataChannel&&t._bandDataChannelEvents(t._originDataChannel),e()},t._originDataChannel.onerror=function(){throw clearTimeout(r),new Sp(ql.DATACHANNEL_CONNECTION_TIMEOUT)}}else n(new Sp(ql.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n._updateOriginDataChannel=function(e){this._originDataChannel=e,this._bandDataChannelEvents(e)},n._initPacketHeader=function(){var e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)},n._bandDataChannelEvents=function(e){var t=this;this._unbindDataChannelEvents(e),[Zg.OPEN,Zg.CLOSE,Zg.ERROR].forEach((function(n){var r=function(){t.emit(n)};t._datachannelEventMap.set(n,r),e.addEventListener(n,r)}))},n._unbindDataChannelEvents=function(e){Array.from(this._datachannelEventMap.entries()).forEach((function(t){var n=t[0],r=t[1];e.removeEventListener(n,r)})),this._datachannelEventMap.clear()},s(t,[{key:"id",get:function(){return this._config.id}},{key:"ordered",get:function(){return this._config.ordered}},{key:"maxRetransmits",get:function(){return W_("DATASTREAM_MAX_RETRANSMITS")}},{key:"metadata",get:function(){return this._config.metadata}},{key:"readyState",get:function(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.readyState)&&void 0!==e?e:"connecting"}},{key:"_originDataChannelId",get:function(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.id)&&void 0!==e?e:null}}]),t}(Kp),YT=function(e){function t(t){var n;return uc(l(n=e.call(this,t)||this),"_messageListener",void 0),n._messageListener=function(e){if(e.data.byteLength<n._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+n._dataStreamPacketHeader.byteLength);var t=e.data.slice(0,n._dataStreamPacketHeader.byteLength);if(new DataView(t).getUint8(3)===n.id){var r=e.data.slice(n._dataStreamPacketHeader.byteLength);r=n._dataStreamPacketHandler.deserialize(r),n.emit(Zg.MESSAGE,r)}},n}p(t,e);var n=t.prototype;return n._updateOriginDataChannel=function(t){e.prototype._updateOriginDataChannel.call(this,t),this._bandRemoteDataChannelEvents()},n._close=function(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),e.prototype._close.call(this))},n._bandRemoteDataChannelEvents=function(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)},t}(KT),qT=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.send=function(e){if(this._originDataChannel){var t;t=this._dataStreamPacketHandler.serialize(e);var n=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);n.set(new Uint8Array(this._dataStreamPacketHeader),0),n.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(n.buffer)}},t}(KT),JT=function(e){function t(){var t;return uc(l(t=e.apply(this,arguments)||this),"resultStorage",new Map),t}p(t,e);var n=t.prototype;return n.setLocalAudioStats=function(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))},n.setLocalVideoStats=function(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))},n.setRemoteAudioStats=function(e,t){var n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))},n.setRemoteVideoStats=function(e,t){var n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))},n.record=function(e,t,n){if(!(W_("STATS_UPDATE_INTERVAL")>500)){this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});var r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var i,o=Or(i=r.result).call(i,!0);r.isPrevNormal&&!o&&this.emit("exception",XT[e],e,t),!r.isPrevNormal&&o&&this.emit("exception",XT[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=o,r.result=[]}}},n.checkAudioOutputLevel=function(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)},n.checkAudioInputLevel=function(e,t){return t instanceof iy&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel},n.checkFramerateInput=function(e,t){var n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=ow(t._encoderConfig.frameRate));var r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)},n.checkFramerateSent=function(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)},n.checkSendVideoBitrate=function(e,t){return!!t.muted||0!==e.sendBitrate},n.checkSendAudioBitrate=function(e,t){return t instanceof iy&&!t.isActive||!!t.muted||0!==e.sendBitrate},n.checkVideoDecode=function(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate},t}(Kp),XT={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},QT=new(function(){function e(){}var t=e.prototype;return t.markSubscribeStart=function(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))},t.markPublishStart=function(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))},t.measureFromSubscribeStart=function(e,t){var n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){var r=n[n.length-1];return Math.round(performance.now()-r.startTime)}return 0},t.measureFromPublishStart=function(e,t){var n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){var r=n[n.length-1];return Math.round(performance.now()-r.startTime)}return 0},e}());function ZT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZT(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ew=function(){function e(e){var t=this;uc(this,"store",void 0),uc(this,"onStatsException",void 0),uc(this,"onUploadPublishDuration",void 0),uc(this,"onStatsChanged",void 0),uc(this,"localStats",new Map),uc(this,"remoteStats",new Map),uc(this,"updateStatsInterval",void 0),uc(this,"trafficStats",void 0),uc(this,"trafficStatsPeerList",[]),uc(this,"uplinkStats",void 0),uc(this,"exceptionMonitor",void 0),uc(this,"p2pChannel",void 0),uc(this,"scalabilityMode",gv.L1T1),uc(this,"updateStats",(function(){t.p2pChannel&&(t.updateRemoteStats(t.p2pChannel),t.updateLocalStats(t.p2pChannel))})),this.store=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new JT,this.exceptionMonitor.on("exception",(function(e,n,r){t.onStatsException&&t.onStatsException(e,n,r)}))}var t=e.prototype;return t.reset=function(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0},t.getLocalAudioTrackStats=function(){return this.localStats.get(mm.LocalAudioTrack)||$T({},Yg)},t.getLocalVideoTrackStats=function(){return this.localStats.get(mm.LocalVideoTrack)||$T({},qg)},t.getRemoteAudioTrackStats=function(e){var t=this,n=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,n){if(!t.trafficStats)return n;var r=t.trafficStats.peer_delay.find((function(t){return t.peer_uid===e}));return r&&(n.publishDuration=r.B_ppad+(Date.now()-t.trafficStats.timestamp)),n})),r={};if(e){var i,o=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.audioStats;o&&(r[e]=n(e,o))}else Array.from(this.remoteStats.entries()).forEach((function(e){var t=e[0],i=e[1].audioStats;i&&(r[t]=n(t,i))}));return r},t.getRemoteNetworkQualityStats=function(e){var t={};if(e){var n,r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;r&&(t[e]=r)}else Array.from(this.remoteStats.entries()).forEach((function(e){var n=e[0],r=e[1].networkStats;r&&(t[n]=r)}));return t},t.getRemoteVideoTrackStats=function(e){var t=this,n=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,n){if(!t.trafficStats)return n;var r=t.trafficStats.peer_delay.find((function(t){return t.peer_uid===e}));return r&&(n.publishDuration=r.B_ppvd+(Date.now()-t.trafficStats.timestamp)),n})),r={};if(e){var i,o=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.videoStats;o&&(r[e]=n(e,o))}else Array.from(this.remoteStats.entries()).forEach((function(e){var t=e[0],i=e[1].videoStats;i&&(r[t]=n(t,i))}));return r},t.getRTCStats=function(){var e=0,t=0,n=0,r=0,i=this.localStats.get(mm.LocalAudioTrack);i&&(e+=i.sendBytes,t+=i.sendBitrate);var o=this.localStats.get(mm.LocalVideoTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);var a=this.localStats.get(mm.LocalVideoLowTrack);a&&(e+=a.sendBytes,t+=a.sendBitrate),this.remoteStats.forEach((function(e){var t=e.audioStats,i=e.videoStats;t&&(n+=t.receiveBytes,r+=t.receiveBitrate),i&&(n+=i.receiveBytes,r+=i.receiveBitrate)}));var s=1;return this.trafficStats&&(s+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:s,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}},t.addLocalStats=function(e){this.localStats.set(e,void 0)},t.removeLocalStats=function(e){e?this.localStats.delete(e):this.localStats.clear()},t.addRemoteStats=function(e){this.remoteStats.set(e,{})},t.removeRemoteStats=function(e){e?this.remoteStats.delete(e):this.remoteStats.clear()},t.addP2PChannel=function(e){this.p2pChannel=e},t.updateTrafficStats=function(e){var t=this;e.peer_delay=e.peer_delay.filter((function(e){return void 0!==e.B_ppad||void 0!==e.B_ppvd})),e.peer_delay.filter((function(e){return-1===t.trafficStatsPeerList.indexOf(e.peer_uid)})).forEach((function(e){var n,r=null===(n=t.p2pChannel)||void 0===n?void 0:n.getRemoteMedia(e.peer_uid),i=null!=r&&r.videoSSRC?QT.measureFromSubscribeStart(t.store.clientId,r.videoSSRC):0,o=null!=r&&r.audioSSRC?QT.measureFromSubscribeStart(t.store.clientId,r.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(t.onUploadPublishDuration&&t.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,i>o?i:o),t.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e},t.updateUplinkStats=function(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&tv.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e},e.isRemoteVideoFreeze=function(e,t,n){if(!e)return!1;var r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,i=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!i},e.isRemoteAudioFreeze=function(e){return!!e&&e._isFreeze()},t.isLocalVideoFreeze=function(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3},t.updateLocalStats=function(e){var t=this;Array.from(this.localStats.entries()).forEach((function(n){var r=n[0],i=n[1];switch(r){case mm.LocalVideoTrack:case mm.LocalVideoLowTrack:var o,a=i,s=$T({},qg),c=e.getStats(),u=e.getLocalMedia(r);if(c){var d=c.videoSend.find((function(e){return e.ssrc===(null==u?void 0:u.ssrcs[0].ssrcId)}));if(d){var l=e.getLocalVideoSize(),p=e.getEncoderConfig(mm.LocalVideoTrack);"H264"!==d.codec&&"H265"!==d.codec&&"VP8"!==d.codec&&"VP9"!==d.codec&&"AV1X"!==d.codec&&"AV1"!==d.codec||(s.codecType=d.codec),s.sendBytes=d.bytes,s.sendBitrate=a?8*Math.max(0,s.sendBytes-a.sendBytes):0,d.inputFrame?(s.captureFrameRate=d.inputFrame.frameRate,s.captureResolutionHeight=d.inputFrame.height,s.captureResolutionWidth=d.inputFrame.width):l&&(s.captureResolutionWidth=l.width,s.captureResolutionHeight=l.height),d.sentFrame?(s.sendFrameRate=d.sentFrame.frameRate,s.sendResolutionHeight=d.sentFrame.height,s.sendResolutionWidth=d.sentFrame.width):l&&(s.sendResolutionWidth=l.width,s.sendResolutionHeight=l.height),d.avgEncodeMs&&(s.encodeDelay=d.avgEncodeMs),p&&p.bitrateMax&&(s.targetSendBitrate=1e3*p.bitrateMax),s.sendPackets=d.packets,s.sendPacketsLost=d.packetsLost,s.sendJitterMs=d.jitterMs,s.sendRttMs=d.rttMs,s.totalDuration=a?a.totalDuration+1:1,s.totalFreezeTime=a?a.totalFreezeTime:0,t.isLocalVideoFreeze(d)&&(s.totalFreezeTime+=1),d.scalabilityMode&&t.scalabilityMode!==d.scalabilityMode&&(tv.debug("[".concat(t.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(d.scalabilityMode)),t.scalabilityMode=d.scalabilityMode)}t.trafficStats&&(s.currentPacketLossRate=(t.trafficStats.B_pvlr4||0)/100)}t.localStats.set(r,s),((null==a?void 0:a.sendResolutionWidth)!==s.sendResolutionWidth||(null==a?void 0:a.sendResolutionHeight)!==s.sendResolutionHeight)&&(null===(o=t.onStatsChanged)||void 0===o||o.call(t,"resolution",{width:s.sendResolutionWidth,height:s.sendResolutionHeight})),s&&u&&t.exceptionMonitor.setLocalVideoStats(t.store.uid,u.track,s);break;case mm.LocalAudioTrack:var f=i,h=$T({},Yg),_=e.getStats(),v=e.getLocalMedia(r);if(_){var m=_.audioSend.find((function(e){return e.ssrc===(null==v?void 0:v.ssrcs[0].ssrcId)}));if(m){if("opus"!==m.codec&&"aac"!==m.codec&&"PCMU"!==m.codec&&"PCMA"!==m.codec&&"G722"!==m.codec||(h.codecType=m.codec),m.inputLevel)h.sendVolumeLevel=Math.round(32767*m.inputLevel);else{var g=e.getLocalAudioVolume();g&&(h.sendVolumeLevel=Math.round(32767*g))}h.sendBytes=m.bytes,h.sendPackets=m.packets,h.sendPacketsLost=m.packetsLost,h.sendJitterMs=m.jitterMs,h.sendRttMs=m.rttMs,h.sendBitrate=f?8*Math.max(0,h.sendBytes-f.sendBytes):0}}t.trafficStats&&(h.currentPacketLossRate=(t.trafficStats.B_palr4||0)/100),t.localStats.set(mm.LocalAudioTrack,h),h&&v&&t.exceptionMonitor.setLocalAudioStats(t.store.uid,v.track,h)}}))},t.updateRemoteStats=function(t){var n=this;Array.from(this.remoteStats.entries()).forEach((function(r){var i=r[0],o=r[1],a=o.videoStats,s=o.audioStats,c=a,u=o.videoPcStats,d=$T({},Jg),l=$T({},Qg),p=$T({},Xg),f=t.getRemoteMedia(i),h=f.audioTrack,_=f.videoTrack,v=f.audioSSRC,m=f.videoSSRC,g=t.getStats(),E=null==g?void 0:g.audioRecv.find((function(e){return e.ssrc===v})),y=null==g?void 0:g.videoRecv.find((function(e){return e.ssrc===m})),b=n.trafficStats&&n.trafficStats.peer_delay.find((function(e){return e.peer_uid===i}));if(E&&("opus"!==E.codec&&"aac"!==E.codec&&"PCMU"!==E.codec&&"PCMA"!==E.codec&&"G722"!==E.codec||(d.codecType=E.codec),E.outputLevel?d.receiveLevel=Math.round(32767*E.outputLevel):h&&(d.receiveLevel=Math.round(32767*h.getVolumeLevel())),d.receiveBytes=E.bytes,d.receivePackets=E.packets,d.receivePacketsLost=E.packetsLost,d.packetLossRate=d.receivePacketsLost/(d.receivePackets+d.receivePacketsLost),d.receiveBitrate=s?8*Math.max(0,d.receiveBytes-s.receiveBytes):0,d.totalDuration=s?s.totalDuration+1:1,d.totalFreezeTime=s?s.totalFreezeTime:0,d.freezeRate=d.totalFreezeTime/d.totalDuration,d.receiveDelay=E.jitterBufferMs,d.totalDuration>10&&e.isRemoteAudioFreeze(h)&&(d.totalFreezeTime+=1)),y){"H264"!==y.codec&&"H265"!==y.codec&&"VP8"!==y.codec&&"VP9"!==y.codec&&"AV1X"!==y.codec&&"AV1"!==y.codec||(l.codecType=y.codec),l.receiveBytes=y.bytes,l.receiveBitrate=c?8*Math.max(0,l.receiveBytes-c.receiveBytes):0,l.decodeFrameRate=y.decodeFrameRate<0?0:y.decodeFrameRate,l.renderFrameRate=y.decodeFrameRate<0?0:y.decodeFrameRate,y.outputFrame&&(l.renderFrameRate=y.outputFrame.frameRate),y.receivedFrame?(l.receiveFrameRate=y.receivedFrame.frameRate,l.receiveResolutionHeight=y.receivedFrame.height,l.receiveResolutionWidth=y.receivedFrame.width):_&&(l.receiveResolutionHeight=_._videoHeight||0,l.receiveResolutionWidth=_._videoWidth||0),void 0!==y.framesRateFirefox&&(l.receiveFrameRate=Math.round(y.framesRateFirefox)),l.receivePackets=y.packets,l.receivePacketsLost=y.packetsLost,l.packetLossRate=l.receivePacketsLost/(l.receivePackets+l.receivePacketsLost),l.totalDuration=c?c.totalDuration+1:1,l.totalFreezeTime=c?c.totalFreezeTime:0,l.receiveDelay=y.jitterBufferMs||0;var S=!!m&&t.getRemoteVideoIsReady(m);_&&S&&e.isRemoteVideoFreeze(_,y,u)&&(l.totalFreezeTime+=1),l.freezeRate=l.totalFreezeTime/l.totalDuration}b&&(d.end2EndDelay=b.B_ad,l.end2EndDelay=b.B_vd,d.transportDelay=b.B_ed,l.transportDelay=b.B_ed,d.currentPacketLossRate=b.B_ealr4/100,l.currentPacketLossRate=b.B_evlr4/100,p.uplinkNetworkQuality=b.B_punq?b.B_punq:0,p.downlinkNetworkQuality=b.B_pdnq?b.B_pdnq:0),n.remoteStats.set(i,{audioStats:d,videoStats:l,videoPcStats:y,networkStats:p}),h&&n.exceptionMonitor.setRemoteAudioStats(h,d),_&&n.exceptionMonitor.setRemoteVideoStats(_,l)}))},e}();function tw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tw(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rw(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(W_("TURN_DOMAIN")):(tv.info("Cannot recognized as IP address ".concat(e,". Used As Host instead")),e)}function iw(e,t){var n,r,i=W_("GATEWAY_DOMAINS"),o=i[1]&&-1!==t.indexOf(i[1])?1:0;e.addresses=e.addresses||[];var a=e.addresses.map((function(e){return e.domain_prefix?{address:"".concat(e.domain_prefix,".").concat(i[o++%i.length],":").concat(e.port)}:e.ip.match(/^[\.\:\d]+$/)?{ip:e.ip,port:e.port,address:"".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(i[o++%i.length],":").concat(e.port)}:(tv.info("Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),{ip:e.ip,port:e.port,address:"".concat(e.ip,":").concat(e.port)})}));if(null!==(n=e.detail)&&void 0!==n&&n[18]&&"string"==typeof(null===(r=e.detail)||void 0===r?void 0:r[18]))for(var s=e.detail[18],c=null==s?void 0:s.split(";"),u=0;u<c.length;u++){var d,l=vg(d=c[u]).call(d);a[u]&&l&&(a[u].ip6=l)}return{gatewayAddrs:a,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function ow(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function aw(e){var t=e._encoderConfig;if(!t)return{};var n={resolution:t.width&&t.height?"".concat(ow(t.width),"x").concat(ow(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function sw(e){var t={connectionType:0,googRtt:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":var n=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===n&&(t.connectionType=1),"tcp"===n&&(t.connectionType=3),"tls"===n&&(t.connectionType=4);break;case"srflx":t.connectionType=2}return t}function cw(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function uw(e,t){var n,r,i;switch(t){case pg.CHOOSE_SERVER:r=4096,i="choose server";break;case pg.CLOUD_PROXY:r=1048576,i="proxy";break;case pg.CLOUD_PROXY_5:r=4194304,i="proxy5";break;case pg.CLOUD_PROXY_FALLBACK:r=4194310,i="proxy fallback";break;default:throw new Fv(ql.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((function(t){t.buffer&&t.buffer.flag===r&&(n={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((function(e){return nw(nw({},e),{},{ticket:t.buffer.cert})})),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:nw(nw({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!n)throw new Fv(ql.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return n}function dw(e,t){return lw.apply(this,arguments)}function lw(){return(lw=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vl.all(t.addresses.map(function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=rw(t.ip),e.t1=t.port,e.t2=t.port,e.t3=n&&W_("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?n.toString():hv.username,!(n&&W_("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext)){e.next=10;break}return e.next=7,zp(n.toString());case 7:e.t4=e.sent,e.next=11;break;case 10:e.t4=hv.password;case 11:return e.t5=e.t4,e.abrupt("return",{address:e.t0,tcpport:e.t1,udpport:e.t2,username:e.t3,password:e.t5});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pw(e,t){var n=t._videoHeight||t.getMediaStreamTrack(!0).getSettings().height;return n?Math.max(n/ow(e.height),1):(tv.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function fw(e){var t=e.candidateType,n=e.relayProtocol,r=e.type,i=e.address,o=e.port,a=e.protocol;return"local-candidate"===r?{candidateType:t,relayProtocol:n,protocol:a}:{candidateType:t,relayProtocol:n,address:i,port:o,protocol:a}}function hw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _w,vw=function(e){function t(t,n,r,i){var o;return uc(l(o=e.call(this)||this),"connectionID",0),uc(l(o),"currentURLIndex",0),uc(l(o),"reconnectReason",void 0),uc(l(o),"_reconnectMode","tryNext"),uc(l(o),"_name",void 0),uc(l(o),"_state","closed"),uc(l(o),"_retryConfig",void 0),uc(l(o),"_reconnectCount",0),uc(l(o),"_forceCloseTimeout",5e3),uc(l(o),"_onlineReconnectListener",void 0),uc(l(o),"_closeEstablishingTransmitter",(function(){})),uc(l(o),"_store",void 0),uc(l(o),"_joinChannelServiceRecordIndex",void 0),uc(l(o),"_useCompress",void 0),uc(l(o),"_inflateLength",0),uc(l(o),"_deflateLength",0),o._store=i,o._name=t,o._retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hw(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n),o._useCompress=r,o}p(t,e);var n=t.prototype;return n.resetReconnectCount=function(e){tv.debug("".concat(this._name," reset reconnect count, reason: ").concat(e)),this._reconnectCount=0},n.close=function(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;var n=this._transmitter;t?setTimeout((function(){return n.close()}),500):n.close(),this._transmitter=void 0}this.state=e?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()},n.reconnect=function(e,t){if(this._transmitter){var n;void 0!==e&&(this.reconnectMode=e),tv.debug("[".concat(this._name,"] reconnect is triggered initiative")),"number"==typeof this._joinChannelServiceRecordIndex&&(null===(n=this._store)||void 0===n||n.recordJoinChannelService({status:"error",errors:[new Error(t)]},this._joinChannelServiceRecordIndex));var r=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),r&&r.bind(this._transmitter)({code:9999,reason:t})}else tv.warning("[".concat(this._name,"] can not reconnect, no websocket"))},n.getInflateData=function(){var e=this._inflateLength,t=this._deflateLength;return this.clearInflateData(),{inflateLength:e,deflateLength:t}},n.setInflateData=function(e){this._deflateLength=this._deflateLength+e.originLength,this._inflateLength=this._inflateLength+e.compressedLength},n.clearInflateData=function(){this._inflateLength=0,this._deflateLength=0},s(t,[{key:"url",get:function(){return this._url?this._url:null}},{key:"reconnectMode",get:function(){return this._reconnectMode},set:function(e){var t;Or(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}},{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(Rm.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(Rm.CONNECTED):"closed"===this._state?this.emit(Rm.CLOSED):"failed"===this._state&&this.emit(Rm.FAILED))}}]),t}(Kp);!function(e){e[e.Default=0]="Default",e[e.Ack=1]="Ack"}(_w||(_w={}));var mw=function(){function e(e,t,n){uc(this,"version",1),uc(this,"initialRTO",void 0),uc(this,"maxBatchAckCount",void 0),uc(this,"maxRTO",void 0),uc(this,"initialRTT",void 0),uc(this,"ID",void 0),uc(this,"rtt",void 0),uc(this,"packetNumber",1),uc(this,"rtoRatioMap",new Map),uc(this,"timeoutMap",new Map),uc(this,"unorderedPacketQueue",[]),uc(this,"batchAckPacketQueue",[]),uc(this,"lastOrderedPacketNumber",0),uc(this,"batchAckTimer",void 0),uc(this,"sendImpl",void 0),uc(this,"receiveImpl",void 0),this.sendImpl=e,this.receiveImpl=t,this.ID=yf(7,"transmitter-"),this.initialRTO=void 0!==(null==n?void 0:n.initialRTO)?n.initialRTO:W_("TRANSMITTER_INITIAL_RTO"),this.initialRTT=void 0!==(null==n?void 0:n.initialRTT)?n.initialRTT:W_("TRANSMITTER_INITIAL_RTT"),this.rtt=void 0!==(null==n?void 0:n.initialRTT)?n.initialRTT:W_("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=void 0!==(null==n?void 0:n.maxBatchAckCount)?n.maxBatchAckCount:W_("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=void 0!==(null==n?void 0:n.maxRTO)?n.maxRTO:W_("TRANSMITTER_MAX_RTO")}var t=e.prototype;return t.packetize=function(e,t){return{type:_w.Default,version:this.version,packetNumber:t,payload:e}},t.serialize=function(e){switch(e.type){case _w.Default:var t;t="string"==typeof e.payload?(new TextEncoder).encode(e.payload):e.payload;var n=new ArrayBuffer(t.length+15),r=new DataView(n);return r.setUint16(0,e.version),r.setUint8(2,e.type),r.setUint32(3,e.packetNumber),Pp(r,7,BigInt(e.sendTs)),new Uint8Array(r.buffer).set(t,15),n;case _w.Ack:var i=new ArrayBuffer(16),o=new DataView(i);return o.setUint16(0,e.version),o.setUint8(2,e.type),o.setUint32(3,e.maxAckPacketNumber),o.setUint8(7,e.shift),Pp(o,8,BigInt(e.ackSendTs)),i}},t.deserialize=function(e){var t=new DataView(e),n=t.getUint16(0),r=t.getUint8(2);switch(r){case _w.Default:var i=t.getUint32(3),o=Np(t,7),a=e.slice(15),s=(new TextDecoder).decode(a);return{version:n,type:r,packetNumber:i,sendTs:Number(o),payload:s};case _w.Ack:var c=t.getUint32(3),u=t.getUint8(7),d=Np(t,8);return{version:n,type:r,maxAckPacketNumber:c,shift:u,ackSendTs:Number(d)};default:throw tv.error("[".concat(this.ID,"] Unrecognized packet type ").concat(r)),new Error("Unrecognized packet type ".concat(r))}},t.sendMessage=function(e){var t=this,n=this.packetize(e,this.packetNumber);this.packetNumber=4294967295===this.packetNumber?1:this.packetNumber+1;var r=this.calculateRTO(n),i=window.setTimeout((function(){t.resendMessage(n)}),r);this.timeoutMap.set(n.packetNumber,i),this.sendPacket(n)},t.onData=function(e){var t=this.deserialize(e);t.type===_w.Default?this.ack(t):t.type===_w.Ack&&(this.updateRTT(t,Math.round(performance.now())),this.clearRTO(t))},t.close=function(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach((function(e){e[0];var t=e[1];window.clearTimeout(t)})),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,void 0!==this.batchAckTimer&&window.clearTimeout(this.batchAckTimer)},t.resendMessage=function(e){var t=this,n=this.calculateRTO(e),r=window.setTimeout((function(){t.resendMessage(e)}),n);this.timeoutMap.set(e.packetNumber,r),this.sendPacket(e)},t.calculateRTO=function(e){var t=this.rtoRatioMap.get(e.packetNumber);if(void 0===t)return this.rtoRatioMap.set(e.packetNumber,1),this.initialRTO;var n=9*this.rtt/8*t;return this.rtoRatioMap.set(e.packetNumber,t+1),n>this.maxRTO?this.maxRTO:n},t.updateRTT=function(e,t){var n=e.ackSendTs;this.rtt=this.rtt*(7/8)+(t-n-this.rtt)/8},t.ack=function(e){var t=this;if(e.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(e):(this.batchAckPacketQueue.push(e),this.batchAckTimer=window.setTimeout((function(){t.batchAck()}),this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(e.payload);;){var n=this.unorderedPacketQueue[0];if(!n){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(n.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(e.packetNumber<=this.lastOrderedPacketNumber){var r={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:_w.Ack,version:this.version};this.sendPacket(r)}else if(e.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[e.packetNumber-this.lastOrderedPacketNumber-2]=e;var i={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:_w.Ack,version:this.version};this.sendPacket(i)}},t.batchAck=function(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;var e={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:_w.Ack,version:this.version};this.sendPacket(e),this.batchAckPacketQueue=[]},t.sendPacket=function(e){e.type===_w.Default&&(e.sendTs=Math.round(performance.now()));var t=this.serialize(e);this.sendImpl(t)},t.clearRTO=function(e){for(var t=e.maxAckPacketNumber-e.shift;t<=e.maxAckPacketNumber;t++){var n=this.timeoutMap.get(t);void 0!==n&&window.clearTimeout(n),this.timeoutMap.delete(t),this.rtoRatioMap.delete(t)}},e}(),gw=function(e){function t(t,n){var r;uc(l(r=e.call(this,t,n,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0)||this),"_initMutex",void 0),uc(l(r),"_reconnectInterrupter",void 0),uc(l(r),"_url",void 0),uc(l(r),"_transmitter",void 0),uc(l(r),"_addresses",void 0),uc(l(r),"_reliableTransmission",void 0),r._initMutex=new If("datachannel");var i=n.timeout,o=n.timeoutFactor,a=Math.max(300,Math.floor(3*i/5)),s=Math.max(1.2,Math.floor(8*o)/10);return Fp.ONLINE&&(r._retryConfig.timeout=a,r._retryConfig.timeoutFactor=s),rf.on(Wp.NETWORK_STATE_CHANGE,(function(e,t){e!==t&&(r.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===Fp.ONLINE?(r._retryConfig.timeout=a,r._retryConfig.timeoutFactor=s):(r._retryConfig.timeout=i,r._retryConfig.timeoutFactor=o))})),r}p(t,e);var n=t.prototype;return n.getConnection=function(){if(this._reliableTransmission)return this._reliableTransmission},n.init=function(){var e=d(c().mark((function e(t){var n,r,i=this,o=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:5e3,this._forceCloseTimeout=n,r=function(e,n){i._addresses=t,i.currentURLIndex=i._addresses.findIndex((function(e){return e.fingerprint||W_("FINGERPRINT")}));var r=i._addresses[i.currentURLIndex];i.state="connecting",i.createTransmitterConnection(r).then(e).catch(n),i.once(Rm.CLOSED,(function(){return n(new Fv(ql.WS_DISCONNECT))})),i.once(Rm.CONNECTED,(function(){return e()}))},e.abrupt("return",this._initMutex.lock().then((function(e){return new Vl((function(e,t){r(e,t)})).then((function(){e()})).catch((function(){e()}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.sendMessage=function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new Fv(ql.WS_ABORT,"datachannel is not ready");try{t||(e=JSON.stringify(e)),this._reliableTransmission.sendMessage(e)}catch(e){throw new Fv(ql.WS_ERR,"send datachannel signal message error"+e.toString())}},n.unbindDcCloseEventListener=function(){this._transmitter&&(this._transmitter.onclose=null)},n.sendMessageWithJSON=function(e){var t=JSON.stringify(e);return{compressed:t,compressedLength:t.length,origin:e}},n.sendMessageWithUint8Array=function(e){return{compressed:e,compressedLength:e.byteLength,origin:e}},n.createTransmitterConnection=function(e){var t=this;return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(e.ip,":").concat(e.port),new Vl((function(n,r){var i,o=function(){tv.debug("[".concat(t._name,"] datachannel opened:"),t._url),t.reconnectMode="retry",t.state="connected",t.resetReconnectCount("opened"),n()},a=function(){var e=d(c().mark((function e(i){var o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(o=t._closeEstablishingTransmitter)||void 0===o||o.call(t),tv.debug("[".concat(t._name,"] datachannel close ").concat(t._url,", code: ").concat(i.code,", reason: ").concat(i.reason,", current mode: ").concat(t.reconnectMode)),!(t._reconnectCount<t._retryConfig.maxRetryCount)){e.next=13;break}return"connected"===t.state&&(t.reconnectReason=i.reason,t.state="reconnecting"),a=tf(t,Rm.WILL_RECONNECT,t.reconnectMode)||t.reconnectMode,e.next=5,t.reconnectWithAction(a);case 5:if(s=e.sent,"closed"!==t.state){e.next=8;break}return e.abrupt("return",void tv.debug("[".concat(t.connectionID,"] dc is closed, no need to reconnect")));case 8:if(s){e.next=10;break}return e.abrupt("return",(r(new Fv(ql.WS_DISCONNECT,"datachannel reconnect failed: ".concat(i.code))),void t.close(!0)));case 10:n(),e.next=14;break;case 13:r(new Fv(ql.WS_DISCONNECT,"datachannel close: ".concat(i.code))),t.close();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(e){var n;null===(n=t._reliableTransmission)||void 0===n||n.onData(e.data)};t._transmitter&&(t._transmitter.onclose=null,t._transmitter.close()),t._reliableTransmission&&(t._reliableTransmission.close(),t._reliableTransmission=void 0),tv.debug("[".concat(t._name,"] start connect, address: ").concat(JSON.stringify(e)));var u=null===(i=t._store)||void 0===i?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),l=Date.now();$p(t,Rm.TO_CONNECT_DATACHANNEL,e).then((function(e){var n,r;if(!e)throw new Error("transmissonInfo not exist yet");var i=e.transmitter,c=e.close;t._transmitter=i,null===(n=t._store)||void 0===n||n.signalChannelOpen();var d=Date.now()-l;tv.debug("[choose dc] dc open cost ".concat(d,"ms")),t._reliableTransmission=new mw((function(e){var n;t._transmitter&&"open"===t._transmitter.readyState&&(null===(n=t._transmitter)||void 0===n||n.send(e))}),(function(e){"string"==typeof e&&t.emit(Rm.ON_MESSAGE,e)})),t._closeEstablishingTransmitter=function(){var e;null===(e=t._reliableTransmission)||void 0===e||e.close(),t._reliableTransmission=void 0,c()},o&&o(),i.onclose=a,i.onmessage=s,null===(r=t._store)||void 0===r||r.recordJoinChannelService({endTs:Date.now(),status:"success"},u),t._joinChannelServiceRecordIndex=u})).catch((function(e){var n;if(null===(n=t._store)||void 0===n||n.recordJoinChannelService({endTs:Date.now(),status:e instanceof Fv&&e.code===ql.WS_ABORT?"aborted":"error",errors:[e]},u),"closed"!==t.state){if(e instanceof Fv&&e.code===ql.WS_ERR){var i=new Fv(ql.WS_ERR,"init datachannel failed! Error: ".concat(e.toString()));return tv.error("[".concat(t._name,"]").concat(i)),void r(i)}a&&a(e)}else r(new Fv(ql.WS_DISCONNECT,"datachannel is closed: ".concat(e.toString())))}))}))},n.reconnectWithAction=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s,u,l,p,f=this,h=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(h.length>1&&void 0!==h[1])||h[1],!(this._reconnectCount>=this._retryConfig.maxRetryCount)){e.next=3;break}return e.abrupt("return",!1);case 3:if(this._addresses){e.next=5;break}return e.abrupt("return",!1);case 5:if("closed"!==this.state){e.next=7;break}return e.abrupt("return",!1);case 7:if(this._onlineReconnectListener||rf.networkState!==Fp.OFFLINE||(this._onlineReconnectListener=rf.onlineWaiter&&rf.onlineWaiter.then((function(){f._onlineReconnectListener=void 0}))),r=!0,this._reconnectInterrupter=function(){r=!1},!n){e.next=14;break}return i=Pf(this._reconnectCount,this._retryConfig),tv.debug("[".concat(this._name,"] wait ").concat(i,"ms to reconnect datachannel, mode: ").concat(t)),e.next=14,Vl.race([Ef(i),this._onlineReconnectListener||new Vl((function(){}))]);case 14:if("closed"!==this.state&&r){e.next=16;break}return e.abrupt("return",!1);case 16:if(this._reconnectCount+=1,o=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.emit(Rm.RECONNECT_CREATE_CONNECTION,n),e.next=3,f.createTransmitterConnection(t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=18,"retry"!==t){e.next=26;break}return a=this._addresses[this.currentURLIndex],this.emit(Rm.RECONNECT_WAITTING_FINISH,t),e.next=24,o(a,t);case 24:e.next=50;break;case 26:if("tryNext"!==t){e.next=49;break}this.currentURLIndex+=1,s=this.currentURLIndex;case 29:if(!(s<this._addresses.length)){e.next=37;break}if(!this._addresses[s].fingerprint&&!W_("FINGERPRINT")){e.next=33;break}return this.currentURLIndex=s,e.abrupt("break",37);case 33:this.currentURLIndex+=1;case 34:s++,e.next=29;break;case 37:if(!(this.currentURLIndex>=this._addresses.length)){e.next=42;break}return tv.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),e.next=41,this.reconnectWithAction("recover",!1);case 41:return e.abrupt("return",e.sent);case 42:return tv.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex)),u=this._addresses[this.currentURLIndex],this.emit(Rm.RECONNECT_WAITTING_FINISH,t),e.next=47,o(u,t);case 47:e.next=50;break;case 49:"recover"===t&&(tv.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(Rm.RECONNECT_WAITTING_FINISH,t),this.emit(Rm.FAILBACK));case 50:return e.abrupt("return",!0);case 53:if(e.prev=53,e.t0=e.catch(18),tv.error("[".concat(this._name,"] reconnect failed"),e.t0.toString()),!(null!=e.t0&&null!==(l=e.t0.data)&&void 0!==l&&l.desc&&Array.isArray(e.t0.data.desc)&&e.t0.data.desc.length&&Or(p=e.t0.data.desc).call(p,"dynamic key expired"))){e.next=60;break}e.t1=(this.emit(Rm.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1),e.next=63;break;case 60:return e.next=62,this.reconnectWithAction(t,n);case 62:e.t1=e.sent;case 63:return e.abrupt("return",e.t1);case 64:case"end":return e.stop()}}),e,this,[[18,53]])})));return function(t){return e.apply(this,arguments)}}(),t}(vw),Ew=function(e){function t(t,n){var r;return uc(l(r=e.call(this)||this),"_disconnectedReason",void 0),uc(l(r),"_websocketReconnectReason",void 0),uc(l(r),"_connectionState",Rv.CLOSED),uc(l(r),"reconnectToken",void 0),uc(l(r),"websocket",void 0),uc(l(r),"openConnectionTime",void 0),uc(l(r),"clientId",void 0),uc(l(r),"lastMsgTime",Date.now()),uc(l(r),"uploadCache",[]),uc(l(r),"uploadCacheInterval",void 0),uc(l(r),"rttRolling",new Ff(5)),uc(l(r),"pingpongTimer",void 0),uc(l(r),"inflateDataTimer",void 0),uc(l(r),"pingpongTimeoutCount",0),uc(l(r),"joinResponse",void 0),uc(l(r),"multiIpOption",void 0),uc(l(r),"initError",void 0),uc(l(r),"spec",void 0),uc(l(r),"store",void 0),uc(l(r),"onWebsocketMessage",(function(e){if(e instanceof ArrayBuffer)r.emit(Cv.ON_BINARY_DATA,e);else{var t=JSON.parse(e);if(r.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){var n="res-@".concat(t._id);r.emit(n,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(r.emit(t._type,t._message),t._type===Iv.ON_NOTIFICATION&&r.handleNotification(t._message),t._type===Iv.ON_USER_BANNED))switch(t._message.error_code){case 14:r.close(jp.UID_BANNED);break;case 15:r.close(jp.IP_BANNED);break;case 16:r.close(jp.CHANNEL_BANNED)}}})),r.clientId=t.clientId,r.spec=t,r.store=n,r.websocket=new gw("gateway-".concat(r.clientId),r.spec.retryConfig,!0,n),r.handleWebsocketEvents(),window.addEventListener("offline",(function(){r.connectionState===Rv.CONNECTED&&r.reconnect("retry",wm.OFFLINE)})),r}p(t,e);var n=t.prototype;return n.request=function(){var e=d(c().mark((function e(t,n,r,i){var o,a,s,u,d,l,p,f,h,_=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=yf(6,""),a={_id:o,_type:t,_message:n},s=this.websocket.connectionID,u=function(){return new Vl((function(e,n){if(_.connectionState===Rv.CONNECTED)return e();var r=function(){_.off(Cv.WS_CLOSED,i),e()},i=function(){_.off(Cv.WS_CONNECTED,r),n(new Fv(ql.WS_ABORT))};_.once(Cv.WS_CONNECTED,r),_.once(Cv.WS_CLOSED,i),t!==Ov.PUBLISH&&t!==Ov.SUBSCRIBE&&t!==Ov.UNSUBSCRIBE&&t!==Ov.UNPUBLISH&&t!==Ov.CONTROL&&t!==Ov.RESTART_ICE||_.once(Cv.DISCONNECT_P2P,(function(){n(new Fv(ql.DISCONNECT_P2P))})),t!==Ov.PUBLISH&&t!==Ov.RESTART_ICE||_.once(Cv.ABORT_P2P_EXECUTION,(function(){n(new Fv(ql.DISCONNECT_P2P))}))}))},e.t0=this.connectionState!==Rv.CONNECTING&&this.connectionState!==Rv.RECONNECTING||t===Ov.JOIN||t===Ov.REJOIN,e.t0){e.next=5;break}return e.next=5,u();case 5:if(t===Ov.LEAVE&&(this.websocket.unbindDcCloseEventListener(),i=!0),this.websocket.sendMessage(a,!0,!1),!i){e.next=9;break}return e.abrupt("return");case 9:return d=new Vl((function(e,r){var i=!1,a=function(r,o){i=!0,e({isSuccess:"success"===r,message:o||{}}),_.off(Cv.WS_CLOSED,c),_.off(Cv.WS_RECONNECTING,c),_.emit(Cv.REQUEST_SUCCESS,t,n)};_.once("res-@".concat(o),a);var c=function e(){r(new Fv(ql.WS_ABORT,"type: ".concat(t))),_.off(Cv.WS_CLOSED,e),_.off(Cv.WS_RECONNECTING,e),_.off("res-@".concat(o),a)};_.once(Cv.WS_CLOSED,c),_.once(Cv.WS_RECONNECTING,c),Ef(W_("SIGNAL_REQUEST_TIMEOUT")).then((function(){_.websocket.connectionID!==s||i||(tv.warning("dc request timeout, type: ".concat(t)),_.emit(Cv.REQUEST_TIMEOUT,t,n))}))})),l=null,e.prev=11,e.next=14,d;case 14:l=e.sent,e.next=36;break;case 17:if(e.prev=17,e.t1=e.catch(11),this.connectionState!==Rv.CLOSED&&t!==Ov.LEAVE){e.next=21;break}throw new Fv(ql.WS_ABORT);case 21:if(this.spec.forceWaitGatewayResponse&&!r){e.next=25;break}e.t2=e.t1.throw(),e.next=35;break;case 25:if(t!==Ov.JOIN&&t!==Ov.REJOIN){e.next=29;break}e.t3=null,e.next=34;break;case 29:return e.next=31,u();case 31:return e.next=33,this.request(t,n);case 33:e.t3=e.sent;case 34:e.t2=e.t3;case 35:return e.abrupt("return",e.t2);case 36:if(!l.isSuccess){e.next=38;break}return e.abrupt("return",l.message);case 38:if(p=Number(l.message.error_code||l.message.code),f=Bm(p),h=new Fv(ql.UNEXPECTED_RESPONSE,"".concat(f.desc,": ").concat(l.message.error_str),{code:p,data:l.message}),"success"!==f.action){e.next=43;break}e.t4=l.message,e.next=68;break;case 43:if(tv.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(t,", error_code: ").concat(p,", message: ").concat(f.desc,", action: ").concat(f.action)),p!==wv.ERR_TOO_MANY_BROADCASTERS){e.next=48;break}e.t5=t===Ov.JOIN||t===Ov.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw(),e.next=67;break;case 48:if("failed"!==f.action){e.next=52;break}e.t6=h.throw(),e.next=66;break;case 52:if("quit"!==f.action){e.next=56;break}e.t7=(this.initError=h,this.close(),h.throw()),e.next=65;break;case 56:if(p===wv.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,tv.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",wm.MULTI_IP)):this.reconnect(f.action,wm.SERVER_ERROR),t!==Ov.JOIN&&t!==Ov.REJOIN){e.next=61;break}e.t8=null,e.next=64;break;case 61:return e.next=63,this.request(t,n);case 63:e.t8=e.sent;case 64:e.t7=e.t8;case 65:e.t6=e.t7;case 66:e.t5=e.t6;case 67:e.t4=e.t5;case 68:return e.abrupt("return",e.t4);case 69:case"end":return e.stop()}}),e,this,[[11,17]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),n.waitMessage=function(e,t){var n=this;return new Vl((function(r){n.on(e,(function i(o){(!t||t(o))&&(n.off(e,i),r(o))}))}))},n.upload=function(e,t){var n=this,r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch(e){var i=W_("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>i&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((function(){if(n.connectionState===Rv.CONNECTED){var e=n.uploadCache.splice(0,1)[0];0===n.uploadCache.length&&(window.clearInterval(n.uploadCacheInterval),n.uploadCacheInterval=void 0),n.upload(e._type,e._message)}}),W_("UPLOAD_CACHE_INTERVAL")||2e3))}},n.send=function(e,t){var n={_type:e,_message:t};this.websocket.sendMessage(n)},n.init=function(e,t){var n=this;return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Vl((function(r,i){n.once(Cv.WS_CONNECTED,(function(){return r(n.joinResponse)})),n.once(Cv.WS_CLOSED,(function(){return i(n.initError||new Fv(ql.WS_ABORT))})),n.connectionState=Rv.CONNECTING,n.websocket.init(e).catch(i),n.websocket.once(Rm.FAILBACK,(function(){void 0===n.openConnectionTime&&i(new Fv(ql.INIT_DATACHANNEL_TIMEOUT))})),n.inflateDataTimer&&window.clearInterval(n.inflateDataTimer),n.inflateDataTimer=window.setInterval((function(){n.handleInflateData()}),2e4),setTimeout((function(){t&&void 0===n.openConnectionTime&&(tv.debug("[".concat(n.clientId,"] init datachannel timeout while join with failback to websocket")),i(new Fv(ql.INIT_DATACHANNEL_TIMEOUT)))}),W_("DC_JOIN_WITH_FAILBACK"))}))},n.close=function(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||jp.LEAVE,this.connectionState=Rv.CLOSED,tv.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),e===jp.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new gw("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())},n.join=function(){var e=d(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.joinResponse){e.next=11;break}return this.emit(Cv.ABORT_P2P_EXECUTION),e.next=4,$p(this,Cv.DATACHANNEL_CONNECTING);case 4:return t=e.sent,e.next=7,this.request(Ov.JOIN,t);case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return",(this.emit(Cv.REPORT_JOIN_GATEWAY,ql.TIMEOUT,this.url||""),!1));case 10:this.joinResponse=n,this.emit(Cv.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token;case 11:return e.abrupt("return",(this.connectionState=Rv.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.rejoin=function(){var e=d(c().mark((function e(){var t,n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reconnectToken){e.next=2;break}throw new Fv(ql.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");case 2:return(t=nf(this,Cv.REQUEST_REJOIN_INFO)).token=this.reconnectToken,e.next=6,this.request(Ov.REJOIN,t);case 6:return n=e.sent,e.abrupt("return",!!n&&(this.connectionState=Rv.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),n.peers&&n.peers.forEach((function(e){r.emit(Iv.ON_USER_ONLINE,{uid:e.uid}),e.audio&&r.emit(Iv.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&r.emit(Iv.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?r.emit(Iv.MUTE_AUDIO,{uid:e.uid}):r.emit(Iv.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?r.emit(Iv.MUTE_VIDEO,{uid:e.uid}):r.emit(Iv.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?r.emit(Iv.ENABLE_LOCAL_AUDIO,{uid:e.uid}):r.emit(Iv.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?r.emit(Iv.ENABLE_LOCAL_VIDEO,{uid:e.uid}):r.emit(Iv.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||r.emit(Iv.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.reconnect=function(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)},n.handleNotification=function(e){tv.debug("[".concat(this.clientId,"] receive notification: "),e);var t=Bm(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(jp.UID_BANNED),void this.close()):void this.reconnect(t.action,wm.SERVER_ERROR);tv.error("[".concat(this.clientId,"] ignore error: "),t.desc)}},n.handlePingPong=function(){var e=this;if(this.websocket&&"connected"===this.websocket.state){this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;var t=W_("PING_PONG_TIME_OUT"),n=Date.now();this.pingpongTimeoutCount>=t&&(tv.warning("PINGPONG Timeout. Last Socket Message: ".concat(n-this.lastMsgTime,"ms")),n-this.lastMsgTime>W_("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",wm.TIMEOUT):this.request(Ov.PING,void 0,!0).then((function(){e.pingpongTimeoutCount=0;var t=Date.now()-n;e.rttRolling.add(t),W_("REPORT_STATS")&&e.send(Ov.PING_BACK,{pingpongElapse:t})})).catch((function(e){}))}},n.handleInflateData=function(){var e=this.websocket.getInflateData(),t=e.inflateLength,n=e.deflateLength;0!==t&&0!==n&&this.upload(Av.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:n,ws_inflate_length:t})},n.handleWebsocketEvents=function(){var e=this;this.websocket.on(Rm.RECONNECT_WAITTING_FINISH,(function(t){e.emit(Cv.WS_RECONNECT_WAITTING_FINISH,t)})),this.websocket.on(Rm.RECONNECT_CREATE_CONNECTION,(function(t){e.emit(Cv.WS_RECONNECT_CREATE_CONNECTION,t)})),this.websocket.on(Rm.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Rm.CLOSED,(function(){e.connectionState=Rv.CLOSED})),this.websocket.on(Rm.FAILED,(function(){e._disconnectedReason=jp.NETWORK_ERROR,e.connectionState=Rv.CLOSED})),this.websocket.on(Rm.RECONNECTING,(function(t){e._websocketReconnectReason=t,e.joinResponse=void 0,e.connectionState===Rv.CONNECTED?e.connectionState=Rv.RECONNECTING:e.connectionState=Rv.CONNECTING})),this.websocket.on(Rm.WILL_RECONNECT,(function(t,n){if(nf(e,Cv.IS_P2P_DISCONNECTED)&&"retry"===t)return tv.debug("".concat(e.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e.reconnectToken=void 0,e.emit(Cv.NEED_RENEW_SESSION),e.emit(Cv.DISCONNECT_P2P),n("tryNext");"retry"!==t&&(tv.debug("".concat(e.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(t)),e.reconnectToken=void 0,e.emit(Cv.NEED_RENEW_SESSION),e.emit(Cv.DISCONNECT_P2P)),n(t)})),this.websocket.on(Rm.CONNECTED,(function(){e.openConnectionTime=Date.now(),e.reconnectToken?e.rejoin().catch((function(t){tv.warning("[".concat(e.clientId,"] rejoin failed ").concat(t)),e.reconnect("tryNext",wm.SERVER_ERROR)})):e.join().catch((function(t){if(e.emit(Cv.REPORT_JOIN_GATEWAY,t.message||t.code,e.url||""),t instanceof Fv&&t.code===ql.UNEXPECTED_RESPONSE&&t.data.code===wv.ERR_NO_AUTHORIZED)return tv.warning("[".concat(e.clientId,"] reconnect no authorized, recover")),void e.reconnect("recover",wm.SERVER_ERROR);tv.error("[".concat(e.clientId,"] join gateway request failed"),t.toString()),e.spec.forceWaitGatewayResponse?e.reconnect("tryNext",wm.SERVER_ERROR):(e.initError=t,e.close())}))})),this.websocket.on(Rm.REQUEST_NEW_URLS,(function(t,n){$p(e,Cv.REQUEST_RECOVER,e.multiIpOption).then(t).catch(n)})),this.websocket.on(Rm.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(function(){e.emit(Iv.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(Rm.TO_CONNECT_DATACHANNEL,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",$p(e,Cv.DATACHANNEL_PRECONNECT,n).then(r).catch(i));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),this.websocket.on(Rm.FAILBACK,(function(){void 0!==e.openConnectionTime&&e.emit(Cv.DATACHANNEL_FAILBACK)}))},s(t,[{key:"connectionState",get:function(){return this._connectionState},set:function(e){e!==this._connectionState&&(this._connectionState=e,e===Rv.CONNECTED?this.emit(Cv.WS_CONNECTED):e===Rv.RECONNECTING?this.emit(Cv.WS_RECONNECTING,this._websocketReconnectReason):e===Rv.CLOSED&&this.emit(Cv.WS_CLOSED,this._disconnectedReason))}},{key:"currentURLIndex",get:function(){return this.websocket.currentURLIndex}},{key:"url",get:function(){return this.websocket?this.websocket.url:null}},{key:"rtt",get:function(){return this.rttRolling.mean()}}]),t}(Kp),yw=function(e){function t(t){var n;return uc(l(n=e.call(this)||this),"_signal",void 0),uc(l(n),"_sequence",0),uc(l(n),"_userMap",new Map),uc(l(n),"_encoder",new TextEncoder),n._signal=t,n}p(t,e);var n=t.prototype;return n.send=function(){var e=d(c().mark((function e(t,n,r,i,o){var a,s,u,d,l,p,f=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof n&&(n=JSON.stringify(n)),i=null!==(a=i)&&void 0!==a?a:yf(6,""),o=null!==(s=o)&&void 0!==s?s:this._sequence++,d={_id:i,_type:t,_seq:null!==(u=o)&&void 0!==u?u:this._sequence++,_message:n},W_("SHOW_P2P_LOG")&&tv.debug("send message",d),this.sendStreamMessage(JSON.stringify(d)),!r){e.next=4;break}return e.abrupt("return");case 4:return l=new Vl((function(e,n){var r=window.setTimeout((function(){f.off("res-@".concat(i),o),tv.warning("[external-signal] request timeout, type: ".concat(t)),0===f._userMap.size?n(new Sp(ql.INVALID_REMOTE_USER)):n(new Sp(ql.TIMEOUT))}),W_("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),o=function(t,i){r&&window.clearTimeout(r),"success"===t?e({isSuccess:!0,message:i}):n(new Sp(ql.UNEXPECTED_ERROR,i))};f.once("res-@".concat(i),o)})),e.prev=5,e.next=8,l;case 8:p=e.sent,e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(5),e.t0.code!==ql.TIMEOUT){e.next=17;break}return e.next=16,this.send(t,n,!1,i,o);case 16:return e.abrupt("return",e.sent);case 17:throw e.t0;case 18:return e.abrupt("return",p.isSuccess?p.message:void 0);case 19:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),n.sendStreamMessage=function(e){var t=this;this._splitMessage(e).forEach((function(e){t._signal.request(Ov.DATA_STREAM,{payload:_f(t._encoder.encode(e))})}))},n.onMessage=function(e){var t,n=e._uid,r=this._userMap.get(n);if(r?t=r.splitMessageMap:(t=new Map,this._userMap.set(n,{isStart:!1,splitMessageMap:t,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map})),"id"in e&&"total"in e){var i,o=e,a=o.id,s=o.total,c=null!==(i=t.get(a))&&void 0!==i?i:[];if(c.push(e),t.has(a)||t.set(a,c),c.length!==s)return;var u=Gc(c).call(c,(function(e,t){return e.index-t.index})).map((function(e){return e.payload})).join("");t.delete(a),(e=JSON.parse(u))._uid=n}this.handleReceivedMessage(e)},n.setStart=function(e){this._userMap.has(e)?this._userMap.get(e).isStart=!0:this._userMap.set(e,{isStart:!0,splitMessageMap:new Map,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map}),this.handleReceivedMessage()},n.setEnd=function(e){return this._userMap.delete(e),0===this._userMap.size},n.ack=function(e,t,n){this.send(Nm.ACK,JSON.stringify({success:!n,message:t}),!0,e)},n.handleReceivedMessage=function(e){var t=this,n=function(){t._userMap.forEach((function(e){for(var n=e.receivedMessagesMap,r=e.nextExpectedSequenceNumber;n.has(r);){var i=n.get(r);n.delete(r),t.receiveMessage(i),e.nextExpectedSequenceNumber++}}))};if(e){var r=e._uid,i=e._seq,o=this._userMap.get(r),a=o.receivedMessagesMap,s=o.isStart,c=o.nextExpectedSequenceNumber;i<c?tv.debug("[external-signal] receive old message, seq: ".concat(i)):(a.set(i,e),s&&i===c&&(this.receiveMessage(e),a.delete(c),o.nextExpectedSequenceNumber++,n()))}else n()},n.receiveMessage=function(e){var t=this,n=e._id,r=e._type,i=e._message,o=e._uid;if(W_("SHOW_P2P_LOG")&&tv.debug("\u6536\u5230\u6d88\u606f",e),n)switch(e._type){case Nm.PUBLISH:var a=JSON.parse(i);this._signal.emit(r,a,o),this.ack(e._id);break;case Nm.CONTROL:case Nm.UNPUBLISH:case Nm.DO_SUBSCRIBE:case Nm.DO_UNSUBSCRIBE:var s=JSON.parse(i);s.uid=o,$p(this._signal,r,s).then((function(n){t.ack(e._id,n)})).catch((function(n){t.ack(e._id,void 0,!0)}));break;case Nm.ACK:var c=JSON.parse(i),u=c.success,d=c.message;this.emit("res-@".concat(n),u?"success":"failed",d);break;case Nm.CALL:$p(this,r,i).then((function(e){t.ack(n,e)}));break;case Nm.RESTART_ICE:case Nm.EXCHANGE_SDP:case Nm.SUBSCRIBE:case Nm.UNSUBSCRIBE:$p(this._signal,r,i).then((function(e){t.ack(n,e)})).catch((function(n){t.ack(e._id,void 0,!0)}));break;case Nm.CANDIDATE:this._signal.emit(r,i),this.ack(n);break;case Nm.JOIN:this.emit(r,JSON.parse(i));break;default:this.emit(r,i),this.ack(n)}},n._splitMessage=function(e){if(e.length<t.MAX_MESSAGE_SIZE)return[e];for(var n=[],r=yf(6,""),i=0,o=Math.ceil(e.length/800);e.length>0;){i++;var a=e.slice(0,800);n.push({id:r,index:i,total:o,payload:a}),e=e.slice(800)}return n.map((function(e){return JSON.stringify(e)}))},n.clear=function(){this._sequence=0,this._userMap.clear()},t}(Kp);uc(yw,"MAX_MESSAGE_SIZE",1024);var bw=function(e){function t(t,n){var r;return uc(l(r=e.call(this)||this),"_disconnectedReason",void 0),uc(l(r),"_websocketReconnectReason",void 0),uc(l(r),"_connectionState",Rv.CLOSED),uc(l(r),"reconnectToken",void 0),uc(l(r),"_userInRoom",!1),uc(l(r),"_userOnlineTime",void 0),uc(l(r),"websocket",void 0),uc(l(r),"openConnectionTime",void 0),uc(l(r),"clientId",void 0),uc(l(r),"lastMsgTime",Date.now()),uc(l(r),"uploadCache",[]),uc(l(r),"uploadCacheInterval",void 0),uc(l(r),"rttRolling",new Ff(5)),uc(l(r),"pingpongTimer",void 0),uc(l(r),"wsInflateDataTimer",void 0),uc(l(r),"pingpongTimeoutCount",0),uc(l(r),"joinResponse",void 0),uc(l(r),"multiIpOption",void 0),uc(l(r),"initError",void 0),uc(l(r),"spec",void 0),uc(l(r),"store",void 0),uc(l(r),"_external_signal",void 0),uc(l(r),"onWebsocketMessage",(function(e){if(e.data instanceof ArrayBuffer)r.emit(Cv.ON_BINARY_DATA,e.data);else{var t=JSON.parse(e.data);if(r.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){var n="res-@".concat(t._id);r.emit(n,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){switch(t._type){case Iv.ON_DATA_STREAM:return void r.handleDataStream(t._message);case Iv.MUTE_AUDIO:case Iv.MUTE_VIDEO:case Iv.ON_P2P_LOST:return;case Iv.ON_USER_ONLINE:r.emit(t._type,t._message);var i=t._message.uid;return r._external_signal.setStart(i),void r._external_signal.send(Nm.JOIN,{onlineTime:r._userOnlineTime},!0)}if(r.emit(t._type,t._message),t._type===Iv.ON_NOTIFICATION&&r.handleNotification(t._message),t._type===Iv.ON_USER_BANNED)switch(t._message.error_code){case 14:r.close(jp.UID_BANNED);break;case 15:r.close(jp.IP_BANNED);break;case 16:r.close(jp.CHANNEL_BANNED)}if(t._type===Iv.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case wv.ERR_LICENSE_MISSING:r.close(jp.LICENSE_MISSING);break;case wv.ERR_LICENSE_EXPIRED:r.close(jp.LICENSE_EXPIRED);break;case wv.ERR_LICENSE_MINUTES_EXCEEDED:r.close(jp.LICENSE_MINUTES_EXCEEDED);break;case wv.ERR_LICENSE_PERIOD_INVALID:r.close(jp.LICENSE_PERIOD_INVALID);break;case wv.ERR_LICENSE_MULTIPLE_SDK_SERVICE:r.close(jp.LICENSE_MULTIPLE_SDK_SERVICE);break;case wv.ERR_LICENSE_ILLEGAL:r.close(jp.LICENSE_ILLEGAL);break;default:r.close()}}}})),r.clientId=t.clientId,r.spec=t,r.store=n,r.websocket=new $m("gateway-".concat(r.clientId),r.spec.retryConfig,!0,W_("JOIN_GATEWAY_USE_DUAL_DOMAIN"),W_("JOIN_GATEWAY_USE_443PORT_ONLY"),n),r.handleWebsocketEvents(),window.addEventListener("offline",(function(){r.connectionState===Rv.CONNECTED&&r.reconnect("retry",Bp.OFFLINE)})),r._external_signal=new yw(l(r)),r._handleSignalP2PEvents(),r}p(t,e);var n=t.prototype;return n.request=function(){var e=d(c().mark((function e(t,n,r,i){var o,a,s,u,d,l,p,f,h,_=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=yf(6,""),a={_id:o,_type:t,_message:n},s=this.websocket.connectionID,u=function(){return new Vl((function(e,n){if(_.connectionState===Rv.CONNECTED)return e();var r=function(){_.off(Cv.WS_CLOSED,i),e()},i=function(){_.off(Cv.WS_CONNECTED,r),n(new Sp(ql.WS_ABORT))};_.once(Cv.WS_CONNECTED,r),_.once(Cv.WS_CLOSED,i),t!==Ov.PUBLISH&&t!==Ov.SUBSCRIBE&&t!==Ov.UNSUBSCRIBE&&t!==Ov.UNPUBLISH&&t!==Ov.CONTROL&&t!==Ov.RESTART_ICE||_.once(Cv.DISCONNECT_P2P,(function(){n(new Sp(ql.DISCONNECT_P2P))})),t!==Ov.PUBLISH&&t!==Ov.RESTART_ICE||_.once(Cv.ABORT_P2P_EXECUTION,(function(){n(new Sp(ql.DISCONNECT_P2P))}))}))},e.t0=this.connectionState!==Rv.CONNECTING&&this.connectionState!==Rv.RECONNECTING||t===Ov.JOIN||t===Ov.REJOIN,e.t0){e.next=5;break}return e.next=5,u();case 5:if(this.websocket.sendMessage(a,!0),!i){e.next=8;break}return e.abrupt("return");case 8:return d=new Vl((function(e,r){var i=!1,a=function(r,o){i=!0,e({isSuccess:"success"===r,message:o||{}}),_.off(Cv.WS_CLOSED,c),_.off(Cv.WS_RECONNECTING,c),_.emit(Cv.REQUEST_SUCCESS,t,n)};_.once("res-@".concat(o),a);var c=function e(){r(new Sp(ql.WS_ABORT,"type: ".concat(t))),_.off(Cv.WS_CLOSED,e),_.off(Cv.WS_RECONNECTING,e),_.off("res-@".concat(o),a)};_.once(Cv.WS_CLOSED,c),_.once(Cv.WS_RECONNECTING,c),Ef(W_("SIGNAL_REQUEST_TIMEOUT")).then((function(){_.websocket.connectionID!==s||i||(tv.warning("[".concat(_.clientId,"] ws request timeout, type: ").concat(t)),_.emit(Cv.REQUEST_TIMEOUT,t,n))}))})),l=null,e.prev=10,e.next=13,d;case 13:l=e.sent,e.next=35;break;case 16:if(e.prev=16,e.t1=e.catch(10),this.connectionState!==Rv.CLOSED&&t!==Ov.LEAVE){e.next=20;break}throw new Sp(ql.WS_ABORT);case 20:if(this.spec.forceWaitGatewayResponse&&!r){e.next=24;break}e.t2=e.t1.throw(),e.next=34;break;case 24:if(t!==Ov.JOIN&&t!==Ov.REJOIN){e.next=28;break}e.t3=null,e.next=33;break;case 28:return e.next=30,u();case 30:return e.next=32,this.request(t,n);case 32:e.t3=e.sent;case 33:e.t2=e.t3;case 34:return e.abrupt("return",e.t2);case 35:if(!l.isSuccess){e.next=37;break}return e.abrupt("return",l.message);case 37:if(p=Number(l.message.error_code||l.message.code),f=Bm(p),h=new Sp(ql.UNEXPECTED_RESPONSE,"".concat(f.desc,": ").concat(l.message.error_str),{code:p,data:l.message}),"success"!==f.action){e.next=42;break}e.t4=l.message,e.next=67;break;case 42:if(tv.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(t,", error_code: ").concat(p,", message: ").concat(f.desc,", action: ").concat(f.action)),p!==wv.ERR_TOO_MANY_BROADCASTERS){e.next=47;break}e.t5=t===Ov.JOIN||t===Ov.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw(),e.next=66;break;case 47:if("failed"!==f.action){e.next=51;break}e.t6=h.throw(),e.next=65;break;case 51:if("quit"!==f.action){e.next=55;break}e.t7=(this.initError=h,this.close(),h.throw()),e.next=64;break;case 55:if(p===wv.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,tv.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Bp.MULTI_IP)):this.reconnect(f.action,Bp.SERVER_ERROR),t!==Ov.JOIN&&t!==Ov.REJOIN){e.next=60;break}e.t8=null,e.next=63;break;case 60:return e.next=62,this.request(t,n);case 62:e.t8=e.sent;case 63:e.t7=e.t8;case 64:e.t6=e.t7;case 65:e.t5=e.t6;case 66:e.t4=e.t5;case 67:return e.abrupt("return",e.t4);case 68:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),n.waitMessage=function(e,t){var n=this;return new Vl((function(r){n.on(e,(function i(o){(!t||t(o))&&(n.off(e,i),r(o))}))}))},n.upload=function(e,t){var n=this,r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch(e){var i=W_("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>i&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((function(){if(n.connectionState===Rv.CONNECTED){var e=n.uploadCache.splice(0,1)[0];0===n.uploadCache.length&&(window.clearInterval(n.uploadCacheInterval),n.uploadCacheInterval=void 0),n.upload(e._type,e._message)}}),W_("UPLOAD_CACHE_INTERVAL")||2e3))}},n.send=function(e,t){var n={_type:e,_message:t};this.websocket.sendMessage(n)},n.sendExtensionMessage=function(){var e=d(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitTillUserOnline();case 2:return e.next=4,this._external_signal.send(t,n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.init=function(e,t){var n=this;return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Vl((function(t,r){n.once(Cv.WS_CONNECTED,(function(){return t(n.joinResponse)})),n.once(Cv.WS_CLOSED,(function(){return r(n.initError||new Sp(ql.WS_ABORT))})),n.connectionState=Rv.CONNECTING,n.websocket.init(e).catch(r),n.wsInflateDataTimer&&window.clearInterval(n.wsInflateDataTimer),n.wsInflateDataTimer=window.setInterval((function(){n.handleWsInflateData()}),2e4)}))},n.close=function(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||jp.LEAVE,this.connectionState=Rv.CLOSED,tv.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===jp.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new $m("gateway-".concat(this.clientId),this.spec.retryConfig,!0,W_("JOIN_GATEWAY_USE_DUAL_DOMAIN"),W_("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents())},n.join=function(){var e=d(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.joinResponse){e.next=11;break}return this.emit(Cv.ABORT_P2P_EXECUTION),e.next=4,$p(this,Cv.REQUEST_JOIN_INFO);case 4:return t=e.sent,e.next=7,this.request(Ov.JOIN,t);case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return",(this.emit(Cv.REPORT_JOIN_GATEWAY,ql.TIMEOUT,this.url||""),!1));case 10:this.joinResponse=n,this.emit(Cv.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token;case 11:return e.abrupt("return",(this.connectionState=Rv.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),this._userOnlineTime=(new Date).getTime(),this._external_signal.clear(),!0));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.rejoin=function(){var e=d(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reconnectToken){e.next=2;break}throw new Sp(ql.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");case 2:return(t=nf(this,Cv.REQUEST_REJOIN_INFO)).token=this.reconnectToken,e.next=6,this.request(Ov.REJOIN,t);case 6:if(e.t0=!!e.sent,!e.t0){e.next=9;break}e.t0=(this.connectionState=Rv.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0);case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.reconnect=function(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)},n.handleDataStream=function(e){try{var t,n=hf(e.payload),r=(new TextDecoder).decode(n),i=JSON.parse(r);"total"in i&&"id"in i||Or(t=Object.values(Nm)).call(t,i._type)?(e.seq&&delete e.seq,i._uid=e.uid,this._external_signal.onMessage(i)):this.emit(Iv.ON_DATA_STREAM,e)}catch(e){}},n.handleNotification=function(e){tv.debug("[".concat(this.clientId,"] receive notification: "),e);var t=Bm(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(jp.UID_BANNED),void this.close()):void this.reconnect(t.action,Bp.SERVER_ERROR);tv.error("[".concat(this.clientId,"] ignore error: "),t.desc)}},n.handlePingPong=function(){var e=this;if(this.websocket&&"connected"===this.websocket.state){this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;var t=W_("PING_PONG_TIME_OUT"),n=Date.now();this.pingpongTimeoutCount>=t&&(tv.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(n-this.lastMsgTime,"ms")),n-this.lastMsgTime>W_("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Bp.TIMEOUT):this.request(Ov.PING,void 0,!0).then((function(){e.pingpongTimeoutCount=0;var t=Date.now()-n;e.rttRolling.add(t),W_("REPORT_STATS")&&e.send(Ov.PING_BACK,{pingpongElapse:t})})).catch((function(e){}))}},n.handleWsInflateData=function(){var e=this.websocket.getWsInflateData(),t=e.wsInflateLength,n=e.wsDeflateLength;0!==t&&0!==n&&this.upload(Av.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:n,ws_inflate_length:t})},n.handleWebsocketEvents=function(){var e=this;this.websocket.on(Pv.RECONNECT_WAITTING_FINISH,(function(t){e.emit(Cv.WS_RECONNECT_WAITTING_FINISH,t)})),this.websocket.on(Pv.RECONNECT_CREATE_CONNECTION,(function(t){e.emit(Cv.WS_RECONNECT_CREATE_CONNECTION,t)})),this.websocket.on(Pv.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Pv.CLOSED,(function(){e.connectionState=Rv.CLOSED})),this.websocket.on(Pv.FAILED,(function(){e._disconnectedReason=jp.NETWORK_ERROR,e.connectionState=Rv.CLOSED})),this.websocket.on(Pv.RECONNECTING,(function(t){e._websocketReconnectReason=t,e.joinResponse=void 0,e.connectionState===Rv.CONNECTED?e.connectionState=Rv.RECONNECTING:e.connectionState=Rv.CONNECTING})),this.websocket.on(Pv.WILL_RECONNECT,(function(t,n,r){if(nf(e,Cv.IS_P2P_DISCONNECTED)&&"retry"===t)return tv.debug("".concat(e.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e.reconnectToken=void 0,e.emit(Cv.NEED_RENEW_SESSION),e.emit(Cv.DISCONNECT_P2P),r("tryNext");"retry"!==t&&(tv.debug("".concat(e.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(t)),e.reconnectToken=void 0,e.emit(Cv.NEED_RENEW_SESSION),e.emit(Cv.DISCONNECT_P2P)),r(t)})),this.websocket.on(Pv.CONNECTED,(function(){e.openConnectionTime=Date.now(),e.reconnectToken?e.rejoin().catch((function(t){tv.warning("[".concat(e.clientId,"] rejoin failed ").concat(t)),e.reconnect("tryNext",Bp.SERVER_ERROR)})):e.join().catch((function(t){if(e.emit(Cv.REPORT_JOIN_GATEWAY,t.message||t.code,e.url||""),t instanceof Sp&&t.code===ql.UNEXPECTED_RESPONSE&&t.data.code===wv.ERR_NO_AUTHORIZED)return tv.warning("[".concat(e.clientId,"] reconnect no authorized, recover")),void e.reconnect("recover",Bp.SERVER_ERROR);tv.error("[".concat(e.clientId,"] join gateway request failed"),t.toString()),e.spec.forceWaitGatewayResponse?e.reconnect("tryNext",Bp.SERVER_ERROR):(e.initError=t,e.close())}))})),this.websocket.on(Pv.REQUEST_NEW_URLS,(function(t,n){$p(e,Cv.REQUEST_RECOVER,e.multiIpOption).then(t).catch(n)})),this.websocket.on(Pv.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(function(){e.emit(Iv.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))},n._handleSignalP2PEvents=function(){var e=this;this._external_signal.on(Nm.JOIN,function(){var t=d(c().mark((function t(n){var r,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._userOnlineTime&&e._userOnlineTime<n.onlineTime)){t.next=8;break}return t.next=3,$p(e,Cv.P2P_START,void 0);case 3:return r=t.sent,t.next=6,e._external_signal.send(Nm.CALL,r);case 6:i=t.sent,e.emit(Cv.P2P_CONNECTION,i,!0);case 8:e._userInRoom=!0,e.emit("user-online");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.on(Iv.ON_USER_OFFLINE,function(){var t=d(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._external_signal.clear(),e._userInRoom=!1;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this._external_signal.on(Nm.CALL,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e._userInRoom=!0,e.emit("user-online"),t.prev=1,t.t0=r,t.next=5,$p(e,Cv.P2P_START,n);case 5:t.t1=t.sent,(0,t.t0)(t.t1),t.next=12;break;case 9:t.prev=9,t.t2=t.catch(1),i(t.t2);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n,r){return t.apply(this,arguments)}}())},n.waitTillUserOnline=function(){var e=d(c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Vl((function(e){t._userInRoom?e():t.on("user-online",(function n(){t.off("user-online",n),e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s(t,[{key:"connectionState",get:function(){return this._connectionState},set:function(e){e!==this._connectionState&&(this._connectionState=e,e===Rv.CONNECTED?this.emit(Cv.WS_CONNECTED):e===Rv.RECONNECTING?this.emit(Cv.WS_RECONNECTING,this._websocketReconnectReason):e===Rv.CLOSED&&this.emit(Cv.WS_CLOSED,this._disconnectedReason))}},{key:"currentURLIndex",get:function(){return this.websocket.currentURLIndex}},{key:"url",get:function(){return this.websocket&&this.websocket.url||null}},{key:"rtt",get:function(){return this.rttRolling.mean()}}]),t}(Kp);function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sw(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ww=new Map,Rw=function(e){function t(t,n){var r;return uc(l(r=e.call(this)||this),"store",void 0),uc(l(r),"joinInfo",void 0),uc(l(r),"key",void 0),uc(l(r),"ntpOffset",0),uc(l(r),"signal",void 0),uc(l(r),"role",void 0),uc(l(r),"inChannelInfo",{joinAt:null,duration:0}),uc(l(r),"spec",void 0),uc(l(r),"_state","DISCONNECTED"),uc(l(r),"_statsCollector",void 0),uc(l(r),"_disconnectedReason",void 0),uc(l(r),"isSignalRecover",!1),uc(l(r),"hasChangeBGPAddress",!1),uc(l(r),"trafficStatsInterval",void 0),uc(l(r),"networkQualityInterval",void 0),uc(l(r),"_joinGatewayStartTime",0),uc(l(r),"_signalTimeout",!1),uc(l(r),"_clientRoleOptions",void 0),uc(l(r),"_isProactiveJoin",!1),r.store=t,r.spec=n,r.signal=r.store.useP2P?new bw(Tw(Tw({},n),{},{retryConfig:n.websocketRetryConfig}),t):r.store.useDataChannel?new Ew(Tw(Tw({},n),{},{retryConfig:n.websocketRetryConfig}),t):new tg(Tw(Tw({},n),{},{retryConfig:n.websocketRetryConfig}),t),r._statsCollector=n.statsCollector,r.role=n.role||"audience",r._clientRoleOptions=n.clientRoleOptions,r.handleSignalEvents(),r}p(t,e);var n=t.prototype;return n.join=function(){var e=d(c().mark((function e(t,n,r){var i,o,a,s,u,d,l,p,f=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.signal instanceof Ew&&(i=!1,"disabled"!==t.cloudProxyServer?(tv.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(t.cloudProxyServer,")")),i=!0):"".concat(t.apResponse.cid,"_").concat(t.apResponse.cert).length>255||"".concat(t.apResponse.cid,"_").concat(t.apResponse.cert).length<22?(tv.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),i=!0):t.apResponse.addresses.some((function(e){return e.fingerprint}))||W_("FINGERPRINT")||(tv.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),i=!0),i&&this.resetSignal()),this.store.joinGatewayStart(),"disabled"!==t.cloudProxyServer&&(this.hasChangeBGPAddress=!0),o=Date.now(),(a=ww.get(t.cname))||(a=new Map,ww.set(t.cname,a)),this._isProactiveJoin=!0,!a.has(t.uid)){e.next=7;break}throw s=new Fv(ql.UID_CONFLICT),pv.joinGateway(t.sid,{lts:o,succ:!1,ec:s.message,addr:null,uid:t.uid,cid:t.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!t.proxyServer,signalChannel:this.signal instanceof Ew?"1":"0"}),this._isProactiveJoin=!1,s;case 7:if(a.set(t.uid,!0),this.joinInfo=t,this.key=n,u=0,this.joinGatewayStartTime=o,d=t.proxyServer,e.prev=11,tv.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof Ew?"datachannel":"websocket"," join uid ").concat(u)),!(this.signal instanceof Ew)){e.next=18;break}return e.next=15,this.signal.init(t.apResponse.addresses,r);case 15:l=e.sent,e.next=22;break;case 18:return p=t.gatewayAddrs.map((function(e){var n=e.address.split(":"),r={host:n[0],port:n[1]};return t.proxyServer&&(r.proxy=t.proxyServer),r})),e.next=21,this.signal.init(p,r);case 21:l=e.sent;case 22:u=l.uid,tv.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof Ew?"datachannel":"websocket"," join uid ").concat(u," cost ").concat(Date.now()-this.joinGatewayStartTime)),e.next=32;break;case 25:if(e.prev=25,e.t0=e.catch(11),!e.t0||e.t0.code!==ql.INIT_WEBSOCKET_TIMEOUT){e.next=29;break}throw tv.warning("[".concat(this.store.clientId,"] User join failed"),e.t0.toString()),e.t0;case 29:if(!e.t0||e.t0.code!==ql.INIT_DATACHANNEL_TIMEOUT){e.next=31;break}throw tv.warning("[".concat(this.store.clientId,"] User join datachannel failed"),e.t0.toString()),this.resetSignal(),e.t0;case 31:throw tv.error("[".concat(this.store.clientId,"] User join failed"),e.t0.toString()),pv.joinGateway(t.sid,{lts:o,succ:!1,ec:e.t0.message,addr:this.signal.url,uid:t.uid,cid:t.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!d,signalChannel:this.signal instanceof Ew?"1":"0"}),this._isProactiveJoin=!1,a.delete(t.uid),this.signal.close(),e.t0;case 32:return e.abrupt("return",(this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),tv.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((function(){f.updateTrafficStats().catch((function(e){tv.warning("[".concat(f.store.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((function(){navigator&&void 0!==navigator.onLine&&!navigator.onLine?f.emit(nm.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):f._signalTimeout?f.emit(nm.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===f.state&&f._statsCollector.trafficStats?f.emit(nm.NETWORK_QUALITY,{uplinkNetworkQuality:cw(f._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:cw(f._statsCollector.trafficStats.B_dnq)}):f.emit(nm.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),u));case 33:case"end":return e.stop()}}),e,this,[[11,25]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n.leave=function(){var e=d(c().mark((function e(){var t,n,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],n=r.length>1?r[1]:void 0,"DISCONNECTED"===this.state){e.next=14;break}if(n!==jp.FALLBACK&&(this.state="DISCONNECTING"),e.prev=3,e.t0=t||this.signal.connectionState!==Rv.CONNECTED,e.t0){e.next=8;break}return e.next=8,function(e,t){return Vl.race([e,gf(3e3)])}(this.signal.request(Ov.LEAVE,void 0,!0));case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(3),tv.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e.t1);case 13:this.signal.close(n),n!==jp.FALLBACK&&(this.state="DISCONNECTED"),this.reset();case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),n.publish=function(){var e=d(c().mark((function e(t,n,r){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));case 2:return i={state:"offer",p2p_id:this.store.p2pId,ortc:n,mode:this.spec.mode,extend:W_("PUB_EXTEND"),twcc:!!W_("PUBLISH_TWCC"),rtx:!!W_("USE_PUB_RTX")},e.prev=3,e.next=6,this.signal.request(Ov.PUBLISH,i,!0);case 6:return e.abrupt("return",e.sent._message);case 9:if(e.prev=9,e.t0=e.catch(3),!r||!e.t0.data||e.t0.data.code!==wv.ERR_PUBLISH_REQUEST_INVALID){e.next=16;break}return tv.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),e.t0.toString()),e.next=15,this.tryUnpubBeforeRepub(t,n);case 15:return e.abrupt("return",this.publish(t,n,!1));case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n.publishDataChannel=function(){var e=d(c().mark((function e(t,n,r){var i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));case 2:return o={stream_id:n.streamId,ordered:n.ordered?1:0,max_retrans_times:null!==(i=n.maxRetransmits)&&void 0!==i?i:10,channel_id:n.channelId,metadata:n.metadata},e.prev=3,e.next=6,this.signal.request(Ov.PUBLISH_DATASTREAM,o,!0);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),!r||!e.t0.data||e.t0.data.code!==wv.ERR_PUBLISH_REQUEST_INVALID){e.next=15;break}return tv.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),e.t0.toString()),e.next=14,this.tryUnpubDataChannelBeforeRepub(t,n);case 14:return e.abrupt("return",this.publishDataChannel(t,n,!1));case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n.unpublish=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=3;break}throw new Fv(ql.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));case 3:return e.next=5,this.signal.request(Ov.UNPUBLISH,{stream_id:n,ortc:t},!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),tv.warning("[".concat(this.store.clientId,"] unpublish warning: "),e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),n.unpublishDataChannel=function(){var e=d(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=3;break}throw new Fv(ql.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));case 3:return e.next=5,Vl.all(t.map((function(e){return n.signal.request(Ov.UNPUBLISH_DATASTREAM,{channel_id:e},!0)})));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),tv.warning("unpublish datachannels warning: ",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.subscribe=function(){var e=d(c().mark((function e(t,n,r){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));case 2:return i={stream_id:t,stream_type:n.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!W_("SUBSCRIBE_TWCC"),rtx:!!W_("USE_SUB_RTX"),extend:W_("SUB_EXTEND"),ssrcId:n.ssrcId,svc:Array.isArray(W_("SVC"))&&0!==W_("SVC").length?W_("SVC"):void 0},e.prev=3,e.next=6,this.signal.request(Ov.SUBSCRIBE,i,!0);case 6:return e.abrupt("return",e.sent._message);case 9:if(e.prev=9,e.t0=e.catch(3),!r||!e.t0.data||e.t0.data.code!==wv.ERR_SUBSCRIBE_REQUEST_INVALID){e.next=18;break}return tv.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),e.t0.toString()),e.next=15,this.tryUnsubBeforeResub(t,n);case 15:return e.next=17,this.subscribe(t,n,!1);case 17:return e.abrupt("return",e.sent);case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n.subscribeDataChannel=function(){var e=d(c().mark((function e(t,n,r){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));case 2:return i={uid:t,stream_id:n.id,channel_id:n.datachannelId},e.prev=3,e.next=6,this.signal.request(Ov.SUBSCRIBE_DATASTREAM,i,!0);case 6:return e.abrupt("return",void e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!r||!e.t0.data||e.t0.data.code!==wv.ERR_SUBSCRIBE_REQUEST_INVALID){e.next=18;break}return tv.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),e.t0.toString()),e.next=15,this.tryUnsubDataChannelBeforeResub(t,n);case 15:return e.next=17,this.subscribeDataChannel(t,n,!1);case 17:return e.abrupt("return",e.sent);case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n.subscribeAll=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));case 2:return r={p2p_id:this.store.p2pId,users:t,dtx:!1,rtx:!!W_("USE_SUB_RTX")},e.prev=3,e.next=6,this.signal.request(Ov.SUBSCRIBE_STREAMS,r,!0);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!n||!e.t0.data||e.t0.data.code!==wv.ERR_SUBSCRIBE_REQUEST_INVALID){e.next=18;break}return tv.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),e.t0.toString()),e.next=15,this.tryMassUnsubBeforeResub(t);case 15:return e.next=17,this.subscribeAll(t,!1);case 17:return e.abrupt("return",e.sent);case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}(),n.setVideoProfile=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=function(e){if(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width){var t=e.frameRate,n=e.width,r=e.height,i=!0;return"number"!=typeof t&&((t=t.exact||t.ideal||t.max||t.min||0)||(i=!1)),"number"!=typeof n&&((n=n.exact||n.ideal||n.max||n.min||0)||(i=!1)),"number"!=typeof r&&(r=r.exact||r.ideal||r.max||r.min||0,t||(i=!1)),i?{stream_type:0,width:n,height:r,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}}(t))){e.next=3;break}return e.abrupt("return",this.signal.request(Ov.SET_VIDEO_PROFILE,n));case 3:tv.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.unsubscribe=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Ov.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:t,stream_id:n},!0);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),tv.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),n.unsubscribeDataChannel=function(){var e=d(c().mark((function e(t,n){var r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=3;break}throw new Fv(ql.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));case 3:return e.next=5,Vl.all(t.map((function(e){return r.signal.request(Ov.UNSUBSCRIBE_DATASTREAM,{stream_id:e,uid:n},!0)})));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),tv.warning("unsubscribeDataChannel warning: ",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),n.massUnsubscribe=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Ov.UNSUBSCRIBE_STREAMS,t,!0);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),tv.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),n.reconnectPC=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.iceParameters,r=t.dtlsParameters,i=t.rtpCapabilities,e.next=3,this.signal.request(Ov.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}},!0);case 3:return e.t0=e.sent,e.t1=this.getCurrentGatewayAddress(),e.abrupt("return",{gatewayEstablishParams:e.t0,gatewayAddress:e.t1});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getGatewayInfo=function(){return this.signal.request(Ov.GATEWAY_INFO)},n.renewToken=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ov.RENEW_TOKEN,t);case 2:this.key=t.token;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setClientRole=function(){var e=d(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&(this._clientRoleOptions=Object.assign({},n)),"CONNECTED"===this.state){e.next=2;break}return e.abrupt("return",void(this.role=t));case 2:return i=0,"audience"===t?this._clientRoleOptions&&this._clientRoleOptions.delay?(r=this._clientRoleOptions.delay,i=1):i=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:i=0,e.next=6,this.signal.request(Ov.SET_CLIENT_ROLE,{role:t,level:i,delay:r,client_ts:Date.now()});case 6:this.role=t;case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setRemoteVideoStreamType=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ov.SWITCH_VIDEO_STREAM,{stream_id:t,stream_type:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setDefaultRemoteVideoStreamType=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ov.DEFAULT_VIDEO_STREAM,{stream_type:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setStreamFallbackOption=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ov.SET_FALLBACK_OPTION,{stream_id:t,fallback_type:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.pickSVCLayer=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ov.PICK_SVC_LAYER,{stream_id:t,spatial_layer:n.spatialLayer,temporal_layer:n.temporalLayer});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setRTM2Flag=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ov.SET_RTM2_FLAG,{rtm2_flag:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.sendExtensionMessage=function(){var e=d(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.signal instanceof bw)){e.next=2;break}return e.abrupt("return",this.signal.sendExtensionMessage(t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.getInChannelInfo=function(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Tw({},this.inChannelInfo)},n.getGatewayVersion=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ov.GATEWAY_INFO);case 2:return e.abrupt("return",e.sent.version);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.reset=function(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){var e=ww.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)},n.updateTurnConfigFromSignal=function(){if(this.joinInfo){var e=function(e){var t;return(t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/))?{username:hv.username,password:hv.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(Tw(Tw({},hv),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}},n.updateTrafficStats=function(){var e=d(c().mark((function e(){var t,n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.signal.request(Ov.TRAFFIC_STATS,void 0,!0);case 4:(t=e.sent).timestamp=Date.now(),null!=t.ntp_offset&&(this.ntpOffset=t.ntp_offset),t.peer_delay.forEach((function(e){var t=n._statsCollector.trafficStats&&n._statsCollector.trafficStats.peer_delay.find((function(t){return t.peer_uid===e.peer_uid}));t&&t.B_st!==e.B_st&&uf((function(){n.emit(nm.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getJoinMessage=function(e){if(!this.joinInfo||!this.key)throw new Fv(ql.UNEXPECTED_ERROR,"can not generate join message, no join info");var t=Object.assign({},this.joinInfo.apResponse),n=W_("REPORT_APP_SCENARIO");if("string"!=typeof n)try{n=JSON.stringify(n)}catch(e){n=void 0}n&&n.length>128&&(n=void 0);var r=Tw({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:U_,browser:navigator.userAgent,process_id:W_("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:W_("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n,attributes:{userAttributes:{enablePublishedUserList:W_("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:W_("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:"number"==typeof W_("SUBSCRIBE_AUDIO_FILTER_TOPN")?W_("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:"boolean"==typeof W_("ENABLE_PUBLISH_AUDIO_FILTER")?W_("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:"boolean"==typeof W_("ENABLE_USER_LICENSE_CHECK")?W_("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:!0===W_("USE_PUB_RTX")||!0===W_("USE_SUB_RTX")||void 0,disableFEC:W_("DISABLE_FEC"),enableNTPReport:!!W_("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!W_("ENABLE_INSTANT_VIDEO")||void 0,enableDataStream2:"boolean"==typeof W_("ENABLE_DATASTREAM_2")?W_("ENABLE_DATASTREAM_2"):void 0,rtm2Flag:"number"==typeof W_("RTM2_FLAG")?W_("RTM2_FLAG"):void 0,enableUserAutoRebalanceCheck:!!W_("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:"boolean"==typeof W_("USE_XR")?W_("USE_XR"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(r.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(r.aes_mode=this.joinInfo.aesmode,W_("ENCRYPT_AES")?(r.aes_secret=this.joinInfo.aespassword,r.aes_encrypt=!0):r.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(r.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(r.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(r.default_video_stream=this.joinInfo.defaultVideoStream),r},n.getRejoinMessage=function(){if(!this.joinInfo)throw new Fv(ql.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}},n.handleSignalEvents=function(){var e=this;this.signal.on(Cv.WS_RECONNECT_WAITTING_FINISH,(function(t){var n;Or(n=["tryNext","recover"]).call(n,t)&&e.joinInfo&&pv.adjustSessionStartTime(e.joinInfo.sid)})),this.signal.on(Cv.WS_RECONNECT_CREATE_CONNECTION,(function(t){e.joinGatewayStartTime=Date.now()})),this.signal.on(Cv.WS_RECONNECTING,(function(t){e.joinInfo&&pv.WebSocketQuit(e.joinInfo.sid,{lts:Date.now(),succ:-1,cname:e.joinInfo.cname,uid:e.joinInfo.uid,cid:e.joinInfo.cid,errorCode:t||Bp.NETWORK_ERROR}),e.joinInfo&&(e.state="RECONNECTING",pv.sessionInit(e.joinInfo.sid,{lts:(new Date).getTime(),extend:e.isSignalRecover?{recover:!0}:{rejoin:!0},cname:e.joinInfo.cname,appid:e.joinInfo.appId,mode:e.spec.mode}),e.isSignalRecover=!1,e.joinGatewayStartTime=Date.now())})),this.signal.on(Cv.WS_CLOSED,(function(t){var n;switch(t){case jp.LEAVE:n=Bp.LEAVE;break;case jp.UID_BANNED:case jp.IP_BANNED:case jp.CHANNEL_BANNED:case jp.SERVER_ERROR:n=Bp.SERVER_ERROR;break;case jp.FALLBACK:n=Bp.FALLBACK;break;case jp.LICENSE_MISSING:case jp.LICENSE_EXPIRED:case jp.LICENSE_MINUTES_EXCEEDED:case jp.LICENSE_PERIOD_INVALID:case jp.LICENSE_MULTIPLE_SDK_SERVICE:case jp.LICENSE_ILLEGAL:case jp.TOKEN_EXPIRE:n=t;break;default:n=Bp.NETWORK_ERROR}tv.debug("[".concat(e.store.clientId,"] [signal] websocket closed, reason: ").concat(n||"undefined -> "+Bp.NETWORK_ERROR)),e.joinInfo&&pv.WebSocketQuit(e.joinInfo.sid,{lts:Date.now(),succ:t===jp.LEAVE?1:-1,cname:e.joinInfo.cname,uid:e.joinInfo.uid,cid:e.joinInfo.cid,errorCode:n}),e._disconnectedReason=t,t!==jp.FALLBACK&&(e.state="DISCONNECTED"),e.reset()})),this.signal.on(Cv.WS_CONNECTED,(function(){if(e.updateTurnConfigFromSignal(),e.state="CONNECTED",e.joinInfo&&("audience"===e.role&&e._clientRoleOptions&&(e._clientRoleOptions.level||e._clientRoleOptions.delay)&&(tv.debug("[".concat(e.store.clientId,"] patch to send set client role, role: ").concat(e.role,", mode: ").concat(e.spec.mode,", level: ").concat(e._clientRoleOptions.level,", delay: ").concat(e._clientRoleOptions.delay)),e.setClientRole(e.role,e._clientRoleOptions)),pv.joinGateway(e.joinInfo.sid,{lts:e.joinGatewayStartTime,succ:!0,ec:null,vid:e.joinInfo.vid,addr:e.signal.url,uid:e.joinInfo.uid,cid:e.joinInfo.cid,firstSuccess:e._isProactiveJoin,avoidJoinStartTime:e.store.avoidJoinStart,isProxy:!!e.joinInfo.proxyServer,signalChannel:e.signal instanceof Ew?"1":"0"}),e._isProactiveJoin=!1,e.joinInfo.useLocalAccessPoint&&1===e.joinInfo.setLocalAPVersion)){var t=e.signal.url&&e.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!t)return void tv.error("[".concat(e.store.clientId,"] set local access point after joined failed: ").concat(t));F_("EVENT_REPORT_DOMAIN",t[1]),F_("EVENT_REPORT_BACKUP_DOMAIN",t[1]),F_("LOG_UPLOAD_SERVER","".concat(t[1],":6444"))}})),this.signal.on(Iv.ON_UPLINK_STATS,(function(t){e._statsCollector.updateUplinkStats(t)})),this.signal.on(Cv.REQUEST_RECOVER,(function(t,n,r){if(!e.joinInfo)return r(new Fv(ql.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));t&&(e.joinInfo.multiIP=t,e.hasChangeBGPAddress=!0),e.isSignalRecover=!0,$p(e,nm.REQUEST_NEW_GATEWAY_LIST).then(n).catch(r)})),this.signal.on(Cv.REQUEST_JOIN_INFO,function(){var t=d(c().mark((function t(n){var r,i,o,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.updateTurnConfigFromSignal(),!e.store.useP2P){t.next=2;break}return t.abrupt("return",void n(e.getJoinMessage({ortc:{}})));case 2:return t.next=4,$p(e,nm.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(r=e.joinInfo)||void 0===r?void 0:r.turnServer});case 4:i=t.sent,o=i.iceParameters,a=i.dtlsParameters,s=i.rtpCapabilities,n(e.getJoinMessage({ortc:{iceParameters:o,dtlsParameters:a,rtpCapabilities:s,version:"2"}}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.signal.on(Cv.REQUEST_REJOIN_INFO,(function(t){t(e.getRejoinMessage())})),this.signal.on(Cv.REPORT_JOIN_GATEWAY,(function(t,n){e.joinInfo&&(pv.joinGateway(e.joinInfo.sid,{lts:e.joinGatewayStartTime,succ:!1,ec:t,addr:n,uid:e.joinInfo.uid,cid:e.joinInfo.cid,firstSuccess:e._isProactiveJoin,avoidJoinStartTime:e.store.avoidJoinStart,isProxy:!!e.joinInfo.proxyServer,signalChannel:e.signal instanceof Ew?"1":"0"}),e._isProactiveJoin=!1)})),this.signal.on(Cv.IS_P2P_DISCONNECTED,(function(t){t(nf(e,nm.IS_P2P_DISCONNECTED))})),this.signal.on(Cv.DISCONNECT_P2P,(function(){e.emit(nm.DISCONNECT_P2P)})),this.signal.on(Cv.NEED_RENEW_SESSION,(function(){e.emit(nm.NEED_RENEW_SESSION)})),this.signal.on(Cv.REQUEST_SUCCESS,(function(){e._signalTimeout=!1})),this.signal.on(Cv.REQUEST_TIMEOUT,(function(){e._signalTimeout=!0})),this.signal.on(Cv.JOIN_RESPONSE,(function(t){var n=e.getCurrentGatewayAddress();e.emit(nm.JOIN_RESPONSE,t,n)})),this.signal.on(Cv.DATACHANNEL_PRECONNECT,function(){var t=d(c().mark((function t(n,r,i){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updateTurnConfigFromSignal(),o=e.getCurrentGatewayAddress(),t.abrupt("return",$p(e,nm.DATACHANNEL_PRECONNECT,n,o).then(r).catch(i));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),this.signal.on(Cv.DATACHANNEL_CONNECTING,function(){var t=d(c().mark((function t(n){var r,i,o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$p(e,nm.REQUEST_DC_CONNECTION_PARAMS);case 2:r=t.sent,i=r.iceParameters,o=r.dtlsParameters,a=r.rtpCapabilities,n(e.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:o,rtpCapabilities:a,version:"2"}}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.signal.on(Cv.DATACHANNEL_FAILBACK,(function(){tv.warning("[".concat(e.store.clientId,"] User join datachannel failed")),e.reset(),e.resetSignal(),e.emit(nm.DATACHANNEL_FAILBACK)}))},n.tryUnsubBeforeResub=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Ov.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:t,ortc:[n]},!0);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),tv.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),e.t0),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),n.tryUnsubDataChannelBeforeResub=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Ov.UNSUBSCRIBE,{stream_id:n.id},!0);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),tv.warning("unsubscribe datachannel warning",e.t0),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),n.tryUnpubBeforeRepub=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Ov.UNPUBLISH,{stream_id:t,ortc:n},!0);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),tv.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),e.t0),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),n.tryUnpubDataChannelBeforeRepub=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Ov.UNPUBLISH_DATASTREAM,{channnel_id:n.channelId},!0);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),tv.warning("unpublish datastream warning: ",e.t0),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),n.tryMassUnsubBeforeResub=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={users:t.map((function(e){return{stream_id:e.stream_id,stream_type:e.stream_type}}))},e.prev=1,e.next=4,this.signal.request(Ov.UNSUBSCRIBE_STREAMS,n,!0);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),tv.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),n.muteLocal=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={action:t.find((function(e){return e.stream_type===tm.Audio}))?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:t,stream_id:n},e.prev=1,e.next=4,this.signal.request(Ov.CONTROL,r,!0,!0);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),tv.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),n.unmuteLocal=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={action:t.find((function(e){return e.stream_type===tm.Audio}))?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:t,stream_id:n},e.prev=1,e.next=4,this.signal.request(Ov.CONTROL,r,!0,!0);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),tv.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),n.muteRemote=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={action:t===hm.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:n},e.prev=1,e.next=4,this.signal.request(Ov.CONTROL,r,!0,!0);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),tv.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),n.unmuteRemote=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={action:t===hm.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:n},e.prev=1,e.next=4,this.signal.request(Ov.CONTROL,r,!0,!0);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),tv.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),n.uploadStats=function(e,t){this.signal.upload(e,t)},n.getSignalRTT=function(){return this.signal.rtt},n.restartICE=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:t},e.prev=1,e.next=4,this.signal.request(Ov.RESTART_ICE,n,!0);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),tv.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),e.t0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),n.reconnect=function(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,Bp.P2P_FAILED)},n.getCurrentGatewayAddress=function(){var e;if(!W_("GATEWAY_WSS_ADDRESS"))return null!==(e=this.joinInfo)&&void 0!==e&&e.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0},n.setPublishAudioFilterEnabled=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Ov.SET_PARAMETER,{enablePublishAudioFilter:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.resetSignal=function(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(jp.FALLBACK)),this.store.useDataChannel=!1,this.signal=new tg(Tw(Tw({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(nm.RESET_SIGNAL,om.websocket)},s(t,[{key:"state",get:function(){return this._state},set:function(e){if(e!==this._state){var t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(nm.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(nm.CONNECTION_STATE_CHANGE,e,t)}}},{key:"joinGatewayStartTime",get:function(){return this._joinGatewayStartTime},set:function(e){tv.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}}]),t}(Kp);function Cw(e,t,n,r){return new Vl((function(i,o){t.timeout=t.timeout||W_("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),vf(t.data)):n&&(t.data.size?t.data.size:t.data instanceof FormData?mf(t.data):vf(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,C_.request(t).then((function(e){"string"==typeof e.data?vf(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?e.data.byteLength:vf(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((function(e){C_.isCancel(e)?o(new Fv(ql.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new Fv(ql.NETWORK_TIMEOUT,e.message)):e.response?o(new Fv(ql.NETWORK_RESPONSE_ERROR,e.response.status)):o(new Fv(ql.NETWORK_ERROR,e.message))}))}))}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */!function(){var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ae&&ae];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in n))break e;n=n[a]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}if(o("Symbol",(function(e){function t(e,t){this.A=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var s=i[n[o]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&r(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return e})),"function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var c;e:{var u={};try{u.__proto__={a:!0},c=u.a;break e}catch(e){}c=!1}n=c?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=n;function l(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function f(e,t){return e.h=3,{value:t}}function h(e){this.g=new l,this.G=e}function _(e,t,n,r){try{var i=t.call(e.g.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.m=!1,i;var o=i.value}catch(t){return e.g.j=null,e.g.s(t),v(e)}return e.g.j=null,r.call(e.g,o),v(e)}function v(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function m(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){p(e.g);var n=e.g.j;return n?_(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),v(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function g(e,t){return t=new m(new h(t)),d&&e.prototype&&d(t,e.prototype),t}if(l.prototype.o=function(e){this.v=e},l.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},l.prototype.return=function(e){this.l={return:e},this.h=this.u},h.prototype.o=function(e){return p(this.g),this.g.j?_(this,this.g.j.next,e,this.g.o):(this.g.o(e),v(this))},h.prototype.s=function(e){return p(this.g),this.g.j?_(this,this.g.j.throw,e,this.g.o):(this.g.s(e),v(this))},o("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var E=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},y=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},b=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},S=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},T="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,w=T.FormData,R=T.XMLHttpRequest&&T.XMLHttpRequest.prototype.send,C=T.Request&&T.fetch,O=T.navigator&&T.navigator.sendBeacon,A=T.Element&&T.Element.prototype,I=T.Symbol&&Symbol.toStringTag;I&&(Blob.prototype[I]||(Blob.prototype[I]="Blob"),"File"in T&&!File.prototype[I]&&(File.prototype[I]="File"));try{new File([],"")}catch(e){T.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),I&&Object.defineProperty(e,I,{value:"File"}),e}}var k=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},N=function(e){this.i=[];var t=this;e&&E(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];E(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?E(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?y(e.value):e.value,t.append(e.name,n))}))};if((e=N.prototype).append=function(e,t,n){S(arguments,2),this.i.push(b(e,t,n))},e.delete=function(e){S(arguments,1);var t=[];e=String(e),E(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return g(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=f(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){S(arguments,1);for(var n=s(this),r=n.next();!r.done;r=n.next()){var i=s(r.value);r=i.next().value,i=i.next().value,e.call(t,i,r,this)}},e.get=function(e){S(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){S(arguments,1);var t=[];return e=String(e),E(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){S(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,r,i=this;return g(e,(function(e){if(1==e.h&&(t=s(i),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,f(e,s(r).next().value));n=t.next(),e.h=2}))},e.set=function(e,t,n){S(arguments,2),e=String(e);var r=[],i=b(e,t,n),o=!0;E(this.i,(function(t){t[0]===e?o&&(o=!r.push(i)):r.push(t)})),o&&r.push(i),this.i=r},e.values=function e(){var t,n,r,i,o=this;return g(e,(function(e){if(1==e.h&&(t=s(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(i=s(r)).next(),f(e,i.next().value));n=t.next(),e.h=2}))},N.prototype._asNative=function(){for(var e=new w,t=s(this),n=t.next();!n.done;n=t.next()){var r=s(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},N.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+k(y(r))+'"\r\n\r\n'+y(e)+"\r\n"):t.push(n+k(y(r))+'"; filename="'+k(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},N.prototype[Symbol.iterator]=function(){return this.entries()},N.prototype.toString=function(){return"[object FormData]"},A&&!A.matches&&(A.matches=A.matchesSelector||A.mozMatchesSelector||A.msMatchesSelector||A.oMatchesSelector||A.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),I&&(N.prototype[I]="FormData"),R){var P=T.XMLHttpRequest.prototype.setRequestHeader;T.XMLHttpRequest.prototype.setRequestHeader=function(e,t){P.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},T.XMLHttpRequest.prototype.send=function(e){e instanceof N?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),R.call(this,e)):R.call(this,e)}}C&&(T.fetch=function(e,t){return t&&t.body&&t.body instanceof N&&(t.body=t.body._blob()),C.call(this,e,t)}),O&&(T.navigator.sendBeacon=function(e,t){return t instanceof N&&(t=t._asNative()),O.call(this,e,t)}),T.FormData=N}}();var Ow=function(){var e=W_("AREAS");return 0===e.length&&e.push(am.GLOBAL),Bf(e).call(e,(function(e,t,n){var r=Aw(t);return r?0===n?r:"".concat(e,",").concat(r):e}),"")},Aw=function(e){return e===am.OVERSEA?"".concat(dm.ASIA,",").concat(dm.EUROPE,",").concat(dm.AFRICA,",").concat(dm.NORTH_AMERICA,",").concat(dm.SOUTH_AMERICA,",").concat(dm.OCEANIA):dm[e]},Iw=function(e){var t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((function(e){var n=xm[e],r=Object.keys(n);r&&r.map((function(e){"CODE"!==e&&(t[e]=t[e].concat(n[e]))}))})),t},kw={GLOBAL:{ASIA:[am.CHINA,am.JAPAN,am.INDIA,am.KOREA,am.HKMC],EUROPE:[],NORTH_AMERICA:[am.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},Nw=Object.keys(kw[am.GLOBAL]),Pw=[am.CHINA,am.NORTH_AMERICA,am.EUROPE,am.ASIA,am.JAPAN,am.INDIA,am.OCEANIA,am.SOUTH_AMERICA,am.AFRICA,am.KOREA,am.HKMC,am.US],Dw=function(e,t){var n,r,i=[];if(Or(e).call(e,am.GLOBAL)){var o=[am.GLOBAL,am.OVERSEA],a=Object.keys(xm);if(t===am.GLOBAL)throw new Fv(ql.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===am.CHINA)i=[am.OVERSEA];else if(r=t,Or(Nw).call(Nw,r)){var s=(n=t,kw[am.GLOBAL][n]||[]),c=[].concat(o,[t],s);i=a.filter((function(e){return!Or(c).call(c,e)}))}else if(function(e){var t=!1;return Nw.forEach((function(n){var r;Or(r=kw[am.GLOBAL][n]).call(r,e)&&(t=!0)})),t}(t)){var u=function(e){var t;return Nw.forEach((function(n){var r;Or(r=kw[am.GLOBAL][n]).call(r,e)&&(t=n)})),t}(t),d=[].concat(o,[u,t]);i=a.filter((function(e){return!Or(d).call(d,e)}))}else i=e;i=function(e){var t=[];return Pw.forEach((function(n){Or(e).call(e,n)&&t.push(n)})),t.concat(e.filter((function(e){return!Or(Pw).call(Pw,e)})))}(i)}else i=e;return i};function xw(e){var t,n;if(!e&&Or(t=W_("AREAS")).call(t,am.EXTENSIONS))return tv.debug("update area from ap : reset"),void Lw(fv,!0);if(Or(n=W_("AREAS")).call(n,am.GLOBAL)&&e){var r=xm.EXTENSIONS;r&&(r={CODE:Aw(am.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},tv.debug("update area from ap success: ".concat(e,",config is "),r),F_("AREAS",[am.EXTENSIONS],!0),Object.keys(r).map((function(e){F_(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?r[e][0]:r[e])})))}}function Lw(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=pv.reportApiInvoke(null,{name:Lp.SET_AREA,options:e,tag:Mp.TRACER});try{var r=[];if("string"==typeof e&&(r=[e]),Array.isArray(e)&&(e.forEach((function(e){if(!Or(lm).call(lm,e))throw new Fv(ql.INVALID_PARAMS,"invalid area code")})),r=e),"[object Object]"===Object.prototype.toString.call(e)){var i=e.areaCode,o=e.excludedArea;if(!i)throw new Fv(ql.INVALID_PARAMS,"area code is needed");var a=i;"string"==typeof i&&(a=[i]),r=o?Dw(a,o):a}if(!t){if(z_.AREAS){var s=new Fv(ql.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(s),void tv.warning("setArea is prohibited because of config-distribute")}if(Or(r).call(r,am.GLOBAL)&&W_("AREAS")===am.EXTENSIONS){var c=new Fv(ql.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(c),void tv.warning("setArea is prohibited because of ap extensions")}}F_("AREAS",r,t);var u=Iw(r);Object.keys(u).map((function(e){F_(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?u[e][0]:u[e])})),tv.debug("set area success:",r.join(","))}catch(e){throw n.onError(e),e}n.onSuccess()}function Mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mw(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jw=1;function Vw(e,t,n,r,i){jw+=1;var o,a,s={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:jw,requestId:jw,version:U_,cname:n.cname},u={service_name:t,json_body:JSON.stringify(s)},l=e[0];return Df(d(c().mark((function e(){var n,i,s,d,p,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Date.now(),e.next=3,Cw(l,{data:u,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});case 3:if(n=e.sent,a=Date.now()-o,0===n.code){e.next=7;break}throw i=new Fv(ql.UNEXPECTED_RESPONSE,"live streaming ap error, code"+n.code,{retry:!0,responseTime:a}),tv.error(i.toString()),i;case 7:if(200===(s=JSON.parse(n.json_body)).code){e.next=11;break}throw d=new Fv(ql.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(s.code,", reason: ").concat(s.reason),{code:s.code,responseTime:a}),tv.error(d.toString()),d;case 11:if(s.servers&&0!==s.servers.length){e.next=14;break}throw p=new Fv(ql.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:s.code,responseTime:a}),tv.error(p.toString()),p;case 14:return f=function(e,t){return{addressList:e.servers.map((function(e){return"wss://".concat(e.address.replace(/\./g,"-"),".").concat(W_("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(t))})),workerToken:e.workerToken,vid:e.vid}}(s,t),e.abrupt("return",(W_("LIVE_STREAMING_ADDRESS")&&(f.addressList=W_("LIVE_STREAMING_ADDRESS")instanceof Array?W_("LIVE_STREAMING_ADDRESS"):[W_("LIVE_STREAMING_ADDRESS")]),Uw(Uw({},f),{},{responseTime:a})));case 16:case"end":return e.stop()}}),e)}))),(function(r,i){return pv.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(r.addressList),firstSuccess:0===i,responseTime:a,serverIp:e[i%e.length]}),!1}),(function(r,i){return pv.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:a,serverIp:e[i%e.length]}),!!(r.code!==ql.OPERATION_ABORTED&&r.code!==ql.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(l=e[(i+1)%e.length],!0)}),i)}var Bw=1;function Fw(e,t,n,r){var i,o=e.url,a=e.areaCode,s=Date.now(),u=Kw(t,a,[pg.CHOOSE_SERVER]),l=u[0],p=u[1],f=rf.networkState;return Df(d(c().mark((function e(){var a,u,d,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=f&&rf.networkState===Fp.OFFLINE&&rf.onlineWaiter,!e.t0){e.next=4;break}return e.next=4,Vl.race([rf.onlineWaiter,Ef(r&&r.maxRetryTimeout||Nf.maxRetryTimeout)]);case 4:return f=rf.networkState,e.next=7,Cw(o,{data:l,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);case 7:return a=e.sent,u=a.data,d=a.headers,i="1"===d.http3?1:-1,pv.reportResourceTiming(o,t.sid),Gw(u,o,t,s,[pg.CHOOSE_SERVER],i),p=uw(u,pg.CHOOSE_SERVER),e.abrupt("return",(Hw(p),iw(p,o)));case 13:case"end":return e.stop()}}),e)}))),(function(e){return e&&pv.joinChooseServer(t.sid,{lts:s,succ:!0,csAddr:o,opid:p,serverList:e.gatewayAddrs.map((function(e){return e.address})),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[pg.CHOOSE_SERVER].toString(),isHttp3:i}),!1}),(function(e){return e.code!==ql.OPERATION_ABORTED&&(e.code===ql.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(pv.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:o,serverList:null,opid:p,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[pg.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:f}),isHttp3:i}),tv.warning("[".concat(t.clientId,"] Choose server network error, retry"),e),!0))}),r)}function Ww(e,t,n,r){var i,o,a=e.url,s=e.areaCode,u=e.serviceIds,l=Date.now(),p=Kw(t,s,u),f=p[0],h=p[1];return Df(d(c().mark((function e(){var s,d,p,h,_;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=o&&rf.networkState===Fp.OFFLINE&&rf.onlineWaiter,!e.t0){e.next=4;break}return e.next=4,Vl.race([rf.onlineWaiter,Ef(r&&r.maxRetryTimeout||Nf.maxRetryTimeout)]);case 4:return o=rf.networkState,e.next=7,Cw(a,{data:f,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);case 7:return s=e.sent,d=s.data,p=s.headers,i="1"===p.http3?1:-1,pv.reportResourceTiming(a,t.sid),Gw(d,a,t,l,u,i),h=uw(d,pg.CHOOSE_SERVER),_=uw(d,"proxy5"===t.cloudProxyServer?pg.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?pg.CLOUD_PROXY:pg.CLOUD_PROXY_FALLBACK),e.abrupt("return",(Hw(h),{gatewayInfo:iw(h,a),proxyInfo:_,url:a}));case 13:case"end":return e.stop()}}),e)}))),(function(e){return e.gatewayInfo&&pv.joinChooseServer(t.sid,{lts:l,succ:!0,csAddr:a,serverList:e.gatewayInfo.gatewayAddrs.map((function(e){return e.address})),ec:null,opid:h,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:u.toString(),isHttp3:i}),e.proxyInfo&&pv.joinWebProxyAP(t.sid,{lts:l,sucess:1,apServerAddr:a,turnServerAddrList:e.proxyInfo.addresses.map((function(e){return e.ip})).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:u.toString()}),!1}),(function(e){return e.code!==ql.OPERATION_ABORTED&&(e.code===ql.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(pv.joinWebProxyAP(t.sid,{lts:l,sucess:0,apServerAddr:a,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:u.toString(),extend:JSON.stringify({networkState:o})}),tv.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0))}),r)}var Gw=function(e,t,n,r,i,o){var a=[],s=function(a){4096===a.flag?pv.joinChooseServer(n.sid,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:a.error.message,csIp:a.error.data&&a.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o}):1048576!==a.flag&&4194304!==a.flag&&4194310!==a.flag||pv.joinWebProxyAP(n.sid,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:a.error.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()})};if(e.response_body.forEach((function(t){var n=t.buffer.code;if(23===t.uri&&0===n&&!t.buffer.edges_services)if(4194310===t.buffer.flag)tv.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{var r={error:new Fv(ql.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};a.push(r),s(r)}if(0!==n){var i=jm(n),o={error:new Fv(ql.CAN_NOT_GET_GATEWAY_SERVER,i.desc,{desc:i.desc,retry:i.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?tv.warning(o.error.toString()):a.push(o),s(o)}})),a.length)throw tv.warning("[".concat(n.clientId,"] multi unilbs ").concat(t," failed, ").concat(a.map((function(e){return"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry)})).join(" | "))),new Fv(ql.CAN_NOT_GET_GATEWAY_SERVER,a.map((function(e){return"flag: ".concat(e.flag,", message: ").concat(e.error.message)})).join(" | "),{retry:!!a.find((function(e){return e.error.data.retry})),csIp:e.detail[502],desc:[].concat(new Set(a.map((function(e){var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((function(e){return!!e}))))})},Hw=function(e){var t,n,r,i;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new Fv(ql.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(W_("AP_AREA")&&(null!==(r=e.detail)&&void 0!==r&&r[23]&&"string"==typeof(null===(i=e.detail)||void 0===i?void 0:i[23])?xw(e.detail[23].toLowerCase()):xw()),null!==(t=e.detail)&&void 0!==t&&t[19]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[19]))for(var o=e.detail[19],a=null==o?void 0:o.split(";"),s=0;s<a.length;s++){var c,u=vg(c=a[s]).call(c);e.addresses[s]&&a&&(e.addresses[s].fingerprint=u)}if(W_("GATEWAY_ADDRESS")&&W_("GATEWAY_ADDRESS").length>0){tv.debug("assign gateway address to",W_("GATEWAY_ADDRESS"));var d=W_("GATEWAY_ADDRESS").map((function(t){var n,r,i=null!==(n=null===(r=e.addresses.find((function(e){return e.ip===t.ip&&e.port===t.port})))||void 0===r?void 0:r.fingerprint)&&void 0!==n?n:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:i}}));e.addresses=d}},zw=function(e,t){if(e.response_body&&e.response_body.length){var n=e.response_body[0];if(0!==n.buffer.code){var r=jm(n.buffer.code);throw new Fv(ql.UPDATE_TICKET_FAILED,"[".concat(n.buffer.code,"]: ").concat(r.desc),{retry:r.retry})}return n.buffer.ticket}throw tv.debug("update ticket request received ap response without response body:",t),new Fv(ql.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},Kw=function(e,t,n){var r=Math.floor(Math.random()*Math.pow(10,12)),i={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:Uw({6:e.stringUid,11:t,12:W_("USE_NEW_TOKEN")?"1":void 0,22:t},W_("AP_RTM")?{26:"RTM2"}:{}),key:e.token,service_ids:n,uid:e.uid||0}}]};i.request_bodies.forEach((function(t){e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));var o=new FormData;return o.append("request",JSON.stringify(i)),[o,r]},Yw=function(e,t){var n=Math.floor(Math.random()*Math.pow(10,12)),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((function(e){return{ip:e.ip,port:e.port}}))}}]},i=new FormData;return i.append("request",JSON.stringify(r)),[i,n]},qw=0;function Jw(e){return Vl.all(e.map((function(e){return e.then((function(e){throw e}),(function(e){return e}))}))).then((function(e){throw e}),(function(e){return e}))}var Xw=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s,u,l,p,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fragementLength,r=t.referenceList,i=t.asyncMapHandler,o=t.allFailedhandler,a=t.promisesCollector,s=0,u=n,p=0,f=function(){var e=d(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=s*u,t=e+u;return r.slice(e,t).map(i)}(),a&&a.push.apply(a,t),e.prev=2,e.next=5,Jw(t);case 5:l=e.sent,e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(2),s++,(p+=u)>=r.length){e.next=14;break}return e.next=13,f();case 13:return e.abrupt("return",void e.sent);case 14:o(e.t0);case 15:t.forEach((function(e){return e.cancel()}));case 16:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),e.next=6,f();case 6:return e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Qw(e,t,n,r){return Zw.apply(this,arguments)}function Zw(){return(Zw=d(c().mark((function e(t,n,r,i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=d(c().mark((function e(t,n,r,i){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null,a=[],s=function(){var e=d(c().mark((function e(){var o,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=W_("WEBCS_DOMAIN").slice(0,W_("AJAX_REQUEST_CONCURRENT")).map((function(e){return{url:t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v2/transpond/webrtc?v=2"):"https://".concat(e,"/api/v2/transpond/webrtc?v=2"),areaCode:Ow()}})),s=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((function(e){return e.url}))}),e.next=4,Xw({fragementLength:W_("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:function(e){return tv.debug("[".concat(t.clientId,"] Connect to choose_server:"),e.url),Fw(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:a});case 4:return u=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},s),u));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=d(c().mark((function e(){var s,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ef(1e3);case 2:if(null===o){e.next=4;break}return e.abrupt("return",o);case 4:return s=W_("WEBCS_DOMAIN_BACKUP_LIST").map((function(e){return{url:t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v2/transpond/webrtc?v=2"):"https://".concat(e,"/api/v2/transpond/webrtc?v=2"),areaCode:Ow()}})),u=i.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:s.map((function(e){return e.url}))}),e.next=8,Xw({fragementLength:W_("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:function(e){return tv.debug("[".concat(t.clientId,"] Connect to backup choose_server:"),e.url),Fw(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},u),e[0]},promisesCollector:a});case 8:return d=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},u),d));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=2,e.next=5,Jw([s(),u()]);case 5:return o=e.sent,a.length&&a.forEach((function(e){return e.cancel&&"function"==typeof e.cancel&&e.cancel()})),e.abrupt("return",o);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0[0];case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,n,r,i),e.next=3,o;case 3:return e.t0=e.sent,e.abrupt("return",{gatewayInfo:e.t0});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $w(e,t,n,r,i){return eR.apply(this,arguments)}function eR(){return(eR=d(c().mark((function e(t,n,r,i,o){var a,s,u,d,l,p,f,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("disabled"!==(a=t.cloudProxyServer)){e.next=18;break}if(i){e.next=4;break}return e.abrupt("return");case 4:if(!t.useLocalAccessPoint){e.next=8;break}return e.next=7,Qw(t,n,r,o);case 7:return e.abrupt("return",e.sent);case 8:if(!W_("JOIN_WITH_FALLBACK_MEDIA_PROXY")){e.next=15;break}return e.next=11,oR(t,n,r,o);case 11:return s=e.sent,u=s.gatewayInfo,d=s.proxyInfo,e.abrupt("return",(t.turnServer&&"auto"!==t.turnServer.mode||(t.turnServer={mode:"manual",servers:d.map((function(e){return{turnServerURL:e.address,tcpport:e.tcpport||hv.tcpport,udpport:e.udpport||hv.udpport,username:e.username||hv.username,password:e.password||hv.password,forceturn:!1,security:!0}}))}),{gatewayInfo:u}));case 15:return e.next=17,Qw(t,n,r,o);case 17:return e.abrupt("return",e.sent);case 18:return e.next=20,oR(t,n,r,o);case 20:return l=e.sent,p=l.proxyInfo,f=l.gatewayInfo,h={gatewayInfo:f},e.abrupt("return",(t.turnServer={mode:"manual",servers:p.map((function(e){return{turnServerURL:e.address,tcpport:"proxy3"===a?void 0:e.tcpport?e.tcpport:hv.tcpport,udpport:"proxy4"===a?void 0:e.udpport?e.udpport:hv.udpport,username:e.username||hv.username,password:e.password||hv.password,forceturn:"proxy4"!==a,security:"proxy5"===a}}))},tv.debug("[".concat(t.clientId,"] set proxy server: ").concat(t.proxyServer,", mode: ").concat(a)),h));case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tR(e,t,n,r,i){return nR.apply(this,arguments)}function nR(){return(nR=d(c().mark((function e(t,n,r,i,o){var a,s,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=W_("ACCOUNT_REGISTER").slice(0,W_("AJAX_REQUEST_CONCURRENT")),s=n.proxyServer?a.map((function(e){return"https://".concat(n.proxyServer,"/ap/?url=").concat(e+"/api/v1")})):a.map((function(e){return"https://".concat(e,"/api/v1")})),u=null==o?void 0:o.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:s}),e.prev=4,e.next=7,function(){var e=d(c().mark((function e(t,n,r,i,o){var a,s,u,d,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),s={sid:r.sid,opid:10,appid:r.appId,string_uid:n},u=t[0],e.next=4,Df((function(){return Cw(u+"".concat(-1===u.indexOf("?")?"?":"&","action=stringuid"),{data:s,cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})}),(function(e,r){if(0===e.code){if(e.uid<=0||e.uid>=Math.pow(2,32))throw tv.error("Invalid Uint Uid ".concat(n," => ").concat(e.uid),e),pv.reqUserAccount(s.sid,{lts:a,success:!1,serverAddr:u,stringUid:s.string_uid,uid:e.uid,errorCode:ql.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new Fv(ql.INVALID_UINT_UID_FROM_STRING_UID);return pv.reqUserAccount(s.sid,{lts:a,success:!0,serverAddr:u,stringUid:s.string_uid,uid:e.uid,errorCode:null,extend:s}),!1}var i=jm(e.code);return i.retry&&(u=t[(r+1)%t.length]),pv.reqUserAccount(s.sid,{lts:a,success:!1,serverAddr:u,stringUid:s.string_uid,uid:e.uid,errorCode:i.desc,extend:s}),i.retry}),(function(e,n){return e.code!==ql.OPERATION_ABORTED&&(pv.reqUserAccount(s.sid,{lts:a,success:!1,serverAddr:u,stringUid:s.string_uid,uid:null,errorCode:e.code,extend:s}),u=t[(n+1)%t.length],!0)}),o);case 4:if(0===(d=e.sent).code){e.next=8;break}throw l=jm(d.code),new Fv(ql.UNEXPECTED_RESPONSE,l.desc);case 8:return e.abrupt("return",d);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}()(s,t,n,r,i);case 7:return l=e.sent,e.abrupt("return",(null==o||o.recordJoinChannelService({status:"success",endTs:Date.now()},u),l.uid));case 11:throw e.prev=11,e.t0=e.catch(4),null==o||o.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[e.t0]},u),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}function rR(e,t,n){return iR.apply(this,arguments)}function iR(){return(iR=d(c().mark((function e(t,n,r){var i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=W_("CDS_AP").slice(0,W_("AJAX_REQUEST_CONCURRENT")).map((function(e){return t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"):"https://".concat(e,"/api/v1?action=config")})).map((function(e){return function(e,t,n,r){var i=Zl(),o={flag:64,cipher_method:0,features:{device:i.name,system:i.os,system_general:navigator.userAgent,vendor:t.appId,version:U_,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return Df((function(){return Cw(e,{data:o,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})}),void 0,(function(e){return e.code!==ql.OPERATION_ABORTED}),r)}(e,t,n,r)})),o=null,a=null,s={},e.prev=2,e.next=5,Jw(i);case 5:o=e.sent,e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(2),e.t0.code!==ql.OPERATION_ABORTED){e.next=12;break}throw e.t0;case 12:a=e.t0;case 13:if(i.forEach((function(e){return e.cancel()})),pv.reportApiInvoke(t.sid,{name:Lp.REQUEST_CONFIG_DISTRIBUTE,options:{error:a,res:o}}).onSuccess(),o&&o.test_tags)try{s=function(e){if(!e.test_tags)return{};var t=e.test_tags,n=Object.keys(t),r={};return n.forEach((function(e){var n,i=vg(n=e.slice(4)).call(n),o=JSON.parse(t[e])[1];r[i]=o})),r}(o)}catch(e){}return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function oR(e,t,n,r){return aR.apply(this,arguments)}function aR(){return(aR=d(c().mark((function e(t,n,r,i){var o,a,s,u,l,p,f,h,_,v,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=W_("PROXY_SERVER_TYPE3"),a=function(e,t,n){var r=n||o;return Array.isArray(r)&&(r=t%2==0?o[1]:o[0]),"https://".concat(r,"/ap/?url=").concat(e)},s=null,u=[],l=function(){var e=d(c().mark((function e(){var o,s,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=W_("WEBCS_DOMAIN").slice(0,W_("AJAX_REQUEST_CONCURRENT")).map((function(e,n){return{url:"disabled"===t.cloudProxyServer&&t.proxyServer?a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n,t.proxyServer):"disabled"===t.cloudProxyServer||"fallback"===t.cloudProxyServer?"https://".concat(e,"/api/v2/transpond/webrtc?v=2"):a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n),areaCode:Ow(),serviceIds:[pg.CHOOSE_SERVER,"proxy5"===t.cloudProxyServer?pg.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?pg.CLOUD_PROXY:pg.CLOUD_PROXY_FALLBACK]}})),s=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((function(e){return e.url}))}),e.next=4,Xw({fragementLength:W_("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:function(e){return tv.debug("[".concat(t.clientId,"] Connect to choose_server:"),e.url),Ww(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:u});case 4:return d=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},s),d));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=d(c().mark((function e(){var o,d,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ef(1e3);case 2:if(null===s){e.next=4;break}return e.abrupt("return",s);case 4:return o=W_("WEBCS_DOMAIN_BACKUP_LIST").map((function(e,n){return{url:"disabled"===t.cloudProxyServer&&t.proxyServer?a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n,t.proxyServer):"disabled"===t.cloudProxyServer||"fallback"===t.cloudProxyServer?"https://".concat(e,"/api/v2/transpond/webrtc?v=2"):a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n),areaCode:Ow(),serviceIds:[pg.CHOOSE_SERVER,"proxy5"===t.cloudProxyServer?pg.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?pg.CLOUD_PROXY:pg.CLOUD_PROXY_FALLBACK]}})),d=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((function(e){return e.url}))}),e.next=8,Xw({fragementLength:W_("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:function(e){return tv.debug("[".concat(t.clientId,"] Connect to backup choose_server:"),e.url),Ww(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},d),e[0]},promisesCollector:u});case 8:return l=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},d),l));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=3,e.next=6,Jw([l(),p()]);case 6:v=e.sent,f=v.gatewayInfo,h=v.proxyInfo,_=v.url,e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(3),e.t0[0];case 15:if(u.length&&u.forEach((function(e){return e.cancel&&"function"==typeof e.cancel&&e.cancel()})),f&&h){e.next=17;break}throw new Fv(ql.UNEXPECTED_ERROR,"missing gateway or proxy response").print();case 17:return t.apUrl=_,"disabled"!==t.cloudProxyServer&&Array.isArray(o)&&_&&(m=/^https?:\/\/(.+?)(\/.*)?$/.exec(_)[1],Or(o).call(o,m)&&(t.proxyServer=m,tv.setProxyServer(m),pv.setProxyServer(m))),e.t1=f,e.next=21,dw(h,f.uid);case 21:return e.t2=e.sent,s={gatewayInfo:e.t1,proxyInfo:e.t2},e.abrupt("return",s);case 24:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}function sR(e,t,n,r){return cR.apply(this,arguments)}function cR(){return(cR=d(c().mark((function e(t,n,r,i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=W_("UAP_AP").slice(0,W_("AJAX_REQUEST_CONCURRENT")).map((function(e){return n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")})),e.next=3,Vw(o,t,n,r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uR(e,t,n){return dR.apply(this,arguments)}function dR(){return(dR=d(c().mark((function e(t,n,r){var i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=W_("UAP_AP").slice(0,W_("AJAX_REQUEST_CONCURRENT")).map((function(e){return t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")})).map((function(e){return function(e,t,n,r){var i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:U_,cname:t.cname,uid:t.uid.toString(),requestId:Bw,seq:Bw};Bw+=1;var o={service_name:"tele_channel",json_body:JSON.stringify(i)};return Df(d(c().mark((function t(){var r,i,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Cw(e,{data:o,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});case 2:if(0===(r=t.sent).code){t.next=6;break}throw i=new Fv(ql.UNEXPECTED_RESPONSE,"cross channel ap error, code"+r.code,{retry:!0}),tv.error(i.toString()),i;case 6:if(200===(a=JSON.parse(r.json_body)).code){t.next=10;break}throw s=new Fv(ql.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(a.code,", reason: ").concat(a.reason)),tv.error(s.toString()),s;case 10:if(a.servers&&0!==a.servers.length){t.next=13;break}throw u=new Fv(ql.UNEXPECTED_RESPONSE,"cross channel app center empty server"),tv.error(u.toString()),u;case 13:return t.abrupt("return",{vid:a.vid,workerToken:a.workerToken,addressList:(W_("CHANNEL_MEDIA_RELAY_SERVERS")||a.servers).map((function(e){return"wss://".concat(e.address.replace(/\./g,"-"),".").concat(W_("WORKER_DOMAIN"),":").concat(e.wss)}))});case 14:case"end":return t.stop()}}),t)}))),void 0,(function(e){return!!(e.code!==ql.OPERATION_ABORTED&&e.code!==ql.UNEXPECTED_RESPONSE||e.data&&e.data.retry)}),r)}(e,t,n,r)})),e.prev=1,e.next=4,Jw(i);case 4:return o=e.sent,e.abrupt("return",(i.forEach((function(e){return e.cancel()})),o));case 8:throw e.prev=8,e.t0=e.catch(1),e.t0[0];case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function lR(e,t,n){return pR.apply(this,arguments)}function pR(){return(pR=d(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,o=[],a=function(){var e=d(c().mark((function e(a){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=W_(a?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map((function(e){return t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v2/transpond/webrtc?v=2"):"https://".concat(e,"/api/v2/transpond/webrtc?v=2")})),e.t0=a,!e.t0){e.next=6;break}return e.next=5,Ef(1e3);case 5:e.t0=null!==i;case 6:if(!e.t0){e.next=10;break}e.t1=i,e.next=13;break;case 10:return e.next=12,Xw({fragementLength:W_("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:function(e){return tv.debug("[".concat(t.clientId,"] update ticket, Connect to ").concat(a?"backup":""," choose_server:"),e),function(e,t,n,r){var i=Yw(t,[pg.CHOOSE_SERVER])[0],o=rf.networkState;return Df(d(c().mark((function t(){var a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=o&&rf.networkState===Fp.OFFLINE&&rf.onlineWaiter,!t.t0){t.next=4;break}return t.next=4,Vl.race([rf.onlineWaiter,Ef(r&&r.maxRetryTimeout||Nf.maxRetryTimeout)]);case 4:return o=rf.networkState,t.next=7,Cw(e,{data:i,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);case 7:return a=t.sent,t.abrupt("return",zw(a,e));case 9:case"end":return t.stop()}}),t)}))),(function(){return!1}),(function(e){return e.code!==ql.OPERATION_ABORTED&&(e.code===ql.UPDATE_TICKET_FAILED?e.data.retry:(tv.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0))}),r)}(e,t,n,r)},allFailedhandler:function(e){throw e[0]},promisesCollector:o});case 12:e.t1=e.sent;case 13:return e.abrupt("return",e.t1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=2,e.next=5,Jw([a(!1),a(!0)]);case 5:return i=e.sent,o.length&&o.forEach((function(e){return e.cancel&&"function"==typeof e.cancel&&e.cancel()})),e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0[0];case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function fR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fR(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _R=function(e){function t(){var t;return uc(l(t=e.call(this)||this),"configs",void 0),uc(l(t),"joinInfo",void 0),uc(l(t),"cancelToken",void 0),uc(l(t),"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),uc(l(t),"interval",void 0),uc(l(t),"mutex",new If("config-distribute")),uc(l(t),"mutableParamsRead",!1),t}p(t,e);var n=t.prototype;return n.startGetConfigDistribute=function(e,t){var n=this;this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),W_("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval((function(){n.updateConfigDistribute()}),W_("CONFIG_DISTRIBUTE_INTERVAL")))},n.stopGetConfigDistribute=function(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0},n.awaitConfigDistributeComplete=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mutex.isLocked){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.mutex.lock();case 4:e.t0=e.sent,(0,e.t0)();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConfigDistribute=function(){var e=d(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mutableParamsRead||(this.mutableParamsRead=!0,pv.reportApiInvoke(null,{options:void 0,name:Lp.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Mp.TRACER}).onSuccess(JSON.stringify(z_))),this.joinInfo&&this.cancelToken&&this.retryConfig){e.next=3;break}return e.abrupt("return",void tv.debug("[config-distribute] get config distribute interrupted have no joininfo"));case 3:return e.next=5,this.mutex.lock();case 5:return n=e.sent,e.prev=6,e.next=9,rR(this.joinInfo,this.cancelToken,this.retryConfig);case 9:t=e.sent,tv.debug("[config-distribute] get config distribute",JSON.stringify(t)),t.limit_bitrate&&this.handleBitrateLimit(t.limit_bitrate),this.cacheGlobalParameterConfig(t),this.configs=t,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),r=new Fv(ql.NETWORK_RESPONSE_ERROR,e.t0),tv.warning("[config-distribute] ".concat(r.toString()));case 20:return e.prev=20,n(),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[6,16,20,23]])})));return function(){return e.apply(this,arguments)}}(),n.getBitrateLimit=function(){return this.configs?this.configs.limit_bitrate:void 0},n.handleBitrateLimit=function(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(pm.UPDATE_BITRATE_LIMIT,e):this.emit(pm.UPDATE_BITRATE_LIMIT,e))},n.getLowStreamConfigDistribute=function(){return this.configs&&this.configs.limit_bitrate&&hR({},this.configs.limit_bitrate.low_stream_uplink)},n.cacheGlobalParameterConfig=function(e){for(var t,n=Gc(t=Object.keys(e).filter((function(e){return/^webrtc_ng_global_parameter/.test(e)}))).call(t),r=0;r<n.length;r++)for(var i=n.length-1;i>r;i--){var o=n[i];if("number"==typeof e[o].__priority){var a=e[o].__priority,s=n[i-1];if("number"==typeof e[s].__priority){if(!(a>e[s].__priority))continue;var c=o;n[i]=n[i-1],n[i-1]=c}else{var u=o;n[i]=n[i-1],n[i-1]=u}}}var d={};n.forEach((function(t){var n=e[t],r=n.__expires;Object.keys(n).forEach((function(e){"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(d,e)||(d[e]=hR({value:n[e]},r&&{expires:r}))}))}));try{!function(e){try{var t=Date.now();Object.keys(e).forEach((function(n){switch(n){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":if(Object.prototype.hasOwnProperty.call(B_,n)){var r=e[n],i=r.value,o=r.expires;if(o&&o<=t)return;z_[n]=i,B_[n]=i,tv.debug("Update global parameters from config distribute",n,i)}}}))}catch(t){tv.error("Error update config immediately: ".concat(e),t.message)}}(d);var l=JSON.stringify(d),p=window.btoa(l);window.localStorage.setItem("websdk_ng_global_parameter",p),tv.debug("Caching global parameters ".concat(l))}catch(e){tv.error("Error caching global parameters:",e.message)}},t}(Kp);function vR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vR(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gR=function(e){function t(t,n,r,i){var o;return uc(l(o=e.call(this)||this),"spec",void 0),uc(l(o),"token",void 0),uc(l(o),"websocket",void 0),uc(l(o),"pingpongTimer",void 0),uc(l(o),"reconnectMode","retry"),uc(l(o),"serviceMode",void 0),uc(l(o),"reqId",0),uc(l(o),"commandReqId",0),uc(l(o),"handleWebSocketOpen",(function(){o.reconnectMode="retry",o.startPingPong()})),uc(l(o),"handleWebSocketMessage",(function(e){if(e.data){var t=JSON.parse(e.data);t.requestId?o.emit("@".concat(t.requestId,"-").concat(t.sid),t):o.serviceMode===Dv.INJECT?o.emit(Yv.INJECT_STREAM_STATUS,t):(pv.workerEvent(o.spec.sid,{actionType:"status",serverCode:t.code,workerType:o.serviceMode===Dv.TRANSCODE?1:2}),o.emit(Yv.PUBLISH_STREAM_STATUS,t))}})),o.spec=n,o.token=t,o.serviceMode=i,o.websocket=new eg("live-streaming",r),o.websocket.on(Pv.CONNECTED,o.handleWebSocketOpen),o.websocket.on(Pv.ON_MESSAGE,o.handleWebSocketMessage),o.websocket.on(Pv.REQUEST_NEW_URLS,(function(e,t){$p(l(o),Yv.REQUEST_NEW_ADDRESS).then(e).catch(t)})),o.websocket.on(Pv.RECONNECTING,(function(){o.websocket.reconnectMode=o.reconnectMode})),o}p(t,e);var n=t.prototype;return n.init=function(e){return this.websocket.init(e)},n.request=function(){var e=d(c().mark((function e(t,n,r,i){var o,a,s,u,d,l,p,f=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reqId+=1,"request"===t&&(this.commandReqId+=1),o=this.commandReqId,(a=this.reqId)&&this.websocket){e.next=4;break}throw new Fv(ql.UNEXPECTED_ERROR);case 4:if(s=mR({command:t,sdkVersion:"4.19.3"===U_?"0.0.1":U_,seq:a,requestId:a,allocate:r,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},n),"closed"!==this.websocket.state){e.next=7;break}throw new Fv(ql.WS_DISCONNECT);case 7:if(u=function(){return new Vl((function(e,t){f.websocket.once(Pv.CLOSED,(function(){return t(new Fv(ql.WS_ABORT))})),f.websocket.once(Pv.CONNECTED,e)}))},e.t0="connected"!==this.websocket.state,!e.t0){e.next=12;break}return e.next=12,u();case 12:return s.clientRequest&&(s.clientRequest.workerToken=this.token),d=new Vl((function(e,t){var n=function(){t(new Fv(ql.WS_ABORT))};f.websocket.once(Pv.RECONNECTING,n),f.websocket.once(Pv.CLOSED,n),f.once("@".concat(a,"-").concat(f.spec.sid),(function(t){e(t)}))})),i&&pv.workerEvent(this.spec.sid,mR(mR({},i),{},{requestId:o,actionType:"request",payload:JSON.stringify(n.clientRequest),serverCode:0,code:0})),l=Date.now(),this.websocket.sendMessage(s),p=null,e.prev=18,e.next=21,d;case 21:p=e.sent,e.next=33;break;case 24:if(e.prev=24,e.t1=e.catch(18),"closed"!==this.websocket.state){e.next=28;break}throw e.t1;case 28:return e.next=30,u();case 30:return e.next=32,this.request(t,n,r);case 32:return e.abrupt("return",e.sent);case 33:return e.abrupt("return",(i&&pv.workerEvent(this.spec.sid,mR(mR({},i),{},{requestId:o,actionType:"response",payload:JSON.stringify(p.serverResponse),serverCode:p.code,success:200===p.code,responseTime:Date.now()-l})),200!==p.code&&this.handleResponseError(p),p));case 34:case"end":return e.stop()}}),e,this,[[18,24]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),n.tryNextAddress=function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")},n.close=function(){var e="4.19.3"===U_?"0.0.1":U_;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)},n.handleResponseError=function(e){switch(e.code){case Jv.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void tv.warning("live stream response already exists stream");case Jv.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Jv.LIVE_STREAM_RESPONSE_BAD_STREAM:case Jv.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Fv(ql.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case Jv.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new Fv(ql.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Jv.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Fv(ql.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case Jv.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:var t=new Fv(ql.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(Yv.WARNING,t,e.serverResponse.url);case Jv.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:var n=new Fv(ql.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(Yv.WARNING,n,e.serverResponse.url);case Jv.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Fv(ql.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Jv.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Fv(ql.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case Jv.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:var r=new Fv(ql.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(Yv.WARNING,r,e.serverResponse.url);case Jv.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Fv(ql.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case Jv.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Fv(ql.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case Jv.LIVE_STREAM_RESPONSE_WORKER_LOST:case Jv.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new Fv(ql.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Jv.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new Fv(ql.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new Fv(ql.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Jv.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Jv.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Jv.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Jv.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Fv(ql.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}},n.startPingPong=function(){var e=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((function(){"connected"===e.websocket.state&&e.request("ping",{}).catch(Sf)}),6e3)},t}(Kp);function ER(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ER(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bR=function(e){function t(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nf,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nf;return uc(l(n=e.call(this)||this),"onLiveStreamWarning",void 0),uc(l(n),"onLiveStreamError",void 0),uc(l(n),"onInjectStatusChange",void 0),uc(l(n),"spec",void 0),uc(l(n),"retryTimeout",1e4),uc(l(n),"connection",void 0),uc(l(n),"httpRetryConfig",void 0),uc(l(n),"wsRetryConfig",void 0),uc(l(n),"streamingTasks",new Map),uc(l(n),"isStartingStreamingTask",!1),uc(l(n),"taskMutex",new If("live-streaming")),uc(l(n),"cancelToken",C_.CancelToken.source()),uc(l(n),"transcodingConfig",void 0),uc(l(n),"injectConfig",yR({},cm)),uc(l(n),"injectLoopTimes",0),uc(l(n),"uapResponse",void 0),uc(l(n),"lastTaskId",1),uc(l(n),"statusError",new Map),n.spec=t,n.httpRetryConfig=i,n.wsRetryConfig=r,n}p(t,e);var n=t.prototype;return n.setTranscodingConfig=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 66!==(n=yR(yR({},sm),t)).videoCodecProfile&&77!==n.videoCodecProfile&&100!==n.videoCodecProfile&&(tv.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(n.videoCodecProfile," -> 100")),n.videoCodecProfile=100),n.transcodingUsers||(n.transcodingUsers=n.userConfigs),n.transcodingUsers&&(n.transcodingUsers=n.transcodingUsers.map((function(e){return yR(yR(yR({},Hv),e),{},{zOrder:e.zOrder?e.zOrder+1:1})}))),function(e){Ip(e.width)||Rp(e.width,"config.width",0,1e4),Ip(e.height)||Rp(e.height,"config.height",0,1e4),Ip(e.videoBitrate)||Rp(e.videoBitrate,"config.videoBitrate",1,1e6),Ip(e.videoFrameRate)||Rp(e.videoFrameRate,"config.videoFrameRate"),Ip(e.lowLatency)||Tp(e.lowLatency,"config.lowLatency"),Ip(e.audioSampleRate)||wp(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Ip(e.audioBitrate)||Rp(e.audioBitrate,"config.audioBitrate",1,128),Ip(e.audioChannels)||wp(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),Ip(e.videoGop)||Rp(e.videoGop,"config.videoGop"),Ip(e.videoCodecProfile)||wp(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Ip(e.userCount)||Rp(e.userCount,"config.userCount",0,17),Ip(e.backgroundColor)||Rp(e.backgroundColor,"config.backgroundColor",0,16777215),Ip(e.userConfigExtraInfo)||Op(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!Ip(e.transcodingUsers)&&(Ap(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach((function(e,t){Gv(e.uid),Ip(e.x)||Rp(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),Ip(e.y)||Rp(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),Ip(e.width)||Rp(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),Ip(e.height)||Rp(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),Ip(e.zOrder)||Rp(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),Ip(e.alpha)||Rp(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),Ip(e.watermark)||Kv(e.watermark,"watermark"),Ip(e.backgroundImage)||Kv(e.backgroundImage,"backgroundImage"),e.images&&!Ip(e.images)&&(Ap(e.images,"config.images"),e.images.forEach((function(e,t){Kv(e,"images[".concat(t,"]"))})))}(n),r=[],n.images&&r.push.apply(r,n.images.map((function(e){return yR(yR(yR({},zv),e),{},{zOrder:255})}))),n.backgroundImage&&(r.push(yR(yR(yR({},zv),n.backgroundImage),{},{zOrder:0})),delete n.backgroundImage),n.watermark&&(r.push(yR(yR(yR({},zv),n.watermark),{},{zOrder:255})),delete n.watermark),n.images=r,n.transcodingUsers&&(n.userConfigs=n.transcodingUsers.map((function(e){return yR({},e)})),n.userCount=n.transcodingUsers.length,delete n.transcodingUsers),i=(n.userConfigs||[]).map((function(e){return"number"==typeof e.uid?Vl.resolve(e.uid):tR(e.uid,s.spec,s.cancelToken.token,s.httpRetryConfig)})),e.next=7,Vl.all(i);case 7:if(e.sent.forEach((function(e,t){n.userConfigs&&n.userConfigs[t]&&(n.userConfigs[t].uid=e)})),this.transcodingConfig=n,!this.connection){e.next=22;break}return e.prev=10,e.next=13,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(jv(o=this.streamingTasks).call(o)).map((function(e){return e.taskId})).join("#")});case 13:a=e.sent,tv.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(a.code,", config:"),JSON.stringify(this.transcodingConfig)),e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(10),e.t0.data&&e.t0.data.retry){e.next=21;break}throw e.t0;case 21:e.t0.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((function(t){tv.warning("[".concat(s.spec.clientId,"] live streaming receive error"),e.t0.toString(),"try to republish",t.url),s.startLiveStreamingTask(t.url,t.mode,e.t0).then((function(){tv.debug("[".concat(s.spec.clientId,"] live streaming republish ").concat(t.url," success"))})).catch((function(e){tv.error("[".concat(s.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),s.onLiveStreamError&&s.onLiveStreamError(t.url,e)}))}));case 22:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(t){return e.apply(this,arguments)}}(),n.setInjectStreamConfig=function(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t},n.startLiveStreamingTask=function(){var e=d(c().mark((function e(t,n,r){var i,o,a,s,u,d,l=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.from(jv(i=this.streamingTasks).call(i)).find((function(e){return e.mode===Dv.INJECT}))||n!==Dv.INJECT){e.next=2;break}return e.abrupt("return",new Fv(ql.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw());case 2:if(this.transcodingConfig||n!==Dv.TRANSCODE){e.next=4;break}throw new Fv(ql.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");case 4:return o={command:"PublishStream",ts:Date.now(),url:t,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0},tv.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(t,", mode: ").concat(n)),e.next=8,this.taskMutex.lock();case 8:if(a=e.sent,this.connection||!r){e.next=11;break}return e.abrupt("return",void a());case 11:if(!this.streamingTasks.get(t)||r){e.next=13;break}return e.abrupt("return",(a(),new Fv(ql.LIVE_STREAMING_TASK_CONFLICT).throw()));case 13:if(e.prev=13,e.t0=this.connection,e.t0){e.next=19;break}return e.next=18,this.connect(n);case 18:this.connection=e.sent;case 19:e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(13),a(),e.t1;case 24:e.t2=n,e.next=e.t2===Dv.TRANSCODE?27:e.t2===Dv.RAW?29:e.t2===Dv.INJECT?30:31;break;case 27:return o.transcodingConfig=yR({},this.transcodingConfig),e.abrupt("break",31);case 29:return e.abrupt("break",31);case 30:o={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:t,loopTimes:this.injectLoopTimes};case 31:return this.uapResponse&&this.uapResponse.vid&&(o.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,s=this.lastTaskId++,e.prev=33,u=new Vl((function(e,n){Ef(l.retryTimeout).then((function(){if(r)return n(r);var e=l.statusError.get(t);return e?(l.statusError.delete(t),n(e)):void 0}))})),e.next=37,Vl.race([this.connection.request("request",{clientRequest:o},!0,{url:t,command:"PublishStream",workerType:n===Dv.TRANSCODE?1:2,requestByUser:!r,tid:s.toString()}),u]);case 37:d=e.sent,this.isStartingStreamingTask=!1,tv.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(d.code)),this.streamingTasks.set(t,{clientRequest:o,mode:n,url:t,taskId:s}),a(),e.next=56;break;case 41:if(e.prev=41,e.t3=e.catch(33),a(),this.isStartingStreamingTask=!1,e.t3.data&&e.t3.data.retry&&!r){e.next=45;break}throw e.t3;case 45:if(!e.t3.data.changeAddress){e.next=52;break}return this.connection.tryNextAddress(),e.next=49,this.startLiveStreamingTask(t,n,e.t3);case 49:e.t4=e.sent,e.next=55;break;case 52:return e.next=54,this.startLiveStreamingTask(t,n,e.t3);case 54:e.t4=e.sent;case 55:return e.abrupt("return",e.t4);case 56:case"end":return e.stop()}}),e,this,[[13,21],[33,41]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n.stopLiveStreamingTask=function(e){var t=this;return new Vl((function(n,r){var i=t.streamingTasks.get(e);if(!i||!t.connection)return new Fv(ql.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var o=i.mode;i.abortTask=function(){tv.debug("[".concat(t.spec.clientId,"] stop live streaming success(worker exception)")),t.streamingTasks.delete(e),n()},t.connection.request("request",{clientRequest:{command:o===Dv.INJECT?"UninjectStream":"UnpublishStream",url:i.url}},!1,{url:e,command:"UnPublishStream",workerType:o===Dv.TRANSCODE?1:2,requestByUser:!0,tid:(t.lastTaskId++).toString()}).then((function(r){tv.debug("[".concat(t.spec.clientId,"] stop live streaming success, code: ").concat(r.code)),t.streamingTasks.delete(e),0===t.streamingTasks.size&&o!==Dv.INJECT&&(t.connection&&t.connection.close(),t.connection=void 0),n(),o===Dv.INJECT&&t.onInjectStatusChange&&t.onInjectStatusChange(xv.INJECT_STREAM_STATUS_STOP_SUCCESS,t.spec.uid,e)})).catch(r)}))},n.controlInjectStream=function(){var e=d(c().mark((function e(t,n,r,i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=this.streamingTasks.get(t))&&this.connection&&o.mode===Dv.INJECT){e.next=3;break}throw new Fv(ql.INVALID_OPERATION,"can not find inject stream task to control");case 3:return e.next=5,this.connection.request("request",{clientRequest:{command:"ControlStream",url:t,control:n,audioVolume:r,position:i}});case 5:return e.abrupt("return",e.sent.serverResponse);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),n.resetAllTask=function(){var e,t=this,n=Array.from(jv(e=this.streamingTasks).call(e));this.terminate();for(var r=function(){var e=o[i];t.startLiveStreamingTask(e.url,e.mode).catch((function(n){t.onLiveStreamError&&t.onLiveStreamError(e.url,n)}))},i=0,o=n;i<o.length;i++)r()},n.terminate=function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=C_.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0},n.connect=function(){var e=d(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.connection){e.next=2;break}throw new Fv(ql.UNEXPECTED_ERROR,"live streaming connection has already connected");case 2:return e.next=4,$p(this,qv.REQUEST_WORKER_MANAGER_LIST,t);case 4:return n=e.sent,this.uapResponse=n,this.connection=new gR(n.workerToken,this.spec,this.wsRetryConfig,t),this.connection.on(Yv.WARNING,(function(e,t){return r.onLiveStreamWarning&&r.onLiveStreamWarning(t,e)})),this.connection.on(Yv.PUBLISH_STREAM_STATUS,(function(e){return r.handlePublishStreamServer(e)})),this.connection.on(Yv.INJECT_STREAM_STATUS,(function(e){return r.handleInjectStreamServerStatus(e)})),this.connection.on(Yv.REQUEST_NEW_ADDRESS,(function(e,n){if(!r.connection)return n(new Fv(ql.UNEXPECTED_ERROR,"can not get new live streaming address list"));$p(r,qv.REQUEST_WORKER_MANAGER_LIST,t).then((function(t){r.uapResponse=t,e(t.addressList)})).catch(n)})),e.next=13,this.connection.init(n.addressList);case 13:return e.abrupt("return",this.connection);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.handlePublishStreamServer=function(e){var t=this,n=e.serverStatus&&e.serverStatus.url||"empty_url",r=this.streamingTasks.get(n),i=e.reason;switch(e.code){case Jv.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Jv.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Jv.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Jv.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var o=new Fv(ql.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(r)return tv.error(o.toString()),this.onLiveStreamError&&this.onLiveStreamError(n,o);if(!this.isStartingStreamingTask)return;this.statusError.set(n,o);case Jv.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:var a=new Fv(ql.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,i);return this.onLiveStreamWarning&&this.onLiveStreamWarning(n,a);case Jv.LIVE_STREAM_RESPONSE_WORKER_LOST:case Jv.LIVE_STREAM_RESPONSE_WORKER_QUIT:var s;if(!this.connection)return;this.connection.tryNextAddress();for(var c=Array.from(jv(s=this.streamingTasks).call(s)),u=function(){var n=l[d];n.abortTask?n.abortTask():(tv.warning("[".concat(t.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),t.startLiveStreamingTask(n.url,n.mode,new Fv(ql.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((function(){tv.debug("[".concat(t.spec.clientId,"] republish live stream success"),n.url)})).catch((function(e){tv.error(e.toString()),t.onLiveStreamError&&t.onLiveStreamError(n.url,e)})))},d=0,l=c;d<l.length;d++)u();return}},n.handleInjectStreamServerStatus=function(e){var t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(xv.INJECT_STREAM_STATUS_START_SUCCESS,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(xv.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(xv.INJECT_STREAM_STATUS_START_UNAUTHORIZED,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(xv.INJECT_STREAM_STATUS_BROKEN,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(xv.INJECT_STREAM_STATUS_START_TIMEOUT,t,n),void this.streamingTasks.delete(n);default:return void tv.debug("inject stream server status",e)}},n.hasUrl=function(e){return this.streamingTasks.has(e)},t}(Kp),SR=function(){function e(){uc(this,"destChannelMediaInfos",new Map),uc(this,"srcChannelMediaInfo",void 0)}var t=e.prototype;return t.setSrcChannelInfo=function(e){um(e),this.srcChannelMediaInfo=e},t.addDestChannelInfo=function(e){um(e),this.destChannelMediaInfos.set(e.channelName,e)},t.removeDestChannelInfo=function(e){Wv(e),this.destChannelMediaInfos.delete(e)},t.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},t.getDestChannelMediaInfo=function(){return this.destChannelMediaInfos},e}();function TR(e){if(!(e instanceof SR))return new Fv(ql.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();var t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new Fv(ql.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new Fv(ql.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}var wR=function(e){function t(t,n,r){var i;return uc(l(i=e.call(this)||this),"ws",void 0),uc(l(i),"requestId",1),uc(l(i),"heartBeatTimer",void 0),uc(l(i),"joinInfo",void 0),uc(l(i),"clientId",void 0),uc(l(i),"onOpen",(function(){i.emit("open"),i.startHeartBeatCheck()})),uc(l(i),"onClose",(function(e){i.emit("close"),i.dispose()})),uc(l(i),"onMessage",(function(e){var t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(i.emit("status",t.serverStatus),void i.emit(t.serverStatus.command,t.serverStatus)):void 0;i.emit("req_".concat(t.requestId),t)})),i.joinInfo=t,i.clientId=n,i.ws=new eg("cross-channel-".concat(i.clientId),r),i.ws.on(Pv.RECONNECTING,(function(){i.ws.reconnectMode="retry",i.emit("reconnecting")})),i.ws.on(Pv.CONNECTED,i.onOpen),i.ws.on(Pv.ON_MESSAGE,i.onMessage),i.ws.on(Pv.CLOSED,i.onClose),i}p(t,e);var n=t.prototype;return n.isConnect=function(){return"connected"===this.ws.state},n.sendMessage=function(e){var t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t},n.waitStatus=function(e){var t=this;return new Vl((function(n,r){var i=window.setTimeout((function(){r(new Fv(ql.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);t.once(e,(function(t){window.clearTimeout(i),t.state&&0!==t.state?r(new Fv(ql.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):n(void 0)})),t.once("dispose",(function(){window.clearTimeout(i),r(new Fv(ql.WS_ABORT))}))}))},n.request=function(){var e=d(c().mark((function e(t){var n,r,i,o,a=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("closed"!==this.ws.state){e.next=2;break}throw new Fv(ql.WS_DISCONNECT);case 2:if(n=function(){return new Vl((function(e,t){a.ws.once(Pv.CLOSED,(function(){return t(new Fv(ql.WS_ABORT))})),a.ws.once(Pv.CONNECTED,e)}))},e.t0="connected"!==this.ws.state,!e.t0){e.next=7;break}return e.next=7,n();case 7:return r=this.sendMessage(t),i=new Vl((function(e,t){var n=function(){t(new Fv(ql.WS_ABORT))};a.ws.once(Pv.RECONNECTING,n),a.ws.once(Pv.CLOSED,n),a.once("req_".concat(r),e),Ef(3e3).then((function(){a.removeAllListeners("req_".concat(r)),a.ws.off(Pv.RECONNECTING,n),a.ws.off(Pv.CLOSED,n),t(new Fv(ql.TIMEOUT,"cross channel ws request timeout"))}))})),e.next=11,i;case 11:if((o=e.sent)&&200===o.code){e.next=14;break}throw new Fv(ql.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(o)));case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.connect=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ws.removeAllListeners(Pv.REQUEST_NEW_URLS),this.ws.on(Pv.REQUEST_NEW_URLS,(function(e){e(t)})),e.next=4,this.ws.init(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.dispose=function(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()},n.sendPing=function(e){var t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t},n.startHeartBeatCheck=function(){var e=this;this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((function(){e.sendPing({command:"ping",appId:e.joinInfo.appId,cname:e.joinInfo.cname,uid:e.joinInfo.uid.toString(),sid:e.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)},n.clearHeartBeatCheck=function(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0},t}(Kp),RR=function(e){function t(t,n,r,i,o){var a;return uc(l(a=e.call(this)||this),"joinInfo",void 0),uc(l(a),"sid",void 0),uc(l(a),"clientId",void 0),uc(l(a),"cancelToken",C_.CancelToken.source()),uc(l(a),"workerToken",void 0),uc(l(a),"requestId",0),uc(l(a),"signal",void 0),uc(l(a),"prevChannelMediaConfig",void 0),uc(l(a),"httpRetryConfig",void 0),uc(l(a),"_resolution",void 0),uc(l(a),"_state",$v.RELAY_STATE_IDLE),uc(l(a),"errorCode",em.RELAY_OK),uc(l(a),"onStatus",(function(e){tv.debug("[".concat(a.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&a.emit("event",Zv.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&a.emit("event",Zv.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(a.errorCode=em.SRC_TOKEN_EXPIRED,a.state=$v.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(a.errorCode=em.DEST_TOKEN_EXPIRED,a.state=$v.RELAY_STATE_FAILURE))})),uc(l(a),"onReconnect",d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tv.debug("[".concat(a.clientId,"] ChannelMediaSocket disconnect, reconnecting")),a.emit("event",Zv.NETWORK_DISCONNECTED),a.state=$v.RELAY_STATE_IDLE,a.prevChannelMediaConfig&&a.sendStartRelayMessage(a.prevChannelMediaConfig).catch((function(e){a.state!==$v.RELAY_STATE_IDLE&&(tv.error("auto restart channel media relay failed",e.toString()),a.errorCode=em.SERVER_CONNECTION_LOST,a.state=$v.RELAY_STATE_FAILURE)}));case 1:case"end":return e.stop()}}),e)})))),a.joinInfo=t,a.clientId=n,a.sid=bf(),a.signal=new wR(a.joinInfo,a.clientId,r),a.httpRetryConfig=i,a._resolution=o,a}p(t,e);var n=t.prototype;return n.startChannelMediaRelay=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state===$v.RELAY_STATE_IDLE){e.next=2;break}throw new Fv(ql.INVALID_OPERATION);case 2:return this.state=$v.RELAY_STATE_CONNECTING,e.next=5,this.connect();case 5:return tv.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success")),e.prev=6,e.next=9,this.sendStartRelayMessage(t);case 9:e.next=20;break;case 11:if(e.prev=11,e.t0=e.catch(6),!e.t0.data||!e.t0.data.serverResponse||"SetSourceChannel"!==e.t0.data.serverResponse.command){e.next=15;break}throw new Fv(ql.CROSS_CHANNEL_FAILED_JOIN_SRC);case 15:if(!e.t0.data||!e.t0.data.serverResponse||"SetDestChannelStatus"!==e.t0.serverResponse.command){e.next=17;break}throw new Fv(ql.CROSS_CHANNEL_FAILED_JOIN_DEST);case 17:if(!e.t0.data||!e.t0.data.serverResponse||"StartPacketTransfer"!==e.t0.serverResponse.command){e.next=19;break}throw new Fv(ql.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);case 19:throw e.t0;case 20:this.prevChannelMediaConfig=t;case 21:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),n.updateChannelMediaRelay=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state===$v.RELAY_STATE_RUNNING){e.next=2;break}throw new Fv(ql.INVALID_OPERATION);case 2:return e.next=4,this.sendUpdateMessage(t);case 4:this.prevChannelMediaConfig=t;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setVideoProfile=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._resolution=t,this.state===$v.RELAY_STATE_RUNNING){e.next=2;break}throw new Fv(ql.INVALID_OPERATION);case 2:return n=this.genMessage(Qv.SetVideoProfile),e.next=5,this.signal.request(n);case 5:tv.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.stopChannelMediaRelay=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendStopRelayMessage();case 2:tv.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=$v.RELAY_STATE_IDLE,this.dispose();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.dispose=function(){tv.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=C_.CancelToken.source(),this.state=$v.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0},n.connect=function(){var e=d(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uR(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);case 2:return t=e.sent,this.workerToken=t.workerToken,e.next=6,this.signal.connect(t.addressList);case 6:this.emit("event",Zv.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.sendStartRelayMessage=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.genMessage(Qv.StopPacketTransfer),e.next=3,this.signal.request(n);case 3:return e.next=5,this.signal.waitStatus("Normal Quit");case 5:return tv.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success")),r=this.genMessage(Qv.SetSdkProfile,t),e.next=9,this.signal.request(r);case 9:return tv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success")),i=this.genMessage(Qv.SetSourceChannel,t),e.next=13,this.signal.request(i);case 13:return e.next=15,this.signal.waitStatus("SetSourceChannelStatus");case 15:return this.emit("event",Zv.PACKET_JOINED_SRC_CHANNEL),tv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success")),o=this.genMessage(Qv.SetSourceUserId,t),e.next=20,this.signal.request(o);case 20:return tv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success")),a=this.genMessage(Qv.SetDestChannel,t),e.next=24,this.signal.request(a);case 24:return e.next=26,this.signal.waitStatus("SetDestChannelStatus");case 26:return this.emit("event",Zv.PACKET_JOINED_DEST_CHANNEL),tv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success")),s=this.genMessage(Qv.StartPacketTransfer,t),e.next=31,this.signal.request(s);case 31:this.emit("event",Zv.PACKET_SENT_TO_DEST_CHANNEL),this.state=$v.RELAY_STATE_RUNNING,tv.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution);case 35:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.sendUpdateMessage=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.genMessage(Qv.UpdateDestChannel,t),e.next=3,this.signal.request(n);case 3:this.emit("event",Zv.PACKET_UPDATE_DEST_CHANNEL),tv.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.sendStopRelayMessage=function(){var e=d(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.genMessage(Qv.StopPacketTransfer),e.next=3,this.signal.request(t);case 3:tv.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.genMessage=function(e,t){var n=this,r=[],i=[],o=[];this.requestId+=1;var a={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:U_,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.19.3"===a.sdkVersion&&(a.sdkVersion="0.0.1");var s=null,c=null;switch(e){case Qv.SetSdkProfile:return a.clientRequest={command:"SetSdkProfile",type:"multi_channel"},a;case Qv.SetSourceChannel:if(!(c=t&&t.getSrcChannelMediaInfo()))throw new Fv(ql.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceChannel",uid:"0",channelName:c.channelName,token:c.token||this.joinInfo.appId},a;case Qv.SetSourceUserId:if(!(c=t&&t.getSrcChannelMediaInfo()))throw new Fv(ql.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceUserId",uid:c.uid+""},a;case Qv.SetDestChannel:if(!(s=t&&t.getDestChannelMediaInfo()))throw new Fv(ql.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.joinInfo.appId)})),a.clientRequest={command:"SetDestChannel",channelName:r,uid:i,token:o},a;case Qv.StartPacketTransfer:return a.clientRequest={command:"StartPacketTransfer"},a;case Qv.Reconnect:return a.clientRequest={command:"Reconnect"},a;case Qv.StopPacketTransfer:return a.clientRequest={command:"StopPacketTransfer"},a;case Qv.UpdateDestChannel:if(!(s=t&&t.getDestChannelMediaInfo()))throw new Fv(ql.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.joinInfo.appId)})),a.clientRequest={command:"UpdateDestChannel",channelName:r,uid:i,token:o},a;case Qv.SetVideoProfile:a.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return a},s(t,[{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(e!==$v.RELAY_STATE_FAILURE&&(this.errorCode=em.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}}]),t}(Kp),CR=function(){function e(e,t){uc(this,"uid",void 0),uc(this,"_uintid",void 0),uc(this,"_trust_in_room_",!0),uc(this,"_trust_audio_enabled_state_",!0),uc(this,"_trust_video_enabled_state_",!0),uc(this,"_trust_audio_mute_state_",!0),uc(this,"_trust_video_mute_state_",!0),uc(this,"_audio_muted_",!1),uc(this,"_video_muted_",!1),uc(this,"_audio_enabled_",!0),uc(this,"_video_enabled_",!0),uc(this,"_audio_added_",!1),uc(this,"_video_added_",!1),uc(this,"_trust_video_stream_added_state_",!0),uc(this,"_trust_audio_stream_added_state_",!0),uc(this,"_audioTrack",void 0),uc(this,"_videoTrack",void 0),uc(this,"_dataChannels",[]),uc(this,"_audioSSRC",void 0),uc(this,"_videoSSRC",void 0),uc(this,"_audioOrtc",void 0),uc(this,"_videoOrtc",void 0),uc(this,"_cname",void 0),uc(this,"_rtxSsrcId",void 0),this.uid=e,this._uintid=t}return s(e,[{key:"hasVideo",get:function(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}},{key:"hasAudio",get:function(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}},{key:"audioTrack",get:function(){if(this.hasAudio)return this._audioTrack}},{key:"videoTrack",get:function(){if(this.hasVideo)return this._videoTrack}},{key:"dataChannels",get:function(){return this._dataChannels}}]),e}();Yn({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=Vd.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}}),Yn({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=Vd.f(this),n=Ad(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var OR=se(jl),AR=ji.f("asyncIterator"),IR=se(AR);function kR(e,t){this.v=e,this.k=t}function NR(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof kR;OR.resolve(s?a.v:a).then((function(n){if(s){var c="return"===t?"return":"next";if(!a.k||n.done)return r(c,n);n=e[c](n).value}i(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new OR((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function PR(e){return function(){return new NR(e.apply(this,arguments))}}function DR(e){return new kR(e,0)}function xR(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new kR(r=new OR((function(n){n(e[t](r))})),1)}}return t[void 0!==qs&&ac||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}NR.prototype["function"==typeof qs&&IR||"@@asyncIterator"]=function(){return this},NR.prototype.next=function(e){return this._invoke("next",e)},NR.prototype.throw=function(e){return this._invoke("throw",e)},NR.prototype.return=function(e){return this._invoke("return",e)};var LR=se(AR),MR={exports:{}};!function(e,t){e.exports=function(){var e={8:function(e,t,n){n.r(t),n.d(t,{Parser:function(){return R},Printer:function(){return k},parse:function(){return x},print:function(){return L}});var r,o="\n",a="".concat("\r").concat(o),s=" ";function c(e){return e>="0"&&e<="9"}function u(e){return e>="!"&&e<="~"}function d(e){return u(e)||e>="\x80"&&e<="\xff"}function f(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function h(e){return e>="1"&&e<="9"}function _(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function v(e){return"d"===e||"h"===e||"m"===e||"s"===e}function m(e){return e>"\x01"&&e<"\t"||e>"\v"&&e<"\f"||e>"\x0e"&&e<"\xff"}function g(e){return _(e)||c(e)||"+"===e||"/"===e}function E(e){return c(e)||_(e)||"+"===e||"/"===e||"-"===e||"_"===e}function y(e){return _(e)||c(e)||"+"===e||"/"===e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(r||(r={}));var w=function(){function e(){}var t=e.prototype;return t.consumeText=function(e,t){for(var n=t;n<e.length;){var r=e[n];if("\0"===r||"\r"===r||r===o)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n},t.consumeUnicastAddress=function(e,t,n){return this.consumeTill(e,t,s)},t.consumeOneOrMore=function(e,t,n){for(var r=t;n(e[r]);)r++;if(r-t==0)throw new Error("Invalid rule at ".concat(t,"."));return r},t.consumeSpace=function(e,t){if(e[t]===s)return t+1;throw new Error("Invalid space at ".concat(t,"."))},t.consumeIP4Address=function(e,t){for(var n=t,r=0;r<4;r++)if(n=this.consumeDecimalUChar(e,n),3!==r){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n},t.consumeDecimalUChar=function(e,t){for(var n=t,r=0;r<3&&c(e[n]);r++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");var i=parseInt(e.slice(t,n));if(i>=0&&i<=255)return n;throw new Error("Invalid decimal uchar")},t.consumeIP6Address=function(e,t){var n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n)):n},t.consumeHexpart=function(e,t){var n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}if(":"===e[n=this.consumeHexseq(e,n)]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}return n},t.consumeHexseq=function(e,t){for(var n=t;":"===e[n=this.consumeHex4(e,n)]&&":"!==e[n+1];)n+=1;return n},t.consumeHex4=function(e,t){for(var n,r=0;r<4;r++)if(!((n=e[t+r])>="0"&&n<="9"||n>="a"&&n<="f"||n>="A"&&n<="F")){if(0===r)throw new Error("Invalid hex 4");break}return t+r},t.consumeFQDN=function(e,t){for(var n=t;c(e[n])||_(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n},t.consumeExtnAddr=function(e,t){return this.consumeOneOrMore(e,t,d)},t.consumeMulticastAddress=function(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(n){return this.consumeExtnAddr(e,t)}}},t.consumeIP6MulticastAddress=function(e,t){var n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n},t.consumeIP4MulticastAddress=function(e,t){var n=t+3,r=e.slice(t,n),i=parseInt(r);if(i<224||i>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(var o=0;o<3;o++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),"/"===e[n=this.consumeTTL(e,n)]&&(n=this.consumeInteger(e,n)),n},t.consumeInteger=function(e,t){if(!h(e[t]))throw new Error("Invalid integer.");for(t+=1;c(e[t]);)t+=1;return t},t.consumeTTL=function(e,t){if("0"===e[t])return t+1;if(!h(e[t]))throw new Error("Invalid TTL.");t+=1;for(var n=0;n<2&&c(e[t]);n++)t+=1;return t},t.consumeToken=function(e,t){return this.consumeOneOrMore(e,t,f)},t.consumeTime=function(e,t){var n=t;if("0"===e[n])return n+1;for(h(e[n])&&(n+=1);c(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n},t.consumeAddress=function(e,t){return this.consumeTill(e,t,s)},t.consumeTypedTime=function(e,t){var n=t;return v(e[n=this.consumeOneOrMore(e,n,c)])?n+1:n},t.consumeRepeatInterval=function(e,t){if(!h(e[t]))throw new Error("Invalid repeat interval");for(t+=1;c(e[t]);)t+=1;return v(e[t])&&(t+=1),t},t.consumePort=function(e,t){return this.consumeOneOrMore(e,t,c)},t.consume=function(e,t,n){for(var r=0;r<n.length;r++){if(t+r>=e.length)throw new Error("consume exceeding value length");if(e[t+r]!==n[r])throw new Error("consume ".concat(n," failed at ").concat(r))}return t+n.length},t.consumeTill=function(e,t,n){for(var r=t;r<e.length&&("string"!=typeof n||e[r]!==n)&&("function"!=typeof n||!n(e[r]));)r++;return r},e}(),R=function(e){function t(){var t;return T(l(t=e.call(this)||this),"records",[]),T(l(t),"currentLine",0),t}p(t,e);var n=t.prototype;return n.parse=function(e){var t=this.probeEOL(e);this.records=e.split(t).filter((function(e){return!!e.trim()})).map(this.parseLine),this.currentLine=0;var n=this.parseVersion(),r=this.parseOrigin(),i=this.parseSessionName(),o=this.parseInformation(),a=this.parseUri(),s=this.parseEmail(),c=this.parsePhone(),u=this.parseConnection(),d=this.parseBandWidth(),l=this.parseTimeFields(),p=this.parseKey(),f=this.parseSessionAttribute(),h=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:r,sessionName:i,information:o,uri:a,emails:s,phones:c,connection:u,bandwidths:d,timeFields:l,key:p,attributes:f,mediaDescriptions:h}},n.getCurrentRecord=function(){var e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e},n.probeEOL=function(e){for(var t=0;t<e.length;t++)if(e[t]===o)return"\r"===e[t-1]?a:o;throw new Error("Invalid newline character.")},n.parseLine=function(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");var n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}},n.parseSessionAttribute=function(){for(var e=new O;this.currentLine<this.records.length;){var t=this.getCurrentRecord();if(t.type!==r.ATTRIBUTE)break;var n={attField:this.extractOneOrMore(t,(function(e){return f(e)&&":"!==e})),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,m)),e.parse(n),this.currentLine++}return e.digest()},n.parseMediaAttributes=function(e){for(var t=new A(e);this.currentLine<this.records.length;){var n=this.getCurrentRecord();if(n.type!==r.ATTRIBUTE)break;var i={attField:this.extractOneOrMore(n,(function(e){return f(e)&&":"!==e})),_cur:0};":"===n.value[n.cur]&&(n.cur+=1,i.attValue=this.extractOneOrMore(n,m)),t.parse(i),this.currentLine++}return t.digest()},n.parseKey=function(){var e=this.getCurrentRecord();if(e.type===r.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}},n.parseZone=function(){var e=this.getCurrentRecord();if(e.type===r.ZONE_ADJUSTMENTS){for(var t=[];;)try{var n=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);var i=!1;"-"===e.value[e.cur]&&(i=!0,e.cur+=1);var o=this.extract(e,this.consumeTypedTime);t.push({time:n,typedTime:o,back:i})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]},n.parseRepeat=function(){for(var e=[];;){var t=this.getCurrentRecord();if(t.type!==r.REPEAT)break;var n=this.extract(t,this.consumeRepeatInterval),i=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:i}),this.currentLine++}return e},n.parseTypedTime=function(e){for(var t=[];;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t},n.parseTime=function(){var e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);var n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}},n.parseBandWidth=function(){for(var e=[];this.currentLine<this.records.length;){var t=this.getCurrentRecord();if(t.type!==r.BANDWIDTH)break;var n=this.extractOneOrMore(t,f);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;var i=this.extractOneOrMore(t,c);e.push({bwtype:n,bandwidth:i}),this.currentLine++}return e},n.parseVersion=function(){var e=this.getCurrentRecord();if(e.type!==r.VERSION)throw new Error("first sdp record must be version");var t=e.value.slice(0,this.consumeOneOrMore(e.value,0,c));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t},n.parseOrigin=function(){var e=this.getCurrentRecord();if(e.type!==r.ORIGIN)throw new Error("second line of sdp must be origin");var t=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);var n=this.extractOneOrMore(e,c);this.consumeSpaceForRecord(e);var i=this.extractOneOrMore(e,c);this.consumeSpaceForRecord(e);var o=this.extractOneOrMore(e,f);this.consumeSpaceForRecord(e);var a=this.extractOneOrMore(e,f);this.consumeSpaceForRecord(e);var s=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:i,nettype:o,addrtype:a,unicastAddress:s}},n.parseSessionName=function(){var e=this.getCurrentRecord();if(e.type===r.SESSION_NAME){var t=this.extract(e,this.consumeText);return this.currentLine++,t}},n.parseInformation=function(){var e=this.getCurrentRecord();if(e.type===r.INFORMATION){var t=this.extract(e,this.consumeText);return this.currentLine++,t}},n.parseUri=function(){var e=this.getCurrentRecord();if(e.type===r.URI)return this.currentLine++,e.value},n.parseEmail=function(){for(var e=[];;){var t=this.getCurrentRecord();if(t.type!==r.EMAIL)break;e.push(t.value),this.currentLine++}return e},n.parsePhone=function(){for(var e=[];;){var t=this.getCurrentRecord();if(t.type!==r.PHONE)break;e.push(t.value),this.currentLine++}return e},n.parseConnection=function(){var e=this.getCurrentRecord();if(e.type===r.CONNECTION){var t=this.extractOneOrMore(e,f);this.consumeSpaceForRecord(e);var n=this.extractOneOrMore(e,f);this.consumeSpaceForRecord(e);var i=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:i}}},n.parseMedia=function(){var e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);var n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);var r=[];for(r.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,r.push(this.extract(e,this.consumeToken));if(0===r.length)throw new Error("Invalid proto");var i=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:r,fmts:i}},n.parseTimeFields=function(){for(var e=[];this.getCurrentRecord().type===r.TIME;){var t=this.parseTime(),n=this.parseRepeat(),i=this.parseZone();e.push({time:t,repeats:n,zones:i})}return e},n.parseMediaDescription=function(){for(var e=[];this.currentLine<this.records.length&&this.getCurrentRecord().type===r.MEDIA;){var t=this.parseMedia(),n=this.parseInformation(),i=this.parseConnections(),o=this.parseBandWidth(),a=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:i,bandwidths:o,key:a,attributes:s})}return e},n.parseConnections=function(){for(var e=[];this.currentLine<this.records.length&&this.getCurrentRecord().type===r.CONNECTION;)e.push(this.parseConnection());return e},n.parseFmt=function(e){for(var t=[];;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t},n.extract=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t.call.apply(t,[this,e.value,e.cur].concat(r)),a=e.value.slice(e.cur,o);return e.cur=o,a},n.extractOneOrMore=function(e,t){var n=this.consumeOneOrMore(e.value,e.cur,t),r=e.value.slice(e.cur,n);return e.cur=n,r},n.consumeSpaceForRecord=function(e){if(e.value[e.cur]!==s)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1},t}(w),C=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return T(l(t=e.call.apply(e,[this].concat(r))||this),"attributes",void 0),T(l(t),"digested",!1),t}p(t,e);var n=t.prototype;return n.extractOneOrMore=function(e,t,n){var r=this.consumeOneOrMore(e.attValue,e._cur,t),i=e.attValue.slice(e._cur,r),o=n||[],a=o[0],s=o[1];if("number"==typeof a&&i.length<a)throw new Error("error in length, should be more or equal than ".concat(a," characters."));if("number"==typeof s&&i.length>s)throw new Error("error in length, should be less or equal than ".concat(s," characters."));return e._cur=r,i},n.consumeAttributeSpace=function(e){if(e.attValue[e._cur]!==s)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1},n.extract=function(e,t){if(!e.attValue)throw new Error("Nothing to extract from attValue.");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t.call.apply(t,[this,e.attValue,e._cur].concat(r)),a=e.attValue.slice(e._cur,o);return e._cur=o,a},n.atEnd=function(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length},n.peekChar=function(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]},n.peek=function(e,t){if(!e.attValue)throw new Error;for(var n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0},n.parseIceUfrag=function(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,g,[4,256])},n.parseIcePwd=function(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,g,[22,256])},n.parseIceOptions=function(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");for(var t=[];!this.atEnd(e);){t.push(this.extractOneOrMore(e,g));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t},n.parseFingerprint=function(e){var t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);var n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})},n.parseExtmap=function(e){var t,n=this.extractOneOrMore(e,c);"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),t=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeTill,s),i=S(S({entry:parseInt(n,10)},t&&{direction:t}),{},{extensionName:r});this.peekChar(e)===s&&(this.consumeAttributeSpace(e),i.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(i)},n.parseSetup=function(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");var t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t},t}(w),O=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return T(l(t=e.call.apply(e,[this].concat(r))||this),"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]}),t}p(t,e);var n=t.prototype;return n.parse=function(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")},n.digest=function(){return this.digested=!0,this.attributes},n.parseGroup=function(e){for(var t=this.extract(e,this.consumeToken),n=[];!this.atEnd(e)&&this.peekChar(e)===s;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})},n.parseIceLite=function(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0},n.parseTlsId=function(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,E)},n.parseIdentity=function(e){for(var t=this.extractOneOrMore(e,y),n=[];!this.atEnd(e)&&this.peekChar(e)===s;){this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");var i=this.extractOneOrMore(e,(function(e){return e!==s&&m(e)}));n.push({name:r,value:i})}this.attributes.identities.push({assertionValue:t,extensions:n})},n.parseMsidSemantic=function(e){this.peekChar(e)===s&&this.consumeAttributeSpace(e);for(var t={semantic:this.extract(e,this.consumeToken),identifierList:[]};;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}var n=this.extract(e,this.consumeTill,s);t.identifierList.push(n)}this.attributes.msidSemantic=t},t}(C),A=function(e){function t(t){var n;return T(l(n=e.call(this)||this),"attributes",void 0),-1!==t.protos.indexOf("RTP")||t.protos.indexOf("rtp"),n.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]},n}p(t,e);var n=t.prototype;return n.parse=function(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")},n.parseCandidate=function(e){var t=this.extractOneOrMore(e,g,[1,32]);this.consumeAttributeSpace(e);var n=this.extractOneOrMore(e,c,[1,5]);this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);var i=this.extractOneOrMore(e,c,[1,10]);this.consumeAttributeSpace(e);var o=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);var a=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);var d={foundation:t,componentId:n,transport:r,priority:i,connectionAddress:o,port:a,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),d.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),d.relPort=this.extract(e,this.consumePort));this.peekChar(e)===s;){this.consumeAttributeSpace(e);var l=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),d.extension[l]=this.extractOneOrMore(e,u)}this.attributes.candidates.push(d)},n.parseRemoteCandidate=function(e){for(var t=[];;){var n=this.extractOneOrMore(e,c,[1,5]);this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);var i=this.extract(e,this.consumePort);t.push({componentId:n,connectionAddress:r,port:i});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)},n.parseEndOfCandidates=function(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0},n.parseRtpmap=function(e){var t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);var n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");var r={encodingName:n,clockRate:this.extractOneOrMore(e,c)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),r.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));var i=this.attributes.payloads.find((function(e){return e.payloadType===parseInt(t,10)}));i?i.rtpMap=r:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:r,rtcpFeedbacks:[]})},n.parsePtime=function(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)},n.parseMaxPtime=function(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)},n.parseDirection=function(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField},n.parseSSRC=function(e){var t,n=this.extractOneOrMore(e,c);this.consumeAttributeSpace(e);var r,i=this.extract(e,this.consumeTill,":");":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),r=this.extract(e,this.consumeTill));var o=this.attributes.ssrcs.find((function(e){return e.ssrcId===parseInt(n,10)}));o?o.attributes[i]=r:this.attributes.ssrcs.push({ssrcId:parseInt(n,10),attributes:(t={},t[i]=r,t)})},n.parseFmtp=function(e){var t=this.extract(e,this.consumeTill,s);this.consumeAttributeSpace(e);var n=this.extract(e,this.consumeTill),r={};n.split(";").forEach((function(e){var t=e.split("="),n=t[0],i=t[1];n=n.trim();var o="string"==typeof i?i.trim():null;"string"==typeof n&&n.length>0&&(r[n]=o)}));var i=this.attributes.payloads.find((function(e){return e.payloadType===parseInt(t,10)}));i?i.fmtp={parameters:r}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:r}})},n.parseFmtParameters=function(e){var t={},n=this.extract(e,this.consumeTill,"=");e._cur++;var r=this.extract(e,this.consumeTill,";");for(t[n]=r;";"===e.attValue[e._cur];){var i=this.extract(e,this.consumeTill,"=");e._cur++;var o=this.extract(e,this.consumeTill,";");t[i]=o}return t},n.parseRtcpFb=function(e){var t;t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,s),this.consumeAttributeSpace(e);var n,r=this.extract(e,this.consumeTill,s);if("trr-int"===r)n={type:r,interval:this.extract(e,this.consumeTill)};else{var i={type:r};this.peekChar(e)===s&&(this.consumeAttributeSpace(e),i.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===s&&(i.additional=this.extract(e,this.consumeTill))),n=i}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(n);else{var o=this.attributes.payloads.find((function(e){return e.payloadType===parseInt(t,10)}));o?o.rtcpFeedbacks.push(n):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[n]})}},n.parseRTCPMux=function(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0},n.parseRTCPMuxOnly=function(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0},n.parseRTCPRsize=function(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0},n.parseRTCP=function(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");var t={port:this.extract(e,this.consumePort)};this.peekChar(e)===s&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,f),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,f),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t},n.parseMsid=function(e){var t={id:this.extractOneOrMore(e,f,[1,64])};this.peekChar(e)===s&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,f,[1,64])),this.attributes.msids.push(t)},n.parseImageAttr=function(e){this.attributes.imageattr.push(e.attValue)},n.parseRid=function(e){var t=this.extractOneOrMore(e,(function(e){return _(e)||c(e)||"_"===e||"-"===e}));this.consumeAttributeSpace(e);var n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===s){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");for(var r=[];;){var i=this.extract(e,this.consumeToken);r.push(i);try{this.extract(e,this.consume,",")}catch(e){break}}n.payloads=r,this.peekChar(e)===s&&this.extract(e,this.consume,s)}for(;;){var o=this.extract(e,this.consumeToken);switch(o){case"depend":var a={type:o,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(a);break;default:var u={type:o};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),u.val=this.extract(e,this.consumeTill,";")),n.params.push(u)}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(n)},n.parseSimulcast=function(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)},n.parseSctpPort=function(e){this.attributes.sctpPort=this.extractOneOrMore(e,c,[1,5])},n.parseMaxMessageSize=function(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,c,[1,void 0])},n.digest=function(){return this.digested=!0,this.attributes},n.parseMid=function(e){this.attributes.mid=this.extract(e,this.consumeToken)},n.parseSSRCGroup=function(e){for(var t=this.extract(e,this.consumeToken),n=[];;)try{this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeInteger);n.push(parseInt(r,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})},t}(C);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(){function e(){I(this,"eol",a)}var t=e.prototype;return t.print=function(e,t){var n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions)},t.printVersion=function(e){return"v=".concat(e).concat(this.eol)},t.printOrigin=function(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)},t.printSessionName=function(e){return e?"s=".concat(e).concat(this.eol):""},t.printInformation=function(e){return e?"i=".concat(e).concat(this.eol):""},t.printUri=function(e){return e?"u=".concat(e).concat(this.eol):""},t.printEmail=function(e){for(var t,n="",r=i(e);!(t=r()).done;){var o=t.value;n+="e=".concat(o).concat(this.eol)}return n},t.printPhone=function(e){for(var t,n="",r=i(e);!(t=r()).done;){var o=t.value;n+="e=".concat(o).concat(this.eol)}return n},t.printConnection=function(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""},t.printBandwidth=function(e){for(var t,n="",r=i(e);!(t=r()).done;){var o=t.value;n+="b=".concat(o.bwtype,":").concat(o.bandwidth).concat(this.eol)}return n},t.printTimeFields=function(e){for(var t,n="",r=i(e);!(t=r()).done;){var o=t.value;n+="t=".concat(o.time.startTime," ").concat(o.time.startTime).concat(this.eol);for(var a,s=i(o.repeats);!(a=s()).done;){var c=a.value;n+="r=".concat(c.repeatInterval," ").concat(c.typedTimes.join(" ")).concat(this.eol)}o.zoneAdjustments&&(n+="z=",n+="z=".concat(o.zoneAdjustments.map((function(e){return"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime)})).join(" ")).concat(this.eol),n+=this.eol)}return n},t.printKey=function(e){return e?"k=".concat(e).concat(this.eol):""},t.printAttributes=function(e){for(var t,n="",r=i(e);!(t=r()).done;){var o=t.value;n+="a=".concat(o.attField).concat(o.attValue?":".concat(o.attValue):"").concat(this.eol)}return n},t.printMediaDescription=function(e){for(var t,n="",r=i(e);!(t=r()).done;){var o=t.value;n+=this.printMedia(o.media),n+=this.printInformation(o.information),n+=this.printConnections(o.connections),n+=this.printBandwidth(o.bandwidths),n+=this.printKey(o.key),n+=this.printMediaAttributes(o)}return n},t.printConnections=function(e){for(var t,n="",r=i(e);!(t=r()).done;){var o=t.value;n+=this.printConnection(o)}return n},t.printMedia=function(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)},t.printSessionAttributes=function(e){return new P(this.eol).print(e)},t.printMediaAttributes=function(e){return new D(this.eol).print(e)},e}(),N=function(){function e(e){I(this,"eol",void 0),this.eol=e}var t=e.prototype;return t.printIceUfrag=function(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)},t.printIcePwd=function(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)},t.printIceOptions=function(e){return void 0===e?"":"a=ice-options:".concat(e.join(s)).concat(this.eol)},t.printFingerprints=function(e){return e.length>0?e.map((function(e){return"a=fingerprint:".concat(e.hashFunction).concat(s).concat(e.fingerprint)})).join(this.eol)+this.eol:""},t.printExtmap=function(e){var t=this;return e.map((function(e){return"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(s).concat(e.extensionName).concat(e.extensionAttributes?"".concat(s).concat(e.extensionAttributes):"").concat(t.eol)})).join("")},t.printSetup=function(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)},t.printUnrecognized=function(e){var t=this;return e.map((function(e){return"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(t.eol)})).join("")},e}(),P=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var n=t.prototype;return n.print=function(e){var t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized)},n.printGroups=function(e){var t=this,n="";return e.length>0&&(n+=e.map((function(e){return"a=group:".concat(e.semantic).concat(e.identificationTag.map((function(e){return"".concat(s).concat(e)})).join("")).concat(t.eol)})).join("")),n},n.printIceLite=function(e){return void 0===e?"":"a=ice-lite"+this.eol},n.printTlsId=function(e){return e?"a=tls-id:".concat(e).concat(this.eol):""},n.printIdentity=function(e){return 0===e.length?"":e.map((function(e){return"a=identity:".concat(e.assertionValue).concat(e.extensions.map((function(e){return"".concat(s).concat(e.name).concat(e.value?"=".concat(e.value):"")})))})).join(this.eol)+this.eol},n.printMsidSemantic=function(e){if(!e)return"";var t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(s,"*"):e.identifierList.length>0&&(t+=e.identifierList.map((function(e){return"".concat(s).concat(e)}))),t+this.eol},t}(N),D=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var n=t.prototype;return n.print=function(e){var t=e.attributes,n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCTPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized)},n.printCandidates=function(e){var t=this;return e.map((function(e){return"a=candidate:".concat(e.foundation).concat(s).concat(e.componentId).concat(s).concat(e.transport).concat(s).concat(e.priority).concat(s).concat(e.connectionAddress).concat(s).concat(e.port).concat(s,"typ").concat(s).concat(e.type).concat(e.relAddr?"".concat(s,"raddr").concat(s).concat(e.relAddr):"").concat(e.relPort?"".concat(s,"rport").concat(s).concat(e.relPort):"").concat(Object.keys(e.extension).map((function(t){return"".concat(s).concat(t).concat(s).concat(e.extension[t])})).join("")).concat(t.eol)})).join("")},n.printRemoteCandidatesList=function(e){var t=this;return e.map((function(e){return"a=remote-candidates:".concat(e.join(s)).concat(t.eol)})).join("")},n.printEndOfCandidates=function(e){return void 0===e?"":"a=end-of-candidates"+this.eol},n.printRTPRelated=function(e){var t=this;if(!e.payloads)return"";var n=e.payloads,r="";r+=e.rtcpFeedbackWildcards.map((function(e){return t.printRTCPFeedback("*",e)})).join("");for(var o,a=function(){var e=o.value;r+=t.printRtpMap(e.payloadType,e.rtpMap),r+=t.printFmtp(e.payloadType,e.fmtp),r+=e.rtcpFeedbacks.map((function(n){return t.printRTCPFeedback(e.payloadType,n)})).join("")},s=i(n);!(o=s()).done;)a();return r},n.printFmtp=function(e,t){if(!t)return"";var n=Object.keys(t.parameters);return 1===n.length&&null===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(s).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(s).concat(Object.keys(t.parameters).map((function(e){return"".concat(e,"=").concat(t.parameters[e])})).join(";")).concat(this.eol)},n.printRtpMap=function(e,t){return t?"a=rtpmap:".concat(e).concat(s).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""},n.printRTCPFeedback=function(e,t){var n="a=rtcp-fb:".concat(e).concat(s),r=t;return"trr-int"===r.type?n+="ttr-int".concat(s).concat(r.interval):(n+="".concat(r.type),r.parameter&&(n+="".concat(s).concat(r.parameter),r.additional&&(n+="".concat(s).concat(r.additional)))),n+this.eol},n.printPtime=function(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)},n.printMaxPtime=function(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)},n.printDirection=function(e){return void 0===e?"":"a=".concat(e).concat(this.eol)},n.printSSRC=function(e){var t=this;return e.map((function(e){return Object.keys(e.attributes).map((function(n){return"a=ssrc:".concat(e.ssrcId.toString(10)).concat(s).concat(n).concat(e.attributes[n]?":".concat(e.attributes[n]):"").concat(t.eol)})).join("")})).join("")},n.printRTCPMux=function(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)},n.printRTCPMuxOnly=function(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)},n.printRTCPRsize=function(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)},n.printRTCP=function(e){if(void 0===e)return"";var t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(s).concat(e.netType)),e.addressType&&(t+="".concat(s).concat(e.addressType)),e.address&&(t+="".concat(s).concat(e.address)),t+this.eol},n.printMSId=function(e){var t=this;return e.map((function(e){return"a=msid:".concat(e.id).concat(e.appdata?"".concat(s).concat(e.appdata):"").concat(t.eol)})).join("")},n.printImageattr=function(e){var t=this;return e.map((function(e){return"a=imageattr:".concat(e).concat(t.eol)})).join("")},n.printRid=function(e){var t=this;return e.map((function(e){var n="a=rid:".concat(e.id).concat(s).concat(e.direction);return e.payloads&&(n+="".concat(s,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(n+="".concat(s).concat(e.params.map((function(e){return"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val)})).join(";"))),n+t.eol})).join("")},n.printSimulcast=function(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)},n.printSCTPPort=function(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)},n.printMaxMessageSize=function(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)},n.printMid=function(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)},n.printSSRCGroups=function(e){var t=this;return e.map((function(e){return"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map((function(e){return"".concat(s).concat(e.toString(10))})).join("")).concat(t.eol)})).join("")},t}(N);function x(e){return(new R).parse(e)}function L(e,t){return(new k).print(e,t)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)}()}(MR);var UR=MR.exports;function jR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jR(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=t.filterRTX,o=t.filterVideoFec,a=t.filterAudioFec,s=t.filterAudioCodec,c=t.filterVideoCodec,u=n.useXR,d=[],l=[],p=[],f=[],h=!1,_=!1;if(UR.parse(e).mediaDescriptions.forEach((function(e){r&&r!==e.attributes.direction||("video"!==e.media.mediaType||h||(l=e.attributes.payloads,f=e.attributes.extmaps,h=!0),"audio"!==e.media.mediaType||_||(d=e.attributes.payloads,p=e.attributes.extmaps,_=!0))})),!f||0===l.length)throw new Error("Cannot get video capabilities from SDP.");if(!p||0===d.length)throw new Error("Cannot get audio capabilities from SDP.");l.forEach((function(e){var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),u&&e.rtcpFeedbacks.push({type:"rrtr"})})),d.forEach((function(e){var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),u&&e.rtcpFeedbacks.push({type:"rrtr"})})),i&&(d=d.filter((function(e){var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),l=l.filter((function(e){var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),o&&(l=l.filter((function(e){var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),a&&(d=d.filter((function(e){var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),s&&(null==s?void 0:s.length)>0&&(d=d.filter((function(e){var t;return Or(s).call(s,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),c&&(null==c?void 0:c.length)>0&&(l=l.filter((function(e){var t;return Or(c).call(c,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")})));var v=W_("UNSUPPORTED_VIDEO_CODEC");return v&&v.length>0&&(l=l.filter((function(e){return!(e.rtpMap&&Or(v).call(v,e.rtpMap.encodingName.toLowerCase()))}))),{audioCodecs:d,videoCodecs:l,audioExtensions:p,videoExtensions:f}}function FR(e){for(var t,n,r,o=UR.parse(e),a=i(o.mediaDescriptions);!(r=a()).done;){var s=r.value;if(!t){var c=s.attributes.iceUfrag,u=s.attributes.icePwd;if(!c||!u)throw new Error("Cannot get iceUfrag or icePwd from SDP.");t={iceUfrag:c,icePwd:u}}if(!n){var d=s.attributes.fingerprints;d.length>0&&(n={fingerprints:d})}}if(!n&&o.attributes.fingerprints.length>0&&(n={fingerprints:o.attributes.fingerprints}),!n||!t)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:t,dtlsParameters:n}}function WR(e,t){var n=[],r=e.attributes.ssrcGroups.filter((function(e){return"FID"===e.semantic})),i=e.attributes.ssrcGroups.find((function(e){return"SIM"===e.semantic})),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach((function(e){var i,o=null===(i=r.find((function(t){return t.ssrcIds[0]===e})))||void 0===i?void 0:i.ssrcIds[1];n.push({ssrcId:e,rtx:t?o:void 0})}));else if(r.length>0){var a=r[0].ssrcIds[0],s=r[0].ssrcIds[1];n.push({ssrcId:a,rtx:t?s:void 0})}else{if(0===o.length)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:o[0].ssrcId})}return n}function GR(e,t){var n,r=e.cname;t&&t.ip&&"number"==typeof t.port?(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],tv.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),tv.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):n=e.iceParameters.candidates.map((function(e){return{foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}}}));var i,o={fingerprints:e.dtlsParameters.fingerprints.map((function(e){return{hashFunction:e.algorithm,fingerprint:e.fingerprint}}))},a={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};switch(e.dtlsParameters.role){case"server":i="passive";break;case"client":i="active";break;case"auto":i="actpass"}return{dtlsParameters:o,iceParameters:a,candidates:n,rtpCapabilities:eC(e.rtpCapabilities),setup:i,cname:r}}function HR(e,t,n){var r=[],i=[];return e.forEach((function(e){var o=e.ssrcId,a=e.rtx,s=yf(8,"track-"),c={ssrcId:o,attributes:VR({label:s,mslabel:n=n||yf(10,""),msid:"".concat(n," ").concat(s)},t&&{cname:t})};if(r.push(c),void 0!==a){var u={ssrcId:a,attributes:VR({label:s,mslabel:n,msid:"".concat(n," ").concat(s)},t&&{cname:t})};r.push(u),i.push({semantic:"FID",ssrcIds:[o,a]})}})),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map((function(e){return e.ssrcId}))}),{ssrcs:r,ssrcGroups:i}}function zR(e,t){t instanceof ty&&e.attributes.payloads.forEach((function(e){var n,r=null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase();if(r&&-1!==["opus","pcmu","pcma","g722"].indexOf(r)){e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";var i=t._encoderConfig;i&&"pcmu"!==r&&"pcma"!==r&&"g722"!==r&&(i.bitrate&&!ip()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*i.bitrate))),i.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(i.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(i.sampleRate)),i.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))}}))}function KR(e){var t=e.attributes.unrecognized.findIndex((function(e){return"x-google-flag"===e.attField&&"conference"===e.attValue}));-1!==t&&e.attributes.unrecognized.splice(t,1)}function YR(e,t){var n;if(t instanceof wy&&t._encoderConfig&&-1===t._hints.indexOf(Ng.SCREEN_TRACK)){var r=t._encoderConfig;pE().supportMinBitrate&&r.bitrateMin&&e.attributes.payloads.forEach((function(e){var t,n;Or(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(r.bitrateMin))})),pE().supportMinBitrate&&!Or(n=t._hints).call(n,Ng.LOW_STREAM)&&r.bitrateMax&&e.attributes.payloads.forEach((function(e){var t,n;Or(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(W_("X_GOOGLE_START_BITRATE")||Math.floor(r.bitrateMax)))}))}}function qR(e){if("video"===e.media.mediaType){var t=Zl();if(t.name===Gl.SAFARI||t.os===Wl.IOS){var n=e.attributes.extmaps.findIndex((function(e){return/video-orientation/g.test(e.extensionName)}));-1!==n&&e.attributes.extmaps.splice(n,1)}}}function JR(e,t,n){if(t){var r,i;if("video"===e.media.mediaType?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),!0===t.twcc){var o=r.find((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}));o&&(e.attributes.extmaps.find((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}))||e.attributes.extmaps.push({entry:o.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(e,t){return t.filter((function(t){return!!e.find((function(e){return e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((function(e){return"transport-cc"===e.type}))}))}))}(i,e.attributes.payloads).forEach((function(e){e.rtcpFeedbacks.find((function(e){return"transport-cc"===e.type}))||e.rtcpFeedbacks.push({type:"transport-cc"})})))}else if(!1===t.twcc){var a=e.attributes.extmaps.findIndex((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}));-1!==a&&e.attributes.extmaps.splice(a,1),e.attributes.payloads.forEach((function(e){var t=e.rtcpFeedbacks.findIndex((function(e){return"transport-cc"===e.type}));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){var s=r.find((function(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName}));s&&(e.attributes.extmaps.find((function(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName}))||e.attributes.extmaps.push({entry:s.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(e,t){return t.filter((function(t){return!!e.find((function(e){return e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((function(e){return"goog-remb"===e.type}))}))}))}(i,e.attributes.payloads).forEach((function(e){e.rtcpFeedbacks.find((function(e){return"goog-remb"===e.type}))||e.rtcpFeedbacks.push({type:"goog-remb"})})))}else if(!1===t.remb){var c=e.attributes.extmaps.findIndex((function(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName}));-1!==c&&e.attributes.extmaps.splice(c,1),e.attributes.payloads.forEach((function(e){var t=e.rtcpFeedbacks.findIndex((function(e){return"goog-remb"===e.type}));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}}function XR(e,t,n){if(!ip()&&"video"===e.media.mediaType&&t instanceof wy&&("vp9"===n||"vp8"===n)&&("vp8"!==n||W_("SIMULCAST"))&&!(void 0===t._scalabilityMode||t._scalabilityMode.numSpatialLayers<=1)){for(var r="vp8"===n?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find((function(e){return"FID"===e.semantic&&e.ssrcIds[0]===i.ssrcId})),a={semantic:"SIM",ssrcIds:[i.ssrcId]},s=1;s<r;s++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+s,attributes:df(i.attributes)}),a.ssrcIds.push(i.ssrcId+s),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+s,attributes:df(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+s,o.ssrcIds[1]+s]}));e.attributes.ssrcGroups.unshift(a)}}function QR(){return ZR.apply(this,arguments)}function ZR(){return(ZR=d(c().mark((function e(){var t,n,r,i,o,a,s,u,d,l,p,f,h,_,v,m,g,E,y=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},n=y.length>1&&void 0!==y[1]?y[1]:{},r=t.filterRTX,i=t.filterVideoFec,o=t.filterAudioFec,a=t.filterAudioCodec,s=t.filterVideoCodec,u=n.useXR,(d=new RTCPeerConnection).addTransceiver("video",{direction:"sendonly"}),d.addTransceiver("audio",{direction:"sendonly"}),d.addTransceiver("video",{direction:"recvonly"}),d.addTransceiver("audio",{direction:"recvonly"}),e.next=5,d.createOffer();case 5:l=e.sent.sdp,p=BR(l,{filterRTX:r,filterVideoFec:i,filterAudioFec:o,filterAudioCodec:a,filterVideoCodec:s},{useXR:u},"sendonly"),f=BR(l,{filterRTX:r,filterVideoFec:i,filterAudioFec:o,filterAudioCodec:a,filterVideoCodec:s},{useXR:u},"recvonly"),$R(p,f,"videoExtensions",h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},_={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},v={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]}),$R(p,f,"videoCodecs",h,_,v),$R(p,f,"audioExtensions",h,_,v),$R(p,f,"audioCodecs",h,_,v),W_("RAISE_H264_BASELINE_PRIORITY")&&-1!==(m=v.videoCodecs.findIndex((function(e){var t,n;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"===(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])})))&&((g=v.videoCodecs.findIndex((function(e){var t;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())})))<m&&(tv.debug("raising H264 baseline profile priority"),E=v.videoCodecs[m],v.videoCodecs.splice(m,1),v.videoCodecs.splice(g,0,E)),-1!==g&&(_.videoCodecs=_.videoCodecs.filter((function(e){var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))}))),-1!==g&&W_("FILTER_SEND_H264_BASELINE")&&(h.videoCodecs=h.videoCodecs.filter((function(e){var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))}))));try{d.close()}catch(e){}return e.abrupt("return",{send:h,recv:_,sendrecv:v});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $R(e,t,n,r,i,o){if("videoExtensions"===n||"audioExtensions"===n){var a=[];return e[n].forEach((function(e){t[n].some((function(t,n){if(e.entry===t.entry&&e.extensionName===t.extensionName)return a.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach((function(e,t){-1===a.indexOf(t)&&i[n].push(e)}))}if("videoCodecs"===n||"audioCodecs"===n){var s=[];return e[n].forEach((function(e){t[n].some((function(t,n){if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return s.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach((function(e,t){-1===s.indexOf(t)&&i[n].push(e)}))}}function eC(e){var t,n,r=e.send,i=e.recv,o=e.sendrecv;if(!o){if(!r||!i)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:r,recv:i}}return r?((t={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]}).audioCodecs=[].concat(r.audioCodecs,o.audioCodecs),t.videoCodecs=[].concat(r.videoCodecs,o.videoCodecs),t.audioExtensions=[].concat(r.audioExtensions,o.audioExtensions),t.videoExtensions=[].concat(r.videoExtensions,o.videoExtensions)):t=o,i?((n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]}).audioCodecs=[].concat(i.audioCodecs,o.audioCodecs),n.videoCodecs=[].concat(i.videoCodecs,o.videoCodecs),n.audioExtensions=[].concat(i.audioExtensions,o.audioExtensions),n.videoExtensions=[].concat(i.videoExtensions,o.videoExtensions)):n=o,{send:t,recv:n}}function tC(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter((function(e){var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((function(e){e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"}))}function nC(e){e.mediaDescriptions.forEach((function(e){"video"!==e.media.mediaType&&"audio"!==e.media.mediaType||e.attributes.payloads.forEach((function(e){-1===e.rtcpFeedbacks.findIndex((function(e){return"rrtr"===e.type}))&&e.rtcpFeedbacks.push({type:"rrtr"})}))}))}function rC(e,t,n,r){var i=[];if(e===hm.VIDEO){if(W_("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(i=t.videoCodecs.filter((function(e){var t;return Or(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)&&e&&e.fmtp&&e.fmtp.parameters["profile-level-id"]===W_("H264_PROFILE_LEVEL_ID")}))),!Array.isArray(i)||0===i.length){var o=n.videoCodecs.filter((function(e){var t;return Or(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)}));0!==o.length&&(i=t.videoCodecs.filter((function(e){return o.some((function(t){return t.payloadType===e.payloadType}))})))}if(W_("USE_PUB_RTX")){var a=i.map((function(e){return e.payloadType.toString()})),s=t.videoCodecs.filter((function(e){return e.rtpMap&&"rtx"===e.rtpMap.encodingName&&Or(a).call(a,e.fmtp&&e.fmtp.parameters.apt||"")}));i=[].concat(i,s)}0===i.length&&(tv.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs)}else 0===(i=t.audioCodecs.filter((function(e){var t;return Or(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)}))).length&&(tv.warning("codec ".concat(r," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter((function(e){var t;return Or(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,"opus")})));return i}function iC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iC(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aC(e){if(Array.isArray(e))return e.map((function(e){return e}));if(!sC(e))return e;var t={};for(var n in e){var r=e[n];sC(r)||Array.isArray(r)?t[n]=aC(r):t[n]=r}return t}function sC(e){return!("object"!=typeof e||Array.isArray(e)||!e)}var cC=function(){function e(e){uc(this,"input",[]),uc(this,"size",void 0),this.size=e}var t=e.prototype;return t.add=function(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)},t.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},e}(),uC={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},dC={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:uC,remoteCandidate:uC}},lC={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},pC={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},fC={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},hC={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function _C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_C(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mC=function(){function e(e,t){var n=this;uc(this,"onFirstVideoReceived",void 0),uc(this,"onFirstVideoDecoded",void 0),uc(this,"onFirstAudioReceived",void 0),uc(this,"onFirstVideoDecodedTimeout",void 0),uc(this,"onFirstAudioDecoded",void 0),uc(this,"onSelectedLocalCandidateChanged",void 0),uc(this,"onSelectedRemoteCandidateChanged",void 0),uc(this,"videoIsReady",!1),uc(this,"videoIsReady2",{}),uc(this,"pc",void 0),uc(this,"options",void 0),uc(this,"intervalTimer",void 0),uc(this,"stats",aC(dC)),uc(this,"isFirstVideoReceived",{}),uc(this,"isFirstVideoDecoded",{}),uc(this,"isFirstAudioReceived",{}),uc(this,"isFirstAudioDecoded",{}),uc(this,"isFirstVideoDecodedTimeout",{}),uc(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval(d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.updateStats();case 1:case"end":return e.stop()}}),e)}))),this.options.updateInterval)}var t=e.prototype;return t.getStats=function(){return this.stats},t.getSelectedCandidatePair=function(){return new Vl((function(e){e({local:vC({},uC),remote:vC({},uC)})}))},t.setVideoIsReady=function(e){this.videoIsReady=e},t.setVideoIsReady2=function(e,t){this.videoIsReady2[e]=t},t.getVideoIsReady=function(e){return this.videoIsReady2[e]||!1},t.setIsFirstAudioDecoded=function(e){},t.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},t.calcLossRate=function(e){var t=this;this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var n=this.lossRateWindowStats.length,r=0,i=0,o=0,a=0,s=function(){var s=u[c];e[s].forEach((function(e,c){if(t.lossRateWindowStats[n-1][s][c]&&t.lossRateWindowStats[0][s][c]){var u=t.lossRateWindowStats[n-1][s][c].packets-t.lossRateWindowStats[0][s][c].packets,d=t.lossRateWindowStats[n-1][s][c].packetsLost-t.lossRateWindowStats[0][s][c].packetsLost;"videoSend"===s||"audioSend"===s?(r+=u,o+=d):(i+=u,a+=d),Number.isNaN(u)||Number.isNaN(u)?e.packetLostRate=0:e.packetLostRate=u<=0||d<=0?0:d/(u+d)}}))},c=0,u=["videoSend","audioSend","videoRecv","audioRecv"];c<u.length;c++)s();e.sendPacketLossRate=r<=0||o<=0?0:o/(r+o),e.recvPacketLossRate=i<=0||a<=0?0:a/(i+a)},e}();function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gC(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yC=function(e){function t(){var t;return uc(l(t=e.apply(this,arguments)||this),"_stats",dC),uc(l(t),"lastDecodeVideoReceiverStats",new Map),t}p(t,e);var n=t.prototype;return n.updateStats=function(){var e=d(c().mark((function e(){var t,n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getStats();case 2:t=e.sent,n=this.statsResponsesToObjects(t),this._stats=aC(dC),r=n.filter((function(e){return"ssrc"===e.type})),this.processSSRCStats(r),(i=n.find((function(e){return"VideoBwe"===e.type})))&&this.processBandwidthStats(i),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.processBandwidthStats=function(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)},n.processSSRCStats=function(e){var t=this;e.forEach((function(e){var n,r=Or(n=e.id).call(n,"send");switch("".concat(e.mediaType,"_").concat(r?"send":"recv")){case"video_send":var i=aC(pC);i.codec=e.googCodecName,i.adaptionChangeReason="none",e.googCpuLimitedResolution&&(i.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(i.adaptionChangeReason="bandwidth"),i.avgEncodeMs=Number(e.googAvgEncodeMs),i.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},i.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},i.firsCount=Number(e.googFirReceived),i.nacksCount=Number(e.googNacksReceived),i.plisCount=Number(e.googPlisReceived),i.frameCount=Number(e.framesEncoded),i.bytes=Number(e.bytesSent),i.packets=Number(e.packetsSent),i.packetsLost=Number(e.packetsLost),i.ssrc=Number(e.ssrc),i.rttMs=Number(e.googRtt||0),t._stats.videoSend.push(i),t._stats.rtt=i.rttMs;break;case"video_recv":var o=aC(lC),a=t.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(o.codec=e.googCodecName,o.targetDelayMs=Number(e.googTargetDelayMs),o.renderDelayMs=Number(e.googRenderDelayMs),o.currentDelayMs=Number(e.googCurrentDelayMs),o.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),o.decodeMs=Number(e.googDecodeMs),o.maxDecodeMs=Number(e.googMaxDecodeMs),o.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},o.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},o.decodeFrameRate=Number(e.googFrameRateDecoded),o.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},o.jitterBufferMs=Number(e.googJitterBufferMs),o.firsCount=Number(e.googFirsSent),o.nacksCount=Number(e.googNacksSent),o.plisCount=Number(e.googPlisSent),o.framesDecodeCount=Number(e.framesDecoded),o.bytes=Number(e.bytesReceived),o.packets=Number(e.packetsReceived),o.packetsLost=Number(e.packetsLost),o.ssrc=Number(e.ssrc),o.packets>0&&!t.isFirstVideoReceived[o.ssrc]&&(t.onFirstVideoReceived&&t.onFirstVideoReceived(o.ssrc),t.isFirstVideoReceived[o.ssrc]=!0),o.framesDecodeCount>0&&!t.isFirstVideoDecoded[o.ssrc]&&(t.onFirstVideoDecoded&&t.onFirstVideoDecoded(o.ssrc,o.decodedFrame.width,o.decodedFrame.height),t.isFirstVideoDecoded[o.ssrc]=!0),a){var s=a.stats,c=Date.now()-a.lts;o.framesDecodeFreezeTime=s.framesDecodeFreezeTime,o.framesDecodeInterval=s.framesDecodeInterval,o.framesDecodeCount>s.framesDecodeCount&&t.isFirstVideoDecoded[o.ssrc]?(a.lts=Date.now(),o.framesDecodeInterval=c,o.framesDecodeInterval>=t.options.freezeRateLimit&&(t.getVideoIsReady(parseInt(e.ssrc,10))?o.framesDecodeFreezeTime+=o.framesDecodeInterval:t.setVideoIsReady2(parseInt(e.ssrc,10),!0))):o.framesDecodeCount<a.stats.framesDecodeCount&&(o.framesDecodeInterval=0)}t.lastDecodeVideoReceiverStats.set(o.ssrc,{stats:EC({},o),lts:Date.now()}),t._stats.videoRecv.push(o);break;case"audio_recv":var u=aC(hC);u.codec=e.googCodecName,u.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,u.decodingCNG=Number(e.googDecodingCNG),u.decodingCTN=Number(e.googDecodingCTN),u.decodingCTSG=Number(e.googDecodingCTSG),u.decodingNormal=Number(e.googDecodingNormal),u.decodingPLC=Number(e.googDecodingPLC),u.decodingPLCCNG=Number(e.googDecodingPLCCNG),u.expandRate=Number(e.googExpandRate),u.accelerateRate=Number(e.googAccelerateRate),u.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),u.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),u.speechExpandRate=Number(e.googSpeechExpandRate),u.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),u.jitterBufferMs=Number(e.googJitterBufferMs),u.jitterMs=Number(e.googJitterReceived),u.bytes=Number(e.bytesReceived),u.packets=Number(e.packetsReceived),u.packetsLost=Number(e.packetsLost),u.ssrc=Number(e.ssrc),u.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),u.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),u.receivedFrames>0&&!t.isFirstAudioReceived[u.ssrc]&&(t.onFirstAudioReceived&&t.onFirstAudioReceived(u.ssrc),t.isFirstAudioReceived[u.ssrc]=!0),u.decodingNormal>0&&!t.isFirstAudioDecoded[u.ssrc]&&(t.onFirstAudioDecoded&&t.onFirstAudioDecoded(u.ssrc),t.isFirstAudioDecoded[u.ssrc]=!0),t._stats.audioRecv.push(u);break;case"audio_send":var d=aC(fC);d.codec=e.googCodecName,d.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,d.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),d.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),d.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),d.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),d.bytes=Number(e.bytesSent),d.packets=Number(e.packetsSent),d.packetsLost=Number(e.packetsLost),d.ssrc=Number(e.ssrc),d.rttMs=Number(e.googRtt||0),t._stats.rtt=d.rttMs,t._stats.audioSend.push(d)}}))},n._getStats=function(){var e=this;return new Vl((function(t,n){e.pc.getStats(t,n)}))},n.statsResponsesToObjects=function(e){var t=[];return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t.push(n)})),t},t}(mC);function bC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bC(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var TC=function(e){function t(){var t;return uc(l(t=e.apply(this,arguments)||this),"_stats",dC),uc(l(t),"report",void 0),uc(l(t),"lastDecodeVideoReceiverStats",new Map),uc(l(t),"lastVideoFramesRecv",new Map),uc(l(t),"lastVideoFramesSent",new Map),uc(l(t),"lastVideoFramesDecode",new Map),uc(l(t),"lastVideoJBDelay",new Map),uc(l(t),"lastAudioJBDelay",new Map),uc(l(t),"mediaBytesSent",new Map),uc(l(t),"mediaBytesRetransmit",new Map),uc(l(t),"mediaBytesTargetEncode",new Map),uc(l(t),"lastEncoderMs",new Map),t}p(t,e);var n=t.prototype;return n.updateStats=function(){var e=d(c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pc.getStats();case 2:this.report=e.sent,this._stats=aC(dC),this.report.forEach((function(e){switch(e.type){case Ev.OUTBOUND:case Ev.INBOUND:var n=e.mediaType||e.kind,r=!n&&"frameWidth"in e,i=!n&&!("frameWidth"in e);e.type===Ev.OUTBOUND?"audio"===n||i?t.processAudioOutboundStats(e):("video"===n||r)&&t.processVideoOutboundStats(e):e.type===Ev.INBOUND&&("audio"===n||i?t.processAudioInboundStats(e):("video"===n||r)&&t.processVideoInboundStats(e));break;case Ev.TRANSPORT:var o=t.report.get(e.selectedCandidatePairId);o&&t.processCandidatePairStats(o);break;case Ev.CANDIDATE_PAIR:e.selected&&t.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getSelectedCandidatePair=function(){var e=d(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pc.getStats();case 2:return t=e.sent,n={local:SC({},uC),remote:SC({},uC)},e.abrupt("return",(t.forEach((function(e){var r;if(e.type===Ev.TRANSPORT&&(r=t.get(e.selectedCandidatePairId)),e.type===Ev.CANDIDATE_PAIR&&e.selected&&(r=e),r){var i=function(e,t){e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(r.localCandidateId){var o=t.get(r.localCandidateId);o&&i(n.local,o)}if(r.remoteCandidateId){var a=t.get(r.remoteCandidateId);a&&i(n.remote,a)}}})),n));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.processCandidatePairStats=function(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((function(t){e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((function(t){e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){var t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){var n=this.report.get(e.remoteCandidateId);n&&this.processCandidateStats(n)}},n.processCandidateStats=function(e){var t;e.type===Ev.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===Ev.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===Ev.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(SC({},t),SC({},this.stats.selectedCandidatePair.localCandidate)),e.type===Ev.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(SC({},t),SC({},this.stats.selectedCandidatePair.remoteCandidate)))},n.processAudioInboundStats=function(e){var t=this._stats.audioRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=aC(hC),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples)},n.processVideoInboundStats=function(e){var t=this._stats.videoRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=aC(lC),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay;var n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),i=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){var o=t.decodedFrame?t.decodedFrame.width:0,a=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,o,a),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){var s=n.stats,c=i-n.lts;t.framesDecodeFreezeTime=s.framesDecodeFreezeTime,t.framesDecodeInterval=s.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&c>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>s.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=c,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<s.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(n.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-n.qpSum)/(e.framesDecoded-n.stats.framesDecodeCount))}r&&i-r.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:SC({},t),lts:n?n.lts:Date.now(),qpSum:e.qpSum})},n.processVideoOutboundStats=function(e){var t=this._stats.videoSend.find((function(t){return t.ssrc===e.ssrc}));t||(t=aC(pC),this._stats.videoSend.push(t));var n=this.mediaBytesSent.get(e.ssrc);if(n)n.add(e.bytesSent);else{var r=new cC(10);r.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,r)}if(void 0!==e.retransmittedBytesSent){var i=this.mediaBytesRetransmit.get(e.ssrc);if(i)i.add(e.retransmittedBytesSent);else{var o=new cC(10);o.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,o)}}if(e.totalEncodedBytesTarget){var a=this.mediaBytesTargetEncode.get(e.ssrc);if(a)a.add(e.totalEncodedBytesTarget);else{var s=new cC(10);s.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,s)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){var c=this.lastEncoderMs.get(e.ssrc);if(!c||c.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{var u=e.framesEncoded-c.lastFrameCount,d=e.totalEncodeTime-c.lastEncoderTime;t.avgEncodeMs=1e3*d/u}}if(e.framesEncoded&&e.qpSum){var l=this.lastEncoderMs.get(e.ssrc);!l||l.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-l.lastQpSum)/(e.framesEncoded-l.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var p=this.findRemoteStatsId(e.ssrc,Ev.REMOTE_INBOUND);p&&this.processRemoteInboundStats(p,t)}},n.processAudioOutboundStats=function(e){var t=this._stats.audioSend.find((function(t){return t.ssrc===e.ssrc}));if(t||(t=aC(fC),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var n=this.findRemoteStatsId(e.ssrc,Ev.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}},n.findRemoteStatsId=function(e,t){var n,r=Array.from(jv(n=this.report).call(n)).find((function(n){return n.type===t&&n.ssrc===e}));return r?r.id:null},n.processVideoMediaSource=function(e,t){var n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})},n.processAudioMediaSource=function(e,t){var n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)},n.processVideoTrackSenderStats=function(e,t,n){var r,i,o,a,s=t?this.report.get(t):void 0,c=null!==(r=null==s?void 0:s.framesSent)&&void 0!==r?r:e.framesSent;if("number"==typeof c){var u=null!==(i=null==s?void 0:s.frameWidth)&&void 0!==i?i:e.frameWidth,d=null!==(o=null==s?void 0:s.frameHeight)&&void 0!==o?o:e.frameHeight,l=null!==(a=null==s?void 0:s.framesPerSecond)&&void 0!==a?a:e.framesPerSecond;if("number"==typeof u&&"number"==typeof d||(u=0,d=0),null==l){var p=Date.now(),f=this.lastVideoFramesSent.get(n.ssrc);f&&p-f.lts>=800?(l=Math.round((c-f.count)/((p-f.lts)/1e3)),this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:p,rate:l})):f?l=f.rate:this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:p,rate:0})}n.sentFrame={width:u,height:d,frameRate:Math.max(0,l)}}},n.processVideoTrackReceiverStats=function(e,t,n){var r,i,o,a,s,c=t?this.report.get(t):void 0,u=null!==(r=null==c?void 0:c.framesReceived)&&void 0!==r?r:e.framesReceived,d=null!==(i=null==c?void 0:c.frameWidth)&&void 0!==i?i:e.frameWidth,l=null!==(o=null==c?void 0:c.frameHeight)&&void 0!==o?o:e.frameHeight,p=null!==(a=null==c?void 0:c.jitterBufferDelay)&&void 0!==a?a:e.jitterBufferDelay,f=null!==(s=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount;if("number"==typeof u){var h=this.lastVideoFramesRecv.get(n.ssrc),_=Date.now();n.framesReceivedCount=u;var v=0;h&&_-h.lts>=800?(v=Math.round((u-h.count)/((_-h.lts)/1e3)),this.lastVideoFramesRecv.set(n.ssrc,{count:u,lts:_,rate:v})):h?v=h.rate:this.lastVideoFramesRecv.set(n.ssrc,{count:u,lts:_,rate:0}),n.receivedFrame={width:d||0,height:l||0,frameRate:v||0},n.decodedFrame={width:d||0,height:l||0,frameRate:n.decodeFrameRate||0},n.outputFrame={width:d||0,height:l||0,frameRate:n.decodeFrameRate||0}}if(p&&f){var m=this.lastVideoJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},g=m.jitterBufferMs,E=f-m.jitterBufferEmittedCount;E>0&&(g=1e3*(p-m.jitterBufferDelay)/E),n.jitterBufferMs=g,n.currentDelayMs=Math.round(g),this.lastVideoJBDelay.set(n.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:f,jitterBufferMs:n.currentDelayMs})}},n.processAudioTrackSenderStats=function(e,t,n){var r,i,o,a,s=t?this.report.get(t):void 0,c=null!==(r=null!==(i=null==s?void 0:s.echoReturnLoss)&&void 0!==i?i:e.echoReturnLoss)&&void 0!==r?r:0,u=null!==(o=null!==(a=null==s?void 0:s.echoReturnLossEnhancement)&&void 0!==a?a:e.echoReturnLossEnhancement)&&void 0!==o?o:0;n.aecReturnLoss=c,n.aecReturnLossEnhancement=u},n.processAudioTrackReceiverStats=function(e,t,n){var r,i,o,a,s,c,u,d=t?this.report.get(t):void 0,l=null!==(r=null==d?void 0:d.removedSamplesForAcceleration)&&void 0!==r?r:e.removedSamplesForAcceleration,p=null!==(i=null==d?void 0:d.totalSamplesReceived)&&void 0!==i?i:e.totalSamplesReceived,f=null!==(o=null==d?void 0:d.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,h=null!==(a=null==d?void 0:d.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount,_=null!==(s=null==d?void 0:d.audioLevel)&&void 0!==s?s:null==e?void 0:e.audioLevel,v=null!==(c=null==d?void 0:d.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,m=null!==(u=null==d?void 0:d.concealedSamples)&&void 0!==u?u:e.concealedSamples;if(l&&p&&(n.accelerateRate=l/p),f&&h){var g=this.lastAudioJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},E=g.jitterBufferMs,y=h-g.jitterBufferEmittedCount;y>0&&(E=1e3*(f-g.jitterBufferDelay)/y),n.jitterBufferMs=Math.round(E),this.lastAudioJBDelay.set(n.ssrc,{jitterBufferDelay:f,jitterBufferEmittedCount:h,jitterBufferMs:n.jitterBufferMs})}n.outputLevel=_;var b=1920;v&&p&&(b=p/v/50,n.receivedFrames=Math.round(p/b)),m&&(n.droppedFrames=Math.round(m/b))},n.processRemoteInboundStats=function(e,t){var n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime),n.jitter&&(t.jitterMs=1e3*n.jitter),n.timestamp&&(t.timestamp=n.timestamp))},n.getCodecFromCodecStats=function(e){var t=this.report.get(e);if(!t)return"";var n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""},n.updateSendBitrate=function(){var e=0,t=null,n=null;this.mediaBytesSent.forEach((function(t){e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((function(e){t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((function(e){n=null===n?e.diffMean():n+e.diffMean()}));var r=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*r/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))},t}(mC),wC=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.updateStats=function(){return Vl.resolve()},t}(mC);function RC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4,o=function(){var e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}();return o?o<76?new yC(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new TC(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):function(e){return!!window.RTCStatsReport&&e.getStats()instanceof Vl}(e)?new TC(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new wC(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i})}function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CC(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var AC=function(e){function t(n,r){var i;return uc(l(i=e.call(this,n,r)||this),"store",void 0),uc(l(i),"peerConnection",void 0),uc(l(i),"remoteSDP",void 0),uc(l(i),"initialOffer",void 0),uc(l(i),"statsFilter",void 0),uc(l(i),"useRTX",!1),uc(l(i),"localCapabilities",void 0),uc(l(i),"localCandidateCount",0),uc(l(i),"allCandidatesReceived",!1),uc(l(i),"establishPromise",void 0),uc(l(i),"mutex",new If("P2PConnection-mutex")),i.store=r,i.peerConnection=new RTCPeerConnection(t.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),i.statsFilter=RC(i.peerConnection,W_("STATS_UPDATE_INTERVAL"),void 0,ip()?1200:void 0),i.bindPCEvents(),i.bindStatsEvents(),i.store.p2pId=i.store.p2pId+1,i.establishPromise=i.establish(),i}p(t,e);var n=t.prototype;return n.establish=function(){var e=d(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 3:if((t=e.sent).sdp){e.next=6;break}throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");case 6:return n=FR(t.sdp),r=BR(t.sdp,{filterRTX:!this.useRTX,filterVideoFec:W_("FILTER_VIDEO_FEC"),filterAudioFec:W_("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]}),e.abrupt("return",(this.localCapabilities=r,this.initialOffer=t,OC(OC({},n),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:r},offerSDP:t.sdp})));case 10:throw e.prev=10,e.t0=e.catch(0),new Sp(ql.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.t0.toString());case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.connect=function(){var e=d(c().mark((function e(t,n,r,o,a,s){var u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.initialOffer){e.next=3;break}throw new Error("Cannot establish P2PConnection without initial offer.");case 3:return this.remoteSDP=new(function(){function e(e){uc(this,"sessionDesc",void 0),uc(this,"localCapabilities",void 0),uc(this,"rtpCapabilities",void 0),uc(this,"candidates",void 0),uc(this,"iceParameters",void 0),uc(this,"dtlsParameters",void 0),uc(this,"setup",void 0),uc(this,"currentMidIndex",void 0),uc(this,"cname",void 0);var t=e=df(e),n=t.remoteIceParameters,r=t.remoteDtlsParameters,i=t.candidates,o=t.remoteRTPCapabilities,a=t.remoteSetup,s=t.localCapabilities,c=t.sdkCodec,u=t.cname,d=UR.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=o,this.candidates=i,this.iceParameters=n,this.dtlsParameters=r,this.setup=a,this.localCapabilities=s,this.cname=u;for(var l=0;l<d.mediaDescriptions.length;l++){var p=d.mediaDescriptions[l];if(p.attributes.iceUfrag=n.iceUfrag,p.attributes.icePwd=n.icePwd,p.attributes.fingerprints=r.fingerprints,p.attributes.candidates=i,p.attributes.setup=a,"video"===p.media.mediaType){p.media.fmts=o.videoCodecs.map((function(e){return e.payloadType.toString(10)}));var f=o.videoCodecs.filter((function(e){var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Or(n=t.encodingName.toLowerCase()).call(n,c)}));0===f.length&&(f=o.videoCodecs),p.attributes.payloads=f,p.attributes.extmaps=o.videoExtensions}"audio"===p.media.mediaType&&(p.media.fmts=o.audioCodecs.map((function(e){return e.payloadType.toString(10)})),p.attributes.payloads=o.audioCodecs,p.attributes.extmaps=o.audioExtensions),d.mediaDescriptions[l]=this.mungMediaDesc(p)}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}var t=e.prototype;return t.toString=function(){return UR.print(this.sessionDesc)},t.send=function(e,t,n){var r=HR(t,this.cname),i=r.ssrcs,o=r.ssrcGroups,a=this.sessionDesc.mediaDescriptions.find((function(t){return e===hm.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType})),s=i[0].attributes.label,c=i[0].attributes.mslabel;return a.attributes.ssrcs=a.attributes.ssrcs.concat(i),a.attributes.ssrcGroups=a.attributes.ssrcGroups.concat(o),{id:s,mslabel:c}},t.batchSend=function(e){var t=this;return e.map((function(e){var n=e.kind,r=e.ssrcMsg;return t.send(n,r,void 0)}))},t.stopSending=function(e){this.sessionDesc.mediaDescriptions.forEach((function(t){var n=[],r=[],i=[];t.attributes.ssrcs.forEach((function(t){Or(e).call(e,t.attributes.label||"")?i.push(t):n.push(t)})),t.attributes.ssrcGroups.forEach((function(e){var t;Or(t=i.map((function(e){return e.ssrcId}))).call(t,e.ssrcIds[0])||r.push(e)})),t.attributes.ssrcs=n,t.attributes.ssrcGroups=r}))},t.mute=function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"},t.unmute=function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"},t.receive=function(e,t,n){var r=this;e.forEach((function(e,t){var n=e._mediaStreamTrack,i=r.sessionDesc.mediaDescriptions.findIndex((function(e){return e.attributes.mid===n.kind})),o=r.mungRecvMediaDsec(r.sessionDesc.mediaDescriptions[i],e);r.sessionDesc.mediaDescriptions[i]=o}))},t.stopReceiving=function(e){},t.updateCandidates=function(e){var t=this;e===_m.TCP?this.candidates.forEach((function(e){-1===t.candidates.findIndex((function(t){return"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port}))&&t.candidates.push(oC(oC({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this.candidates=this.candidates.filter((function(e){return"tcp"!==e.transport}));for(var n,r=i(this.sessionDesc.mediaDescriptions);!(n=r()).done;)n.value.attributes.candidates=this.candidates},t.restartICE=function(e){e=df(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((function(t){t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))},t.predictReceivingMids=function(e){for(var t=[],n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t},t.mungRecvMediaDsec=function(e,t){var n=df(e);return zR(n,t),YR(n,t),n},t.updateRecvMedia=function(e,t){var n=this.sessionDesc.mediaDescriptions.findIndex((function(t){return t.attributes.mid===e}));if(-1!==n){var r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=r}},t.bumpMid=function(e){this.currentMidIndex+=e},t.updateTrackLabel=function(e,t,n){var r=this.sessionDesc.mediaDescriptions.find((function(t){return e===hm.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid}));if(r){var i,o=r.attributes.ssrcs.find((function(e){return e.attributes.label===t}));o&&(o.attributes.label=n,null===(i=o.attributes.msid)||void 0===i||i.replace(t,n))}},t.mungMediaDesc=function(e){var t=df(e);return KR(t),function(e){var t=e.attributes.extmaps.find((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((function(e){var t=e.rtcpFeedbacks.findIndex((function(e){return"transport-cc"===e.type}));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t},t.getSSRC=function(e){for(var t,n=i(this.sessionDesc.mediaDescriptions);!(t=n()).done;)for(var r,o=i(t.value.attributes.ssrcs);!(r=o()).done;){var a=r.value;if(a.attributes.label===e)return[a]}},e}())({remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:o.send,remoteSetup:a,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:s}),u=this.remoteSDP.toString(),e.next=7,this.peerConnection.setLocalDescription(this.initialOffer);case 7:return e.next=9,this.peerConnection.setRemoteDescription({type:"answer",sdp:u});case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.t0.toString()));case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}(),n.updateRemoteRTPCapabilities=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED,"Planb mode does not support createDataChannels.");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.send=function(e,t){var n=this;return PR(c().mark((function r(){var i,o,a,s,u,d,l,p;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,DR(n.mutex.lock());case 2:if(i=r.sent,r.prev=3,n.remoteSDP){r.next=6;break}throw new Error("Cannot call P2PConnection.send before remote SDP created");case 6:return o=e.map((function(e){return n.peerConnection.addTrack(e._mediaStreamTrack)})),r.next=9,DR(n.peerConnection.createOffer());case 9:return a=r.sent,s=UR.parse(a.sdp),u=e.map((function(e){var t=e._mediaStreamTrack,r=s.mediaDescriptions.find((function(e){return e.attributes.mid===t.kind}));if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){var r=e.attributes.ssrcs.filter((function(e){return e.attributes.label===t})),i=e.attributes.ssrcGroups;if(0===r.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(i&&r.length>1){var o=i.find((function(e){return-1!==e.ssrcIds.indexOf(r[0].ssrcId)}));return o?[{ssrcId:o.ssrcIds[0],rtx:n?o.ssrcIds[1]:void 0}]:[{ssrcId:r[0].ssrcId}]}return[{ssrcId:r[0].ssrcId}]}(r,t.id,n.useRTX)})),r.prev=12,r.next=15,u;case 15:d=r.sent,r.next=21;break;case 18:throw r.prev=18,r.t0=r.catch(12),o.forEach((function(e){rp()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)})),r.t0;case 21:return l=n.mungSendOfferSDP(a.sdp,e),n.remoteSDP.receive(e,t,d),p=n.remoteSDP.toString(),r.next=26,DR(n.peerConnection.setLocalDescription({type:"offer",sdp:l}));case 26:return r.next=28,DR(n.applySendEncodings(o,e));case 28:return r.next=30,DR(n.peerConnection.setRemoteDescription({type:"answer",sdp:p}));case 30:return r.abrupt("return",e.map((function(e,t){var n=e._mediaStreamTrack.id;return{localSSRC:u[t],id:n}})));case 33:throw r.prev=33,r.t1=r.catch(3),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(r.t1.toString()));case 36:return r.prev=36,i(),r.finish(36);case 39:case"end":return r.stop()}}),r,null,[[3,33,36,39],[12,18]])})))()},n.stopSending=function(){var e=d(c().mark((function e(t){var n,r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");case 3:if((n=this.peerConnection.getSenders().filter((function(e){var n;return-1!==t.indexOf((null===(n=e.track)||void 0===n?void 0:n.id)||"")}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");case 6:return n.map((function(e){rp()&&e.replaceTrack(null),o.peerConnection.removeTrack(e)})),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,e.next=12,this.peerConnection.setLocalDescription(r);case 12:return this.remoteSDP.stopReceiving(t),i=this.remoteSDP.toString(),e.next=16,this.peerConnection.setRemoteDescription({type:"answer",sdp:i});case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.t0.toString()));case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),n.receive=function(){var e=d(c().mark((function e(t,n,r,i){var o,a,s,u,d,l,p=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));case 3:return o=this.remoteSDP.send(t,n,i),a=o.id,s=o.mslabel,u=new Vl((function(e,n){var r=setTimeout((function(){n(new Error("Cannot receive track, id: ".concat(a)))}),1e4);p.peerConnection.addEventListener("track",(function n(i){var o=Zl();if(("Safari"===o.name&&11===Number(o.version)||op())&&i.track.id!==a&&i.streams[0].id===s){var c,u=i.streams[0].getTracks()[0];return null===(c=p.remoteSDP)||void 0===c||c.updateTrackLabel(t,a,i.track.id),p.peerConnection.removeEventListener("track",n),clearTimeout(r),void e(u)}if(i.track.id===a)return p.peerConnection.removeEventListener("track",n),clearTimeout(r),void e(i.track)}))})),d=this.remoteSDP.toString(),e.next=6,this.peerConnection.setRemoteDescription({type:"offer",sdp:d});case 6:return e.next=8,this.peerConnection.createAnswer();case 8:return l=e.sent,e.next=11,this.peerConnection.setLocalDescription(l);case 11:return e.next=13,u;case 13:return e.t0=e.sent,e.t1=a,e.abrupt("return",{track:e.t0,id:e.t1});case 18:throw e.prev=18,e.t2=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t2.toString()));case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),n.stopReceiving=function(){var e=d(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");case 3:return this.remoteSDP.stopSending(t),n=this.remoteSDP.toString(),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return r=e.sent,e.next=12,this.peerConnection.setLocalDescription(r);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.t0.toString()));case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),n.muteRemote=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.unmuteRemote=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.muteLocal=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getSenders().filter((function(e){var n;return-1!==t.indexOf((null===(n=e.track)||void 0===n?void 0:n.id)||"")}))).length===t.length){e.next=6;break}throw new Error("sender' length doesn't match mids' length.");case 6:n.map((function(e){if(rp()&&e.track)e.track.enabled=!1;else{var t=e.getParameters();t.encodings.forEach((function(e){return e.active=!1})),e.setParameters(t)}})),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.t0.toString()));case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),n.unmuteLocal=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getSenders().filter((function(e){var n;return-1!==t.indexOf((null===(n=e.track)||void 0===n?void 0:n.id)||"")}))).length===t.length){e.next=6;break}throw new Error("Senders' length doesn't match mids' length.");case 6:return n.map(function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rp()||!t.track){e.next=4;break}t.track.enabled=!0,e.next=8;break;case 4:return(n=t.getParameters()).encodings.forEach((function(e){return e.active=!0})),e.next=8,t.setParameters(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,e.next=12,this.peerConnection.setLocalDescription(r);case 12:return i=this.remoteSDP.toString(),e.next=15,this.peerConnection.setRemoteDescription({type:"answer",sdp:i});case 15:e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.t0.toString()));case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),n.restartICE=function(e){var t=this;return PR(c().mark((function n(){var r,i,o,a,s,u,d,l;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,DR(t.mutex.lock("From P2PConnection.restartICE"));case 2:if(r=n.sent,n.prev=3,t.remoteSDP){n.next=6;break}throw new Error("Cannot restartICE before remoteSDP created.");case 6:if(!pE().supportPCSetConfiguration){n.next=11;break}i=t.peerConnection.getConfiguration(),o=e===_m.RELAY?"relay":"all",i.iceTransportPolicy!==o&&(tv.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(i.iceTransportPolicy,"] to [").concat(o,"]")),i.iceTransportPolicy=o,t.peerConnection.setConfiguration(i)),n.next=13;break;case 11:if(e!==_m.RELAY){n.next=13;break}return n.abrupt("return");case 13:return e!==_m.RELAY&&t.remoteSDP.updateCandidates(e),n.next=16,DR(t.peerConnection.createOffer({iceRestart:!0}));case 16:if((a=n.sent).sdp){n.next=19;break}throw new Error("Cannot restartICE because restart offer SDP does not exist.");case 19:return s=FR(a.sdp),n.next=22,s.iceParameters;case 22:return u=n.sent,d=u.remoteIceParameters,t.remoteSDP.restartICE(d),l=t.remoteSDP.toString(),n.next=28,DR(t.peerConnection.setLocalDescription(a));case 28:return n.next=30,DR(t.peerConnection.setRemoteDescription({type:"answer",sdp:l}));case 30:n.next=35;break;case 32:n.prev=32,n.t0=n.catch(3),tv.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),n.t0);case 35:return n.prev=35,r(),n.finish(35);case 38:case"end":return n.stop()}}),n,null,[[3,32,35,38]])})))()},n.close=function(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()},n.getStats=function(){return this.statsFilter.getStats()},n.getRemoteVideoIsReady=function(e){return this.statsFilter.getVideoIsReady(e)},n.updateEncoderConfig=function(){var e=d(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");case 3:return e.next=5,this.peerConnection.createOffer();case 5:return r=e.sent,i=this.mungSendOfferSDP(r.sdp,[n]),this.remoteSDP.updateRecvMedia(n._mediaStreamTrack.kind,n),o=this.remoteSDP.toString(),e.next=11,this.peerConnection.setLocalDescription({type:"offer",sdp:i});case 11:return e.next=13,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,e.t0.toString());case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),n.updateSendParameters=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getSenders().filter((function(e){var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t})),e.t0=1===r.length,!e.t0){e.next=5;break}return e.next=5,this.applySendEncodings(r,[n]);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setStatsRemoteVideoIsReady=function(e,t){this.statsFilter.setVideoIsReady2(e,t)},n.replaceTrack=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getSenders().find((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.id)===n})),e.t0=r,!e.t0){e.next=5;break}return e.next=5,r.replaceTrack(t._mediaStreamTrack);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.createDataChannels=function(e,t){throw new Sp(ql.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")},n.stopDataChannels=function(e){throw new Sp(ql.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")},n.bindPCEvents=function(){var e=this;this.peerConnection.oniceconnectionstatechange=function(){var t;null===(t=e.onICEConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=function(){var t;null===(t=e.onConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.connectionState)},this.peerConnection.onicecandidate=function(t){t.candidate?e.localCandidateCount+=1:(e.peerConnection.onicecandidate=null,e.allCandidatesReceived=!0,tv.debug("[".concat(e.store.clientId,"] [pc-").concat(e.store.p2pId,"] local candidate count"),e.localCandidateCount))},setTimeout((function(){e.allCandidatesReceived||(e.allCandidatesReceived=!0,tv.debug("[".concat(e.store.clientId,"] [pc-").concat(e.store.p2pId,"] onicecandidate timeout, local candidate count"),e.localCandidateCount))}),W_("CANDIDATE_TIMEOUT"))},n.unbindPCEvents=function(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null},t.resolvePCConfiguration=function(e){var n,r,i={iceServers:[],sdpSemantics:"plan-b"};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Xp(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(n=i.iceServers).push.apply(n,t.turnServerConfigToIceServers(e.turnServer.servers)),W_("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,t.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),i},t.turnServerConfigToIceServers=function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t},n.updateRtpSenderEncodings=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||(n=this.peerConnection.getSenders().find((function(e){var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t._mediaStreamTrack.id}))),n){e.next=3;break}return e.abrupt("return",tv.warn("[".concat(t.getTrackId(),"] no rtpSender found}")));case 3:if(pE().supportSetRtpSenderParameters){e.next=5;break}return e.abrupt("return",tv.warn("Browser not support set rtp-sender parameters"));case 5:if(i={},o={},!(t instanceof wy)){e.next=15;break}e.t0=t._optimizationMode,e.next="motion"===e.t0?10:"detail"===e.t0?12:14;break;case 10:return i.degradationPreference="maintain-framerate",e.abrupt("break",15);case 12:return i.degradationPreference="maintain-resolution",e.abrupt("break",15);case 14:i.degradationPreference="balanced";case 15:return W_("DSCP_TYPE")&&mp()&&(s=W_("DSCP_TYPE"),Or(a=["very-low","low","medium","high"]).call(a,s)&&(o.networkPriority=s)),u=n.getParameters(),(d=null===(r=u.encodings)||void 0===r?void 0:r[0])&&Object.assign(d,o),Object.assign(u,i),tv.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(u.encodings))),e.next=22,n.setParameters(u);case 22:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.applySendEncodings=function(){var e=d(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,pE().supportSetRtpSenderParameters){e.next=3;break}return e.abrupt("return");case 3:if(t.length===n.length){e.next=5;break}return e.abrupt("return");case 5:r=0;case 6:if(!(r<t.length)){e.next=15;break}if(i=t[r],o=n[r],e.t0=i&&o,!e.t0){e.next=12;break}return e.next=12,this.updateRtpSenderEncodings(o,i);case 12:r++,e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(0),tv.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."));case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),n.mungSendOfferSDP=function(e,t){var n=UR.parse(e);return t.forEach((function(e,t){var r=e._mediaStreamTrack,i=n.mediaDescriptions.find((function(e){return e.attributes.mid===r.kind}));i&&zR(i,e)})),UR.print(n)},n.bindStatsEvents=function(){var e=this;this.statsFilter.onFirstAudioReceived=function(t){var n;null===(n=e.onFirstAudioReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoReceived=function(t){var n;null===(n=e.onFirstVideoReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstAudioDecoded=function(t){var n;null===(n=e.onFirstAudioDecoded)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoDecoded=function(t,n,r){var i;null===(i=e.onFirstVideoDecoded)||void 0===i||i.call(e,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=function(t,n){var r;null===(r=e.onSelectedLocalCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=function(t,n){var r;null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r||r.call(e,t,n)}},n.unbindStatsEvents=function(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0},n.batchReceive=function(){var e=d(c().mark((function e(t){var n,r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");case 3:return n=this.remoteSDP.batchSend(t).map((function(e,n){var r=e.id,i=e.mslabel,a=t[n].kind;return new Vl((function(e,t){var n=setTimeout((function(){t(new Error("Cannot receive track, id: ".concat(r)))}),1e4);o.peerConnection.addEventListener("track",(function t(s){var c=Zl();if("Safari"===c.name&&11===Number(c.version)&&s.track.id!==r&&s.streams[0].id===i){var u,d=s.streams[0].getTracks()[0];return null===(u=o.remoteSDP)||void 0===u||u.updateTrackLabel(a,r,s.track.id),o.peerConnection.removeEventListener("track",t),clearTimeout(n),void e({track:d,id:r})}if(s.track.id===r)return o.peerConnection.removeEventListener("track",t),clearTimeout(n),void e({track:s.track,id:r})}))}))})),r=this.remoteSDP.toString(),e.next=6,this.peerConnection.setRemoteDescription({type:"offer",sdp:r});case 6:return e.next=8,this.peerConnection.createAnswer();case 8:return i=e.sent,e.next=11,this.peerConnection.setLocalDescription(i);case 11:return e.next=13,Vl.all(n);case 13:return e.abrupt("return",e.sent);case 16:throw e.prev=16,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t0.toString()));case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),n.getRemoteSSRC=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteSDP){e.next=2;break}return e.abrupt("return");case 2:return n=this.remoteSDP.getSSRC(t),e.abrupt("return",null==n?void 0:n[0].ssrcId);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setConfiguration=function(e){if(pE().supportPCSetConfiguration){var n=t.resolvePCConfiguration(e);this.peerConnection.setConfiguration(n)}},s(t,[{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}},{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}}]),t}(Mm);function IC(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=d(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("Locking from P2PConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function kC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kC(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PC(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[Object,Object,Array,Object,String,String]),Bv("design:returntype",Vl)],AC.prototype,"connect",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],AC.prototype,"stopSending",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[String,Array,String,Object]),Bv("design:returntype",Vl)],AC.prototype,"receive",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],AC.prototype,"stopReceiving",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],AC.prototype,"muteRemote",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],AC.prototype,"unmuteRemote",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],AC.prototype,"muteLocal",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],AC.prototype,"unmuteLocal",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],AC.prototype,"close",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[String,tE]),Bv("design:returntype",Vl)],AC.prototype,"updateEncoderConfig",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[String,tE]),Bv("design:returntype",Vl)],AC.prototype,"updateSendParameters",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[tE,String]),Bv("design:returntype",Vl)],AC.prototype,"replaceTrack",null),Vv([IC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],AC.prototype,"getRemoteSSRC",null);var xC=function(e){function t(n,r){var i;return uc(l(i=e.call(this,n,r)||this),"store",void 0),uc(l(i),"peerConnection",void 0),uc(l(i),"remoteSDP",void 0),uc(l(i),"initialOffer",void 0),uc(l(i),"transportEventReceiver",void 0),uc(l(i),"statsFilter",void 0),uc(l(i),"useXR",W_("USE_XR")),uc(l(i),"localCapabilities",void 0),uc(l(i),"remoteCodecs",void 0),uc(l(i),"localCandidateCount",0),uc(l(i),"allCandidatesReceived",!1),uc(l(i),"dataStreamChannelMap",new Map),uc(l(i),"establishPromise",void 0),uc(l(i),"mutex",new If("P2PConnection-mutex")),i.store=r,i.peerConnection=new RTCPeerConnection(t.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),i.statsFilter=RC(i.peerConnection,W_("STATS_UPDATE_INTERVAL"),void 0,ip()?1200:void 0),i.bindPCEvents(),i.bindStatsEvents(),i.store.p2pId=i.store.p2pId+1,i.establishPromise=i.establish(),i}p(t,e);var n=t.prototype;return n.updateRemoteRTPCapabilities=function(){var e=d(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteCodecs=n,r=[].concat(new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map((function(e){return e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||""})).filter((function(e){var t;return Or(t=Object.keys(G_)).call(t,e)})))),pv.updateRemoteRTPCapabilities(this.store.sessionId,{mids:t,localCodecs:r,remoteCodecs:this.remoteCodecs}),this.remoteSDP){e.next=4;break}return e.abrupt("return",void tv.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(r,", codecs: ").concat(n)));case 4:if(!this.remoteSDP.updateRemoteCodec(t,n,this.store.codec)){e.next=17;break}return e.next=7,this.peerConnection.createOffer();case 7:return i=e.sent,o=this.logSDPExchange(i.sdp||"","offer","local","muteLocal"),e.next=11,this.peerConnection.setLocalDescription(i);case 11:return a=this.remoteSDP.toString(),null==o||o(a),e.next=15,this.peerConnection.setRemoteDescription({type:"answer",sdp:a});case 15:e.next=18;break;case 17:tv.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.establish=function(){var e=d(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"}),e.next=4,this.peerConnection.createOffer();case 4:if((t=e.sent).sdp){e.next=7;break}throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");case 7:return n=FR(t.sdp),e.next=10,QR({filterRTX:!W_("USE_PUB_RTX")&&!W_("USE_SUB_RTX"),filterVideoFec:W_("FILTER_VIDEO_FEC"),filterAudioFec:W_("FILTER_AUDIO_FEC"),filterVideoCodec:W_("FILTER_VIDEO_CODEC")},{useXR:this.useXR});case 10:return r=e.sent,e.abrupt("return",(this.localCapabilities=eC(r),this.initialOffer=t,DC(DC({},n),{},{rtpCapabilities:r,offerSDP:t.sdp})));case 14:throw e.prev=14,e.t0=e.catch(0),new Sp(ql.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.t0.toString());case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n.connect=function(){var e=d(c().mark((function e(t,n,r,o,a,u){var d,l,p,f,h,_,v,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.initialOffer){e.next=3;break}throw new Error("Cannot establish P2PConnection without initial offer.");case 3:return this.remoteSDP=new(function(){function e(e){uc(this,"sessionDesc",void 0),uc(this,"_localCapabilities",void 0),uc(this,"_rtpCapabilities",void 0),uc(this,"_candidates",void 0),uc(this,"_iceParameters",void 0),uc(this,"_dtlsParameters",void 0),uc(this,"setup",void 0),uc(this,"currentMidIndex",void 0),uc(this,"cname",void 0),uc(this,"firefoxSsrcMidMap",new Map);var t=e=df(e),n=t.remoteIceParameters,r=t.remoteDtlsParameters,o=t.candidates,a=t.remoteRTPCapabilities,s=t.remoteSetup,c=t.localCapabilities,u=t.cname,d=UR.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=a,this._candidates=o,this._iceParameters=n,this._dtlsParameters=r,this._localCapabilities=c,this.setup=s,this.cname=u;for(var l,p=this.rtpCapabilities.send,f=i(d.mediaDescriptions);!(l=f()).done;){var h=l.value;if(h.attributes.iceUfrag=n.iceUfrag,h.attributes.icePwd=n.icePwd,h.attributes.fingerprints=r.fingerprints,h.attributes.candidates=o,h.attributes.setup=s,"video"===h.media.mediaType&&(h.media.fmts=p.videoCodecs.map((function(e){return e.payloadType.toString(10)})),h.attributes.payloads=p.videoCodecs,h.attributes.extmaps=p.videoExtensions,W_("PRELOAD_MEDIA_COUNT")>0)){var _=HR([{ssrcId:4e4,rtx:W_("USE_SUB_RTX")?40001:void 0}],this.cname),v=_.ssrcs,m=_.ssrcGroups;h.attributes.ssrcs=v,h.attributes.ssrcGroups=m}if("audio"===h.media.mediaType&&(h.media.fmts=p.audioCodecs.map((function(e){return e.payloadType.toString(10)})),h.attributes.payloads=p.audioCodecs,h.attributes.extmaps=p.audioExtensions,tC(h),W_("PRELOAD_MEDIA_COUNT")>0)){var g=HR([{ssrcId:2e4}],this.cname),E=g.ssrcs,y=g.ssrcGroups;h.attributes.ssrcs=E,h.attributes.ssrcGroups=y}}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}var t=e.prototype;return t.preloadRemoteMedia=function(){var e=W_("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;for(var t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send,o=1;o<e;o++){var a=2*o+4e4,s=HR([{ssrcId:2*o+2e4}],this.cname),c=s.ssrcs,u=s.ssrcGroups,d=HR([{ssrcId:a,rtx:W_("USE_SUB_RTX")?a+1:void 0}],this.cname),l=d.ssrcs,p=d.ssrcGroups;this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:p,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o+1)}}),this.currentMidIndex+=2}this.updateBundleMids()},t.toString=function(){return UR.print(this.sessionDesc)},t.send=function(e,t,n,r){var i=HR(t,this.cname,W_("SYNC_GROUP")?n:void 0),o=i.ssrcs,a=i.ssrcGroups,s=this.findPreloadMediaDesc(o);if(s){if(ip()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){var c=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}var u,d=this.findAvailableMediaIndex(e,o);return-1===d||1===d&&(rp()||up())||0===d&&W_("USE_SUB_RTX")||dp()?(u=this.createOrRecycleSendMedia(e,o,a,"sendonly",r),this.updateBundleMids()):((u=df(this.sessionDesc.mediaDescriptions[d])).attributes.direction="sendonly",u.attributes.ssrcs=o,u.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[d]=this.mungSendMediaDesc(u,r)),ip()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,u.attributes.mid),{mid:u.attributes.mid,needExchangeSDP:!0}},t.sendDataChannel=function(){var e=this.createOrRecycleDataChannel(),t=e.mediaDesc,n=e.needExchangeSDP;return this.updateBundleMids(),{mid:t.attributes.mid,needExchangeSDP:n}},t.batchSend=function(e){var t=this,n=e.map((function(e){var n=e.kind,r=e.ssrcMsg,i=e.mslabel;return t.send(n,r,i)})),r=[],i=!1;return n.forEach((function(e){var t=e.mid;e.needExchangeSDP&&(i=!0),r.push(t)})),{mids:r,needExchangeSDP:i}},t.stopSending=function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((function(e){"0"===e.attributes.mid||ip()||dp()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()},t.mute=function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"},t.unmute=function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"},t.muteRemote=function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return Or(e).call(e,t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="inactive"}))},t.unmuteRemote=function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return Or(e).call(e,t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="recvonly"}))},t.receive=function(e,t,n,r){var i=this;e.forEach((function(e,o){i.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[o])})),this.updateBundleMids()},t.stopReceiving=function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((function(e){e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()},t.updateCandidates=function(e){var t=this._candidates.filter((function(e){return"udp"===e.transport}));if(e===_m.TCP){if(0===t.length)return;if(W_("TCP_CANDIDATE_ONLY")){var n=this._candidates.filter((function(e){return"tcp"===e.transport}));t.forEach((function(e){-1===n.findIndex((function(t){return t.connectionAddress===e.connectionAddress}))&&n.push(NC(NC({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})),this._candidates=n}else{var r=[];t.forEach((function(e){r.push(NC(NC({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})),this._candidates=[].concat(t,r)}}else if(e===_m.RELAY){if(0!==t.length)return;var o=this._candidates.filter((function(e){return"tcp"===e.transport}));o.forEach((function(e){t.push(NC(NC({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=[].concat(t,o)}else 0===t.length?(this._candidates.filter((function(e){return"tcp"===e.transport})).forEach((function(e){t.push(NC(NC({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=t):this._candidates=this._candidates.filter((function(e){return"tcp"!==e.transport}));for(var a,s=i(this.sessionDesc.mediaDescriptions);!(a=s()).done;)a.value.attributes.candidates=this.candidates},t.restartICE=function(e){e=df(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((function(t){t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))},t.predictReceivingMids=function(e){for(var t=[],n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t},t.findAvailableMediaIndex=function(e,t){var n=this;return this.sessionDesc.mediaDescriptions.findIndex((function(r){var i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(ip()){if(i){var o=n.firefoxSsrcMidMap.get(t[0].ssrcId);return!(o||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!o||o!==r.attributes.mid)}return!1}return i}))},t.createOrRecycleDataChannel=function(){for(var e,t=i(this.sessionDesc.mediaDescriptions);!(e=t()).done;){var n=e.value;if("application"===n.media.mediaType)return{mediaDesc:n,needExchangeSDP:!1}}this.currentMidIndex+=1;var r="".concat(this.currentMidIndex),o={media:{mediaType:"application",port:"9",protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(r),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(o),{mediaDesc:o,needExchangeSDP:!0}},t.createOrRecycleRecvMedia=function(e,t,n,r,i,o){var a=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,c=rC(a,s,this.localCapabilities.send,a===hm.VIDEO?r:i),u=a===hm.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;var d="".concat(this.currentMidIndex),l={media:{mediaType:a,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:u,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};l=this.mungRecvMediaDsec(l,e,o);var p=this.findFirstClosedMedia(a);if(p){var f=this.sessionDesc.mediaDescriptions.indexOf(p);this.sessionDesc.mediaDescriptions[f]=l}else this.sessionDesc.mediaDescriptions.push(l);return l},t.updateRemoteCodec=function(e,t,n){var r=[].concat(new Set(this._rtpCapabilities.recv.videoCodecs.map((function(e){return e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||""})).filter((function(e){var t;return Or(t=Object.keys(G_)).call(t,e)})))),i=new Set(t);if(r.every((function(e){return i.has(e)})))return tv.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;var o=this._rtpCapabilities.recv.videoCodecs.filter((function(e){return t.some((function(t){var n;return Or(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))}));if(0===o.length)return tv.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;var a,s=[].concat(new Set(o.map((function(e){return e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||""}))));if(tv.debug("updateRemoteCodec, from ".concat(r," to ").concat(s)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((function(e){return"video"===e.media.mediaType&&"recvonly"===e.attributes.direction}));else if((a=this.sessionDesc.mediaDescriptions.filter((function(t){return t.attributes.mid&&Or(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction}))).length!==e.length)return tv.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;this._rtpCapabilities.recv.videoCodecs=o;var c=this.localCapabilities.send,u=this.rtpCapabilities.recv,d=rC(hm.VIDEO,u,c,n);return a.forEach((function(e){var t=d.map((function(e){return e.payloadType.toString(10)}));tv.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from ").concat(e.attributes.payloads," to ").concat(d)),e.attributes.payloads=d,e.media.fmts=t})),!0},t.createOrRecycleSendMedia=function(e,t,n,r,i){var o=this.rtpCapabilities.send,a=e===hm.VIDEO?o.videoCodecs:o.audioCodecs,s=e===hm.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;var c="".concat(this.currentMidIndex),u={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};u=this.mungSendMediaDesc(u,i);var d=this.findFirstClosedMedia(e);if(d){var l=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[l]=u}else this.sessionDesc.mediaDescriptions.push(u);return u},t.updateBundleMids=function(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((function(e){return"0"!==e.media.port})).map((function(e){return e.attributes.mid}))},t.mungRecvMediaDsec=function(e,t,n){var r=df(e);return KR(r),zR(r,t),YR(r,t),qR(r),JR(r,n,this.localCapabilities.send),r},t.mungSendMediaDesc=function(e,t){var n=df(e);return JR(n,t,this.localCapabilities.recv),tC(n),n},t.updateRecvMedia=function(e,t){var n=this.sessionDesc.mediaDescriptions.findIndex((function(t){return t.attributes.mid===e}));if(-1!==n){var r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=r}},t.bumpMid=function(e){this.currentMidIndex+=e},t.findFirstClosedMedia=function(e){return this.sessionDesc.mediaDescriptions.find((function(t){return ip()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port}))},t.findPreloadMediaDesc=function(e){return this.sessionDesc.mediaDescriptions.find((function(t){var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))},t.getSSRC=function(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e})))||void 0===t?void 0:t.attributes.ssrcs},s(e,[{key:"localCapabilities",get:function(){return df(this._localCapabilities)}},{key:"rtpCapabilities",get:function(){return df(this._rtpCapabilities)}},{key:"candidates",get:function(){return df(this._candidates)}},{key:"iceParameters",get:function(){return df(this._iceParameters)}},{key:"dtlsParameters",get:function(){return df(this._dtlsParameters)}}]),e}())({remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:o,remoteSetup:a,localCapabilities:this.localCapabilities,cname:u}),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec),d=this.remoteSDP.toString(),l=UR.parse(this.initialOffer.sdp),(p=l.mediaDescriptions.find((function(e){return"audio"===e.media.mediaType})))&&tC(p),this.useXR&&nC(l),f=UR.print(l),h=this.logSDPExchange(f||"","offer","local","connect"),this.store.descriptionStart(),e.next=10,this.peerConnection.setLocalDescription({type:"offer",sdp:f});case 10:return null==h||h(d),e.next=13,this.peerConnection.setRemoteDescription({type:"answer",sdp:d});case 13:if(null!=(_=this.peerConnection.getTransceivers()[0])&&_.receiver&&this.tryBindTransportEvents(_.receiver),!(W_("PRELOAD_MEDIA_COUNT")>0)){e.next=24;break}return this.remoteSDP.preloadRemoteMedia(),v=this.remoteSDP.toString(),e.next=19,this.peerConnection.setRemoteDescription({type:"offer",sdp:v});case 19:return e.next=21,this.peerConnection.createAnswer();case 21:return m=e.sent,e.next=24,this.peerConnection.setLocalDescription(m);case 24:e.next=29;break;case 26:throw e.prev=26,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.t0.toString()));case 29:case"end":return e.stop()}}),e,this,[[0,26]])})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}(),n.send=function(e,t,n){var r=this;return PR(c().mark((function i(){var o,a,s,u,d,l,p,f,h,_,v;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,DR(r.mutex.lock("From P2PConnection.send"));case 2:if(o=i.sent,i.prev=3,r.remoteSDP){i.next=6;break}throw new Error("Cannot call P2PConnection.send before remote SDP created");case 6:if(a=[],e.forEach((function(e){var t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});a.push(t),e._updateRtpTransceiver(t)})),i.t0=ip()&&!0===W_("SIMULCAST"),!i.t0){i.next=12;break}return i.next=12,DR(r.applySimulcastForFirefox(a,e));case 12:return i.next=14,DR(r.peerConnection.createOffer());case 14:return s=i.sent,u=r.remoteSDP.predictReceivingMids(e.length),d=r.mungSendOfferSDP(s.sdp,e,u),l=UR.parse(d),p=u.map((function(e){var t=l.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return WR(t,W_("USE_PUB_RTX"))})),i.prev=19,i.next=22,p;case 22:f=i.sent,i.next=36;break;case 25:return i.prev=25,i.t1=i.catch(19),f=[],r.remoteSDP.receive(e,t,n,f),h=r.remoteSDP.toString(),i.next=31,DR(r.peerConnection.setLocalDescription({type:"offer",sdp:d}));case 31:return i.next=33,DR(r.peerConnection.setRemoteDescription({type:"answer",sdp:h}));case 33:return i.next=35,DR(r.stopSending(u,!0));case 35:throw i.t1;case 36:return r.remoteSDP.receive(e,t,n,f),_=r.remoteSDP.toString(),v=r.logSDPExchange(d,"offer","local","send"),i.next=40,DR(r.peerConnection.setLocalDescription({type:"offer",sdp:d}));case 40:return i.next=42,DR(r.applySimulcastEncodings(a,e));case 42:return i.next=44,DR(r.applySendEncodings(a,e));case 44:return null==v||v(_),i.next=47,DR(r.peerConnection.setRemoteDescription({type:"answer",sdp:_}));case 47:return i.abrupt("return",a.map((function(e,t){var n=u[t];return{localSSRC:p[t],id:n,transceiver:e}})));case 50:throw i.prev=50,i.t2=i.catch(3),i.t2 instanceof Sp?i.t2:new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(i.t2.toString()));case 53:return i.prev=53,o(),i.finish(53);case 56:case"end":return i.stop()}}),i,null,[[3,50,53,56],[19,25]])})))()},n.createDataChannels=function(){var e=d(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");case 3:if((r=this.dataStreamChannelMap.get(t))&&"open"===r.readyState?tv.debug("[P2PConnection] Channels are already available and can be reused directly."):((r=this.peerConnection.createDataChannel("datastream-channel",{ordered:!1,maxRetransmits:W_("DATASTREAM_MAX_RETRANSMITS")})).binaryType="arraybuffer",this.dataStreamChannelMap.set(t,r)),n.forEach((function(e){e._updateOriginDataChannel(r)})),!this.remoteSDP.sendDataChannel().needExchangeSDP){e.next=18;break}return i=this.remoteSDP.toString(),e.next=10,this.peerConnection.setRemoteDescription({type:"offer",sdp:i});case 10:return e.next=12,this.peerConnection.createAnswer();case 12:return o=e.sent,e.next=15,this.peerConnection.setLocalDescription(o);case 15:tv.debug("[P2PConnection] createDataChannels by exchanging SDP."),e.next=19;break;case 18:tv.debug("[P2PConnection] createDataChannels no need to exchange SDP.");case 19:return e.abrupt("return");case 22:throw e.prev=22,e.t0=e.catch(0),e.t0 instanceof Sp?e.t0:new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(e.t0.toString()));case 25:case"end":return e.stop()}}),e,this,[[0,22]])})));return function(t,n){return e.apply(this,arguments)}}(),n.stopDataChannels=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.dataStreamChannelMap.get(t),e.abrupt("return",(null==n||n.close(),void this.dataStreamChannelMap.delete(t)));case 5:throw e.prev=5,e.t0=e.catch(0),e.t0 instanceof Sp?e.t0:new Sp(ql.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(e.t0.toString()));case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),n.stopSending=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}e.t0=void 0,e.next=7;break;case 4:return e.next=6,this.mutex.lock("From P2PConnection.stopSending");case 6:e.t0=e.sent;case 7:if(r=e.t0,e.prev=8,this.remoteSDP){e.next=11;break}throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");case 11:if((i=this.peerConnection.getTransceivers().filter((function(e){return-1!==t.indexOf(e.mid)}))).length===t.length){e.next=14;break}throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");case 14:return i.map((function(e){var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)})),e.next=17,this.peerConnection.createOffer();case 17:return o=e.sent,a=this.logSDPExchange(o.sdp||"","offer","local","stopSending"),e.next=21,this.peerConnection.setLocalDescription(o);case 21:return this.remoteSDP.stopReceiving(t),s=this.remoteSDP.toString(),null==a||a(s),e.next=26,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 26:e.next=31;break;case 28:throw e.prev=28,e.t1=e.catch(8),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.t1.toString()));case 31:return e.prev=31,r&&r(),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[8,28,31,34]])})));return function(t,n){return e.apply(this,arguments)}}(),n.receive=function(){var e=d(c().mark((function e(t,n,r,i){var o,a,s,u,d,l,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));case 3:if(o=this.remoteSDP.send(t,n,r,i),a=o.mid,!o.needExchangeSDP){e.next=18;break}return s=this.remoteSDP.toString(),u=this.logSDPExchange(s,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:s});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return d=e.sent,l=this.mungReceiveAnswerSDP(d.sdp,a,t),null==u||u(l||""),e.next=15,this.peerConnection.setLocalDescription({type:"answer",sdp:l});case 15:tv.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP.")),e.next=19;break;case 18:tv.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."));case 19:if(p=this.peerConnection.getTransceivers().find((function(e){return e.mid===a}))){e.next=22;break}throw new Error("Cannot get transceiver after setLocalDescription.");case 22:return e.abrupt("return",{track:p.receiver.track,id:a,transceiver:p});case 25:throw e.prev=25,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t0.toString()));case 28:case"end":return e.stop()}}),e,this,[[0,25]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),n.batchReceive=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");case 3:if(n=this.remoteSDP.batchSend(t),r=n.mids,!n.needExchangeSDP){e.next=17;break}return i=this.remoteSDP.toString(),o=this.logSDPExchange(i,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:i});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return a=e.sent,null==o||o(a.sdp||""),e.next=14,this.peerConnection.setLocalDescription(a);case 14:tv.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP.")),e.next=18;break;case 17:tv.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));case 18:return e.abrupt("return",r.map((function(e){var t=s.peerConnection.getTransceivers().find((function(t){return t.mid===e}));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e,transceiver:t}})));case 21:throw e.prev=21,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t0.toString()));case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),n.stopReceiving=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");case 3:return this.remoteSDP.stopSending(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","stopReceiving"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),n.muteRemote=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.mute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","muteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),n.unmuteRemote=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.unmute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","unmuteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),n.muteLocal=function(){var e=d(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map((function(e){e.direction="inactive"})),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","muteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.muteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),n.unmuteLocal=function(){var e=d(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map(function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.direction="sendonly";case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","unmuteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.unmuteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),n.restartICE=function(e){var t=this;return PR(c().mark((function n(){var r,i,o,a,s,u,d,l,p;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,DR(t.mutex.lock("From P2PConnection.restartICE"));case 2:if(r=n.sent,n.prev=3,t.remoteSDP){n.next=6;break}throw new Error("Cannot restartICE before remoteSDP created.");case 6:if(!pE().supportPCSetConfiguration){n.next=11;break}i=t.peerConnection.getConfiguration(),o=e===_m.RELAY?"relay":"all",i.iceTransportPolicy!==o&&(tv.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(i.iceTransportPolicy,"] to [").concat(o,"]")),i.iceTransportPolicy=o,t.peerConnection.setConfiguration(i)),n.next=13;break;case 11:if(e!==_m.RELAY){n.next=13;break}return n.abrupt("return");case 13:return t.remoteSDP.updateCandidates(e),n.next=16,DR(t.peerConnection.createOffer({iceRestart:!0}));case 16:if((a=n.sent).sdp){n.next=19;break}throw new Error("Cannot restartICE because restart offer SDP does not exist.");case 19:return s=FR(a.sdp),n.next=22,s.iceParameters;case 22:return u=n.sent,d=u.remoteIceParameters,t.remoteSDP.restartICE(d),l=t.remoteSDP.toString(),p=t.logSDPExchange(a.sdp||"","offer","local","restartICE"),t.store.descriptionStart(),n.next=29,DR(t.peerConnection.setLocalDescription(a));case 29:return null==p||p(l),n.next=32,DR(t.peerConnection.setRemoteDescription({type:"answer",sdp:l}));case 32:n.next=37;break;case 34:n.prev=34,n.t0=n.catch(3),tv.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),n.t0);case 37:return n.prev=37,r(),n.finish(37);case 40:case"end":return n.stop()}}),n,null,[[3,34,37,40]])})))()},n.close=function(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear()},n.getStats=function(){return this.statsFilter.getStats()},n.getRemoteVideoIsReady=function(e){return this.statsFilter.getVideoIsReady(e)},n.updateEncoderConfig=function(){var e=d(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");case 3:return e.next=5,this.peerConnection.createOffer();case 5:return r=e.sent,i=this.mungSendOfferSDP(r.sdp,[n],[t]),this.remoteSDP.updateRecvMedia(t,n),o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig"),e.next=11,this.peerConnection.setLocalDescription({type:"offer",sdp:i});case 11:return null==a||a(o),e.next=14,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,e.t0.toString());case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),n.updateSendParameters=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().filter((function(e){return e.mid===t})),e.t0=1===r.length,!e.t0){e.next=12;break}if(!this.isVP8Simulcast(n)){e.next=10;break}if(e.t1=ip(),e.t1){e.next=8;break}return e.next=8,this.applySimulcastEncodings(r,[n]);case 8:e.next=12;break;case 10:return e.next=12,this.applySendEncodings(r,[n]);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setStatsRemoteVideoIsReady=function(e,t){this.statsFilter.setVideoIsReady2(e,t)},n.replaceTrack=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().find((function(e){return e.mid===n})),e.t0=r,!e.t0){e.next=5;break}return e.next=5,r.sender.replaceTrack(t._mediaStreamTrack);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getSelectedCandidatePair=function(){var e=d(c().mark((function e(){var t,n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.peerConnection.getReceivers()).length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair())){e.next=4;break}return n=t[0].transport.iceTransport,r=n.getSelectedCandidatePair(),i=r.local,o=r.remote,e.abrupt("return",{local:DC(DC({},uC),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port}),remote:DC(DC({},uC),{},{candidateType:o.type,protocol:o.protocol,address:o.address,port:o.port})});case 4:return e.abrupt("return",this.statsFilter.getSelectedCandidatePair());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.bindPCEvents=function(){var e=this;this.peerConnection.oniceconnectionstatechange=function(){var t;null===(t=e.onICEConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=function(){var t;null===(t=e.onConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.connectionState)},this.peerConnection.onicecandidate=function(t){t.candidate?e.localCandidateCount+=1:(e.peerConnection.onicecandidate=null,e.allCandidatesReceived=!0,tv.debug("[".concat(e.store.clientId,"] [pc-").concat(e.store.p2pId,"] local candidate count"),e.localCandidateCount))},setTimeout((function(){e.allCandidatesReceived||(e.allCandidatesReceived=!0,tv.debug("[".concat(e.store.clientId,"] [pc-").concat(e.store.p2pId,"] onicecandidate timeout, local candidate count"),e.localCandidateCount))}),W_("CANDIDATE_TIMEOUT"))},n.unbindPCEvents=function(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null},t.resolvePCConfiguration=function(e){var n,r,i={iceServers:[]};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Xp(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(n=i.iceServers).push.apply(n,t.turnServerConfigToIceServers(e.turnServer.servers)),W_("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,t.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),W_("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),W_("ENABLE_ENCODED_TRANSFORM")&&pE().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),i},t.turnServerConfigToIceServers=function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(rw(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!W_("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t},n.tryBindTransportEvents=function(e){var t=this,n=e.transport;if(n){this.transportEventReceiver=e,n.onstatechange=function(){var e;null!=n&&n.state&&(null===(e=t.onDTLSTransportStateChange)||void 0===e||e.call(t,n.state))},n.onerror=function(e){var n;null===(n=t.onDTLSTransportError)||void 0===n||n.call(t,"error"in e?e.error:e)};var r=n.iceTransport;r&&(r.onstatechange=function(){var e,r=null==n?void 0:n.iceTransport.state;r&&(null===(e=t.onICETransportStateChange)||void 0===e||e.call(t,r))},r.getSelectedCandidatePair&&(r.onselectedcandidatepairchange=function(){if(r.getSelectedCandidatePair()){var e=r.getSelectedCandidatePair(),n=e.local,i=e.remote;tv.info("[".concat(t.store.clientId,"] [pc-").concat(t.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol}),", remote ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})," )"))}}))}},n.tryUnbindTransportEvents=function(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))},n.updateRtpSenderEncodings=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u,d,l,p,f,h,_;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||(n=this.peerConnection.getSenders().find((function(e){return e.track===t._mediaStreamTrack}))),n){e.next=3;break}return e.abrupt("return",tv.warn("[".concat(t.getTrackId(),"] no rtpSender found}")));case 3:if(!this.isVP8Simulcast(t)){e.next=5;break}return e.abrupt("return",tv.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings"));case 5:if(pE().supportSetRtpSenderParameters){e.next=7;break}return e.abrupt("return",tv.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters"));case 7:i={},o={},e.t0=t._optimizationMode,e.next="motion"===e.t0?11:"detail"===e.t0?13:15;break;case 11:return i.degradationPreference="maintain-framerate",e.abrupt("break",16);case 13:return i.degradationPreference="maintain-resolution",e.abrupt("break",16);case 15:i.degradationPreference="balanced";case 16:return t._encoderConfig&&(s=t._encoderConfig,u=s.bitrateMax,d=s.frameRate,l=s.scaleResolutionDownBy,u&&(o.maxBitrate=1e3*u),(Or(a=t._hints).call(a,Ng.LOW_STREAM)||t.isUseScaleResolutionDownBy)&&(d&&(o.maxFramerate=ow(d)),l&&l>=1&&(o.scaleResolutionDownBy=l))),W_("DSCP_TYPE")&&mp()&&(f=W_("DSCP_TYPE"),Or(p=["very-low","low","medium","high"]).call(p,f)&&(o.networkPriority=f)),h=n.getParameters(),_=null===(r=h.encodings)||void 0===r?void 0:r[0],ip()&&!_&&(i.encodings=[o]),_&&Object.assign(_,o),Object.assign(h,i),tv.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(h.encodings))),e.next=25,n.setParameters(h);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.applySendEncodings=function(){var e=d(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,pE().supportSetRtpSenderParameters){e.next=3;break}return e.abrupt("return");case 3:if(t.length===n.length){e.next=5;break}return e.abrupt("return");case 5:r=0;case 6:if(!(r<t.length)){e.next=15;break}if(i=t[r],o=n[r],e.t0=o instanceof wy&&!this.isVP8Simulcast(o),!e.t0){e.next=12;break}return e.next=12,this.updateRtpSenderEncodings(o,i.sender);case 12:r++,e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(0),tv.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."));case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),n.mungSendOfferSDP=function(e,t,n){var r=this,i=UR.parse(e);return t.forEach((function(e,t){var o=n[t],a=i.mediaDescriptions.find((function(e){return e.attributes.mid===o}));a&&(zR(a,e),XR(a,e,r.store.codec))})),UR.print(i)},n.mungReceiveAnswerSDP=function(e,t,n){var r=UR.parse(e),i=r.mediaDescriptions.find((function(e){return e.attributes.mid===t}));return i&&(n===hm.AUDIO&&"audio"===i.media.mediaType&&tC(i),this.useXR&&nC(r)),UR.print(r)},n.bindStatsEvents=function(){var e=this;this.statsFilter.onFirstAudioReceived=function(t){var n;null===(n=e.onFirstAudioReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoReceived=function(t){var n;null===(n=e.onFirstVideoReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstAudioDecoded=function(t){var n;null===(n=e.onFirstAudioDecoded)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoDecoded=function(t,n,r){var i;null===(i=e.onFirstVideoDecoded)||void 0===i||i.call(e,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=function(t,n){var r;null===(r=e.onSelectedLocalCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=function(t,n){var r;null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onFirstVideoDecodedTimeout=function(t){var n;null===(n=e.onFirstVideoDecodedTimeout)||void 0===n||n.call(e,t)}},n.unbindStatsEvents=function(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0},n.applySimulcastForFirefox=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u,d,l,p,f,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(d=t[r],!((l=n[r])instanceof wy&&!Or(i=l._hints).call(i,Ng.LOW_STREAM)&&null!==(o=l._encoderConfig)&&void 0!==o&&o.bitrateMax&&(null===(a=l._encoderConfig)||void 0===a?void 0:a.bitrateMax)>200&&null!==(s=l._scalabilityMode)&&void 0!==s&&s.numSpatialLayers&&(null===(u=l._scalabilityMode)||void 0===u?void 0:u.numSpatialLayers)>1&&"vp8"===this.store.codec)){e.next=10;break}return p={},f={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4},p.encodings=[{rid:"m",active:!0,maxBitrate:f.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:f.high}],h=d.sender.getParameters(),e.next=10,d.sender.setParameters(Object.assign(h,p));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.applySimulcastEncodings=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ip()||t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(!((i=n[r])instanceof wy&&this.isVP8Simulcast(i))){e.next=10;break}return o=t[r],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4},a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}],u=o.sender.getParameters(),e.next=10,o.sender.setParameters(Object.assign(u,a));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.isVP8Simulcast=function(e){var t,n,r,i,o;return!!(e instanceof wy&&W_("SIMULCAST")&&"vp8"===this.store.codec&&!Or(t=e._hints).call(t,Ng.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)},n.logSDPExchange=function(e,t,n,r){var i=this;if(W_("SDP_LOGGING"))return tv.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?function(e){i.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0},n.getRemoteSSRC=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteSDP){e.next=2;break}return e.abrupt("return");case 2:return n=this.remoteSDP.getSSRC(t),e.abrupt("return",null==n?void 0:n[0].ssrcId);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setConfiguration=function(e){if(pE().supportPCSetConfiguration){var n=t.resolvePCConfiguration(e);this.peerConnection.setConfiguration(n)}},s(t,[{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}},{key:"dtlsTransportState",get:function(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}}]),t}(Mm);function LC(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=d(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From P2PConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function MC(e,t){var n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=ow(t.width),r.height=ow(t.height);var i=ow(t.framerate||15);document.body.append(n),document.body.append(r);var o=e._mediaStreamTrack;n.srcObject=new MediaStream([o]),n.play();var a=r.getContext("2d");if(!a)throw new Fv(ql.UNEXPECTED_ERROR,"can not get canvas context");var s=pE(),c=r.captureStream(s.supportRequestFrame?0:i).getVideoTracks()[0];c.canvas||(c.canvas=r),r.startCapture=function(){if(!n)return r.stopCapture&&r.stopCapture();if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){var t=n.videoWidth,i=n.videoHeight/t,s=r.width*i;Math.abs(s-r.height)>=2&&(tv.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(s)),r.height=s)}a.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,n.srcObject=new MediaStream([o]))},r.stopCapture=dE((function(){return r.startCapture&&r.startCapture()}),i);var u=c.stop;return c.stop=function(){u.call(c),n&&(n.remove(),n.srcObject=null,n=null),r&&(r.width=0,r.remove(),r.stopCapture&&r.stopCapture(),r.startCapture=void 0,r.stopCapture=void 0,r=null),tv.debug("clean low stream renderer")},c}function UC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UC(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[Array,Array]),Bv("design:returntype",Vl)],xC.prototype,"updateRemoteRTPCapabilities",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[Object,Object,Array,Object,String,String]),Bv("design:returntype",Vl)],xC.prototype,"connect",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[Object,Array]),Bv("design:returntype",Vl)],xC.prototype,"createDataChannels",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[String,Array,String,Object]),Bv("design:returntype",Vl)],xC.prototype,"receive",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],xC.prototype,"batchReceive",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],xC.prototype,"stopReceiving",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],xC.prototype,"muteRemote",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],xC.prototype,"unmuteRemote",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],xC.prototype,"muteLocal",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],xC.prototype,"unmuteLocal",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],xC.prototype,"close",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[String,tE]),Bv("design:returntype",Vl)],xC.prototype,"updateEncoderConfig",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[String,tE]),Bv("design:returntype",Vl)],xC.prototype,"updateSendParameters",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[tE,String]),Bv("design:returntype",Vl)],xC.prototype,"replaceTrack",null),Vv([LC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],xC.prototype,"getRemoteSSRC",null);var VC="v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0\na=msid-semantic: WMS\na=ice-lite\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\nc=IN IP4 127.0.0.1\na=mid:0\n",BC=function(){function e(e){uc(this,"sessionDesc",void 0),uc(this,"_localCapabilities",void 0),uc(this,"_rtpCapabilities",void 0),uc(this,"_candidates",void 0),uc(this,"_iceParameters",void 0),uc(this,"_dtlsParameters",void 0),uc(this,"setup",void 0),uc(this,"currentMidIndex",void 0),uc(this,"cname",void 0),uc(this,"firefoxSsrcMidMap",new Map);var t=e=df(e),n=t.remoteIceParameters,r=t.remoteDtlsParameters,o=t.candidates,a=t.remoteRTPCapabilities,s=t.remoteSetup,c=t.localCapabilities,u=t.cname,d=UR.parse(VC);this._rtpCapabilities=a,this._candidates=o,this._iceParameters=n,this._dtlsParameters=r,this._localCapabilities=c,this.setup=s,this.cname=u;for(var l,p=this.rtpCapabilities.send,f=i(d.mediaDescriptions);!(l=f()).done;){var h=l.value;if(h.attributes.iceUfrag=n.iceUfrag,h.attributes.icePwd=n.icePwd,h.attributes.fingerprints=r.fingerprints,h.attributes.candidates=o,h.attributes.setup=s,"application"===h.media.mediaType&&(h.attributes.sctpPort="5000"),"video"===h.media.mediaType&&(h.media.fmts=p.videoCodecs.map((function(e){return e.payloadType.toString(10)})),h.attributes.payloads=p.videoCodecs,h.attributes.extmaps=p.videoExtensions,W_("PRELOAD_MEDIA_COUNT")>0)){var _=HR([{ssrcId:4e4,rtx:W_("USE_SUB_RTX")?40001:void 0}],this.cname),v=_.ssrcs,m=_.ssrcGroups;h.attributes.ssrcs=v,h.attributes.ssrcGroups=m}if("audio"===h.media.mediaType&&(h.media.fmts=p.audioCodecs.map((function(e){return e.payloadType.toString(10)})),h.attributes.payloads=p.audioCodecs,h.attributes.extmaps=p.audioExtensions,tC(h),W_("PRELOAD_MEDIA_COUNT")>0)){var g=HR([{ssrcId:2e4}],this.cname),E=g.ssrcs,y=g.ssrcGroups;h.attributes.ssrcs=E,h.attributes.ssrcGroups=y}}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}var t=e.prototype;return t.updateRemoteRTPCapabilities=function(e){var t=UR.parse(VC);this._rtpCapabilities=e;for(var n,r=this.rtpCapabilities.send,o=i(t.mediaDescriptions);!(n=o()).done;){var a=n.value;if(a.attributes.iceUfrag=this._iceParameters.iceUfrag,a.attributes.icePwd=this._iceParameters.icePwd,a.attributes.fingerprints=this._dtlsParameters.fingerprints,a.attributes.candidates=this._candidates,a.attributes.setup=this.setup,"application"===a.media.mediaType&&(a.attributes.sctpPort="5000"),"video"===a.media.mediaType&&(a.media.fmts=r.videoCodecs.map((function(e){return e.payloadType.toString(10)})),a.attributes.payloads=r.videoCodecs,a.attributes.extmaps=r.videoExtensions,W_("PRELOAD_MEDIA_COUNT")>0)){var s=HR([{ssrcId:4e4,rtx:W_("USE_SUB_RTX")?40001:void 0}],this.cname),c=s.ssrcs,u=s.ssrcGroups;a.attributes.ssrcs=c,a.attributes.ssrcGroups=u}if("audio"===a.media.mediaType&&(a.media.fmts=r.audioCodecs.map((function(e){return e.payloadType.toString(10)})),a.attributes.payloads=r.audioCodecs,a.attributes.extmaps=r.audioExtensions,W_("PRELOAD_MEDIA_COUNT")>0)){var d=HR([{ssrcId:2e4}],this.cname),l=d.ssrcs,p=d.ssrcGroups;a.attributes.ssrcs=l,a.attributes.ssrcGroups=p}}this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1},t.preloadRemoteMedia=function(e){this.rtpCapabilities;for(var t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send,o=1;o<e;o++){var a=2*o+4e4,s=HR([{ssrcId:2*o+2e4}],this.cname),c=s.ssrcs,u=s.ssrcGroups,d=HR([{ssrcId:a,rtx:W_("USE_SUB_RTX")?a+1:void 0}],this.cname),l=d.ssrcs,p=d.ssrcGroups;this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:p,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.currentMidIndex+=2}this.updateBundleMids()},t.toString=function(){return UR.print(this.sessionDesc)},t.send=function(e,t,n,r){var i=HR(t,this.cname,W_("SYNC_GROUP")?n:void 0),o=i.ssrcs,a=i.ssrcGroups,s=this.findPreloadMediaDesc(o);if(s){if(ip()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){var c=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}var u,d=this.findAvailableMediaIndex(e,o);return-1===d||rp()||op()||up()||0===d&&W_("USE_SUB_RTX")?(u=this.createOrRecycleSendMedia(e,o,a,"sendonly",r),this.updateBundleMids()):((u=df(this.sessionDesc.mediaDescriptions[d])).attributes.direction="sendonly",u.attributes.ssrcs=o,u.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[d]=this.mungSendMediaDesc(u,r)),ip()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,u.attributes.mid),{mid:u.attributes.mid,needExchangeSDP:!0}},t.batchSend=function(e){var t=this,n=e.map((function(e){var n=e.kind,r=e.ssrcMsg,i=e.mslabel;return t.send(n,r,i)})),r=[],i=!1;return n.forEach((function(e){var t=e.mid;e.needExchangeSDP&&(i=!0),r.push(t)})),{mids:r,needExchangeSDP:i}},t.stopSending=function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((function(e){"0"===e.attributes.mid||ip()||rp()||op()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()},t.mute=function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"},t.unmute=function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"},t.muteRemote=function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return Or(e).call(e,t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="inactive"}))},t.unmuteRemote=function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return Or(e).call(e,t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="recvonly"}))},t.receive=function(e,t,n,r){var i=this;e.forEach((function(e,o){i.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[o])})),this.updateBundleMids()},t.stopReceiving=function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((function(e){e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()},t.updateCandidates=function(e){var t=this;e===_m.TCP?this._candidates.forEach((function(e){-1===t._candidates.findIndex((function(t){return"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port}))&&t._candidates.push(jC(jC({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this._candidates=this._candidates.filter((function(e){return"tcp"!==e.transport}));for(var n,r=i(this.sessionDesc.mediaDescriptions);!(n=r()).done;)n.value.attributes.candidates=this.candidates},t.restartICE=function(e){e=df(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((function(t){t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))},t.predictReceivingMids=function(e){for(var t=[],n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t},t.findAvailableMediaIndex=function(e,t){var n=this;return this.sessionDesc.mediaDescriptions.findIndex((function(r){var i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(ip()){if(i){var o=n.firefoxSsrcMidMap.get(t[0].ssrcId);return!(o||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!o||o!==r.attributes.mid)}return!1}return i}))},t.createOrRecycleRecvMedia=function(e,t,n,r,i,o){var a=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,c=rC(a,s,this.localCapabilities.send,a===hm.VIDEO?r:i),u=a===hm.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;var d="".concat(this.currentMidIndex),l={media:{mediaType:a,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:u,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};l=this.mungRecvMediaDsec(l,e,o);var p=this.findFirstClosedMedia(a);if(p){var f=this.sessionDesc.mediaDescriptions.indexOf(p);this.sessionDesc.mediaDescriptions[f]=l}else this.sessionDesc.mediaDescriptions.push(l);return l},t.updateRemoteCodec=function(e,t,n){var r=[].concat(new Set(this._rtpCapabilities.recv.videoCodecs.map((function(e){return e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||""})).filter((function(e){var t;return Or(t=Object.keys(G_)).call(t,e)})))),i=new Set(t);if(r.every((function(e){return i.has(e)})))return tv.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;var o=this._rtpCapabilities.recv.videoCodecs.filter((function(e){return t.some((function(t){var n;return Or(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))}));if(0===o.length)return tv.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;var a,s=[].concat(new Set(o.map((function(e){return e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||""}))));if(tv.debug("updateRemoteCodec, from ".concat(r," to ").concat(s)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((function(e){return"video"===e.media.mediaType&&"recvonly"===e.attributes.direction}));else if((a=this.sessionDesc.mediaDescriptions.filter((function(t){return t.attributes.mid&&Or(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction}))).length!==e.length)return tv.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;this._rtpCapabilities.recv.videoCodecs=o;var c=this.localCapabilities.send,u=this.rtpCapabilities.recv,d=rC(hm.VIDEO,u,c,n);return a.forEach((function(e){var t=d.map((function(e){return e.payloadType.toString(10)}));tv.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from ").concat(e.attributes.payloads," to ").concat(d)),e.attributes.payloads=d,e.media.fmts=t})),!0},t.createOrRecycleSendMedia=function(e,t,n,r,i){var o=this.rtpCapabilities.send,a=e===hm.VIDEO?o.videoCodecs:o.audioCodecs,s=e===hm.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;var c="".concat(this.currentMidIndex),u={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};u=this.mungSendMediaDesc(u,i);var d=this.findFirstClosedMedia(e);if(d){var l=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[l]=u}else this.sessionDesc.mediaDescriptions.push(u);return u},t.updateBundleMids=function(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((function(e){return"0"!==e.media.port})).map((function(e){return e.attributes.mid}))},t.mungRecvMediaDsec=function(e,t,n){var r=df(e);return KR(r),zR(r,t),YR(r,t),qR(r),JR(r,n,this.localCapabilities.send),r},t.mungSendMediaDesc=function(e,t){var n=df(e);return JR(n,t,this.localCapabilities.recv),tC(n),n},t.updateRecvMedia=function(e,t){var n=this.sessionDesc.mediaDescriptions.findIndex((function(t){return t.attributes.mid===e}));if(-1!==n){var r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=r}},t.bumpMid=function(e){this.currentMidIndex+=e},t.findFirstClosedMedia=function(e){return this.sessionDesc.mediaDescriptions.find((function(t){return ip()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port}))},t.findPreloadMediaDesc=function(e){return this.sessionDesc.mediaDescriptions.find((function(t){var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))},t.getSSRC=function(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e})))||void 0===t?void 0:t.attributes.ssrcs},s(e,[{key:"localCapabilities",get:function(){return df(this._localCapabilities)}},{key:"rtpCapabilities",get:function(){return df(this._rtpCapabilities)}},{key:"candidates",get:function(){return df(this._candidates)}},{key:"iceParameters",get:function(){return df(this._iceParameters)}},{key:"dtlsParameters",get:function(){return df(this._dtlsParameters)}}]),e}();function FC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FC(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var GC=function(e){function t(t,n,r){var i;return uc(l(i=e.call(this,t,n)||this),"store",void 0),uc(l(i),"peerConnection",void 0),uc(l(i),"remoteSDP",void 0),uc(l(i),"initialOffer",void 0),uc(l(i),"transportEventReceiver",void 0),uc(l(i),"statsFilter",void 0),uc(l(i),"useXR",W_("USE_XR")),uc(l(i),"localCapabilities",void 0),uc(l(i),"localCandidateCount",0),uc(l(i),"allCandidatesReceived",!1),uc(l(i),"remoteCodecs",void 0),uc(l(i),"dataStreamChannelMap",new Map),uc(l(i),"establishPromise",void 0),uc(l(i),"mutex",new If("NVExtentionsConnection-mutex")),uc(l(i),"rtcMedia",void 0),i.store=n,i.peerConnection=r,i.statsFilter=RC(i.peerConnection,W_("STATS_UPDATE_INTERVAL"),void 0,ip()?1200:void 0),i.bindPCEvents(),i.bindStatsEvents(),i.store.p2pId=i.store.p2pId+1,i.establishPromise=i.establish(),i}p(t,e);var n=t.prototype;return n.establish=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection.createOffer();case 3:if((n=e.sent).sdp){e.next=6;break}throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");case 6:return r=FR(n.sdp),e.next=9,QR({filterRTX:!W_("USE_PUB_RTX")&&!W_("USE_SUB_RTX"),filterVideoFec:W_("FILTER_VIDEO_FEC"),filterAudioFec:W_("FILTER_AUDIO_FEC"),filterVideoCodec:W_("FILTER_VIDEO_CODEC")},{useXR:this.useXR});case 9:return i=e.sent,e.abrupt("return",(this.localCapabilities=i,this.initialOffer=n,WC(WC({},r),{},{rtpCapabilities:i,offerSDP:n.sdp})));case 13:throw e.prev=13,e.t0=e.catch(0),new Fv(ql.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.t0.toString());case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),n.connect=function(){var e=d(c().mark((function e(t,n,r,i,o,a){var s,u,d,l,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.initialOffer){e.next=3;break}throw new Error("Cannot establish NVConnection without initial offer.");case 3:return this.remoteSDP=new BC({remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:eC(this.localCapabilities),cname:a}),s=this.remoteSDP.toString(),u=UR.parse(this.initialOffer.sdp),(d=u.mediaDescriptions.find((function(e){return"audio"===e.media.mediaType})))&&tC(d),this.useXR&&nC(u),l=UR.print(u),p=this.logSDPExchange(l||"","offer","local","connect"),e.next=9,this.peerConnection.setLocalDescription({type:"offer",sdp:l});case 9:return null==p||p(s),e.next=12,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),new Fv(ql.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(e.t0.toString()));case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}(),n.updateRemoteRTPCapabilities=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteCodecs=n,this.localCapabilities&&(r=eC(this.localCapabilities)),i=[].concat(new Set(r&&r.send.videoCodecs.map((function(e){return e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||""})).filter((function(e){var t;return Or(t=Object.keys(G_)).call(t,e)})))),pv.updateRemoteRTPCapabilities(this.store.sessionId,{mids:t,localCodecs:i,remoteCodecs:this.remoteCodecs}),this.remoteSDP){e.next=4;break}return e.abrupt("return",void tv.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(i,", codecs: ").concat(n)));case 4:if(!this.remoteSDP.updateRemoteCodec(t,n,this.store.codec)){e.next=17;break}return e.next=7,this.peerConnection.createOffer();case 7:return o=e.sent,a=this.logSDPExchange(o.sdp||"","offer","local","muteLocal"),e.next=11,this.peerConnection.setLocalDescription(o);case 11:return s=this.remoteSDP.toString(),null==a||a(s),e.next=15,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 15:e.next=18;break;case 17:tv.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateRemoteConnect=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=this.remoteSDP)||void 0===n||n.updateRemoteRTPCapabilities(t),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&(null===(o=this.remoteSDP)||void 0===o||o.updateRemoteCodec([],this.remoteCodecs,this.store.codec)),null===(r=this.remoteSDP)||void 0===r||r.preloadRemoteMedia(2),a=null===(i=this.remoteSDP)||void 0===i?void 0:i.toString(),e.next=5,this.peerConnection.setRemoteDescription({type:"offer",sdp:a});case 5:return e.next=7,this.peerConnection.createAnswer();case 7:return s=e.sent,e.next=10,this.peerConnection.setLocalDescription(s);case 10:tv.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.send=function(e,t,n){var r=this;return PR(c().mark((function i(){var o,a,s,u,d,l,p,f,h,_,v;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,DR(r.mutex.lock("From NVExtentionsConnection.send"));case 2:if(o=i.sent,i.prev=3,r.remoteSDP){i.next=6;break}throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");case 6:if(a=[],e.forEach((function(e){var t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});a.push(t)})),i.t0=ip()&&!0===W_("SIMULCAST"),!i.t0){i.next=12;break}return i.next=12,DR(r.applySimulcastForFirefox(a,e));case 12:return i.next=14,DR(r.peerConnection.createOffer());case 14:return s=i.sent,u=r.remoteSDP.predictReceivingMids(e.length),d=r.mungSendOfferSDP(s.sdp,e,u),l=UR.parse(d),p=u.map((function(e){var t=l.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return WR(t,W_("USE_PUB_RTX"))})),i.prev=19,i.next=22,p;case 22:f=i.sent,i.next=36;break;case 25:return i.prev=25,i.t1=i.catch(19),f=[],r.remoteSDP.receive(e,t,n,f),h=r.remoteSDP.toString(),i.next=31,DR(r.peerConnection.setLocalDescription({type:"offer",sdp:d}));case 31:return i.next=33,DR(r.peerConnection.setRemoteDescription({type:"answer",sdp:h}));case 33:return i.next=35,DR(r.stopSending(u,!0));case 35:throw i.t1;case 36:return r.remoteSDP.receive(e,t,n,f),_=r.remoteSDP.toString(),v=r.logSDPExchange(d,"offer","local","send"),i.next=40,DR(r.peerConnection.setLocalDescription({type:"offer",sdp:d}));case 40:return i.next=42,DR(r.applySimulcastEncodings(a,e));case 42:return i.next=44,DR(r.applySendEncodings(a,e));case 44:return null==v||v(_),i.next=47,DR(r.peerConnection.setRemoteDescription({type:"answer",sdp:_}));case 47:return i.abrupt("return",a.map((function(e,t){var n=u[t];return{localSSRC:p[t],id:n,transceiver:e}})));case 50:throw i.prev=50,i.t2=i.catch(3),i.t2 instanceof Fv?i.t2:new Fv(ql.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(i.t2.toString()));case 53:return i.prev=53,o(),i.finish(53);case 56:case"end":return i.stop()}}),i,null,[[3,50,53,56],[19,25]])})))()},n.stopSending=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}e.t0=void 0,e.next=7;break;case 4:return e.next=6,this.mutex.lock("From NVExtentionsConnection.stopSending");case 6:e.t0=e.sent;case 7:if(r=e.t0,e.prev=8,this.remoteSDP){e.next=11;break}throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");case 11:if((i=this.peerConnection.getTransceivers().filter((function(e){return-1!==t.indexOf(e.mid)}))).length===t.length){e.next=14;break}throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");case 14:return i.map((function(e){var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)})),e.next=17,this.peerConnection.createOffer();case 17:return o=e.sent,a=this.logSDPExchange(o.sdp||"","offer","local","stopSending"),e.next=21,this.peerConnection.setLocalDescription(o);case 21:return this.remoteSDP.stopReceiving(t),s=this.remoteSDP.toString(),null==a||a(s),e.next=26,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 26:e.next=31;break;case 28:throw e.prev=28,e.t1=e.catch(8),new Fv(ql.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(e.t1.toString()));case 31:return e.prev=31,r&&r(),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[8,28,31,34]])})));return function(t,n){return e.apply(this,arguments)}}(),n.createDataChannels=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.createDataChannels before remote SDP created");case 3:return r=this.dataStreamChannelMap.get(t),e.abrupt("return",(r&&"open"===r.readyState?tv.debug("[P2PConnection] Channels are already available and can be reused directly."):((r=this.peerConnection.createDataChannel("datastream-channel",{ordered:!1,maxRetransmits:W_("DATASTREAM_MAX_RETRANSMITS")})).binaryType="arraybuffer",this.dataStreamChannelMap.set(t,r)),void n.forEach((function(e){e._updateOriginDataChannel(r)}))));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0 instanceof Fv?e.t0:new Fv(ql.DATACHANNEL_FAILED,"NVExtentionsConnection.createDataChannels failed; ".concat(e.t0.toString()));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),n.stopDataChannels=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.dataStreamChannelMap.get(t),e.abrupt("return",(null==n||n.close(),void this.dataStreamChannelMap.delete(t)));case 5:throw e.prev=5,e.t0=e.catch(0),e.t0 instanceof Fv?e.t0:new Fv(ql.DATACHANNEL_FAILED,"NVExtentionsConnection.stopDataChannels failed; ".concat(e.t0.toString()));case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),n.receive=function(){var e=d(c().mark((function e(t,n,r,i){var o,a,s,u,d,l,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.receive ".concat(t," before remoteSDP created."));case 3:if(o=this.remoteSDP.send(t,n,r,i),a=o.mid,!o.needExchangeSDP){e.next=18;break}return s=this.remoteSDP.toString(),u=this.logSDPExchange(s,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:s});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return d=e.sent,l=this.mungReceiveAnswerSDP(d.sdp,a,t),null==u||u(l||""),e.next=15,this.peerConnection.setLocalDescription({type:"answer",sdp:l});case 15:tv.debug("[NVExtentionsConnection] receive ".concat(t," by exchanging SDP.")),e.next=19;break;case 18:tv.debug("[NVExtentionsConnection] receive ".concat(t," no need to exchange SDP."));case 19:if(p=this.peerConnection.getTransceivers().find((function(e){return e.mid===a}))){e.next=22;break}throw new Error("Cannot get transceiver after setLocalDescription.");case 22:return e.abrupt("return",{track:p.receiver.track,id:a});case 25:throw e.prev=25,e.t0=e.catch(0),new Fv(ql.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.t0.toString()));case 28:case"end":return e.stop()}}),e,this,[[0,25]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),n.batchReceive=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");case 3:if(n=this.remoteSDP.batchSend(t),r=n.mids,!n.needExchangeSDP){e.next=17;break}return i=this.remoteSDP.toString(),o=this.logSDPExchange(i,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:i});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return a=e.sent,null==o||o(a.sdp||""),e.next=14,this.peerConnection.setLocalDescription(a);case 14:tv.debug("[NVExtentionsConnection] batchReceive by exchanging SDP."),e.next=18;break;case 17:tv.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");case 18:return e.abrupt("return",r.map((function(e){var t=s.peerConnection.getTransceivers().find((function(t){return t.mid===e}));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e}})));case 21:throw e.prev=21,e.t0=e.catch(0),new Fv(ql.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.t0.toString()));case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),n.stopReceiving=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");case 3:return this.remoteSDP.stopSending(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","stopReceiving"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Fv(ql.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),n.muteRemote=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.mute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","muteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Fv(ql.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),n.unmuteRemote=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.unmute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","unmuteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Fv(ql.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),n.muteLocal=function(){var e=d(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map((function(e){e.direction="inactive"})),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","muteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.muteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Fv(ql.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),n.unmuteLocal=function(){var e=d(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map(function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.direction="sendonly";case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","unmuteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.unmuteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Fv(ql.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),n.restartICE=function(e){var t=this;return PR(c().mark((function n(){var r,i,o,a,s,u,d,l,p;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,DR(t.mutex.lock("From NVExtentionsConnection.restartICE"));case 2:if(r=n.sent,n.prev=3,t.remoteSDP){n.next=6;break}throw new Error("Cannot restartICE before remoteSDP created.");case 6:if(!pE().supportPCSetConfiguration){n.next=11;break}i=t.peerConnection.getConfiguration(),o=e===_m.RELAY?"relay":"all",i.iceTransportPolicy!==o&&(tv.debug("restartICE change iceTransportPolicy from [".concat(i.iceTransportPolicy,"] to [").concat(o,"]")),i.iceTransportPolicy=o,t.peerConnection.setConfiguration(i)),n.next=13;break;case 11:if(e!==_m.RELAY){n.next=13;break}return n.abrupt("return");case 13:return e!==_m.RELAY&&t.remoteSDP.updateCandidates(e),n.next=16,DR(t.peerConnection.createOffer({iceRestart:!0}));case 16:if((a=n.sent).sdp){n.next=19;break}throw new Error("Cannot restartICE because restart offer SDP does not exist.");case 19:return s=FR(a.sdp),n.next=22,s.iceParameters;case 22:return u=n.sent,d=u.remoteIceParameters,t.remoteSDP.restartICE(d),l=t.remoteSDP.toString(),p=t.logSDPExchange(a.sdp||"","offer","local","restartICE"),n.next=28,DR(t.peerConnection.setLocalDescription(a));case 28:return null==p||p(l),n.next=31,DR(t.peerConnection.setRemoteDescription({type:"answer",sdp:l}));case 31:n.next=36;break;case 33:n.prev=33,n.t0=n.catch(3),tv.warning("restart ICE failed, abort operation",n.t0);case 36:return n.prev=36,r(),n.finish(36);case 39:case"end":return n.stop()}}),n,null,[[3,33,36,39]])})))()},n.close=function(){var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear()},n.getStats=function(){return this.statsFilter.getStats()},n.getRemoteVideoIsReady=function(e){return this.statsFilter.getVideoIsReady(e)},n.updateEncoderConfig=function(){var e=d(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");case 3:return e.next=5,this.peerConnection.createOffer();case 5:return r=e.sent,i=this.mungSendOfferSDP(r.sdp,[n],[t]),this.remoteSDP.updateRecvMedia(t,n),o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig"),e.next=11,this.peerConnection.setLocalDescription({type:"offer",sdp:i});case 11:return null==a||a(o),e.next=14,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Fv(ql.EXCHANGE_SDP_FAILED,e.t0.toString());case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),n.updateSendParameters=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().filter((function(e){return e.mid===t})),e.t0=1===r.length,!e.t0){e.next=12;break}if(!this.isVP8Simulcast(n)){e.next=10;break}if(e.t1=ip(),e.t1){e.next=8;break}return e.next=8,this.applySimulcastEncodings(r,[n]);case 8:e.next=12;break;case 10:return e.next=12,this.applySendEncodings(r,[n]);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setStatsRemoteVideoIsReady=function(e,t){this.statsFilter.setVideoIsReady2(e,t)},n.replaceTrack=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().find((function(e){return e.mid===n})),e.t0=r,!e.t0){e.next=5;break}return e.next=5,r.sender.replaceTrack(t._mediaStreamTrack);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getP2PConnectionParams=function(){var e;if(null===(e=this.peerConnection.currentLocalDescription)||void 0===e||!e.sdp||!this.localCapabilities)throw new Error;return WC(WC({},FR(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})},n.bindPCEvents=function(){var e=this;this.peerConnection.oniceconnectionstatechange=function(){var t;null===(t=e.onICEConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=function(){var t;null===(t=e.onConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.connectionState)},this.peerConnection.onicecandidate=function(t){t.candidate?e.localCandidateCount+=1:(e.peerConnection.onicecandidate=null,e.allCandidatesReceived=!0,tv.debug("[pc-".concat(e.store.p2pId,"] local candidate count"),e.localCandidateCount))},setTimeout((function(){e.allCandidatesReceived||(e.allCandidatesReceived=!0,tv.debug("[pc-".concat(e.store.p2pId,"] onicecandidate timeout, local candidate count"),e.localCandidateCount))}),W_("CANDIDATE_TIMEOUT"))},n.unbindPCEvents=function(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null},t.resolvePCConfiguration=function(e){var n,r,i={iceServers:[]};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Xp(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(n=i.iceServers).push.apply(n,t.turnServerConfigToIceServers(e.turnServer.servers)),W_("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,t.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),W_("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),i},t.turnServerConfigToIceServers=function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(rw(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!W_("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t},n.applySendEncodings=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u,d,l,p,f,h,_,v,m,g,E;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,pE().supportSetRtpSenderParameters){e.next=3;break}return e.abrupt("return");case 3:if(t.length===n.length){e.next=5;break}return e.abrupt("return");case 5:r=0;case 6:if(!(r<t.length)){e.next=32;break}if(i=t[r],!((o=n[r])&&o instanceof wy)){e.next=29;break}if(!this.isVP8Simulcast(o)){e.next=11;break}return e.abrupt("continue",29);case 11:d={},l={},e.t0=o._optimizationMode,e.next="motion"===e.t0?15:"detail"===e.t0?17:19;break;case 15:return d.degradationPreference="maintain-framerate",e.abrupt("break",20);case 17:return d.degradationPreference="maintain-resolution",e.abrupt("break",20);case 19:d.degradationPreference="balanced";case 20:return null!==(a=o._encoderConfig)&&void 0!==a&&a.bitrateMax&&(l.maxBitrate=1e3*(null===(p=o._encoderConfig)||void 0===p?void 0:p.bitrateMax)),Or(s=o._hints).call(s,Ng.LOW_STREAM)&&(null!==(f=o._encoderConfig)&&void 0!==f&&f.frameRate&&(l.maxFramerate=ow(o._encoderConfig.frameRate)),null!==(h=o._encoderConfig)&&void 0!==h&&h.scaleResolutionDownBy&&(null===(_=o._encoderConfig)||void 0===_?void 0:_.scaleResolutionDownBy)>1&&(l.scaleResolutionDownBy=o._encoderConfig.scaleResolutionDownBy)),W_("DSCP_TYPE")&&mp()&&(m=W_("DSCP_TYPE"),Or(v=["very-low","low","medium","high"]).call(v,m)&&(l.networkPriority=m)),g=i.sender.getParameters(),E=null===(u=g.encodings)||void 0===u?void 0:u[0],ip()&&!E&&(d.encodings=[l]),E&&Object.assign(E,l),Object.assign(g,d),e.next=29,i.sender.setParameters(g);case 29:r++,e.next=6;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),tv.debug("Apply RTPSendEncodings failed.");case 37:case"end":return e.stop()}}),e,this,[[0,34]])})));return function(t,n){return e.apply(this,arguments)}}(),n.mungSendOfferSDP=function(e,t,n){var r=this,i=UR.parse(e);return t.forEach((function(e,t){var o=n[t],a=i.mediaDescriptions.find((function(e){return e.attributes.mid===o}));a&&(zR(a,e),XR(a,e,r.store.codec))})),UR.print(i)},n.mungReceiveAnswerSDP=function(e,t,n){var r=UR.parse(e),i=r.mediaDescriptions.find((function(e){return e.attributes.mid===t}));return i&&n===hm.AUDIO&&"audio"===i.media.mediaType&&tC(i),this.useXR&&nC(r),UR.print(r)},n.bindStatsEvents=function(){var e=this;this.statsFilter.onFirstAudioReceived=function(t){var n;null===(n=e.onFirstAudioReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoReceived=function(t){var n;null===(n=e.onFirstVideoReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstAudioDecoded=function(t){var n;null===(n=e.onFirstAudioDecoded)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoDecoded=function(t,n,r){var i;null===(i=e.onFirstVideoDecoded)||void 0===i||i.call(e,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=function(t,n){var r;null===(r=e.onSelectedLocalCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=function(t,n){var r;null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onFirstVideoDecodedTimeout=function(t){var n;null===(n=e.onFirstVideoDecodedTimeout)||void 0===n||n.call(e,t)}},n.unbindStatsEvents=function(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0},n.applySimulcastForFirefox=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u,d,l,p,f,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(d=t[r],!((l=n[r])instanceof wy&&!Or(i=l._hints).call(i,Ng.LOW_STREAM)&&null!==(o=l._encoderConfig)&&void 0!==o&&o.bitrateMax&&(null===(a=l._encoderConfig)||void 0===a?void 0:a.bitrateMax)>200&&null!==(s=l._scalabilityMode)&&void 0!==s&&s.numSpatialLayers&&(null===(u=l._scalabilityMode)||void 0===u?void 0:u.numSpatialLayers)>1&&"vp8"===this.store.codec)){e.next=10;break}return p={},f={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4},p.encodings=[{rid:"m",active:!0,maxBitrate:f.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:f.high}],h=d.sender.getParameters(),e.next=10,d.sender.setParameters(Object.assign(h,p));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.applySimulcastEncodings=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ip()||t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(!((i=n[r])instanceof wy&&this.isVP8Simulcast(i))){e.next=10;break}return o=t[r],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4},a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}],u=o.sender.getParameters(),e.next=10,o.sender.setParameters(Object.assign(u,a));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.isVP8Simulcast=function(e){var t,n,r,i,o;return!!(e instanceof wy&&W_("SIMULCAST")&&"vp8"===this.store.codec&&!Or(t=e._hints).call(t,Ng.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)},n.logSDPExchange=function(e,t,n,r){var i=this;if(W_("SDP_LOGGING"))return tv.upload("exchanging ".concat(n," ").concat(t," SDP during NVExtentionsConnection.").concat(r,"\n"),e),"offer"===t?function(e){i.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0},n.getRemoteSSRC=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteSDP){e.next=2;break}return e.abrupt("return");case 2:return n=this.remoteSDP.getSSRC(t),e.abrupt("return",null==n?void 0:n[0].ssrcId);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setConfiguration=function(e){if(pE().supportPCSetConfiguration){var n=t.resolvePCConfiguration(e);this.peerConnection.setConfiguration(n)}},s(t,[{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}}]),t}(Mm);function HC(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=d(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From NVExtentionsConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function zC(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=LR,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new KC(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function KC(e){function t(e){if(Object(e)!==e)return Vl.reject(new TypeError(e+" is not an object."));var t=e.done;return Vl.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(KC=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Vl.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Vl.reject(e):t(n.apply(this.s,arguments))}},new KC(e)}Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[Object,Object,Array,Object,String,String]),Bv("design:returntype",Vl)],GC.prototype,"connect",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[Array,Array]),Bv("design:returntype",Vl)],GC.prototype,"updateRemoteRTPCapabilities",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Vl)],GC.prototype,"updateRemoteConnect",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[Object,Array]),Bv("design:returntype",Vl)],GC.prototype,"createDataChannels",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[String,Array,String,Object]),Bv("design:returntype",Vl)],GC.prototype,"receive",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],GC.prototype,"batchReceive",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],GC.prototype,"stopReceiving",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],GC.prototype,"muteRemote",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],GC.prototype,"unmuteRemote",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],GC.prototype,"muteLocal",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],GC.prototype,"unmuteLocal",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],GC.prototype,"close",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[String,tE]),Bv("design:returntype",Vl)],GC.prototype,"updateEncoderConfig",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[String,tE]),Bv("design:returntype",Vl)],GC.prototype,"updateSendParameters",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[tE,String]),Bv("design:returntype",Vl)],GC.prototype,"replaceTrack",null),Vv([HC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],GC.prototype,"getRemoteSSRC",null);var YC=function(e){function t(n,r){var i;return uc(l(i=e.call(this,n,r)||this),"store",void 0),uc(l(i),"peerConnection",void 0),uc(l(i),"cname",void 0),uc(l(i),"mutex",new If("DataChannelConnection-mutex")),uc(l(i),"dataChannel",void 0),uc(l(i),"_p2pConnection",void 0),uc(l(i),"establishPromise",void 0),uc(l(i),"_nvMedia",void 0),i.store=r,i.store.dcId=i.store.dcId+1,i.peerConnection=new RTCPeerConnection(t.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),i.dataChannel=i.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),i.dataChannel.binaryType="arraybuffer",i._p2pConnection=new GC(n,r,i.peerConnection),i.bindPCEvents(),i.establishPromise=i._p2pConnection.establishPromise,i}p(t,e);var n=t.prototype;return n.establish=function(){var e=d(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=this._nvMedia)||void 0===t?void 0:t.getLocalRtpCapabilities(),e.next=3,this._p2pConnection.establish(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getP2PConnectionParams=function(){return this._p2pConnection.getP2PConnectionParams()},n.connect=function(){var e=d(c().mark((function e(t,n,r,i,o,a){var s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cname=a,e.next=3,this._p2pConnection.connect(t,n,r,i,o,a);case 3:return e.next=5,new Vl((function(e,t){var n=setTimeout((function(){s.closeSignal(),t(new Fv(ql.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(r))))}),2e3);s.dataChannel.onopen=function(){if("open"===s.dataChannel.readyState)return clearTimeout(n),void e()},s.dataChannel.onerror=function(e){s.closeSignal(),t(e)}}));case 5:return e.abrupt("return",{transmitter:this.dataChannel,close:this.closeSignal.bind(this)});case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}(),n.updateRemoteRTPCapabilities=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._p2pConnection.updateRemoteRTPCapabilities(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.send=function(e,t,n){var r=this;return PR(c().mark((function i(){var o;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,DR(r.mutex.lock("From DataChannelConnection.send"));case 2:return o=i.sent,i.prev=3,i.delegateYield(xR(zC(r._p2pConnection.send(e,t,n))),"t0",5);case 5:return i.abrupt("return",i.t0);case 6:return i.prev=6,o(),i.finish(6);case 9:case"end":return i.stop()}}),i,null,[[3,,6,9]])})))()},n.stopSending=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._p2pConnection.stopSending(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.createDataChannels=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._p2pConnection.createDataChannels(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.stopDataChannels=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._p2pConnection.stopDataChannels(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.receive=function(){var e=d(c().mark((function e(t,n,r,i){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._nvMedia){e.next=7;break}return tv.debug("[DataChannelConnection] receive ".concat(t," by DataChannel.")),e.next=4,this._nvMedia.reveiveByRTCMedia(t,n,this.cname);case 4:e.t0=e.sent,e.next=11;break;case 7:return tv.debug("[DataChannelConnection] receive ".concat(t," by WebRTC.")),e.next=10,this._p2pConnection.receive(t,n,r,i);case 10:e.t0=e.sent;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),n.batchReceive=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=[],e.next=3,this._p2pConnection.batchReceive(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.stopReceiving=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.stopReceiving(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.muteRemote=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.muteRemote(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.unmuteRemote=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.unmuteRemote(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.muteLocal=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.muteLocal(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.unmuteLocal=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.unmuteLocal(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.restartICE=function(e){var t=this;return PR(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(xR(zC(t._p2pConnection.restartICE(e))),"t0",1);case 1:return n.abrupt("return",n.t0);case 2:case"end":return n.stop()}}),n)})))()},n.close=function(){var e;null===(e=this._nvMedia)||void 0===e||e.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)},n.getStats=function(){return this._p2pConnection.getStats()},n.getRemoteVideoIsReady=function(e){return this._p2pConnection.getRemoteVideoIsReady(e)},n.updateRemoteConnect=function(e){var t;null===(t=this._nvMedia)||void 0===t||t.setRemoteRtpCapabilities(e),this._p2pConnection.updateRemoteConnect(e)},n.updateEncoderConfig=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.updateEncoderConfig(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateSendParameters=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.updateSendParameters(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setStatsRemoteVideoIsReady=function(e,t){this._p2pConnection.setStatsRemoteVideoIsReady(e,t)},n.replaceTrack=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.replaceTrack(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getRemoteSSRC=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._p2pConnection.getRemoteSSRC(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.logSDPExchange=function(e,t,n,r){var i=this;if(W_("SDP_LOGGING"))return tv.upload("exchanging ".concat(n," ").concat(t," SDP during DataChannelConnection.").concat(r,"\n"),e),"offer"===t?function(e){i.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0},t.resolvePCConfiguration=function(e){var n,r,i={iceServers:[]};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Xp(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(n=i.iceServers).push.apply(n,t.turnServerConfigToIceServers(e.turnServer.servers)),W_("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,t.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),W_("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),i},t.turnServerConfigToIceServers=function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(rw(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!W_("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t},n.bindPCEvents=function(){var e=this;this._p2pConnection.onICEConnectionStateChange=function(t){var n;return null===(n=e.onICEConnectionStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onConnectionStateChange=function(t){var n;return null===(n=e.onConnectionStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onDTLSTransportStateChange=function(t){var n;return null===(n=e.onDTLSTransportStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onDTLSTransportError=function(t){var n;return null===(n=e.onDTLSTransportError)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onICETransportStateChange=function(t){var n;return null===(n=e.onICETransportStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstAudioReceived=function(t){var n;return null===(n=e.onFirstAudioReceived)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstVideoReceived=function(t){var n;return null===(n=e.onFirstVideoReceived)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstAudioDecoded=function(t){var n;return null===(n=e.onFirstAudioDecoded)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstVideoDecoded=function(t,n,r){var i;return null===(i=e.onFirstVideoDecoded)||void 0===i?void 0:i.call(e,t,n,r)},this._p2pConnection.onFirstVideoDecodedTimeout=function(t){var n;return null===(n=e.onFirstVideoDecodedTimeout)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onSelectedLocalCandidateChanged=function(t,n){var r;return null===(r=e.onSelectedLocalCandidateChanged)||void 0===r?void 0:r.call(e,t,n)},this._p2pConnection.onSelectedRemoteCandidateChanged=function(t,n){var r;return null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r?void 0:r.call(e,t,n)}},n.closeSignal=function(){this.dataChannel.close(),this.peerConnection.close()},n.unbindConnectionEvents=function(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0},n.setConfiguration=function(e){this._p2pConnection.setConfiguration(e)},s(t,[{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}}]),t}(Mm);function qC(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=d(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From DataChannelConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function JC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JC(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[Object,Object,Array,Object,String,String]),Bv("design:returntype",Vl)],YC.prototype,"connect",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[Array,Array]),Bv("design:returntype",Vl)],YC.prototype,"updateRemoteRTPCapabilities",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[Object,Array]),Bv("design:returntype",Vl)],YC.prototype,"createDataChannels",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[String,Array,String,Object]),Bv("design:returntype",Vl)],YC.prototype,"receive",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],YC.prototype,"stopReceiving",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],YC.prototype,"muteRemote",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],YC.prototype,"unmuteRemote",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],YC.prototype,"muteLocal",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],YC.prototype,"unmuteLocal",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],YC.prototype,"close",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[String,tE]),Bv("design:returntype",Vl)],YC.prototype,"updateEncoderConfig",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[String,tE]),Bv("design:returntype",Vl)],YC.prototype,"updateSendParameters",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[tE,String]),Bv("design:returntype",Vl)],YC.prototype,"replaceTrack",null),Vv([qC,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],YC.prototype,"getRemoteSSRC",null);var QC=function(e){function t(){var t;return uc(l(t=e.call(this)||this),"uplinkStatsUploadInterval",void 0),uc(l(t),"uplinkRelatedStatsUploadInterval",void 0),uc(l(t),"uplinkDenoiserStatsUploadInterval",void 0),uc(l(t),"transportStatsUploadInterval",void 0),uc(l(t),"uplinkExtensionStatsUploadInterval",void 0),uc(l(t),"downlinkExtensionStatsUploadInterval",void 0),uc(l(t),"extensionUsageStatsUploadInterval",void 0),uc(l(t),"downlinkStatsUploadInterval",void 0),uc(l(t),"downlinkRelatedStatsUploadInterval",void 0),uc(l(t),"lastStats",void 0),uc(l(t),"uploadUnplinkStarted",!1),uc(l(t),"uploadDownlinkStarted",!1),uc(l(t),"uploadTransportStarted",!1),uc(l(t),"uploadExtensionUsageStarted",!1),uc(l(t),"requestStats",void 0),uc(l(t),"requestTransportStats",void 0),uc(l(t),"requestLocalMedia",void 0),uc(l(t),"requestRemoteMedia",void 0),uc(l(t),"requestAllTracks",void 0),uc(l(t),"requestVideoIsReady",void 0),uc(l(t),"requestUpload",void 0),t}p(t,e);var n=t.prototype;return n.startUploadTransportStats=function(e){var t=this;this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval((function(){var n,r=null===(n=t.requestStats)||void 0===n?void 0:n.call(t);if(r){var i=sw(r);if(e){var o,a=null===(o=t.requestStats)||void 0===o?void 0:o.call(t,!0);if(a){var s=sw(a);i.connectionType+=s.connectionType<<3}i.connectionType+=110}else i.connectionType+=100;uf((function(){var e;null===(e=t.requestUpload)||void 0===e||e.call(t,Av.TRANSPORT_STATS,i)}))}}),1e3))},n.startUploadExtensionUsageStats=function(){var e=this;if(!this.uploadExtensionUsageStarted){this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);var t=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(d(c().mark((function n(){var r,o,a,s,u,d,l,p,f,h,_,v,m,g,E,y,b,S;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=Date.now(),u={connectionInterval:W_("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:s},d=[],l=(null===(r=e.requestAllTracks)||void 0===r?void 0:r.call(e))||[],p=i(l);case 4:if((f=p()).done){n.next=15;break}if(h=f.value,n.t0=!h.muted&&h.enabled,!n.t0){n.next=13;break}return n.t1=d,n.next=11,h.getProcessorUsage();case 11:n.t2=n.sent,d=n.t1.concat.call(n.t1,n.t2);case 13:n.next=4;break;case 15:_=(null===(o=e.requestRemoteMedia)||void 0===o?void 0:o.call(e))||[],v=i(_);case 17:if((m=v()).done){n.next=35;break}if(g=m.value,E=g[0],y=g[1],n.t3=y.has(hm.VIDEO)&&E.videoTrack,!n.t3){n.next=26;break}return n.t4=d,n.next=24,E.videoTrack.getProcessorUsage();case 24:n.t5=n.sent,d=n.t4.concat.call(n.t4,n.t5);case 26:if(n.t6=y.has(hm.AUDIO)&&E.audioTrack,!n.t6){n.next=33;break}return n.t7=d,n.next=31,E.audioTrack.getProcessorUsage();case 31:n.t8=n.sent,d=n.t7.concat.call(n.t7,n.t8);case 33:n.next=17;break;case 35:if(0!==d.length){n.next=37;break}return n.abrupt("return");case 37:u.details=function(e,t){for(var n,r={},o=i(e);!(n=o()).done;){var a,s,c,u=n.value,d=u.id,l=u.value,p=u.level,f=u.direction,h=null!==(a=t.get(d))&&void 0!==a?a:0,_=2===l?h+W_("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:h;t.set(d,_),r[d]?(2===l&&(r[d].value=l),p>r[d].level&&(r[d].level=p),"remote"===f&&(r[d].remoteUidCount+=1),r[d].totalTs=null!==(s=t.get(d))&&void 0!==s?s:0):r[d]={value:l,level:p,remoteUidCount:"local"===f?0:1,totalTs:null!==(c=t.get(d))&&void 0!==c?c:0}}return Object.keys(r).map((function(e){var t=r[e];return{id:e,level:t.level,value:t.value,totalTs:t.totalTs}}))}(d,t),b=Date.now(),S=b>s?b:s+1,null===(a=e.requestUpload)||void 0===a||a.call(e,Av.EXTENSION_USAGE_STATS,{usageStats:u,sendTs:S});case 40:case"end":return n.stop()}}),n)}))),W_("EXTENSION_USAGE_UPLOAD_INTERVAL"))}},n.startUploadUplinkStats=function(){var e=this;this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&(e.uploadUplinkStats(n),e.lastStats=n)}),3e3),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&e.uploadRelatedUplinkStats(n,e.lastStats),e.lastStats=n}),1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestAllTracks)||void 0===t?void 0:t.call(e);n&&e.uploadDenoiserStats(n)}),2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestAllTracks)||void 0===t?void 0:t.call(e);n&&e.uploadExtensionStats(n)}),2e3))},n.uploadUplinkStats=function(e){var t,n=this;((null===(t=this.requestLocalMedia)||void 0===t?void 0:t.call(this))||[]).forEach((function(t){var r=t[0],i=t[1],o=i.track,a=i.ssrcs;switch(r){case mm.LocalVideoLowTrack:case mm.LocalVideoTrack:var s=function(e,t,n){var r,i=t.videoSend.find((function(t){return t.ssrc===e}));if(!i)return null;var o={id:yf(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:i.ssrc.toString()};switch(o.A_vstd=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||n._mediaStreamTrack&&!n._mediaStreamTrack.enabled?"1":"0",i.sentFrame&&(o.A_fhs=i.sentFrame.height.toString(),o.A_frs=i.sentFrame.frameRate.toString(),o.A_fws=i.sentFrame.width.toString()),i.adaptionChangeReason){case"none":o.A_ac="0";break;case"cpu":o.A_ac="1";break;case"bandwidth":o.A_ac="2";break;case"other":o.A_ac="3"}return o.A_lvps=$g[n._player?n._player.videoElementStatus:"uninit"].toString(),o.A_nr=null===(r=i.nacksCount)||void 0===r?void 0:r.toString(),i.avgEncodeMs&&(o.A_aem=i.avgEncodeMs.toFixed(0).toString()),W_("P2P")&&(i.bytes&&(o.bytesSent=i.bytes.toString()),"number"==typeof i.packetsLost&&(o.packetsLost=i.packetsLost.toString()),i.packets&&(o.packetsSent=i.packets.toString())),o}(a[0].ssrcId,e,o),c=r===mm.LocalVideoTrack?function(e,t,n){var r,i,o,a,s,c,u,d,l=t.videoSend.find((function(t){return t.ssrc===e}));if(!l)return null;var p={id:yf(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:l.ssrc.toString()},f=null!==(r=null!==(i=null===(o=l.inputFrame)||void 0===o?void 0:o.height)&&void 0!==i?i:null==n?void 0:n._videoHeight)&&void 0!==r?r:0,h=null!==(a=null!==(s=null===(c=l.inputFrame)||void 0===c?void 0:c.width)&&void 0!==s?s:null==n?void 0:n._videoWidth)&&void 0!==a?a:0,_=null!==(u=null===(d=l.inputFrame)||void 0===d?void 0:d.frameRate)&&void 0!==u?u:0;return f&&(p.A_fhi=f+""),h&&(p.A_fwi=h+""),_&&(p.A_fri=_+""),p}(a[0].ssrcId,e,o):null;s&&uf((function(){var e;return null===(e=n.requestUpload)||void 0===e?void 0:e.call(n,Av.PUBLISH_STATS,{stream_type:r===mm.LocalVideoLowTrack?"low":"high",stats:XC(XC({},s),c)})}));var u=function(e){var t={id:"bweforvideo",timestamp:new Date(e.timestamp).toISOString(),type:"VideoBwe"};return e.bitrate.retransmit&&(t.A_rb=e.bitrate.retransmit.toString()),e.bitrate.targetEncoded&&(t.A_teb=e.bitrate.targetEncoded.toString()),t.A_aeb=e.bitrate.actualEncoded.toString(),t.A_tb=e.bitrate.transmit.toString(),void 0!==e.sendBandwidth&&(t.A_asb=e.sendBandwidth.toString()),t}(e);u&&setTimeout((function(){var e;return null===(e=n.requestUpload)||void 0===e?void 0:e.call(n,Av.PUBLISH_STATS,{stream_type:r===mm.LocalVideoLowTrack?"low":"high",stats:u})}),1e3);break;case mm.LocalAudioTrack:var d=function(e,t,n){var r=t.audioSend.find((function(t){return t.ssrc===e}));if(!r)return null;var i={id:yf(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:r.ssrc.toString()};return i.A_astd=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||n._mediaStreamTrack&&!n._mediaStreamTrack.enabled?"1":"0",r.inputLevel?i.A_ail=Math.round(100*r.inputLevel).toString():i.A_ail=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),i.A_apil=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),r.aecReturnLoss&&(i.A_ecrl=Math.round(r.aecReturnLoss).toString()),r.aecReturnLossEnhancement&&(i.A_ecrle=Math.round(r.aecReturnLossEnhancement).toString()),W_("P2P")&&(r.bytes&&(i.bytesSent=r.bytes.toString()),"number"==typeof r.packetsLost&&(i.packetsLost=r.packetsLost.toString()),r.packets&&(i.packetsSent=r.packets.toString())),i}(a[0].ssrcId,e,o);d&&uf((function(){var e;return null===(e=n.requestUpload)||void 0===e?void 0:e.call(n,Av.PUBLISH_STATS,{stream_type:"high",stats:d})}))}}))},n.uploadRelatedUplinkStats=function(e,t){var n,r=this;((null===(n=this.requestLocalMedia)||void 0===n?void 0:n.call(this))||[]).filter((function(e){var t=e[0];return t===mm.LocalVideoLowTrack||t===mm.LocalVideoTrack})).forEach((function(t){var n=t[0],i=function(e,t){var n=t.videoSend.find((function(t){return t.ssrc===e}));return n?{mediaType:"video",isVideoMute:!1,frameRateInput:n.inputFrame&&n.inputFrame.frameRate.toString(),frameRateSent:n.sentFrame&&n.sentFrame.frameRate.toString(),googRtt:n.rttMs.toString(),qpSumPerFrame:Math.floor(n.qpSumPerFrame).toString()}:null}(t[1].ssrcs[0].ssrcId,e);i&&uf((function(){var e;null===(e=r.requestUpload)||void 0===e||e.call(r,Av.PUBLISH_RELATED_STATS,{stream_type:n===mm.LocalVideoLowTrack?"low":"high",stats:i})}))}))},n.uploadDenoiserStats=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n instanceof ny){var r,i,o,a=null===(r=(i=n._external).getDenoiserStats)||void 0===r?void 0:r.call(i);return void(a&&(null===(o=this.requestUpload)||void 0===o||o.call(this,Av.DENOISER_STATS,a)))}}},n.uploadExtensionStats=function(e){for(var t=this,n=0;n<e.length;n++)e[n].getProcessorStats().forEach((function(e){var n;null===(n=t.requestUpload)||void 0===n||n.call(t,e.type,e.stats)}))},n.stopUploadUplinkStats=function(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)},n.startUploadDownlinkStats=function(){var e=this;if(!this.uploadDownlinkStarted){var t;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);var n=!1;this.downlinkStatsUploadInterval=window.setInterval((function(){var r,i=null===(r=e.requestStats)||void 0===r?void 0:r.call(e,!0);i&&(e.uploadDownlinkStats(i,n,t),t=i),n=!n}),3e3),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e,!0);n&&(e.uploadRelatedDownlinkStats(n,e.lastStats),e.lastStats=n)}),1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestRemoteMedia)||void 0===t?void 0:t.call(e);n&&e.uploadDownlinkExtensionStats(n)}),2e3)}},n.uploadDownlinkStats=function(e,t,n){var r,i=this;((null===(r=this.requestRemoteMedia)||void 0===r?void 0:r.call(this))||[]).forEach((function(r){var o=r[0],a=r[1];if(a.has(hm.VIDEO)&&o.videoTrack){var s=o.videoTrack?function(e,t,n,r,i){var o=t.videoRecv.find((function(t){return t.ssrc===e}));if(!o)return null;var a,s,c={id:yf(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:o.ssrc.toString()};if(c.bytesReceived=o.bytes.toString(),c.packetsLost=o.packetsLost.toString(),c.packetsReceived=o.packets.toString(),o.framesRateFirefox&&(c.A_frr=o.framesRateFirefox.toString()),o.receivedFrame?(c.A_frr=o.receivedFrame.frameRate.toString(),c.A_fhr=o.receivedFrame.height.toString(),c.A_fwr=o.receivedFrame.width.toString()):(c.A_fhr=null===(a=r._videoHeight)||void 0===a?void 0:a.toString(),c.A_fwr=null===(s=r._videoWidth)||void 0===s?void 0:s.toString()),c.A_frd=o.decodeFrameRate.toString(),o.outputFrame&&(c.A_fro=o.outputFrame.frameRate.toString()),void 0!==o.jitterBufferMs&&(c.A_jbm=Math.floor(o.jitterBufferMs).toString()),void 0!==o.currentDelayMs&&(c.A_cdm=Math.floor(o.currentDelayMs).toString()),c.A_fs=o.firsCount.toString(),c.A_ns=o.nacksCount.toString(),c.A_ps=o.plisCount.toString(),r&&(c.A_vrtd=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?"0":"1"),r._player&&r._player.freezeTimeCounterList.length>0&&(c.A_vrft=Math.round(r._player.freezeTimeCounterList.splice(0,1)[0]).toString()),i&&r._player&&"visible"===fy.visibility){var u=Math.min(6e3,r._player.renderFreezeAccTime);c.A_vrrft=Math.round(u).toString(),r._player.renderFreezeAccTime=Math.max(0,r._player.renderFreezeAccTime-u)}if(c.A_rvps=$g[r._player?r._player.videoElementStatus:"uninit"].toString(),n){var d=n.videoRecv.find((function(t){return t.ssrc===e}));if(d&&void 0!==o.totalInterFrameDelay&&void 0!==o.totalSquaredInterFrameDelay&&void 0!==d.totalInterFrameDelay&&void 0!==d.totalSquaredInterFrameDelay){var l=o.totalInterFrameDelay-d.totalInterFrameDelay,p=o.totalSquaredInterFrameDelay-d.totalSquaredInterFrameDelay,f=o.framesDecodeCount-d.framesDecodeCount,h=l/f*1e3,_=Math.round(1e3*Math.sqrt((p-Math.pow(l,2)/f)/f));!isNaN(_)&&h+_>Math.max(3*h,h+150)&&(c.A_ifdsd=_.toString())}}return c}(o._videoSSRC,e,n,o.videoTrack,t):void 0;s&&uf((function(){var e;return null===(e=i.requestUpload)||void 0===e?void 0:e.call(i,Av.SUBSCRIBE_STATS,{stream_id:o.uid,stats:s})}))}if(a.has(hm.AUDIO)&&o.audioTrack){var c=o.audioTrack?function(e,t,n,r){var i=t.audioRecv.find((function(t){return t.ssrc===e}));if(!i)return null;var o={id:yf(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:i.ssrc.toString()};if(o.bytesReceived=i.bytes.toString(),o.packetsLost=i.packetsLost.toString(),o.packetsReceived=i.packets.toString(),i.outputLevel?o.A_aol=Math.round(100*i.outputLevel).toString():o.A_aol=Math.round(100*r._source.getAccurateVolumeLevel()).toString(),o.A_apol=Math.round(100*r._source.getAccurateVolumeLevel()).toString(),r&&(o.A_artd=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?"0":"1"),o.A_jr=i.jitterMs.toString(),o.A_jbm=Math.floor(i.jitterBufferMs).toString(),o.A_cdm=Math.floor(i.jitterBufferMs).toString(),o.A_raps=$g[BE.getPlayerState(r.getTrackId())].toString(),n){var a=n.audioRecv.find((function(t){return t.ssrc===e}));if(a){var s=i.concealedSamples-a.concealedSamples;s>0&&(o.A_cs=Math.round(s).toString())}}return o}(o._audioSSRC,e,n,o.audioTrack):void 0;c&&uf((function(){var e;return null===(e=i.requestUpload)||void 0===e?void 0:e.call(i,Av.SUBSCRIBE_STATS,{stream_id:o.uid,stats:c})}))}}))},n.uploadRelatedDownlinkStats=function(e,t){var n,r=this;((null===(n=this.requestRemoteMedia)||void 0===n?void 0:n.call(this))||[]).forEach((function(n){var i=n[0],o=n[1];if(o.has(hm.VIDEO)&&i.videoTrack){var a,s=!0===(i._videoSSRC&&(null===(a=r.requestVideoIsReady)||void 0===a?void 0:a.call(r,i._videoSSRC))||!1),c=function(e,t,n,r,i,o){var a=n.videoRecv.find((function(t){return t.ssrc===e})),s=i?i.videoRecv.find((function(t){return t.ssrc===e})):void 0;if(!a)return null;var c=ew.isRemoteVideoFreeze(o,a,s)&&t,u={mediaType:"video",isVideoMute:!1,peerId:r,frameRateReceived:a.receivedFrame&&a.receivedFrame.frameRate.toString(),frameRateDecoded:a.decodedFrame&&a.decodedFrame.frameRate.toString(),isFreeze:c,bytesReceived:a.bytes.toString(),packetsReceived:a.packets.toString(),packetsLost:a.packetsLost.toString(),qpSumPerFrame:Math.floor(a.qpSumPerFrame).toString()};return a.framesRateFirefox&&(u.frameRateDecoded=a.framesRateFirefox.toString(),u.frameRateReceived=a.framesRateFirefox.toString()),u}(i._videoSSRC,s,e,i.uid,t,i.videoTrack);c&&uf((function(){var e;null===(e=r.requestUpload)||void 0===e||e.call(r,Av.SUBSCRIBE_RELATED_STATS,{stream_id:i.uid,stats:c})}))}if(o.has(hm.AUDIO)&&i.audioTrack){var u=function(e,t,n,r){var i=t.audioRecv.find((function(t){return t.ssrc===e}));if(!i)return null;var o=ew.isRemoteAudioFreeze(r);return{mediaType:"audio",isAudioMute:!1,peerId:n,googJitterReceived:i.jitterMs.toString(),isFreeze:o,bytesReceived:i.bytes.toString(),packetsReceived:i.packets.toString(),packetsLost:i.packetsLost.toString(),frameReceived:i.receivedFrames.toString(),frameDropped:i.droppedFrames.toString()}}(i._audioSSRC,e,i.uid,i.audioTrack);u&&uf((function(){var e;null===(e=r.requestUpload)||void 0===e||e.call(r,Av.SUBSCRIBE_RELATED_STATS,{stream_id:i.uid,stats:u})}))}}))},n.stopUploadDownlinkStats=function(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)},n.stopUploadTransportStats=function(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)},n.stopUploadExtensionUsageStats=function(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)},n.uploadDownlinkExtensionStats=function(e){var t=this;e.forEach((function(e){var n=e[0],r=e[1];r.has(hm.VIDEO)&&n.videoTrack&&n.videoTrack.getProcessorStats().forEach((function(e){var n;null===(n=t.requestUpload)||void 0===n||n.call(t,e.type,e.stats)})),r.has(hm.AUDIO)&&n.audioTrack&&n.audioTrack.getProcessorStats().forEach((function(e){var n;null===(n=t.requestUpload)||void 0===n||n.call(t,e.type,e.stats)}))}))},t}(Kp);function ZC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZC(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eO(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=LR,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new tO(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function tO(e){function t(e){if(Object(e)!==e)return Vl.reject(new TypeError(e+" is not an object."));var t=e.done;return Vl.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(tO=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Vl.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Vl.reject(e):t(n.apply(this.s,arguments))}},new tO(e)}var nO=function(e){function t(t,n){var r;return uc(l(r=e.call(this)||this),"store",void 0),uc(l(r),"statsUploader",void 0),uc(l(r),"connection",void 0),uc(l(r),"localTrackMap",new Map),uc(l(r),"remoteUserMap",new Map),uc(l(r),"localDataChannels",[]),uc(l(r),"remoteDataChannelMap",new Map),uc(l(r),"pendingLocalTracks",[]),uc(l(r),"pendingRemoteTracks",[]),uc(l(r),"pendingLocalDataChannels",[]),uc(l(r),"pendingRemoteDataChannels",[]),uc(l(r),"statsCollector",void 0),uc(l(r),"isPlanB",!1),uc(l(r),"shouldForwardP2PCreation",void 0),uc(l(r),"iceFailedCount",0),uc(l(r),"dtlsFailedCount",0),uc(l(r),"mutex",new If("P2PChannel-mutex")),uc(l(r),"_state",gm.Disconnected),uc(l(r),"_pcStatsUploadType",W_("NEW_ICE_RESTART")?vm.FIRST_CONNECTION:vm.OLD_FIRST_CONNECTION),uc(l(r),"_isInRestartIce",!1),uc(l(r),"_isStartRestartIce",!1),uc(l(r),"_restartStates",["disconnected","failed"]),uc(l(r),"_restartTimer",void 0),uc(l(r),"_isFirstConnected",!0),uc(l(r),"handleMuteLocalTrack",function(){var e=d(c().mark((function e(t,n,i){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");case 2:if(o=e.sent,e.prev=3,r.connection&&r.state===gm.Connected){e.next=6;break}return e.abrupt("return",void i(new Sp(ql.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established.")));case 6:if(0!==(a=r.filterTobeMutedTracks(t)).length){e.next=9;break}return e.abrupt("return",void n());case 9:return(s=a.find((function(e){return"videoLowTrack"===e[0]})))&&s[1].track._originMediaStreamTrack.stop(),e.next=13,r.connection.muteLocal(a.map((function(e){return e[1].id})));case 13:return u=r.createMuteMessage(a),e.next=16,ef(l(r),Em.RequestMuteLocal,u);case 16:n(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),i(e.t0);case 22:return e.prev=22,o(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[3,19,22,25]])})));return function(t,n,r){return e.apply(this,arguments)}}()),uc(l(r),"handleUnmuteLocalTrack",function(){var e=d(c().mark((function e(t,n,i){var o,a,s,u,d,p,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");case 2:if(o=e.sent,e.prev=3,r.connection&&r.state===gm.Connected){e.next=6;break}return e.abrupt("return",void i(new Sp(ql.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established.")));case 6:if(0!==(a=r.filterTobeUnmutedTracks(t)).length){e.next=9;break}return e.abrupt("return",void n());case 9:if(!(s=a.find((function(e){return"videoLowTrack"===e[0]})))){e.next=15;break}return(u=s[1]).track._originMediaStreamTrack.stop(),!W_("DISABLE_DUAL_STREAM_USE_ENCODING")&&pE().supportDualStreamEncoding?(d=t._mediaStreamTrack.clone(),u.track._mediaStreamTrack=d,u.track._originMediaStreamTrack=d):(p=MC(t,nf(l(r),Em.RequestLowStreamParameter)),u.track._mediaStreamTrack=p,u.track._originMediaStreamTrack=p),e.next=15,new Vl((function(e,t){r.handleReplaceTrack(u.track,e,t,!0)}));case 15:return e.next=17,r.connection.unmuteLocal(a.map((function(e){return e[1].id})));case 17:return f=r.createUnmuteMessage(a),e.next=20,ef(l(r),Em.RequestUnmuteLocal,f);case 20:n(),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),i(e.t0);case 26:return e.prev=26,o(),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[3,23,26,29]])})));return function(t,n,r){return e.apply(this,arguments)}}()),uc(l(r),"handleUpdateVideoEncoder",function(){var e=d(c().mark((function e(t,n,i){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");case 2:if(o=e.sent,e.prev=3,a=r.localTrackMap.get(mm.LocalVideoTrack),r.connection&&a&&a.track===t&&r.state===gm.Connected){e.next=7;break}return e.abrupt("return",void n());case 7:return s=a.id,u=a.track,e.next=10,r.connection.updateSendParameters(s,u);case 10:return e.next=12,r.connection.updateEncoderConfig(s,u);case 12:r.emit(Em.UpdateVideoEncoder,u),n(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),i(e.t0);case 19:return e.prev=19,o(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[3,16,19,22]])})));return function(t,n,r){return e.apply(this,arguments)}}()),uc(l(r),"handleSetOptimizationMode",function(){var e=d(c().mark((function e(t,n,i){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");case 2:if(o=e.sent,e.prev=3,a=r.localTrackMap.get(mm.LocalVideoTrack),r.connection&&a&&a.track===t&&r.state===gm.Connected){e.next=7;break}return e.abrupt("return");case 7:return s=a.id,u=a.track,e.next=10,r.connection.updateSendParameters(s,u);case 10:n(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),i(e.t0);case 16:return e.prev=16,o(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t,n,r){return e.apply(this,arguments)}}()),uc(l(r),"handleReplaceTrack",function(){var e=d(c().mark((function e(t,n,i,o){var a,s,u,d,l,p,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tv.debug("[".concat(r.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(t.getTrackId(),"]")),e.t0="boolean"==typeof o&&o,e.t0){e.next=6;break}return e.next=5,r.mutex.lock("From P2PChannel.handleReplaceTrack");case 5:a=e.sent;case 6:if(e.prev=6,u=Array.from(r.localTrackMap.entries()).find((function(e){var n=e[1].track;return t===n})),r.connection&&u&&r.state===gm.Connected){e.next=10;break}return e.abrupt("return",void n());case 10:return e.next=12,null===(s=r.connection)||void 0===s?void 0:s.replaceTrack(t,u[1].id);case 12:if(!r.isPlanB){e.next=15;break}(d=u[1]).id=t._mediaStreamTrack.id,r.localTrackMap.set(u[0],d);case 15:if(u[0]!==mm.LocalVideoTrack||W_("DISABLE_DUAL_STREAM_USE_ENCODING")||!pE().supportDualStreamEncoding){e.next=24;break}if(!(l=r.localTrackMap.get(mm.LocalVideoLowTrack))){e.next=24;break}return p=t._mediaStreamTrack.clone(),l.track._originMediaStreamTrack.stop(),l.track._mediaStreamTrack=p,l.track._originMediaStreamTrack=p,e.next=24,new Vl((function(e,t){r.handleReplaceTrack(l.track,e,t,!0)}));case 24:n(),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(6),i(e.t1);case 30:return e.prev=30,null===(f=a)||void 0===f||f(),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[6,27,30,33]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()),uc(l(r),"handleGetRTCStats",(function(e){e(r.statsCollector.getRTCStats())})),uc(l(r),"handleGetLocalVideoStats",(function(e){e(r.statsCollector.getLocalVideoTrackStats())})),uc(l(r),"handleGetLocalAudioStats",(function(e){e(r.statsCollector.getLocalAudioTrackStats())})),uc(l(r),"handleGetRemoteVideoStats",(function(e){return r.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid]})),uc(l(r),"handleGetRemoteAudioStats",(function(e){return r.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid]})),r.store=t,r.statsCollector=n,r.statsCollector.addP2PChannel(l(r)),r.statsUploader=new QC,r.bindStatsUploaderEvents(),r.isPlanB=!pE().supportUnifiedPlan||W_("CHROME_FORCE_PLAN_B")&&mp(),r.shouldForwardP2PCreation=W_("FORWARD_P2P_CREATION")&&pE().supportPCSetConfiguration&&function(){var e=$l();return e===Wl.ANDROID||e===Wl.IOS||e===Wl.HARMONY_OS}(),r.shouldForwardP2PCreation&&(r.connection=r.store.useDataChannel?new YC({},r.store):r.isPlanB?new AC({},r.store):new xC({},r.store),r.bindConnectionEvents(r.connection)),r}p(t,e);var n=t.prototype;return n.startP2PConnection=function(){var e=d(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state=gm.New,i=this.shouldForwardP2PCreation&&"closed"===(null===(r=this.connection)||void 0===r?void 0:r.peerConnectionState),this.shouldForwardP2PCreation&&!i||(i&&this.connection&&(tv.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new YC(t,this.store):this.isPlanB?new AC(t,this.store):new xC(t,this.store),this.bindConnectionEvents(this.connection)),this.connection){e.next=4;break}throw new Sp(ql.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");case 4:return e.abrupt("return",(this._pcStatsUploadType=W_("NEW_ICE_RESTART")?vm.FIRST_CONNECTION:vm.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(t),this.connection.establishPromise));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.connect=function(){var e=d(c().mark((function e(t,n,r,i,o,a){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}throw new Sp(ql.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");case 2:if(!(this.connection instanceof YC)){e.next=6;break}this.connection.updateRemoteConnect(i),e.next=12;break;case 6:return this.store.peerConnectionStart(),e.next=9,this.connection.connect(t,n,r,i,o,a);case 9:this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=gm.Connected;case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}(),n.updateRemoteRTPCapabilities=function(e){var t=Array.from(this.localTrackMap.entries()).filter((function(e){var t,n=e[0];return Or(t=[mm.LocalVideoLowTrack,mm.LocalVideoTrack]).call(t,n)})).map((function(e){return e[1].id}));if(this.connection instanceof xC){if(!Or(e).call(e,this.store.codec)){var n=["vp8","h264"].find((function(t){return Or(e).call(e,t)}));n&&(this.store.codec=n,tv.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(n,".")))}this.connection.updateRemoteRTPCapabilities(t,e)}},n.preConnect=function(){var e=d(c().mark((function e(t,n,r,i,o,a){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}throw new Sp(ql.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");case 2:return this.store.peerConnectionStart(),e.next=5,this.connection.connect(t,n,r,i,o,a);case 5:return s=e.sent,e.abrupt("return",(this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=gm.Connected,s));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}(),n.getEstablishParams=function(){if(this.connection instanceof YC)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")},n.publishDataChannel=function(){var e=d(c().mark((function e(t){var n,r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=5;break}if(this.state!==gm.Disconnected){e.next=3;break}throw new Sp(ql.UNEXPECTED_ERROR,"PeerConnection already disconnected.");case 3:return n=t.filter((function(e){return-1!==i.pendingLocalDataChannels.findIndex((function(t){return t.id===e.id}))})),e.abrupt("return",void(this.pendingLocalDataChannels=this.pendingLocalDataChannels.concat(n)));case 5:if(r=this.filterTobePublishedDataChannels(t),e.t0=0!==r.length,!e.t0){e.next=12;break}return r.forEach((function(e){var t=Date.now();i.store.publish(e.id.toString(),"datachannel",t)})),e.next=11,this.connection.createDataChannels(this.store.uid,r);case 11:r.forEach((function(e){i.localDataChannels.push(e);var t=Date.now();i.store.publish(e.id+"","datachannel",void 0,t)}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.publish=function(e,t,n){var r=this;return PR(c().mark((function i(){var o,a,s;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,DR(r.mutex.lock("From P2PChannel.publish"));case 2:if(o=i.sent,i.prev=3,r.connection&&r.state===gm.Connected){i.next=10;break}if(r.state!==gm.Disconnected){i.next=7;break}throw new Sp(ql.UNEXPECTED_ERROR,"PeerConnection already disconnected.");case 7:return r.throwIfTrackTypeNotMatch(e),a=e.filter((function(e){return-1===r.pendingLocalTracks.indexOf(e)})),i.abrupt("return",void(r.pendingLocalTracks=r.pendingLocalTracks.concat(a)));case 10:if(r.store.pubId=r.store.pubId+1,QT.markPublishStart(r.store.clientId,r.store.pubId),0!==(s=r.filterTobePublishedTracks(e,t,n)).length){i.next=16;break}return i.next=15,DR(r.tryToUnmuteAudio(e));case 15:return i.abrupt("return",void i.sent);case 16:return i.delegateYield(xR(eO(r.doPublish(r.connection,s))),"t0",17);case 17:return i.prev=17,o(),i.finish(17);case 20:case"end":return i.stop()}}),i,null,[[3,,17,20]])})))()},n.doPublish=function(e,t){var n=this;return PR(c().mark((function r(){var i,o,a,s,u,d;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.forEach((function(e){var t=e.track,r=e.type,i=Date.now();n.store.publish(t.getTrackId(),r===mm.LocalAudioTrack?"audio":"video",i)})),n.bindLocalTrackEvents(t),r.next=3,DR(e.send(t.map((function(e){return e.track})),n.store.codec,n.store.audioCodec));case 3:return i=r.sent,r.next=6,DR(i.next());case 6:return o=r.sent.value,a=n.createGatewayPublishMessage(t,o),r.prev=8,r.next=11,a;case 11:s=r.sent,r.next=17;break;case 14:throw r.prev=14,r.t0=r.catch(8),i.throw(r.t0),(null==r.t0?void 0:r.t0.code)===ql.WS_ABORT&&t.forEach((function(e){var t=e.track;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(t),r.t0;case 17:return u=n.mapPubResToRemoteConfig(a,s),r.next=20,DR(i.next(u));case 20:d=r.sent.value,t.forEach((function(e){var t=e.type;n.statsCollector.addLocalStats(t)})),n.assignLocalTracks(t,d),n.statsUploader.startUploadUplinkStats(),t.forEach((function(e){var t=e.track,r=e.type,i=Date.now();n.store.publish(t.getTrackId(),r===mm.LocalAudioTrack?"audio":"video",void 0,i)}));case 22:case"end":return r.stop()}}),r,null,[[8,14]])})))()},n.updateVideoStreamParameter=function(){var e=d(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.localTrackMap.get(n)){e.next=3;break}return e.abrupt("return");case 3:if(r.track instanceof wy){e.next=5;break}return e.abrupt("return",tv.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack"));case 5:if(this.connection instanceof xC||this.connection instanceof AC){e.next=7;break}return e.abrupt("return",tv.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB"));case 7:if(i=r.track,o=function(e,t){var n={};return e.height&&e.width&&(n.scaleResolutionDownBy=pw(e,t)),n.maxFramerate=e.framerate?ow(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}(t,i),i._encoderConfig||(i._encoderConfig={}),n===mm.LocalVideoLowTrack&&(W_("DISABLE_DUAL_STREAM_USE_ENCODING")||!pE().supportDualStreamEncoding)){e.next=12;break}null!=o.scaleResolutionDownBy&&(i._encoderConfig.scaleResolutionDownBy=o.scaleResolutionDownBy),e.next=16;break;case 12:if((a=i._originMediaStreamTrack).canvas){e.next=15;break}return e.abrupt("return",tv.warn("[".concat(i.getTrackId(),"] no canvas on track")));case 15:!function(e,t){var n=e.canvas;t.width&&(n.width=ow(t.width)),t.height&&(n.height=ow(t.height)),t.framerate&&(n.stopCapture&&n.stopCapture(),n.stopCapture=dE((function(){!n.startCapture&&n.stopCapture&&n.stopCapture(),n.startCapture&&n.startCapture()}),ow(t.framerate)))}(a,t);case 16:return null!=o.maxBitrate&&(i._encoderConfig.bitrateMax=o.maxBitrate/1e3),null!=o.maxFramerate&&(i._encoderConfig.frameRate&&"object"==typeof i._encoderConfig.frameRate?i._encoderConfig.frameRate.max=o.maxFramerate:i._encoderConfig.frameRate={max:o.maxFramerate}),tv.debug("[".concat(i.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(i._encoderConfig))),e.next=21,this.connection.updateRtpSenderEncodings(i);case 21:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.publishLowStream=function(e){var t=this;return PR(c().mark((function n(){var r,i,o,a,s;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.connection&&t.state===gm.Connected){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,DR(t.mutex.lock("Locking from P2PChannel.publishLowStream"));case 4:if(r=n.sent,n.prev=5,i=t.localTrackMap.get(mm.LocalVideoTrack)){n.next=9;break}throw new Sp(ql.UNEXPECTED_ERROR,"Could not find high stream");case 9:if(!t.localTrackMap.has(mm.LocalVideoLowTrack)){n.next=11;break}throw new Sp(ql.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));case 11:return o=[{track:t.getLowVideoTrack(i.track,e),type:mm.LocalVideoLowTrack}],n.delegateYield(xR(eO(t.doPublish(t.connection,o))),"t0",13);case 13:if(!i.track.muted&&i.track.enabled){n.next=19;break}if(s=null===(a=t.localTrackMap.get(mm.LocalVideoLowTrack))||void 0===a?void 0:a.id,n.t1=void 0!==s,!n.t1){n.next=19;break}return n.next=19,DR(t.connection.muteLocal([s]));case 19:return n.prev=19,r(),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[5,,19,22]])})))()},n.republish=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.pendingLocalTracks.length>0,!e.t0){e.next=7;break}return tv.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),e.next=5,$p(this,Em.RequestRePublish,this.pendingLocalTracks);case 5:this.emit(Em.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[];case 7:if(e.t1=this.pendingLocalDataChannels.length>0,!e.t1){e.next=13;break}return tv.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),e.next=12,$p(this,Em.RequestRePublishDataChannel,this.pendingLocalDataChannels);case 12:this.pendingLocalDataChannels=[];case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.reSubscribe=function(){var e=d(c().mark((function e(t){var n,r,o,a,s,u,d,l,p,f=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.pendingRemoteTracks.length-1;n>=0;n--)r=this.pendingRemoteTracks[n],o=r.user,((a=r.kind)!==hm.AUDIO||o._audio_added_&&o._audioSSRC)&&(a!==hm.VIDEO||o._video_added_&&o._videoSSRC)||this.pendingRemoteTracks.splice(n,1);if(!t){e.next=6;break}return e.next=4,$p(this,Em.RequestReSubscribe,this.pendingRemoteTracks);case 4:e.next=13;break;case 6:s=i(this.pendingRemoteTracks);case 7:if((u=s()).done){e.next=13;break}return d=u.value,l=d.user,p=d.kind,e.next=11,this.subscribe(l,p,p===hm.VIDEO?l._videoSSRC:l._audioSSRC);case 11:e.next=7;break;case 13:this.pendingRemoteTracks.forEach((function(e){var t=e.user;f.emit(Em.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[];case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.unpublish=function(){var e=d(c().mark((function e(t){var n,r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===gm.Connected){e.next=2;break}return e.abrupt("return",void t.forEach((function(e){var t=i.pendingLocalTracks.indexOf(e);-1!==t&&i.pendingLocalTracks.splice(t,1)})));case 2:if(0!==(n=this.filterTobeUnpublishedTracks(t)).length){e.next=5;break}return e.abrupt("return");case 5:return(r=n.find((function(e){return"videoLowTrack"===e[0]})))&&r[1].track.close(),e.abrupt("return",this.doUnpublish(this.connection,n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.unpublishDataChannel=function(){var e=d(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===gm.Connected){e.next=2;break}return e.abrupt("return",void t.forEach((function(e){var t=r.pendingLocalDataChannels.indexOf(e);-1!==t&&r.pendingLocalDataChannels.splice(t,1)})));case 2:if(0===(n=this.filterTobeUnpublishedDataChannels(t)).length){e.next=12;break}if(n.forEach((function(e){var t=r.localDataChannels.indexOf(e);-1!==t&&r.localDataChannels.splice(t,1)})),e.t1=0===this.localDataChannels.length,!e.t1){e.next=9;break}return e.next=9,this.connection.stopDataChannels(this.store.uid);case 9:e.t0=n.map((function(e){return e.id})),e.next=13;break;case 12:e.t0=void 0;case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.unpublishLowStream=function(){var e=d(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===gm.Connected){e.next=2;break}return e.abrupt("return");case 2:if(t=this.localTrackMap.get(mm.LocalVideoLowTrack)){e.next=5;break}return e.abrupt("return");case 5:return t.track.close(),n=[[mm.LocalVideoLowTrack,t]],e.abrupt("return",this.doUnpublish(this.connection,n));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.doUnpublish=function(){var e=d(c().mark((function e(t,n){var r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createGatewayUnpublishMessage(n),e.next=3,t.stopSending(n.map((function(e){return e[1].id})));case 3:return this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map((function(e){return{type:e[0],track:e[1].track}}))),n.forEach((function(e){var t=e[0];i.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadUplinkStats(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.subscribeDataChannel=function(){var e=d(c().mark((function e(t,n){var r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===gm.Connected){e.next=2;break}throw new Sp(ql.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");case 2:if(0===(r=n.filter((function(e){var n;return!(null!==(n=i.remoteDataChannelMap.get(t))&&void 0!==n&&n.get(e.id))}))).length){e.next=8;break}return e.next=6,this.connection.createDataChannels(t.uid,r);case 6:return r.forEach((function(e){var n;i.remoteDataChannelMap.has(t)?null===(n=i.remoteDataChannelMap.get(t))||void 0===n||n.set(e.id,e):i.remoteDataChannelMap.set(t,new Map([[e.id,e]]));var r=i.pendingRemoteDataChannels.findIndex((function(n){var r=n.user,i=n.id;return r.uid===t.uid&&i===e.id}));-1!==r&&i.pendingRemoteDataChannels.splice(r,1)})),e.abrupt("return",r.map((function(e){return e.id})));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.subscribe=function(){var e=d(c().mark((function e(t,n,r,i,o){var a,s,u,d,l,p,f,h,_;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===gm.Connected){e.next=2;break}throw new Sp(ql.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");case 2:if(null===(a=this.remoteUserMap.get(t))||void 0===a||!a.has(n)){e.next=4;break}return e.abrupt("return");case 4:if(!o){e.next=14;break}if(l=o.find((function(e){return e.stream_type===n}))){e.next=8;break}throw new Sp(ql.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(n," for user: ").concat(t.uid," because subscribe answer from gateway does not contain stream_type: ").concat(n,"."));case 8:return e.next=10,this.connection.receive(n,l.ssrcs,String(t._uintid),l.attributes);case 10:p=e.sent,this.connection instanceof xC&&(d=p.transceiver),s=p.track,u=p.id,e.next=18;break;case 14:return e.next=16,this.connection.receive(n,[{ssrcId:r,rtx:i}],String(t._uintid),void 0);case 16:f=e.sent,this.connection instanceof xC&&(d=f.transceiver),s=f.track,u=f.id;case 18:n===hm.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(s):(t._audioTrack=new Dy(s,t.uid,t._uintid,this.store),tv.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(t._audioTrack.getTrackId()))),d&&t._audioTrack._updateRtpTransceiver(d),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(s):(t._videoTrack=new Py(s,t.uid,t._uintid,this.store),tv.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(t._videoTrack.getTrackId()))),d&&t._videoTrack._updateRtpTransceiver(d),this.bindRemoteTrackEvents(t,t._videoTrack)),(h=this.remoteUserMap.get(t))?h.set(n,u):this.remoteUserMap.set(t,new Map([[n,u]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadDownlinkStats(),-1!==(_=this.pendingRemoteTracks.findIndex((function(e){var r=e.user,i=e.kind;return r.uid===t.uid&&n===i})))&&(this.pendingRemoteTracks.splice(_,1),this.emit(Em.MediaReconnectEnd,t.uid));case 23:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),n.massSubscribe=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.massSubscribeNoLock(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.massSubscribeNoLock=function(){var e=d(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===gm.Connected){e.next=2;break}throw new Sp(ql.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");case 2:return t=t.filter((function(e){var t,n=e.user,i=e.mediaType;return!(null!==(t=r.remoteUserMap.get(n))&&void 0!==t&&t.has(i))})),e.next=5,this.connection.batchReceive(t.map((function(e){var t=e.user;return{kind:e.mediaType,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtxSsrcId}],mslabel:String(t._uintid)}})));case 5:n=e.sent,t.forEach((function(e,t){var i=e.user,o=e.mediaType,a=n[t],s=a.track,c=a.id,u=a.transceiver;o===hm.AUDIO?(i._audioTrack?i._audioTrack._updateOriginMediaStreamTrack(s):(i._audioTrack=new Dy(s,i.uid,i._uintid,r.store),tv.info("[".concat(r.store.clientId,"] [").concat(r.store.p2pId,"] create remote audio track: ").concat(i._audioTrack.getTrackId()))),u&&i._audioTrack._updateRtpTransceiver(u),r.bindRemoteTrackEvents(i,i._audioTrack)):(i._videoTrack?i._videoTrack._updateOriginMediaStreamTrack(s):(i._videoTrack=new Py(s,i.uid,i._uintid,r.store),tv.info("[".concat(r.store.clientId,"] [").concat(r.store.p2pId,"] create remote video track: ").concat(i._videoTrack.getTrackId()))),u&&i._videoTrack._updateRtpTransceiver(u),r.bindRemoteTrackEvents(i,i._videoTrack));var d=r.remoteUserMap.get(i);d?d.set(o,c):r.remoteUserMap.set(i,new Map([[o,c]])),r.statsCollector.addRemoteStats(i.uid),r.statsUploader.startUploadDownlinkStats();var l=r.pendingRemoteTracks.findIndex((function(e){var t=e.user,n=e.kind;return t.uid===i.uid&&o===n}));-1!==l&&(r.pendingRemoteTracks.splice(l,1),r.emit(Em.MediaReconnectEnd,i.uid))}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.unsubscribe=function(){var e=d(c().mark((function e(t,n,r){var i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=this.pendingRemoteTracks.filter((function(e){var r=e.user,i=e.kind;return void 0!==n?r.uid===t.uid&&n===i:r.uid===t.uid}))).forEach((function(e){var t=s.pendingRemoteTracks.indexOf(e);s.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===gm.Connected||r||i.forEach((function(e){var n,r=e.kind;if(r===hm.AUDIO)null===(n=t._audioTrack)||void 0===n||n._destroy(),t._audioTrack=void 0;else if(r===hm.VIDEO){var i;null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0}})),this.connection&&this.state===gm.Connected){e.next=3;break}return e.abrupt("return");case 3:if(0!==(o=this.filterTobeUnSubscribedTracks(t,n)).length){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.connection.stopReceiving(o.map((function(e){return e[1].id})));case 8:return a=this.createUnsubscribeMessage(o),e.abrupt("return",(this.withdrawRemoteTracks(o),0===this.remoteUserMap.size&&this.statsUploader.stopUploadDownlinkStats(),o.forEach((function(e){var t,n,i=e[0],o=e[1].kind;if(o===hm.VIDEO&&i._videoSSRC&&(null===(t=s.connection)||void 0===t||t.setStatsRemoteVideoIsReady(i._videoSSRC,!1)),o===hm.VIDEO)s.unbindRemoteTrackEvents(i._videoTrack),r||(null===(n=i._videoTrack)||void 0===n||n._destroy(),i._videoTrack=void 0);else if(o===hm.AUDIO){var a;s.unbindRemoteTrackEvents(i._audioTrack),r||(null===(a=i._audioTrack)||void 0===a||a._destroy(),i._audioTrack=void 0)}})),a));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.unsubscribeDataChannel=function(){var e=d(c().mark((function e(t,n){var r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.forEach((function(e){var t=o.pendingRemoteDataChannels.findIndex((function(t){return t.id===e.id}));-1!==t&&o.pendingRemoteDataChannels.splice(t,1)})),this.connection){e.next=2;break}return e.abrupt("return");case 2:if(0!==(r=this.filterTobeUnSubscribedDataChannels(t,n)).length){e.next=5;break}return e.abrupt("return");case 5:if(n.forEach((function(e){e._close()})),i=this.remoteDataChannelMap.get(t),r.forEach((function(e){i&&i.delete(e.id)})),e.t0=i&&0===i.size,!e.t0){e.next=13;break}return this.remoteDataChannelMap.delete(t),e.next=13,this.connection.stopDataChannels(t.uid);case 13:return e.abrupt("return",r.map((function(e){return e.id})));case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.massUnsubscribe=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.massUnsubscribeNoLock(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.massUnsubscribeNoLock=function(){var e=d(c().mark((function e(t){var n,r,o,a,s,u,d=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=function(){var e=a.value,t=e.user,r=e.mediaType,i=d.pendingRemoteTracks.filter((function(e){var n=e.user,i=e.kind;return void 0!==r?n.uid===t.uid&&r===i:n.uid===t.uid}));i.forEach((function(e){var t=d.pendingRemoteTracks.indexOf(e);d.pendingRemoteTracks.splice(t,1)})),n=n.concat(i)},o=i(t);!(a=o()).done;)r();if(this.connection&&this.state===gm.Connected){e.next=5;break}return e.abrupt("return",void n.forEach((function(e){var t,n=e.user,r=e.kind;if(r===hm.AUDIO)null===(t=n._audioTrack)||void 0===t||t._destroy(),n._audioTrack=void 0;else if(r===hm.VIDEO){var i;null===(i=n._videoTrack)||void 0===i||i._destroy(),n._videoTrack=void 0}})));case 5:if(0!==(s=Bf(t).call(t,(function(e,t){var n=t.user,r=t.mediaType,i=d.filterTobeUnSubscribedTracks(n,r);return e.concat(i)}),[])).length){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,this.connection.stopReceiving(s.map((function(e){return e[1].id})));case 10:return u=this.createUnsubscribeAllMessage(s),e.abrupt("return",(this.withdrawRemoteTracks(s),0===this.remoteUserMap.size&&this.statsUploader.stopUploadDownlinkStats(),s.forEach((function(e){var t,n,r=e[0],i=e[1].kind;if(i===hm.VIDEO&&r._videoSSRC&&(null===(t=d.connection)||void 0===t||t.setStatsRemoteVideoIsReady(r._videoSSRC,!1)),i===hm.VIDEO)d.unbindRemoteTrackEvents(r._videoTrack),null===(n=r._videoTrack)||void 0===n||n._destroy(),r._videoTrack=void 0;else if(i===hm.AUDIO){var o;d.unbindRemoteTrackEvents(r._audioTrack),null===(o=r._audioTrack)||void 0===o||o._destroy(),r._audioTrack=void 0}})),u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.muteRemote=function(){var e=d(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}return e.abrupt("return");case 2:if(r=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",void tv.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(t.uid,".")));case 5:if(r.get(n)){e.next=7;break}return e.abrupt("return",void tv.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(t.uid," media type ").concat(n,".")));case 7:void 0!==(i=n===hm.VIDEO?t._videoSSRC:t._audioSSRC)&&this.connection.setStatsRemoteVideoIsReady(i,!1);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.unmuteRemote=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.unmuteRemoteNoLock(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.unmuteRemoteNoLock=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}return e.abrupt("return");case 2:if(r=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",void tv.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(t.uid,".")));case 5:r.get(n)||tv.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(t.uid," media type ").concat(n,"."));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getAllTracks=function(e){var t=this.localTrackMap.get(mm.LocalAudioTrack);if((null==t?void 0:t.track)instanceof iy){var n=t.track;return Array.from(this.localTrackMap.entries()).filter((function(e){return e[0]!==mm.LocalAudioTrack})).filter((function(t){var n=t[0];return!(e&&n===mm.LocalVideoLowTrack)})).map((function(e){return e[1].track})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((function(t){var n=t[0];return!(e&&n===mm.LocalVideoLowTrack)})).map((function(e){return e[1].track}))},n.getAllDataChannels=function(){return this.localDataChannels},n.reportPublishEvent=function(e,t,n,r,i){if(e){var o=this.localTrackMap.get(mm.LocalAudioTrack),a=r?this.localTrackMap.get(mm.LocalVideoLowTrack):this.localTrackMap.get(mm.LocalVideoTrack);pv.publish(this.store.sessionId,{eventElapse:QT.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==o?void 0:o.track.getTrackLabel(),videoName:null==a?void 0:a.track.getTrackLabel(),screenshare:-1!==(null==a?void 0:a.track._hints.indexOf(Ng.SCREEN_TRACK)),audio:!!o,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var s;n||(n=[]);var c=n.find((function(e){return e instanceof ty})),u=r?null===(s=this.localTrackMap.get(mm.LocalVideoTrack))||void 0===s?void 0:s.track:n.find((function(e){return e instanceof wy}));pv.publish(this.store.sessionId,{eventElapse:QT.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==c?void 0:c.getTrackLabel(),videoName:null==u?void 0:u.getTrackLabel(),screenshare:-1!==(null==u?void 0:u._hints.indexOf(Ng.SCREEN_TRACK)),audio:!!c,video:!!u,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}},n.reportSubscribeEvent=function(e,t,n,r){var i=r===hm.VIDEO?n._videoSSRC:n._audioSSRC;i&&pv.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===hm.VIDEO,audio:r===hm.AUDIO,peerid:n.uid,subscribeRequestid:r===hm.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:QT.measureFromSubscribeStart(this.store.clientId,i)})},n.reset=function(){tv.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new If("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new YC({},this.store):this.isPlanB?new AC({},this.store):new xC({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();var e=this.localTrackMap.get(mm.LocalAudioTrack);if((null==e?void 0:e.track)instanceof iy){if(e.track.trackList.length>0){var t=e.track;e.track.trackList.forEach((function(e){t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=gm.Disconnected},n.getStats=function(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()},n.getRemoteVideoIsReady=function(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1},n.getLocalAudioVolume=function(){var e=this.localTrackMap.get(mm.LocalAudioTrack);if(e)return e.track.getVolumeLevel()},n.getLocalVideoSize=function(){var e=this.localTrackMap.get(mm.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}},n.getEncoderConfig=function(e){var t=this.localTrackMap.get(e);return t&&t.track instanceof wy||t&&t.track instanceof ty?t.track._encoderConfig:void 0},n.getLocalMedia=function(e){return this.localTrackMap.get(e)},n.hasLocalMedia=function(){return this.localTrackMap.size>0},n.hasRemoteMedia=function(e,t){if(!e)return this.remoteUserMap.size>0;var n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))},n.hasRemoteMediaWithLock=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",this.remoteUserMap.size>0);case 2:return r=this.remoteUserMap.get(t),e.abrupt("return",!!r&&(!n||r.has(n)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getRemoteMedia=function(e){var t,n=Array.from(fc(t=this.remoteUserMap).call(t)).find((function(t){return t.uid===e}));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}},n.getAudioLevels=function(){var e=Array.from(this.remoteUserMap.entries()).map((function(e){var t=e[0];return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}})),t=this.localTrackMap.get(mm.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Gc(e).call(e,(function(e,t){return e.level-t.level}))},n.disconnectForReconnect=function(){var e=d(c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection&&(tv.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=gm.Reconnecting,W_("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((function(e){var t,n=e[0];n._videoTrack&&n._videoTrack._player&&(null===(t=n._videoTrack._player.getVideoElement())||void 0===t||t.pause(),n._videoTrack._player.isKeepLastFrame=!0,n._videoTrack._originMediaStreamTrack.stop())})),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new YC({},this.store):this.isPlanB?new AC({},this.store):new xC({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((function(e){var n,r=e[0],i=e[1].track;switch(r){case mm.LocalVideoTrack:Or(n=i._hints).call(n,Ng.LOW_STREAM)?i.close():t.pendingLocalTracks.push(i);break;case mm.LocalAudioTrack:i instanceof iy?t.pendingLocalTracks=t.pendingLocalTracks.concat(i.trackList):t.pendingLocalTracks.push(i);case mm.LocalVideoLowTrack:}})),this.emit(Em.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((function(e){var n=e[0],r=e[1];Array.from(fc(r).call(r)).forEach((function(e){t.setPendingRemoteMedia(n,e)})),t.emit(Em.MediaReconnectStart,n.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),0!==this.localDataChannels.length&&(this.localDataChannels.forEach((function(e){t.pendingLocalDataChannels.push(e)})),this.localDataChannels.length=0),0!==this.remoteDataChannelMap.size&&(Array.from(this.remoteDataChannelMap.entries()).forEach((function(e){var n=e[0],r=e[1];Array.from(fc(r).call(r)).forEach((function(e){t.setPendingRemoteDataChannel(n,e)}))})),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),tv.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.hasPendingRemoteDataChannel=function(e,t){for(var n,r=i(this.pendingRemoteDataChannels);!(n=r()).done;){var o=n.value,a=o.user,s=o.id;if((e instanceof CR?e.uid:e)===a.uid&&s===t)return!0}return!1},n.setPendingRemoteDataChannel=function(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})},n.hasPendingRemoteMedia=function(e,t){for(var n,r=i(this.pendingRemoteTracks);!(n=r()).done;){var o=n.value,a=o.user,s=o.kind;if((e instanceof CR?e.uid:e)===a.uid&&t===s)return!0}return!1},n.setPendingRemoteMedia=function(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})},n.restartICE=function(e){var t=this;return PR(c().mark((function n(){var r,i,o,a,s,u;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.connection&&t.state===gm.Connected&&!(t.connection instanceof YC)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,DR(t.mutex.lock("From P2PChannel.restartICE"));case 4:return r=n.sent,n.prev=5,n.next=8,DR(t.connection.restartICE(e));case 8:return i=n.sent,n.next=11,DR(i.next());case 11:if(!(o=n.sent).done){n.next=14;break}return n.abrupt("return");case 14:return a=o.value,n.next=17,a;case 17:s=n.sent,n.t0=(t.reportPCDisconnectedOrFailed(e),e),n.next=n.t0===_m.TCP?21:n.t0===_m.RELAY?23:25;break;case 21:return t._pcStatsUploadType=vm.TCP_RESTART,n.abrupt("break",26);case 23:return t._pcStatsUploadType=vm.RELAY_RESTART,n.abrupt("break",26);case 25:t._pcStatsUploadType=vm.OLD_RESTART;case 26:t._isInRestartIce=!0,i.next(s),n.next=32;break;case 29:n.prev=29,n.t1=n.catch(5),null===(u=i)||void 0===u||u.throw(n.t1);case 32:return n.prev=32,r(),n.finish(32);case 35:case"end":return n.stop()}}),n,null,[[5,29,32,35]])})))()},n.getUplinkNetworkQuality=function(){if(!this.connection)return 0;var e=this.connection.getStats(),t=this.localTrackMap.get(mm.LocalVideoTrack),n=this.localTrackMap.get(mm.LocalAudioTrack),r=e.videoSend.find((function(e){return e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId)})),i=e.audioSend.find((function(e){return e.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)}));if(!r||!i)return 1;var o=tf(this,Em.NeedSignalRTT),a=r?r.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,u=(c&&o?(c+o)/2:c||o)||0,d=100*e.sendPacketLossRate*.7/50+.3*u/1500,l=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,p=null==t?void 0:t.track;if(p&&p._encoderConfig&&-1===p._hints.indexOf(Ng.SCREEN_TRACK)){var f=p._encoderConfig.bitrateMax,h=e.bitrate.actualEncoded;if(f&&h){var _=(1e3*f-h)/(1e3*f);return _v[_<.15?0:_<.3?1:_<.45?2:_<.6?3:4][l]}}return l},n.getDownlinkNetworkQuality=function(){var e=this;if(!this.connection)return 0;var t=this.connection.getStats(),n=0;return Array.from(this.remoteUserMap.entries()).forEach((function(r){var i=r[0],o=i._audioSSRC,a=i._videoSSRC,s=t.audioRecv.find((function(e){return e.ssrc===o})),c=t.videoRecv.find((function(e){return e.ssrc===a}));if(s||c){var u=tf(e,Em.NeedSignalRTT),d=t.rtt,l=(d&&u?(d+u)/2:d||u)||0,p=s?s.jitterMs:void 0,f=t.recvPacketLossRate,h=.7*f*100/50+.3*l/1500;p&&(h=.6*f*100/50+.2*l/1500+.2*p/400),n+=h<.1?1:h<.17?2:h<.36?3:h<.59?4:5}else n+=1})),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n},n.muteLocalTrack=function(){var e=d(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Vl((function(e,r){n.handleMuteLocalTrack(t,e,r)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.filterTobePublishedTracks=function(e,t,n){for(var r,o=[],a=pE(),s=this.getAllTracks(),c=!1,u=!1,d=i(e=cf(e=e.filter((function(e){return-1===s.indexOf(e)}))));!(r=d()).done;){var l=r.value;if(l instanceof wy&&(this.localTrackMap.has(mm.LocalVideoTrack)||c?new Sp(ql.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(o.push({track:l,type:mm.LocalVideoTrack}),c=!0),t)){var p=this.getLowVideoTrack(l,n);o.push({track:p,type:mm.LocalVideoLowTrack})}if(l instanceof ty){var f=this.localTrackMap.get(mm.LocalAudioTrack);if(f){if(!(f.track instanceof iy))throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(l._bypassWebAudio)throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");f.track.addAudioTrack(l),this.bindLocalAudioTrackEvents(l,!0)}else if(u){var h=o.find((function(e){return e.type===mm.LocalAudioTrack}));if(!(h.track instanceof iy))throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(l._bypassWebAudio)throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");h.track.addAudioTrack(l)}else{if(!a.webAudioMediaStreamDest||l instanceof iy||l._bypassWebAudio)o.push({track:l,type:mm.LocalAudioTrack});else{var _=new iy;_.addAudioTrack(l),o.push({track:_,type:mm.LocalAudioTrack})}u=!0}}}return o},n.filterTobeUnpublishedTracks=function(e){for(var t,n=[],r=this.getAllTracks(),o=i(e=cf(e=e.filter((function(e){return-1!==r.indexOf(e)}))));!(t=o()).done;){var a=t.value;if(a instanceof ty){var s=this.localTrackMap.get(mm.LocalAudioTrack);if(!s)continue;s.track instanceof iy?(s.track.removeAudioTrack(a),this.unbindLocalAudioTrackEvents(a),0===s.track.trackList.length&&(n.push([mm.LocalAudioTrack,s]),s.track.close())):n.push([mm.LocalAudioTrack,s])}if(a instanceof wy){var c=this.localTrackMap.get(mm.LocalVideoTrack);if(!c)continue;n.push([mm.LocalVideoTrack,c]);var u=this.localTrackMap.get(mm.LocalVideoLowTrack);u&&n.push([mm.LocalVideoLowTrack,u])}}return n},n.filterTobePublishedDataChannels=function(e){var t=this;return(e=cf(e)).filter((function(e){return-1===t.localDataChannels.findIndex((function(t){return t.id===e.id}))}))},n.filterTobeUnpublishedDataChannels=function(e){var t=this;return(e=(e=cf(e)).filter((function(e){return-1!==t.localDataChannels.indexOf(e)}))).filter((function(e){return e._originDataChannel}))},n.bindLocalTrackEvents=function(e){var t=this;e.forEach((function(e){var n=e.track;switch(e.type){case mm.LocalVideoTrack:n.addListener(kg.GET_STATS,t.handleGetLocalVideoStats),n.addListener(kg.GET_RTC_STATS,t.handleGetRTCStats),n.addListener(kg.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),n.addListener(kg.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),n.addListener(kg.NEED_UPDATE_VIDEO_ENCODER,t.handleUpdateVideoEncoder),n.addListener(kg.SET_OPTIMIZATION_MODE,t.handleSetOptimizationMode),n.addListener(kg.NEED_REPLACE_TRACK,t.handleReplaceTrack),n.addListener(kg.NEED_MUTE_TRACK,t.handleMuteLocalTrack),n.addListener(kg.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack);break;case mm.LocalAudioTrack:t.bindLocalAudioTrackEvents(n);case mm.LocalVideoLowTrack:}}))},n.bindLocalAudioTrackEvents=function(e,t){var n=this;e instanceof iy?e.trackList.forEach((function(e){e.addListener(kg.NEED_DISABLE_TRACK,n.handleMuteLocalTrack),e.addListener(kg.NEED_ENABLE_TRACK,n.handleUnmuteLocalTrack),e.addListener(kg.GET_STATS,n.handleGetLocalAudioStats),e.addListener(kg.NEED_MUTE_TRACK,n.handleMuteLocalTrack),e.addListener(kg.NEED_UNMUTE_TRACK,n.handleUnmuteLocalTrack)})):(e.addListener(kg.GET_STATS,this.handleGetLocalAudioStats),e.addListener(kg.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(kg.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(kg.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(kg.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(kg.NEED_REPLACE_TRACK,this.handleReplaceTrack))},n.unbindLocalTrackEvents=function(e){var t=this;e||(e=Array.from(this.localTrackMap.entries()).map((function(e){var t=e[0];return{track:e[1].track,type:t}}))),e.forEach((function(e){var n=e.track;switch(e.type){case mm.LocalVideoTrack:n.off(kg.GET_STATS,t.handleGetLocalVideoStats),n.off(kg.GET_RTC_STATS,t.handleGetRTCStats),n.off(kg.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),n.off(kg.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),n.off(kg.NEED_UPDATE_VIDEO_ENCODER,t.handleUpdateVideoEncoder),n.off(kg.SET_OPTIMIZATION_MODE,t.handleSetOptimizationMode),n.off(kg.NEED_REPLACE_TRACK,t.handleReplaceTrack),n.off(kg.NEED_MUTE_TRACK,t.handleMuteLocalTrack),n.off(kg.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack);break;case mm.LocalAudioTrack:t.unbindLocalAudioTrackEvents(n);case mm.LocalVideoLowTrack:}}))},n.unbindLocalAudioTrackEvents=function(e){var t=this;e instanceof iy?e.trackList.forEach((function(e){e.off(kg.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),e.off(kg.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),e.off(kg.GET_STATS,t.handleGetLocalAudioStats),e.off(kg.NEED_MUTE_TRACK,t.handleMuteLocalTrack),e.off(kg.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack)})):(e.off(kg.GET_STATS,this.handleGetLocalAudioStats),e.off(kg.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(kg.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(kg.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(kg.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(kg.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))},n.bindRemoteTrackEvents=function(e,t){var n=this;t instanceof Py&&t.addListener(kg.GET_STATS,(function(t){t(n.handleGetRemoteVideoStats(e))})),t instanceof Dy&&t.addListener(kg.GET_STATS,(function(t){t(n.handleGetRemoteAudioStats(e))}))},n.unbindRemoteTrackEvents=function(e){e&&e.removeAllListeners(kg.GET_STATS)},n.unbindAllRemoteTrackEvents=function(){var e=this;Array.from(this.remoteUserMap.entries()).forEach((function(t){var n=t[0],r=t[1];r.has(hm.AUDIO)&&e.unbindRemoteTrackEvents(n._audioTrack),r.has(hm.VIDEO)&&e.unbindRemoteTrackEvents(n._videoTrack)}))},n.createGatewayPublishMessage=function(e,t){var n=this;return e.map((function(e,r){var i,o,a,s=e.track;switch(e.type){case mm.LocalAudioTrack:o=tm.Audio,a={dtx:s instanceof ny&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case mm.LocalVideoTrack:o=Or(i=s._hints).call(i,Ng.SCREEN_TRACK)?tm.Screen:tm.High,a=$C($C({},aw(s)),{},{codec:n.store.codec});break;case mm.LocalVideoLowTrack:o=tm.Low,a=$C($C({},aw(s)),{},{codec:n.store.codec})}return{stream_type:o,attributes:a,ssrcs:t[r]}}))},n.createGatewayUnpublishMessage=function(e){return e.map((function(e){var t,n,r=e[0],i=e[1],o=i.track,a=i.ssrcs,s=i.id;switch(r){case mm.LocalVideoTrack:n=Or(t=o._hints).call(t,Ng.SCREEN_TRACK)?tm.Screen:tm.High;break;case mm.LocalAudioTrack:n=tm.Audio;break;case mm.LocalVideoLowTrack:n=tm.Low}return{stream_type:n,ssrcs:a,mid:s}}))},n.assignLocalTracks=function(e,t){var n=this;e.forEach((function(e,r){var i=e.track,o=e.type;n.localTrackMap.set(o,{track:i,id:t[r].id,ssrcs:t[r].localSSRC})}))},n.withdrawLocalTracks=function(e){var t=this;e.forEach((function(e){var n=e[0];t.localTrackMap.delete(n)}))},n.bindConnectionEvents=function(e){var t=this;e.onConnectionStateChange=function(){var n=d(c().mark((function n(r){var i,o,a,s;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(r,")")),t.emit(Em.PeerConnectionStateChange,r),"connected"!==r||t.store.keyMetrics.peerConnectionEnd||t.store.peerConnectionEnd(),"connected"===r&&(t._restartTimer&&(clearTimeout(t._restartTimer),t._restartTimer=void 0),(t._isFirstConnected||t._isInRestartIce)&&t.reportPCStats(Date.now(),!0,t._pcStatsUploadType),t._isInRestartIce=!1,t._isFirstConnected=!1,t._isStartRestartIce=!1),!W_("NEW_ICE_RESTART")){n.next=9;break}if(!Or(i=t._restartStates).call(i,r)){n.next=7;break}if(!t._isStartRestartIce){n.next=4;break}return n.abrupt("return");case 4:return t._isStartRestartIce=!0,o=function(n){"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(tv.debug("[".concat(t.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(n)),"CONNECTED"===tf(t,Em.QueryClientConnectionState)&&t.emit(Em.RequestRestartICE,n))},a=function(){"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(t.reportPCStats(Date.now(),!1,t._pcStatsUploadType),tv.debug("[".concat(t.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout((function(){return t.emit(Em.P2PLost)}),0),t.iceFailedCount+=1,t.requestReconnect())},s=W_("ICE_RESTART_INTERVAL"),n.abrupt("return",void(t._restartTimer=window.setTimeout((function(){if(W_("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&pE().supportPCSetConfiguration)o(_m.RELAY),t._restartTimer=window.setTimeout(a,s);else if(ip())o(_m.UDP),t._restartTimer=window.setTimeout(a,4e3);else{if(o(_m.TCP),pE().supportPCSetConfiguration)return void(t._restartTimer=window.setTimeout((function(){o(_m.RELAY),t._restartTimer=window.setTimeout(a,s)}),s));t._restartTimer=window.setTimeout(a,s)}}),800)));case 7:n.next=19;break;case 9:if("disconnected"!==r||"disconnected"!==e.iceConnectionState){n.next=11;break}return n.abrupt("return",(setTimeout((function(){"disconnected"===e.iceConnectionState&&W_("ICE_RESTART")&&"CONNECTED"===tf(t,Em.QueryClientConnectionState)&&t.emit(Em.RequestRestartICE)}),800),void setTimeout((function(){"disconnected"===e.peerConnectionState&&(tv.debug("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),t.reportPCStats(Date.now(),!1,t._pcStatsUploadType),t._isInRestartIce=!1,setTimeout((function(){return t.emit(Em.P2PLost)}),0),t.iceFailedCount+=1,t.requestReconnect())}),4e3)));case 11:if(n.t0="failed"===r,!n.t0){n.next=19;break}return tv.debug("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection state failed, force reconnect")),t.reportPCDisconnectedOrFailed(),setTimeout((function(){return t.emit(Em.P2PLost)}),0),t.iceFailedCount+=1,n.next=19,t.requestReconnect();case 19:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.onICEConnectionStateChange=function(e){"connected"!==e||t.store.keyMetrics.iceConnectionEnd||t.store.iceConnectionEnd(),tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),pv.reportApiInvoke(t.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:Mp.TRACER}).onSuccess(),t.emit(Em.IceConnectionStateChange,e)},e.onICETransportStateChange=function(e){tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=function(e){tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=function(e){tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=function(e){var n,r,i=Array.from(fc(n=t.remoteUserMap).call(n)).find((function(t){return t._audioSSRC===e}));i&&(t.store.subscribe(i.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=i.audioTrack)||void 0===r||r.emit(Ug.FIRST_FRAME_DECODED),pv.firstRemoteFrame(t.store.sessionId,rv.FIRST_AUDIO_DECODE,iv.FIRST_AUDIO_DECODE,{peer:i._uintid,subscribeElapse:QT.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId}))},e.onFirstAudioReceived=function(e){var n,r=Array.from(fc(n=t.remoteUserMap).call(n)).find((function(t){return t._audioSSRC===e}));r&&pv.firstRemoteFrame(t.store.sessionId,rv.FIRST_AUDIO_RECEIVED,iv.FIRST_AUDIO_RECEIVED,{peer:r._uintid,subscribeElapse:QT.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId})},e.onFirstVideoDecoded=function(e,n,r){t.reportVideoFirstFrameDecoded(e,n,r)},e.onFirstVideoReceived=function(e){var n,r=Array.from(fc(n=t.remoteUserMap).call(n)).find((function(t){return t._videoSSRC===e}));r&&pv.firstRemoteFrame(t.store.sessionId,rv.FIRST_VIDEO_RECEIVED,iv.FIRST_VIDEO_RECEIVED,{peer:r._uintid,subscribeElapse:QT.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId})},e.onSelectedLocalCandidateChanged=function(e,n){var r="relay"===e.candidateType,i="relay"===n.candidateType;"unknown"!==n.candidateType&&r===i||t.emit(Em.ConnectionTypeChange,r),tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(fw(n))," -> ").concat(JSON.stringify(fw(e)),")"))},e.onSelectedRemoteCandidateChanged=function(e,n){tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(fw(n))," -> ").concat(JSON.stringify(fw(e)),")"))},e.onFirstVideoDecodedTimeout=function(e){t.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)}},n.unbindConnectionEvents=function(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0},n.filterTobeMutedTracks=function(e){var t=[];if(-1===this.getAllTracks().indexOf(e))return t;var n=this.localTrackMap.get(mm.LocalAudioTrack);if(e instanceof ty&&(null==n?void 0:n.track)instanceof iy)return n.track.isActive||t.push([mm.LocalAudioTrack,n]),t;var r=Array.from(this.localTrackMap.entries()).find((function(t){var n=t[1].track;return e===n}));if(r&&(t.push(r),r[0]===mm.LocalVideoTrack)){var i=this.localTrackMap.get(mm.LocalVideoLowTrack);i&&t.push([mm.LocalVideoLowTrack,i])}return t},n.filterTobeUnmutedTracks=function(e){var t=[],n=this.localTrackMap.get(mm.LocalAudioTrack);if(e instanceof ty&&(null==n?void 0:n.track)instanceof iy)return n.track.isActive&&t.push([mm.LocalAudioTrack,n]),t;var r=Array.from(this.localTrackMap.entries()).find((function(t){var n=t[1].track;return e===n}));if(r)if(r[0]===mm.LocalVideoTrack){t.push(r);var i=this.localTrackMap.get(mm.LocalVideoLowTrack);i&&t.push([mm.LocalVideoLowTrack,i])}else t.push(r);return t},n.createMuteMessage=function(e){return e.map((function(e){var t,n,r=e[0],i=e[1],o=i.track,a=i.ssrcs,s=i.id;switch(r){case mm.LocalAudioTrack:n=tm.Audio;break;case mm.LocalVideoTrack:n=Or(t=o._hints).call(t,Ng.SCREEN_TRACK)?tm.Screen:tm.High;break;case mm.LocalVideoLowTrack:n=tm.Low}return{stream_type:n,ssrcs:a,mid:s}}))},n.createUnmuteMessage=function(e){return e.map((function(e){var t,n,r=e[0],i=e[1],o=i.track,a=i.ssrcs,s=i.id;switch(r){case mm.LocalAudioTrack:n=tm.Audio;break;case mm.LocalVideoTrack:n=Or(t=o._hints).call(t,Ng.SCREEN_TRACK)?tm.Screen:tm.High;break;case mm.LocalVideoLowTrack:n=tm.Low}return{stream_type:n,ssrcs:a,mid:s}}))},n.filterTobeUnSubscribedTracks=function(e,t){var n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){var i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((function(t){var r=t[0],i=t[1];n.push([e,{kind:r,id:i}])}));return n},n.filterTobeUnSubscribedDataChannels=function(e,t){var n=this,r=[];return t.forEach((function(t){var i;null!==(i=n.remoteDataChannelMap.get(e))&&void 0!==i&&i.has(t.id)&&r.push(t)})),r},n.createUnsubscribeMessage=function(e){var t=[];return e.forEach((function(e){var n=e[0],r=e[1],i=r.kind;switch(r.id,i){case hm.VIDEO:return void(n._videoSSRC&&t.push({stream_type:hm.VIDEO,ssrcId:n._videoSSRC}));case hm.AUDIO:return void(n._audioSSRC&&t.push({stream_type:hm.AUDIO,ssrcId:n._audioSSRC}))}})),t},n.createUnsubscribeAllMessage=function(e){var t=new Map;return e.forEach((function(e){var n=e[0],r=e[1].kind;if(t.has(n)){var i=t.get(n);r===hm.VIDEO?i|=im.Video:i|=im.Audio,t.set(n,i)}else r===hm.VIDEO?t.set(n,im.Video):t.set(n,im.Audio)})),{users:Array.from(t.entries()).map((function(e){var t=e[0],n=e[1];return{stream_id:t.uid,stream_type:n}}))}},n.withdrawRemoteTracks=function(e){var t=this;e.forEach((function(e){var n=e[0],r=e[1].kind,i=t.remoteUserMap.get(n);i&&(i.delete(r),0===Array.from(i.entries()).length&&t.remoteUserMap.delete(n))}))},n.updateBitrateLimit=function(){var e=d(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.localTrackMap.get(mm.LocalVideoTrack),r=this.localTrackMap.get(mm.LocalVideoLowTrack),e.t0=n,!e.t0){e.next=5;break}return e.next=5,n.track.setBitrateLimit(t.uplink);case 5:if(e.t1=r&&t.low_stream_uplink,!e.t1){e.next=9;break}return e.next=9,r.track.setBitrateLimit({max_bitrate:t.low_stream_uplink.bitrate,min_bitrate:t.low_stream_uplink.bitrate||0});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.isP2PDisconnected=function(){return!this.connection||"connected"!==this.connection.peerConnectionState},n.mapPubResToRemoteConfig=function(e,t){return e.map((function(e,n){var r,i=e.stream_type;return null===(r=t.find((function(e){var t=e.stream_type;return i===t})))||void 0===r?void 0:r.attributes}))},n.tryToUnmuteAudio=function(){var e=d(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=15;break}if(!(t[n]instanceof ty)){e.next=12;break}if(0!==(i=this.filterTobeUnmutedTracks(t[n])).length){e.next=6;break}return e.abrupt("continue",12);case 6:return e.next=8,null===(r=this.connection)||void 0===r?void 0:r.unmuteLocal(i.map((function(e){return e[1].id})));case 8:return o=this.createUnmuteMessage(i),e.next=11,ef(this,Em.RequestUnmuteLocal,o);case 11:return e.abrupt("return",void e.sent);case 12:n++,e.next=1;break;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.bindStatsUploaderEvents=function(){var e=this;this.statsUploader.requestStats=function(){return e.getStats()},this.statsUploader.requestLocalMedia=function(){return Array.from(e.localTrackMap.entries())},this.statsUploader.requestRemoteMedia=function(){return Array.from(e.remoteUserMap.entries())},this.statsUploader.requestVideoIsReady=function(t){var n;return!(null===(n=e.connection)||void 0===n||!n.getRemoteVideoIsReady(t))},this.statsUploader.requestUpload=function(t,n){return e.emit(Em.RequestUploadStats,t,n)},this.statsUploader.requestAllTracks=function(){return e.getAllTracks()}},n.unbindStatsUploaderEvents=function(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0},n.requestReconnect=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dtlsFailedCount+=1,e.next=3,Ef(Pf(this.dtlsFailedCount,Nf));case 3:this.emit(Em.RequestReconnect);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.reconnectP2P=function(){var e=d(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Array.from(this.localTrackMap.entries()),n=this.createGatewayUnpublishMessage(t),Array.from(this.remoteUserMap.entries()),e.t0=n.length>0,!e.t0){e.next=6;break}return e.next=6,$p(this,Em.RequestUnpublishForReconnectPC,n);case 6:this.disconnectForReconnect(),this.emit(Em.RequestReconnectPC);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.canPublishLowStream=function(){return this.localTrackMap.has(mm.LocalVideoTrack)||this.pendingLocalTracks.some((function(e){return e instanceof wy}))},n.throwIfTrackTypeNotMatch=function(e){if(e.filter((function(e){return e instanceof wy})).length>1)throw new Sp(ql.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((function(e){return e instanceof ty})).length>1&&(e.some((function(e){return e instanceof ty&&e._bypassWebAudio}))||!pE().webAudioMediaStreamDest))throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(var t,n=i(e);!(t=n()).done;){var r=t.value;if(r instanceof wy&&this.pendingLocalTracks.some((function(e){return e instanceof wy})))throw new Sp(ql.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r instanceof ty&&this.pendingLocalTracks.some((function(e){return e instanceof ty}))&&(!pE().webAudioMediaStreamDest||r._bypassWebAudio||this.pendingLocalTracks.some((function(e){return e instanceof ty&&e._bypassWebAudio}))))throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}},n.getLowVideoTrack=function(e,t){var n,r=!W_("DISABLE_DUAL_STREAM_USE_ENCODING")&&pE().supportDualStreamEncoding,i=$C($C({},{width:160,height:120,framerate:15,bitrate:50}),t);n=r?e._mediaStreamTrack.clone():MC(e,i);var o=yf(8,"track-low-"),a=new wy(n,$C($C({},r&&{scaleResolutionDownBy:pw(i,e)}),{},{frameRate:i.framerate,bitrateMax:i.bitrate,bitrateMin:i.bitrate}),void 0,void 0,o);return a.on(Lg.TRANSCEIVER_UPDATED,(function(t){e._updateRtpTransceiver(t,Pg.LOW_STREAM)})),a._hints.push(Ng.LOW_STREAM),e.addListener(kg.NEED_CLOSE,(function(){a.close()})),a},n.globalLock=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mutex.lock("From P2PChannel.globalLock"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.reportPCStats=function(){var e=d(c().mark((function e(t,n,r){var i,o,a,s,u,d,l,p,f,h,_,v,m,g=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=g.length>3&&void 0!==g[3]?g[3]:null,!(this.connection&&this.connection instanceof xC)){e.next=13;break}return d=this.store.keyMetrics.descriptionStart||0,l=this.connection,p=l.iceConnectionState,f=l.dtlsTransportState,h=l.peerConnectionState,e.next=9,this.connection.getSelectedCandidatePair();case 9:_=e.sent,v=_.local,m=_.remote,pv.pcStats(this.store.sessionId,{startTime:d,eventElapse:t-d||0,iceconnectionsate:p,dtlsstate:f,connectionstate:h,intSucc:n?1:2,error:i,selectedLocalCandidateProtocol:null!==(o=null==v?void 0:v.protocol)&&void 0!==o?o:"",selectedLocalCandidateType:null!==(a=v.candidateType)&&void 0!==a?a:"",selectedLocalCandidateAddress:"".concat(v.address,":").concat(v.port),selectedRemoteCandidateProtocol:null!==(s=m.protocol)&&void 0!==s?s:"",selectedRemoteCandidateType:null!==(u=m.candidateType)&&void 0!==u?u:"",selectedRemoteCandidateAddress:"".concat(m.address,":").concat(m.port),restartCnt:r});case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.reportVideoFirstFrameDecoded=function(e,t,n,r){var i,o=Array.from(fc(i=this.remoteUserMap).call(i)).find((function(t){return t._videoSSRC===e}));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());var a=this.store.keyMetrics,s=a.subscribe.find((function(e){return e.userId===o.uid&&"video"===e.type}));pv.firstRemoteVideoDecode(this.store.sessionId,rv.FIRST_VIDEO_DECODE,iv.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:QT.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0})}},n.remoteMediaSsrcChanged=function(){var e=d(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}return e.abrupt("return",!1);case 2:if(i=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",!1);case 5:if(o=i.get(n)){e.next=8;break}return e.abrupt("return",!1);case 8:return e.next=10,this.connection.getRemoteSSRC(o);case 10:return a=e.sent,e.abrupt("return",void 0!==a&&a!==r);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.resetConnection=function(e){tv.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(e)),this.state===gm.Connected?(tv.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=e===om.datachannel?new YC({},this.store):this.isPlanB?new AC({},this.store):new xC({},this.store),this.bindConnectionEvents(this.connection)))},n.unbindRtpTransceiver=function(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((function(e){var t=e[0],n=e[1].track;t===mm.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,Pg.LOW_STREAM):n._updateRtpTransceiver(void 0)}))},n.reportPCDisconnectedOrFailed=function(e){this.connection&&this.connection instanceof xC&&("disconnected"!==this.connection.iceConnectionState&&"checking"!==this.connection.iceConnectionState&&"failed"!==this.connection.iceConnectionState||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===vm.TCP_RESTART&&e===_m.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,vm.DISCONNECTED_OR_FAILED)))},s(t,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;this._state=e,this.emit(Em.StateChange,t,this._state)}}]),t}(Kp);function rO(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=d(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From P2PChannel.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function iO(e){var t=_O();return function(e,t){var n=e.appId;void 0!==n&&(IO(t,10),SO(t,n));var r=e.cid;void 0!==r&&(IO(t,16),IO(t,r));var o=e.cname;void 0!==o&&(IO(t,26),SO(t,o));var a=e.deviceId;void 0!==a&&(IO(t,34),SO(t,a));var s=e.elapse;void 0!==s&&(IO(t,40),kO(t,s));var c=e.fileSize;void 0!==c&&(IO(t,48),kO(t,fO(c)));var u=e.height;void 0!==u&&(IO(t,56),kO(t,fO(u)));var d=e.jpg;void 0!==d&&(IO(t,66),IO(t,d.length),function(e,t){var n=EO(e,t.length);e.bytes.set(t,n)}(t,d));var l=e.networkType;void 0!==l&&(IO(t,72),kO(t,fO(l)));var p=e.osType;void 0!==p&&(IO(t,80),kO(t,fO(p)));var f=e.requestId;void 0!==f&&(IO(t,90),SO(t,f));var h=e.sdkVersion;void 0!==h&&(IO(t,98),SO(t,h));var _=e.sequence;void 0!==_&&(IO(t,104),kO(t,fO(_)));var v=e.sid;void 0!==v&&(IO(t,114),SO(t,v));var m=e.timestamp;void 0!==m&&(IO(t,120),kO(t,m));var g=e.uid;void 0!==g&&(IO(t,128),IO(t,g));var E=e.vid;void 0!==E&&(IO(t,136),IO(t,E));var y=e.width;void 0!==y&&(IO(t,144),kO(t,fO(y)));var b=e.service;void 0!==b&&(IO(t,152),IO(t,b));var S=e.callbackData;void 0!==S&&(IO(t,162),SO(t,S));var T=e.jpgEncryption;void 0!==T&&(IO(t,168),IO(t,T));var w=e.requestType;void 0!==w&&(IO(t,176),IO(t,w));var R=e.scorePorn;void 0!==R&&(IO(t,185),OO(t,R));var C=e.scoreSexy;void 0!==C&&(IO(t,193),OO(t,C));var O=e.scoreNeutral;void 0!==O&&(IO(t,201),OO(t,O));var A=e.scene;void 0!==A&&(IO(t,208),IO(t,A));var I=e.ossFilePrefix;void 0!==I&&(IO(t,218),SO(t,I));var k=e.serviceVendor;if(void 0!==k)for(var N,P=i(k);!(N=P()).done;){var D=N.value;IO(t,226);var x=_O();sO(D,x),IO(t,x.limit),TO(t,x),vO(x)}}(e,t),function(e){var t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function oO(e){return function(e){var t={};e:for(;!gO(e);){var n=AO(e);switch(n>>>3){case 0:break e;case 1:t.code=AO(e);break;case 2:t.msg=bO(e,AO(e));break;case 3:var r=cO(e);t.data=aO(e),e.limit=r;break;default:uO(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function aO(e){var t={};e:for(;!gO(e);){var n=AO(e);switch(n>>>3){case 0:break e;case 1:t.requestId=bO(e,AO(e));break;case 2:t.requestType=AO(e)>>>0;break;case 3:t.scorePorn=CO(e);break;case 4:t.scoreSexy=CO(e);break;case 5:t.scoreNeutral=CO(e);break;case 6:t.requestScene=AO(e)>>>0;break;case 7:t.scene=AO(e)>>>0;break;default:uO(e,7&n)}}return t}function sO(e,t){var n=e.service;void 0!==n&&(IO(t,8),IO(t,n));var r=e.vendor;void 0!==r&&(IO(t,16),IO(t,r));var i=e.token;void 0!==i&&(IO(t,26),SO(t,i));var o=e.callbackUrl;void 0!==o&&(IO(t,34),SO(t,o))}function cO(e){var t=AO(e),n=e.limit;return e.limit=e.offset+t,n}function uO(e,t){switch(t){case 0:for(;128&wO(e););break;case 2:mO(e,AO(e));break;case 5:mO(e,4);break;case 1:mO(e,8);break;default:throw new Error("Unimplemented type: "+t)}}Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[Object,Boolean]),Bv("design:returntype",Vl)],nO.prototype,"startP2PConnection",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[Object,Object,Array,Object,String,String]),Bv("design:returntype",Vl)],nO.prototype,"connect",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",void 0)],nO.prototype,"updateRemoteRTPCapabilities",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[Object,Object,Array,Object,String,String]),Bv("design:returntype",Vl)],nO.prototype,"preConnect",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],nO.prototype,"publishDataChannel",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],nO.prototype,"unpublish",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],nO.prototype,"unpublishDataChannel",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Vl)],nO.prototype,"unpublishLowStream",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[CR,Array]),Bv("design:returntype",Vl)],nO.prototype,"subscribeDataChannel",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[CR,String,Number,Number,Array]),Bv("design:returntype",Vl)],nO.prototype,"subscribe",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],nO.prototype,"massSubscribe",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[CR,String,Boolean]),Bv("design:returntype",Vl)],nO.prototype,"unsubscribe",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[CR,Array]),Bv("design:returntype",Vl)],nO.prototype,"unsubscribeDataChannel",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],nO.prototype,"massUnsubscribe",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[CR,String]),Bv("design:returntype",Vl)],nO.prototype,"muteRemote",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[CR,String]),Bv("design:returntype",Vl)],nO.prototype,"unmuteRemote",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[CR,String]),Bv("design:returntype",Vl)],nO.prototype,"hasRemoteMediaWithLock",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Vl)],nO.prototype,"disconnectForReconnect",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Vl)],nO.prototype,"updateBitrateLimit",null),Vv([rO,Bv("design:type",Function),Bv("design:paramtypes",[CR,String,Number]),Bv("design:returntype",Vl)],nO.prototype,"remoteMediaSsrcChanged",null);var dO=new Float32Array(1);new Uint8Array(dO.buffer);var lO=new Float64Array(1),pO=new Uint8Array(lO.buffer);function fO(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var hO=[];function _O(){var e=hO.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function vO(e){hO.push(e)}function mO(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function gO(e){return e.offset>=e.limit}function EO(e,t){var n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){var a=new Uint8Array(2*o);a.set(n),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),r}function yO(e,t){var n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function bO(e,t){for(var n=yO(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",a="",s=0;s<t;s++){var c=void 0,u=void 0,d=void 0,l=void 0,p=i[s+n];0==(128&p)?a+=r(p):192==(224&p)?s+1>=t||128!=(192&(c=i[s+n+1]))||(l=(31&p)<<6|63&c)<128?a+=o:(a+=r(l),s++):224==(240&p)?s+2>=t||32896!=(49344&((c=i[s+n+1])|(u=i[s+n+2])<<8))||(l=(15&p)<<12|(63&c)<<6|63&u)<2048||l>=55296&&l<=57343?a+=o:(a+=r(l),s+=2):240==(248&p)?s+3>=t||8421504!=(12632256&((c=i[s+n+1])|(u=i[s+n+2])<<8|(d=i[s+n+3])<<16))||(l=(7&p)<<18|(63&c)<<12|(63&u)<<6|63&d)<65536||l>1114111?a+=o:(a+=r(55296+((l-=65536)>>10),56320+(1023&l)),s+=3):a+=o}return a}function SO(e,t){for(var n=t.length,r=0,i=0;i<n;i++){var o=t.charCodeAt(i);o>=55296&&o<=56319&&i+1<n&&(o=(o<<10)+t.charCodeAt(++i)-56613888),r+=o<128?1:o<2048?2:o<65536?3:4}IO(e,r);for(var a=EO(e,r),s=e.bytes,c=0;c<n;c++){var u=t.charCodeAt(c);u>=55296&&u<=56319&&c+1<n&&(u=(u<<10)+t.charCodeAt(++c)-56613888),u<128?s[a++]=u:(u<2048?s[a++]=u>>6&31|192:(u<65536?s[a++]=u>>12&15|224:(s[a++]=u>>18&7|240,s[a++]=u>>12&63|128),s[a++]=u>>6&63|128),s[a++]=63&u|128)}}function TO(e,t){for(var n=EO(e,t.limit),r=e.bytes,i=t.bytes,o=0,a=t.limit;o<a;o++)r[o+n]=i[o]}function wO(e){return e.bytes[yO(e,1)]}function RO(e,t){var n=EO(e,1);e.bytes[n]=t}function CO(e){var t=yO(e,8),n=e.bytes;return pO[0]=n[t++],pO[1]=n[t++],pO[2]=n[t++],pO[3]=n[t++],pO[4]=n[t++],pO[5]=n[t++],pO[6]=n[t++],pO[7]=n[t++],lO[0]}function OO(e,t){var n=EO(e,8),r=e.bytes;lO[0]=t,r[n++]=pO[0],r[n++]=pO[1],r[n++]=pO[2],r[n++]=pO[3],r[n++]=pO[4],r[n++]=pO[5],r[n++]=pO[6],r[n++]=pO[7]}function AO(e){var t,n=0,r=0;do{t=wO(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function IO(e,t){for(t>>>=0;t>=128;)RO(e,127&t|128),t>>>=7;RO(e,t)}function kO(e,t){var n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,a=EO(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=9!==o?128|i:127&i;case 8:s[a+7]=8!==o?r>>>21|128:r>>>21&127;case 7:s[a+6]=7!==o?r>>>14|128:r>>>14&127;case 6:s[a+5]=6!==o?r>>>7|128:r>>>7&127;case 5:s[a+4]=5!==o?128|r:127&r;case 4:s[a+3]=4!==o?n>>>21|128:n>>>21&127;case 3:s[a+2]=3!==o?n>>>14|128:n>>>14&127;case 2:s[a+1]=2!==o?n>>>7|128:n>>>7&127;case 1:s[a]=1!==o?128|n:127&n}}function NO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var PO=new Map([["moderation",1],["supervise",2]]),DO=function(e){function t(t){var n;return uc(l(n=e.call(this)||this),"name","AgoraRTCVideoContentInspect"),uc(l(n),"_connectionState",bm.CONNECTING),uc(l(n),"_innerConnectionState",void 0),uc(l(n),"sequence",0),uc(l(n),"inspectStartTime",void 0),uc(l(n),"workerManagerConnection",void 0),uc(l(n),"workerConnection",void 0),uc(l(n),"workerMessageLengthLimit",void 0),uc(l(n),"inspectIntervalMinimum",void 0),uc(l(n),"qualityRatio",void 0),uc(l(n),"_connectInfo",void 0),uc(l(n),"_cancelTokenSource",C_.CancelToken.source()),uc(l(n),"_retryConfig",void 0),uc(l(n),"wmSequence",0),uc(l(n),"inspectInterval",void 0),uc(l(n),"inspectTimer",null),uc(l(n),"ossFilePrefix",void 0),uc(l(n),"extraInfo",void 0),uc(l(n),"_inspectType",void 0),uc(l(n),"_inspectMode",void 0),uc(l(n),"_quality",1),uc(l(n),"qualityTimer",null),uc(l(n),"_inspectId",void 0),uc(l(n),"_needWorkUrlOnly",!1),uc(l(n),"inspectImage",(function(){if(n.connectionState!==bm.CONNECTED)throw new Fv(ql.OPERATION_ABORTED,"content inspect service connection status is ".concat(n.connectionState));n.inspectTimer&&(window.clearInterval(n.inspectTimer),n.inspectTimer=null),n.inspectTimer=window.setInterval((function(){n.connectionState===bm.CONNECTED?n.requestToInspectImage():tv.debug("[".concat(n._inspectId,"] Inspect State is not connected , "),n.connectionState)}),n.inspectInterval<n.inspectIntervalMinimum?n.inspectIntervalMinimum:n.inspectInterval),n.requestToInspectImage()})),n._inspectId=yf(5,"inspect-"),n.workerMessageLengthLimit=W_("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),n.inspectIntervalMinimum=W_("VIDEO_INSPECT_INTERVAL_MINIMUM"),n.qualityRatio=W_("VIDEO_INSPECT_QUALITY_RATIO"),n.inspectInterval=t.interval,n.ossFilePrefix=t.ossFilePrefix,n.extraInfo=t.extraInfo,n.inspectType=t.inspectType,n.inspectStartTime=Number(Date.now()),n.workerManagerConnection=new eg("worker-manager-"+n._inspectId,Nf),n.on(Tm.STATE_CHANGE,(function(e,t){n._innerConnectionState=e,tv.debug("[".concat(n._inspectId,"] Inspect operation :").concat(Sm[e]," ").concat(t||""))})),n.handleWorkerManagerEvents(),n.workerConnection=new eg("worker-"+n._inspectId,Nf),n.handleWorkerEvents(),n}p(t,e);var n=t.prototype;return n.init=function(){var e=d(c().mark((function e(t,n){var r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.emit(Tm.STATE_CHANGE,Sm.CONNECT_AP),this._connectInfo=t,r=this._cancelTokenSource.token,e.abrupt("return",(this._retryConfig=n,new Vl((function(e,o){i.on(Tm.CONNECTION_STATE_CHANGE,(function(t,n){n===bm.CONNECTED&&e()})),i.requestAP(t,r,n).then((function(e){i.connectWorkerManager(e)})).catch((function(e){o(e)}))}))));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.requestAP=function(){var e=d(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=W_("WEBCS_DOMAIN").map((function(e){return"https://".concat(e,"/api/v1")})),e.next=3,function(e,t,n,r){var i=t.appId,o=t.areaCode,a=t.cname,s=t.sid,u=t.token,l=t.uid;qw++;var p,f,h="image_moderation_api",_={service_name:h,json_body:JSON.stringify({appId:i,areaCode:o,cname:a,command:"allocateEdge",requestId:qw,seq:qw,sid:s,token:u,ts:Date.now(),uid:l+""})},v=e[0];return Df(d(c().mark((function e(){var t,r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=Date.now(),e.next=3,Cw(v,{data:_,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});case 3:if(t=e.sent,f=Date.now()-p,0===t.code){e.next=7;break}throw r=new Fv(ql.UNEXPECTED_RESPONSE,"image inspect ap error, code"+t.code,{retry:!0,responseTime:f}),tv.error(r.toString()),r;case 7:if(200===(i=JSON.parse(t.json_body)).code){e.next=11;break}throw o=new Fv(ql.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(i.code,", reason: ").concat(i.reason),{code:i.code,responseTime:f}),tv.error(o.toString()),o;case 11:if(i.servers&&Array.isArray(i.servers)&&0!==i.servers.length){e.next=14;break}throw a=new Fv(ql.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:i.code,responseTime:f}),tv.error(a.toString()),a;case 14:return s=W_("VIDEO_INSPECT_WORKER_MANAGER_HOST"),u=W_("VIDEO_INSPECT_WORKER_MANAGER_PORT"),e.abrupt("return",{addressList:i.servers.map((function(e){var t=e.address,n=e.wss;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(s,":").concat(u||n)})).filter((function(e){return!!e})),workerToken:i.workerToken,vid:i.vid,responseTime:f});case 16:case"end":return e.stop()}}),e)}))),(function(t,n){return pv.apworkerEvent(s,{success:!0,sc:200,serviceName:h,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:f,serverIp:e[n%e.length]}),!1}),(function(t,n){return pv.apworkerEvent(s,{success:!1,sc:t.data&&t.data.code||200,serviceName:h,responseTime:f,serverIp:e[n%e.length]}),!!(t.code!==ql.OPERATION_ABORTED&&t.code!==ql.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(v=e[(n+1)%e.length],!0)}),r)}(i,t,n,r);case 3:return o=e.sent,this.emit(Tm.STATE_CHANGE,Sm.AP_CONNECTED),a=o.addressList,e.abrupt("return",(this.wmSequence++,a));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.connectWorkerManager=function(){var e=d(c().mark((function e(t){var n,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],this._needWorkUrlOnly=n,this.emit(Tm.STATE_CHANGE,Sm.CONNECT_WORKER_MANAGER),e.next=5,this.workerManagerConnection.init(t,1e4);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.connectWorker=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.workerConnection.init([t]);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.handleWorkerManagerEvents=function(){var e=this;this.workerManagerConnection.on(Pv.CONNECTED,d(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.emit(Tm.STATE_CHANGE,Sm.WORKER_MANAGER_CONNECTED,e.workerManagerConnection.url),e.workerManagerConnection.sendMessage({appId:e._connectInfo.appId,cname:e._connectInfo.cname,uid:e._connectInfo.uid+"",sdkVersion:"4.19.3",sid:e._connectInfo.sid,seq:e.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0);case 1:case"end":return t.stop()}}),t)})))),this.workerManagerConnection.on(Pv.CLOSED,(function(){e._innerConnectionState<Sm.GET_WORKER_MANAGER_RESPONSE&&tv.debug("[".concat(e._inspectId,"] Inspect worker manager is closed before connecting worker"))})),this.workerManagerConnection.on(Pv.FAILED,(function(){e._innerConnectionState<Sm.GET_WORKER_MANAGER_RESPONSE&&tv.debug("[".concat(e._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))})),this.workerManagerConnection.on(Pv.RECONNECTING,(function(){e._innerConnectionState<Sm.GET_WORKER_MANAGER_RESPONSE&&tv.debug("[".concat(e._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))})),this.workerManagerConnection.on(Pv.ON_MESSAGE,function(){var t=d(c().mark((function t(n){var r,i,o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.emit(Tm.STATE_CHANGE,Sm.GET_WORKER_MANAGER_RESPONSE),r=e.workerManagerConnection.url,e.workerManagerConnection.close(),200===(i=JSON.parse(n.data)).code){t.next=6;break}throw tv.error("[".concat(e._inspectId,"] Unexpected code ").concat(i.code," from worker manager")),new Fv(ql.UNEXPECTED_RESPONSE,"response code of worker is unexpected",i);case 6:if(i.serverResponse&&i.serverResponse.portWss&&r){t.next=8;break}throw tv.error("[".concat(e._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(i))),new Fv(ql.UNEXPECTED_RESPONSE,"response content of worker is unexpected",i);case 8:if(o=W_("VIDEO_INSPECT_WORKER_PORT")||i.serverResponse.portWss,a=r.replace(/:\d+\/?$/,":".concat(o)),e.emit(Tm.STATE_CHANGE,Sm.CONNECT_WORKER,a),!e._needWorkUrlOnly){t.next=14;break}e.emit(Tm.REQUEST_NEW_WORKER_URL,a),t.next=16;break;case 14:return t.next=16,e.connectWorker(a);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.workerManagerConnection.on(Pv.WILL_RECONNECT,(function(e,t,n){n(e)})),this.workerManagerConnection.on(Pv.REQUEST_NEW_URLS,(function(t,n){e.requestAP(e._connectInfo,e._cancelTokenSource.token,e._retryConfig).then(t).catch(n)}))},n.handleWorkerEvents=function(){var e=this;this.workerConnection.on(Pv.CONNECTED,d(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.emit(Tm.STATE_CHANGE,Sm.WORKER_CONNECTED,e.workerConnection.url),e.connectionState=bm.CONNECTED;case 1:case"end":return t.stop()}}),t)})))),this.workerConnection.on(Pv.ON_MESSAGE,function(){var t=d(c().mark((function t(n){var r,i,o,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.data instanceof ArrayBuffer)){t.next=11;break}if(r=oO(new Uint8Array(n.data)),W_("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&tv.debug("[".concat(e._inspectId,"] Response message for worker of inspect content "),JSON.stringify(r)),200!==r.code){t.next=8;break}if(!Array.isArray(e.inspectType)||1!==e.inspectType.length||"supervise"!==e.inspectType[0]){t.next=5;break}return t.abrupt("return",void e.emit(Tm.INSPECT_RESULT,void 0,void 0));case 5:r.data&&r.data.scorePorn&&r.data.scoreSexy&&r.data.scoreNeutral?(o={porn:r.data.scorePorn,sexy:r.data.scoreSexy,neutral:r.data.scoreNeutral},a=Bf(i=Object.keys(o)).call(i,(function(e,t){return o[e]>o[t]?e:t}),"porn"),s=Object.keys(o).find((function(e){return e===a})),e.emit(Tm.INSPECT_RESULT,s)):e.emit(Tm.INSPECT_RESULT,void 0,new Fv(ql.UNEXPECTED_RESPONSE,r.code+"","There is an unexpected data on message")),t.next=9;break;case 8:e.emit(Tm.INSPECT_RESULT,void 0,new Fv(ql.UNEXPECTED_RESPONSE,r.code+"",r.msg));case 9:t.next=12;break;case 11:tv.error("[".concat(e._inspectId,"] Unexpected message type from worker")),e.emit(Tm.INSPECT_RESULT,void 0,new Fv(ql.UNEXPECTED_RESPONSE,"invalid worker message type"));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.workerConnection.on(Pv.CLOSED,(function(){e.connectionState=bm.CLOSED})),this.workerConnection.on(Pv.FAILED,(function(){e.connectionState=bm.CLOSED})),this.workerConnection.on(Pv.RECONNECTING,(function(){e.connectionState=e.connectionState===bm.CONNECTED?bm.RECONNECTING:bm.CONNECTING})),this.workerConnection.on(Pv.WILL_RECONNECT,(function(e,t,n){"recover"===e&&n(e),n("tryNext")})),this.workerConnection.on(Pv.REQUEST_NEW_URLS,(function(t,n){e.workerManagerConnection.close(),e.once(Tm.REQUEST_NEW_WORKER_URL,(function(e){t([e])})),e.requestAP(e._connectInfo,e._cancelTokenSource.token,e._retryConfig).then((function(t){e.connectWorkerManager(t,!0)})).catch((function(e){n(e)}))}))},t.intToLong=function(e){return{low:e|=0,high:e>>31,unsigned:e>=0}},n.requestToInspectImage=function(){var e=d(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sequence++,t=tf(this,Tm.CLIENT_LOCAL_VIDEO_TRACK),n={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid},!t){e.next=11;break}if(t.isPlaying){e.next=5;break}return e.abrupt("return",void this.emit(Tm.INSPECT_RESULT,void 0,new Fv(ql.INVALID_OPERATION,"Only the track being played can be inspected")));case 5:return e.next=7,this.generateRequestData(t,n);case 7:r=e.sent,this.workerConnection.sendMessage(r,!0,!0),e.next=12;break;case 11:this.emit(Tm.INSPECT_RESULT,void 0,new Fv(ql.INVALID_OPERATION,"Only the track being published can be inspected"));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generateRequestData=function(){var e=d(c().mark((function e(n,r){var i,o,a,s,u,d,l,p,f,h,_,v,m,g;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.appId,o=r.cname,a=r.cid,s=r.vid,u=r.sid,d=r.uid,l=Date.now(),e.next=4,n.getCurrentFrameImage("image/jpeg",this.quality);case 4:return p=e.sent,e.next=7,by(p,i,o);case 7:if(f=e.sent,h=this.sequence+"-"+a+"-"+d+"-"+l+"-"+yf(12,""),_={appId:i,cid:a,cname:o,deviceId:"",elapse:t.intToLong(Number(l-this.inspectStartTime)),fileSize:f.byteLength,jpgEncryption:2,height:p.height,width:p.width,jpg:f,networkType:6,osType:7,requestId:h,sdkVersion:"4.19.3",sequence:this.sequence,sid:u,timestamp:t.intToLong(l),uid:d,vid:s,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix},void 0===this.extraInfo&&delete _.callbackData,void 0===this.ossFilePrefix&&delete _.ossFilePrefix,!((v=iO(_)).byteLength<this.workerMessageLengthLimit)){e.next=15;break}return W_("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&(delete(m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NO(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},_)).jpg,tv.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(m))),e.abrupt("return",v);case 15:return g=this.quality*this.qualityRatio,this.quality=g,e.next=19,this.generateRequestData(n,{appId:i,cname:o,cid:a,vid:s,sid:u,uid:d});case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.close=function(){this._cancelTokenSource.cancel(),this._cancelTokenSource=C_.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=bm.CLOSED,this.emit(Tm.STATE_CHANGE,Sm.CLOSED)},s(t,[{key:"connectionState",get:function(){return this._connectionState},set:function(e){if(this._connectionState!==e){var t=this._connectionState;this._connectionState=e,this.emit(Tm.CONNECTION_STATE_CHANGE,t,e)}}},{key:"inspectType",get:function(){return this._inspectType},set:function(e){var t;this._inspectMode=Bf(t=e.map((function(e){return PO.get(e)||0}))).call(t,(function(e,t){return e+t})),this._inspectType=e}},{key:"quality",get:function(){return this._quality},set:function(e){var t=this;this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((function(){t.quality=t._quality/t.qualityRatio}),6e4))}}]),t}(Kp);function xO(e){var t=function(){var e=jO.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(e,t){var n=e.appId;void 0!==n&&(JO(t,10),zO(t,n));var r=e.cid;void 0!==r&&(JO(t,16),JO(t,r));var i=e.cname;void 0!==i&&(JO(t,26),zO(t,i));var o=e.deviceId;void 0!==o&&(JO(t,34),zO(t,o));var a=e.elapse;void 0!==a&&(JO(t,40),QO(t,a));var s=e.fileSize;void 0!==s&&(JO(t,48),QO(t,UO(s)));var c=e.height;void 0!==c&&(JO(t,56),QO(t,UO(c)));var u=e.jpg;void 0!==u&&(JO(t,66),JO(t,u.length),GO(t,u));var d=e.networkType;void 0!==d&&(JO(t,72),QO(t,UO(d)));var l=e.osType;void 0!==l&&(JO(t,80),QO(t,UO(l)));var p=e.requestId;void 0!==p&&(JO(t,90),zO(t,p));var f=e.sdkVersion;void 0!==f&&(JO(t,98),zO(t,f));var h=e.sequence;void 0!==h&&(JO(t,104),QO(t,UO(h)));var _=e.sid;void 0!==_&&(JO(t,114),zO(t,_));var v=e.timestamp;void 0!==v&&(JO(t,120),QO(t,v));var m=e.uid;void 0!==m&&(JO(t,128),JO(t,m));var g=e.vid;void 0!==g&&(JO(t,136),JO(t,g));var E=e.width;void 0!==E&&(JO(t,144),QO(t,UO(E)));var y=e.service;void 0!==y&&(JO(t,152),JO(t,y));var b=e.callbackData;void 0!==b&&(JO(t,162),JO(t,b.length),GO(t,b));var S=e.ticket;void 0!==S&&(JO(t,170),zO(t,S))}(e,t),function(e){var t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function LO(e){return function(e){var t={};e:for(;!BO(e);){var n=qO(e);switch(n>>>3){case 0:break e;case 1:t.code=qO(e);break;case 2:t.msg=HO(e,qO(e));break;case 3:t.requestId=HO(e,qO(e));break;case 4:t.timestamp=XO(e,!1);break;default:MO(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function MO(e,t){switch(t){case 0:for(;128&KO(e););break;case 2:VO(e,qO(e));break;case 5:VO(e,4);break;case 1:VO(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function UO(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var jO=[];function VO(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function BO(e){return e.offset>=e.limit}function FO(e,t){var n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){var a=new Uint8Array(2*o);a.set(n),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),r}function WO(e,t){var n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function GO(e,t){var n=FO(e,t.length);e.bytes.set(t,n)}function HO(e,t){for(var n=WO(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",a="",s=0;s<t;s++){var c=void 0,u=void 0,d=void 0,l=void 0,p=i[s+n];0==(128&p)?a+=r(p):192==(224&p)?s+1>=t||128!=(192&(c=i[s+n+1]))||(l=(31&p)<<6|63&c)<128?a+=o:(a+=r(l),s++):224==(240&p)?s+2>=t||32896!=(49344&((c=i[s+n+1])|(u=i[s+n+2])<<8))||(l=(15&p)<<12|(63&c)<<6|63&u)<2048||l>=55296&&l<=57343?a+=o:(a+=r(l),s+=2):240==(248&p)?s+3>=t||8421504!=(12632256&((c=i[s+n+1])|(u=i[s+n+2])<<8|(d=i[s+n+3])<<16))||(l=(7&p)<<18|(63&c)<<12|(63&u)<<6|63&d)<65536||l>1114111?a+=o:(a+=r(55296+((l-=65536)>>10),56320+(1023&l)),s+=3):a+=o}return a}function zO(e,t){for(var n=t.length,r=0,i=0;i<n;i++){var o=t.charCodeAt(i);o>=55296&&o<=56319&&i+1<n&&(o=(o<<10)+t.charCodeAt(++i)-56613888),r+=o<128?1:o<2048?2:o<65536?3:4}JO(e,r);for(var a=FO(e,r),s=e.bytes,c=0;c<n;c++){var u=t.charCodeAt(c);u>=55296&&u<=56319&&c+1<n&&(u=(u<<10)+t.charCodeAt(++c)-56613888),u<128?s[a++]=u:(u<2048?s[a++]=u>>6&31|192:(u<65536?s[a++]=u>>12&15|224:(s[a++]=u>>18&7|240,s[a++]=u>>12&63|128),s[a++]=u>>6&63|128),s[a++]=63&u|128)}}function KO(e){return e.bytes[WO(e,1)]}function YO(e,t){var n=FO(e,1);e.bytes[n]=t}function qO(e){var t,n=0,r=0;do{t=KO(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function JO(e,t){for(t>>>=0;t>=128;)YO(e,127&t|128),t>>>=7;YO(e,t)}function XO(e,t){var n,r=0,i=0,o=0;return r=127&(n=KO(e)),128&n&&(r|=(127&(n=KO(e)))<<7,128&n&&(r|=(127&(n=KO(e)))<<14,128&n&&(r|=(127&(n=KO(e)))<<21,128&n&&(i=127&(n=KO(e)),128&n&&(i|=(127&(n=KO(e)))<<7,128&n&&(i|=(127&(n=KO(e)))<<14,128&n&&(i|=(127&(n=KO(e)))<<21,128&n&&(o=127&(n=KO(e)),128&n&&(o|=(127&(n=KO(e)))<<7))))))))),{low:r|i<<28,high:i>>>4|o<<24,unsigned:t}}function QO(e,t){var n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,a=FO(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=9!==o?128|i:127&i;case 8:s[a+7]=8!==o?r>>>21|128:r>>>21&127;case 7:s[a+6]=7!==o?r>>>14|128:r>>>14&127;case 6:s[a+5]=6!==o?r>>>7|128:r>>>7&127;case 5:s[a+4]=5!==o?128|r:127&r;case 4:s[a+3]=4!==o?n>>>21|128:n>>>21&127;case 3:s[a+2]=3!==o?n>>>14|128:n>>>14&127;case 2:s[a+1]=2!==o?n>>>7|128:n>>>7&127;case 1:s[a]=1!==o?128|n:127&n}}var ZO={},$O={},eA=4294967296,tA=eA*eA,nA=tA/2,rA=cA(0,!0),iA=cA(0),oA=uA(0,-2147483648,!1),aA=uA(-1,2147483647,!1),sA=uA(-1,-1,!0);function cA(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=$O[e])?r:(n=uA(e,0,!0),i&&($O[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=ZO[e])?r:(n=uA(e,e<0?-1:0,!1),i&&(ZO[e]=n),n)}function uA(e,t,n){return{low:0|e,high:0|t,unsigned:!!n}}function dA(e,t){if(isNaN(e))return t?rA:iA;if(t){if(e<0)return rA;if(e>=tA)return sA}else{if(e<=-nA)return oA;if(e+1>=nA)return aA}return e<0?t?rA:iA:uA(e%eA|0,e/eA|0,t)}function lA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pA=function(e){function t(t){var n,r;return uc(l(n=e.call(this)||this),"name","AgoraRTCImageModeration"),uc(l(n),"_connectionState",Am.CONNECTING),uc(l(n),"_sequence",0),uc(l(n),"_moderationStartTime",void 0),uc(l(n),"_workerConnection",void 0),uc(l(n),"_workerMessageLengthLimit",void 0),uc(l(n),"_qualityRatio",void 0),uc(l(n),"_connectInfo",void 0),uc(l(n),"_cancelTokenSource",C_.CancelToken.source()),uc(l(n),"_retryConfig",void 0),uc(l(n),"_moderationInterval",void 0),uc(l(n),"_moderationTimer",null),uc(l(n),"_moderationMode",1),uc(l(n),"_quality",1),uc(l(n),"_qualityTimer",null),uc(l(n),"_ticket",void 0),uc(l(n),"_moderationIntervalMinimum",void 0),uc(l(n),"_uploadFailedNum",0),uc(l(n),"_uploadNum",0),uc(l(n),"_uploadTimer",null),uc(l(n),"_moderationId",void 0),uc(l(n),"inspectImage",(function(){if(n.connectionState!==Am.CONNECTED)throw new Fv(ql.OPERATION_ABORTED,"image moderation service connection status is ".concat(n.connectionState));n._moderationTimer&&(window.clearInterval(n._moderationTimer),n._moderationTimer=null),n._moderationTimer=window.setInterval((function(){n.connectionState===Am.CONNECTED?n.requestToInspectImage():tv.debug("[".concat(n._moderationId,"] Moderation State is not connected , "),n.connectionState)}),n._moderationInterval<n._moderationIntervalMinimum?n._moderationIntervalMinimum:n._moderationInterval),n.requestToInspectImage()})),n._moderationId=yf(5,"image-moderation-"),n._workerMessageLengthLimit=W_("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),n._moderationIntervalMinimum=W_("IMAGE_MODERATION_INTERVAL_MINIMUM"),n._moderationInterval=null!==(r=t.interval)&&void 0!==r?r:1e3,n._qualityRatio=W_("IMAGE_MODERATION_QUALITY_RATIO"),n._moderationStartTime=Number(Date.now()),n._workerConnection=new eg("worker-"+n._moderationId,Nf),n.on(Im.STATE_CHANGE,(function(e,t){tv.debug("[".concat(n._moderationId,"] Moderation operation :").concat(km[e]," ").concat(t||""))})),n.handleWorkerEvents(),n}p(t,e);var n=t.prototype;return n.init=function(){var e=d(c().mark((function e(t,n){var r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.emit(Im.STATE_CHANGE,km.CONNECT_AP),this._connectInfo=t,r=this._cancelTokenSource.token,e.abrupt("return",(this._retryConfig=n,new Vl((function(e,o){i.on(Im.CONNECTION_STATE_CHANGE,(function(t,n){t===Am.CONNECTED&&e()})),i.requestAP(t,r,n).then((function(e){i.connectWorker(e)})).catch((function(e){o(e)}))}))));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateConfig=function(e){var t;this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,tv.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(e))),this.connectionState===Am.CONNECTED&&this.inspectImage()},n.requestAP=function(){var e=d(c().mark((function e(t,n,r){var i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=W_("WEBCS_DOMAIN").map((function(e){return"https://".concat(e,"/api/v1")})),e.next=3,function(e,t,n,r){var i=t.appId,o=t.areaCode,a=t.cname,s=t.sid,u=t.token,l=t.uid;qw++;var p,f,h="moderation_plugin",_={service_name:h,json_body:JSON.stringify({appId:i,areaCode:o,cname:a,command:"allocateEdge",requestId:qw,seq:qw,sid:s,appToken:u,ts:Date.now(),uid:l+""})},v=e[0];return Df(d(c().mark((function e(){var t,r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=Date.now(),e.next=3,Cw(v,{data:_,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});case 3:if(t=e.sent,f=Date.now()-p,0===t.code){e.next=7;break}throw r=new Fv(ql.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+t.code,{retry:!0,responseTime:f}),tv.error(r.toString()),r;case 7:if(200===(i=JSON.parse(t.json_body)).code){e.next=11;break}throw o=new Fv(ql.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(i.code,", reason: ").concat(i.reason),{code:i.code,responseTime:f}),tv.error(o.toString()),o;case 11:if(i.servers&&Array.isArray(i.servers)&&0!==i.servers.length){e.next=14;break}throw a=new Fv(ql.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:i.code,responseTime:f}),tv.error(a.toString()),a;case 14:if(i.servers.some((function(e){return!!e.wss}))){e.next=17;break}throw s=new Fv(ql.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:i.code,responseTime:f}),tv.error(s.toString()),s;case 17:return u=W_("IMAGE_MODERATION_WORKER_HOST"),e.abrupt("return",{addressList:i.servers.map((function(e){var t=e.address,n=e.wss;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(u,":").concat(n,"/moderation")})).filter((function(e){return!!e})),workerToken:i.workerToken,vid:i.vid,ticket:i.appTicket,responseTime:f});case 19:case"end":return e.stop()}}),e)}))),(function(t,n){return pv.apworkerEvent(s,{success:!0,sc:200,serviceName:h,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:f,serverIp:e[n%e.length]}),!1}),(function(t,n){return pv.apworkerEvent(s,{success:!1,sc:t.data&&t.data.code||200,serviceName:h,responseTime:f,serverIp:e[n%e.length]}),!!(t.code!==ql.OPERATION_ABORTED&&t.code!==ql.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(v=e[(n+1)%e.length],!0)}),r)}(i,t,n,r);case 3:return o=e.sent,this.emit(Im.STATE_CHANGE,km.AP_CONNECTED),a=o.addressList,s=o.ticket,e.abrupt("return",(this._ticket=s,a));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.connectWorker=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.emit(Im.STATE_CHANGE,km.CONNECT_WORKER),e.next=3,this._workerConnection.init(t,1e4);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.handleWorkerEvents=function(){var e=this;this._workerConnection.on(Pv.CONNECTED,d(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.emit(Im.STATE_CHANGE,km.WORKER_CONNECTED,e._workerConnection.url),e.connectionState=Am.CONNECTED;case 1:case"end":return t.stop()}}),t)})))),this._workerConnection.on(Pv.CLOSED,(function(){e.connectionState=Am.CLOSED})),this._workerConnection.on(Pv.FAILED,(function(){e.connectionState=Am.CLOSED})),this._workerConnection.on(Pv.RECONNECTING,(function(){e.connectionState=e.connectionState===Am.CONNECTED?Am.RECONNECTING:Am.CONNECTING})),this._workerConnection.on(Pv.ON_MESSAGE,function(){var t=d(c().mark((function t(n){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.data instanceof ArrayBuffer?(r=LO(new Uint8Array(n.data)),W_("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&tv.debug("[".concat(e._moderationId,"] Response message for worker of image moderation "),JSON.stringify(r)),e._uploadNum++,void 0===r.code||0===r.code||(e._uploadFailedNum++,tv.error("[".concat(e._moderationId,"] Error response from worke, code is ").concat(r.code,", msg is ").concat(r.msg)),e._uploadTimer||(e._uploadTimer=window.setTimeout((function(){pv.reportApiInvoke(e._connectInfo.sid||null,{name:Lp.IMAGE_MODERATION_UPLOAD,options:[e._uploadFailedNum,e._uploadNum,r.code],tag:Mp.TRACER}).onError(new Fv(ql.IMAGE_MODERATION_UPLOAD_FAILED,r.msg)),e._uploadTimer=null}),W_("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))):tv.error("[".concat(e._moderationId,"] Unexpected message type from worker"));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this._workerConnection.on(Pv.WILL_RECONNECT,(function(e,t,n){"recover"===e&&n(e),n("tryNext")})),this._workerConnection.on(Pv.REQUEST_NEW_URLS,(function(t,n){e.requestAP(e._connectInfo,e._cancelTokenSource.token,e._retryConfig).then(t).catch(n)}))},t.intToLong=function(e){return{low:e|=0,high:e>>31,unsigned:e>=0}},n.requestToInspectImage=function(){var e=d(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=tf(this,Im.CLIENT_LOCAL_VIDEO_TRACK),n={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid},!t){e.next=11;break}if(t.isPlaying){e.next=4;break}return e.abrupt("return",void(W_("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&tv.debug("Only the track being played can be inspected")));case 4:return this._sequence++,e.next=7,this.generateRequestData(t,n);case 7:r=e.sent,this._workerConnection.sendMessage(r,!0,!0),e.next=12;break;case 11:W_("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&tv.debug("Only the track being published can be inspected");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generateRequestData=function(){var e=d(c().mark((function e(n,r){var i,o,a,s,u,d,l,p,f,h,_,v,m,g;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.appId,o=r.cname,a=r.cid,s=r.vid,u=r.sid,d=r.uid,l=Date.now(),e.next=4,n.getCurrentFrameImage("image/jpeg",this.quality);case 4:return p=e.sent,e.next=7,by(p,i,o);case 7:if(f=e.sent,h=this._sequence+"-"+a+"-"+d+"-"+l+"-"+yf(12,""),_={appId:i,cid:a,cname:o,deviceId:"",elapse:t.intToLong(Number(l-this._moderationStartTime)),fileSize:p.buffer.byteLength,height:p.height,width:p.width,jpg:f,networkType:6,osType:7,requestId:h,sdkVersion:"4.19.3",sequence:this._sequence,sid:u,timestamp:dA(l),uid:d,vid:s,service:this._moderationMode,ticket:this._ticket},!((v=xO(_)).byteLength<this._workerMessageLengthLimit)){e.next=14;break}return W_("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&(delete(m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lA(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},_)).jpg,tv.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(m))),e.abrupt("return",v);case 14:return g=this.quality*this._qualityRatio,this.quality=g,e.next=18,this.generateRequestData(n,{appId:i,cname:o,cid:a,vid:s,sid:u,uid:d});case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.close=function(){this._cancelTokenSource.cancel(),this._cancelTokenSource=C_.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=Am.CLOSED,this.emit(Im.STATE_CHANGE,km.CLOSED)},s(t,[{key:"connectionState",get:function(){return this._connectionState},set:function(e){if(this._connectionState!==e){var t=this._connectionState;this._connectionState=e,this.emit(Im.CONNECTION_STATE_CHANGE,e,t)}}},{key:"quality",get:function(){return this._quality},set:function(e){var t=this;this._quality=e>1?1:e<.1?.1:e,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout((function(){t.quality=t._quality/t._qualityRatio}),6e4))}}]),t}(Kp);function fA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fA(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _A,vA=function(e){function t(n,r,i){var o;return uc(l(o=e.call(this,n,r)||this),"direction",void 0),uc(l(o),"store",void 0),uc(l(o),"peerConnection",void 0),uc(l(o),"transportEventReceiver",void 0),uc(l(o),"statsFilter",void 0),uc(l(o),"localCandidateCount",0),uc(l(o),"allCandidatesReceived",!1),uc(l(o),"mutex",new If("P2PConnection-mutex")),uc(l(o),"dataChannel",void 0),uc(l(o),"onLocalCandidate",void 0),o.store=r,o.peerConnection=new RTCPeerConnection(t.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),o.direction=null!=i?i:Nv.SEND_ONLY,o.dataChannel=o.peerConnection.createDataChannel("agora-p2p-signal",{ordered:!0}),o.statsFilter=RC(o.peerConnection,W_("STATS_UPDATE_INTERVAL"),void 0,ip()?1200:void 0),o.bindPCEvents(),o.bindStatsEvents(),o.store.p2pId=o.store.p2pId+1,o}p(t,e);var n=t.prototype;return n.establish=function(){var e=d(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=12;break}return e.next=4,this.peerConnection.setRemoteDescription({type:"offer",sdp:t});case 4:return e.next=6,this.peerConnection.createAnswer();case 6:return n=e.sent,e.next=9,this.peerConnection.setLocalDescription(n);case 9:if(n.sdp){e.next=11;break}throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");case 11:return e.abrupt("return",n.sdp);case 12:return e.next=14,this.peerConnection.createOffer();case 14:if((r=e.sent).sdp){e.next=17;break}throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");case 17:return e.next=19,this.peerConnection.setLocalDescription(r);case 19:return e.abrupt("return",r.sdp);case 22:throw e.prev=22,e.t0=e.catch(0),new Sp(ql.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.t0.toString());case 25:case"end":return e.stop()}}),e,this,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),n.connect=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection.setRemoteDescription({type:"answer",sdp:t});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.t0.toString()));case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),n.addRemoteCandidate=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection.addIceCandidate(t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Sp(ql.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(e.t0.toString()));case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),n.send=function(){var e=d(c().mark((function e(t){var n,r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=[],t.forEach((function(e){var t=o.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});n.push(t)})),e.t0=ip()&&!0===W_("SIMULCAST"),!e.t0){e.next=7;break}return e.next=7,this.applySimulcastForFirefox(n,t);case 7:return e.next=9,this.applySimulcastEncodings(n,t);case 9:return e.next=11,this.applySendEncodings(n,t);case 11:return e.next=13,this.peerConnection.createOffer();case 13:return r=e.sent,e.next=16,this.peerConnection.setLocalDescription(r);case 16:if(r.sdp){e.next=18;break}throw new Error("Cannot get offer.sdp when trying to send PeerConnection.");case 18:return i=n.map((function(e){var t=o.getLocalSSRC(e.mid,r.sdp);if(!t)throw new Error("Cannot get ssrc when trying to send PeerConnection.");return{mid:e.mid,localSSRC:[{ssrcId:t}]}})),e.abrupt("return",{sdp:r.sdp,trackMessage:i});case 22:throw e.prev=22,e.t1=e.catch(0),e.t1 instanceof Sp?e.t1:new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.t1.toString()));case 25:case"end":return e.stop()}}),e,this,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),n.stopSending=function(){var e=d(c().mark((function e(t,n){var r,i,o,a=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}e.t0=void 0,e.next=7;break;case 4:return e.next=6,this.mutex.lock("From P2PConnection.stopSending");case 6:e.t0=e.sent;case 7:if(r=e.t0,e.prev=8,(i=this.peerConnection.getTransceivers().filter((function(e){return-1!==t.indexOf(e.mid)}))).length===t.length){e.next=12;break}throw new Error("Transceivers' length (".concat(i.length,") doesn't match mids' length (").concat(t.length,") when trying to call P2PConnection.stopSending."));case 12:return i.map((function(e){var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e),a.peerConnection.removeTrack(e.sender)})),e.next=15,this.peerConnection.createOffer();case 15:return o=e.sent,e.next=18,this.peerConnection.setLocalDescription(o);case 18:if(o.sdp){e.next=20;break}throw new Error("Cannot get offer.sdp when trying to send PeerConnection.");case 20:return e.abrupt("return",o.sdp);case 23:throw e.prev=23,e.t1=e.catch(8),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.t1.toString()));case 26:return e.prev=26,r&&r(),e.finish(26);case 29:case"end":return e.stop()}}),e,this,[[8,23,26,29]])})));return function(t,n){return e.apply(this,arguments)}}(),n.receive=function(){var e=d(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 3:return e.next=5,this.peerConnection.createAnswer();case 5:if((i=e.sent).sdp){e.next=8;break}throw new Error("Cannot get answer sdp when trying to receive track.");case 8:return e.next=10,this.peerConnection.setLocalDescription(i);case 10:if(tv.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP.")),void 0!==(o=this.getRemoteMid(r,n))){e.next=14;break}throw new Error("Cannot get transceiver mid when trying to receive track.");case 14:if((a=this.peerConnection.getTransceivers().find((function(e){return e.mid===o})))&&null!==a.mid){e.next=17;break}throw new Error("Cannot get transceiver after setLocalDescription.");case 17:return e.abrupt("return",{track:a.receiver.track,mid:a.mid,sdp:i.sdp});case 20:throw e.prev=20,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n.setDescription=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"remote"!==t){e.next=13;break}return e.next=4,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 4:return e.next=6,this.peerConnection.createAnswer();case 6:if((r=e.sent).sdp){e.next=9;break}throw new Error("Cannot get answer sdp when trying to receive track.");case 9:return e.next=11,this.peerConnection.setLocalDescription(r);case 11:return tv.debug("[".concat(this.store.clientId,"] [P2PConnection] exchanging SDP, type is ").concat(t)),e.abrupt("return",r.sdp);case 13:return e.next=15,this.peerConnection.setRemoteDescription({type:"answer",sdp:n});case 15:e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection.setDescription failed; ".concat(e.t0.toString()));case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),n.stopReceiving=function(){var e=d(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(r=this.peerConnection.getTransceivers().filter((function(e){return-1!==t.indexOf(e.mid)}))).length===t.length){e.next=4;break}throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");case 4:return r.map((function(e){var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)})),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,e.next=12,this.peerConnection.setLocalDescription(i);case 12:if(i.sdp){e.next=14;break}throw new Error("Cannot get answer sdp when trying to receive track.");case 14:return e.abrupt("return",i.sdp);case 17:throw e.prev=17,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.t0.toString()));case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),n.restartICE=function(){var e=d(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection.createOffer({iceRestart:!0});case 3:if((t=e.sent).sdp){e.next=6;break}throw new Error("Cannot restartICE because restart offer SDP does not exist.");case 6:return this.store.descriptionStart(),e.next=9,this.peerConnection.setLocalDescription(t);case 9:return e.abrupt("return",t.sdp);case 12:throw e.prev=12,e.t0=e.catch(0),new Sp(ql.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.t0.toString()));case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),n.close=function(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transportEventReceiver=void 0,this.statsFilter.destroy()},n.getStats=function(){return this.statsFilter.getStats()},n.getRemoteVideoIsReady=function(e){return this.statsFilter.getVideoIsReady(e)},n.updateEncoderConfig=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateSendParameters=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().filter((function(e){return e.mid===t})),e.t0=1===r.length,!e.t0){e.next=12;break}if(!this.isVP8Simulcast(n)){e.next=10;break}if(e.t1=ip(),e.t1){e.next=8;break}return e.next=8,this.applySimulcastEncodings(r,[n]);case 8:e.next=12;break;case 10:return e.next=12,this.applySendEncodings(r,[n]);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setStatsRemoteVideoIsReady=function(e,t){this.statsFilter.setVideoIsReady2(e,t)},n.replaceTrack=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().find((function(e){return e.mid===n})),e.t0=r,!e.t0){e.next=5;break}return e.next=5,r.sender.replaceTrack(t._mediaStreamTrack);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getSelectedCandidatePair=function(){var e=d(c().mark((function e(){var t,n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.peerConnection.getReceivers()).length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair())){e.next=4;break}return n=t[0].transport.iceTransport,r=n.getSelectedCandidatePair(),i=r.local,o=r.remote,e.abrupt("return",{local:hA(hA({},uC),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port}),remote:hA(hA({},uC),{},{candidateType:o.type,protocol:o.protocol,address:o.address,port:o.port})});case 4:return e.abrupt("return",this.statsFilter.getSelectedCandidatePair());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.bindPCEvents=function(){var e=this;this.peerConnection.oniceconnectionstatechange=function(){var t;null===(t=e.onICEConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=function(){var t;null===(t=e.onConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.connectionState)},this.peerConnection.onicecandidate=function(t){var n;t.candidate&&(null===(n=e.onLocalCandidate)||void 0===n||n.call(e,t.candidate)),t.candidate?e.localCandidateCount+=1:(e.peerConnection.onicecandidate=null,e.allCandidatesReceived=!0,tv.debug("[".concat(e.store.clientId,"] [pc-").concat(e.store.p2pId,"] local candidate count"),e.localCandidateCount))},setTimeout((function(){e.allCandidatesReceived||(e.allCandidatesReceived=!0,tv.debug("[".concat(e.store.clientId,"] [pc-").concat(e.store.p2pId,"] onicecandidate timeout, local candidate count"),e.localCandidateCount))}),W_("CANDIDATE_TIMEOUT"))},n.unbindPCEvents=function(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null},t.resolvePCConfiguration=function(e){var n,r,i={iceServers:[]};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Xp(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(n=i.iceServers).push.apply(n,t.turnServerConfigToIceServers(e.turnServer.servers)),W_("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,t.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),W_("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),W_("ENABLE_ENCODED_TRANSFORM")&&pE().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),i},t.turnServerConfigToIceServers=function(e){var t=[];return e.forEach((function(e){e.tcpport&&(t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(rw(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}),t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=udp")}),t.push({username:e.username,credential:e.password,credentialType:"password",urls:"stun:".concat(e.turnServerURL,":").concat(e.tcpport)}))})),t},n.tryBindTransportEvents=function(e){var t=this,n=e.transport;if(n){this.transportEventReceiver=e,n.onstatechange=function(){var e;null!=n&&n.state&&(null===(e=t.onDTLSTransportStateChange)||void 0===e||e.call(t,n.state))},n.onerror=function(e){var n;null===(n=t.onDTLSTransportError)||void 0===n||n.call(t,"error"in e?e.error:e)};var r=n.iceTransport;r&&(r.onstatechange=function(){var e,r=null==n?void 0:n.iceTransport.state;r&&(null===(e=t.onICETransportStateChange)||void 0===e||e.call(t,r))},r.getSelectedCandidatePair&&(r.onselectedcandidatepairchange=function(){if(r.getSelectedCandidatePair()){var e=r.getSelectedCandidatePair(),n=e.local,i=e.remote;tv.info("[".concat(t.store.clientId,"] [pc-").concat(t.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol}),", remote ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})," )"))}}))}},n.tryUnbindTransportEvents=function(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))},n.updateRtpSenderEncodings=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u,d,l,p,f,h,_;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||(n=this.peerConnection.getSenders().find((function(e){return e.track===t._mediaStreamTrack}))),n){e.next=3;break}return e.abrupt("return",tv.warn("[".concat(t.getTrackId(),"] no rtpSender found}")));case 3:if(!this.isVP8Simulcast(t)){e.next=5;break}return e.abrupt("return",tv.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings"));case 5:if(pE().supportSetRtpSenderParameters){e.next=7;break}return e.abrupt("return",tv.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters"));case 7:i={},o={},e.t0=t._optimizationMode,e.next="motion"===e.t0?11:"detail"===e.t0?13:15;break;case 11:return i.degradationPreference="maintain-framerate",e.abrupt("break",16);case 13:return i.degradationPreference="maintain-resolution",e.abrupt("break",16);case 15:i.degradationPreference="balanced";case 16:return t._encoderConfig&&(s=t._encoderConfig,u=s.bitrateMax,d=s.frameRate,l=s.scaleResolutionDownBy,u&&(o.maxBitrate=1e3*u),Or(a=t._hints).call(a,Ng.LOW_STREAM)&&(d&&(o.maxFramerate=ow(d)),l&&l>=1&&(o.scaleResolutionDownBy=l))),W_("DSCP_TYPE")&&mp()&&(f=W_("DSCP_TYPE"),Or(p=["very-low","low","medium","high"]).call(p,f)&&(o.networkPriority=f)),h=n.getParameters(),_=null===(r=h.encodings)||void 0===r?void 0:r[0],ip()&&!_&&(i.encodings=[o]),_&&Object.assign(_,o),Object.assign(h,i),tv.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(h.encodings))),e.next=25,n.setParameters(h);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.applySendEncodings=function(){var e=d(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,pE().supportSetRtpSenderParameters){e.next=3;break}return e.abrupt("return");case 3:if(t.length===n.length){e.next=5;break}return e.abrupt("return");case 5:r=0;case 6:if(!(r<t.length)){e.next=15;break}if(i=t[r],o=n[r],e.t0=o instanceof wy&&!this.isVP8Simulcast(o),!e.t0){e.next=12;break}return e.next=12,this.updateRtpSenderEncodings(o,i.sender);case 12:r++,e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(0),tv.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."));case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),n.mungSendOfferSDP=function(e,t,n){var r=this,i=UR.parse(e);return t.forEach((function(e,t){var o=n[t],a=i.mediaDescriptions.find((function(e){return e.attributes.mid===o}));a&&(zR(a,e),XR(a,e,r.store.codec))})),UR.print(i)},n.bindStatsEvents=function(){var e=this;this.statsFilter.onFirstAudioReceived=function(t){var n;null===(n=e.onFirstAudioReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoReceived=function(t){var n;null===(n=e.onFirstVideoReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstAudioDecoded=function(t){var n;null===(n=e.onFirstAudioDecoded)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoDecoded=function(t,n,r){var i;null===(i=e.onFirstVideoDecoded)||void 0===i||i.call(e,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=function(t,n){var r;null===(r=e.onSelectedLocalCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=function(t,n){var r;null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onFirstVideoDecodedTimeout=function(t){var n;null===(n=e.onFirstVideoDecodedTimeout)||void 0===n||n.call(e,t)}},n.unbindStatsEvents=function(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0},n.applySimulcastForFirefox=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u,d,l,p,f,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(d=t[r],!((l=n[r])instanceof wy&&!Or(i=l._hints).call(i,Ng.LOW_STREAM)&&null!==(o=l._encoderConfig)&&void 0!==o&&o.bitrateMax&&(null===(a=l._encoderConfig)||void 0===a?void 0:a.bitrateMax)>200&&null!==(s=l._scalabilityMode)&&void 0!==s&&s.numSpatialLayers&&(null===(u=l._scalabilityMode)||void 0===u?void 0:u.numSpatialLayers)>1&&"vp8"===this.store.codec)){e.next=10;break}return p={},f={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4},p.encodings=[{rid:"m",active:!0,maxBitrate:f.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:f.high}],h=d.sender.getParameters(),e.next=10,d.sender.setParameters(Object.assign(h,p));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.applySimulcastEncodings=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ip()||t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(!((i=n[r])instanceof wy&&this.isVP8Simulcast(i))){e.next=10;break}return o=t[r],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4},a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}],u=o.sender.getParameters(),e.next=10,o.sender.setParameters(Object.assign(u,a));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.isVP8Simulcast=function(e){var t,n,r,i,o;return!!(e instanceof wy&&W_("SIMULCAST")&&"vp8"===this.store.codec&&!Or(t=e._hints).call(t,Ng.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)},n.logSDPExchange=function(e,t,n,r){var i=this;if(W_("SDP_LOGGING"))return tv.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?function(e){i.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0},n.getLocalSSRC=function(e,t){var n,r;if(t=null!==(n=t)&&void 0!==n?n:null===(r=this.currentLocalDescription)||void 0===r?void 0:r.sdp){var i,o=null===(i=UR.parse(t).mediaDescriptions.find((function(t){return t.attributes.mid===e})))||void 0===i?void 0:i.attributes.ssrcs;return null==o?void 0:o[0].ssrcId}},n.getRemoteMid=function(e,t){var n,r,i;if(t=null!==(n=t)&&void 0!==n?n:null===(r=this.currentRemoteDescription)||void 0===r?void 0:r.sdp)return null===(i=UR.parse(t).mediaDescriptions.find((function(t){return t.attributes.ssrcs.some((function(t){return t.ssrcId===e}))})))||void 0===i?void 0:i.attributes.mid},n.getRemoteSSRC=function(){var e=d(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=null!==(r=n)&&void 0!==r?r:null===(i=this.currentRemoteDescription)||void 0===i?void 0:i.sdp)){e.next=3;break}return a=null===(o=UR.parse(n).mediaDescriptions.find((function(e){return e.attributes.mid===t})))||void 0===o?void 0:o.attributes.ssrcs,e.abrupt("return",null==a?void 0:a[0].ssrcId);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),s(t,[{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}},{key:"dtlsTransportState",get:function(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}}]),t}(Lm);function mA(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=d(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From P2PConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function gA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gA(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],vA.prototype,"establish",null),Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],vA.prototype,"connect",null),Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[RTCIceCandidate]),Bv("design:returntype",Vl)],vA.prototype,"addRemoteCandidate",null),Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],vA.prototype,"send",null),Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[String,String,Number]),Bv("design:returntype",Vl)],vA.prototype,"receive",null),Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[String,String]),Bv("design:returntype",Vl)],vA.prototype,"setDescription",null),Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[Array,String]),Bv("design:returntype",Vl)],vA.prototype,"stopReceiving",null),Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Vl)],vA.prototype,"restartICE",null),Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],vA.prototype,"close",null),Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[String,tE]),Bv("design:returntype",Vl)],vA.prototype,"updateEncoderConfig",null),Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[String,tE]),Bv("design:returntype",Vl)],vA.prototype,"updateSendParameters",null),Vv([mA,Bv("design:type",Function),Bv("design:paramtypes",[tE,String]),Bv("design:returntype",Vl)],vA.prototype,"replaceTrack",null),function(e){e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY"}(_A||(_A={}));var yA=function(e){function t(t,n){var r;return uc(l(r=e.call(this)||this),"store",void 0),uc(l(r),"statsUploader",void 0),uc(l(r),"sendConnection",void 0),uc(l(r),"recvConnection",void 0),uc(l(r),"localTrackMap",new Map),uc(l(r),"remoteUserMap",new Map),uc(l(r),"localDataChannels",[]),uc(l(r),"pendingLocalTracks",[]),uc(l(r),"pendingRemoteTracks",[]),uc(l(r),"statsCollector",void 0),uc(l(r),"dtlsFailedCount",0),uc(l(r),"sendMutex",new If("P2PChannel2-send-mutex")),uc(l(r),"recvMutex",new If("P2PChannel2-recv-mutex")),uc(l(r),"_state",gm.Disconnected),uc(l(r),"_restartStates",["disconnected","failed"]),uc(l(r),"_restartTimer",void 0),uc(l(r),"handleMuteLocalTrack",function(){var e=d(c().mark((function e(t,n,i){var o,a,s,u,d,p,f,h,_,v,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");case 2:if(o=e.sent,e.prev=3,r.sendConnection&&r.state===gm.Connected){e.next=6;break}return e.abrupt("return",void i(new Sp(ql.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.")));case 6:if(0!==(a=r.filterTobeMutedTracks(t)).length){e.next=9;break}return e.abrupt("return",void n());case 9:if((s=a.find((function(e){return"videoLowTrack"===e[0]})))&&s[1].track._originMediaStreamTrack.stop(),u=!1,u="video"===t.trackMediaType?!(null===(d=r.localTrackMap.get(mm.LocalAudioTrack))||void 0===d||!d.track._muted):void 0===(null===(p=r.localTrackMap.get(mm.LocalVideoTrack))||void 0===p?void 0:p.id),f=a.filter((function(e){var t=e[0],n=e[1];return(t!==mm.LocalAudioTrack||u)&&void 0!==n.id})).map((function(e){return e[1]})),e.t0=f.length>0,!e.t0){e.next=20;break}return e.next=18,r.sendConnection.stopSending(f.map((function(e){return e.id})));case 18:h=e.sent,f.forEach((function(e){e.id=void 0,e.ssrcs=void 0}));case 20:return _=r.createMuteMessage(a),v="video"===t.trackMediaType?Pm.MUTE_LOCAL_VIDEO:Pm.MUTE_LOCAL_AUDIO,e.next=24,$p(l(r),Em.RequestP2PMuteLocal,{action:v,sdp:h,message:_,isMuteAll:u});case 24:if(m=e.sent,e.t1=m,!e.t1){e.next=29;break}return e.next=29,r.sendConnection.setDescription("local",m);case 29:if(e.t2=h||"audio"===t.trackMediaType,!e.t2){e.next=33;break}return e.next=33,ef(l(r),Em.RequestMuteLocal,_);case 33:n(),e.next=39;break;case 36:e.prev=36,e.t3=e.catch(3),i(e.t3);case 39:return e.prev=39,o(),e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[3,36,39,42]])})));return function(t,n,r){return e.apply(this,arguments)}}()),uc(l(r),"handleUnmuteLocalTrack",function(){var e=d(c().mark((function e(t,n,i){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");case 2:if(o=e.sent,e.prev=3,r.sendConnection&&r.state===gm.Connected){e.next=6;break}return e.abrupt("return",void i(new Sp(ql.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established.")));case 6:if(0!==(a=r.filterTobeUnmutedTracks(t)).length){e.next=9;break}return e.abrupt("return",void n());case 9:return s=r.createUnmuteMessage(a),u="video"===t.trackMediaType?Pm.UNMUTE_LOCAL_VIDEO:Pm.UNMUTE_LOCAL_AUDIO,e.next=12,ef(l(r),Em.RequestP2PMuteLocal,{action:u,message:s});case 12:n(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),i(e.t0);case 18:return e.prev=18,o(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t,n,r){return e.apply(this,arguments)}}()),uc(l(r),"handleUpdateVideoEncoder",function(){var e=d(c().mark((function e(t,n,i){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");case 2:if(o=e.sent,e.prev=3,a=r.localTrackMap.get(mm.LocalVideoTrack),r.sendConnection&&a&&a.track===t&&r.state===gm.Connected){e.next=7;break}return e.abrupt("return",void n());case 7:if(s=a.id,u=a.track,e.t0=s,!e.t0){e.next=15;break}return e.next=12,r.sendConnection.updateSendParameters(s,u);case 12:return e.next=14,r.sendConnection.updateEncoderConfig(s,u);case 14:r.emit(Em.UpdateVideoEncoder,u);case 15:n(),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(3),i(e.t1);case 21:return e.prev=21,o(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[3,18,21,24]])})));return function(t,n,r){return e.apply(this,arguments)}}()),uc(l(r),"handleSetOptimizationMode",function(){var e=d(c().mark((function e(t,n,i){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.sendMutex.lock("Locking from P2PChannel2.handleSetOptimizationMode");case 2:if(o=e.sent,e.prev=3,a=r.localTrackMap.get(mm.LocalVideoTrack),r.sendConnection&&a&&a.track===t&&r.state===gm.Connected){e.next=7;break}return e.abrupt("return");case 7:if(s=a.id,u=a.track,e.t0=s,!e.t0){e.next=12;break}return e.next=12,r.sendConnection.updateSendParameters(s,u);case 12:n(),e.next=18;break;case 15:e.prev=15,e.t1=e.catch(3),i(e.t1);case 18:return e.prev=18,o(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t,n,r){return e.apply(this,arguments)}}()),uc(l(r),"handleReplaceTrack",function(){var e=d(c().mark((function e(t,n,i,o){var a,s,u,d,l,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tv.debug("[".concat(r.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(t.getTrackId(),"]")),e.t0="boolean"==typeof o&&o,e.t0){e.next=6;break}return e.next=5,r.sendMutex.lock("From P2PChannel2.handleReplaceTrack");case 5:a=e.sent;case 6:if(e.prev=6,u=Array.from(r.localTrackMap.entries()).find((function(e){var n=e[1].track;return t===n})),r.sendConnection&&u&&void 0!==u[1].id&&r.state===gm.Connected){e.next=10;break}return e.abrupt("return",void n());case 10:return e.next=12,null===(s=r.sendConnection)||void 0===s?void 0:s.replaceTrack(t,u[1].id);case 12:if(u[0]!==mm.LocalVideoTrack||!pE().supportDualStreamEncoding){e.next=21;break}if(!(d=r.localTrackMap.get(mm.LocalVideoLowTrack))){e.next=21;break}return l=t._mediaStreamTrack.clone(),d.track._originMediaStreamTrack.stop(),d.track._mediaStreamTrack=l,d.track._originMediaStreamTrack=l,e.next=21,new Vl((function(e,t){r.handleReplaceTrack(d.track,e,t,!0)}));case 21:n(),e.next=27;break;case 24:e.prev=24,e.t1=e.catch(6),i(e.t1);case 27:return e.prev=27,null===(p=a)||void 0===p||p(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[6,24,27,30]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()),uc(l(r),"handleGetLocalVideoStats",(function(e){e(r.statsCollector.getLocalVideoTrackStats())})),uc(l(r),"handleGetLocalAudioStats",(function(e){e(r.statsCollector.getLocalAudioTrackStats())})),uc(l(r),"handleGetRemoteVideoStats",(function(e){return r.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid]})),uc(l(r),"handleGetRemoteAudioStats",(function(e){return r.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid]})),r.store=t,r.statsCollector=n,r.statsCollector.addP2PChannel(l(r)),r.statsUploader=new QC,r.bindStatsUploaderEvents(),r}p(t,e);var n=t.prototype;return n.startP2PConnection=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.connect=function(){var e=d(c().mark((function e(t,n,r,i,o,a){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED,"p2p mode does not support connect.");case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}(),n.startP2P=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state=gm.New,this.sendConnection&&(tv.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset P2PConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),this.recvConnection&&(tv.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset P2PConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),this.sendConnection=new vA(t,this.store),this.bindConnectionEvents(this.sendConnection),this.recvConnection=new vA(t,this.store,Nv.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection),!n){e.next=8;break}return this.store.peerConnectionStart(),e.next=4,this.recvConnection.establish(n);case 4:return e.next=6,this.sendConnection.establish(n);case 6:return r=e.sent,e.abrupt("return",(this.statsUploader.startUploadTransportStats(!0),this.statsUploader.startUploadExtensionUsageStats(),this.state=gm.Connected,r));case 8:return e.next=10,this.recvConnection.establish(n);case 10:return e.abrupt("return",this.sendConnection.establish(n));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.p2pConnect=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sendConnection&&this.recvConnection){e.next=2;break}throw new Sp(ql.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.startP2PConnection .");case 2:return this.store.peerConnectionStart(),e.next=5,this.recvConnection.connect(t);case 5:return e.next=7,this.sendConnection.connect(t);case 7:this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=gm.Connected;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.addRemoteCandidate=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sendConnection&&this.recvConnection){e.next=2;break}throw new Sp(ql.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");case 2:return e.next=4,this.recvConnection.addRemoteCandidate(t);case 4:return e.next=6,this.sendConnection.addRemoteCandidate(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.publish=function(){var e=d(c().mark((function e(t,n,r){var i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sendConnection&&this.state===gm.Connected){e.next=4;break}return this.throwIfTrackTypeNotMatch(t),i=t.filter((function(e){return-1===s.pendingLocalTracks.indexOf(e)})),e.abrupt("return",void(this.pendingLocalTracks=this.pendingLocalTracks.concat(i)));case 4:if(this.store.pubId=this.store.pubId+1,QT.markPublishStart(this.store.clientId,this.store.pubId),0!==(o=this.filterTobePublishedTracks(t,n,r)).length){e.next=10;break}return e.next=9,this.tryToUnmuteAudio(t);case 9:return e.abrupt("return",void e.sent);case 10:return o.forEach((function(e){var t=e.track,n=e.type,r=Date.now();s.store.publish(t.getTrackId(),n===mm.LocalAudioTrack?"audio":"video",r)})),this.bindLocalTrackEvents(o),a=this.createGatewayPublishMessage(o),e.abrupt("return",(this.assignLocalTracks(o),o.forEach((function(e){var t=e.track,n=e.type,r=Date.now();s.store.publish(t.getTrackId(),n===mm.LocalAudioTrack?"audio":"video",void 0,r)})),a));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.dopublish=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s,u,d,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sendConnection&&this.state===gm.Connected){e.next=2;break}return e.abrupt("return");case 2:if(!(n=this.localTrackMap.get(t))){e.next=23;break}return e.next=6,this.sendConnection.send([n.track]);case 6:return r=e.sent,i=r.sdp,o=r.trackMessage,a=o[0],s=a.mid,u=a.localSSRC,n.id=s,n.ssrcs=u,this.statsCollector.addLocalStats(t),this.statsUploader.startUploadUplinkStats(),e.next=15,$p(this,Em.RequestP2PPublish,{kind:t===mm.LocalAudioTrack?hm.AUDIO:hm.VIDEO,sdp:i,ssrcId:u[0].ssrcId});case 15:return d=e.sent,e.next=18,this.sendConnection.setDescription("local",d);case 18:return l=this.createUnmuteMessage([[t,n]]),e.next=21,ef(this,Em.RequestUnmuteLocal,l);case 21:e.next=24;break;case 23:case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setDescription=function(){var e=d(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("local"!==t){e.next=7;break}return e.next=3,this.sendMutex.lock("From P2PChannel.restartICE");case 3:r=e.sent,i=this.sendConnection,e.next=11;break;case 7:return e.next=9,this.recvMutex.lock("From P2PChannel.restartICE");case 9:r=e.sent,i=this.recvConnection;case 11:if(e.prev=11,i&&this.state===gm.Connected){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,i.setDescription(t,n);case 16:return e.abrupt("return",e.sent);case 17:return e.prev=17,r(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[11,,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),n.publishLowStream=function(e){return PR(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED,"p2p mode does not support publishLowStream.");case 1:case"end":return e.stop()}}),e)})))()},n.republish=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.pendingLocalTracks.length>0,!e.t0){e.next=7;break}return tv.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),e.next=5,$p(this,Em.RequestRePublish,this.pendingLocalTracks);case 5:this.emit(Em.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[];case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.unpublish=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s,u=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sendConnection&&this.state===gm.Connected){e.next=2;break}return e.abrupt("return",void(0===t.length?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter((function(e){return!Or(t).call(t,e)}))));case 2:if(0!==(n=this.filterTobeUnpublishedTracks(t)).length){e.next=5;break}return e.abrupt("return");case 5:if(this.unbindLocalTrackEvents(n.map((function(e){return{type:e[0],track:e[1].track}}))),r=n.filter((function(e){return void 0!==e[1].id})),this.sendConnection&&this.state===gm.Connected){e.next=9;break}return e.abrupt("return",void t.forEach((function(e){var t=u.pendingLocalTracks.indexOf(e);-1!==t&&u.pendingLocalTracks.splice(t,1)})));case 9:if((i=n.find((function(e){return"videoLowTrack"===e[0]})))&&i[1].track.close(),a=this.createGatewayUnpublishMessage(n),e.t0=r.length>0,!e.t0){e.next=17;break}return e.next=16,this.sendConnection.stopSending(r.map((function(e){return e[1].id})));case 16:o=e.sent;case 17:return this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map((function(e){return{type:e[0],track:e[1].track}}))),n.forEach((function(e){var t=e[0];u.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadUplinkStats(),s=this.createMuteMessage(n),e.next=24,Vl.all(s.map(function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ef(u,Em.RequestMuteLocal,[t]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 24:return e.abrupt("return",{sdp:o,unpubMsg:a});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.unpublishLowStream=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.doUnpublish=function(){var e=d(c().mark((function e(t){var n,r,i,o,a,s,u,l=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sendConnection&&this.state===gm.Connected){e.next=2;break}return e.abrupt("return");case 2:if(n=[],t!==hm.AUDIO&&(void 0!==(null==(r=this.localTrackMap.get(mm.LocalVideoTrack))?void 0:r.id)&&n.push([mm.LocalVideoTrack,r]),void 0!==(null==(i=this.localTrackMap.get(mm.LocalVideoLowTrack))?void 0:i.id)&&n.push([mm.LocalVideoLowTrack,i]),this.statsCollector.removeLocalStats(mm.LocalVideoTrack),this.statsCollector.removeLocalStats(mm.LocalVideoLowTrack)),t!==hm.VIDEO&&(void 0!==(null==(o=this.localTrackMap.get(mm.LocalAudioTrack))?void 0:o.id)&&n.push([mm.LocalAudioTrack,o]),this.statsCollector.removeLocalStats(mm.LocalAudioTrack)),!(n.length>0)){e.next=20;break}return e.next=8,this.sendConnection.stopSending(n.map((function(e){return e[1].id})));case 8:return a=e.sent,n.forEach((function(e){var t=e[1];t.id=void 0,t.ssrcs=void 0})),e.next=12,$p(this,Em.RequestP2PUnPublish,{sdp:a,kind:t});case 12:return s=e.sent,e.next=15,this.sendConnection.setDescription("local",s);case 15:return u=this.createMuteMessage(n),e.next=18,Vl.all(u.map(function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ef(l,Em.RequestMuteLocal,[t]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 18:e.next=21;break;case 20:case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.subscribe=function(){var e=d(c().mark((function e(t,n,r,i){var o,a,s,u,d,l,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recvConnection&&this.state===gm.Connected){e.next=2;break}throw new Sp(ql.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");case 2:if(null===(o=this.remoteUserMap.get(t))||void 0===o||!o.has(n)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.recvConnection.receive(n,r,i);case 6:return a=e.sent,s=a.track,u=a.mid,d=a.sdp,n===hm.AUDIO?(t._audioSSRC=i,t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(s):(t._audioTrack=new Dy(s,t.uid,t._uintid,this.store),tv.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(t._audioTrack.getTrackId()))),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoSSRC=i,t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(s):(t._videoTrack=new Py(s,t.uid,t._uintid,this.store),tv.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(t._videoTrack.getTrackId()))),this.bindRemoteTrackEvents(t,t._videoTrack)),(l=this.remoteUserMap.get(t))?l.set(n,u):this.remoteUserMap.set(t,new Map([[n,u]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadDownlinkStats(),e.next=17,ef(this,Em.RequestP2PUnmuteRemote,n);case 17:return p=this.pendingRemoteTracks.findIndex((function(e){var r=e.user,i=e.kind;return r.uid===t.uid&&n===i})),e.abrupt("return",(-1!==p&&(this.pendingRemoteTracks.splice(p,1),this.emit(Em.MediaReconnectEnd,t.uid)),d));case 19:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),n.unsubscribe=function(){var e=d(c().mark((function e(t,n,r,i){var o,a,s,u=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=this.pendingRemoteTracks.filter((function(e){var n=e.user,i=e.kind;return void 0!==r?n.uid===t.uid&&r===i:n.uid===t.uid}))).forEach((function(e){var t=u.pendingRemoteTracks.indexOf(e);u.pendingRemoteTracks.splice(t,1)})),this.recvConnection&&this.state===gm.Connected||i||o.forEach((function(e){var n,r=e.kind;if(r===hm.AUDIO)null===(n=t._audioTrack)||void 0===n||n._destroy(),t._audioTrack=void 0;else if(r===hm.VIDEO){var i;null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0}})),this.recvConnection&&this.state===gm.Connected){e.next=3;break}return e.abrupt("return");case 3:if(0!==(a=this.filterTobeUnSubscribedTracks(t,r)).length){e.next=6;break}return e.abrupt("return",void(r!==hm.VIDEO&&ef(this,Em.RequestP2PMuteRemote,hm.AUDIO)));case 6:return e.next=8,this.recvConnection.stopReceiving(a.map((function(e){return e[1].id})),n);case 8:return s=e.sent,e.abrupt("return",(this.withdrawRemoteTracks(a),0===this.remoteUserMap.size&&this.statsUploader.stopUploadDownlinkStats(),a.forEach((function(e){var t,n,r=e[0],o=e[1].kind;if(o===hm.VIDEO&&r._videoSSRC&&(null===(t=u.recvConnection)||void 0===t||t.setStatsRemoteVideoIsReady(r._videoSSRC,!1)),o===hm.VIDEO)u.unbindRemoteTrackEvents(r._videoTrack),i||(null===(n=r._videoTrack)||void 0===n||n._destroy(),r._videoTrack=void 0);else if(o===hm.AUDIO){var a;u.unbindRemoteTrackEvents(r._audioTrack),i||(null===(a=r._audioTrack)||void 0===a||a._destroy(),r._audioTrack=void 0)}})),a.filter((function(e){return e[1].kind!==hm.AUDIO})).forEach((function(e){var t=e[1].kind;ef(u,Em.RequestP2PMuteRemote,t)})),r!==hm.VIDEO&&ef(this,Em.RequestP2PMuteRemote,hm.AUDIO),s));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),n.getAllDataChannels=function(){return this.localDataChannels},n.massSubscribe=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED,"p2p mode does not support massSubscribe.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.massSubscribeNoLock=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.massUnsubscribe=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.massUnsubscribeNoLock=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.muteRemote=function(){var e=d(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recvConnection){e.next=2;break}return e.abrupt("return");case 2:if(r=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",void tv.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(t.uid,".")));case 5:if(r.get(n)){e.next=7;break}return e.abrupt("return",void tv.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(t.uid," media type ").concat(n,".")));case 7:void 0!==(i=n===hm.VIDEO?t._videoSSRC:t._audioSSRC)&&this.recvConnection.setStatsRemoteVideoIsReady(i,!1);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.unmuteRemote=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.unmuteRemoteNoLock(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.unmuteRemoteNoLock=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recvConnection){e.next=2;break}return e.abrupt("return");case 2:if(r=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",void tv.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(t.uid,".")));case 5:r.get(n)||tv.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(t.uid," media type ").concat(n,"."));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getAllTracks=function(e){var t=this.localTrackMap.get(mm.LocalAudioTrack);if((null==t?void 0:t.track)instanceof iy){var n=t.track;return Array.from(this.localTrackMap.entries()).filter((function(e){return e[0]!==mm.LocalAudioTrack})).filter((function(t){var n=t[0];return!(e&&n===mm.LocalVideoLowTrack)})).map((function(e){return e[1].track})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((function(t){var n=t[0];return!(e&&n===mm.LocalVideoLowTrack)})).map((function(e){return e[1].track}))},n.reportPublishEvent=function(e,t,n,r,i){if(e){var o=this.localTrackMap.get(mm.LocalAudioTrack),a=r?this.localTrackMap.get(mm.LocalVideoLowTrack):this.localTrackMap.get(mm.LocalVideoTrack);pv.publish(this.store.sessionId,{eventElapse:QT.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==o?void 0:o.track.getTrackLabel(),videoName:null==a?void 0:a.track.getTrackLabel(),screenshare:-1!==(null==a?void 0:a.track._hints.indexOf(Ng.SCREEN_TRACK)),audio:!!o,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var s;n||(n=[]);var c=n.find((function(e){return e instanceof ty})),u=r?null===(s=this.localTrackMap.get(mm.LocalVideoTrack))||void 0===s?void 0:s.track:n.find((function(e){return e instanceof wy}));pv.publish(this.store.sessionId,{eventElapse:QT.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==c?void 0:c.getTrackLabel(),videoName:null==u?void 0:u.getTrackLabel(),screenshare:-1!==(null==u?void 0:u._hints.indexOf(Ng.SCREEN_TRACK)),audio:!!c,video:!!u,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}},n.reportSubscribeEvent=function(e,t,n,r){var i=r===hm.VIDEO?n._videoSSRC:n._audioSSRC;i&&pv.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===hm.VIDEO,audio:r===hm.AUDIO,peerid:n.uid,subscribeRequestid:r===hm.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:QT.measureFromSubscribeStart(this.store.clientId,i)})},n.reset=function(){tv.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new If("P2PChannel2-send-mutex"),this.sendMutex=new If("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();var e=this.localTrackMap.get(mm.LocalAudioTrack);if((null==e?void 0:e.track)instanceof iy){if(e.track.trackList.length>0){var t=e.track;e.track.trackList.forEach((function(e){t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=gm.Disconnected},n.getStats=function(e){var t,n;return e?null===(n=this.recvConnection)||void 0===n?void 0:n.getStats():null===(t=this.sendConnection)||void 0===t?void 0:t.getStats()},n.getRemoteVideoIsReady=function(e){var t;return(null===(t=this.recvConnection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1},n.getLocalAudioVolume=function(){var e=this.localTrackMap.get(mm.LocalAudioTrack);if(e)return e.track.getVolumeLevel()},n.getLocalVideoSize=function(){var e=this.localTrackMap.get(mm.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}},n.getEncoderConfig=function(e){var t=this.localTrackMap.get(e);return t&&t.track instanceof wy||t&&t.track instanceof ty?t.track._encoderConfig:void 0},n.getLocalMedia=function(e){return this.localTrackMap.get(e)},n.hasLocalMedia=function(){return this.localTrackMap.size>0},n.hasRemoteMedia=function(e,t){if(!e)return this.remoteUserMap.size>0;var n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))},n.hasRemoteMediaWithLock=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",this.remoteUserMap.size>0);case 2:return r=this.remoteUserMap.get(t),e.abrupt("return",!!r&&(!n||r.has(n)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getRemoteMedia=function(e){var t,n=Array.from(fc(t=this.remoteUserMap).call(t)).find((function(t){return t.uid===e}));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}},n.getAudioLevels=function(){var e=Array.from(this.remoteUserMap.entries()).map((function(e){var t=e[0];return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}})),t=this.localTrackMap.get(mm.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Gc(e).call(e,(function(e,t){return e.level-t.level}))},n.disconnectForReconnect=function(){var e=d(c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sendConnection&&this.recvConnection&&(tv.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=gm.Reconnecting,W_("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((function(e){var t,n=e[0];n._videoTrack&&n._videoTrack._player&&(null===(t=n._videoTrack._player.getVideoElement())||void 0===t||t.pause(),n._videoTrack._player.isKeepLastFrame=!0,n._videoTrack._originMediaStreamTrack.stop())})),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((function(e){var n,r=e[0],i=e[1].track;switch(r){case mm.LocalVideoTrack:Or(n=i._hints).call(n,Ng.LOW_STREAM)?i.close():t.pendingLocalTracks.push(i);break;case mm.LocalAudioTrack:i instanceof iy?t.pendingLocalTracks=t.pendingLocalTracks.concat(i.trackList):t.pendingLocalTracks.push(i);case mm.LocalVideoLowTrack:}})),this.emit(Em.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((function(e){var n=e[0],r=e[1];Array.from(fc(r).call(r)).forEach((function(e){t.setPendingRemoteMedia(n,e)})),t.emit(Em.MediaReconnectStart,n.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),tv.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.hasPendingRemoteMedia=function(e,t){for(var n,r=i(this.pendingRemoteTracks);!(n=r()).done;){var o=n.value,a=o.user,s=o.kind;if((e instanceof CR?e.uid:e)===a.uid&&t===s)return!0}return!1},n.setPendingRemoteMedia=function(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})},n.restartICE=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.direction!==Nv.SEND_ONLY){e.next=6;break}return e.next=3,this.sendMutex.lock("From P2PChannel.restartICE");case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,this.recvMutex.lock("From P2PChannel.restartICE");case 8:e.t0=e.sent;case 9:return n=e.t0,e.prev=10,e.next=13,t.restartICE();case 13:return r=e.sent,e.next=16,$p(this,Em.RequestP2PRestartICE,r);case 16:i=e.sent,t.setDescription("local",i);case 18:return e.prev=18,n(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[10,,18,21]])})));return function(t){return e.apply(this,arguments)}}(),n.getUplinkNetworkQuality=function(){if(!this.sendConnection)return 0;var e=this.sendConnection.getStats(),t=this.localTrackMap.get(mm.LocalVideoTrack),n=this.localTrackMap.get(mm.LocalAudioTrack),r=e.videoSend.find((function(e){var n;return e.ssrc===(null==t||null===(n=t.ssrcs)||void 0===n?void 0:n[0].ssrcId)})),i=e.audioSend.find((function(e){var t;return e.ssrc===(null==n||null===(t=n.ssrcs)||void 0===t?void 0:t[0].ssrcId)}));if(!r||!i)return 1;var o=tf(this,Em.NeedSignalRTT),a=r?r.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,u=(c&&o?(c+o)/2:c||o)||0,d=100*e.sendPacketLossRate*.7/50+.3*u/1500,l=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,p=null==t?void 0:t.track;if(p&&p._encoderConfig&&-1===p._hints.indexOf(Ng.SCREEN_TRACK)){var f=p._encoderConfig.bitrateMax,h=e.bitrate.actualEncoded;if(f&&h){var _=(1e3*f-h)/(1e3*f);return _v[_<.15?0:_<.3?1:_<.45?2:_<.6?3:4][l]}}return l},n.getDownlinkNetworkQuality=function(){var e=this;if(!this.recvConnection)return 0;var t=this.recvConnection.getStats(),n=0;return Array.from(this.remoteUserMap.entries()).forEach((function(r){var i=r[0],o=i._audioSSRC,a=i._videoSSRC,s=t.audioRecv.find((function(e){return e.ssrc===o})),c=t.videoRecv.find((function(e){return e.ssrc===a}));if(s||c){var u=tf(e,Em.NeedSignalRTT),d=t.rtt,l=(d&&u?(d+u)/2:d||u)||0,p=s?s.jitterMs:void 0,f=t.recvPacketLossRate,h=.7*f*100/50+.3*l/1500;p&&(h=.6*f*100/50+.2*l/1500+.2*p/400),n+=h<.1?1:h<.17?2:h<.36?3:h<.59?4:5}else n+=1})),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n},n.muteLocalTrack=function(){var e=d(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Vl((function(e,r){n.handleMuteLocalTrack(t,e,r)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.filterTobePublishedTracks=function(e,t,n){for(var r,o=[],a=pE(),s=this.getAllTracks(),c=!1,u=!1,d=i(e=cf(e=e.filter((function(e){return-1===s.indexOf(e)}))));!(r=d()).done;){var l=r.value;if(l instanceof wy&&(this.localTrackMap.has(mm.LocalVideoTrack)||c?new Sp(ql.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(o.push({track:l,type:mm.LocalVideoTrack}),c=!0),t)){var p=this.getLowVideoTrack(l,n);o.push({track:p,type:mm.LocalVideoLowTrack})}if(l instanceof ty){var f=this.localTrackMap.get(mm.LocalAudioTrack);if(f){if(!(f.track instanceof iy))throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(l._bypassWebAudio)throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");f.track.addAudioTrack(l),this.bindLocalAudioTrackEvents(l,!0)}else if(u){var h=o.find((function(e){return e.type===mm.LocalAudioTrack}));if(!(h.track instanceof iy))throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(l._bypassWebAudio)throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");h.track.addAudioTrack(l)}else{if(!a.webAudioMediaStreamDest||l instanceof iy||l._bypassWebAudio)o.push({track:l,type:mm.LocalAudioTrack});else{var _=new iy;_.addAudioTrack(l),o.push({track:_,type:mm.LocalAudioTrack})}u=!0}}}return o},n.filterTobeUnpublishedTracks=function(e){for(var t,n=[],r=this.getAllTracks(),o=i(e=cf(e=e.filter((function(e){return-1!==r.indexOf(e)}))));!(t=o()).done;){var a=t.value;if(a instanceof ty){var s=this.localTrackMap.get(mm.LocalAudioTrack);if(!s)continue;s.track instanceof iy?(s.track.removeAudioTrack(a),this.unbindLocalAudioTrackEvents(a),0===s.track.trackList.length&&(n.push([mm.LocalAudioTrack,s]),s.track.close())):n.push([mm.LocalAudioTrack,s])}if(a instanceof wy){var c=this.localTrackMap.get(mm.LocalVideoTrack);if(!c)continue;n.push([mm.LocalVideoTrack,c]);var u=this.localTrackMap.get(mm.LocalVideoLowTrack);u&&n.push([mm.LocalVideoLowTrack,u])}}return n},n.bindLocalTrackEvents=function(e){var t=this;e.forEach((function(e){var n=e.track;switch(e.type){case mm.LocalVideoTrack:n.addListener(kg.GET_STATS,t.handleGetLocalVideoStats),n.addListener(kg.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),n.addListener(kg.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),n.addListener(kg.NEED_UPDATE_VIDEO_ENCODER,t.handleUpdateVideoEncoder),n.addListener(kg.SET_OPTIMIZATION_MODE,t.handleSetOptimizationMode),n.addListener(kg.NEED_REPLACE_TRACK,t.handleReplaceTrack),n.addListener(kg.NEED_MUTE_TRACK,t.handleMuteLocalTrack),n.addListener(kg.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack);break;case mm.LocalAudioTrack:t.bindLocalAudioTrackEvents(n);case mm.LocalVideoLowTrack:}}))},n.bindLocalAudioTrackEvents=function(e,t){var n=this;e instanceof iy?e.trackList.forEach((function(e){e.addListener(kg.NEED_DISABLE_TRACK,n.handleMuteLocalTrack),e.addListener(kg.NEED_ENABLE_TRACK,n.handleUnmuteLocalTrack),e.addListener(kg.GET_STATS,n.handleGetLocalAudioStats),e.addListener(kg.NEED_MUTE_TRACK,n.handleMuteLocalTrack),e.addListener(kg.NEED_UNMUTE_TRACK,n.handleUnmuteLocalTrack)})):(e.addListener(kg.GET_STATS,this.handleGetLocalAudioStats),e.addListener(kg.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(kg.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(kg.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(kg.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(kg.NEED_REPLACE_TRACK,this.handleReplaceTrack))},n.unbindLocalTrackEvents=function(e){var t=this;e||(e=Array.from(this.localTrackMap.entries()).map((function(e){var t=e[0];return{track:e[1].track,type:t}}))),e.forEach((function(e){var n=e.track;switch(e.type){case mm.LocalVideoTrack:n.off(kg.GET_STATS,t.handleGetLocalVideoStats),n.off(kg.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),n.off(kg.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),n.off(kg.NEED_UPDATE_VIDEO_ENCODER,t.handleUpdateVideoEncoder),n.off(kg.SET_OPTIMIZATION_MODE,t.handleSetOptimizationMode),n.off(kg.NEED_REPLACE_TRACK,t.handleReplaceTrack),n.off(kg.NEED_MUTE_TRACK,t.handleMuteLocalTrack),n.off(kg.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack);break;case mm.LocalAudioTrack:t.unbindLocalAudioTrackEvents(n);case mm.LocalVideoLowTrack:}}))},n.unbindLocalAudioTrackEvents=function(e){var t=this;e instanceof iy?e.trackList.forEach((function(e){e.off(kg.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),e.off(kg.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),e.off(kg.GET_STATS,t.handleGetLocalAudioStats),e.off(kg.NEED_MUTE_TRACK,t.handleMuteLocalTrack),e.off(kg.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack)})):(e.off(kg.GET_STATS,this.handleGetLocalAudioStats),e.off(kg.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(kg.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(kg.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(kg.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(kg.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))},n.bindRemoteTrackEvents=function(e,t){var n=this;t instanceof Py&&t.addListener(kg.GET_STATS,(function(t){t(n.handleGetRemoteVideoStats(e))})),t instanceof Dy&&t.addListener(kg.GET_STATS,(function(t){t(n.handleGetRemoteAudioStats(e))}))},n.unbindRemoteTrackEvents=function(e){e&&e.removeAllListeners(kg.GET_STATS)},n.unbindAllRemoteTrackEvents=function(){var e=this;Array.from(this.remoteUserMap.entries()).forEach((function(t){var n=t[0],r=t[1];r.has(hm.AUDIO)&&e.unbindRemoteTrackEvents(n._audioTrack),r.has(hm.VIDEO)&&e.unbindRemoteTrackEvents(n._videoTrack)}))},n.createGatewayPublishMessage=function(e){var t=this;return e.map((function(e){var n,r,i,o=e.track,a=e.type;switch(a){case mm.LocalAudioTrack:r=tm.Audio,i={dtx:o instanceof ny&&o._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case mm.LocalVideoTrack:r=Or(n=o._hints).call(n,Ng.SCREEN_TRACK)?tm.Screen:tm.High,i=EA(EA({},aw(o)),{},{codec:t.store.codec});break;case mm.LocalVideoLowTrack:r=tm.Low,i=EA(EA({},aw(o)),{},{codec:t.store.codec})}return{kind:a===mm.LocalAudioTrack?hm.AUDIO:hm.VIDEO,stream_type:r,attributes:i,isMuted:o.muted||!o.enabled}}))},n.createGatewayUnpublishMessage=function(e){return e.map((function(e){var t,n,r=e[0],i=e[1],o=i.track,a=i.ssrcs,s=i.id;switch(r){case mm.LocalVideoTrack:n=Or(t=o._hints).call(t,Ng.SCREEN_TRACK)?tm.Screen:tm.High;break;case mm.LocalAudioTrack:n=tm.Audio;break;case mm.LocalVideoLowTrack:n=tm.Low}return{stream_type:n,ssrcs:a,mid:s}}))},n.assignLocalTracks=function(e){var t=this;e.forEach((function(e){var n=e.track,r=e.type;t.localTrackMap.set(r,{track:n})}))},n.withdrawLocalTracks=function(e){var t=this;e.forEach((function(e){var n=e[0];t.localTrackMap.delete(n)}))},n.bindConnectionEvents=function(e){var t=this;e.onConnectionStateChange=function(){var n=d(c().mark((function n(r){var i,o;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(r,")")),t.emit(Em.PeerConnectionStateChange,r),"connected"!==r||t.store.keyMetrics.peerConnectionEnd||t.store.peerConnectionEnd(),!Or(i=t._restartStates).call(i,r)&&e.direction!==Nv.SEND_ONLY){n.next=7;break}if(!t._restartTimer){n.next=3;break}return n.abrupt("return");case 3:o=function(){"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(tv.debug("[".concat(t.store.clientId,"] [P2PChannel] start use restartICE")),"CONNECTED"===tf(t,Em.QueryClientConnectionState)&&t.restartICE(e))},t._restartTimer=window.setTimeout((function(){o(),t._restartTimer=void 0}),800),n.next=8;break;case 7:case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.onICEConnectionStateChange=function(e){"connected"!==e||t.store.keyMetrics.iceConnectionEnd||t.store.iceConnectionEnd(),tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),pv.reportApiInvoke(t.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:Mp.TRACER}).onSuccess(),t.emit(Em.IceConnectionStateChange,e)},e.onICETransportStateChange=function(e){tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=function(e){tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=function(e){tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=function(e){var n,r,i=Array.from(fc(n=t.remoteUserMap).call(n)).find((function(t){return t._audioSSRC===e}));i&&(t.store.subscribe(i.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=i.audioTrack)||void 0===r||r.emit(Ug.FIRST_FRAME_DECODED),pv.firstRemoteFrame(t.store.sessionId,rv.FIRST_AUDIO_DECODE,iv.FIRST_AUDIO_DECODE,{peer:i._uintid,subscribeElapse:QT.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId}))},e.onFirstAudioReceived=function(e){var n,r=Array.from(fc(n=t.remoteUserMap).call(n)).find((function(t){return t._audioSSRC===e}));r&&pv.firstRemoteFrame(t.store.sessionId,rv.FIRST_AUDIO_RECEIVED,iv.FIRST_AUDIO_RECEIVED,{peer:r._uintid,subscribeElapse:QT.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId})},e.onFirstVideoDecoded=function(e,n,r){t.reportVideoFirstFrameDecoded(e,n,r)},e.onFirstVideoReceived=function(e){var n,r=Array.from(fc(n=t.remoteUserMap).call(n)).find((function(t){return t._videoSSRC===e}));r&&pv.firstRemoteFrame(t.store.sessionId,rv.FIRST_VIDEO_RECEIVED,iv.FIRST_VIDEO_RECEIVED,{peer:r._uintid,subscribeElapse:QT.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId})},e.onSelectedLocalCandidateChanged=function(e,n){var r="relay"===e.candidateType,i="relay"===n.candidateType;"unknown"!==n.candidateType&&r===i||t.emit(Em.ConnectionTypeChange,r),tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(fw(n))," -> ").concat(JSON.stringify(fw(e)),")"))},e.onSelectedRemoteCandidateChanged=function(e,n){tv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(fw(n))," -> ").concat(JSON.stringify(fw(e)),")"))},e.onFirstVideoDecodedTimeout=function(e){t.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.onLocalCandidate=function(e){t.emit(Em.LocalCandidate,e)}},n.unbindConnectionEvents=function(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0},n.filterTobeMutedTracks=function(e){var t=[];if(-1===this.getAllTracks().indexOf(e))return t;var n=this.localTrackMap.get(mm.LocalAudioTrack);if(e instanceof ty&&(null==n?void 0:n.track)instanceof iy)return n.track.isActive||t.push([mm.LocalAudioTrack,n]),t;var r=Array.from(this.localTrackMap.entries()).find((function(t){var n=t[1].track;return e===n}));if(r&&(t.push(r),r[0]===mm.LocalVideoTrack)){var i=this.localTrackMap.get(mm.LocalVideoLowTrack);i&&t.push([mm.LocalVideoLowTrack,i])}return t},n.filterTobeUnmutedTracks=function(e){var t=[],n=this.localTrackMap.get(mm.LocalAudioTrack);if(e instanceof ty&&(null==n?void 0:n.track)instanceof iy)return n.track.isActive&&t.push([mm.LocalAudioTrack,n]),t;var r=Array.from(this.localTrackMap.entries()).find((function(t){var n=t[1].track;return e===n}));if(r)if(r[0]===mm.LocalVideoTrack){t.push(r);var i=this.localTrackMap.get(mm.LocalVideoLowTrack);i&&t.push([mm.LocalVideoLowTrack,i])}else t.push(r);return t},n.createMuteMessage=function(e){return e.map((function(e){var t,n,r=e[0],i=e[1],o=i.track,a=i.ssrcs,s=i.id;switch(r){case mm.LocalAudioTrack:n=tm.Audio;break;case mm.LocalVideoTrack:n=Or(t=o._hints).call(t,Ng.SCREEN_TRACK)?tm.Screen:tm.High;break;case mm.LocalVideoLowTrack:n=tm.Low}return{stream_type:n,ssrcs:a,mid:s}}))},n.createUnmuteMessage=function(e){return e.map((function(e){var t,n,r=e[0],i=e[1],o=i.track,a=i.ssrcs,s=i.id;switch(r){case mm.LocalAudioTrack:n=tm.Audio;break;case mm.LocalVideoTrack:n=Or(t=o._hints).call(t,Ng.SCREEN_TRACK)?tm.Screen:tm.High;break;case mm.LocalVideoLowTrack:n=tm.Low}return{stream_type:n,ssrcs:a,mid:s}}))},n.filterTobeUnSubscribedTracks=function(e,t){var n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){var i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((function(t){var r=t[0],i=t[1];n.push([e,{kind:r,id:i}])}));return n},n.createUnsubscribeMessage=function(e){var t=[];return e.forEach((function(e){var n=e[0],r=e[1],i=r.kind;switch(r.id,i){case hm.VIDEO:return void(n._videoSSRC&&t.push({stream_type:hm.VIDEO,ssrcId:n._videoSSRC}));case hm.AUDIO:return void(n._audioSSRC&&t.push({stream_type:hm.AUDIO,ssrcId:n._audioSSRC}))}})),t},n.withdrawRemoteTracks=function(e){var t=this;e.forEach((function(e){var n=e[0],r=e[1].kind,i=t.remoteUserMap.get(n);i&&(i.delete(r),0===Array.from(i.entries()).length&&t.remoteUserMap.delete(n))}))},n.updateBitrateLimit=function(){var e=d(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.localTrackMap.get(mm.LocalVideoTrack),r=this.localTrackMap.get(mm.LocalVideoLowTrack),e.t0=n,!e.t0){e.next=5;break}return e.next=5,n.track.setBitrateLimit(t.uplink);case 5:if(e.t1=r&&t.low_stream_uplink,!e.t1){e.next=9;break}return e.next=9,r.track.setBitrateLimit({max_bitrate:t.low_stream_uplink.bitrate,min_bitrate:t.low_stream_uplink.bitrate||0});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.isP2PDisconnected=function(){if(this.sendConnection&&this.recvConnection){var e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return"connected"!==e&&"connected"!==t}return!0},n.tryToUnmuteAudio=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=13;break}if(!(t[n]instanceof ty)){e.next=10;break}if(0!==(r=this.filterTobeUnmutedTracks(t[n])).length){e.next=6;break}return e.abrupt("continue",10);case 6:return i=this.createUnmuteMessage(r),e.next=9,ef(this,Em.RequestUnmuteLocal,i);case 9:return e.abrupt("return",void e.sent);case 10:n++,e.next=1;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.bindStatsUploaderEvents=function(){var e=this;this.statsUploader.requestStats=function(t){return e.getStats(t)},this.statsUploader.requestLocalMedia=function(){return Array.from(e.localTrackMap.entries()).filter((function(e){return!!e[1].ssrcs}))},this.statsUploader.requestRemoteMedia=function(){return Array.from(e.remoteUserMap.entries())},this.statsUploader.requestVideoIsReady=function(t){var n;return!(null===(n=e.recvConnection)||void 0===n||!n.getRemoteVideoIsReady(t))},this.statsUploader.requestUpload=function(t,n){return e.emit(Em.RequestUploadStats,t,n)},this.statsUploader.requestAllTracks=function(){return e.getAllTracks()}},n.unbindStatsUploaderEvents=function(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0},n.requestReconnect=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dtlsFailedCount+=1,e.next=3,Ef(Pf(this.dtlsFailedCount,Nf));case 3:this.emit(Em.RequestReconnect);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.reconnectP2P=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.canPublishLowStream=function(){return this.localTrackMap.has(mm.LocalVideoTrack)||this.pendingLocalTracks.some((function(e){return e instanceof wy}))},n.throwIfTrackTypeNotMatch=function(e){if(e.filter((function(e){return e instanceof wy})).length>1)throw new Sp(ql.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((function(e){return e instanceof ty})).length>1&&(e.some((function(e){return e instanceof ty&&e._bypassWebAudio}))||!pE().webAudioMediaStreamDest))throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(var t,n=i(e);!(t=n()).done;){var r=t.value;if(r instanceof wy&&this.pendingLocalTracks.some((function(e){return e instanceof wy})))throw new Sp(ql.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r instanceof ty&&this.pendingLocalTracks.some((function(e){return e instanceof ty}))&&(!pE().webAudioMediaStreamDest||r._bypassWebAudio||this.pendingLocalTracks.some((function(e){return e instanceof ty&&e._bypassWebAudio}))))throw new Sp(ql.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}},n.getLowVideoTrack=function(e,t){var n,r=!W_("DISABLE_DUAL_STREAM_USE_ENCODING")&&pE().supportDualStreamEncoding,i=EA(EA({},{width:160,height:120,framerate:15,bitrate:50}),t);n=r?e._mediaStreamTrack.clone():MC(e,i);var o=yf(8,"track-low-"),a=new wy(n,EA(EA({},r&&{scaleResolutionDownBy:pw(i,e)}),{},{frameRate:i.framerate,bitrateMax:i.bitrate,bitrateMin:i.bitrate}),void 0,void 0,o);return a.on(Lg.TRANSCEIVER_UPDATED,(function(t){e._updateRtpTransceiver(t,Pg.LOW_STREAM)})),a._hints.push(Ng.LOW_STREAM),e.addListener(kg.NEED_CLOSE,(function(){a.close()})),a},n.globalLock=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.recvMutex.lock("From P2PChannel2.globalLock"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.reportVideoFirstFrameDecoded=function(e,t,n,r){var i,o=Array.from(fc(i=this.remoteUserMap).call(i)).find((function(t){return t._videoSSRC===e}));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());var a=this.store.keyMetrics,s=a.subscribe.find((function(e){return e.userId===o.uid&&"video"===e.type}));pv.firstRemoteVideoDecode(this.store.sessionId,rv.FIRST_VIDEO_DECODE,iv.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:QT.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0})}},n.remoteMediaSsrcChanged=function(){var e=d(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recvConnection){e.next=2;break}return e.abrupt("return",!1);case 2:if(i=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",!1);case 5:if(o=i.get(n)){e.next=8;break}return e.abrupt("return",!1);case 8:return e.next=10,this.recvConnection.getRemoteSSRC(o);case 10:return a=e.sent,e.abrupt("return",void 0!==a&&a!==r);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.resetConnection=function(e){tv.debug("[".concat(this.store.clientId,"] [P2PChannel2] reset connection to ").concat(e)),this.state===gm.Connected?(tv.debug("[".concat(this.store.clientId,"] [P2PChannel2] fallback to websocket but P2PChannel2 state still connected, disconnect first")),this.disconnectForReconnect()):(this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0))},n.publishDataChannel=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.unpublishDataChannel=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.subscribeDataChannel=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.unsubscribeDataChannel=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.hasPendingRemoteDataChannel=function(e,t){throw new Sp(ql.NOT_SUPPORTED)},n.setPendingRemoteDataChannel=function(e,t){throw new Sp(ql.NOT_SUPPORTED)},n.preConnect=function(){var e=d(c().mark((function e(t,n,r,i,o,a){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED);case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}(),n.getEstablishParams=function(){throw new Sp(ql.NOT_SUPPORTED)},n.reSubscribe=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateVideoStreamParameter=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Sp(ql.NOT_SUPPORTED);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.unbindRtpTransceiver=function(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((function(e){var t=e[0],n=e[1].track;t===mm.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,Pg.LOW_STREAM):n._updateRtpTransceiver(void 0)}))},s(t,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;this._state=e,this.emit(Em.StateChange,t,this._state)}}]),t}(Kp);function bA(e){return function(t,n,r){var i=t[n];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return r.value=d(c().mark((function t(){var r,o,a,s,u,d,l,p=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=p.length,o=new Array(r),a=0;a<r;a++)o[a]=p[a];t.t0=e,t.next=t.t0===_A.SEND_ONLY?4:t.t0===_A.RECEIVE_ONLY?14:24;break;case 4:return t.next=6,this.sendMutex.lock("From P2PChannel2.".concat(n));case 6:return s=t.sent,t.prev=7,t.next=10,i.apply(this,o);case 10:return t.abrupt("return",t.sent);case 11:return t.prev=11,s(),t.finish(11);case 14:return t.next=16,this.recvMutex.lock("From P2PChannel2.".concat(n));case 16:return u=t.sent,t.prev=17,t.next=20,i.apply(this,o);case 20:return t.abrupt("return",t.sent);case 21:return t.prev=21,u(),t.finish(21);case 24:return t.next=26,this.sendMutex.lock("From P2PChannel2.".concat(n));case 26:return d=t.sent,t.next=29,this.recvMutex.lock("From P2PChannel2.".concat(n));case 29:return l=t.sent,t.prev=30,t.next=33,i.apply(this,o);case 33:return t.abrupt("return",t.sent);case 34:return t.prev=34,d(),l(),t.finish(34);case 37:case"end":return t.stop()}}),t,this,[[7,,11,14],[17,,21,24],[30,,34,37]])}))),r}}function SA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SA(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Vv([bA(),Bv("design:type",Function),Bv("design:paramtypes",[Object,String]),Bv("design:returntype",Vl)],yA.prototype,"startP2P",null),Vv([bA(),Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],yA.prototype,"p2pConnect",null),Vv([bA(_A.SEND_ONLY),Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],yA.prototype,"dopublish",null),Vv([bA(_A.SEND_ONLY),Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],yA.prototype,"unpublish",null),Vv([bA(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Vl)],yA.prototype,"unpublishLowStream",null),Vv([bA(_A.SEND_ONLY),Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],yA.prototype,"doUnpublish",null),Vv([bA(_A.RECEIVE_ONLY),Bv("design:type",Function),Bv("design:paramtypes",[CR,String,String,Number]),Bv("design:returntype",Vl)],yA.prototype,"subscribe",null),Vv([bA(_A.RECEIVE_ONLY),Bv("design:type",Function),Bv("design:paramtypes",[CR,String,String,Boolean]),Bv("design:returntype",Vl)],yA.prototype,"unsubscribe",null),Vv([bA(_A.RECEIVE_ONLY),Bv("design:type",Function),Bv("design:paramtypes",[CR,String]),Bv("design:returntype",Vl)],yA.prototype,"muteRemote",null),Vv([bA(_A.RECEIVE_ONLY),Bv("design:type",Function),Bv("design:paramtypes",[CR,String]),Bv("design:returntype",Vl)],yA.prototype,"unmuteRemote",null),Vv([bA(_A.RECEIVE_ONLY),Bv("design:type",Function),Bv("design:paramtypes",[CR,String]),Bv("design:returntype",Vl)],yA.prototype,"hasRemoteMediaWithLock",null),Vv([bA(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Vl)],yA.prototype,"disconnectForReconnect",null),Vv([bA(_A.RECEIVE_ONLY),Bv("design:type",Function),Bv("design:paramtypes",[CR,String,Number]),Bv("design:returntype",Vl)],yA.prototype,"remoteMediaSsrcChanged",null);var wA=Date.now(),RA=new Map,CA=new Map;function OA(e){return AA.apply(this,arguments)}function AA(){return(AA=d(c().mark((function e(t){var n,r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=RA.get(t),r=Array.isArray(n)&&n[n.length-1],i=CA.get(t),r){e.next=3;break}return e.abrupt("return",void(i.isSyncing=!1));case 3:o={uid:r.uid,payload:hf(r.payload)},0===i.firstRecvTs&&(i.firstRecvTs=r.recvTs,i.firstSendTs=r.sendTs),a=r.sendTs-i.firstSendTs,(s=a-(Date.now()-i.firstRecvTs))>0&&(i.firstRecvTs=Date.now()-a),(u=r.mediaDelay+s)<=0?(n.pop(),IA(r.context,o),u=0):u=Math.min(u,20),setTimeout((function(){return n.length&&OA(t)}),u);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IA(e,t){e.safeEmit(Vp.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function kA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return IA(n,{uid:e.uid,payload:hf(e.payload)});var r="".concat(n.id,"-").concat(e.uid),i=RA.get(r)||[],o=i.findIndex((function(t){return e.sendTs>=t.sendTs})),a=TA(TA({},e),{},{context:n,mediaDelay:t,recvTs:Date.now()});-1===o?i.push(a):i.splice(o,0,a),RA.set(r,i);var s,c=!1;CA.has(r)?c=!(null===(s=CA.get(r))||void 0===s||!s.isSyncing):CA.set(r,{isSyncing:c,firstRecvTs:0,firstSendTs:0}),c||OA(r)}var NA=Zl().name;function PA(){return!function(e,t,n){var r=Zl();if(r.os!==Wl.IOS||!r.osVersion)return!1;var i=r.osVersion.split(".");return Number(i[0])<16}()&&!function(e,t,n){var r=Zl();if(r.name!==Gl.SAFARI||!r.osVersion)return!1;var i=r.version.split(".");return Number(i[0])<16}()}function DA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DA(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}If.setLogger(tv);var LA=function(e){function t(t){var n,r;if(uc(l(n=e.call(this)||this),"store",void 0),uc(l(n),"_uid",void 0),uc(l(n),"_channelName",void 0),uc(l(n),"_uintUid",void 0),uc(l(n),"_users",[]),uc(l(n),"_config",void 0),uc(l(n),"_clientId",void 0),uc(l(n),"_appId",void 0),uc(l(n),"_sessionId",null),uc(l(n),"_key",void 0),uc(l(n),"_joinInfo",void 0),uc(l(n),"_gateway",void 0),uc(l(n),"_statsCollector",void 0),uc(l(n),"_configDistribute",void 0),uc(l(n),"_leaveMutex",new If("client-leave")),uc(l(n),"_publishMutex",new If("client-publish")),uc(l(n),"_renewTokenMutex",new If("client-renewtoken")),uc(l(n),"_subscribeMutex",new If("client-subscribe")),uc(l(n),"_encryptionMode","none"),uc(l(n),"_encryptionSecret",null),uc(l(n),"_encryptionSalt",null),uc(l(n),"_proxyServer",void 0),uc(l(n),"_turnServer",{servers:[],mode:"auto"}),uc(l(n),"_cloudProxyServerMode","disabled"),uc(l(n),"_isDualStreamEnabled",!1),uc(l(n),"_defaultStreamFallbackType",void 0),uc(l(n),"_lowStreamParameter",void 0),uc(l(n),"_streamFallbackTypeCacheMap",new Map),uc(l(n),"_remoteStreamTypeCacheMap",new Map),uc(l(n),"_axiosCancelSource",C_.CancelToken.source()),uc(l(n),"_audioVolumeIndicationInterval",void 0),uc(l(n),"_networkQualityInterval",void 0),uc(l(n),"_userOfflineTimeout",void 0),uc(l(n),"_streamRemovedTimeout",void 0),uc(l(n),"_injectStreamingClient",void 0),uc(l(n),"_liveTranscodeStreamingClient",void 0),uc(l(n),"_liveRawStreamingClient",void 0),uc(l(n),"_channelMediaRelayClient",void 0),uc(l(n),"_networkQualitySensitivity","normal"),uc(l(n),"_p2pChannel",void 0),uc(l(n),"_useLocalAccessPoint",!1),uc(l(n),"_setLocalAPVersion",void 0),uc(l(n),"_joinAndNotLeaveYet",!1),uc(l(n),"_numberOfJoinCount",0),uc(l(n),"_remoteDefaultVideoStreamType",void 0),uc(l(n),"_inspect",void 0),uc(l(n),"_moderation",void 0),uc(l(n),"_license",void 0),uc(l(n),"_pendingPublishedUsers",[]),uc(l(n),"ntpAlignErrorCount",0),uc(l(n),"remoteInboundOffset",0),uc(l(n),"_handleLocalTrackEnable",(function(e,t,r){n.publish(e,!1).then(t).catch(r)})),uc(l(n),"_handleLocalTrackDisable",(function(e,t,r){n.unpublish(e).then(t).catch(r)})),uc(l(n),"_handleUserOnline",(function(e){if(W_("BLOCK_LOCAL_CLIENT")&&mv(e.uid,n.channelName))tv.debug("[".concat(e.uid,"] will be ignored in local"));else{n.isStringUID&&"string"!=typeof e.uid&&tv.error("[".concat(n._clientId,"] StringUID is Mixed with UintUID"));var t=n._users.find((function(t){return t.uid===e.uid}));if(t)t._trust_in_room_=!0;else{var r=new CR(e.uid,e.uint_id||e.uid);n._users.push(r),tv.debug("[".concat(n._clientId,"] user online"),e.uid),n.safeEmit(Vp.USER_JOINED,r)}}})),uc(l(n),"_handleUserOffline",(function(e){if(!W_("BLOCK_LOCAL_CLIENT")||!mv(e.uid,n.channelName)){var t=n._users.find((function(t){return t.uid===e.uid}));t&&(n._handleRemoveStream(e),n._handleRemoveDataChannels(e),sf(n._users,t),n._remoteStreamTypeCacheMap.delete(t.uid),n._streamFallbackTypeCacheMap.delete(t.uid),tv.debug("[".concat(n._clientId,"] user offline"),e.uid,"reason:",e.reason),n.safeEmit(Vp.USER_LEAVED,t,e.reason))}})),uc(l(n),"_handleAddAudioOrVideoStream",(function(e,t,r,i,o,a,s){if(!W_("BLOCK_LOCAL_CLIENT")||!mv(t,n.channelName)){var c=n._users.find((function(e){return e.uid===t}));if(c){tv.debug("[".concat(n._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),n.store.subscribe(c.uid,e,void 0,void 0,void 0,Date.now());var u="audio"===e?c.hasAudio:c.hasVideo;c._uintid||(c._uintid=o||t),"audio"===e?c._trust_audio_stream_added_state_=!0:c._trust_video_stream_added_state_=!0,"audio"===e?(c._audio_added_=!0,void 0!==r&&(c._audioSSRC=r),void 0!==i&&(c._cname=i),a&&(c._audioOrtc=a)):(c._video_added_=!0,void 0!==r&&(c._videoSSRC=r),void 0!==i&&(c._cname=i),void 0!==s&&(c._rtxSsrcId=s),a&&(c._videoOrtc=a)),("audio"===e?c.hasAudio:c.hasVideo)&&!u&&(tv.info("[".concat(n._clientId,"] remote user ").concat(c.uid," published ").concat(e)),n.safeEmit(Vp.USER_PUBLISHED,c,e)),"video"===e?pv.onGatewayStream(n._sessionId,rv.ON_ADD_VIDEO_STREAM,iv.ON_ADD_VIDEO_STREAM,{peer:o||t,ssrc:c._videoSSRC}):pv.onGatewayStream(n._sessionId,rv.ON_ADD_AUDIO_STREAM,iv.ON_ADD_AUDIO_STREAM,{peer:o||t,ssrc:c._audioSSRC}),n._p2pChannel.remoteMediaSsrcChanged(c,e,r).then((function(t){if(t&&(tv.debug("[".concat(n._clientId,"] resubscribe ").concat(e," for user ").concat(c.uid," after rejoin because SSRC id changed.")),n._p2pChannel instanceof nO))return n._p2pChannel.unsubscribe(c,e,!0).then((function(){return n._subscribe(c,e,!0).catch((function(e){tv.error("[".concat(n._clientId,"] resubscribe error"),e.toString())}))}))})),n._p2pChannel.hasPendingRemoteMedia(c,e)&&(tv.debug("[".concat(n._clientId,"] resubscribe ").concat(e," for user ").concat(c.uid," after reconnect.")),n._subscribe(c,e,!0).catch((function(e){tv.error("[".concat(n._clientId,"] resubscribe error"),e.toString())})))}else tv.error("[".concat(n._clientId,"] can not find target user!(on_add_stream)"))}})),uc(l(n),"_handleRemoveStream",(function(e,t,r){if(!W_("BLOCK_LOCAL_CLIENT")||!mv(e.uid,n.channelName)){var i=n._users.find((function(t){return t.uid===e.uid}));if(i){tv.debug("[".concat(n._clientId,"] stream removed with uid ").concat(e.uid));var o=function(){};if(i.hasAudio&&i.hasVideo?o=function(){tv.info("[".concat(n._clientId,"] remote user ").concat(i.uid," unpublished audio track")),n.safeEmit(Vp.USER_UNPUBLISHED,i,"audio"),tv.info("[".concat(n._clientId,"] remote user ").concat(i.uid," unpublished video track")),n.safeEmit(Vp.USER_UNPUBLISHED,i,"video")}:i.hasVideo?o=function(){tv.info("[".concat(n._clientId,"] remote user ").concat(i.uid," unpublished video track")),n.safeEmit(Vp.USER_UNPUBLISHED,i,"video")}:i.hasAudio&&(o=function(){tv.info("[".concat(n._clientId,"] remote user ").concat(i.uid," unpublished audio track")),n.safeEmit(Vp.USER_UNPUBLISHED,i,"audio")}),i._trust_audio_stream_added_state_=!0,i._trust_video_stream_added_state_=!0,i._audio_added_=!1,i._video_added_=!1,n._p2pChannel instanceof nO)n._p2pChannel.unsubscribe(i).then((function(e){if(e)return n._gateway.unsubscribe(e,i.uid)}));else if(t&&r)if(e.sdp){var a=e.sdp;n._p2pChannel.unsubscribe(i,a).then((function(e){e&&t(e)})).catch(r)}else t&&t();i._audioSSRC=void 0,i._videoSSRC=void 0,i._audioOrtc=void 0,i._videoOrtc=void 0,i._rtxSsrcId=void 0,pv.onGatewayStream(n._sessionId,rv.ON_REMOVE_STREAM,iv.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),o()}else tv.warning("[".concat(n._clientId,"] can not find target user!(on_remove_stream)"))}})),uc(l(n),"_handleSetStreamLocalEnable",(function(e,t,r){if(!W_("BLOCK_LOCAL_CLIENT")||!mv(t,n.channelName)){var i=n._users.find((function(e){return e.uid===t}));if(i){tv.debug("[".concat(n._clientId,"] local ").concat(e," ").concat(r?"enabled":"disabled"," with uid ").concat(t));var o="audio"===e?i.hasAudio:i.hasVideo;if("audio"===e){i._trust_audio_enabled_state_=!0;var a=i._audio_enabled_;if(i._audio_enabled_=r,i._audio_enabled_===a)return;var s=i._audio_enabled_?"enable-local-audio":"disable-local-audio";tv.debug("[".concat(n._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(s)),n.safeEmit(Vp.USER_INFO_UPDATED,t,s)}else{i._trust_video_enabled_state_=!0;var c=i._video_enabled_;if(i._video_enabled_=r,i._video_enabled_===c)return;var u=i._video_enabled_?"enable-local-video":"disable-local-video";tv.debug("[".concat(n._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(u)),n.safeEmit(Vp.USER_INFO_UPDATED,t,u)}var d="audio"===e?i.hasAudio:i.hasVideo;return o!==d?!o&&d?(tv.info("[".concat(n._clientId,"] remote user ").concat(t," published ").concat(e)),void n.safeEmit(Vp.USER_PUBLISHED,i,e)):("video"===e&&i._videoTrack&&i._videoTrack._destroy(),"audio"===e&&i._audioTrack,n._p2pChannel.muteRemote(i,e),tv.info("[".concat(n._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void n.safeEmit(Vp.USER_UNPUBLISHED,i,e)):void 0}tv.error("[".concat(n._clientId,"] can not find target user!(disable_local)"))}})),uc(l(n),"_handleMuteStream",(function(e,t,r,i,o,a){if(!W_("BLOCK_LOCAL_CLIENT")||!mv(e,n.channelName)){tv.debug("[".concat(n._clientId,"] receive mute message"),e,t,r);var s=n._users.find((function(t){return t.uid===e}));if(s){var c="audio"===t?s.hasAudio:s.hasVideo;if("audio"===t){s._trust_audio_mute_state_=!0;var u=s._audio_muted_;if(s._audio_muted_=r,s._audio_muted_===u)return;var d=s._audio_muted_?"mute-audio":"unmute-audio";tv.debug("[".concat(n._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(d)),n.safeEmit(Vp.USER_INFO_UPDATED,e,d)}else{s._trust_video_mute_state_=!0;var l=s._video_muted_;if(s._video_muted_=r,s._video_muted_===l)return;var p=s._video_muted_?"mute-video":"unmute-video";tv.debug("[".concat(n._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(p)),n.safeEmit(Vp.USER_INFO_UPDATED,e,p)}var f="audio"===t?s.hasAudio:s.hasVideo;if(c!==f){if(!c&&f)return n.store.useP2P||("audio"===t?s._audioSSRC:s._videoSSRC)?(tv.info("[".concat(n._clientId,"] remote user ").concat(e," published ").concat(t)),void n.safeEmit(Vp.USER_PUBLISHED,s,t)):void tv.warning("[".concat(n._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."));"video"===t&&s._videoTrack&&s._videoTrack._destroy(),"audio"===t&&s._audioTrack,o&&a&&n._p2pChannel instanceof yA&&(i?n._p2pChannel.unsubscribe(s,i,t).then((function(e){o(e)})).catch(a):o()),n._p2pChannel.muteRemote(s,t),tv.info("[".concat(n._clientId,"] remote user ").concat(e," unpublished ").concat(t)),n.safeEmit(Vp.USER_UNPUBLISHED,s,t)}}else tv.warning("[".concat(n._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e))}})),uc(l(n),"_handleP2PLost",function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tv.debug("[".concat(n._clientId,"] receive p2p lost"),t),parseInt(t.p2pid,10)!==n.store.p2pId){e.next=6;break}return e.next=4,n._p2pChannel.requestReconnect();case 4:e.next=7;break;case 6:tv.warning("[".concat(n._clientId,"] P2PLost stream not found"),t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),uc(l(n),"_handleTokenWillExpire",(function(){tv.debug("[".concat(n._clientId,"] received message onTokenPrivilegeWillExpire")),n.safeEmit(Vp.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),uc(l(n),"_handleBeforeUnload",(function(e){"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(n.leave(),tv.info("[".concat(n._clientId,"] auto leave onbeforeunload or pagehide")))})),uc(l(n),"_handleUpdateNetworkQuality",(function(){if("normal"!==n._networkQualitySensitivity)if(!navigator||void 0===navigator.onLine||navigator.onLine){var e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=n._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=n._p2pChannel.getDownlinkNetworkQuality(),n.safeEmit(Vp.NETWORK_QUALITY,e)}else n.safeEmit(Vp.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6})})),uc(l(n),"_handleP2PAddAudioOrVideoStream",(function(e,t){var r=n._users.find((function(e){return e.uid===t}));if(r){tv.debug("[".concat(n._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),n.store.subscribe(r.uid,e,void 0,void 0,void 0,Date.now());var i="audio"===e?r.hasAudio:r.hasVideo;"audio"===e?r._trust_audio_stream_added_state_=!0:r._trust_video_stream_added_state_=!0,"audio"===e?r._audio_added_=!0:r._video_added_=!0,("audio"===e?r.hasAudio:r.hasVideo)&&!i&&(tv.info("[".concat(n._clientId,"] remote user ").concat(r.uid," published ").concat(e)),n.safeEmit(Vp.USER_PUBLISHED,r,e)),n._p2pChannel.hasPendingRemoteMedia(r,e)&&(tv.debug("[".concat(n._clientId,"] resubscribe ").concat(e," for user ").concat(r.uid," after reconnect.")),n._subscribe(r,e,!0).catch((function(e){tv.error("[".concat(n._clientId,"] resubscribe error"),e.toString())})))}else tv.error("[".concat(n._clientId,"] can not find target user!(on_add_stream)"))})),n._config=t,n._clientId=yf(5,"client-"),n.store=new M_(t.codec,t.audioCodec,t.mode,n._clientId),n.store.clientCreated(),t.proxyServer&&n.setProxyServer(t.proxyServer,!0),t.turnServer&&n.setTurnServer(t.turnServer,!0),tv.info("[".concat(n._clientId,"] Initializing AgoraRTC client v").concat(U_," build: ").concat(V_,", mode: ").concat(n.mode,", codec: ").concat(n.codec)),t.clientRoleOptions)try{Zp(t.clientRoleOptions),r=Object.assign({},t.clientRoleOptions)}catch(t){tv.warning("[".concat(n._clientId,"] ").concat(t.toString()))}return n._statsCollector=new ew(n.store),n._statsCollector.onStatsException=function(e,t,r){tv.debug("[".concat(n._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(r)),n.safeEmit(Vp.EXCEPTION,{code:e,msg:t,uid:r})},n._statsCollector.onUploadPublishDuration=function(e,t,r,i){var o=n._users.find((function(t){return t.uid===e}));o&&pv.peerPublishStatus(n._sessionId,{subscribeElapse:i,audioPublishDuration:t,videoPublishDuration:r,peer:o._uintid})},n.store.useDataChannel=pE().supportDataChannel&&W_("SIGNAL_CHANNEL"),n.store.useP2P=W_("P2P"),n._gateway=new Rw(n.store,{clientId:n._clientId,mode:n.mode,codec:n.codec,websocketRetryConfig:t.websocketRetryConfig||Nf,httpRetryConfig:t.httpRetryConfig||Nf,forceWaitGatewayResponse:void 0===t.forceWaitGatewayResponse||t.forceWaitGatewayResponse,statsCollector:n._statsCollector,role:t.role,clientRoleOptions:r}),n._configDistribute=new _R,n.store.useP2P?(n._p2pChannel=new yA(n.store,n._statsCollector),n._handleP2PEvents()):n._p2pChannel=new nO(n.store,n._statsCollector),n._handleP2PChannelEvents(),n._handleGatewayEvents(),n._handleGatewaySignalEvents(),l(n)}p(t,e);var n=t.prototype;return n.joinMeta=function(){var e=d(c().mark((function e(t,n,r,i,o){var a,s,u,l=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(l.length>5&&void 0!==l[5])||l[5],s=l.length>6&&void 0!==l[6]&&l[6],F_("JOIN_GATEWAY_USE_443PORT_ONLY",a),F_("JOIN_GATEWAY_USE_DUAL_DOMAIN",s),u=this._gateway.signal.websocket,e.abrupt("return",(u instanceof $m&&(u.use443PortOnly=a,u.tryDoubleDomain=s),function(){var e=d(c().mark((function e(t,n,r){var i,o,a,s,u,d,l,p=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Hl.get(t)||Hl.set(t,[]),zl.get(t)||zl.set(t,n),Kl.get(t)||Kl.set(t,0),i=Hl.get(t),o=zl.get(t),i&&o){e.next=4;break}throw new Error("concurrent: deferQueue or maxConcurrency is null");case 4:if(Kl.get(t)!==o){e.next=9;break}return a=Fl(),i.push(a),e.next=9,a.promise;case 9:for(Kl.set(t,Kl.get(t)+1),s=p.length,u=new Array(s>3?s-3:0),d=3;d<s;d++)u[d-3]=p[d];return e.next=13,r.apply(void 0,u);case 13:return l=e.sent,e.abrupt("return",(Kl.set(t,Kl.get(t)-1),Kl.get(t)===o-1&&i.length>0&&(i[0].resolve(),i.shift()),0===Kl.get(t)&&(Hl.set(t,[]),zl.set(t,0),Kl.set(t,0)),l));case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()("client.join",W_("JOIN_MAX_CONCURRENCY"),this.join.bind(this),t,n,r,i,o)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),n.join=function(){var e=d(c().mark((function e(t,n,r,i,o){var a,s,u,d,l,p,f,h,_,v,m,g,E,y,b,S,T,w,R=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=++this._numberOfJoinCount,this.store.joinStart(),i&&(this.store.uid=i),s="HTTPS"===(R_||R_||(R_=(window.location.protocol.split(":")[0]||"").toUpperCase())),u=D_()?window.isSecureContext:"Browser Not Support",(D_()||s)&&window.isSecureContext||tv.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser"),d=bf(),"DISCONNECTED"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),tv.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),l=pv.reportApiInvoke(d,{name:Lp.JOIN,options:[t,n,r,i],states:{isHttps:s,isSecureContext:u},tag:Mp.TRACER}),pv.setAppId(t),e.prev=8,r||null===r){e.next=11;break}throw new Fv(ql.INVALID_PARAMS,"Invalid token: ".concat(r,". If you don not use token, set it to null"));case 11:r&&Op(r,"token",1,2047),Op(t,"appid",1,2047),Wv(n),i&&Gv(i),o&&Op(o,"optionalInfo",1,2047),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(8),l.onError(e.t0),e.t0;case 17:if(tv.info("[".concat(this._clientId,"] start join channel ").concat(n,", join number: ").concat(a)),!this._leaveMutex.isLocked){e.next=24;break}return tv.debug("[".concat(this._clientId,"] join: waiting leave operation")),e.next=21,this._leaveMutex.lock();case 21:e.t1=e.sent,(0,e.t1)(),tv.debug("[".concat(this._clientId,"] join: continue"));case 24:if(this._joinAndNotLeaveYet=!0,"DISCONNECTED"===this.connectionState){e.next=27;break}throw p=new Fv(ql.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state")),l.onError(p),p;case 27:if(this._sessionId||(this._sessionId=d,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING",f=xA({clientId:this._clientId,appId:t,sid:this._sessionId,cname:n,uid:"string"!=typeof i?i:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:r||t,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:o,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType}),this._useLocalAccessPoint&&(f.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof i&&(f.stringUid=i,this._uintUid?(f.uid=this._uintUid,this._uintUid=void 0):f.uid=0),"none"===this._encryptionMode||!this._encryptionSecret){e.next=37;break}return f.aesmode=this._encryptionMode,e.next=33,Hp(this._encryptionSecret);case 33:if(f.aespassword=e.sent,this._joinAndNotLeaveYet){e.next=36;break}throw new Fv(ql.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));case 36:this._encryptionSalt&&(f.aessalt=this._encryptionSalt);case 37:if(this._startSession(this._sessionId,{channel:n,appId:t}),h=this._sessionId,setTimeout((function(){"CONNECTING"===R.connectionState&&h===R._sessionId&&pv.joinChannelTimeout(R._sessionId,5)}),5e3),e.prev=40,m=f.cloudProxyServer,Or(_=["proxy3","proxy4","proxy5"]).call(_,m)&&(g=W_("PROXY_SERVER_TYPE3"),Array.isArray(g)?f.proxyServer=g[0]:f.proxyServer=g),pv.setProxyServer(f.proxyServer),tv.setProxyServer(f.proxyServer),this.store.requestAPStart(),!f.stringUid||f.uid){e.next=54;break}return e.next=46,tR(f.stringUid,f,this._axiosCancelSource.token,this._config.httpRetryConfig||Nf,this.store);case 46:return E=e.sent,tv.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(f.stringUid," => ").concat(E)),f.uid=E,e.next=51,$w(f,this._axiosCancelSource.token,this._config.httpRetryConfig||Nf,!0,this.store);case 51:v=e.sent,e.next=57;break;case 54:return e.next=56,$w(f,this._axiosCancelSource.token,this._config.httpRetryConfig||Nf,!0,this.store);case 56:v=e.sent;case 57:if(this._joinAndNotLeaveYet){e.next=59;break}throw new Fv(ql.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));case 59:return this.store.requestAPEnd(),setTimeout((function(){R._configDistribute.startGetConfigDistribute(f,R._axiosCancelSource.token),R._configDistribute.on(pm.UPDATE_BITRATE_LIMIT,(function(e){R._p2pChannel.updateBitrateLimit(e)}))}),0),this._key=r||t,y=v.gatewayInfo,this._joinInfo=xA(xA({},f),{},{cid:y.cid,uid:f.uid?f.uid:y.uid,vid:y.vid,apResponse:y.res,uni_lbs_ip:y.uni_lbs_ip,gatewayAddrs:y.gatewayAddrs}),e.next=64,this._joinGateway();case 64:if(b=e.sent,this._joinAndNotLeaveYet){e.next=67;break}throw new Fv(ql.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));case 67:return l.onSuccess(b),this._appId=t,this._channelName=f.cname,this._uid=b,this.store.uid=b,setTimeout((function(){R._networkQualityInterval&&window.clearInterval(R._networkQualityInterval),R._networkQualityInterval=window.setInterval(R._handleUpdateNetworkQuality,2e3),window.addEventListener(rp()?"beforeunload":"pagehide",R._handleBeforeUnload)}),0),S=f.stringUid?"string uid: ".concat(f.stringUid,",uid: ").concat(f.uid):"uid: ".concat(this._uid),e.abrupt("return",(tv.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(n,",").concat(S)),setTimeout((function(){tv.startUpload()}),5e3),this.store.joinEnd(),w=this,Or(vv).call(vv,w)||vv.push(w),b));case 72:throw e.prev=72,e.t2=e.catch(40),(T=Array.isArray(e.t2)?e.t2[0]:e.t2)&&T.code===ql.OPERATION_ABORTED?tv.warning("[".concat(this._clientId,"] join number: ").concat(a,", Joining channel failed, rollback"),T):tv.error("[".concat(this._clientId,"] join number: ").concat(a,", Joining channel failed, rollback"),T),T.code!==ql.OPERATION_ABORTED&&this._numberOfJoinCount===a&&(this._gateway.state="DISCONNECTED",this._reset()),l.onError(T),T;case 76:case"end":return e.stop()}}),e,this,[[8,14],[40,72]])})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),n._joinGateway=function(){var e=this;if(!this._joinInfo||!this._key)throw new Fv(ql.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!W_("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then((function(e){return e})).catch((function(t){if(t.code===ql.INIT_WEBSOCKET_TIMEOUT)return e._gateway.leave(!0,jp.FALLBACK),t;if(t.code===ql.INIT_DATACHANNEL_TIMEOUT)return e._gateway.leave(!0,jp.FALLBACK),t;throw t})).then((function(t){if(t instanceof Fv){if(t.code===ql.INIT_WEBSOCKET_TIMEOUT){if(tv.info("[".concat(e._clientId,"] join timeout, fallback to proxy")),!e._joinInfo||!e._key)throw new Fv(ql.INVALID_OPERATION);e._joinInfo.cloudProxyServer="fallback",e._cloudProxyServerMode="fallback",e.store.cloudProxyServerMode="fallback";var n=W_("PROXY_SERVER_TYPE3");if(Array.isArray(n))if(e._joinInfo.apUrl){var r=/^https?:\/\/(.+?)(\/.*)?$/.exec(e._joinInfo.apUrl)[1].split("."),i=r.slice(r.length-2).join(".");n.forEach((function(t){e._joinInfo&&Or(t).call(t,i)&&(e._joinInfo.proxyServer=t)})),e._joinInfo.proxyServer||(e._joinInfo.proxyServer=n[0])}else e._joinInfo.proxyServer=n[0];else e._joinInfo.proxyServer=n;var o=W_("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return o&&o[1]&&"443"!==o[1]&&tv.setProxyServer(e._joinInfo.proxyServer),"443"!==W_("STATS_COLLECTOR_PORT").toString()&&pv.setProxyServer(e._joinInfo.proxyServer),pv.reportApiInvoke(e._sessionId,{name:Lp.JOIN_FALLBACK_TO_PROXY,options:[e._joinInfo.proxyServer],tag:Mp.TRACER}).onSuccess(),e.safeEmit(Vp.JOIN_FALLBACK_TO_PROXY,e._joinInfo.proxyServer),W_("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&e._joinInfo.turnServer.servers.forEach((function(e){"forceturn"in e&&(e.forceturn=!0)})),e._gateway.join(e._joinInfo,e._key)}if(tv.info("[".concat(e._clientId,"] join by datachannel timeout, fallback to websocket")),!e._joinInfo||!e._key)throw new Fv(ql.INVALID_OPERATION);return pv.reportApiInvoke(e._sessionId,{name:Lp.DATACHANNEL_FAILBACK,options:[e.store.clientId],tag:Mp.TRACER}).onSuccess(),e._joinGateway()}return t})).then((function(e){return e}))},n.leave=function(){var e=d(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tv.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(rp()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){var t=vv.indexOf(e);-1!==t&&vv.splice(t,1)}(this),e.next=3,this._leaveMutex.lock();case 3:if(t=e.sent,"DISCONNECTED"!==this.connectionState){e.next=6;break}return e.abrupt("return",(tv.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void t()));case 6:return e.next=8,this._gateway.leave("CONNECTED"!==this.connectionState);case 8:tv.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),t();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.publish=function(){var e=d(c().mark((function e(t){var n,r,o,a,s,u,d=this,l=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(l.length>1&&void 0!==l[1])||l[1],Array.isArray(t)){e.next=5;break}if(t instanceof tE){e.next=4;break}return e.abrupt("return",this._publishDataChannel(t));case 4:t=[t];case 5:if(0!==t.length){e.next=7;break}throw new Fv(ql.INVALID_PARAMS,"param list is empty");case 7:if(r=t,"audience"!==this._gateway.role){e.next=10;break}throw new Fv(ql.INVALID_OPERATION,"audience can not publish stream");case 10:o=i(r);case 11:if((a=o()).done){e.next=19;break}if((s=a.value)instanceof tE){e.next=15;break}throw new Fv(ql.INVALID_PARAMS,"parameter is not local track");case 15:if(s._enabled||!n){e.next=17;break}throw new Fv(ql.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(s.getTrackId()));case 17:e.next=11;break;case 19:return tv.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(r.map((function(e){return"".concat(e.getTrackId()," ")})))),e.next=22,this._publishMutex.lock();case 22:return u=e.sent,e.next=25,this._configDistribute.awaitConfigDistributeComplete();case 25:return n&&r.forEach((function(e){var t=d._configDistribute.getBitrateLimit();e instanceof wy&&t&&e.setBitrateLimit(t.uplink)})),e.prev=26,e.next=29,this._publishHighStream(r);case 29:tv.info("[".concat(this._clientId,"] Publish success, id ").concat(r.map((function(e){return"".concat(e.getTrackId()," ")})))),e.next=35;break;case 32:throw e.prev=32,e.t0=e.catch(26),tv.error("[".concat(this._clientId,"] publish error"),e.t0.toString()),e.t0;case 35:return e.prev=35,u(),e.finish(35);case 38:case"end":return e.stop()}}),e,this,[[26,32,35,38]])})));return function(t){return e.apply(this,arguments)}}(),n._publishDataChannel=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rp(t.id,"id",0,65535,!0),Tp(t.ordered,"ordered"),Op(t.metadata,"metadata",0,512),tv.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(t.id)),e.next=3,this._publishMutex.lock();case 3:if(n=e.sent,e.prev=4,-1===this._p2pChannel.getAllDataChannels().findIndex((function(e){return e.id===t.id}))){e.next=7;break}throw new Fv(ql.INVALID_PARAMS,"Invalid id: ".concat(t.id,". If you want to republish the datachannel, unpublish first"));case 7:if(this._joinInfo&&void 0!==this._uid){e.next=9;break}throw new Fv(ql.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");case 9:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=11;break}throw new Fv(ql.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));case 11:if("auto"!==this._turnServer.mode||!W_("FORCE_TURN")||W_("TURN_ENABLE_TCP")||W_("TURN_ENABLE_UDP")){e.next=13;break}throw new Fv(ql.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");case 13:return r=new qT(t),e.next=16,this._p2pChannel.publishDataChannel([r]);case 16:return e.prev=16,i={streamId:t.id,ordered:t.ordered,maxRetransmits:W_("DATASTREAM_MAX_RETRANSMITS"),metadata:t.metadata,channelId:r._originDataChannelId},e.next=20,this._gateway.publishDataChannel(this._uid,i,!0);case 20:e.next=26;break;case 22:if(e.prev=22,e.t0=e.catch(16),e.t0.code===ql.DISCONNECT_P2P){e.next=26;break}throw e.t0;case 26:return e.next=28,r._waitTillOpen();case 28:return tv.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(r.id)),e.abrupt("return",r);case 32:throw e.prev=32,e.t1=e.catch(4),tv.error("[".concat(this._clientId,"] publish datachannels error"),e.t1.toString()),e.t1;case 35:return e.prev=35,n(),e.finish(35);case 38:case"end":return e.stop()}}),e,this,[[4,32,35,38],[16,22]])})));return function(t){return e.apply(this,arguments)}}(),n.unpublish=function(){var e=d(c().mark((function e(t){var n,r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo&&void 0!==this._uid){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");case 2:if(n=[],!t){e.next=13;break}if(!Array.isArray(t)){e.next=8;break}n=t,e.next=11;break;case 8:if(t instanceof tE){e.next=10;break}return e.abrupt("return",this._unpublishDataChannel([t]));case 10:n=[t];case 11:e.next=18;break;case 13:if(e.t0=this.store.useP2P,e.t0){e.next=17;break}return e.next=17,this._unpublishDataChannel();case 17:n=this._p2pChannel.getAllTracks(!0);case 18:return tv.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(n.map((function(e){return"".concat(e.getTrackId()," ")}))," ")),e.next=21,this._publishMutex.lock();case 21:if(r=e.sent,e.prev=22,!(this._p2pChannel instanceof yA)){e.next=37;break}return e.next=26,this._p2pChannel.unpublish(n);case 26:if(!(i=e.sent)){e.next=35;break}return e.next=30,this._gateway.sendExtensionMessage(Nm.UNPUBLISH,i);case 30:if(o=e.sent,e.t1=o,!e.t1){e.next=35;break}return e.next=35,this._p2pChannel.setDescription("local",o);case 35:e.next=45;break;case 37:return e.next=39,this._p2pChannel.unpublish(n);case 39:if(a=e.sent,e.t2=a,!e.t2){e.next=44;break}return e.next=44,this._gateway.unpublish(a,this._uid);case 44:tv.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(n.map((function(e){return"".concat(e.getTrackId())}))));case 45:e.next=50;break;case 47:throw e.prev=47,e.t3=e.catch(22),tv.error("[".concat(this._clientId,"] unpublish error"),e.t3.toString()),e.t3;case 50:return e.prev=50,r&&r(),e.finish(50);case 53:case"end":return e.stop()}}),e,this,[[22,47,50,53]])})));return function(t){return e.apply(this,arguments)}}(),n._unpublishDataChannel=function(){var e=d(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==t&&0!==t.length||(t=this._p2pChannel.getAllDataChannels()),tv.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(t.map((function(e){return"".concat(e.id," ")}))," ")),e.next=3,this._publishMutex.lock();case 3:return n=e.sent,e.prev=4,e.next=7,this._p2pChannel.unpublishDataChannel(t);case 7:if(r=e.sent,e.t0=r,!e.t0){e.next=12;break}return e.next=12,this._gateway.unpublishDataChannel(r);case 12:tv.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(t.map((function(e){return"".concat(e.id)})))),e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(4),tv.error("[".concat(this._clientId,"] unpublish dataChannel error"),e.t1.toString()),e.t1;case 18:return e.prev=18,n&&n(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[4,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),n.subscribe=function(){var e=d(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","datachannel"===n?this._subscribeDataChannel(t,r):this._subscribe(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n._subscribeDataChannel=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rp(n,"channelId",0,65535,!0),this._joinInfo){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"Can't subscribe datachannel, not joined");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Fv(ql.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));case 4:if(this._users.find((function(e){return e===t}))){e.next=6;break}throw tv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),new Fv(ql.INVALID_REMOTE_USER,"user is not in the channel");case 6:if(t.hasAudio||t.hasVideo||0!==t._dataChannels.length){e.next=8;break}throw tv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),new Fv(ql.INVALID_REMOTE_USER,"user is not published");case 8:if(i=null===(r=t._dataChannels)||void 0===r?void 0:r.find((function(e){return e.id===n}))){e.next=11;break}throw tv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType datachannel, remote datachannel is not published")),new Fv(ql.REMOTE_USER_IS_NOT_PUBLISHED);case 11:return e.next=13,this._subscribeMutex.lock();case 13:return o=e.sent,tv.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: datachannel")),e.prev=15,e.next=18,this._p2pChannel.subscribeDataChannel(t,[i]);case 18:if(!(a=e.sent)||!Or(a).call(a,i.id)){e.next=37;break}if(e.prev=20,i._originDataChannelId){e.next=23;break}throw tv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType datachannel, cannot get RTCDatachannel")),new Fv(ql.REMOTE_USER_IS_NOT_PUBLISHED);case 23:return u={id:i.id,datachannelId:i._originDataChannelId,ordered:i.ordered,maxRetransmits:i.maxRetransmits,metadata:null!==(s=i.metadata)&&void 0!==s?s:""},e.next=26,this._gateway.subscribeDataChannel(t.uid,u,!0);case 26:e.next=37;break;case 28:if(e.prev=28,e.t0=e.catch(20),(null==e.t0?void 0:e.t0.code)===ql.WS_ABORT){e.next=34;break}return e.next=33,this._p2pChannel.unsubscribeDataChannel(t,[i]);case 33:throw e.t0;case 34:return e.next=36,this._p2pChannel.unsubscribeDataChannel(t,[i]);case 36:this._p2pChannel.setPendingRemoteDataChannel(t,i.id);case 37:return e.next=39,i._waitTillOpen();case 39:return tv.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: datachannel")),e.abrupt("return",i);case 41:return e.prev=41,o(),e.finish(41);case 44:case"end":return e.stop()}}),e,this,[[15,,41,44],[20,28]])})));return function(t,n){return e.apply(this,arguments)}}(),n._p2pSubscribe=function(){var e=d(c().mark((function e(t,n,r){var i,o,a,s,u,d,l=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wp(n,"mediaType",["audio","video"]),this._joinInfo){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"Can't subscribe stream, not joined");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Fv(ql.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));case 4:if(this._users.find((function(e){return e===t}))){e.next=7;break}throw i=new Fv(ql.INVALID_REMOTE_USER,"user is not in the channel"),tv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),i;case 7:if(t.hasAudio||t.hasVideo){e.next=10;break}throw o=new Fv(ql.INVALID_REMOTE_USER,"user is not published"),tv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),o;case 10:if(r||("audio"!==n||t.hasAudio)&&("video"!==n||t.hasVideo)){e.next=13;break}throw a=new Fv(ql.REMOTE_USER_IS_NOT_PUBLISHED),tv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType ").concat(n,", remote track is not published")),a;case 13:return e.next=15,this._subscribeMutex.lock();case 15:return s=e.sent,tv.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: ").concat(n)),u="audio"===n?mm.LocalAudioTrack:this._joinInfo.defaultVideoStream===Dg.LOW_STREAM?mm.LocalVideoLowTrack:mm.LocalVideoTrack,e.prev=18,e.next=21,this._p2pChannel.hasRemoteMediaWithLock(t,n);case 21:if(!e.sent){e.next=26;break}return e.next=24,this._p2pChannel.unmuteRemote(t,n);case 24:e.next=31;break;case 26:if(this.store.subscribe(t.uid,n,Date.now()),e.t0=this._p2pChannel instanceof yA,!e.t0){e.next=31;break}return e.next=31,this._gateway.sendExtensionMessage(Nm.SUBSCRIBE,{trackType:u});case 31:if(tv.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(t.uid,this._defaultStreamFallbackType).catch((function(e){tv.warning("[".concat(l._clientId,"] auto set fallback failed"),e)})),d="audio"===n?t._audioTrack:t._videoTrack){e.next=36;break}throw new Fv(ql.UNEXPECTED_ERROR,"can not find remote track in user object");case 36:return e.abrupt("return",d);case 39:throw e.prev=39,e.t1=e.catch(18),tv.error("[".concat(this._clientId,"] subscribe user ").concat(t.uid," error"),e.t1),e.t1;case 42:return e.prev=42,s(),e.finish(42);case 45:case"end":return e.stop()}}),e,this,[[18,39,42,45]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n._subscribe=function(){var e=d(c().mark((function e(t,n,r){var i,o,a,s,u,d,l,p,f,h,_=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._p2pChannel instanceof yA)){e.next=2;break}return e.abrupt("return",this._p2pSubscribe(t,n));case 2:if(wp(n,"mediaType",["audio","video"]),this._joinInfo){e.next=4;break}throw new Fv(ql.INVALID_OPERATION,"Can't subscribe stream, not joined");case 4:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=6;break}throw new Fv(ql.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));case 6:if(this._users.find((function(e){return e===t}))){e.next=9;break}throw i=new Fv(ql.INVALID_REMOTE_USER,"user is not in the channel"),tv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),i;case 9:if(t.hasAudio||t.hasVideo){e.next=12;break}throw o=new Fv(ql.INVALID_REMOTE_USER,"user is not published"),tv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),o;case 12:if(r||("audio"!==n||t.hasAudio&&void 0!==t._audioSSRC)&&("video"!==n||t.hasVideo&&void 0!==t._videoSSRC)){e.next=15;break}throw a=new Fv(ql.REMOTE_USER_IS_NOT_PUBLISHED),tv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType ").concat(n,", remote track is not published")),a;case 15:return s="audio"===n?t._audioSSRC:t._videoSSRC,u="audio"===n?t._audioOrtc:t._videoOrtc,d="video"===n?t._rtxSsrcId:void 0,l={stream_type:"audio"===n?hm.AUDIO:hm.VIDEO,ssrcId:s},e.next=18,this._subscribeMutex.lock();case 18:return p=e.sent,tv.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: ").concat(n)),e.prev=20,e.next=23,this._p2pChannel.hasRemoteMediaWithLock(t,n);case 23:if(!e.sent){e.next=28;break}return e.next=26,this._p2pChannel.unmuteRemote(t,n);case 26:e.next=55;break;case 28:return e.prev=28,void 0!==(f="audio"===n?t._audioSSRC:t._videoSSRC)&&f!==s&&(s=f,u="audio"===n?t._audioOrtc:t._videoOrtc,d="video"===n?t._rtxSsrcId:void 0,l={stream_type:"audio"===n?hm.AUDIO:hm.VIDEO,ssrcId:s}),QT.markSubscribeStart(this.store.clientId,s),this.store.subscribe(t.uid,n,Date.now()),e.next=35,this._p2pChannel.subscribe(t,n,s,d,u);case 35:return e.prev=35,e.next=38,this._gateway.subscribe(t.uid,l,!0);case 38:e.next=49;break;case 40:if(e.prev=40,e.t0=e.catch(35),(null==e.t0?void 0:e.t0.code)===ql.WS_ABORT){e.next=46;break}return e.next=45,this._p2pChannel.unsubscribe(t,n);case 45:throw e.t0;case 46:return e.next=48,this._p2pChannel.unsubscribe(t,n,!0);case 48:this._p2pChannel.setPendingRemoteMedia(t,n);case 49:this.store.subscribe(t.uid,n,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,t,n),e.next=55;break;case 52:throw e.prev=52,e.t1=e.catch(28),this._p2pChannel.reportSubscribeEvent(!1,null==e.t1?void 0:e.t1.code,t,n),e.t1;case 55:if(tv.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(t.uid,this._defaultStreamFallbackType).catch((function(e){tv.warning("[".concat(_._clientId,"] auto set fallback failed"),e)})),h="audio"===n?t._audioTrack:t._videoTrack){e.next=59;break}throw new Fv(ql.UNEXPECTED_ERROR,"can not find remote track in user object");case 59:return e.abrupt("return",h);case 62:throw e.prev=62,e.t2=e.catch(20),tv.error("[".concat(this._clientId,"] subscribe user ").concat(t.uid," error"),e.t2),e.t2;case 65:return e.prev=65,p(),e.finish(65);case 68:case"end":return e.stop()}}),e,this,[[20,62,65,68],[28,52],[35,40]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n.massSubscribe=function(){var e=d(c().mark((function e(t){var n,r,o,a,s,u,d,l,p,f,h,_,v,m,g,E,y,b,S,T,w,R,C,O,A=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ap(t,"subscribeList"),this._joinInfo){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"Can't subscribe stream, not joined");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Fv(ql.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));case 4:return n=Date.now(),r=new Map,e.next=8,this._subscribeMutex.lock();case 8:return o=e.sent,tv.info("[".concat(this._clientId,"]start massSubscribe user ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),a=(t=[].concat(t)).map((function(e){return{user:e.user,mediaType:e.mediaType}})),e.next=13,this._p2pChannel.globalLock();case 13:s=e.sent,e.prev=14,d=function(e){var n=t[e],i=n.user,o=n.mediaType;if(wp(o,"mediaType",["audio","video"]),!i){var s=new Fv(ql.INVALID_PARAMS,"user property does not exist in subscribeList item");throw tv.error("[".concat(A._clientId,"] user property does not exist in subscribeList item")),s}if(!A._users.find((function(e){return e===i}))){var c=new Fv(ql.INVALID_REMOTE_USER,"user is not in the channel");return tv.error("[".concat(A._clientId,"] can not massSubscribe ").concat(i.uid,", this user is not in the channel")),a[e].error=c,t.splice(e,1),"continue"}if("audio"===o&&(!i.hasAudio||void 0===i._audioSSRC)||"video"===o&&(!i.hasVideo||void 0===i._videoSSRC)){var u=new Fv(ql.REMOTE_USER_IS_NOT_PUBLISHED);return tv.error("[".concat(A._clientId,"] can not subscribe ").concat(i.uid," with mediaType ").concat(o,", remote user is not published")),a[e].error=u,t.splice(e,1),"continue"}var d=im.Video|im.LwoVideo,l=r.get(i);if(l){if("video"===o?l&d:l&im.Audio)return t.splice(e,1),tv.warning("[".concat(A._clientId,"] repeat massSubscribe user:").concat(i.uid,", mediaType:").concat(o," twice")),"continue";r.set(i,l|("video"===o?d:im.Audio))}else r.set(i,"video"===o?d:im.Audio)},l=t.length-1;case 17:if(!(l>=0)){e.next=24;break}if("continue"!==d(l)){e.next=21;break}return e.abrupt("continue",21);case 21:l--,e.next=17;break;case 24:p=t.length-1;case 25:if(!(p>=0)){e.next=35;break}if(f=t[p],h=f.user,_=f.mediaType,v=im.Video|im.LwoVideo,!this._p2pChannel.hasRemoteMedia(h,_)){e.next=32;break}return e.next=30,this._p2pChannel.unmuteRemoteNoLock(h,_);case 30:m=r.get(h),r.set(h,"video"===_?m^v:m^im.Audio),t.splice(p,1);case 32:p--,e.next=25;break;case 35:if(this.store.massSubscribe(t.map((function(e){return{userId:e.user.uid,type:e.mediaType}})),n),g=Bf(u=Array.from(r.entries())).call(u,(function(e,t){var n=t[0],r=t[1];if(0===r)return e;var i={stream_id:n.uid,stream_type:r};return r&im.Audio&&(i.audio_ssrc=n._audioSSRC),r&im.Video&&(i.video_ssrc=n._videoSSRC),e.push(i),e}),[]),e.prev=37,e.t0=t.length>0,!e.t0){e.next=42;break}return e.next=42,this._p2pChannel.massSubscribeNoLock(t.map((function(e){var t=e.user,n=e.mediaType;return{user:t,mediaType:n,ssrcId:n===hm.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:n===hm.VIDEO?t._rtxSsrcId:void 0}})));case 42:if(E=new Map,!(g.length>0)){e.next=48;break}return e.next=46,this._gateway.subscribeAll(g,!0);case 46:((null==(y=e.sent)?void 0:y.users)||[]).forEach((function(e){var t=e.stream_id,n=e.video_error_code,r=e.audio_error_code,i=e.error_code;(n||r||i)&&E.set(t,{video_error_code:n,audio_error_code:r,error_code:i})}));case 48:if(!(Array.from(E.entries()).length>0)){e.next=52;break}return b=Array.from(E.entries()).map((function(e){var t,n=e[0],r=e[1];return r.error_code||r.video_error_code&&r.audio_error_code?t=void 0:r.video_error_code?t=hm.VIDEO:r.audio_error_code&&(t=hm.AUDIO),{user:A.remoteUsers.find((function(e){return e.uid===n})),mediaType:t}})),e.next=52,this._p2pChannel.massUnsubscribeNoLock(b);case 52:for(S=i(a);!(T=S()).done;)w=T.value,(R=E.get(w.user.uid))&&(C=R.error_code||"audio"===w.mediaType&&R.audio_error_code||"video"===w.mediaType&&R.video_error_code)&&(O=Bm(C),tv.error("user:".concat(w.user.uid," mediaType:").concat(w.mediaType," has massSubscribe error ").concat(O.desc)),w.error=new Fv(ql.SUBSCRIBE_FAILED,"code ".concat(C,": ").concat(O.desc))),w.error||("video"===w.mediaType?w.track=w.user.videoTrack:w.track=w.user.audioTrack);return e.abrupt("return",(this.store.massSubscribe(a.filter((function(e){return!e.error})).map((function(e){return{userId:e.user.uid,type:e.mediaType}})),void 0,Date.now()),a.forEach((function(e){var t;pv.subscribe(A.store.sessionId,{succ:!!e.error,ec:(null===(t=e.error)||void 0===t?void 0:t.code)||null,video:e.mediaType===hm.VIDEO,audio:e.mediaType===hm.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===hm.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:A.store.p2pId,eventElapse:Math.floor(performance.now()-n)},!0)})),tv.info("[".concat(this._clientId,"] massSubscribe success ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),a));case 56:return e.prev=56,e.t1=e.catch(37),e.next=60,this._p2pChannel.massUnsubscribeNoLock(t);case 60:throw e.t1;case 61:return e.prev=61,s(),o(),e.finish(61);case 64:case"end":return e.stop()}}),e,this,[[14,,61,64],[37,56]])})));return function(t){return e.apply(this,arguments)}}(),n.unsubscribe=function(){var e=d(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n&&!this.store.useP2P){e.next=5;break}if("datachannel"!==n){e.next=3;break}return e.abrupt("return",this._unsubscribeDataChannel(t,r));case 3:e.next=7;break;case 5:return e.next=7,this._unsubscribeDataChannel(t,r);case 7:if(n&&wp(n,"mediaType",["audio","video"]),this._joinInfo){e.next=9;break}throw new Fv(ql.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");case 9:if(this._users.find((function(e){return e===t}))){e.next=12;break}throw i=new Fv(ql.INVALID_REMOTE_USER,"user is not in the channel"),tv.error("[".concat(this._clientId,"] can not unsubscribe ").concat(t.uid,", user is not in the channel")),i;case 12:return tv.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(t.uid,", mediaType: ").concat(n)),e.next=15,this._subscribeMutex.lock();case 15:if(o=e.sent,e.prev=16,!(this._p2pChannel instanceof yA)){e.next=22;break}return e.next=20,this._gateway.sendExtensionMessage(Nm.UNSUBSCRIBE,{mediaType:n});case 20:e.next=30;break;case 22:return e.next=24,this._p2pChannel.unsubscribe(t,n);case 24:if(a=e.sent,e.t0=a,!e.t0){e.next=29;break}return e.next=29,this._gateway.unsubscribe(a,t.uid);case 29:tv.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(t.uid,", mediaType: ").concat(n));case 30:e.next=37;break;case 32:if(e.prev=32,e.t1=e.catch(16),e.t1.code!==ql.DISCONNECT_P2P){e.next=36;break}return e.abrupt("return",void tv.warning("disconnecting p2p, abort unsubscribe request."));case 36:throw tv.error("[".concat(this._clientId,"] unsubscribe user ").concat(t.uid," error"),e.t1.toString()),e.t1;case 37:return e.prev=37,o(),e.finish(37);case 40:case"end":return e.stop()}}),e,this,[[16,32,37,40]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n._unsubscribeDataChannel=function(){var e=d(c().mark((function e(t,n){var r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&Rp(n,"id",0,65535,!0),this._joinInfo){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");case 2:if(this._users.find((function(e){return e===t}))){e.next=5;break}throw r=new Fv(ql.INVALID_REMOTE_USER,"user is not in the channel"),tv.error("[".concat(this._clientId,"] can not unsubscribe ").concat(t.uid,", user is not in the channel")),r;case 5:if("number"==typeof n?(o=t._dataChannels.find((function(e){return e.id===n})))&&(i=[o]):i=t._dataChannels,void 0!==i){e.next=9;break}throw a=new Fv(ql.REMOTE_USER_IS_NOT_PUBLISHED),tv.error("[".concat(this._clientId,"] can not unsubscribe ").concat(t.uid," with channelId ").concat(n,", remote datachannel is not published")),a;case 9:return tv.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(t.uid,", mediaType: datachannel, ids: ").concat(i.map((function(e){return e.id})))),e.prev=10,e.next=13,this._p2pChannel.unsubscribeDataChannel(t,i);case 13:if(s=e.sent,e.t0=s,!e.t0){e.next=18;break}return e.next=18,this._gateway.unsubscribeDataChannel(s,t.uid);case 18:tv.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(t.uid,", mediaType: datachannel, ids: ").concat(s)),e.next=26;break;case 21:if(e.prev=21,e.t1=e.catch(10),e.t1.code!==ql.DISCONNECT_P2P){e.next=25;break}return e.abrupt("return",void tv.warning("disconnecting p2p, abort unsubscribe request."));case 25:throw tv.error("[".concat(this._clientId,"] unsubscribe user ").concat(t.uid," error"),e.t1.toString()),e.t1;case 26:case"end":return e.stop()}}),e,this,[[10,21]])})));return function(t,n){return e.apply(this,arguments)}}(),n.massUnsubscribe=function(){var e=d(c().mark((function e(t){var n,r,i,o,a=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ap(t,"unsubscribeList"),this._joinInfo){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");case 2:tv.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),t=[].concat(t),n=new Map,r=function(e){var r=t[e],i=r.user,o=r.mediaType;if(!i){var s=new Fv(ql.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw tv.error("[".concat(a._clientId,"] user property does not exist in unsubscribeList item")),s}if(wp(o,"mediaType",["video","audio",void 0]),!a._users.find((function(e){return e===i})))return tv.warning("[".concat(a._clientId,"] can not unsubscribe ").concat(i.uid,", user is not in the channel")),t.splice(e,1),"continue";var c=im.Video|im.LwoVideo;if(n.has(i)){var u,d=n.get(i);switch(o){case"video":u=d&c;break;case"audio":u=d&im.Audio;break;default:u=d&(im.Audio|c)}if(u)return tv.warning("[".concat(a._clientId,"] repeat massUnsubscribe user:").concat(i.uid,",mediaType:").concat(o," twice.")),t.splice(e,1),"continue";o?"audio"===o?n.set(i,d|im.Audio):"video"===o&&n.set(i,d|c):n.set(i,d|im.Audio|c)}else o?"audio"===o?n.set(i,im.Audio):"video"===o&&n.set(i,c):n.set(i,im.Audio|c)},i=t.length-1;case 6:if(!(i>=0)){e.next=13;break}if("continue"!==r(i)){e.next=10;break}return e.abrupt("continue",10);case 10:i--,e.next=6;break;case 13:return e.prev=13,e.next=16,this._p2pChannel.massUnsubscribe(t);case 16:if(o=e.sent,e.t0=o,!e.t0){e.next=21;break}return e.next=21,this._gateway.massUnsubscribe(o);case 21:tv.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),e.next=29;break;case 24:if(e.prev=24,e.t1=e.catch(13),e.t1.code!==ql.DISCONNECT_P2P){e.next=28;break}return e.abrupt("return",void tv.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request.")));case 28:throw tv.error("[".concat(this._clientId,"] massUnsubscribe error"),e.t1.toString()),e.t1;case 29:case"end":return e.stop()}}),e,this,[[13,24]])})));return function(t){return e.apply(this,arguments)}}(),n.setLowStreamParameter=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(function(e){if(!e)throw new Sp(ql.INVALID_PARAMS);Ip(e.width)||Cp(e.width,"streamParameter.width"),Ip(e.height)||Cp(e.height,"streamParameter.height"),Ip(e.framerate)||Cp(e.framerate,"streamParameter.framerate"),Ip(e.bitrate)||Rp(e.bitrate,"streamParameter.bitrate")}(t),(!t.width&&t.height||t.width&&!t.height)&&tv.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),tv.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(t)),(n=this._configDistribute.getLowStreamConfigDistribute())&&n.bitrate&&t.bitrate&&n.bitrate<t.bitrate&&(t.bitrate=n.bitrate),this._lowStreamParameter=t,!this._isDualStreamEnabled){e.next=4;break}return e.abrupt("return",this._p2pChannel.updateVideoStreamParameter(t,mm.LocalVideoLowTrack));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.enableDualStream=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pE().supportDualStream){e.next=2;break}throw pv.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new Fv(ql.NOT_SUPPORTED,"Your browser is not support dual stream");case 2:if(!this._isDualStreamEnabled){e.next=4;break}throw new Fv(ql.INVALID_OPERATION,"Dual stream is already enabled");case 4:if(!this._p2pChannel.canPublishLowStream()){e.next=13;break}return e.prev=5,e.next=8,this._publishLowStream();case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(5),pv.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e.t0;case 13:this._isDualStreamEnabled=!0,pv.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),tv.info("[".concat(this._clientId,"] enable dual stream"));case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}(),n.disableDualStream=function(){var e=d(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isDualStreamEnabled){e.next=18;break}if(this._joinInfo){e.next=3;break}throw new Fv(ql.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");case 3:if(!this._p2pChannel.getLocalMedia(mm.LocalVideoLowTrack)){e.next=17;break}return e.prev=4,e.next=7,this._p2pChannel.unpublishLowStream();case 7:if(t=e.sent,e.t0=t,!e.t0){e.next=12;break}return e.next=12,this._gateway.unpublish(t,this._joinInfo.stringUid||this._joinInfo.uid);case 12:e.next=17;break;case 14:throw e.prev=14,e.t1=e.catch(4),pv.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e.t1;case 17:this._isDualStreamEnabled=!1,pv.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),tv.info("[".concat(this._clientId,"] disable dual stream"));case 18:case"end":return e.stop()}}),e,this,[[4,14]])})));return function(){return e.apply(this,arguments)}}(),n.setClientRole=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(function(e){wp(e,"role",["audience","host"])}(t),n&&Zp(n),"rtc"!==this.mode){e.next=2;break}throw tv.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),new Fv(ql.INVALID_OPERATION,"rtc mode can not use setClientRole");case 2:if(!n||!n.level||"host"!==t){e.next=4;break}throw new Fv(ql.INVALID_OPERATION,"host mode can not set audience latency level");case 4:if("audience"!==t||!this._p2pChannel.hasLocalMedia()){e.next=6;break}throw new Fv(ql.INVALID_OPERATION,"can not set client role to audience when publishing stream");case 6:return e.next=8,this._gateway.setClientRole(t,n);case 8:this._config.role=t,tv.info("[".concat(this._clientId,"] set client role to ").concat(t,", level: ").concat(n&&n.level));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getRemoteInboundOffset=function(){var e,t=null===(e=this._p2pChannel.getStats())||void 0===e?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;var n=t.timestamp-Date.now();return Math.abs(n)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?n:0},n.getNtpWallTimeInMs=function(){return"visible"===document.visibilityState&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset},n.setProxyServer=function(e,t){if(Op(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new Fv(ql.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Fv(ql.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,pv.setProxyServer(this._proxyServer),tv.setProxyServer(this._proxyServer),tv.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))},n.setTurnServer=function(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new Fv(ql.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Fv(ql.INVALID_OPERATION,"You have already set the proxy")}if(Xp(e))return this._turnServer={servers:e,mode:"original-manual"},void tv.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map((function(e){return e.urls})).join(","),"."));e.forEach((function(e){return Qp(e)})),this._turnServer={servers:e,mode:"manual"},tv.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))},n.setLicense=function(e){if("DISCONNECTED"!==this.connectionState)throw new Fv(ql.INVALID_OPERATION,"you should set license before join channel");if(Op(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new Fv(ql.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,tv.info("[".concat(this._clientId,"] set license success"),e)},n.startProxyServer=function(e){if("DISCONNECTED"!==this.connectionState)throw new Fv(ql.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new Fv(ql.INVALID_OPERATION,"You have already set the proxy");var t;switch(void 0===e&&(e=3),e){case 1:case 2:throw new Fv(ql.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:t="proxy3";break;case 4:t="proxy4";break;case 5:t="proxy5";break;default:throw new Fv(ql.INVALID_PARAMS,"proxy server mode must be ".concat([3,4,5].join("|")))}this._cloudProxyServerMode=t,this.store.cloudProxyServerMode=t,tv.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)},n.stopProxyServer=function(){if("DISCONNECTED"!==this.connectionState)throw new Fv(ql.INVALID_OPERATION,"Stop proxy server after leave channel");pv.setProxyServer(),tv.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",tv.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}},n.setLocalAccessPointsV2=function(e){if(!e.accessPoints)throw new Fv(ql.INVALID_PARAMS,"accessPoints is required.");Ap(e.accessPoints.serverList,"accessPoints.serverList"),Op(e.accessPoints.domain,"accessPoints.domain");var t=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){Rp(e,t,0,65535,!0)})),n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new Fv(ql.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");W_("CLOSE_AFB_FOR_LOCAL_AP")&&(F_("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),F_("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));var r=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map((function(e){return r.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e})),a=o.map((function(e){return"".concat(e,":").concat(n)}));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,F_("WEBCS_DOMAIN",a),F_("WEBCS_DOMAIN_BACKUP_LIST",a),F_("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(Ap(e.report.hostname,"report.hostname"),F_("EVENT_REPORT_DOMAIN",e.report.hostname[0]),F_("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(F_("EVENT_REPORT_DOMAIN",o[0]),F_("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));var s=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),s=e.report.port),F_("STATS_COLLECTOR_PORT",s),e.report?F_("ENABLE_EVENT_REPORT",!0):F_("ENABLE_EVENT_REPORT",!1);var c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(Ap(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];var u=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),u=e.log.port),F_("LOG_UPLOAD_SERVER","".concat(c,":").concat(u));var d=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(Ap(e.cds.hostname,"cds.hostname"),d=e.cds.hostname):d=o;var l=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),l=e.cds.port),F_("CDS_AP",d.map((function(e){return"".concat(e,":").concat(l)}))),e.cds?F_("ENABLE_CONFIG_DISTRIBUTE",!0):F_("ENABLE_CONFIG_DISTRIBUTE",!1),tv.info("set local access point v2 success")},n.setLocalAccessPoints=function(e,t){if(Ap(e,"serverList"),Op(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new Fv(ql.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");var n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map((function(e){return n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e})),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,F_("WEBCS_DOMAIN",e),F_("WEBCS_DOMAIN_BACKUP_LIST",e),F_("GATEWAY_DOMAINS",[t]),F_("EVENT_REPORT_DOMAIN",e[0]),F_("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),F_("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),tv.info("[".concat(this._clientId,"] set local access point success"))},n.setRemoteDefaultVideoStreamType=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wp(t,"streamType",[0,1]),this._remoteDefaultVideoStreamType=t,!this._joinInfo){e.next=12;break}return e.prev=1,e.next=4,this._gateway.setDefaultRemoteVideoStreamType(t);case 4:this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),tv.error("[".concat(this._clientId,"] set default remote video stream type error"),e.t0.toString()),e.t0;case 10:e.next=13;break;case 12:tv.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(t));case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),n.setRemoteVideoStreamType=function(){var e=d(c().mark((function e(t,n){var r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wp(n,"streamType",[0,1]),e.prev=1,e.next=4,this._gateway.setRemoteVideoStreamType(t,n);case 4:setTimeout((function(){var e=r._users.find((function(e){return e.uid===t}));e&&e.videoTrack&&e.videoTrack.updateMediaStreamTrackResolution()}),2e3),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),tv.error("[".concat(this._clientId,"] set remote video stream type error"),e.t0.toString()),e.t0;case 10:tv.info("[".concat(this._clientId,"] set remote ").concat(t," video stream type to ").concat(n)),this._remoteStreamTypeCacheMap.set(t,n);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),n.setStreamFallbackOption=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wp(n,"fallbackType",[0,1,2]),e.prev=1,e.next=4,this._gateway.setStreamFallbackOption(t,n);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),tv.error("[".concat(this._clientId,"] set stream fallback option"),e.t0.toString()),e.t0;case 9:tv.info("[".concat(this._clientId,"] set remote ").concat(t," stream fallback type to ").concat(n)),this._streamFallbackTypeCacheMap.set(t,n);case 10:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),n.setEncryptionConfig=function(e,t,n){!function(e){wp(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),Op(t,"secret");var r=["aes-128-gcm2","aes-256-gcm2"];if(Or(r).call(r,e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new Fv(ql.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new Fv(ql.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||tv.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=_f(n))},n.renewToken=function(){var e=d(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Op(t,"token",1,2047),this._key&&this._joinInfo){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"renewToken should not be called before user join");case 2:return n=this._key,this._key=t,this._joinInfo&&(this._joinInfo.token=t),e.next=6,this._renewTokenMutex.lock();case 6:if(r=e.sent,e.prev=7,!W_("USE_NEW_TOKEN")){e.next=18;break}return tv.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs")),e.next=12,lR(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Nf);case 12:return i=e.sent,tv.debug("[".concat(this._clientId,"] get ticket from unilbs success")),e.next=16,this._gateway.renewToken({token:t,ticket:i});case 16:e.next=21;break;case 18:return tv.debug("[".concat(this._clientId,"] start renew token without ticket")),e.next=21,this._gateway.renewToken({token:t});case 21:tv.debug("[".concat(this._clientId,"] renewToken success")),e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(7),this._key=n,this._joinInfo.token=n,tv.error("[".concat(this._clientId,"] renewToken failed"),e.t0.toString()),e.t0;case 27:return e.prev=27,r(),e.finish(27);case 30:case"end":return e.stop()}}),e,this,[[7,24,27,30]])})));return function(t){return e.apply(this,arguments)}}(),n.enableAudioVolumeIndicator=function(){var e=this;this._audioVolumeIndicationInterval?tv.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval((function(){var t=e._p2pChannel.getAudioLevels();e.safeEmit(Vp.VOLUME_INDICATOR,t)}),W_("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)},n.getRTCStats=function(){var e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e},n.startLiveStreaming=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if("h264"===this.codec){e.next=3;break}throw new Fv(ql.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");case 3:if(this._p2pChannel.hasLocalMedia()){e.next=5;break}throw new Fv(ql.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");case 5:if(!(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(t)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(t))){e.next=7;break}throw new Fv(ql.LIVE_STREAMING_TASK_CONFLICT);case 7:return r=n?Dv.TRANSCODE:Dv.RAW,e.abrupt("return",this._createLiveStreamingClient(r).startLiveStreamingTask(t,r));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setLiveTranscoding=function(e){return this._createLiveStreamingClient(Dv.TRANSCODE).setTranscodingConfig(e)},n.stopLiveStreaming=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((function(e){return e&&e.hasUrl(t)}))).length){e.next=3;break}throw new Fv(ql.INVALID_PARAMS,"can not find live streaming url to stop");case 3:return e.next=5,Vl.all(n.map((function(e){return e&&e.stopLiveStreamingTask(t)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.addInjectStreamUrl=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");case 2:return(r=this._createLiveStreamingClient(Dv.INJECT)).setInjectStreamConfig(n,0),e.next=6,r.startLiveStreamingTask(t,Dv.INJECT);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.removeInjectStreamUrl=function(){var e=d(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._createLiveStreamingClient(Dv.INJECT),r=Array.from(jv(t=n.streamingTasks).call(t)).find((function(e){return e.mode===Dv.INJECT})),this._joinInfo&&r){e.next=3;break}throw new Fv(ql.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");case 3:return e.next=5,n.stopLiveStreamingTask(r.url);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.startChannelMediaRelay=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TR(t),n=this._createChannelMediaRelayClient(),e.next=4,n.startChannelMediaRelay(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updateChannelMediaRelay=function(){var e=d(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TR(t),n=this._createChannelMediaRelayClient(),e.next=4,n.updateChannelMediaRelay(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.stopChannelMediaRelay=function(){var e=d(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._createChannelMediaRelayClient(),e.next=3,t.stopChannelMediaRelay();case 3:this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.sendStreamMessage=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new Fv(ql.INVALID_OPERATION,"can not send data stream, not joined");if(("string"==typeof e||e instanceof Uint8Array)&&(e={payload:e}),"string"==typeof e.payload){var n=new TextEncoder;e.payload=n.encode(e.payload)}if(new Blob([e.payload]).size>1024)throw new Fv(ql.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Ov.DATA_STREAM,{payload:_f(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-wA},!t)},n.sendMetadata=function(e){if(!this._joinInfo)throw new Fv(ql.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new Fv(ql.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Ov.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:_f(e)})},n.sendCustomReportMessage=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)||(t=[t]),t.forEach(nv),this._joinInfo){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"can not send custom report, not joined");case 2:return e.next=4,pv.sendCustomReportMessage(this._joinInfo.sid,t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getLocalAudioStats=function(){return this._statsCollector.getLocalAudioTrackStats()},n.getRemoteAudioStats=function(){return this._statsCollector.getRemoteAudioTrackStats()},n.getLocalVideoStats=function(){return this._statsCollector.getLocalVideoTrackStats()},n.getRemoteVideoStats=function(){return this._statsCollector.getRemoteVideoTrackStats()},n.getRemoteNetworkQuality=function(){return this._statsCollector.getRemoteNetworkQualityStats()},n.pickSVCLayer=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wp(n.spatialLayer,"spatialLayer",[0,1,2,3]),wp(n.temporalLayer,"temporalLayer",[0,1,2,3]),e.prev=1,e.next=4,this._gateway.pickSVCLayer(t,n);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),tv.error("[".concat(this._clientId,"] pick SVC layer failed"),e.t0.toString()),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),n.setRTM2Flag=function(e){if(wp(e,"flag",[0,1]),!this._joinInfo)throw new Fv(ql.INVALID_OPERATION,"Can't setRtm2Flag, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new Fv(ql.INVALID_OPERATION,"Can't setRtm2Flag in ".concat(this.connectionState," state"));return this._gateway.setRTM2Flag(e)},n._reset=function(){if(tv.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=C_.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._pendingPublishedUsers=[],this._users.forEach((function(e){e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach((function(e){return e._close()})),e._dataChannels.length=0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new If("client-publish"),this._subscribeMutex=new If("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}if(this._moderation)try{this.setImageModeration(!1)}catch(e){}},n._startSession=function(e,t){var n=e||bf();e?tv.debug("[".concat(this._clientId,"] new Session ").concat(n)):tv.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(n)),this._sessionId=n,this.store.sessionId=n,t?pv.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:t.channel,appid:t.appId,mode:this.mode}):this._joinInfo?pv.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this.mode}):this._gateway.joinInfo&&pv.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this.mode}),this._joinInfo&&(this._joinInfo.sid=n),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=n)},n._publishHighStream=function(){var e=d(c().mark((function e(t){var n,r,o,a,s,u,d,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo&&void 0!==this._uid){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Fv(ql.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));case 4:if("auto"!==this._turnServer.mode||!W_("FORCE_TURN")||W_("TURN_ENABLE_TCP")||W_("TURN_ENABLE_UDP")){e.next=6;break}throw new Fv(ql.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");case 6:if(tv.debug("[".concat(this._clientId,"] publish high stream")),e.prev=7,!(this._p2pChannel instanceof yA)){e.next=23;break}return e.next=11,this._p2pChannel.publish(t,this._isDualStreamEnabled,this._lowStreamParameter);case 11:if(!(n=e.sent)){e.next=21;break}return e.prev=13,e.next=16,this._gateway.sendExtensionMessage(Nm.PUBLISH,n);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(13),this._p2pChannel.unpublish(t),e.t0;case 21:e.next=53;break;case 23:return e.next=25,this._p2pChannel.publish(t,this._isDualStreamEnabled,this._lowStreamParameter);case 25:return r=e.sent,e.next=28,r.next();case 28:if(!(o=e.sent.value)){e.next=42;break}return e.prev=30,e.next=33,this._gateway.publish(this._uid,o,!0);case 33:s=e.sent,e.next=40;break;case 36:if(e.prev=36,e.t1=e.catch(30),e.t1.code===ql.DISCONNECT_P2P){e.next=40;break}throw r.throw(e.t1),e.t1;case 40:return e.next=42,r.next((null===(a=s)||void 0===a?void 0:a.ortc)||[]);case 42:this._p2pChannel.reportPublishEvent(!0,null),u=i(t);case 44:if((d=u()).done){e.next=53;break}if((l=d.value)instanceof wy&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig),e.t2=!l.muted&&l.enabled,e.t2){e.next=51;break}return e.next=51,this._p2pChannel.muteLocalTrack(l);case 51:e.next=44;break;case 53:e.next=60;break;case 55:if(e.prev=55,e.t3=e.catch(7),this._p2pChannel.reportPublishEvent(!1,null==e.t3?void 0:e.t3.code,t),(null==e.t3?void 0:e.t3.code)!==ql.WS_ABORT){e.next=59;break}return e.abrupt("return");case 59:throw e.t3;case 60:case"end":return e.stop()}}),e,this,[[7,55],[13,18],[30,36]])})));return function(t){return e.apply(this,arguments)}}(),n._publishLowStream=function(){var e=d(c().mark((function e(){var t,n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo&&void 0!==this._uid){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Fv(ql.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));case 4:return tv.debug("[".concat(this._clientId,"] publish low stream")),(t=this._configDistribute.getLowStreamConfigDistribute())&&t.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&t.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=t.bitrate)),e.prev=7,e.next=10,this._p2pChannel.publishLowStream(this._lowStreamParameter);case 10:return n=e.sent,e.next=13,n.next();case 13:if(!(r=e.sent.value)){e.next=26;break}return e.prev=15,e.next=18,this._gateway.publish(this._uid,r,!0);case 18:o=e.sent,e.next=25;break;case 21:if(e.prev=21,e.t0=e.catch(15),e.t0.code===ql.DISCONNECT_P2P){e.next=25;break}throw n.throw(e.t0),e.t0;case 25:n.next((null===(i=o)||void 0===i?void 0:i.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0);case 26:e.next=33;break;case 28:if(e.prev=28,e.t1=e.catch(7),this._p2pChannel.reportPublishEvent(!1,null==e.t1?void 0:e.t1.code,void 0,!0),(null==e.t1?void 0:e.t1.code)!==ql.WS_ABORT){e.next=32;break}return e.abrupt("return");case 32:throw e.t1;case 33:case"end":return e.stop()}}),e,this,[[7,28],[15,21]])})));return function(){return e.apply(this,arguments)}}(),n._createLiveStreamingClient=function(e){var t=this;if(!this._joinInfo||!this._appId)return new Fv(ql.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();var n=function(){return new bR(t._joinInfo,t._config.websocketRetryConfig||Nf,t._config.httpRetryConfig||Nf)},r=function(e){e.onLiveStreamError=function(e,n){pv.reportApiInvoke(t._sessionId,{name:Lp.ON_LIVE_STREAM_ERROR,options:[e,n],tag:Mp.TRACER}).onSuccess(),t.safeEmit(Vp.LIVE_STREAMING_ERROR,e,n)},e.onLiveStreamWarning=function(e,n){pv.reportApiInvoke(t._sessionId,{name:Lp.ON_LIVE_STREAM_WARNING,options:[e,n],tag:Mp.TRACER}).onSuccess(),t.safeEmit(Vp.LIVE_STREAMING_WARNING,e,n)},e.on(qv.REQUEST_WORKER_MANAGER_LIST,(function(e,n,r){if(!t._joinInfo)return r(new Fv(ql.INVALID_OPERATION,"can not find join info to get worker manager"));sR(e,t._joinInfo,t._axiosCancelSource.token,Nf).then(n).catch(r)}))};switch(e){case Dv.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=n(),r(this._liveRawStreamingClient)),this._liveRawStreamingClient;case Dv.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=n(),r(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case Dv.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=n(),this._injectStreamingClient.on(qv.REQUEST_WORKER_MANAGER_LIST,(function(e,n,r){if(!t._joinInfo)return r(new Fv(ql.INVALID_OPERATION,"can not find join info to get worker manager"));sR(e,t._joinInfo,t._axiosCancelSource.token,Nf).then(n).catch(r)})),this._injectStreamingClient.onInjectStatusChange=function(e,n,r){t.safeEmit(Vp.INJECT_STREAM_STATUS,e,n,r)}),this._injectStreamingClient}},n._createChannelMediaRelayClient=function(){var e=this;if(!this._joinInfo)return new Fv(ql.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){var t=this.getLocalVideoStats(),n={width:t.sendResolutionWidth,height:t.sendResolutionHeight};this._channelMediaRelayClient=new RR(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Nf,this._config.httpRetryConfig||Nf,n),this._channelMediaRelayClient.on("state",(function(t){t===$v.RELAY_STATE_FAILURE&&e._channelMediaRelayClient&&e._channelMediaRelayClient.dispose(),e.safeEmit(Vp.CHANNEL_MEDIA_RELAY_STATE,t)})),this._channelMediaRelayClient.on("event",(function(t){e.safeEmit(Vp.CHANNEL_MEDIA_RELAY_EVENT,t)})),this._statsCollector.onStatsChanged=function(t,n){var r;"resolution"===t&&(null===(r=e._channelMediaRelayClient)||void 0===r||r.setVideoProfile(n))}}return this._channelMediaRelayClient},n._handleUpdateDataChannel=function(e,t){var n=this,r=e.added,i=e.deleted,o=[];Array.isArray(r)&&r.length>0&&r.forEach((function(e){var r=e.uid,i=e.stream_id,a=e.ordered,s=e.max_retrans_times,c=e.metadata,u=n._users.find((function(e){return e._uintid===r}));if(u){if(tv.debug("[".concat(n._clientId,"] data_channel added with uid ").concat(r)),Or(o).call(o,u)||o.push(u),u._uintid||(u._uintid=r),-1===u._dataChannels.findIndex((function(t){return t.id===e.stream_id}))){var d={id:i,ordered:!!a,maxRetransmits:s,metadata:c},l=new YT(d);u._dataChannels.push(l),tv.info("[".concat(n._clientId,"] remote user ").concat(u.uid," published datachannel")),t||n.safeEmit(Vp.USER_PUBLISHED,u,"datachannel",d)}n._p2pChannel.hasPendingRemoteDataChannel(u,e.stream_id)&&(tv.debug("[".concat(n._clientId,"] resubscribe datachannel for user ").concat(u.uid," after reconnect.")),n._subscribeDataChannel(u,e.stream_id).catch((function(e){tv.error("[".concat(n._clientId,"] resubscribe datachannel error"),e.toString())})))}else tv.error("[".concat(n._clientId,"] can not find target user!(on_add_data_channel)"))})),t&&(this.safeEmit(Vp.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(i)&&i.length>0&&i.forEach((function(e){var t=e.uid,r=(e.stream_id,n._users.find((function(e){return e._uintid===t})));if(r){var i=r._dataChannels.find((function(t){return t.id===e.stream_id}));i&&(tv.debug("[".concat(n._clientId,"] data_stream delete with uid ").concat(t)),n._p2pChannel.unsubscribeDataChannel(r,[i]).then((function(e){if(e)return r._dataChannels=r._dataChannels.filter((function(e){return e!==i})),n._gateway.unsubscribeDataChannel(e,r.uid)})),tv.info("[".concat(n._clientId,"] remote user ").concat(t," unpublished datachannel ,id:").concat(i.id)),n.safeEmit(Vp.USER_UNPUBLISHED,r,"datachannel",i._config))}else tv.error("[".concat(n._clientId,"] can not find target user!(on_delete_data_channel)"))}))},n._handleRemoveDataChannels=function(e){var t=this,n=this._users.find((function(t){return t.uid===e.uid}));n?void 0!==n._dataChannels&&n._dataChannels.length>0&&(tv.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid)),this._p2pChannel.unsubscribeDataChannel(n,n._dataChannels).then((function(e){if(e)return t._gateway.unsubscribeDataChannel(e,n.uid)})),tv.info("[".concat(t._clientId,"] remote user ").concat(n.uid," unpublished datachannel")),n._dataChannels.forEach((function(e){t.safeEmit(Vp.USER_UNPUBLISHED,n,"datachannel",e._config)}))):tv.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))},n._handleGatewayEvents=function(){var e=this;this._gateway.on(nm.DISCONNECT_P2P,d(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.disconnectForReconnect();case 2:case"end":return t.stop()}}),t)})))),this._gateway.on(nm.CONNECTION_STATE_CHANGE,(function(t,n,r){var i;if(r!==jp.FALLBACK){var o=function(){e.safeEmit(Vp.CONNECTION_STATE_CHANGE,t,n,r)};if(pv.reportApiInvoke(e._sessionId||(null===(i=e._gateway.joinInfo)||void 0===i?void 0:i.sid)||null,{name:Lp.CONNECTION_STATE_CHANGE,options:[t,n,r],tag:Mp.TRACER}).onSuccess(JSON.stringify({cur:t,prev:n,reason:r})),tv.info("[".concat(e._clientId,"] connection state change: ").concat(n," -> ").concat(t)),"DISCONNECTED"===t)return e._reset(),void o();if("RECONNECTING"===t)e._users.forEach((function(e){e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._audioSSRC=void 0,e._videoSSRC=void 0,e._videoOrtc=void 0,e._audioOrtc=void 0,e._cname=void 0,e._rtxSsrcId=void 0})),e._userOfflineTimeout&&window.clearTimeout(e._userOfflineTimeout),e._streamRemovedTimeout&&window.clearTimeout(e._streamRemovedTimeout),e._userOfflineTimeout=void 0,e._streamRemovedTimeout=void 0;else if("CONNECTED"===t){var a;e._streamFallbackTypeCacheMap.forEach((function(t,n){e._gateway.setStreamFallbackOption(n,t).catch((function(t){tv.warning("[".concat(e._clientId,"] auto set stream fallback option failed"),t)}))})),e._remoteStreamTypeCacheMap.forEach((function(t,n){e._gateway.setRemoteVideoStreamType(n,t).catch((function(t){tv.warning("[".concat(e._clientId,"] auto set remote stream type failed"),t)}))})),void 0!==e._remoteDefaultVideoStreamType&&void 0===(null===(a=e._joinInfo)||void 0===a?void 0:a.defaultVideoStream)&&e.setRemoteDefaultVideoStreamType(e._remoteDefaultVideoStreamType).then((function(){tv.debug("[".concat(e._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))})).catch((function(t){tv.error("[".concat(e._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(t))})),e.store.useP2P||(e._p2pChannel.republish(),e._userOfflineTimeout=window.setTimeout((function(){"CONNECTED"===e.connectionState&&(e._userOfflineTimeout=void 0,e._users.filter((function(e){return!e._trust_in_room_})).forEach((function(t){tv.debug("[".concat(e._clientId,"] user offline timeout, emit user offline ").concat(t.uid)),e._handleUserOffline({uid:t.uid})})))}),3e3),e._streamRemovedTimeout=window.setTimeout((function(){"CONNECTED"===e.connectionState&&(e._streamRemovedTimeout=void 0,e._users.forEach((function(t){t._trust_audio_mute_state_||(tv.debug("[".concat(e._clientId,"] auto dispatch audio unmute event ").concat(t.uid)),e._handleMuteStream(t.uid,hm.AUDIO,!1)),t._trust_video_mute_state_||(tv.debug("[".concat(e._clientId,"] auto dispatch video unmute event ").concat(t.uid)),e._handleMuteStream(t.uid,hm.VIDEO,!1)),t._trust_audio_enabled_state_||(tv.debug("[".concat(e._clientId,"] auto dispatch enable local audio ").concat(t.uid)),e._handleSetStreamLocalEnable("audio",t.uid,!0)),t._trust_video_enabled_state_||(tv.debug("[".concat(e._clientId,"] auto dispatch enable local video ").concat(t.uid)),e._handleSetStreamLocalEnable("video",t.uid,!0)),t._trust_video_stream_added_state_||(tv.debug("[".concat(e._clientId,"] auto dispatch reset video stream added ").concat(t.uid)),e._handleResetAddStream(t,"video")),t._trust_audio_stream_added_state_||(tv.debug("[".concat(e._clientId,"] auto dispatch reset audio stream added ").concat(t.uid)),e._handleResetAddStream(t,"audio")),t._video_added_||t._audio_added_||(tv.debug("[".concat(e._clientId,"] auto dispatch stream remove ").concat(t.uid)),e._handleRemoveStream({uid:t.uid,uint_id:t._uintid}))})))}),1e3))}o()}})),this._gateway.on(nm.REQUEST_NEW_GATEWAY_LIST,(function(t,n){if(!e._joinInfo)return n(new Fv(ql.UNEXPECTED_ERROR,"can not recover, no join info"));Qw(e._joinInfo,e._axiosCancelSource.token,e._config.httpRetryConfig||Nf,e.store).then((function(n){e._joinInfo&&(e._joinInfo.apResponse=n.gatewayInfo.res,e._joinInfo.gatewayAddrs=n.gatewayInfo.gatewayAddrs,e._joinInfo.uni_lbs_ip=n.gatewayInfo.uni_lbs_ip);var r=[];n.gatewayInfo.gatewayAddrs.forEach((function(t){var n=t.address.split(":"),i=n[0],o=n[1];e._joinInfo&&e._joinInfo.proxyServer?r.push({proxy:e._joinInfo.proxyServer,host:i,port:o}):r.push({host:i,port:o})})),t(r)})).catch(n)})),this._gateway.on(nm.NETWORK_QUALITY,(function(t){"normal"===e._networkQualitySensitivity&&e.safeEmit(Vp.NETWORK_QUALITY,t)})),this._gateway.on(nm.STREAM_TYPE_CHANGE,(function(t,n){e.safeEmit(Vp.STREAM_TYPE_CHANGED,t,n),pv.reportApiInvoke(e._sessionId,{name:Lp.STREAM_TYPE_CHANGE,options:[t,n],tag:Mp.TRACER}).onSuccess(JSON.stringify({uid:t,streamType:n}))})),this._gateway.on(nm.IS_P2P_DISCONNECTED,(function(t){e._p2pChannel.isP2PDisconnected()?t(!0):e._p2pChannel.hasLocalMedia()||e._p2pChannel.hasRemoteMedia()?t(!1):t(!0)})),this._gateway.on(nm.NEED_RENEW_SESSION,(function(){e._startSession()})),this._gateway.on(nm.REQUEST_P2P_CONNECTION_PARAMS,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=r,t.next=4,e._p2pChannel.startP2PConnection(n);case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),i(t.t2);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._gateway.on(nm.JOIN_RESPONSE,(function(t,n){if(!e.store.useP2P){var r=GR(t.ortc,n),i=r.dtlsParameters,o=r.iceParameters,a=r.candidates,s=r.rtpCapabilities,c=r.setup,u=r.cname;e._p2pChannel.connect(o,i,a,s,c,u)}})),this._gateway.on(nm.REQUEST_DC_CONNECTION_PARAMS,(function(t){t(e._p2pChannel.getEstablishParams())})),this._gateway.on(nm.RESET_SIGNAL,(function(t){e._p2pChannel.resetConnection(t),e._handleGatewaySignalEvents()})),this._gateway.on(nm.DATACHANNEL_FAILBACK,(function(){e._joinGateway()})),this._gateway.on(nm.DATACHANNEL_PRECONNECT,function(){var t=d(c().mark((function t(n,r,i,o){var a,s,u,d,l,p,f;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.startP2PConnection({turnServer:null===(a=e._joinInfo)||void 0===a?void 0:a.turnServer},!0);case 2:return f=function(e,t){var n;return t&&t.ip&&"number"==typeof t.port?(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],tv.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),tv.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],n}(n,r),t.abrupt("return",e._p2pChannel.preConnect({iceUfrag:"".concat(null===(s=e._joinInfo)||void 0===s?void 0:s.apResponse.cid,"_").concat(null===(u=e._joinInfo)||void 0===u?void 0:u.apResponse.cert),icePwd:"".concat(null===(d=e._joinInfo)||void 0===d?void 0:d.apResponse.cid,"_").concat(null===(l=e._joinInfo)||void 0===l?void 0:l.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(p=W_("FINGERPRINT"))&&void 0!==p?p:n.fingerprint}]},f,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(i).catch(o));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}())},n._handleGatewaySignalEvents=function(){var e=this;this._gateway.signal.on(Iv.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Iv.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Iv.ON_ADD_AUDIO_STREAM,(function(t){return e._handleAddAudioOrVideoStream("audio",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc)})),this._gateway.signal.on(Iv.ON_ADD_VIDEO_STREAM,(function(t){return e._handleAddAudioOrVideoStream("video",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc,t.rtxSsrcId)})),this._gateway.signal.on(Iv.ON_REMOTE_DATASTREAM_UPDATE,(function(t){e._handleUpdateDataChannel(t)})),this._gateway.signal.on(Iv.ON_REMOTE_FULL_DATASTREAM_INFO,(function(t){e._handleUpdateDataChannel({added:t.datastreams,deleted:[]},!0)})),this._gateway.signal.on(Iv.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Iv.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Iv.MUTE_AUDIO,(function(t){return e._handleMuteStream(t.uid,hm.AUDIO,!0)})),this._gateway.signal.on(Iv.UNMUTE_AUDIO,(function(t){return e._handleMuteStream(t.uid,hm.AUDIO,!1)})),this._gateway.signal.on(Iv.MUTE_VIDEO,(function(t){return e._handleMuteStream(t.uid,hm.VIDEO,!0)})),this._gateway.signal.on(Iv.UNMUTE_VIDEO,(function(t){return e._handleMuteStream(t.uid,hm.VIDEO,!1)})),this._gateway.signal.on(Iv.RECEIVE_METADATA,(function(t){var n=hf(t.metadata);e.safeEmit(Vp.RECEIVE_METADATA,t.uid,n)})),this._gateway.signal.on(Iv.ON_DATA_STREAM,function(){var t=d(c().mark((function t(n){var r,i,o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:r=0,(n.ordered||n.syncWithAudio)&&(i=e._p2pChannel.getStats(),o=e.remoteUsers.find((function(e){return e.uid===n.uid})),a=null==i?void 0:i.audioRecv.find((function(e){return e.ssrc===(null==o?void 0:o._audioSSRC)})),r=null==a?void 0:a.jitterBufferMs),null==r&&(r=0),kA(n,r,{id:e._clientId,onStreamMessage:"function"==typeof e.onStreamMessage?e.onStreamMessage.bind(e):void 0,safeEmit:e.safeEmit.bind(e)});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this._gateway.signal.on(Iv.ON_CRYPT_ERROR,(function(){ff((function(){tv.warning("[".concat(e._clientId,"] on crypt error")),e.safeEmit(Vp.CRYPT_ERROR)}),e._sessionId)})),this._gateway.signal.on(Iv.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Iv.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(function(){tv.warning("[".concat(e._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),e._gateway.leave(!0,jp.TOKEN_EXPIRE),e.safeEmit(Vp.ON_TOKEN_PRIVILEGE_DID_EXPIRE),e._reset()})),this._gateway.signal.on(Iv.ON_STREAM_FALLBACK_UPDATE,(function(t){tv.debug("[".concat(e._clientId,"] stream fallback peerId: ").concat(t.stream_id,", attr: ").concat(t.stream_type)),e.safeEmit(Vp.STREAM_FALLBACK,t.stream_id,1===t.stream_type?"fallback":"recover")})),this._gateway.signal.on(Iv.ON_PUBLISH_STREAM,(function(t){e.uid===e._uid&&(e._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:t.proxy})),tv.info("[".concat(e._clientId,"] on publish stream, ").concat(JSON.stringify(t))))})),this._gateway.signal.on(Iv.ENABLE_LOCAL_VIDEO,(function(t){e._handleSetStreamLocalEnable("video",t.uid,!0)})),this._gateway.signal.on(Iv.DISABLE_LOCAL_VIDEO,(function(t){e._handleSetStreamLocalEnable("video",t.uid,!1)})),this._gateway.signal.on(Cv.REQUEST_TIMEOUT,(function(t,n){if(e._joinInfo)switch(t){case Ov.PUBLISH:if(!n)return;var r=n.ortc;if(r){var i,o,a=r.some((function(e){return e.stream_type===tm.Audio})),s=r.some((function(e){return e.stream_type!==tm.Audio})),c=r.some((function(e){var t=e.stream_type;return t===tm.Screen||t===tm.ScreenLow}));"offer"===n.state&&pv.publish(e._joinInfo.sid,{eventElapse:QT.measureFromPublishStart(e.store.clientId,e.store.pubId),succ:!1,ec:ql.TIMEOUT,audio:a,video:s,p2pid:n.p2p_id,publishRequestid:e.store.pubId,screenshare:c,audioName:a?null===(i=r.find((function(e){return e.stream_type===tm.Audio})))||void 0===i||null===(i=i.ssrcs[0])||void 0===i?void 0:i.ssrcId.toString():void 0,videoName:s?null===(o=r.find((function(e){return e.stream_type!==tm.Audio})))||void 0===o||null===(o=o.ssrcs[0])||void 0===o?void 0:o.ssrcId.toString():void 0})}break;case Ov.SUBSCRIBE:n&&pv.subscribe(e._joinInfo.sid,{succ:!1,ec:ql.TIMEOUT,audio:n.stream_type===hm.AUDIO,video:n.stream_type===hm.VIDEO,peerid:n.stream_id,subscribeRequestid:n.ssrcId,p2pid:e.store.p2pId,eventElapse:QT.measureFromSubscribeStart(e.store.clientId,n.ssrcId)})}})),this._gateway.signal.on(Iv.ON_P2P_OK,(function(t){e.uid,e._uid})),this._gateway.signal.on(Iv.ON_PUBLISHED_USER_LIST,(function(t){if(null!=t&&t.users){W_("BLOCK_LOCAL_CLIENT")&&(t.users=t.users.filter((function(t){return!mv(t.string_id||t.stream_id,e.channelName)})));for(var n,r=[],o=[],a=function(){var t=n.value,i=e._users.find((function(e){return e._uintid===t.stream_id}));i?i._trust_in_room_=!0:(i=new CR(t.string_id||t.stream_id,t.stream_id),e._users.push(i),0===e.getListeners(Vp.PUBLISHED_USER_LIST).length&&(tv.debug("[".concat(e._clientId,"] user online"),t.stream_id),e.safeEmit(Vp.USER_JOINED,i)));var a=im.Audio&t.stream_type,s=(im.Video|im.LwoVideo)&t.stream_type,c=0!=(65280&t.stream_type),u=a&&i.hasAudio,d=s&&i.hasVideo;s&&(i._trust_video_stream_added_state_=!0,i._video_added_=!0,i._videoSSRC=t.video_ssrc,i._rtxSsrcId=t.video_rtx),a&&(i._trust_audio_stream_added_state_=!0,i._audio_added_=!0,i._audioSSRC=t.audio_ssrc),a&&!u&&0===e.getListeners(Vp.PUBLISHED_USER_LIST).length&&(tv.info("[".concat(e._clientId,"] remote user ").concat(i.uid," published audio")),e.safeEmit(Vp.USER_PUBLISHED,i,"audio")),s&&!d&&0===e.getListeners(Vp.PUBLISHED_USER_LIST).length&&(tv.info("[".concat(e._clientId,"] remote user ").concat(i.uid," published video")),e.safeEmit(Vp.USER_PUBLISHED,i,"video")),(a&&!u||s&&!d||c)&&r.push(i),s&&e._p2pChannel.hasPendingRemoteMedia(i,"video")&&o.push({user:i,mediaType:"video"}),a&&e._p2pChannel.hasPendingRemoteMedia(i,"audio")&&o.push({user:i,mediaType:"audio"})},s=i(t.users);!(n=s()).done;)a();o.length>0&&(tv.debug("[".concat(e._clientId,"] RE massSubscribe after reconnect ").concat(o.map((function(e){return"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType)})).join("; ")," ")),e.massSubscribe(o).catch((function(t){tv.error("[".concat(e._clientId,"] mass resubscribe error"),t.toString())}))),e.getListeners(Vp.PUBLISHED_USER_LIST).length>0?W_("ENABLE_DATASTREAM_2")?e._pendingPublishedUsers=r:(tv.info("[".concat(e._clientId,"] client emit user-list event, users: ").concat(r.map((function(e){return e.uid})).join(", "))),e.safeEmit(Vp.PUBLISHED_USER_LIST,r)):tv.info("[".concat(e._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(r.map((function(e){return e.uid})).join(", ")))}})),this._gateway.signal.on(Iv.ON_RTP_CAPABILITY_CHANGE,(function(t){var n=t.video_codec;e._p2pChannel instanceof nO&&e._p2pChannel.updateRemoteRTPCapabilities(n.map((function(e){return e.toLowerCase()})).filter((function(e){var t;return Or(t=Object.keys(G_)).call(t,e)})))}))},n._handleP2PEvents=function(){var e=this;this._gateway.signal.on(Iv.ON_USER_OFFLINE,(function(){e._p2pChannel.disconnectForReconnect()})),this._gateway.signal.on(Nm.PUBLISH,function(){var t=d(c().mark((function t(n,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.forEach((function(t){return t.kind===hm.VIDEO?(e._handleP2PAddAudioOrVideoStream("video",r),t.isMuted?e._handleMuteStream(r,hm.VIDEO,!0):e._handleMuteStream(r,hm.VIDEO,!1)):(e._handleP2PAddAudioOrVideoStream("audio",r),t.isMuted?e._handleMuteStream(r,hm.AUDIO,!0):e._handleMuteStream(r,hm.AUDIO,!1))}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),this._gateway.signal.on(Cv.P2P_START,function(){var t=d(c().mark((function t(n,r){var i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._p2pChannel instanceof yA)){t.next=6;break}return t.t0=r,t.next=4,e._p2pChannel.startP2P({turnServer:null===(i=e._joinInfo)||void 0===i?void 0:i.turnServer},n);case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),this._gateway.signal.on(Cv.P2P_CONNECTION,function(){var t=d(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e._p2pChannel instanceof yA,!t.t0){t.next=4;break}return t.next=4,e._p2pChannel.p2pConnect(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this._gateway.signal.on(Cv.P2P_REMOTE_CANDIDATE_UPDATE,(function(t){e._p2pChannel instanceof yA&&e._p2pChannel.addRemoteCandidate(JSON.parse(t))})),this._gateway.signal.on(Nm.SUBSCRIBE,function(){var t=d(c().mark((function t(n,r,i){var o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._p2pChannel instanceof yA)){t.next=11;break}return o=JSON.parse(n),a=o.trackType,t.prev=2,t.next=5,e._p2pChannel.dopublish(a);case 5:r(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),i(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._gateway.signal.on(Nm.UNSUBSCRIBE,function(){var t=d(c().mark((function t(n,r,i){var o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._p2pChannel instanceof yA)){t.next=11;break}return o=JSON.parse(n),a=o.mediaType,t.prev=2,t.next=5,e._p2pChannel.doUnpublish(a);case 5:r(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),i(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._gateway.signal.on(Nm.EXCHANGE_SDP,function(){var t=d(c().mark((function t(n,r,i){var o,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._p2pChannel instanceof yA)){t.next=13;break}return o=JSON.parse(n),a=o.type,s=o.sdp,t.prev=2,t.t0=r,t.next=6,e._p2pChannel.setDescription(a,s);case 6:t.t1=t.sent,(0,t.t0)(t.t1),t.next=13;break;case 10:t.prev=10,t.t2=t.catch(2),i(t.t2);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._gateway.signal.on(Nm.UNPUBLISH,function(){var t=d(c().mark((function t(n,r,i){var o,a,s,u,d;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._p2pChannel instanceof yA)){t.next=17;break}if(o=n.unpubMsg,a=n.uid,1!==o.length){t.next=16;break}if(s=o[0].stream_type===tm.Audio?hm.AUDIO:hm.VIDEO,e._handleMuteStream(a,s,!0),u=n.sdp,!(e._p2pChannel instanceof yA&&u)){t.next=13;break}if(d=e._users.find((function(e){return e.uid===a}))){t.next=10;break}return t.abrupt("return",(tv.warning("[".concat(e._clientId,"] can not find remote user, ignore mute event, uid: ").concat(a)),void r()));case 10:e._p2pChannel.unsubscribe(d,u,s).then((function(e){e&&r(e)})).catch(i),t.next=14;break;case 13:r();case 14:t.next=17;break;case 16:e._handleRemoveStream(n,r,i);case 17:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),this._gateway.signal.on(Nm.CONTROL,function(){var t=d(c().mark((function t(n,r,i){var o,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n.action,a=n.sdp,s=n.isMuteAll,u=n.uid,t.t0=o,t.next=t.t0===Pm.MUTE_LOCAL_VIDEO?4:t.t0===Pm.MUTE_LOCAL_AUDIO?6:t.t0===Pm.UNMUTE_LOCAL_VIDEO?8:t.t0===Pm.UNMUTE_LOCAL_AUDIO?10:11;break;case 4:return e._handleMuteStream(u,hm.VIDEO,!0,a,r,i),t.abrupt("break",11);case 6:return r(),e._handleMuteStream(u,hm.AUDIO,!0),t.abrupt("break",11);case 8:return r(),e._handleP2PAddAudioOrVideoStream("video",u),e._handleMuteStream(u,hm.VIDEO,!1),t.abrupt("break",11);case 10:r(),e._handleP2PAddAudioOrVideoStream("audio",u),e._handleMuteStream(u,hm.AUDIO,!1);case 11:s&&e._handleRemoveStream(n,r,i);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),this._gateway.signal.on(Nm.DO_SUBSCRIBE,function(){var t=d(c().mark((function t(n,r,i){var o,a,s,u,d;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._p2pChannel instanceof yA)){t.next=15;break}if(o=n.kind,a=n.sdp,s=n.ssrcId,u=n.uid,d=e._users.find((function(e){return e.uid===u}))){t.next=4;break}return t.abrupt("return",(tv.error("[".concat(e._clientId,"] can not find target user!(on_add_stream)")),void r()));case 4:return t.prev=4,t.t0=r,t.next=8,e._p2pChannel.subscribe(d,o,a,s);case 8:t.t1=t.sent,(0,t.t0)(t.t1),t.next=15;break;case 12:t.prev=12,t.t2=t.catch(4),i(t.t2);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._gateway.signal.on(Nm.DO_UNSUBSCRIBE,function(){var t=d(c().mark((function t(n,r,i){var o,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._p2pChannel instanceof yA)){t.next=15;break}if(o=n.uid,a=n.kind,s=n.sdp,u=e._users.find((function(e){return e.uid===o}))){t.next=4;break}return t.abrupt("return",(tv.error("[".concat(e._clientId,"] can not find target user!(on_add_stream)")),void r()));case 4:return t.prev=4,t.t0=r,t.next=8,e._p2pChannel.unsubscribe(u,s,a);case 8:t.t1=t.sent,(0,t.t0)(t.t1),t.next=15;break;case 12:t.prev=12,t.t2=t.catch(4),i(t.t2);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._gateway.signal.on(Nm.RESTART_ICE,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._p2pChannel instanceof yA)){t.next=12;break}return t.prev=1,t.t0=r,t.next=5,e._p2pChannel.setDescription("remote",n);case 5:t.t1=t.sent,(0,t.t0)(t.t1),t.next=12;break;case 9:t.prev=9,t.t2=t.catch(1),i(t.t2);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.RequestP2PRestartICE,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=r,t.next=4,e._gateway.sendExtensionMessage(Nm.RESTART_ICE,n);case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),i(t.t2);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.LocalCandidate,(function(t){e._gateway.sendExtensionMessage(Nm.CANDIDATE,JSON.stringify(t))})),this._p2pChannel.on(Em.RequestP2PMuteLocal,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=r,t.next=4,e._gateway.sendExtensionMessage(Nm.CONTROL,n);case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),i(t.t2);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.RequestP2PPublish,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=r,t.next=4,e._gateway.sendExtensionMessage(Nm.DO_SUBSCRIBE,n);case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),i(t.t2);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.RequestP2PUnPublish,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=r,t.next=4,e._gateway.sendExtensionMessage(Nm.DO_UNSUBSCRIBE,n);case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),i(t.t2);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.RequestP2PUnmuteRemote,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._joinInfo){t.next=12;break}return t.prev=1,t.next=4,e._gateway.unmuteRemote(n,e._joinInfo.stringUid||e._joinInfo.uid);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.code===ql.DISCONNECT_P2P?r():i(t.t0);case 10:t.next=13;break;case 12:r();case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.RequestP2PMuteRemote,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._joinInfo){t.next=12;break}return t.prev=1,t.next=4,e._gateway.muteRemote(n,e._joinInfo.stringUid||e._joinInfo.uid);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.code===ql.DISCONNECT_P2P?r():i(t.t0);case 10:t.next=13;break;case 12:r();case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.StateChange,(function(t,n){n===gm.Connected&&e._p2pChannel.republish()}))},n._handleP2PChannelEvents=function(){var e=this;this._p2pChannel.on(Em.RequestMuteLocal,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._joinInfo){t.next=12;break}return t.prev=1,t.next=4,e._gateway.muteLocal(n,e._joinInfo.stringUid||e._joinInfo.uid);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.code===ql.DISCONNECT_P2P?r():i(t.t0);case 10:t.next=13;break;case 12:r();case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.RequestUnmuteLocal,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._joinInfo){t.next=12;break}return t.prev=1,t.next=4,e._gateway.unmuteLocal(n,e._joinInfo.stringUid||e._joinInfo.uid);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.code===ql.DISCONNECT_P2P?r():i(t.t0);case 10:t.next=13;break;case 12:r();case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.RequestRePublish,(function(t,n,r){e.publish(t,!1).then(n).catch(r)})),this._p2pChannel.on(Em.RequestRePublishDataChannel,(function(t,n,r){Vl.all(t.map(function(){var t=d(c().mark((function t(n){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.publishDataChannel([n]);case 2:return r={streamId:n.id,ordered:n.ordered,maxRetransmits:n.maxRetransmits,metadata:n.metadata,channelId:n._originDataChannelId},t.prev=3,t.next=6,e._gateway.publishDataChannel(e._uid,r,!0);case 6:t.next=12;break;case 8:if(t.prev=8,t.t0=t.catch(3),t.t0.code===ql.DISCONNECT_P2P){t.next=12;break}throw t.t0;case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}())).then(n).catch(r)})),this._p2pChannel.on(Em.RequestReSubscribe,function(){var t=d(c().mark((function t(n,r,o){var a,s,u,d;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=i(n);case 2:if((s=a()).done){t.next=13;break}if(u=s.value,d=u.user,u.kind!==hm.VIDEO){t.next=9;break}return t.next=7,e.subscribe(d,"video");case 7:t.next=11;break;case 9:return t.next=11,e.subscribe(d,"audio");case 11:t.next=2;break;case 13:r(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),o(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.RequestUploadStats,(function(t,n){e._gateway.uploadStats(t,n)})),this._p2pChannel.on(Em.MediaReconnectStart,(function(t){e.safeEmit(Vp.MEDIA_RECONNECT_START,t)})),this._p2pChannel.on(Em.MediaReconnectEnd,(function(t){e.safeEmit(Vp.MEDIA_RECONNECT_END,t)})),this._p2pChannel.on(Em.NeedSignalRTT,(function(t){t(e._gateway.getSignalRTT())})),this._p2pChannel.on(Em.RequestRestartICE,function(){var t=d(c().mark((function t(n){var r,i,o,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._p2pChannel instanceof yA)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e._p2pChannel.restartICE(n);case 4:return r=t.sent,t.next=7,r.next();case 7:if(!(i=t.sent).done){t.next=10;break}return t.abrupt("return");case 10:return o=i.value,t.prev=11,t.next=14,e._gateway.restartICE({iceParameters:o});case 14:a=t.sent,t.next=20;break;case 17:return t.prev=17,t.t0=t.catch(11),t.abrupt("return",void r.throw(t.t0));case 20:return s=function(e){var t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(a),u=s.iceParameters,t.next=23,r.next({remoteIceParameters:u});case 23:case"end":return t.stop()}}),t,null,[[11,17]])})));return function(e){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.RequestReconnect,d(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._gateway.reconnect();case 1:case"end":return t.stop()}}),t)})))),this._p2pChannel.on(Em.RequestReconnectPC,d(c().mark((function t(){var n,r,i,o,a,s,u,d,l,p,f,h,_,v,m;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.startP2PConnection({turnServer:null===(n=e._joinInfo)||void 0===n?void 0:n.turnServer});case 2:return r=t.sent,i=r.iceParameters,o=r.dtlsParameters,a=r.rtpCapabilities,t.next=8,e._gateway.reconnectPC({iceParameters:i,dtlsParameters:o,rtpCapabilities:a});case 8:return s=t.sent,u=s.gatewayEstablishParams,d=s.gatewayAddress,l=GR(u,d),p=l.dtlsParameters,f=l.iceParameters,h=l.candidates,_=l.rtpCapabilities,v=l.setup,m=l.cname,t.next=20,e._p2pChannel.connect(f,p,h,_,v,m);case 20:return t.next=22,e._p2pChannel.republish();case 22:return t.next=24,e._p2pChannel.reSubscribe();case 24:case"end":return t.stop()}}),t)})))),this._p2pChannel.on(Em.RequestUnpublishForReconnectPC,function(){var t=d(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._joinInfo||void 0===e._uid){t.next=6;break}return t.next=3,e._gateway.unpublish(n,e._uid);case 3:r(),t.next=7;break;case 6:i();case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Em.P2PLost,(function(){e.safeEmit(Vp.P2P_LOST,e.store.uid)})),this._p2pChannel.on(Em.UpdateVideoEncoder,(function(t){t._encoderConfig&&e._gateway.setVideoProfile(t._encoderConfig)})),this._p2pChannel.on(Em.ConnectionTypeChange,(function(t){e.safeEmit(Vp.IS_USING_CLOUD_PROXY,t)})),this._p2pChannel.on(Em.RequestLowStreamParameter,(function(t){t(e._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(Em.QueryClientConnectionState,(function(t){t(e.connectionState)}))},n.getKeyMetrics=function(){return this.store.keyMetrics},n.enableContentInspect=function(){var e=d(c().mark((function e(t){var n,r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.connectionState&&this._joinInfo){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));case 2:if(!this._inspect){e.next=4;break}throw new Fv(ql.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));case 4:if(t){e.next=6;break}throw new Fv(ql.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));case 6:if(t.inspectType&&Array.isArray(t.inspectType)){e.next=8;break}throw new Fv(ql.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));case 8:if((n=[].concat(new Set(t.inspectType))).forEach((function(e){var t;if(!Or(t=["supervise","moderation"]).call(t,e))throw new Fv(ql.INVALID_PARAMS,"[".concat(i._clientId,"] ").concat(e," is not a valid inspect type."))})),t.inspectType=n,!(t&&t.extraInfo&&t.extraInfo.length>1024)){e.next=12;break}throw new Fv(ql.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));case 12:return e.prev=12,r=new DO(t),this._inspect=r,this.handleVideoInspectEvents(this._inspect),e.next=18,r.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},Nf);case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(12),Array.isArray(e.t0)?e.t0[0]:e.t0;case 23:case"end":return e.stop()}}),e,this,[[12,20]])})));return function(t){return e.apply(this,arguments)}}(),n.disableContentInspect=function(){var e=d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._inspect){e.next=2;break}throw new Fv(ql.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));case 2:e.prev=2,this._inspect.close(),this._inspect=void 0,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),Array.isArray(e.t0)?e.t0[0]:e.t0;case 9:case"end":return e.stop()}}),e,this,[[2,6]])})));return function(){return e.apply(this,arguments)}}(),n.setImageModeration=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tp(t,"enabled"),!t){e.next=20;break}if(n){e.next=3;break}throw new Fv(ql.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));case 3:if(Rp(n.interval,"interval",1e3,1/0),"CONNECTED"===this.connectionState&&this._joinInfo){e.next=5;break}throw new Fv(ql.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));case 5:if(e.prev=5,!this._moderation){e.next=8;break}return e.abrupt("return",void this._moderation.updateConfig(n));case 8:return r=new pA(n),this._moderation=r,this.handleImageModerationEvents(this._moderation),e.next=13,r.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},Nf);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(5),Array.isArray(e.t0)?e.t0[0]:e.t0;case 18:e.next=29;break;case 20:if(this._moderation){e.next=22;break}throw new Fv(ql.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));case 22:e.prev=22,this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0,e.next=29;break;case 26:throw e.prev=26,e.t1=e.catch(22),Array.isArray(e.t1)?e.t1[0]:e.t1;case 29:case"end":return e.stop()}}),e,this,[[5,15],[22,26]])})));return function(t,n){return e.apply(this,arguments)}}(),n.handleImageModerationEvents=function(e){var t=this;e.on(Im.CONNECTION_STATE_CHANGE,(function(n,r){if(t.safeEmit(Vp.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,n,r),n===Am.CONNECTED){if("CONNECTED"!==t.connectionState)throw t.setImageModeration(!1),new Fv(ql.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}})),e.on(Im.CLIENT_LOCAL_VIDEO_TRACK,(function(e){e(t.localTracks.filter((function(e){return"video"===e.trackMediaType}))[0])}))},n.handleVideoInspectEvents=function(e){var t=this;e.on(Tm.CONNECTION_STATE_CHANGE,(function(n,r){if(t.safeEmit(Vp.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,n,r),r===bm.CONNECTED){if("CONNECTED"!==t.connectionState)return void t.safeEmit(Vp.CONTENT_INSPECT_ERROR,new Fv(ql.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}})),e.on(Tm.INSPECT_RESULT,(function(e,n){var r;if((null==n?void 0:n.code)===ql.INVALID_OPERATION&&"DISCONNECTED"===t.connectionState)return tv.debug("Stop inspect content because that has left channel"),null==t||null===(r=t._inspect)||void 0===r||r.close(),void(t._inspect=void 0);t.safeEmit(Vp.CONTENT_INSPECT_RESULT,e,n)})),e.on(Tm.CLIENT_LOCAL_VIDEO_TRACK,(function(e){e(t.localTracks.filter((function(e){return"video"===e.trackMediaType}))[0])}))},n.getJoinChannelServiceRecords=function(){return tv.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords},n.setPublishAudioFilterEnabled=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tp(t,"enabled"),F_("ENABLE_PUBLISH_AUDIO_FILTER",t),e.t0=this._joinInfo,!e.t0){e.next=6;break}return e.next=6,this._gateway.setPublishAudioFilterEnabled(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n._handleResetAddStream=function(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}},s(t,[{key:"connectionState",get:function(){return this._gateway.state}},{key:"remoteUsers",get:function(){return this._users}},{key:"localTracks",get:function(){return this._p2pChannel.getAllTracks(!0)}},{key:"uid",get:function(){return this._uid}},{key:"channelName",get:function(){return this._channelName}},{key:"localDataChannels",get:function(){return this._p2pChannel.getAllDataChannels()}},{key:"mode",get:function(){return this._config.mode}},{key:"role",get:function(){var e;return(null===(e=this._config)||void 0===e?void 0:e.role)||"audience"}},{key:"codec",get:function(){return this._config.codec}},{key:"audioCodec",get:function(){return this._config.audioCodec||"opus"}},{key:"isStringUID",get:function(){return!!this._joinInfo&&!!this._joinInfo.stringUid}},{key:"__className__",get:function(){return"Client"}}]),t}(Kp);Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Vl)],LA.prototype,"leave",null),Vv([lv({argsMap:function(e,t){if(!Array.isArray(t)){if(!(t instanceof tE))return[t];t=[t]}return t.map((function(e){return e?Object(e).toString():"null"}))}}),Bv("design:type",Function),Bv("design:paramtypes",[Object,Boolean]),Bv("design:returntype",Vl)],LA.prototype,"publish",null),Vv([lv({argsMap:function(e,t){return t||(t=[]),t instanceof qT?[t.getChannelId()]:(Array.isArray(t)||(t=[t]),t.map((function(e){return e.getTrackId()})))}}),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Vl)],LA.prototype,"unpublish",null),Vv([lv({argsMap:function(e,t,n,r){return[t.uid,n,r]}}),Bv("design:type",Function),Bv("design:paramtypes",[CR,String,Number]),Bv("design:returntype",Vl)],LA.prototype,"subscribe",null),Vv([lv({argsMap:function(e,t){return t.map((function(e){var t=e.user,n=e.mediaType;return[null==t?void 0:t.uid,n]}))}}),Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],LA.prototype,"massSubscribe",null),Vv([lv({argsMap:function(e,t,n,r){return[t.uid,n,r]}}),Bv("design:type",Function),Bv("design:paramtypes",[CR,String,Number]),Bv("design:returntype",Vl)],LA.prototype,"unsubscribe",null),Vv([lv({argsMap:function(e,t){return t.map((function(e){var t=e.user,n=e.mediaType;return{uid:null==t?void 0:t.uid,mediaType:n}}))}}),Bv("design:type",Function),Bv("design:paramtypes",[Array]),Bv("design:returntype",Vl)],LA.prototype,"massUnsubscribe",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Vl)],LA.prototype,"setLowStreamParameter",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Vl)],LA.prototype,"enableDualStream",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Vl)],LA.prototype,"disableDualStream",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[String,Object]),Bv("design:returntype",Vl)],LA.prototype,"setClientRole",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[String,Boolean]),Bv("design:returntype",void 0)],LA.prototype,"setProxyServer",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Object,Boolean]),Bv("design:returntype",void 0)],LA.prototype,"setTurnServer",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",void 0)],LA.prototype,"setLicense",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Number]),Bv("design:returntype",void 0)],LA.prototype,"startProxyServer",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],LA.prototype,"stopProxyServer",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",void 0)],LA.prototype,"setLocalAccessPointsV2",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Array,String]),Bv("design:returntype",void 0)],LA.prototype,"setLocalAccessPoints",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Number]),Bv("design:returntype",Vl)],LA.prototype,"setRemoteDefaultVideoStreamType",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Object,Number]),Bv("design:returntype",Vl)],LA.prototype,"setRemoteVideoStreamType",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Object,Number]),Bv("design:returntype",Vl)],LA.prototype,"setStreamFallbackOption",null),Vv([lv({argsMap:function(e,t){return[t]}}),Bv("design:type",Function),Bv("design:paramtypes",[String,String,Uint8Array]),Bv("design:returntype",void 0)],LA.prototype,"setEncryptionConfig",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],LA.prototype,"renewToken",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",void 0)],LA.prototype,"enableAudioVolumeIndicator",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[String,Boolean]),Bv("design:returntype",Vl)],LA.prototype,"startLiveStreaming",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Vl)],LA.prototype,"setLiveTranscoding",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[String]),Bv("design:returntype",Vl)],LA.prototype,"stopLiveStreaming",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[String,Object]),Bv("design:returntype",Vl)],LA.prototype,"addInjectStreamUrl",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Vl)],LA.prototype,"removeInjectStreamUrl",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[SR]),Bv("design:returntype",Vl)],LA.prototype,"startChannelMediaRelay",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[SR]),Bv("design:returntype",Vl)],LA.prototype,"updateChannelMediaRelay",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Vl)],LA.prototype,"stopChannelMediaRelay",null),Vv([lv({argsMap:function(e,t){return Array.isArray(t)||(t=[t]),[JSON.stringify(t)]}}),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Vl)],LA.prototype,"sendCustomReportMessage",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Object,Object]),Bv("design:returntype",Vl)],LA.prototype,"pickSVCLayer",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Number]),Bv("design:returntype",Vl)],LA.prototype,"setRTM2Flag",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Object]),Bv("design:returntype",Vl)],LA.prototype,"enableContentInspect",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Vl)],LA.prototype,"disableContentInspect",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Boolean,Object]),Bv("design:returntype",Vl)],LA.prototype,"setImageModeration",null),Vv([lv({reportResult:!0}),Bv("design:type",Function),Bv("design:paramtypes",[]),Bv("design:returntype",Array)],LA.prototype,"getJoinChannelServiceRecords",null),Vv([lv(),Bv("design:type",Function),Bv("design:paramtypes",[Boolean]),Bv("design:returntype",Vl)],LA.prototype,"setPublishAudioFilterEnabled",null);var MA=function(){function e(t,n){uc(this,"id",0),uc(this,"element",void 0),uc(this,"peerPair",void 0),uc(this,"context",void 0),uc(this,"audioPlayerElement",void 0),uc(this,"audioTrack",void 0),e.count+=1,this.id=e.count,this.element=t,this.context=n}var t=e.prototype;return t.initPeers=function(){var e=this;this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=function(t){var n=document.createElement("audio");n.srcObject=new MediaStream([t.track]),n.play(),e.audioPlayerElement=n}},t.switchSdp=function(){var e=d(c().mark((function e(){var t,n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerPair){e.next=2;break}return e.abrupt("return");case 2:return t=function(){var e=d(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("offer"!==n){e.next=6;break}return e.next=3,t.createOffer();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,t.createAnswer();case 8:e.t0=e.sent;case 9:return r=e.t0,e.next=12,t.setLocalDescription(r);case 12:return e.abrupt("return","complete"===t.iceGatheringState?t.localDescription:new Vl((function(e){t.onicegatheringstatechange=function(){"complete"===t.iceGatheringState&&e(t.localDescription)}})));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n=function(){var e=d(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setRemoteDescription(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=3,e.next=6,t(this.peerPair[0],"offer");case 6:return r=e.sent,e.next=9,n(this.peerPair[1],r);case 9:return e.next=11,t(this.peerPair[1],"answer");case 11:return i=e.sent,e.next=14,n(this.peerPair[0],i);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(3),new Fv(ql.LOCAL_AEC_ERROR,e.t0.toString()).print();case 19:case"end":return e.stop()}}),e,this,[[3,16]])})));return function(){return e.apply(this,arguments)}}(),t.getTracksFromMediaElement=function(){var e=d(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.audioTrack){e.next=2;break}return e.abrupt("return",this.audioTrack);case 2:e.prev=2,t instanceof HTMLVideoElement&&(t.captureStream?t.captureStream():t.mozCaptureStream()),n=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(t).connect(n),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new Fv(ql.LOCAL_AEC_ERROR,e.t0.toString()).print();case 10:if(n){e.next=12;break}throw new Fv(ql.LOCAL_AEC_ERROR,"no dest node when local aec").print();case 12:return r=n.stream.getAudioTracks()[0],e.abrupt("return",(this.audioTrack=r,r));case 14:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),t.getElement=function(){return this.element},t.startEchoCancellation=function(){var e=d(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.context.resume(),this.peerPair&&this.close(),this.initPeers(),t=this.element,e.next=4,this.getTracksFromMediaElement(t);case 4:return n=e.sent,this.peerPair&&this.peerPair[0].addTrack(n),e.next=8,this.switchSdp();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.close=function(){tv.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((function(e){e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0},e}();uc(MA,"count",0);var UA=window.AudioContext||window.webkitAudioContext,jA=function(){function e(){uc(this,"units",[]),uc(this,"context",void 0)}var t=e.prototype;return t.processExternalMediaAEC=function(e){if(!this._doesEnvironmentNeedAEC())return tv.debug("the system does not need to process local aec"),-1;this.context||(this.context=new UA);var t=this.units.find((function(t){return t&&t.getElement()===e}));return t||(t=new MA(e,this.context),this.units.push(t)),t.startEchoCancellation(),tv.debug("start processing local audio echo cancellation, id is",t.id),t.id},t._doesEnvironmentNeedAEC=function(){return Zl().name!==Gl.SAFARI},e}();Vv([lv({report:pv}),Bv("design:type",Function),Bv("design:paramtypes",[HTMLAudioElement]),Bv("design:returntype",Number)],jA.prototype,"processExternalMediaAEC",null);var VA=new jA;function BA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BA(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var WA=window||document;function GA(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(WA){var n=ZA._cspEventHandlerPointer;if(n&&t)console.error(n,t);else{var r=function(e){if(e&&e.blockedURI&&(ZA.onSecurityPolicyViolation||ZA.getListeners(Cm.SECURITY_POLICY_VIOLATION).length>0)){var t=e.blockedURI;W_("CSP_DETECTED_HOSTNAME_LIST").some((function(e){return Or(t).call(t,e)}))&&(ZA.onSecurityPolicyViolation&&"function"==typeof ZA.onSecurityPolicyViolation&&ZA.onSecurityPolicyViolation(e),ZA.getListeners(Cm.SECURITY_POLICY_VIOLATION).length>0&&ZA.safeEmit(Cm.SECURITY_POLICY_VIOLATION,e))}};n&&WA.removeEventListener("securitypolicyviolation",n),(t||e&&"function"==typeof e||ZA.getListeners(Cm.SECURITY_POLICY_VIOLATION).length>0)&&WA.addEventListener("securitypolicyviolation",r),ZA._cspEventHandlerPointer=r}}}F_("PROCESS_ID","process-".concat(yf(8,""),"-").concat(yf(4,""),"-").concat(yf(4,""),"-").concat(yf(4,""),"-").concat(yf(12,""))),function(){var e=Zl();lE.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),lE.getStreamFromExtension=e.name===Gl.CHROME&&Number(e.version)>34,lE.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var e=new RTCPeerConnection,t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),lE.supportMinBitrate=e.name===Gl.CHROME||e.name===Gl.EDGE,lE.supportSetRtpSenderParameters=function(){var e=Zl();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!mp()||!(!rp()&&!tp())||e.name===Gl.FIREFOX&&Number(e.version)>=64)}(),e.name===Gl.SAFARI&&(Number(e.version)>=14?lE.supportDualStream=!0:lE.supportDualStream=!1),lE.webAudioMediaStreamDest=function(){var e=Zl();return!(e.name===Gl.SAFARI&&Number(e.version)<12)}(),lE.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,lE.supportWebGL="undefined"!=typeof WebGLRenderingContext,lE.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,mp()||(lE.webAudioWithAEC=!0),lE.supportShareAudio=function(){var e=Zl();return(e.os===Wl.WIN_10||e.os===Wl.WIN_81||e.os===Wl.WIN_7||e.os===Wl.LINUX||e.os===Wl.MAC_OS)&&e.name===Gl.CHROME&&Number(e.version)>=74}(),lE.supportDataChannel=!!(ap(76)||function(e){var t=Zl();return!(t.name!==Gl.FIREFOX||!t.osVersion)&&Number(t.version)>=68}()||function(e){var t=Zl();return!(t.name!==Gl.SAFARI||!t.osVersion)&&Number(t.version)>=14}()),lE.supportPCSetConfiguration=function(){var e=window.RTCPeerConnection;return!ip()&&!!e&&e.prototype.setConfiguration instanceof Function}(),lE.supportWebRTCEncodedTransform=function(){var e=Zl();return"Chrome"===e.name&&Number(e.version)>=86}(),lE.supportWebRTCInsertableStream=function(){var e=Zl();return(e.name===Gl.CHROME||e.name===Gl.EDGE)&&Number(e.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),uf((function(){lE.supportDualStreamEncoding=function(){var e=Zl();return!!W_("DISABLE_WEBAUDIO")||"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&W_("CHROME_DUAL_STREAM_USE_ENCODING"))}(),tv.info("browser compatibility",JSON.stringify(lE),JSON.stringify(e))}))}(),function(){var e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void tv.error("Error loading sdk config",e.message)}if(e)try{var t=JSON.parse(window.atob(e)),n=Date.now();tv.debug("Loading global parameters from cache",t),Object.keys(t).forEach((function(e){if(Object.prototype.hasOwnProperty.call(B_,e)){var r=t[e],i=r.value,o=r.expires;if(o&&o<=n)return;z_[e]=i,B_[e]=i}}))}catch(t){tv.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(z_.AREAS)&&z_.AREAS.length>0&&Lw(z_.AREAS,!0);var HA,zA,KA,YA,qA,JA,XA,QA,ZA=function(e){var t=new Kp,n=e,r={getListeners:t.getListeners.bind(t),on:function(e,n){return function(e,t){e===Cm.SECURITY_POLICY_VIOLATION&&GA(t,!0)}(e,n),t.on.bind(t)(e,n)},addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return FA(FA({},n),r)}({__TRACK_LIST__:Bg,VERSION:U_,BUILD:V_,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:function(e,t,n){tv.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),F_(e,t,n)},getParameter:W_,getSupportedCodec:(QA=d(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={audio:[],video:[]},e.prev=1,(n=new RTCPeerConnection).addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"}),e.next=6,n.createOffer();case 6:if(r=e.sent.sdp){e.next=9;break}return e.abrupt("return",t);case 9:n.close(),n=null,t=function(e){var t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ H265/i)&&t.video.push("H265"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(r),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(1),new Fv(ql.CREATE_OFFER_FAILED,e.t0.toString&&e.t0.toString()).print();case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),function(){return QA.apply(this,arguments)}),checkSystemRequirements:function(){var e=pv.reportApiInvoke(null,{name:Lp.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Mp.TRACER}),t=!1;try{var n=window.RTCPeerConnection,r=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,i=window.WebSocket;t=!!(n&&r&&i)}catch(e){return tv.error("check system requirement failed: ",e),!1}var o=!1,a=Zl();a.name===Gl.CHROME&&Number(a.version)>=58&&(!("WebKit"===Xl.engine.name)||function(){var e=Zl();if(tp()){if(e.os===Wl.MAC_OS)return!0;if(e.os===Wl.IOS){var t=Xl.os.version&&Xl.os.version.split(".");if(t&&14===Number(t[0])&&t[1]&&Number(t[1])>=3)return!0;if(t&&Number(t[0])>14)return!0}}return!1}())&&(o=!0),a.name===Gl.FIREFOX&&Number(a.version)>=56&&(o=!0),a.name===Gl.OPERA&&Number(a.version)>=45&&(o=!0),a.name===Gl.SAFARI&&Number(a.version)>=11&&(o=!0),(_p()||Zl().name===Gl.QQ)&&(o=!0),tv.debug("checkSystemRequirements, api:",t,"browser",o);var s=t&&o;return e.onSuccess(s),s},getDevices:function(e){return PE.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return PE.getRecordingDevices(e)},getCameras:function(e){return PE.getCamerasDevices(e)},getElectronScreenSources:yE,getPlaybackDevices:function(e){return PE.getSpeakers(e)},createClient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"},t=pv.reportApiInvoke(null,{name:Lp.CREATE_CLIENT,options:[e],tag:Mp.TRACER});try{!function(e){wp(e.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),wp(e.mode,"config.mode",["rtc","live"]),void 0!==e.audioCodec&&wp(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&Op(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&Qp(e.turnServer),void 0!==e.httpRetryConfig&&Jp(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&Jp(e.websocketRetryConfig)}(e)}catch(e){throw t.onError(e),e}return PA()||("vp9"===e.codec&&(e.codec="vp8",tv.debug("browser not support vp9, force use vp8")),F_("UNSUPPORTED_VIDEO_CODEC",["vp9"])),void 0===e.audioCodec&&(e.audioCodec="opus"),t.onSuccess(),new LA(xA(xA({forceWaitGatewayResponse:!0},e),{},{role:"rtc"===e.mode?"host":e.role||"audience"}))},createCameraVideoTrack:(XA=d(c().mark((function e(){var t,n,r,i,o,a,s,u,d=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},n=pv.reportApiInvoke(null,{tag:Mp.TRACER,name:Lp.CREATE_CAM_VIDEO_TRACK,options:[Oy({},t)]}),r=oy(t),i=yf(8,"track-cam-"),o=null,a="720p_auto"===t.encoderConfig,tv.info("start create camera video track with config",JSON.stringify(t),"trackId",i),e.prev=5,e.next=8,CE({video:r},i);case 8:if(e.t0=e.sent.getVideoTracks()[0],e.t0){e.next=11;break}e.t0=null;case 11:o=e.t0,e.next=17;break;case 14:throw e.prev=14,e.t1=e.catch(5),n.onError(e.t1),e.t1;case 17:if(o){e.next=20;break}return s=new Sp(ql.UNEXPECTED_ERROR,"can not find track in media stream"),e.abrupt("return",(n.onError(s),s.throw(tv)));case 20:return t.optimizationMode&&Ay(i,o,t,Rg(t.encoderConfig)),u=new Ry(o,t,r,t.scalabiltyMode?Og(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,i),e.abrupt("return",(a&&u.startMonitorStats(),n.onSuccess(u.getTrackId()),tv.info("create camera video success, trackId:",i),u));case 23:case"end":return e.stop()}}),e,null,[[5,14]])}))),function(){return XA.apply(this,arguments)}),createCustomVideoTrack:function(e){var t=pv.reportApiInvoke(null,{tag:Mp.TRACER,name:Lp.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new wy(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?Og(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,yf(8,"track-cus-"),[Ng.CUSTOM_TRACK]);return t.onSuccess(n.getTrackId()),tv.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:(JA=d(c().mark((function e(){var t,n,r,i,o,a,s,u,d,l,p,f,h,_,v,m=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:{},n=m.length>1&&void 0!==m[1]?m[1]:"disable",r=pv.reportApiInvoke(null,{tag:Mp.TRACER,name:Lp.CREATE_SCREEN_VIDEO_TRACK,options:[Oy({},t),n]}),i="720p_auto"===t.encoderConfig,t.encoderConfig?"string"==typeof t.encoderConfig||t.encoderConfig.width&&t.encoderConfig.height||(t.encoderConfig.width={max:1920},t.encoderConfig.height={max:1080}):t.encoderConfig="1080p_2",o=function(e){var t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&np()&&(t.extensionId=e.extensionId);var n=e.displaySurface,r=e.selfBrowserSurface,i=e.surfaceSwitching,o=e.systemAudio;(ap(107)||sp(107)||cp(93))&&(n&&(wp(n,"displaySurface",["browser","window","monitor"]),t.displaySurface=n),r?(wp(r,"selfBrowserSurface",["exclude","include"]),t.selfBrowserSurface=r):t.selfBrowserSurface="include",i&&(wp(i,"surfaceSwitching",["exclude","include"]),t.surfaceSwitching=i)),(ap(105)||sp(105)||cp(91))&&o&&(wp(o,"systemAudio",["exclude","include"]),t.systemAudio=o),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);var a=e.encoderConfig?Cg(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:a?a.width:void 0,maxHeight:a?a.height:void 0},a&&(a.frameRate&&("number"==typeof a.frameRate?(t.mandatory.maxFrameRate=a.frameRate,t.mandatory.minFrameRate=a.frameRate):(t.mandatory.maxFrameRate=a.frameRate.max||a.frameRate.ideal||a.frameRate.exact||void 0,t.mandatory.minFrameRate=a.frameRate.min||a.frameRate.ideal||a.frameRate.exact||void 0),t.frameRate=a.frameRate),a.width&&(t.width=a.width),a.height&&(t.height=a.height)),t}(t),a=yf(8,"track-scr-v-"),s=null,u=null,(d=pE()).supportShareAudio||"enable"!==n){e.next=9;break}return l=new Sp(ql.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio"),e.abrupt("return",(r.onError(l),l.throw(tv)));case 9:return tv.info("start create screen video track with config",t,"withAudio",n,"trackId",a),e.prev=10,e.next=13,CE({screen:o,screenAudio:"auto"===n?d.supportShareAudio:"enable"===n},a);case 13:p=e.sent,s=p.getVideoTracks()[0]||null,u=p.getAudioTracks()[0]||null,e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(10),r.onError(e.t0),e.t0;case 20:if(s){e.next=23;break}return f=new Sp(ql.UNEXPECTED_ERROR,"can not find track in media stream"),e.abrupt("return",(r.onError(f),f.throw(tv)));case 23:if(u||"enable"!==n){e.next=27;break}return s&&s.stop(),h=new Sp(ql.SHARE_AUDIO_NOT_ALLOWED),e.abrupt("return",(r.onError(h),h.throw(tv)));case 27:if(t.optimizationMode||(t.optimizationMode="detail"),t.optimizationMode&&(Ay(a,s,t,t.encoderConfig&&Cg(t.encoderConfig)||void 0),t.encoderConfig&&"string"!=typeof t.encoderConfig&&(t.encoderConfig.bitrateMin=t.encoderConfig.bitrateMax)),_=new wy(s,t.encoderConfig?Cg(t.encoderConfig):{},t.scalabiltyMode?Og(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,a,[Ng.SCREEN_TRACK]),i&&_.startMonitorStats(),u){e.next=31;break}return e.abrupt("return",(r.onSuccess(_.getTrackId()),tv.info("create screen video track success","video:",_.getTrackId()),_));case 31:return v=new ty(u,void 0,yf(8,"track-scr-a-"),!1,!0),e.abrupt("return",(r.onSuccess([_.getTrackId(),v.getTrackId()]),tv.info("create screen video track success","video:",_.getTrackId(),"audio:",v.getTrackId()),[_,v]));case 33:case"end":return e.stop()}}),e,null,[[10,17]])}))),function(){return JA.apply(this,arguments)}),createMicrophoneAndCameraTracks:(qA=d(c().mark((function e(){var t,n,r,i,o,a,s,u,d,l,p,f,h,_,v=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},n=v.length>1&&void 0!==v[1]?v[1]:{},r=pv.reportApiInvoke(null,{tag:Mp.TRACER,name:Lp.CREATE_MIC_AND_CAM_TRACKS,options:[t,n]}),i="720p_auto"===n.encoderConfig,o=oy(n),a=ay(t),s=yf(8,"track-mic-"),u=yf(8,"track-cam-"),d=null,l=null,tv.info("start create camera video track(".concat(u,") and microphone audio track(").concat(s,") with config, audio: ").concat(JSON.stringify(t),", video: ").concat(JSON.stringify(n))),e.prev=4,e.next=7,CE({audio:a,video:o},"".concat(s,"-").concat(u));case 7:p=e.sent,d=p.getAudioTracks()[0],l=p.getVideoTracks()[0],e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(4),r.onError(e.t0),e.t0;case 14:if(d&&l){e.next=17;break}return f=new Sp(ql.UNEXPECTED_ERROR,"can not find tracks in media stream"),e.abrupt("return",(r.onError(f),f.throw(tv)));case 17:return n.optimizationMode&&Ay(u,l,n,Rg(n.encoderConfig)),h=new ny(d,t,a,s),_=new Ry(l,n,o,n.scalabiltyMode?Og(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,u),e.abrupt("return",(i&&_.startMonitorStats(),r.onSuccess([h.getTrackId(),_.getTrackId()]),tv.info("create camera video track(".concat(u,") and microphone audio track(").concat(s,") success")),[h,_]));case 20:case"end":return e.stop()}}),e,null,[[4,11]])}))),function(){return qA.apply(this,arguments)}),createMicrophoneAudioTrack:(YA=d(c().mark((function e(){var t,n,r,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=pv.reportApiInvoke(null,{tag:Mp.TRACER,name:Lp.CREATE_MIC_AUDIO_TRACK,options:[t]}),r=ay(t),i=yf(8,"track-mic-"),o=null,tv.info("start create microphone audio track with config",JSON.stringify(t),"trackId",i),e.prev=4,e.next=7,CE({audio:r},i);case 7:if(e.t0=e.sent.getAudioTracks()[0],e.t0){e.next=10;break}e.t0=null;case 10:o=e.t0,e.next=16;break;case 13:throw e.prev=13,e.t1=e.catch(4),n.onError(e.t1),e.t1;case 16:if(o){e.next=19;break}return a=new Sp(ql.UNEXPECTED_ERROR,"can not find track in media stream"),e.abrupt("return",(n.onError(a),a.throw(tv)));case 19:return s=new ny(o,t,r,i),e.abrupt("return",(n.onSuccess(s.getTrackId()),tv.info("create microphone audio track success, trackId:",i),s));case 21:case"end":return e.stop()}}),e,null,[[4,13]])}))),function(){return YA.apply(this,arguments)}),createCustomAudioTrack:function(e){var t=pv.reportApiInvoke(null,{tag:Mp.TRACER,name:Lp.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new ty(e.mediaStreamTrack,e.encoderConfig?Ig(e.encoderConfig):{},yf(8,"track-cus-"),!1,!0);return tv.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:(KA=d(c().mark((function e(t){var n,r,i,o,a,s,u,d,l,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.cacheOnlineFile,i=t.encoderConfig,o=t.source,a={source:o instanceof AudioBuffer?"AudioBuffer":o instanceof File?null!==(n=File.name)&&void 0!==n?n:"File":o,cacheOnlineFile:r,encoderConfig:i},s=pv.reportApiInvoke(null,{tag:Mp.TRACER,name:Lp.CREATE_BUFFER_AUDIO_TRACK,options:[a]}),!W_("DISABLE_WEBAUDIO")){e.next=5;break}throw new Sp(ql.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");case 5:if(u=yf(8,"track-buf-"),tv.info("start create buffer source audio track with config",JSON.stringify(a),"trackId",u),d=o,o instanceof AudioBuffer){e.next=18;break}return e.prev=9,e.next=12,uy(o,r);case 12:o=e.sent,e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(9),e.abrupt("return",(s.onError(e.t0),e.t0.throw(tv)));case 18:return l=new sy(o),p=new ry(d,l,i?Ig(i):{},u),e.abrupt("return",(tv.info("create buffer source audio track success, trackId:",u),s.onSuccess(p.getTrackId()),p));case 20:case"end":return e.stop()}}),e,null,[[9,15]])}))),function(e){return KA.apply(this,arguments)}),setAppType:function(e){if(tv.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw tv.debug("Invalid appType"),new Fv(ql.INVALID_PARAMS,"invalid app type",e);F_("APP_TYPE",Math.floor(e))},setLogLevel:function(e){tv.setLogLevel(e)},enableLogUpload:function(){W_("USE_NEW_LOG")?F_("UPLOAD_LOG",!0):tv.enableLogUpload()},disableLogUpload:function(){W_("USE_NEW_LOG")?F_("UPLOAD_LOG",!1):tv.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new SR},checkAudioTrackIsActive:(zA=d(c().mark((function e(t){var n,r,i,o,a,s,u,d,l=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:5e3,r=pv.reportApiInvoke(null,{tag:Mp.TRACER,name:Lp.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[n]}),t instanceof ty||t instanceof Dy){e.next=5;break}return i=new Fv(ql.INVALID_TRACK,"the parameter is not a audio track"),e.abrupt("return",(r.onError(i),i.throw()));case 5:return n&&n<1e3&&(n=1e3),o=t instanceof ty?t.getTrackLabel():"remote_track",a=t.getVolumeLevel(),s=a,u=a,d=Date.now(),e.abrupt("return",new Vl((function(e){var i=setInterval((function(){var a=t.getVolumeLevel(),c=(s=a>s?a:s)-(u=a<u?a:u)>1e-4,l=Date.now()-d;if(c||l>n){clearInterval(i);var p=c,f={duration:l,deviceLabel:o,maxVolumeLevel:s,result:p};tv.info("[track-".concat(t.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(f))),r.onSuccess(f),e(p)}}),200)})));case 10:case"end":return e.stop()}}),e)}))),function(e){return zA.apply(this,arguments)}),checkVideoTrackIsActive:(HA=d(c().mark((function e(t){var n,r,i,o,a,s,u,d,l,p,f,h,_=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_.length>1&&void 0!==_[1]?_[1]:5e3,r=pv.reportApiInvoke(null,{tag:Mp.TRACER,name:Lp.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[n]}),t instanceof wy||t instanceof Py){e.next=5;break}return i=new Fv(ql.INVALID_TRACK,"the parameter is not a video track"),e.abrupt("return",(r.onError(i),i.throw()));case 5:return n&&n<1e3&&(n=1e3),o=t instanceof wy?t.getTrackLabel():"remote_track",a=t.getMediaStreamTrack(!0),(s=document.createElement("video")).style.width="1px",s.style.height="1px",s.setAttribute("muted",""),s.muted=!0,s.setAttribute("playsinline",""),s.controls=!1,(rp()||tp())&&(s.style.opacity="0.01",s.style.position="fixed",s.style.left="0",s.style.top="0",document.body.appendChild(s)),s.srcObject=new MediaStream([a]),s.play(),(u=document.createElement("canvas")).width=160,u.height=120,d=0,l=0,e.prev=11,p=Date.now(),e.next=15,function(e,t,n,r){var i,o=0,a=null;return new Vl((function(r,s){setTimeout((function(){i&&(i(),r(o))}),t),i=dE((function(){!function(){o>4&&i&&(i(),r(o));var t=n.getContext("2d");if(!t){var c=new Fv(ql.UNEXPECTED_ERROR,"can not get canvas 2d context.");return tv.error(c.toString()),void s(c)}t.drawImage(e,0,0,160,120);var u=t.getImageData(0,0,n.width,n.height),d=Math.floor(u.data.length/3);if(a){for(var l=0;l<d;l+=3)if(u.data[l]!==a[l])return o+=1,void(a=u.data);a=u.data}else a=u.data}()}),30)}))}(s,n,u);case 15:d=e.sent,l=Date.now()-p,e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(11),r.onError(e.t0),e.t0;case 22:return NA===Gl.SAFARI&&(s.pause(),s.remove()),s.srcObject=null,h={duration:l,changedPicNum:d,deviceLabel:o,result:f=d>4},e.abrupt("return",(tv.info("[track-".concat(t.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(h))),r.onSuccess(h),f));case 25:case"end":return e.stop()}}),e,null,[[11,19]])}))),function(e){return HA.apply(this,arguments)}),setArea:Lw,audioElementPlayCenter:BE,processExternalMediaAEC:function(e){VA.processExternalMediaAEC(e)},registerExtensions:function(e){e.forEach((function(e){var t=e;t.__registered__=!0,t.logger.hookLog=tv.extLog,t.reporter.hookApiInvoke=pv.extApiInvoke,t.parameters&&Object.keys(t.parameters).forEach((function(e){t.parameters[e]=W_(e)}))}))},ChannelMediaRelayError:em,ChannelMediaRelayEvent:Zv,ChannelMediaRelayState:$v,RemoteStreamFallbackType:xg,RemoteStreamType:Dg,ConnectionDisconnectedReason:jp,AudienceLatencyLevelType:Up,AREAS:am});return Object.defineProperties(ZA,{onAudioAutoplayFailed:{get:function(){return xE.onAudioAutoplayFailed},set:function(e){xE.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:function(){return xE.onAutoplayFailed},set:function(e){xE.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:function(){return ZA._onSecurityPolicyViolation},set:function(e){ZA._onSecurityPolicyViolation=e,GA(e)}},__CLIENT_LIST__:{get:function(){return W_("SHOW_GLOBAL_CLIENT_LIST")?vv:[]}}}),PE.on(zg.CAMERA_DEVICE_CHANGED,(function(e){tv.info("camera device changed",JSON.stringify(e)),ZA.onCameraChanged&&ZA.onCameraChanged(e),ZA.safeEmit(Cm.CAMERA_CHANGED,e)})),PE.on(zg.RECORDING_DEVICE_CHANGED,(function(e){tv.info("microphone device changed",JSON.stringify(e)),ZA.onMicrophoneChanged&&ZA.onMicrophoneChanged(e),ZA.safeEmit(Cm.MICROPHONE_CHANGED,e)})),PE.on(zg.PLAYOUT_DEVICE_CHANGED,(function(e){tv.debug("playout device changed",JSON.stringify(e)),ZA.onPlaybackDeviceChanged&&ZA.onPlaybackDeviceChanged(e),ZA.safeEmit(Cm.PLAYBACK_DEVICE_CHANGED,e)})),BE.onAutoplayFailed=function(){tv.info("detect audio element autoplay failed"),xE.onAudioAutoplayFailed&&xE.onAudioAutoplayFailed()},oE.on("autoplay-failed",(function(){tv.info("detect webaudio autoplay failed"),xE.onAudioAutoplayFailed&&xE.onAudioAutoplayFailed(),ZA.safeEmit(Cm.AUTOPLAY_FAILED)})),rf.on(Wp.NETWORK_STATE_CHANGE,(function(e,t){tv.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))})),window&&(window.__ARTC__=ZA),ZA}()}).call(this,n(15),n(18),n(211).Buffer)},,function(e,t){(function(t){e.exports=function(){var e={503:function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}},n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={exports:{}},o=!0;try{e[t](i,i.exports,r),o=!1}finally{o&&delete n[t]}return i.exports}return r.ab=t+"/",r(503)}()}).call(this,"/")},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)};var i=new Uint8Array(16)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){function o(e,o,a,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof o&&(o=(0,i.default)(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+e.length);if(c.set(o),c.set(e,o.length),(c=n(c))[6]=15&c[6]|t,c[8]=63&c[8]|128,a){s=s||0;for(var u=0;u<16;++u)a[s+u]=c[u];return a}return(0,r.default)(c)}try{o.name=e}catch(e){}return o.DNS=a,o.URL=s,o},t.URL=t.DNS=void 0;var r=o(n(29)),i=o(n(61));function o(e){return e&&e.__esModule?e:{default:e}}var a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=a;var s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(30))&&r.__esModule?r:{default:r};var o=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};t.default=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxAVCC=void 0;var o=n(3),a=n(33),s=n(31),c=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.sps=[],r.pps=[],r.codec="",r.width=0,r.height=0,r.configVersion=n.read(1),r.generalProfileIdc=n.read(1),r.generalProfileCompatibility=n.read(1),r.generalLevelIdc=n.read(1),r.lengthSizeMinusOne=3&n.read(1),r.numOfSequenceParameterSets=31&n.read(1);var i,o=0,c=[];for(o=0;o<r.numOfSequenceParameterSets;o++){for(i=n.read(2),c=[];i--;)c.push(n.read(1));r.sps.push(new Uint8Array(c))}for(r.numOfPictureParameterSets=31&n.read(1),o=0;o<r.numOfPictureParameterSets;o++){for(i=n.read(2),c=[];i--;)c.push(n.read(1));r.pps.push(new Uint8Array(c))}return r.sps.forEach((function(e){var t=new a.AvcSPS((0,s.removeEPB)(e.subarray(1)));r.width=t.width,r.height=t.height,r.codec=t.codec})),r}return i(t,e),t}(o.Box);t.BoxAVCC=c},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxHVCC=void 0;var o=n(3),a=n(10),s=n(32),c=n(33),u=n(31),d=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.nalus=[],r.vps=[],r.sps=[],r.pps=[],r.codec="",r.width=0,r.height=0,r.configVersion=n.read(1);var i=new a.BitBuffer(n.read(1),8);r.generalProfileSpace=i.read(2),r.generalTierFlag=i.read(1),r.generalProfileIdc=i.read(5),i=new a.BitBuffer(n.read(4),32),r.generalProfileCompatibilityFlags=Array.from(new Array(32)).map((function(){return i.read(1)})),r.generalConstraintIndicatorFlags=Array.from(new Array(6)).map((function(){return n.read(1)})),r.generalLevelIdc=n.read(1),r.minSpatialSegmentationIdc=4095&n.read(2),r.parallelismType=3&n.read(1),r.chromaFormatIdc=3&n.read(1),r.bitDepthLumaMinus8=7&n.read(1),r.bitDepthChromaMinus8=7&n.read(1),r.avgFrameRate=n.read(2),i=new a.BitBuffer(n.read(1),8),r.constantFrameRate=i.read(2),r.numTemporalLayers=i.read(3),r.temporalIdNested=i.read(1),r.lengthSizeMinusOne=i.read(2),r.nalus=[];for(var o=n.read(1),d=0;d<o;d++){var l=[],p=(i=new a.BitBuffer(n.read(1),8)).read(1);i.read(1);for(var f=i.read(6),h=n.read(2),_=0;_<h;_++)l.push(new Uint8Array(n.read(2)).map((function(){return n.read(1)})));r.nalus.push({completeness:p,type:f,data:l}),f===s.EH265NALType.VPS?l.forEach((function(e){return r.vps.push(e)})):f===s.EH265NALType.SPS?l.forEach((function(e){return r.sps.push(e)})):f===s.EH265NALType.PPS&&l.forEach((function(e){return r.pps.push(e)}))}return r.sps.forEach((function(e){var t=new c.HevcSPS((0,u.removeEPB)(e.subarray(2)));r.width=t.width,r.height=t.height,r.codec=t.codec})),r}return i(t,e),t}(o.Box);t.BoxHVCC=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FLVHeader=void 0;var r=n(10),i=function(){function e(e){this.signature=String.fromCharCode(e.read(1),e.read(1),e.read(1)),this.version=e.read(1);var t=e.read(1);this.size=e.read(4);var n=new r.BitBuffer(t,8);n.read(5),this.hasAudio=!!n.read(1),n.read(1),this.hasVideo=!!n.read(1)}return e.BUFFER_LENGTH=9,e}();t.FLVHeader=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TagHeader=t.ETagType=void 0,function(e){e[e.AUDIO=8]="AUDIO",e[e.VIDEO=9]="VIDEO",e[e.SCRIPT=18]="SCRIPT"}(t.ETagType||(t.ETagType={}));var r=function(){function e(e){this.type=e.read(1),this.size=e.read(3),this.dts=e.read(3),this.dts|=e.read(1)<<24,e.skip(3)}return e.BUFFER_LENGTH=11,e}();t.TagHeader=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioBody=t.EAudioPacketType=t.ESoundType=t.SOUND_SIZE=t.SOUND_RATE=t.EAudioCodecID=void 0;var r=n(67),i=n(10);!function(e){e[e.PCM=0]="PCM",e[e.ADPCM=1]="ADPCM",e[e.MP3=2]="MP3",e[e.PCM_LE=3]="PCM_LE",e[e.NELLYMOSER_16KHZ_MONO=4]="NELLYMOSER_16KHZ_MONO",e[e.NELLYMOSER_8KHZ_MONO=5]="NELLYMOSER_8KHZ_MONO",e[e.NELLYMOSER=6]="NELLYMOSER",e[e.PCM_ALAW=7]="PCM_ALAW",e[e.PCM_MULAW=8]="PCM_MULAW",e[e.AAC=10]="AAC",e[e.SPEEX=11]="SPEEX"}(t.EAudioCodecID||(t.EAudioCodecID={})),t.SOUND_RATE=[5512,11025,22050,44100],t.SOUND_SIZE=[8,16],function(e){e[e.MONO=0]="MONO",e[e.STEREO=1]="STEREO"}(t.ESoundType||(t.ESoundType={})),function(e){e[e.ADTS_HEADER=0]="ADTS_HEADER",e[e.RAW=1]="RAW"}(t.EAudioPacketType||(t.EAudioPacketType={}));var o=function(){function e(e){var n=new i.BitBuffer(e.read(1),8);this.codecId=n.read(4),this.sampleRate=t.SOUND_RATE[n.read(2)],this.sampleSize=t.SOUND_SIZE[n.read(1)],this.soundType=n.read(1),this.packetType=e.read(1),this.data=e.readToUint8()}return e.readAudioSpecificConfig=function(e){var t=i.BitBuffer.fromByte(e,2);return{audioObjectType:t.read(5),sampleRate:r.AAC_SAMPLING_FREQUENCIES[t.read(4)],channelCount:t.read(4)}},e}();t.AudioBody=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readAACSamples=t.getADTSLength=t.getADTSHeaderLength=t.isADTS=t.addADTSHeader=t.AAC_DURATION=t.AAC_SAMPLING_FREQUENCIES=void 0;var r=n(19);t.AAC_SAMPLING_FREQUENCIES=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],t.AAC_DURATION=1024;t.addADTSHeader=function(e,n){var i=n.audioObjectType,o=n.sampleRate,a=n.channelCount,s=n.numberOfRawDataBlocksInFrame,c=void 0===s?0:s,u=e.byteLength+7,d=t.AAC_SAMPLING_FREQUENCIES.indexOf(o),l=new Uint8Array(7);return l[0]=255,l[1]=241,l[2]=i-1<<6,l[2]|=d<<2,l[2]|=(4&a)>>2,l[3]=(3&a)<<6,l[3]|=(6144&u)>>11,l[4]=(2047&u)>>3,l[5]=(7&u)<<5,l[5]|=31,l[6]=252,l[6]|=3&c,r.ByteBuffer.concatUint8(l,e)};t.isADTS=function(e,t){return t<e.byteLength-1&&255===e[t]&&240==(246&e[t+1])};t.getADTSHeaderLength=function(e,t){return 1&e[t+1]?7:9};t.getADTSLength=function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5};t.readAACSamples=function(e){for(var n,r,i=[],o=0,a=e.byteLength;o+6<a;)(0,t.isADTS)(e,o)?(n=(0,t.getADTSHeaderLength)(e,o),r=(0,t.getADTSLength)(e,o),i.push({audioObjectType:1+(e[o+2]>>>6),sampleRate:t.AAC_SAMPLING_FREQUENCIES[e[o+2]>>>2&15],channelCount:(1&e[o+2])<<2|e[o+3]>>>6,numberOfRawDataBlocksInFrame:3&e[o+6],data:e.subarray(o+n,o+r)}),o+=r):o++;return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptBody=void 0;var r=n(69),i=function(e){this.name=(0,r.parseAMFConfig)(e).value,this.value=(0,r.parseAMFConfig)(e).value};t.ScriptBody=i},function(e,t,n){"use strict";var r;function i(e){var t=e.read(2);return Array.from(Array(t)).map((function(){var t=e.read(1);return t>0?String.fromCharCode(t):""})).join("")}function o(e){var t=i(e),n=u(e);return{key:t,value:n.value,objectEnd:n.objectEnd}}function a(e){for(var t={};e.unreadLength>0;){var n=o(e);if(n.objectEnd)break;t[n.key]=n.value}return t}function s(e){for(var t=e.read(4),n={};t-- >0;){var r=o(e);n[r.key]=r.value}return n}function c(e){for(var t=e.read(4),n=[];t-- >0;){var r=u(e);n.push(r.value)}return n}function u(e){var t={value:null,objectEnd:!1},n=e.read(1);switch(n){case r.NUMBER:t.value=e.readFloat(8);break;case r.BOOLEAN:t.value=!!e.read(1);break;case r.LONG_STRING:case r.STRING:t.value=i(e);break;case r.OBJECT_START:t.value=a(e);break;case r.ECMA_ARRAY:t.value=s(e);break;case r.OBJECT_END:t.objectEnd=!0;break;case r.STRICT_ARRAY:t.value=c(e);break;case r.DATE:t.value=new Date(e.readFloat(8)+60*e.readInt(2)+1e3);break;default:console.warn("unknown AMF value type",n)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseAMFConfig=t.parseAMFStrictArray=t.parseAMFECMAArray=t.parseAMFObject=t.parseAMFKeyValue=t.parseAMFString=void 0,function(e){e[e.NUMBER=0]="NUMBER",e[e.BOOLEAN=1]="BOOLEAN",e[e.STRING=2]="STRING",e[e.OBJECT_START=3]="OBJECT_START",e[e.NULL=5]="NULL",e[e.UNDEFINED=6]="UNDEFINED",e[e.REFERENCE=7]="REFERENCE",e[e.ECMA_ARRAY=8]="ECMA_ARRAY",e[e.OBJECT_END=9]="OBJECT_END",e[e.STRICT_ARRAY=10]="STRICT_ARRAY",e[e.DATE=11]="DATE",e[e.LONG_STRING=12]="LONG_STRING"}(r||(r={})),t.parseAMFString=i,t.parseAMFKeyValue=o,t.parseAMFObject=a,t.parseAMFECMAArray=s,t.parseAMFStrictArray=c,t.parseAMFConfig=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoBody=t.EVideoPacketType=t.EVideoCodecID=t.EFrameType=void 0;var r=n(10);!function(e){e[e.KEY=1]="KEY",e[e.INTER=2]="INTER",e[e.DISP_INTER=3]="DISP_INTER",e[e.GENERATED_KEY=4]="GENERATED_KEY",e[e.VIDEO_INFO_CMD=5]="VIDEO_INFO_CMD"}(t.EFrameType||(t.EFrameType={})),function(e){e[e.JPEG=1]="JPEG",e[e.H263=2]="H263",e[e.SCREEN=3]="SCREEN",e[e.VP6=4]="VP6",e[e.VP6A=5]="VP6A",e[e.SCREEN2=6]="SCREEN2",e[e.H264=7]="H264",e[e.REALH263=8]="REALH263",e[e.MPEG4=9]="MPEG4",e[e.H265=12]="H265"}(t.EVideoCodecID||(t.EVideoCodecID={})),function(e){e[e.AVC_SEQUENCE_HEADER=0]="AVC_SEQUENCE_HEADER",e[e.AVC_NALU=1]="AVC_NALU",e[e.AVC_END=2]="AVC_END"}(t.EVideoPacketType||(t.EVideoPacketType={}));var i=function(e){var t=new r.BitBuffer(e.read(1),8);this.type=t.read(4),this.codecId=t.read(4),this.packetType=e.read(1),this.cts=e.read(3)+4286578688^4286578688,this.data=e.readToUint8()};t.VideoBody=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stts=t.stsz=t.stss=t.stsd=t.stsc=t.co64=t.stco=t.ctts=t.trun=t.trex=t.tfhd=t.tfdt=t.sidx=t.sdtp=t.mvex=t.mfhd=t.traf=t.moof=t.vmhd=t.url=t.tkhd=t.pasp=t.mvhd=t.mp4a=t.mdhd=t.mdat=t.hdlr=t.hvcC=t.ftyp=t.esds=t.elst=t.dref=t.btrt=t.hev1=t.hvc1=t.avcC=t.avc1=t.mfra=t.stbl=t.dinf=t.minf=t.mdia=t.edts=t.trak=t.moov=t.Box=void 0;var r=n(3);Object.defineProperty(t,"Box",{enumerable:!0,get:function(){return r.Box}});var i=n(7);Object.defineProperty(t,"moov",{enumerable:!0,get:function(){return i.BoxContainer}});var o=n(7);Object.defineProperty(t,"trak",{enumerable:!0,get:function(){return o.BoxContainer}});var a=n(7);Object.defineProperty(t,"edts",{enumerable:!0,get:function(){return a.BoxContainer}});var s=n(7);Object.defineProperty(t,"mdia",{enumerable:!0,get:function(){return s.BoxContainer}});var c=n(7);Object.defineProperty(t,"minf",{enumerable:!0,get:function(){return c.BoxContainer}});var u=n(7);Object.defineProperty(t,"dinf",{enumerable:!0,get:function(){return u.BoxContainer}});var d=n(7);Object.defineProperty(t,"stbl",{enumerable:!0,get:function(){return d.BoxContainer}});var l=n(7);Object.defineProperty(t,"mfra",{enumerable:!0,get:function(){return l.BoxContainer}});var p=n(72);Object.defineProperty(t,"avc1",{enumerable:!0,get:function(){return p.BoxAVC1}});var f=n(62);Object.defineProperty(t,"avcC",{enumerable:!0,get:function(){return f.BoxAVCC}});var h=n(73);Object.defineProperty(t,"hvc1",{enumerable:!0,get:function(){return h.BoxHVC1}});var _=n(73);Object.defineProperty(t,"hev1",{enumerable:!0,get:function(){return _.BoxHVC1}});var v=n(179);Object.defineProperty(t,"btrt",{enumerable:!0,get:function(){return v.BoxBTRT}});var m=n(180);Object.defineProperty(t,"dref",{enumerable:!0,get:function(){return m.BoxDREF}});var g=n(181);Object.defineProperty(t,"elst",{enumerable:!0,get:function(){return g.BoxELST}});var E=n(182);Object.defineProperty(t,"esds",{enumerable:!0,get:function(){return E.BoxESDS}});var y=n(184);Object.defineProperty(t,"ftyp",{enumerable:!0,get:function(){return y.BoxFTYP}});var b=n(63);Object.defineProperty(t,"hvcC",{enumerable:!0,get:function(){return b.BoxHVCC}});var S=n(185);Object.defineProperty(t,"hdlr",{enumerable:!0,get:function(){return S.BoxHDLR}});var T=n(186);Object.defineProperty(t,"mdat",{enumerable:!0,get:function(){return T.BoxMDAT}});var w=n(187);Object.defineProperty(t,"mdhd",{enumerable:!0,get:function(){return w.BoxMDHD}});var R=n(188);Object.defineProperty(t,"mp4a",{enumerable:!0,get:function(){return R.BoxMP4A}});var C=n(189);Object.defineProperty(t,"mvhd",{enumerable:!0,get:function(){return C.BoxMVHD}});var O=n(190);Object.defineProperty(t,"pasp",{enumerable:!0,get:function(){return O.BoxPASP}});var A=n(191);Object.defineProperty(t,"tkhd",{enumerable:!0,get:function(){return A.BoxTKHD}});var I=n(192);Object.defineProperty(t,"url",{enumerable:!0,get:function(){return I.BoxURL}});var k=n(193);Object.defineProperty(t,"vmhd",{enumerable:!0,get:function(){return k.BoxVMHD}});var N=n(194);Object.defineProperty(t,"moof",{enumerable:!0,get:function(){return N.BoxMOOF}});var P=n(195);Object.defineProperty(t,"traf",{enumerable:!0,get:function(){return P.BoxTRAF}});var D=n(196);Object.defineProperty(t,"mfhd",{enumerable:!0,get:function(){return D.BoxMFHD}});var x=n(197);Object.defineProperty(t,"mvex",{enumerable:!0,get:function(){return x.BoxMVEX}});var L=n(198);Object.defineProperty(t,"sdtp",{enumerable:!0,get:function(){return L.BoxSDTP}});var M=n(199);Object.defineProperty(t,"sidx",{enumerable:!0,get:function(){return M.BoxSIDX}});var U=n(200);Object.defineProperty(t,"tfdt",{enumerable:!0,get:function(){return U.BoxTFDT}});var j=n(74);Object.defineProperty(t,"tfhd",{enumerable:!0,get:function(){return j.BoxTFHD}});var V=n(201);Object.defineProperty(t,"trex",{enumerable:!0,get:function(){return V.BoxTREX}});var B=n(75);Object.defineProperty(t,"trun",{enumerable:!0,get:function(){return B.BoxTRUN}});var F=n(202);Object.defineProperty(t,"ctts",{enumerable:!0,get:function(){return F.BoxCTTS}});var W=n(203);Object.defineProperty(t,"stco",{enumerable:!0,get:function(){return W.BoxSTCO}});var G=n(204);Object.defineProperty(t,"co64",{enumerable:!0,get:function(){return G.BoxCO64}});var H=n(205);Object.defineProperty(t,"stsc",{enumerable:!0,get:function(){return H.BoxSTSC}});var z=n(206);Object.defineProperty(t,"stsd",{enumerable:!0,get:function(){return z.BoxSTSD}});var K=n(207);Object.defineProperty(t,"stss",{enumerable:!0,get:function(){return K.BoxSTSS}});var Y=n(208);Object.defineProperty(t,"stsz",{enumerable:!0,get:function(){return Y.BoxSTSZ}});var q=n(209);Object.defineProperty(t,"stts",{enumerable:!0,get:function(){return q.BoxSTTS}})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxAVC1=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;n.skip(4),n.skip(2),r.bitReferenceId=n.read(2),r.codeStreamVersion=n.read(4),n.skip(4),n.skip(8),r.width=n.read(2),r.heigth=n.read(2),r.horizontalResolution=n.read(4),r.verticalResolution=n.read(4),n.skip(4),r.frameCount=n.read(2);var i=Math.min(n.read(1),32);return r.compressorName=Array.from(new Array(i)).map((function(){return String.fromCharCode(n.read(1))})).join(""),n.skip(32-(i+1)),r.depth=n.read(2),n.skip(2),r}return i(t,e),t}(n(7).BoxContainer);t.BoxAVC1=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxHVC1=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(72).BoxAVC1);t.BoxHVC1=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxTFHD=t.ETFHDFlag=void 0;var o,a=n(3);!function(e){e[e.BASE_DATA_OFFSET=1]="BASE_DATA_OFFSET",e[e.SAMPLE_DESC=2]="SAMPLE_DESC",e[e.SAMPLE_DUR=8]="SAMPLE_DUR",e[e.SAMPLE_SIZE=16]="SAMPLE_SIZE",e[e.SAMPLE_FLAG=32]="SAMPLE_FLAG",e[e.DUR_EMPTY=65536]="DUR_EMPTY",e[e.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF"}(o=t.ETFHDFlag||(t.ETFHDFlag={}));var s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.baseDataOffset=0,r.defaultSampleDescriptionIndex=0,r.defaultSampleDuration=0,r.defaultSampleSize=0,r.defaultSampleFlag=0,r.trackId=n.read(4),r.flag&o.BASE_DATA_OFFSET&&(r.baseDataOffset=n.read(8)),r.flag&o.SAMPLE_DESC&&(r.defaultSampleDescriptionIndex=n.read(4)),r.flag&o.SAMPLE_DUR&&(r.defaultSampleDuration=n.read(4)),r.flag&o.SAMPLE_SIZE&&(r.defaultSampleSize=n.read(4)),r.flag&o.SAMPLE_FLAG&&(r.defaultSampleFlag=n.read(4)),r}return i(t,e),t}(a.FullBox);t.BoxTFHD=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxTRUN=t.ETRUNFlag=void 0;var o,a=n(3);!function(e){e[e.DATA_OFFSET=1]="DATA_OFFSET",e[e.FIRST_FLAG=4]="FIRST_FLAG",e[e.DURATION=256]="DURATION",e[e.SIZE=512]="SIZE",e[e.FLAG=1024]="FLAG",e[e.CTS_OFFSET=2048]="CTS_OFFSET"}(o=t.ETRUNFlag||(t.ETRUNFlag={}));var s=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.sampleDurations=[],r.sampleSizes=[],r.sampleFlags=[],r.sampleCTSs=[],r.sampleCount=n.read(4),r.flag&o.DATA_OFFSET?r.dataOffset=n.readInt(4):r.dataOffset=0,r.flag&o.FIRST_FLAG?r.firstSampleFlag=n.read(4):r.firstSampleFlag=0;for(var i=0;i<r.sampleCount;i++)r.flag&o.DURATION&&(r.sampleDurations[i]=n.read(4)),r.flag&o.SIZE&&(r.sampleSizes[i]=n.read(4)),r.flag&o.FLAG&&(r.sampleFlags[i]=n.read(4)),r.flag&o.CTS_OFFSET&&(0===r.version?r.sampleCTSs[i]=n.read(4):r.sampleCTSs[i]=n.readInt(4));return r}return i(t,e),t}(a.FullBox);t.BoxTRUN=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MoovParser=void 0;var r=n(16),i=n(210),o=n(77),a=function(){function e(){}return e.prototype.createMedia=function(e){return this._parseMoovJSON(e)},e.prototype._parseMoovJSON=function(e){var t=this,n=e.mvhd.box,a=new i.Media({duration:n.duration,timeScale:n.timeScale,rate:n.rate,modifyTime:n.modifyTime,createTime:n.createTime});return e.trak&&[].concat(e.trak).forEach((function(n){var i,s=n.tkhd,c=n.mdia,u=c.mdhd,d=c.hdlr,l=c.minf.stbl,p=s.box,f=d.box,h=u.box,_=r.CTrackTypeMap[f.handleType],v=t._buildSamples(l,_),m={id:p.trackId,name:f.name,handleType:f.handleType,type:_,createTime:p.createTime,modifyTime:p.modifyTime,layer:p.layer,volume:p.volume,matrix:p.matrix,duration:p.duration,width:p.width,height:p.height,timeScale:h.timeScale,language:h.language,quality:h.quality,defaultSampleDescriptionIndex:1,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlag:0},g=null===(i=e.mvex)||void 0===i?void 0:i.trex;g&&[].concat(g).forEach((function(e){var t=e.box;m.defaultSampleDescriptionIndex=t.defaultSampleDescriptionIndex,m.defaultSampleDuration=t.defaultSampleDuration,m.defaultSampleSize=t.defaultSampleSize,m.defaultSampleFlag=t.defaultSampleFlag}));var E=new o.Track(m);v.forEach((function(e){return E.addSample(e)})),a.addTrack(E)})),a},e.prototype._buildSamples=function(e,t){var n=e.stts,r=e.stss,i=e.ctts,o=e.stsc,a=e.stsz||e.stz2;if(!a)return[];var s,c,u,d,l,p=e.stco||e.co64,f=o.box,h=null==r?void 0:r.box,_=n.box,v=null==i?void 0:i.box,m=-1,g=-1,E=-1,y=-1,b=0,S=[],T=a.box.sampleSizes;return T.forEach((function(e,n){var r={},i=f.entries;if(r.size=e,r.trackType=t,0===n?(c=1,s=0,r.chunkIndex=c,r.chunkRunIndex=s,l=i[s].samplePerChunk,d=0,u=s+1<i.length?i[s+1].firstChunk-1:1/0):n<l?(r.chunkIndex=c,r.chunkRunIndex=s):(c++,r.chunkIndex=c,d=0,c>u&&(s++,u=s+1<i.length?i[s+1].firstChunk-1:1/0),r.chunkRunIndex=s,l+=i[s].samplePerChunk),r.descriptionIndex=i[s].sampleDescriptionIndex-1,r.offset=p.box.chunkOffsets[r.chunkIndex-1]+d,d+=r.size,n>m&&(g++,m=Math.max(m,0),m+=_.sampleCounts[g]),n>0){var o=S[n-1];o.duration=_.sampleDurations[g],r.dts=S[n-1].dts+o.duration}else r.dts=0;v?(n>=E&&(y++,E=Math.max(E,0),E+=v.sampleCounts[y]),r.cts=v.sampleOffsets[y]):r.cts=0,h?n===h.sampleNumbers[b]-1?(r.isSync=!0,b++):r.isSync=!1:r.isSync=!0,r.isLast=n===T.length-1,S.push(r)})),S},e}();t.MoovParser=a},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Track=void 0;var i=function(){function e(e){this.samples=[],this.nextSampleIndex=0,this.duration=0,this.options=e}return e.prototype.getSamples=function(){return this.samples},e.prototype.getNextSampleOffset=function(){var e=this.samples[this.nextSampleIndex];return e?e.offset:0},e.prototype.addSample=function(e){this.samples.push(e),this.duration+=e.duration},e.prototype.processNextSample=function(e,t){void 0===t&&(t=0);var n=this.samples[this.nextSampleIndex];if(n)return this.processSample(e,t,n)},e.prototype.processSample=function(e,t,n){void 0===t&&(t=0);var i=t+e.byteLength,o=n.offset-t;if(o>=0&&n.offset+n.size<=i)return this.nextSampleIndex++,r(r({},n),{data:e.subarray(o,o+n.size)})},e.prototype.processSamples=function(e,t){void 0===t&&(t=0);for(var n=this.samples,r=[],i=this.nextSampleIndex,o=n.length;i<o;i++){var a=this.processSample(e,t,n[i]);if(!a)break;r.push(a)}return r},e.prototype.seek=function(e){for(var t,n=e*this.options.timeScale,r=-1,i=-1,o=0,a=this.samples.length;o<a;o++)if((t=this.samples[o]).isSync&&(i=o),t.dts+t.cts>=n){r=i;break}if(r>-1)return this.nextSampleIndex=r,this.samples[r]},e}();t.Track=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MoofParser=void 0;var r=n(74),i=n(75),o=n(16),a=function(e){return Array.isArray(e)?e:e?[e]:[]},s=function(){function e(){var e=this;this.options=null,this._getTrakById=function(t){var n;return null===(n=e.options)||void 0===n?void 0:n.media.getTracks().find((function(e){return e.options.id===t}))}}return e.prototype.init=function(e){this.options=e},e.prototype.parse=function(e){var t=this;a(e.traf).forEach((function(n){return t._buildSamples(n,e.box)}))},e.prototype._buildSamples=function(e,t){var n=e.tfhd.box,s=this._getTrakById(n.trackId);if(s){var c,u,d,l,p=s.options,f=e.tfdt.box,h=n.flag;c=h&r.ETFHDFlag.SAMPLE_DESC?n.defaultSampleDescriptionIndex:p.defaultSampleDescriptionIndex,u=h&r.ETFHDFlag.SAMPLE_DUR?n.defaultSampleDuration:p.defaultSampleDuration,d=h&r.ETFHDFlag.SAMPLE_SIZE?n.defaultSampleSize:p.defaultSampleSize,l=h&r.ETFHDFlag.SAMPLE_FLAG?n.defaultSampleFlag:p.defaultSampleFlag;for(var _=a(e.trun),v=p.id,m=p.type,g=h&r.ETFHDFlag.BASE_DATA_OFFSET?n.baseDataOffset:h&r.ETFHDFlag.DEFAULT_BASE_IS_MOOF?t.header.start:0,E=0,y=0;y<_.length;y++)for(var b=_[y].box,S=b.flag,T=b.dataOffset+g,w=0;w<b.sampleCount;w++){var R={};R.trackId=v,R.trackType=m,R.descriptionIndex=c,S&i.ETRUNFlag.SIZE?R.size=b.sampleSizes[w]:R.size=d,S&i.ETRUNFlag.DURATION?R.duration=b.sampleDurations[w]:R.duration=u,R.dts=E>0?E:f?f.baseMediaDecodeTime:0,E=R.dts+R.duration,S&i.ETRUNFlag.CTS_OFFSET?R.cts=b.sampleCTSs[w]:R.cts=0;var C=l;S&i.ETRUNFlag.FLAG?C=b.sampleFlags[w]:0===w&&S&i.ETRUNFlag.FIRST_FLAG&&(C=b.firstSampleFlag),R.offset=T,R.flag=C,R.isSync=!(C&(o.ESampleFlag.IS_NON_SYNC|o.ESampleFlag.DEPENDS_YES)),R.isLeading=C>>26&3,R.dependsOn=C>>24&3,R.isDependedOn=C>>22&3,R.hasRedundancy=C>>20&3,R.degradationPriority=65535&C,T+=R.size,R.isLast=y===_.length-1&&w===b.sampleCount-1,s.addSample(R)}}},e.prototype.reset=function(){this.options=null},e}();t.MoofParser=s},function(e,t,n){},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAADICAYAAADFh+7jAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAfaADAAQAAAABAAAAyAAAAADsi7F2AAAKt0lEQVR4Ae3df4gc1QEH8LtdL1BisYiIt5tA76w2pK1Yk831emkbKYqRiJCQKq20SIXQP5pCof/Y/JE/Uv9roe0f0qKtf0qPi1XvD5Eop1Uvyd0i/uGpWBNE3A0WTChej956e/2+4yZMj30z837MzHtvvgvJzM6892bm+9n3dud2Z3doiDcmwASYABNgAkyACTABJsAEmAATYAJMgAkwASbABIpLYDiPTU1OTjb7/f7O9fX10bW1tZvENur1+qXh4eFurVb7aH5+/uM8tss2syVgBf3o0aP1ixcvfgfIhwB7CNOvJm0eZd5DmVlMZ8fGxv4xPT29llSe6+wmYIQOuOFWq3UY01PYrV2au/Yu8E8sLCycxnRdsw1WU0hAGx3Y38YQ/gdsa4/C9pKKtjH0Hwf+G0mFuM48gbpOE3v37j2G3v031N2hU19Sp4E2f9xsNj/pdDptSRkutpCAUk/fs2fPCLb5e/z7mYVtJzXxOFb+ot1u95IKcZ1eAjWVanjO/QvK5w0udkls4zReIG4Td3izm0BmdAzpv8Lw+5DdzSe2dujChQszhE/MSGtlpuEd4AcBPostZH6QaO3N4Eqz4+PjR3Batzp4NZeqJpCKjj+0fGF1dfUDNDyq2rjF8oS3GGZqzwX48ZLBxeFyqLeIntjT8Wr9Orx4u4Ch/XqL2zRpij3eJL3Numk9/RGHwMUus8fnjY5efp+FbdhugvCGiUp7+oEDB76EtqcM28+rOuENkpWiLy8v342h/RqDtvOuSnjNhKXoAL9Fs80iqxFeI20pOtoq87xc5VAIr5IWyiahb3ziRbG9sooTXiF5KTqG92sV2nGhKOEzKkjRcbr2ScY2XCpG+AwaUnTU7Wao72IRwqeohIguDpnwCfBSdHxk+WxCPR9WEV6iJEU/ePDgedT5l6SeL4sJP0Aq7V22p1DnJwPq+baI787FxKQ9XZTBR5KfjpX1eZY9PqaX2NNFOXxU6jWcs7v6xkvsUDLNsscjpsSeLmLE+fqjmeL0oxB7PJxSL3bAhQcf4gKEO1A28fo0P8w39vLWy5cvf3P//v0zS0tLlbyGLrWni5hGRkYexkR8ODKUW6V7fOpzeqQ8MTGxG5cdn8Xz+xejZQFMK/kcn6mnC9xz584t4dX8D/Ec/3kA2NEhVLLHZ0YXKZ0/f15c8PAg4aPHjJ/TzMN7/PBwGncE95/GUO/yx6niu5xlvjJDvRa6SJDwWR5HbpbRRie8m6BZ9soInfBZInavjDE64d1DTdsjK+iET4vZrfXW0AnvFmzS3lhFJ3xS1O6ss45OeHdwZXuSCzrhZXG7sTw3dMK7ATxoL3JFJ/ygyMtfljs64ctH3roHhaATfmvs5d4vDJ3w5ULHt14oOuHj0Zc3Xzg64cvDjrZcCjrho/jLmZaGTvhywMVWS0UnfDnwpaMTvnh4J9AJXyy8M+iELw7eKXTCFwPvHDrh84d3Ep3w+cI7i074/OCdRid8PvDOoxPePrwX6IS3C+8NOuHtwXuFTng78N6hE94c3kt0wpvBe4tOeH14r9EJrwef+uWBes0WVwtfbvhOo9FYwpcfHcZWlb44qbi9VN7SrVeuXLltampqGl9wuK5cO6WC9+ji+AKF3wX4Jo7tuRRD5dVBoAcMfwdGsX63231VWTahgvfP6VuPLcBvverjqev7i4uLc1uPVfd+cOgiiADhO9u2bfvG/Pz8p7rQ8XqhvPCJH9MQesUMFoT0zZaNXq/3m/87SIM7Qfb0KI/AerwY5vfiAf1mdHy60yB7ehRGYD1eWD0WHZvJNOieHgUTUo/HT6fdji9mfis6Np1p0D09CiSkHt/v938ZHZfutBI9PQonkB6/jOO5sd1u/yc6LtVpJXp6FEogPX47XtDdHx2TzrRS6CKgQODv08GO6lQOPQR4/LjC9yJAnWkl0QOAb7RarXEdcFGnsugBwH+N6JoJ+Pocj1O3WzQPudo9PQrNR3i8gv9ytP+q00oP7/GwfIM3+VFEosfkfYJHT782tutKs0RXiiuMwkSPOfr0Z1oM75/Fdl1pluibcfkEvrnL/1aSjhUmOsLwEFwQfhhzVJqtPLqn4EP4hev3laRjhSuN7iv4pt/bMUel2Uq9nx5PxnPwDt5Pb8aPR2W+kj3dc/AhnKO/ooK8tWzl0H0H3wQ0utSpUuiBgC/jHJ3oW4evQfcDARdD+4zJ5+NENpXo6aGAb4DVar8b9KBWWRY8ekjg6OUvmH7mfeOBo/II8a1sSODIvo9/j9owCLanBwYunsv/jLd+ja9jEw+aINFDA4dTZ2Rk5Nc2enmQ6AGCi6tVf2Tr2vTg0AMEF0YnMazPiRlbt2D+9h4iOHr4kwB/xBZ21E4Qz+mBgj87NjZ2LIKyOfUePURwAM8C/AfT09NrNrGjtrwe3kMFHx8fPwLw1QjJ9tRbdILrPxS8RCe4Prio6R06wc3AvUMnuDm4V+gEtwPuDTrB7YF7gU5wu+DOoxPcPrjT6ATPB9xZdILnB+4kOsHzBXcOneD5gzuFTvBiwJ1BJ3hx4E6gE7xY8NLRCV48eKnoBC8HvDR0gpcHXgo6wcsFLxyd4OWDF4pOcDfAC0MnuDvghaAT3C3w3NEJ7h54rugEdxM8N3SCuwueCzrB3Qa3jk5w98GtohPcD3Br6AT3B9wKOsH9AjdGJ7h/4EboBPcTXBud4P6Ca6ET3G9wZfR9+/Ydwg+7PoPvG7/G/0O/egSzeX/Hy9UtOTKT+ZsoJiYmdq+trZ01+Y1PR445vhuVAxcHX48nIJufnJy8vtfrvYz1N8nKeLi8kuDCKdP3yAH8ryh7s4ewsl2uLLgIJHV4b7Va38Xz+Cuy9DxcXmlw4ZXa0/Ec/piHsLJdrjx4Kjp6+T1An5Il6Nlygm+CJfZ0DOsPegYr212Cx5KRop88eVKsuzdW1tdZgm+Rk56yraysTKCnH99S3re7BB8gJu3p+EPMtwaU92kRwSVaUnSUH5XU8WExwROUQkQneAK4WCVFx6najSl1XVxN8AwqUnT8aMxnGeq7VITgGTWk6Kh/KWMbLhQjuIJCEnpXoZ0yixJcMX0pOob39xXbKqM4wTVSl6Jv3779RcB/rtFmUVUIrpm0FH1ubu4K2nxds928qxHcIGEpumgTp23PG7SdV1WCGyabiI62n8AQ/6nhNmxWJ7iFNKVvuIi2u93ufxuNhpi9S/xX8o3glgDSevoQfqz9j9hW2advBLcELppJRcePta9giP8pyvYtblelKYKrpJWhbOLwHtXvdDr/bDabK7hf9DBP8AjB4jQTutge4N8A/Fcwe5vF7Sc1RfCkdAzWZUYX2xgdHZ3F5Ab8a4n7Od4eR9sPnzlzppfjNirbdOrn3gclg4sYj+EcXrzAGxm03mBZD68ffr64uPgngzZYNSUBpZ4etYWhvr1jx46XAH87lm2c00XrDKbtWq32AMD/btAGq2ZIQKunR+0CfRifjT+M6Sks2xUtV5y+i959YmFh4TSm64p1WVwjgdRTtqQ2BRJ65gwu9f065u9E2d9i+l5SHbFus4woe6eoK9rAPMHTgrO03qiny/YBV7k28fHpnRgBRvGp2o0rXev1+iXAdjGEf4Rz/49ldbmcCTABJsAEmAATYAJMgAkwASbABJgAE2ACTIAJMAEmEFYC/wN0Htlm6MggdwAAAABJRU5ErkJggg=="},function(e,t,n){function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}/*! aliyun rts sdk - ver2.6.0 created:2023/11/13 20:42:43 */window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=30)}([function(e,t,n){"use strict";var r=n(19),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function d(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)d(arguments[r],n);return t},extend:function(e,t,n){return d(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PUB_RECONNECT_ERROR_LIST=t.SUB_RECONNECT_ERROR_LIST=t.DeviceErrorCode=t.ErrorCode=void 0,function(e){e[e.ERROR_DEVICE_UNKNOWNERROR=1e4]="ERROR_DEVICE_UNKNOWNERROR",e[e.ERROR_DEVICE_AUDIODEVICE_NOTFOUND=10001]="ERROR_DEVICE_AUDIODEVICE_NOTFOUND",e[e.ERROR_DEVICE_VIDEODEVICE_NOTFOUND=10002]="ERROR_DEVICE_VIDEODEVICE_NOTFOUND",e[e.ERROR_DEVICE_AUDIODEVICE_NOTALLOWED=10003]="ERROR_DEVICE_AUDIODEVICE_NOTALLOWED",e[e.ERROR_DEVICE_VIDEODEVICE_NOTALLOWED=10004]="ERROR_DEVICE_VIDEODEVICE_NOTALLOWED",e[e.ERROR_DEVICE_AUDIODEVICE_NOTREADABLE=10005]="ERROR_DEVICE_AUDIODEVICE_NOTREADABLE",e[e.ERROR_DEVICE_VIDEODEVICE_NOTREADABLE=10006]="ERROR_DEVICE_VIDEODEVICE_NOTREADABLE",e[e.ERROR_DEIVCE_CONSTRAINEDERROR=10007]="ERROR_DEIVCE_CONSTRAINEDERROR",e[e.ERROR_SCREENSHARE_UNKNOWNERRO=10010]="ERROR_SCREENSHARE_UNKNOWNERRO",e[e.ERROR_SCREENSHARE_NOTALLOWED=10011]="ERROR_SCREENSHARE_NOTALLOWED",e[e.ERROR_SCREENSHARE_ENDED=10012]="ERROR_SCREENSHARE_ENDED",e[e.ERROR_SCREENSHARE_NOPERMISSION=10013]="ERROR_SCREENSHARE_NOPERMISSION",e[e.ERROR_SCREENSHARE_INVALIDACCESS=10014]="ERROR_SCREENSHARE_INVALIDACCESS",e[e.ERROR_SCREENSHARE_NOTSUPPORT=10018]="ERROR_SCREENSHARE_NOTSUPPORT",e[e.ERROR_DEVICE_NOTSUPPORT=10019]="ERROR_DEVICE_NOTSUPPORT",e[e.ERROR_SIGNAL_ERROR=10101]="ERROR_SIGNAL_ERROR",e[e.ERROR_PLAY_FAILED=10102]="ERROR_PLAY_FAILED",e[e.ERROR_NOTSUPPORT_WEBRTC=10110]="ERROR_NOTSUPPORT_WEBRTC",e[e.ERROR_BROWSER_NOTSUPPORT=10111]="ERROR_BROWSER_NOTSUPPORT",e[e.ERROR_BROWSER_VERSIONLOW=10112]="ERROR_BROWSER_VERSIONLOW",e[e.ERROR_NOTSUPPORT_H264=10113]="ERROR_NOTSUPPORT_H264",e[e.ERROR_CREATEOFFER=10114]="ERROR_CREATEOFFER",e[e.ERROR_NO_DATACHANNEL=10115]="ERROR_NO_DATACHANNEL",e[e.ERROR_INIT_LOCAL_FAIL=10116]="ERROR_INIT_LOCAL_FAIL",e[e.ERROR_HEMLELEMENT_NOTMATCH=10125]="ERROR_HEMLELEMENT_NOTMATCH",e[e.ERROR_AUTOPLAY_ERROR=10201]="ERROR_AUTOPLAY_ERROR",e[e.ERROR_PLAY_URL=10202]="ERROR_PLAY_URL",e[e.ERROR_SUBSCRIBE_NOTHING=10203]="ERROR_SUBSCRIBE_NOTHING",e[e.ERROR_HTMLELEMENT_ERROR=10204]="ERROR_HTMLELEMENT_ERROR",e[e.ERROR_HTTPREQUEST_ERROR=10205]="ERROR_HTTPREQUEST_ERROR",e[e.ERROR_ANSWER_ERROR=10206]="ERROR_ANSWER_ERROR",e[e.ERROR_INBOUND_TIMEOUT=10207]="ERROR_INBOUND_TIMEOUT",e[e.ERROR_STREAM_ENDED=10208]="ERROR_STREAM_ENDED",e[e.ERROR_PC_DISCONNECTED=10209]="ERROR_PC_DISCONNECTED",e[e.ERROR_PUBLISH_URL=10300]="ERROR_PUBLISH_URL",e[e.ERROR_PUBLISH_NOAUDIO=10301]="ERROR_PUBLISH_NOAUDIO",e[e.ERROR_MEDIASTREAMTRACK_TYPE_ERROR=11e3]="ERROR_MEDIASTREAMTRACK_TYPE_ERROR",e[e.ERROR_MEDIASTREAMTRACK_KIND_ERROR=11001]="ERROR_MEDIASTREAMTRACK_KIND_ERROR",e[e.ERROR_MEDIASTREAMTRACK_AUDIO_NONE=11002]="ERROR_MEDIASTREAMTRACK_AUDIO_NONE",e[e.ERROR_CUSTOMSTREAM_NONE=11003]="ERROR_CUSTOMSTREAM_NONE",e[e.ERROR_CUSTOMSTREAM_INVALID=11004]="ERROR_CUSTOMSTREAM_INVALID",e[e.ERROR_CUSTOMSTREAM_TRACK_NONE=11005]="ERROR_CUSTOMSTREAM_TRACK_NONE",e[e.ERROR_PREERCONNECTION_UNKNOWN=12e3]="ERROR_PREERCONNECTION_UNKNOWN",e[e.ERROR_SUBADD_NO_RESULT=13e3]="ERROR_SUBADD_NO_RESULT",e[e.ERROR_PUBADD_NO_RESULT=13001]="ERROR_PUBADD_NO_RESULT"}(r=t.ErrorCode||(t.ErrorCode={})),function(e){e[e.ERROR_DEVICE_UNKNOWNERROR=1e4]="ERROR_DEVICE_UNKNOWNERROR",e[e.ERROR_DEVICE_AUDIODEVICE_NOTFOUND=10001]="ERROR_DEVICE_AUDIODEVICE_NOTFOUND",e[e.ERROR_DEVICE_VIDEODEVICE_NOTFOUND=10002]="ERROR_DEVICE_VIDEODEVICE_NOTFOUND",e[e.ERROR_DEVICE_AUDIODEVICE_NOTALLOWED=10003]="ERROR_DEVICE_AUDIODEVICE_NOTALLOWED",e[e.ERROR_DEVICE_VIDEODEVICE_NOTALLOWED=10004]="ERROR_DEVICE_VIDEODEVICE_NOTALLOWED",e[e.ERROR_DEVICE_AUDIODEVICE_NOTREADABLE=10005]="ERROR_DEVICE_AUDIODEVICE_NOTREADABLE",e[e.ERROR_DEVICE_VIDEODEVICE_NOTREADABLE=10006]="ERROR_DEVICE_VIDEODEVICE_NOTREADABLE",e[e.ERROR_SCREENSHARE_NOTSUPPORT=10010]="ERROR_SCREENSHARE_NOTSUPPORT",e[e.ERROR_SCREENSHARE_NOTALLOWED=10011]="ERROR_SCREENSHARE_NOTALLOWED",e[e.ERROR_SCREENSHARE_ENDED=10012]="ERROR_SCREENSHARE_ENDED",e[e.ERROR_SCREENSHARE_NOPERMISSION=10013]="ERROR_SCREENSHARE_NOPERMISSION",e[e.ERROR_SCREENSHARE_SAFARI_INVALIDACCESS=10014]="ERROR_SCREENSHARE_SAFARI_INVALIDACCESS",e[e.ERROR_SCREENSHARE_UNKNOWNERRO=10019]="ERROR_SCREENSHARE_UNKNOWNERRO",e[e.ERROR_DEVICE_NOTSUPPORT=2e4]="ERROR_DEVICE_NOTSUPPORT"}(t.DeviceErrorCode||(t.DeviceErrorCode={})),t.SUB_RECONNECT_ERROR_LIST=[r.ERROR_INBOUND_TIMEOUT,r.ERROR_STREAM_ENDED,r.ERROR_PC_DISCONNECTED],t.PUB_RECONNECT_ERROR_LIST=[r.ERROR_PC_DISCONNECTED]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._eventMap={}}return e.prototype.listeners=function(e){return this._eventMap[e]||[]},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._eventMap[e];return!!Array.isArray(i)&&(i.forEach((function(e){return e.apply(t,n)})),!0)},e.prototype.off=function(e,t){var n=this._eventMap[e];return Array.isArray(n)&&(this._eventMap[e]=n.filter((function(e){return e!==t}))),this},e.prototype.removeAllListeners=function(e){return void 0===e?this._eventMap={}:this._eventMap[e]&&(this._eventMap[e]=[]),this},e.prototype.on=function(e,t){return this._eventMap[e]?this._eventMap[e].push(t):this._eventMap[e]=[t],this},e.prototype.once=function(e,t){var n=this;return this.on(e,(function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];n.off(e,r),t.apply(n,i)})),this},e}();t.default=r},function(e,t,n){/*! useragent-util - ver 1.2.0 created:2022/10/26 20:53:20 */self,e.exports=function(){"use strict";var e={622:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserUtil=t.BrowserType=void 0;var r,i=n(101);!function(e){e.IE="IE",e.Chrome="Chrome",e.Safari="Safari",e.Firefox="Firefox",e.Opera="Opera",e.Edge="Edge",e.MicroMessenger="MicroMessenger",e.X5Core="X5Core",e.Quark="Quark",e.QQ="QQ",e.QQBrowser="QQBrowser",e.DingTalk="DingTalk",e.Electron="Electron",e.Sogou="Sogou",e.Vivo="VivoBrowser",e.Oppo="OppoBrowser",e.UC="UCBrowser",e.MI="MiBrowser",e.Lenovo="SLBrowser",e.Maxthon="Maxthon",e.Liebao="Liebao",e.Huawei="Huawei",e.Meizu="MZBrowser",e.Finger="FingerBrowser",e.Samsung="SamsungBrowser",e.WebVeiw="WebVeiw",e.Unknown="unknown"}(r=t.BrowserType||(t.BrowserType={}));var o=function(){function e(){}return Object.defineProperty(e,"isBrowser",{get:function(){return"undefined"!=typeof document},enumerable:!1,configurable:!0}),Object.defineProperty(e,"domain",{get:function(){return window.location.protocol+window.location.host},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isHttps",{get:function(){return this.isBrowser&&document.location&&("https:"==document.location.protocol||0===document.location.host.indexOf("127.0.0.1:")||0===document.location.host.indexOf("localhost:"))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isSupportScreenShare",{get:function(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isChrome",{get:function(){return e._getBrowserInfo(),r.Chrome===e._browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isSafari",{get:function(){return e._getBrowserInfo(),r.Safari===e._browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e._getBrowserInfo(),r.IE===e._browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isFirefox",{get:function(){return e._getBrowserInfo(),r.Firefox===e._browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isEdge",{get:function(){return e._getBrowserInfo(),r.Edge===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isSogou",{get:function(){return e._getBrowserInfo(),r.Sogou===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isVivoBroswer",{get:function(){return e._getBrowserInfo(),r.Vivo===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isOppoBrowser",{get:function(){return e._getBrowserInfo(),r.Oppo===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isMiBrowser",{get:function(){return e._getBrowserInfo(),r.MI===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isLenovoBrowser",{get:function(){return e._getBrowserInfo(),r.Lenovo===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isMaxthonBrowser",{get:function(){return e._getBrowserInfo(),r.Maxthon===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isLiebaoBrowser",{get:function(){return e._getBrowserInfo(),r.Liebao===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isHuaweiBrowser",{get:function(){return e._getBrowserInfo(),r.Huawei===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isMZBrowser",{get:function(){return e._getBrowserInfo(),r.Meizu===e._browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isSamsungBrowser",{get:function(){return e._getBrowserInfo(),r.Samsung===e._browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isOpera",{get:function(){return e._getBrowserInfo(),r.Opera===e._browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isMicroMessenger",{get:function(){return e._getBrowserInfo(),e._browserName===r.MicroMessenger},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isQQ",{get:function(){return e._getBrowserInfo(),r.QQ===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isQQBrowser",{get:function(){return e._getBrowserInfo(),r.QQBrowser===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isX5Core",{get:function(){return e._getBrowserInfo(),e._browserName===r.X5Core},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isUCBrowser",{get:function(){return e._getBrowserInfo(),e._browserName===r.UC},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isQuarkBrowser",{get:function(){return e._getBrowserInfo(),e._browserName===r.Quark},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isFingerBrowser",{get:function(){return e._getBrowserInfo(),e._browserName===r.Finger},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isChromeCore",{get:function(){return e._getBrowserInfo(),"Chrome"===e._core},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return e._getBrowserInfo(),e._browserName===r.WebVeiw},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isDingTalk",{get:function(){return e._getBrowserInfo(),e._browserName===r.DingTalk},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isUnknown",{get:function(){return e._getBrowserInfo(),r.Unknown===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"browserName",{get:function(){return e._getBrowserInfo(),e._browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"browserVersion",{get:function(){return e._getBrowserInfo(),e._browserVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e,"browserMainVersion",{get:function(){return e._getBrowserInfo(),e._browserVersion?parseInt(e._browserVersion.split(".")[0],10):0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"browserCoreVersion",{get:function(){return navigator.userAgent.toLowerCase(),i.SystemUtil.isIos||i.SystemUtil.isMacOS,e.browserMainVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isElectron",{get:function(){return e._getBrowserInfo(),r.Electron===e.browserName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"userAgent",{get:function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("gecko");if(t>-1){t=e.indexOf(" ",t);var n=(e=e.substring(t+1,e.length)).split(" ");e="";for(var r=0;r<n.length;++r){var i=n[r].split("/");i&&i.length&&(e+=i[0]+" ")}}return e},enumerable:!1,configurable:!0}),e.compareVersion=function(t){if(e._getBrowserInfo(),e._browserVersion){for(var n=e._browserVersion.split("."),r=t.split("."),i=0,o=0,a=0;a<n.length&&a<r.length;++a){if((i=isNaN(parseInt(n[a],10))?0:parseInt(n[a],10))<(o=isNaN(parseInt(r[a],10))?0:parseInt(r[a],10)))return!1;if(i>o)return!0}return!0}return!0},e._getBrowserInfo=function(){if(!e._browserName||!e._browserVersion)if(navigator&&navigator.userAgent){var t=navigator.userAgent.toLowerCase(),n=void 0;(n=t.match(/edg[e|a]?\/([\d.]+)/))||(n=t.match(/edgios\/([\d.]+)/))?e._updateBrowserInfo(r.Edge,t,n[1]):(n=t.match(/rv:([\d.]+)\) like gecko/))||(n=t.match(/msie ([\d.]+)/))?e._updateBrowserInfo(r.IE,t,n[1]):(n=t.match(/vivobrowser\/([\d.]+)/))?e._updateBrowserInfo(r.Vivo,t,n[1]):(n=t.match(/miuibrowser\/([\d.]+)/))?e._updateBrowserInfo(r.MI,t,n[1]):(n=t.match(/samsungbrowser\/([\d.]+)/))?e._updateBrowserInfo(r.Samsung,t,n[1]):(n=t.match(/heytapbrowser\/([\d.]+)/))?e._updateBrowserInfo(r.Oppo,t,n[1]):(n=t.match(/mzbrowser\/([\d.]+)/))?e._updateBrowserInfo(r.Meizu,t,n[1]):(n=t.match(/ucbrowser\/([\d.]+)/))?e._updateBrowserInfo(r.UC,t,n[1]):(n=t.match(/quark\/([\d.]+)/))?e._updateBrowserInfo(r.Quark,t,n[1]):(n=t.match(/slbrowser\/([\d.]+)/))?e._updateBrowserInfo(r.Lenovo,t,n[1]):(n=t.match(/lbbrowser\/([\d.]+)/))?e._updateBrowserInfo(r.Liebao,t,n[1]):(n=t.match(/fingerbrowser\/([\d.]+)/))?e._updateBrowserInfo(r.Finger,t,n[1]):(n=t.match(/huaweibrowser\/([\d.]+)/))?e._updateBrowserInfo(r.Huawei,t,n[1]):(n=t.match(/maxthon\/([\d.]+)/))?e._updateBrowserInfo(r.Maxthon,t,n[1]):(n=t.match(/firefox\/([\d.]+)/))?e._updateBrowserInfo(r.Firefox,t,n[1]):(n=t.match(/electron\/([\d.]+)/))?e._updateBrowserInfo(r.Electron,t,n[1]):(n=t.match(/chrome\/([\d.]+)/))&&this._isChrome(t)||(n=t.match(/crios\/([\d.]+)/))&&this._isChrome(t)?e._updateBrowserInfo(r.Chrome,t,n[1]):(n=t.match(/metasr\s([\d.]+)/))||(n=t.match(/sogoumobilebrowser\/([\d.]+)/))?e._updateBrowserInfo(r.Sogou,t,n[1]):(n=t.match(/opr.([\d.]+)/))?e._updateBrowserInfo(r.Opera,t,n[1]):(n=t.match(/micromessenger.([\d.]+)/))?e._updateBrowserInfo(r.MicroMessenger,t,n[1]):(n=t.match(/qq\/([\d.]+)/))?e._updateBrowserInfo(r.QQ,t,n[1]):(n=t.match(/m?qqbrowser\/([\d.]+)/))||(n=t.match(/qqbrowserlite\/([\d.]+)/))?e._updateBrowserInfo(r.QQBrowser,t,n[1]):(n=t.match(/dingtalk.([\d.]+)/))?e._updateBrowserInfo(r.DingTalk,t,n[1]):(n=t.match(/tbs\/([\d.]+)/))?e._updateBrowserInfo(r.X5Core,t,n[1]):(n=t.match(/version\/([\d.]+).*safari/))&&this._isSafari(t)&&e._updateBrowserInfo(r.Safari,t,n[1]),e._browserName===r.Unknown&&e._isWebview(t)&&e._updateBrowserInfo(r.WebVeiw,t,"")}else e._browserName=r.Unknown,e._browserVersion="0.0"},e._isChrome=function(t){var n=t.split(/\(|\)/);if(e._core="Chrome",5===n.length){var r=n[4].trim().split(" ");if(2===r.length){if(r[0].indexOf("chrome")>-1&&r[1].indexOf("safari")>-1)return!0}else if(3===r.length){if(r[1].indexOf("mobile")>-1&&r[2].indexOf("safari")>-1&&(r[0].indexOf("chrome")>-1||r[0].indexOf("crios")>-1))return!0}else if(t.indexOf("qianniu")>-1)return!0}else if(t.indexOf("dingtalk")>-1)return!0;return!1},e._isSafari=function(e){var t=e.split(/\(|\)/);if(5===t.length){var n=t[4].trim().split(" ");if(2===n.length){if(n[0].indexOf("version")>-1&&n[1].indexOf("safari")>-1)return!0}else if(3===n.length&&n[0].indexOf("version")>-1&&n[1].indexOf("mobile")>-1&&n[2].indexOf("safari")>-1)return!0}return!1},e._isWebview=function(e){if(e){var t=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig"),n=new RegExp("("+["VivoBrowser","MZBrowser","MiuiBrowser"].join("|")+")","ig");return!!e.match(t)&&!e.match(n)}},e._updateBrowserInfo=function(t,n,o){e._browserName=t;var a=null;switch(t){case r.QQBrowser:i.SystemUtil.isIos||i.SystemUtil.isMacOS?(a=n.match(/version\/([\d.]+).*safari/),e._browserVersion=a?a[1]:"0.0"):(a=n.match(/chrome\/([\d.]+)/),e._browserVersion=a?a[1]:"0.0");break;case r.Vivo:case r.Oppo:case r.Meizu:case r.Huawei:case r.Sogou:case r.Samsung:a=n.match(/chrome\/([\d.]+)/),e._browserVersion=a?a[1]:"0.0";break;case r.WebVeiw:i.SystemUtil.isAndroid?(a=n.match(/chrome\/([\d.]+)/),e._browserVersion=a?a[1]:"0.0"):i.SystemUtil.isIos&&(e._browserVersion=i.SystemUtil.systemVersion);break;default:e._browserVersion=o}},e._browserName=r.Unknown,e._browserVersion="",e._core="",e}();t.BrowserUtil=o},864:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Guid=void 0;var n=function(){function e(){}return e.create=function(e,t){void 0===t&&(t=16);var n,r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||i.length,e)for(n=0;n<e;n++)o[n]=i[0|Math.random()*t];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(r=0|16*Math.random(),o[n]=i[19==n?3&r|8:r]);return o.join("")},e}();t.Guid=n},442:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorage=void 0;var r=n(864),i=function(){function e(){}return Object.defineProperty(e,"uuid",{get:function(){var t="alirtc_uuid",n=e.get(t);return n||(n=r.Guid.create(32),e.set(t,n)),n},enumerable:!1,configurable:!0}),e.get=function(e){var t="";return window&&window.localStorage&&(t=window.localStorage.getItem(e)||""),t},e.set=function(e,t){e&&window&&window.localStorage&&window.localStorage.setItem(e,t)},e}();t.LocalStorage=i},72:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ApiRequest=void 0;var n=function(){function e(){}return e.postBody=function(t,n,r){t=e._getUrl(t,n);var i,o={};return o.headers||(o.headers={}),o.headers.Accept="application/json",o.headers["Content-Type"]="application/json",new Promise((function(n,o){e.requestBody("POST",t,r).then((function(e){return i=e,e.ok?e.json():e.text()})).then((function(t){i.ok?t.code?(t=e._intercept(t),o(t)):n(t.data):o(e._httpErrorMessage(i,t))})).catch((function(t){t=e._httpErrorMessage(t),o(t)}))}))},e.get=function(t,n,r){var i;return void 0===r&&(r={}),t=e._getUrl(t,n),r.headers||(r.headers={}),r.headers["Content-Type"]="application/json",new Promise((function(n,o){e.request("GET",t,r).then((function(e){return i=e,e.ok?e.json():e.text()})).then((function(t){i.ok?t.code?(t=e._intercept(t),o(t)):n(t.data):o(e._httpErrorMessage(i,t))})).catch((function(t){t=e._httpErrorMessage(t),o(t)}))}))},e.post=function(t,n,r,i){var o;return void 0===i&&(i={}),t=e._getUrl(t,n),i.headers||(i.headers={}),i.body=r,i.headers.Accept="application/json",i.headers["Content-Type"]="application/json",new Promise((function(n,r){e.request("POST",t,i).then((function(e){return o=e,e.ok?e.json():e.text()})).then((function(t){o.ok?t.code?(t=e._intercept(t),r(t)):n(t.data):r(e._httpErrorMessage(o,t))})).catch((function(t){t=e._httpErrorMessage(t),r(t)}))}))},e.request=function(e,t,n){void 0===e&&(e="GET");var r=new Headers(n.headers),i=new Request(t,{method:e,headers:r});return fetch(i)},e.requestBody=function(e,t,n){return void 0===e&&(e="GET"),fetch(t,{method:e,body:n,headers:new Headers({"Content-Type":"application/json"})})},e.ajaxPost=function(t,n,r,i){return void 0===i&&(i={}),t=e._getUrl(t,n),i.headers||(i.headers={}),i.headers.Accept="application/json",i.headers["Content-Type"]="application/json",e.ajax("POST",t,r,i)},e.ajax=function(t,n,r,i){void 0===t&&(t="GET"),void 0===i&&(i={});var o=new XMLHttpRequest;return new Promise((function(a,s){o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var t=JSON.parse(o.responseText);t.code?(t=e._intercept(t),s(t)):a(t)}else s({message:o.responseText||"\u8bf7\u6c42\u5931\u8d25:"+n})},o.open(t,n,!0);try{if(i.withCredentials&&(o.withCredentials=!0),i.headers)for(var c in i.headers)o.setRequestHeader(c,i.headers[c])}catch(e){return void s(e)}try{o.send(r)}catch(e){s(e)}}))},e._getUrl=function(e,t){var n=[];if(t)for(var r in t)n.push(r+"="+t[r]);var i=n.join("&");return(-1!=e.indexOf("?")?e:e+"?")+i},e._httpErrorMessage=function(e,t){return e.message||(e.message="HTTP "+e.status+"("+e.statusText+") : "+t),e},e._intercept=function(e){var t=e.data;return e.code&&((t=t||{}).data=e.data,t.code=e.code,t.description=e.description,t.message="0x"+Number(e.code).toString(16)+", "+e.description,t.tid&&(t.message+=", tid="+t.tid)),t},e}();t.ApiRequest=n},101:function(e,t){var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.SystemUtil=t.WindowsType=t.SystemType=void 0,function(e){e.Unknown="Unknown",e.MacOS="Mac",e.Windows="Windows",e.Android="Android",e.Iphone="iphone",e.Ipad="ipad",e.iOS="iOS",e.Linux="Linux",e.ChromeOS="ChromeOS"}(n=t.SystemType||(t.SystemType={})),function(e){e.Windows10="Windows 10",e.Windows7="Windows 7",e.WindowsVista="Windows vista",e.WindowsXP="Windows xp"}(r=t.WindowsType||(t.WindowsType={}));var i=function(){function e(){}return Object.defineProperty(e,"isMacOS",{get:function(){return n.MacOS===e.systemName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.systemName.indexOf(n.Windows)>-1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return n.Iphone===e.systemName||n.Ipad===e.systemName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return n.Android===e.systemName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isLinux",{get:function(){return n.Linux===e.systemName||n.Linux===e._platform},enumerable:!1,configurable:!0}),Object.defineProperty(e,"systemName",{get:function(){return e._getSystemInfo(),e._systemName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"systemVersion",{get:function(){return e._getSystemInfo(),e._systemVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e,"platform",{get:function(){return e._getSystemInfo(),e._platform},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isUnknown",{get:function(){return!e.platform||e.platform===n.Unknown},enumerable:!1,configurable:!0}),e.compareVersion=function(t){if(e._getSystemInfo(),e._systemVersion){for(var n=e._systemVersion.split("."),r=t.split("."),i=0,o=0,a=0;a<n.length&&a<r.length;++a){if((i=isNaN(parseInt(n[a],10))?0:parseInt(n[a],10))<(o=isNaN(parseInt(r[a],10))?0:parseInt(r[a],10)))return!1;if(i>o)return!0}return!0}return!0},e._getSystemInfo=function(){if(!e._systemName||!e._systemVersion||!e._platform)if(navigator&&navigator.userAgent){var t=navigator.userAgent.toLowerCase();t.indexOf("ipad")>-1?(e._systemName=n.Ipad,e._platform=n.iOS,e._systemVersion=e._getIosSystemVersion(t)):t.indexOf("iphone")>-1?(e._systemName=n.Iphone,e._platform=n.iOS,e._systemVersion=e._getIosSystemVersion(t)):t.indexOf("android")>-1?(e._platform=n.Android,e._systemName=n.Android,e._systemVersion=e._getAndroidSystemVersion(t)):t.indexOf("win")>-1?t.indexOf("windwos nt 10")>-1||t.indexOf("windows 10")?(e._systemName=r.Windows10,e._platform=n.Windows,e._systemVersion="10"):t.indexOf("windows nt 6.1")>-1||t.indexOf("windows 7")>-1?(e._systemName=r.Windows7,e._platform=n.Windows,e._systemVersion="7"):t.indexOf("windows nt 6.0")>-1||t.indexOf("windows vista")>-1?(e._systemName=r.WindowsVista,e._platform=n.Windows,e._systemVersion="vista"):t.indexOf("widows nt 5.1")>-1||t.indexOf("windows xp")>-1?(e._systemName=r.WindowsXP,e._platform=n.Windows,e._systemVersion="xp"):(e._platform=n.Windows,e._systemName=n.Windows,e._systemVersion="0.0"):t.indexOf("mac")>-1?navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0?(e._systemName=n.Ipad,e._platform=n.iOS,e._systemVersion=e._getIosSystemVersion(t)):(e._platform=n.MacOS,e._systemName=n.MacOS,e._systemVersion=e._getMacSystemVersion(t)):t.indexOf("linux")>-1?(e._platform=n.Linux,e._systemName=n.Linux,e._systemVersion="0.0"):t.indexOf("cros")>-1?(e._platform=n.Linux,e._systemName=n.ChromeOS,e._systemVersion="0.0"):(e._systemName=n.Unknown,e._platform=n.Windows,e._systemVersion="0.0")}else e._systemName=n.Unknown,e._platform=n.Unknown,e._systemVersion="0.0"},e._getIosSystemVersion=function(e){return(e.match(/OS [\d._]*/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")},e._getMacSystemVersion=function(e){return(e.match(/OS X [\d._]*/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")},e._getAndroidSystemVersion=function(e){return e.substr(e.indexOf("android")+8,e.indexOf(";",e.indexOf("android"))-e.indexOf("android")-8)},e._systemName="",e._systemVersion="",e._platform=n.Unknown,e}();t.SystemUtil=i}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}var r={};return function(){var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.ApiRequest=e.LocalStorage=e.Guid=e.BrowserUtil=e.SystemUtil=void 0;var t=n(101);Object.defineProperty(e,"SystemUtil",{enumerable:!0,get:function(){return t.SystemUtil}});var i=n(622);Object.defineProperty(e,"BrowserUtil",{enumerable:!0,get:function(){return i.BrowserUtil}});var o=n(864);Object.defineProperty(e,"Guid",{enumerable:!0,get:function(){return o.Guid}});var a=n(442);Object.defineProperty(e,"LocalStorage",{enumerable:!0,get:function(){return a.LocalStorage}});var s=n(72);Object.defineProperty(e,"ApiRequest",{enumerable:!0,get:function(){return s.ApiRequest}}),window&&(window.SystemUtil=t.SystemUtil,window.BrowserUtil=i.BrowserUtil,window.Guid=o.Guid,window.LocalStorage=a.LocalStorage,window.ApiRequest=s.ApiRequest)}(),r}()},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],a=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=r.parseRtpMap(a),c=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?r.parseFmtp(c[0]):{},s.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),o&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var d=r.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=d}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var a=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RtsError=void 0;var r=n(1),i=function(){function e(e,t,n,i){this.errorCode=e,this.errorCodeName=r.ErrorCode[e],this.message=t,this.traceId=n,i&&(this.extraInfo=i)}return e.prototype.renameCode=function(e){this.errorCode=e,this.errorCodeName=r.ErrorCode[e]},e}();t.RtsError=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RETRY_PUBLISH_INTERVAL=t.DEFAULT_RETRY_SUBSCRIBE_INTERVAL=t.DEFAULT_RETRY_PUBLISH_LIMIT=t.DEFAULT_RETRY_SUBSCRIBE_LIMIT=t.EConnectStatus=t.TrackType=void 0,function(e){e.AUDIO="audio",e.VIDEO="video"}(t.TrackType||(t.TrackType={})),function(e){e[e.CONNECT_STATUS_DISCONNECTED=0]="CONNECT_STATUS_DISCONNECTED",e[e.CONNECT_STATUS_CONNECTING=1]="CONNECT_STATUS_CONNECTING",e[e.CONNECT_STATUS_CONNECTED=2]="CONNECT_STATUS_CONNECTED",e[e.CONNECT_STATUS_RECONNECTING=3]="CONNECT_STATUS_RECONNECTING"}(t.EConnectStatus||(t.EConnectStatus={})),t.DEFAULT_RETRY_SUBSCRIBE_LIMIT=5,t.DEFAULT_RETRY_PUBLISH_LIMIT=5,t.DEFAULT_RETRY_SUBSCRIBE_INTERVAL=2e3,t.DEFAULT_RETRY_PUBLISH_INTERVAL=2e3},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateNetworkCondition=t.makeCancelable=t.hasVideoTrack=t.hasAudioTrack=t.getVideoTrack=t.getAudioTrack=t.pruneSubUrl=t.getJitterBufferDelayAvg=void 0,t.getJitterBufferDelayAvg=function(e,t){return e&&t?Number(e)/Number(t)*1e3:-1},t.pruneSubUrl=function(e,t){var n=e||"";return n=n.replace("@subaudio=no","").replace("@subvideo=no",""),t&&(n=n.split("?")[0]),n},t.getAudioTrack=function(e){return e.getAudioTracks()[0]},t.getVideoTrack=function(e){return e.getVideoTracks()[0]},t.hasAudioTrack=function(e){return e.getAudioTracks().length>0},t.hasVideoTrack=function(e){return e.getVideoTracks().length>0},t.makeCancelable=function(e){var t=!1;return{promise:new Promise((function(n,r){e.then((function(e){return t?r({isCanceled:!0}):n(e)})),e.catch((function(e){return r(t?{isCanceled:!0}:e)}))})),cancel:function(){t=!0}}},t.evaluateNetworkCondition=function(e,t,n,r,i){var o=0;if(!navigator.onLine)return 6;var a,s=[{loss:0,rtt:0,jbd:1},{loss:0,rtt:1,jbd:0},{loss:0,rtt:.5,jbd:.5},{loss:1,rtt:0,jbd:0},{loss:.8,rtt:0,jbd:.2},{loss:.8,rtt:.2,jbd:0},{loss:.6,rtt:.2,jbd:.2}],c=-1,u=-1,d=-1;if("number"==typeof t&&t>=0||"number"==typeof n&&n>=0){c=0;var l=!1,p=!1;"number"==typeof t&&t>=0&&(c+=t,l=!0),"number"==typeof n&&n>=0&&(c+=n,p=!0),l&&!p&&(c*=2),p&&!l&&(c*=1.8)}if("number"==typeof e&&e>=0&&(d=e),("number"==typeof r&&r>=0||"number"==typeof i&&i>=0)&&(u=0,"number"==typeof r&&r>=0&&(u+=r),"number"==typeof i&&i>=0&&(u+=i)),(a=4*(-1!==c?1:0)+2*(-1!==d?1:0)+(-1!==u?1:0))>0){var f=1.2*c*s[a-1].loss+d/1500*s[a-1].rtt+u/3e3*s[a-1].jbd;o=f<=.1?1:f<=.23?2:f<=.36?3:f<=.49?4:5}else o=0;return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={version:"2.6.0",protocol_version:2,sdk_version:"0.0.1"}},function(e,t,n){/*! media-device - ver 1.2.0 created:2023/9/6 16:39:39 */self,e.exports=function(){"use strict";var e={304:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserDeviceManager=void 0;var r=n(101),i=n(853),o=n(62),a=n(913),s=n(331),c=n(1),u=n(935),d=n(603),l=function(){function e(){this.systemUtil=new r.SystemUtil,this.deviceManager=this.createDeviceManager()}return e.prototype.getCameraList=function(){return this.deviceManager.getCameraList()},e.prototype.getMicList=function(){return this.deviceManager.getMicList()},e.prototype.getSpeakerList=function(){return this.deviceManager.getSpeakerList()},e.prototype.getAudioTrack=function(e){return this.deviceManager.getAudioTrack(e)},e.prototype.getVideoTrack=function(e){return this.deviceManager.getVideoTrack(e)},e.prototype.getScreenTrack=function(e){return this.deviceManager.getScreenTrack(e)},e.prototype.getAudioStream=function(e){return this.deviceManager.getAudioStream(e)},e.prototype.getVideoStream=function(e){return this.deviceManager.getVideoStream(e)},e.prototype.getScreenStream=function(e){return this.deviceManager.getScreenStream(e)},e.prototype.checkSupportScreenShare=function(){return this.deviceManager.checkSupportScreenShare()},e.prototype.createDeviceManager=function(){return this.systemUtil.isWindows?new u.WindowsDeviceManager:this.systemUtil.isAndroid?new i.AndroidDeviceManager:this.systemUtil.isIos?new a.IosDeviceManager:this.systemUtil.isMacOS?new c.MacDeviceManager:this.systemUtil.isLinux?new s.LinuxDeviceManager:new o.BaseDeviceManager},e.isDeviceManagerError=d.DeviceError.isDeviceManagerError,e}();t.BrowserDeviceManager=l},603:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceError=t.DeviceErrorDescription=t.DeviceErrorCode=void 0;var r=n(610);!function(e){e[e.ERROR_DEVICE_UNKNOWNERROR=1e4]="ERROR_DEVICE_UNKNOWNERROR",e[e.ERROR_DEVICE_AUDIODEVICE_NOTFOUND=10001]="ERROR_DEVICE_AUDIODEVICE_NOTFOUND",e[e.ERROR_DEVICE_VIDEODEVICE_NOTFOUND=10002]="ERROR_DEVICE_VIDEODEVICE_NOTFOUND",e[e.ERROR_DEVICE_AUDIODEVICE_NOTALLOWED=10003]="ERROR_DEVICE_AUDIODEVICE_NOTALLOWED",e[e.ERROR_DEVICE_VIDEODEVICE_NOTALLOWED=10004]="ERROR_DEVICE_VIDEODEVICE_NOTALLOWED",e[e.ERROR_DEVICE_AUDIODEVICE_NOTREADABLE=10005]="ERROR_DEVICE_AUDIODEVICE_NOTREADABLE",e[e.ERROR_DEVICE_VIDEODEVICE_NOTREADABLE=10006]="ERROR_DEVICE_VIDEODEVICE_NOTREADABLE",e[e.ERROR_DEIVCE_CONSTRAINEDERROR=10007]="ERROR_DEIVCE_CONSTRAINEDERROR",e[e.ERROR_SCREENSHARE_UNKNOWNERRO=10010]="ERROR_SCREENSHARE_UNKNOWNERRO",e[e.ERROR_SCREENSHARE_NOTALLOWED=10011]="ERROR_SCREENSHARE_NOTALLOWED",e[e.ERROR_SCREENSHARE_ENDED=10012]="ERROR_SCREENSHARE_ENDED",e[e.ERROR_SCREENSHARE_NOPERMISSION=10013]="ERROR_SCREENSHARE_NOPERMISSION",e[e.ERROR_SCREENSHARE_INVALIDACCESS=10014]="ERROR_SCREENSHARE_INVALIDACCESS",e[e.ERROR_SCREENSHARE_NOTSUPPORT=10018]="ERROR_SCREENSHARE_NOTSUPPORT",e[e.ERROR_DEVICE_NOTSUPPORT=10019]="ERROR_DEVICE_NOTSUPPORT"}(t.DeviceErrorCode||(t.DeviceErrorCode={})),function(e){e.ERRORMESSAGE_DEVICENOTFOUND="Requested device not found",e.ERRORMESSAGE_DEVICENOTALLOWED="Permission denied",e.ERRORMESSAGE_MACCHROME_DEVICENOTREADABLE="Permission denied by system",e.ERRORMESSAGE_MACSAFARI_DEVICENOTALLOWED="The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.",e.ERRORMESSAGE_MOBILEDEVICE_NOTALLOWED="video device not allowed",e.ERRORMESSAGE_AUDIODEVICENOTREADABLE="Could not start audio source",e.ERRORMESSAGE_VIDEODEVICENOTREADABLE="Could not start video source",e.ERRORNAME_DEVICENOTFOUND="NotFoundError",e.ERRORNAME_DEVICENOTALLOWED="NotAllowedError",e.ERRORNAME_DEVICENOTREADABLE="NotReadableError",e.ERRORNAME_DEVICEOVERCONSTRAINED="OverconstrainedError",e.ERRORNAME_INVALID_ACCESS="InvalidAccessError"}(t.DeviceErrorDescription||(t.DeviceErrorDescription={}));var i=function(){function e(e,t){this.linkUtil=new r.LinkUtil,this.code=e,this.reason=t,this.relatedLink=this.linkUtil.getRelatedLink(e)}return e.isDeviceManagerError=function(e){return!!(e&&"object"==typeof e&&"code"in e&&"reason"in e)},e}();t.DeviceError=i},873:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FacingMode=t.DeviceType=t.MobileCameraType=void 0,function(e){e[e.USER=0]="USER",e[e.ENV=1]="ENV"}(t.MobileCameraType||(t.MobileCameraType={})),function(e){e.Camera="videoinput",e.Mic="audioinput",e.Screen="screen",e.Speaker="audiooutput"}(t.DeviceType||(t.DeviceType={})),function(e){e.USER="user",e.ENVIRONMENT="environment"}(t.FacingMode||(t.FacingMode={}))},853:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidDeviceManager=void 0;var o=function(e){function t(){return e.call(this)||this}return i(t,e),t}(n(583).MobileDeviceManager);t.AndroidDeviceManager=o},62:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDeviceManager=void 0;var r=n(603),i=n(873),o=function(){function e(){}return e.prototype.checkSupportScreenShare=function(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&navigator.mediaDevices.getDisplayMedia)},e.prototype.getCameraList=function(){var e=this;return new Promise((function(t,n){e.checkSupport()?e.getDeviceRight(i.DeviceType.Camera).then((function(){e.getDeviceList(i.DeviceType.Camera).then((function(e){t(e)})).catch((function(t){n(e.parseError(i.DeviceType.Camera,t))}))})).catch((function(t){n(e.parseError(i.DeviceType.Camera,t))})):n(new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_NOTSUPPORT,"not support navigator.mediaDevices"))}))},e.prototype.getMicList=function(){var e=this;return new Promise((function(t,n){e.checkSupport()?e.getDeviceRight(i.DeviceType.Mic).then((function(){e.getDeviceList(i.DeviceType.Mic).then((function(e){t(e)})).catch((function(t){n(e.parseError(i.DeviceType.Mic,t))}))})).catch((function(t){n(e.parseError(i.DeviceType.Mic,t))})):n(new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_NOTSUPPORT,"not support navigator.mediaDevices"))}))},e.prototype.getSpeakerList=function(){var e=this;return new Promise((function(t,n){e.checkSupport()?e.getDeviceRight(i.DeviceType.Speaker).then((function(){e.getDeviceList(i.DeviceType.Speaker).then((function(e){t(e)})).catch((function(t){n(e.parseError(i.DeviceType.Speaker,t))}))})).catch((function(t){n(e.parseError(i.DeviceType.Speaker,t))})):n(new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_NOTSUPPORT,"not support navigator.mediaDevices"))}))},e.prototype.getAudioTrack=function(e){return this.getAudioStream(e).then((function(e){return e.getAudioTracks()[0]}))},e.prototype.getAudioStream=function(e){var t=this;return new Promise((function(n,o){var a;t.checkSupport()?(a=e&&e.deviceId?{audio:{deviceId:e.deviceId}}:{audio:!0},navigator.mediaDevices.getUserMedia(a).then((function(e){n(e)})).catch((function(e){o(t.parseError(i.DeviceType.Mic,e))}))):o(new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_NOTSUPPORT,"not support navigator.mediaDevices"))}))},e.prototype.getVideoTrack=function(e){return this.getVideoStream(e).then((function(e){return e.getVideoTracks()[0]}))},e.prototype.getVideoStream=function(e){var t=this;return new Promise((function(n,o){if(t.checkSupport()){var a=t.createVideoConstraints(e);navigator.mediaDevices.getUserMedia(a).then((function(e){n(e)})).catch((function(e){o(t.parseError(i.DeviceType.Camera,e))}))}else o(new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_NOTSUPPORT,"not support navigator.mediaDevices"))}))},e.prototype.getScreenTrack=function(e){return this.getScreenStream(e).then((function(e){return e.getTracks()}))},e.prototype.getScreenStream=function(e){var t=this;return new Promise((function(n,o){t.checkSupportScreenShare()?navigator.mediaDevices.getDisplayMedia(e).then((function(e){n(e)})).catch((function(e){o(t.parseError(i.DeviceType.Screen,e))})):o(new r.DeviceError(r.DeviceErrorCode.ERROR_SCREENSHARE_NOTSUPPORT,"browser not support screenshare"))}))},e.prototype.checkSupport=function(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.getUserMedia)},e.prototype.getDeviceList=function(e){return new Promise((function(t,n){navigator.mediaDevices.enumerateDevices().then((function(n){var r=[];n.forEach((function(t){t.kind===e&&r.push(t)})),t(r)})).catch((function(e){n(e)}))}))},e.prototype.getDeviceRight=function(e){return new Promise((function(t,n){var r;i.DeviceType.Camera===e?r={video:!0}:i.DeviceType.Mic!==e&&i.DeviceType.Speaker!==e||(r={audio:!0}),navigator.mediaDevices.getUserMedia(r).then((function(e){e.getTracks().forEach((function(e){e.stop()})),t(void 0)})).catch((function(e){t(void 0)}))}))},e.prototype.parseError=function(e,t){var n=null;return i.DeviceType.Mic===e?n=this.parseAudioError(t):i.DeviceType.Camera===e?n=this.parseVideoError(t):i.DeviceType.Screen===e&&(n=this.parseScreenError(t)),null===n?new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_UNKNOWNERROR,""):n},e.prototype.parseAudioError=function(e){return e.message===r.DeviceErrorDescription.ERRORMESSAGE_DEVICENOTFOUND||e.name===r.DeviceErrorDescription.ERRORNAME_DEVICENOTFOUND?new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_AUDIODEVICE_NOTFOUND,"audio device not found"):e.message===r.DeviceErrorDescription.ERRORMESSAGE_DEVICENOTALLOWED||e.message===r.DeviceErrorDescription.ERRORMESSAGE_MACSAFARI_DEVICENOTALLOWED?new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_AUDIODEVICE_NOTALLOWED,"audio device not allowed"):e.message===r.DeviceErrorDescription.ERRORMESSAGE_MACCHROME_DEVICENOTREADABLE||e.message===r.DeviceErrorDescription.ERRORMESSAGE_AUDIODEVICENOTREADABLE||e.message===r.DeviceErrorDescription.ERRORNAME_DEVICENOTREADABLE?new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_AUDIODEVICE_NOTREADABLE,"audio device not readable"):null},e.prototype.parseVideoError=function(e){return e.message===r.DeviceErrorDescription.ERRORMESSAGE_DEVICENOTFOUND||e.name===r.DeviceErrorDescription.ERRORNAME_DEVICENOTFOUND?new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_VIDEODEVICE_NOTFOUND,"video device not found"):e.message===r.DeviceErrorDescription.ERRORMESSAGE_DEVICENOTALLOWED||e.message===r.DeviceErrorDescription.ERRORMESSAGE_MOBILEDEVICE_NOTALLOWED||e.message===r.DeviceErrorDescription.ERRORMESSAGE_MACSAFARI_DEVICENOTALLOWED?new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_VIDEODEVICE_NOTALLOWED,"video device not allowed"):e.message===r.DeviceErrorDescription.ERRORMESSAGE_MACCHROME_DEVICENOTREADABLE||e.message===r.DeviceErrorDescription.ERRORMESSAGE_VIDEODEVICENOTREADABLE||e.name===r.DeviceErrorDescription.ERRORNAME_DEVICENOTREADABLE?new r.DeviceError(r.DeviceErrorCode.ERROR_DEVICE_VIDEODEVICE_NOTREADABLE,"video device not readable"):null},e.prototype.parseScreenError=function(e){return e.name===r.DeviceErrorDescription.ERRORNAME_DEVICENOTALLOWED?e.message===r.DeviceErrorDescription.ERRORMESSAGE_DEVICENOTALLOWED?new r.DeviceError(r.DeviceErrorCode.ERROR_SCREENSHARE_NOTALLOWED,e.message):new r.DeviceError(r.DeviceErrorCode.ERROR_SCREENSHARE_NOPERMISSION,e.message):e.name===r.DeviceErrorDescription.ERRORNAME_INVALID_ACCESS?new r.DeviceError(r.DeviceErrorCode.ERROR_SCREENSHARE_INVALIDACCESS,e.message):null},e.prototype.createVideoConstraints=function(e){return e.deviceId||e.width||e.height||e.frameRate?{video:{deviceId:{exact:e.deviceId},width:e.width,height:e.height,frameRate:e.frameRate}}:{video:!0}},e}();t.BaseDeviceManager=o},913:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.IosDeviceManager=void 0;var o=function(e){function t(){return e.call(this)||this}return i(t,e),t}(n(583).MobileDeviceManager);t.IosDeviceManager=o},331:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LinuxDeviceManager=void 0;var o=function(e){function t(){return e.call(this)||this}return i(t,e),t}(n(62).BaseDeviceManager);t.LinuxDeviceManager=o},1:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.MacDeviceManager=void 0;var o=function(e){function t(){return e.call(this)||this}return i(t,e),t}(n(62).BaseDeviceManager);t.MacDeviceManager=o},583:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.MobileDeviceManager=void 0;var o=n(603),a=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.checkSupportScreenShare=function(){return!1},t.prototype.getScreenTrack=function(e){return new Promise((function(e,t){t(new o.DeviceError(o.DeviceErrorCode.ERROR_SCREENSHARE_NOTSUPPORT,"mobile not support screenshare"))}))},t.prototype.getScreenStream=function(e){return new Promise((function(e,t){t(new o.DeviceError(o.DeviceErrorCode.ERROR_SCREENSHARE_NOTSUPPORT,"mobile not support screenshare"))}))},t.prototype.createVideoConstraints=function(e){return e.deviceId||e.facingMode||e.width||e.height||e.aspectRatio?{video:{deviceId:e.deviceId,facingMode:e.facingMode,width:e.width,height:e.height,aspectRatio:e.aspectRatio}}:{video:!0}},t}(n(62).BaseDeviceManager);t.MobileDeviceManager=a},935:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsDeviceManager=void 0;var o=function(e){function t(){return e.call(this)||this}return i(t,e),t}(n(62).BaseDeviceManager);t.WindowsDeviceManager=o},607:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserDeviceManager=void 0;var o=n(304);Object.defineProperty(t,"BrowserDeviceManager",{enumerable:!0,get:function(){return o.BrowserDeviceManager}}),i(n(873),t),window&&(window.BrowserDeviceManager=o.BrowserDeviceManager)},610:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LinkUtil=void 0;var r,i=n(603),o=n(261),a=n(54);!function(e){e[e.Windows=0]="Windows",e[e.MacOS=1]="MacOS",e[e.Other=2]="Other"}(r||(r={}));var s="ms-settings:",c="x-apple.systempreferences:com.apple.preference.security?",u={SYS_MIC:[s+"privacy-microphone",c+"Privacy_Microphone"],SYS_CAMERA:[s+"privacy-webcam",c+"Privacy_Camera"],SYS_SCREENSHARE:["",c+"Privacy_ScreenCapture"]},d=function(){function e(){o||console.error("SystemUtil is not found"),this.systemType=this.getSystemType()}return e.prototype.getRelatedLink=function(e){var t="",n=this.systemType;switch(e){case i.DeviceErrorCode.ERROR_DEVICE_AUDIODEVICE_NOTFOUND:case i.DeviceErrorCode.ERROR_DEVICE_AUDIODEVICE_NOTREADABLE:t=u.SYS_MIC[n];break;case i.DeviceErrorCode.ERROR_DEVICE_VIDEODEVICE_NOTFOUND:case i.DeviceErrorCode.ERROR_DEVICE_VIDEODEVICE_NOTREADABLE:t=u.SYS_CAMERA[n];break;case i.DeviceErrorCode.ERROR_SCREENSHARE_UNKNOWNERRO:case i.DeviceErrorCode.ERROR_SCREENSHARE_NOPERMISSION:t=u.SYS_SCREENSHARE[n];break;case i.DeviceErrorCode.ERROR_DEVICE_AUDIODEVICE_NOTALLOWED:case i.DeviceErrorCode.ERROR_DEVICE_VIDEODEVICE_NOTALLOWED:a.isChrome?t=this.getChromeResetLink():a.isEdge&&(t=this.getEdgeResetLink());break;default:t=""}return t},e.prototype.getSystemType=function(){return o.isWindows?r.Windows:o.isMacOS?r.MacOS:r.Other},e.prototype.getChromeResetLink=function(){return"chrome://settings/content/siteDetails?site="+encodeURIComponent(window.location.origin)},e.prototype.getEdgeResetLink=function(){return"edge://settings/content/siteDetails?site="+encodeURIComponent(window.location.origin)},e}();t.LinkUtil=d},101:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SystemUtil=void 0,function(e){e[e.Unknown=0]="Unknown",e[e.MacOS=1]="MacOS",e[e.Windows=2]="Windows",e[e.Android=3]="Android",e[e.Iphone=4]="Iphone",e[e.Ipad=5]="Ipad",e[e.Linux=6]="Linux"}(n||(n={}));var r=function(){function e(){this.systemType=n.Unknown,this.getSystemInfo()}return Object.defineProperty(e.prototype,"isIos",{get:function(){return this.systemType===n.Ipad||this.systemType===n.Iphone},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAndroid",{get:function(){return this.systemType===n.Android},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMacOS",{get:function(){return this.systemType===n.MacOS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWindows",{get:function(){return this.systemType===n.Windows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLinux",{get:function(){return this.systemType===n.Linux},enumerable:!1,configurable:!0}),e.prototype.getSystemInfo=function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLocaleLowerCase();e.indexOf("ipad")>-1?this.systemType=n.Ipad:e.indexOf("iphone")>-1?this.systemType=n.Iphone:e.indexOf("android")>-1?this.systemType=n.Android:e.indexOf("win")>-1?this.systemType=n.Windows:e.indexOf("mac")>-1?this.systemType=n.MacOS:e.indexOf("linux")>-1?this.systemType=n.Linux:e.indexOf("")>-1&&(this.systemType=n.Unknown)}},e}();t.SystemUtil=r},54:function(e){e.exports=window.BrowserUtil},261:function(e){e.exports=window.SystemUtil}},t={};return function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(607)}()},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SupportUtil=void 0;var o=n(3),a=n(9),s=n(1),c=n(62),u=function(){this.errorCode=0,this.message=""},d=function(){function e(){this.deviceManager=new a.BrowserDeviceManager}return e.prototype.isSupport=function(e){var t=this;return new Promise((function(n,o){return r(t,void 0,void 0,(function(){var t,r,a,d;return i(this,(function(i){switch(i.label){case 0:return t=new u,this.checkWebRtcSupport()?e.onlyCheckUA?this.checkBrowser(t)?[3,3]:[2,o(t)]:[3,1]:(t.errorCode=s.ErrorCode.ERROR_NOTSUPPORT_WEBRTC,t.message=c.EN.MESSAGE_NOTSUPPORT_WEBRTC,[2,o(t)]);case 1:return[4,this.checkWebrtcAbilities()];case 2:if(r=i.sent(),a=r[0],r[1],r[2],d=r[3],!a)return t.errorCode=s.ErrorCode.ERROR_NOTSUPPORT_WEBRTC,t.message=c.EN.MESSAGE_NOTSUPPORT_WEBRTC,[2,o(t)];if(d)return t.errorCode=s.ErrorCode.ERROR_BROWSER_NOTSUPPORT,t.message=c.EN.MESSAGE_BROWSER_NOTSUPPORT,[2,o(t)];i.label=3;case 3:return e.isReceiveVideo?this.checkH264Decode(t).then((function(){n(t)})).catch((function(){o(t)})):n(t),[2]}}))}))}))},e.prototype.checkWebrtcAbilities=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,a,s,c,u,d;return i(this,(function(i){switch(i.label){case 0:t=window.RTCPeerConnection,n=!1,r=!1,o=null,a=!1,i.label=1;case 1:return i.trys.push([1,4,,5]),t?(s=new t,r="createDataChannel"in s,e&&(c=this.createBlankStream()).getTracks().forEach((function(e){null==s||s.addTrack(e,c)})),[4,s.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0,iceRestart:!0})]):[3,3];case 2:u=i.sent(),d=(u||{}).sdp,o=e?!!(d&&d.indexOf("a=sendrecv")>-1):null,s.close(),s=void 0,n=!0,i.label=3;case 3:return[3,5];case 4:return i.sent(),n=!1,r=!1,o=!1,[3,5];case 5:return a=this.checkBlackList(),[2,[n,r,o,a]]}}))}))},e.prototype.checkPublishSupport=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,o,a,s,c;return i(this,(function(i){switch(i.label){case 0:return e={isWebRTCSupported:!1,isH264EncodeSupported:!1,isMediaDevicesSupported:!1,isScreenCaptureSupported:!1,isAudioMixSupported:!1,cameraList:[],micList:[],speakerList:[]},this.checkWebRtcSupport()?[3,1]:(e.isWebRTCSupported=!1,e.isH264EncodeSupported=!1,[3,5]);case 1:return[4,this.checkWebrtcAbilities(!0)];case 2:return t=i.sent(),n=t[0],t[1],r=t[2],e.isWebRTCSupported=!(!n||!r),e.isWebRTCSupported?[3,3]:(e.isH264EncodeSupported=!1,[3,5]);case 3:return o=e,[4,this.checkH264Encode()];case 4:o.isH264EncodeSupported=i.sent(),i.label=5;case 5:if(e.isMediaDevicesSupported=this.checkMediaDevices(),e.isScreenCaptureSupported=this.checkScreenCapture(),e.isAudioMixSupported=this.checkAudioMix(),!e.isMediaDevicesSupported)return[3,11];i.label=6;case 6:return i.trys.push([6,10,,11]),a=e,[4,this.deviceManager.getCameraList()];case 7:return a.cameraList=i.sent().filter((function(e){return e.deviceId})),s=e,[4,this.deviceManager.getMicList()];case 8:return s.micList=i.sent().filter((function(e){return e.deviceId})),c=e,[4,this.deviceManager.getSpeakerList()];case 9:return c.speakerList=i.sent().filter((function(e){return e.deviceId})),[3,11];case 10:return i.sent(),[3,11];case 11:return[2,e]}}))}))},e.prototype.checkWebRtcSupport=function(){return!!window.RTCPeerConnection},e.prototype.checkMediaDevices=function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)},e.prototype.checkScreenCapture=function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia)},e.prototype.checkAudioMix=function(){if(!window.AudioContext)return!1;var e=new AudioContext;return!!e.createMediaStreamDestination&&!!e.createMediaStreamSource},e.prototype.checkBlackList=function(){var e=!1;if(o.BrowserUtil.isOppoBrowser&&o.SystemUtil.isAndroid){var t=(this.getUa().toLowerCase().match(/heytapbrowser\/([\d.]+)/)||[])[1]||"";e=!this.compareVersion(t,"40.7.39.1")}else(o.BrowserUtil.isUCBrowser||o.BrowserUtil.isQuarkBrowser)&&o.SystemUtil.isIos?e=!0:o.BrowserUtil.isWebView&&o.SystemUtil.isAndroid&&(e=!(o.BrowserUtil.browserMainVersion>=79));return e},e.prototype.checkBrowser=function(e){if(o.SystemUtil.isIos){if(o.BrowserUtil.isUCBrowser||o.BrowserUtil.isQuarkBrowser)return e.errorCode=s.ErrorCode.ERROR_BROWSER_NOTSUPPORT,e.message=c.EN.MESSAGE_BROWSER_NOTSUPPORT,!1;if(o.BrowserUtil.isSafari||o.BrowserUtil.isQQBrowser)return o.BrowserUtil.browserMainVersion>=11||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isEdge||o.BrowserUtil.isChrome)return o.BrowserUtil.browserMainVersion>=79||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isMicroMessenger)return!!this.compareVersion(o.SystemUtil.systemVersion,"12.1.4")||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isDingTalk)return!!o.SystemUtil.compareVersion("11.2.5")||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isWebView)return!!this.compareVersion(o.SystemUtil.systemVersion,"14.3")||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1)}else if(o.SystemUtil.isAndroid){if(this.checkPrivateUcWebview())return!0;if(o.BrowserUtil.isChrome||o.BrowserUtil.isQQBrowser||o.BrowserUtil.isHuaweiBrowser||o.BrowserUtil.isSamsungBrowser)return o.BrowserUtil.browserMainVersion>=63||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isEdge)return o.BrowserUtil.browserMainVersion>=79||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isMicroMessenger)return!!this.compareVersion(this.getChromeCoreVersion(),"63")||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isOppoBrowser){var t=(this.getUa().toLowerCase().match(/heytapbrowser\/([\d.]+)/)||[])[1]||"";return!!this.compareVersion(t,"40.7.39.1")||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1)}if(o.BrowserUtil.isX5Core)return!0;if(o.BrowserUtil.isWebView)return o.BrowserUtil.browserMainVersion>=79||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1)}else if(o.SystemUtil.isMacOS){if(o.BrowserUtil.isElectron)return!0;if(o.BrowserUtil.isSafari)return o.BrowserUtil.browserMainVersion>=11||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isChrome)return o.BrowserUtil.browserMainVersion>=63||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isEdge)return o.BrowserUtil.browserMainVersion>=79||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isFirefox)return o.BrowserUtil.browserMainVersion>=62||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isOpera)return o.BrowserUtil.browserMainVersion>=15||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1)}else if(o.SystemUtil.isWindows){if(o.BrowserUtil.isElectron)return!0;if(o.BrowserUtil.isMicroMessenger)return!0;if(o.BrowserUtil.isChrome||o.BrowserUtil.isQQBrowser)return o.BrowserUtil.browserMainVersion>=63||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isEdge)return o.BrowserUtil.browserMainVersion>=79||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isFirefox)return o.BrowserUtil.browserMainVersion>=62||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isOpera)return o.BrowserUtil.browserMainVersion>=15||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1)}else if(o.SystemUtil.isLinux){if(o.BrowserUtil.isChrome)return o.BrowserUtil.browserMainVersion>=63||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isEdge)return o.BrowserUtil.browserMainVersion>=79||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1);if(o.BrowserUtil.isFirefox)return o.BrowserUtil.browserMainVersion>=62||(e.errorCode=s.ErrorCode.ERROR_BROWSER_VERSIONLOW,e.message=c.EN.MESSAGE_BROWSER_VERSIONLOW,!1)}return 0===e.errorCode&&(e.errorCode=s.ErrorCode.ERROR_BROWSER_NOTSUPPORT,e.message=c.EN.MESSAGE_BROWSER_NOTSUPPORT),!1},e.prototype.checkH264Decode=function(e){var t=this;return new Promise((function(n,o){return r(t,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,this.tryFindH264FromSdp(e)];case 1:if(t=r.sent())return n(!0),[2];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.loadH264(3)];case 3:return t=r.sent(),[3,5];case 4:return r.sent(),[3,5];case 5:return t?n(!0):(e&&0===e.errorCode&&(e.errorCode=s.ErrorCode.ERROR_NOTSUPPORT_H264,e.message=c.EN.MESSAGE_NOTSUPPORT_H264),o(!1)),[2]}}))}))}))},e.prototype.checkSDPSupportH264=function(e){return e.indexOf("H264")>0||e.indexOf("h264")>0||e.indexOf("H.264")>0||e.indexOf("h.264")>0},e.prototype.checkPrivateUcWebview=function(){return this.getUa().indexOf("UniqueCode")>0},e.prototype.getUa=function(){return navigator&&navigator.userAgent||""},e.prototype.getChromeCoreVersion=function(){return(this.getUa().toLowerCase().match(/chrome\/([\d.]+)/)||[])[1]||""},e.prototype.compareVersion=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");for(var n=(e||"").split("."),r=(t||"").split("."),i=0,o=0,a=0;a<n.length&&a<r.length;++a){if((i=isNaN(parseInt(n[a],10))?0:parseInt(n[a],10))<(o=isNaN(parseInt(r[a],10))?0:parseInt(r[a],10)))return!1;if(i>o)return!0}return!0},e.prototype.tryFindH264FromSdp=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:t=!1,n=new RTCPeerConnection,r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!0})];case 2:return(r=i.sent())&&r.sdp&&(t=this.checkSDPSupportH264(r.sdp)),[3,4];case 3:return i.sent(),t=!1,e&&(e.errorCode=s.ErrorCode.ERROR_CREATEOFFER,e.message=c.EN.MESSAGE_CREATEOFFER),[3,4];case 4:return n.close(),n=void 0,[2,t]}}))}))},e.prototype.loadH264=function(e){var t=this;return new Promise((function(n,a){return r(t,void 0,void 0,(function(){var t,a,s,c,u=this;return i(this,(function(d){if(!o.SystemUtil.isAndroid||!o.BrowserUtil.isChrome&&!o.BrowserUtil.isWebView)return n(!1),[2];for(t=0,a=[],s=0;t<e;)c=setTimeout((function(){return r(u,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return s++,[4,this.tryFindH264FromSdp()];case 1:return t.sent()?(a.forEach((function(e){clearTimeout(e)})),a=[],n(!0),[2]):(s===e&&n(!1),[2])}}))}))}),1e3*t),a.push(c),t++;return[2]}))}))}))},e.prototype.checkH264Encode=function(){var e;return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return[4,this.loadH264(3)];case 1:return!(t=r.sent())&&RTCRtpSender&&RTCRtpSender.getCapabilities&&(n=JSON.stringify(null===(e=RTCRtpSender.getCapabilities("video"))||void 0===e?void 0:e.codecs),t=n.toLowerCase().includes("video/h264")),[2,!!t]}}))}))},e.prototype.createBlankStream=function(){var e,t,n,r=(n=(t=(e=new AudioContext).createOscillator()).connect(e.createMediaStreamDestination()),t.start(),Object.assign(n.stream.getAudioTracks()[0],{enabled:!1}));r.stop();var i=function(e){var t,n={},r=n.width,i=void 0===r?160:r,o=n.height,a=void 0===o?90:o,s=document.createElement("canvas");s.width=i,s.height=a,null===(t=s.getContext("2d"))||void 0===t||t.fillRect(0,0,i,a);var c=s.captureStream();return Object.assign(c.getVideoTracks()[0],{enabled:!1})}();return i.stop(),new MediaStream([r,i])},e}();t.SupportUtil=d},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(3),s=i(n(8)),c=n(1),u=i(n(68));!function(e){e[e.UA=101]="UA",e[e.SUB_STATS=107]="SUB_STATS",e[e.PUB_STATS=108]="PUB_STATS",e[e.CONNECT_STATE_CHANGE=109]="CONNECT_STATE_CHANGE",e[e.START_PLAY=120]="START_PLAY",e[e.STOP_PLAY=121]="STOP_PLAY",e[e.SUBSCRIBE_START=125]="SUBSCRIBE_START",e[e.SUBSCRIBE_OK=126]="SUBSCRIBE_OK",e[e.FIRST_FRAME_TIME=137]="FIRST_FRAME_TIME",e[e.ERROR_INFO=150]="ERROR_INFO",e[e.RECONNECT=160]="RECONNECT",e[e.CREATE_CLIENT=200]="CREATE_CLIENT",e[e.LOCALSTREAM_INITED=201]="LOCALSTREAM_INITED",e[e.START_PUBLISH=220]="START_PUBLISH",e[e.STOP_PUBLISH=221]="STOP_PUBLISH",e[e.PUBLISH_OK=222]="PUBLISH_OK",e[e.SET_VIDEOPROFILE=230]="SET_VIDEOPROFILE",e[e.SET_SCREENPROFILE=231]="SET_SCREENPROFILE",e[e.ENABLE_AUDIO=232]="ENABLE_AUDIO",e[e.DISABLE_AUDIO=233]="DISABLE_AUDIO",e[e.ENABLE_VIDEO=234]="ENABLE_VIDEO",e[e.DISABLE_VIDEO=235]="DISABLE_VIDEO",e[e.STOP=236]="STOP",e[e.PLAY=237]="PLAY"}(o||(o={}));var d=function(){function e(e){this.customReporter=null==e?void 0:e.customReporter,this.ct=e&&e.customTag?e.customTag:"",this.enableLog=!e||0!=e.trackLog,this._initParam(),this.slsTracker=new u.default({host:"cn-hangzhou.log.aliyuncs.com",project:"videocloud",logstore:"live-client-log",time:10,count:10})}return e.prototype.updateTid=function(){this.param?this.param.tid=a.Guid.create(32):this._initParam()},e.prototype.updateUrl=function(e){this.param&&(this.param.pu=e)},e.prototype.reportUA=function(e){this.reporter({msgid:o.UA,args:JSON.stringify({ua:e})})},e.prototype.reportPullStats=function(e){this.reporter({msgid:o.SUB_STATS,args:JSON.stringify(r({},e))})},e.prototype.reportPushStats=function(e){this.reporter({msgid:o.PUB_STATS,args:JSON.stringify(r({},e))})},e.prototype.reportStartPlay=function(e){this.reporter({msgid:o.START_PLAY,args:JSON.stringify({vurl:e})})},e.prototype.reportStopPlay=function(){this.reporter({msgid:o.STOP_PLAY})},e.prototype.reportSubscribeStart=function(e,t,n,r,i){this.reporter({msgid:o.SUBSCRIBE_START,args:JSON.stringify({vurl:e,surl:t,vMsid:n?n.join(", "):"",aMsid:r?r.join(", "):"",isSubAdd:!!i})})},e.prototype.reportSubscribeOk=function(e){void 0===e&&(e={}),this.reporter({msgid:o.SUBSCRIBE_OK,args:JSON.stringify({vurl:e.vurl||"",surl:e.surl||"",hrct:e.hrct,tcid:e.traceId,rslt:e.rslt,isSubAdd:!!e.isSubAdd})})},e.prototype.reportFirstFrameTime=function(e,t,n,r,i,a,s,c,u,d,l,p,f,h){this.reporter({msgid:o.FIRST_FRAME_TIME,args:JSON.stringify({vurl:e,cpct:n,hrct:r,tcid:t,ffct:i,rslt:a,cnct:s,stats:c,delct:u,addct:d,actct:l,vMsid:p?p.join(", "):"",aMsid:f?f.join(", "):"",isSubAdd:!!h})})},e.prototype.reportErrorInfo=function(e,t,n,r){e!==c.ErrorCode.ERROR_AUTOPLAY_ERROR&&this.reporter({msgid:o.ERROR_INFO,args:JSON.stringify({errorCode:e,message:t,tcid:n,extraInfo:r})})},e.prototype.reportReconnect=function(e,t,n,r){this.reporter({msgid:o.RECONNECT,args:JSON.stringify({errorCode:e,message:t,tcid:n,retryTimes:r})})},e.prototype.reportCreateClient=function(){this.reporter({msgid:o.CREATE_CLIENT})},e.prototype.reportStartPublish=function(e,t,n){this.reporter({msgid:o.START_PUBLISH,args:JSON.stringify({purl:e,surl:t,isPubAdd:!!n})})},e.prototype.reportPublishOk=function(e,t,n,r,i,a,s,c){this.reporter({msgid:o.PUBLISH_OK,args:JSON.stringify({purl:e,surl:t,coct:n,hrct:r,act:i,tcid:a,totalct:s||n+r+i,isPubAdd:!!c})})},e.prototype.reportStopPublish=function(e,t){this.reporter({msgid:o.STOP_PUBLISH,args:JSON.stringify({url:e,isPubStop:!!t})})},e.prototype.reportVideoProfile=function(e){this.reporter({msgid:o.SET_VIDEOPROFILE,args:JSON.stringify({vp:e})})},e.prototype.reportScreenProfile=function(e){this.reporter({msgid:o.SET_SCREENPROFILE,args:JSON.stringify({sp:e})})},e.prototype.reportEnableAudio=function(){this.reporter({msgid:o.ENABLE_AUDIO})},e.prototype.reportDisableAudio=function(){this.reporter({msgid:o.DISABLE_AUDIO})},e.prototype.reportEnableVideo=function(){this.reporter({msgid:o.ENABLE_VIDEO})},e.prototype.reportDisableVideo=function(){this.reporter({msgid:o.DISABLE_VIDEO})},e.prototype.reportStop=function(e){this.reporter({msgid:o.STOP,args:JSON.stringify({tp:e})})},e.prototype.reportPlay=function(e){this.reporter({msgid:o.PLAY,args:JSON.stringify({tp:e})})},e.prototype.reportStreamCreated=function(e,t){this.reporter({msgid:o.LOCALSTREAM_INITED,args:JSON.stringify({userConfig:e,localStreamInfo:t})})},e.prototype.reportConnectionChange=function(e,t){this.reporter({msgid:o.CONNECT_STATE_CHANGE,args:JSON.stringify({connectionState:e,direction:t})})},e.prototype._initParam=function(){this.param||(this.param={APIVersion:"0.6.0",os:a.SystemUtil.platform,osv:a.SystemUtil.systemVersion,bt:a.BrowserUtil.browserName,bv:a.BrowserUtil.browserVersion,host:window.location.origin,uid:a.LocalStorage.uuid,tid:a.Guid.create(32),ver:s.default.version,ct:this.ct,dt:"",lv:"1.0.0",ua:navigator&&navigator.userAgent||"",pu:""})},e.prototype.reporter=function(e){var t=r(r(r(r({},this.param||{}),{tm:(new Date).getTime()}),e||{}),{msgname:o[e.msgid]});if(this.customReporter&&"function"==typeof this.customReporter)try{this.customReporter(t)}catch(e){console.error("[Error in customReporter] ",e)}this.enableLog&&this.slsTracker.send(t)},e.prototype.data2String=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=n+"="+e[n]);return t},e.HEARTHEAT_INTERVAL=4,e}();t.default=d},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;var a=n(3),s=function(e){function t(){var t=e.call(this)||this;return t.traceid="",t.id=a.Guid.create(32),t}return i(t,e),Object.defineProperty(t.prototype,"traceId",{get:function(){return this.traceid},set:function(e){this.traceid=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mediaElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.setReporter=function(e){this.reporter=e},t.prototype.play=function(e){},t.prototype.stop=function(){this.traceid="",this.reporter=void 0},t}(o(n(2)).default);t.Stream=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoProfileMap=t.ScreenProfileMap=void 0,t.ScreenProfileMap=new Map,t.ScreenProfileMap.set("480p_1",{width:640,height:480,frameRate:5,maxBitrate:300}),t.ScreenProfileMap.set("480p_2",{width:640,height:480,frameRate:30,maxBitrate:1e3}),t.ScreenProfileMap.set("720p_1",{width:1280,height:720,frameRate:5,maxBitrate:800}),t.ScreenProfileMap.set("720p_2",{width:1280,height:720,frameRate:30,maxBitrate:2e3}),t.ScreenProfileMap.set("1080p_1",{width:1920,height:1080,frameRate:5,maxBitrate:1e3}),t.ScreenProfileMap.set("1080p_2",{width:1920,height:1080,frameRate:30,maxBitrate:3e3}),t.VideoProfileMap=new Map,t.VideoProfileMap.set("120p_1",{width:160,height:120,frameRate:15,maxBitrate:65}),t.VideoProfileMap.set("120p_3",{width:120,height:120,frameRate:15,maxBitrate:50}),t.VideoProfileMap.set("180p_1",{width:320,height:180,frameRate:15,maxBitrate:140}),t.VideoProfileMap.set("180p_3",{width:180,height:180,frameRate:15,maxBitrate:100}),t.VideoProfileMap.set("180p_4",{width:240,height:180,frameRate:15,maxBitrate:120}),t.VideoProfileMap.set("240p_1",{width:320,height:240,frameRate:15,maxBitrate:200}),t.VideoProfileMap.set("240p_3",{width:240,height:240,frameRate:15,maxBitrate:140}),t.VideoProfileMap.set("240p_4",{width:424,height:240,frameRate:15,maxBitrate:220}),t.VideoProfileMap.set("360p_1",{width:640,height:360,frameRate:15,maxBitrate:400}),t.VideoProfileMap.set("360p_3",{width:360,height:360,frameRate:15,maxBitrate:260}),t.VideoProfileMap.set("360p_4",{width:640,height:360,frameRate:30,maxBitrate:600}),t.VideoProfileMap.set("360p_6",{width:360,height:360,frameRate:30,maxBitrate:400}),t.VideoProfileMap.set("360p_7",{width:480,height:360,frameRate:15,maxBitrate:320}),t.VideoProfileMap.set("360p_8",{width:480,height:360,frameRate:30,maxBitrate:490}),t.VideoProfileMap.set("360p_9",{width:640,height:360,frameRate:15,maxBitrate:800}),t.VideoProfileMap.set("360p_10",{width:640,height:360,frameRate:24,maxBitrate:800}),t.VideoProfileMap.set("360p_11",{width:640,height:360,frameRate:24,maxBitrate:1e3}),t.VideoProfileMap.set("480p_1",{width:640,height:480,frameRate:15,maxBitrate:500}),t.VideoProfileMap.set("480p_2",{width:640,height:480,frameRate:30,maxBitrate:1e3}),t.VideoProfileMap.set("480p_3",{width:480,height:480,frameRate:15,maxBitrate:400}),t.VideoProfileMap.set("480p_4",{width:640,height:480,frameRate:30,maxBitrate:750}),t.VideoProfileMap.set("480p_6",{width:480,height:480,frameRate:30,maxBitrate:600}),t.VideoProfileMap.set("480p_8",{width:848,height:480,frameRate:15,maxBitrate:610}),t.VideoProfileMap.set("480p_9",{width:848,height:480,frameRate:30,maxBitrate:930}),t.VideoProfileMap.set("480p_10",{width:640,height:480,frameRate:10,maxBitrate:400}),t.VideoProfileMap.set("720p_1",{width:1280,height:720,frameRate:15,maxBitrate:1130}),t.VideoProfileMap.set("720p_2",{width:1280,height:720,frameRate:30,maxBitrate:2e3}),t.VideoProfileMap.set("720p_3",{width:1280,height:720,frameRate:30,maxBitrate:1710}),t.VideoProfileMap.set("720p_5",{width:960,height:720,frameRate:15,maxBitrate:910}),t.VideoProfileMap.set("720p_6",{width:960,height:720,frameRate:30,maxBitrate:1380}),t.VideoProfileMap.set("1080p_1",{width:1920,height:1080,frameRate:15,maxBitrate:2080}),t.VideoProfileMap.set("1080p_2",{width:1920,height:1080,frameRate:30,maxBitrate:3e3}),t.VideoProfileMap.set("1080p_3",{width:1920,height:1080,frameRate:30,maxBitrate:3150}),t.VideoProfileMap.set("1080p_5",{width:1920,height:1080,frameRate:60,maxBitrate:4780}),t.VideoProfileMap.set("1440p_1",{width:2560,height:1440,frameRate:30,maxBitrate:4850}),t.VideoProfileMap.set("1440p_2",{width:2560,height:1440,frameRate:60,maxBitrate:7350}),t.VideoProfileMap.set("4K_1",{width:3840,height:2160,frameRate:30,maxBitrate:8910}),t.VideoProfileMap.set("4K_3",{width:3840,height:2160,frameRate:60,maxBitrate:13500})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RtsPeerconnection=void 0;var u=n(15),d=n(38),l=n(7),p=c(n(2)),f=n(6),h=n(39),_=n(42),v=n(44),m=n(1),g=n(5),E=function(e){function t(){var t=e.call(this)||this;return t.connectingEventSent=!1,t.reused=!1,t.subMonitor=new h.SubMonitor,t.subMonitor.on("onMonitorEvent",(function(e){t.emit("onMonitorEvent",e)})),t.subMonitor.on("streamEnded",(function(){t.emit("streamEnded")})),t.subMonitor.on("canPlay",(function(){})),t.pubMonitor=new _.PubMonitor,t.pubMonitor.on("onMonitorEvent",(function(e){t.emit("onMonitorEvent",e)})),t}return i(t,e),Object.defineProperty(t.prototype,"isReused",{get:function(){return this.reused},set:function(e){this.reused=!!e},enumerable:!1,configurable:!0}),t.prototype.getPc=function(){return this.pc},t.prototype.getPeerCore=function(){return this.peerCore},t.prototype.getSubMonitor=function(){return this.subMonitor},t.prototype.getPubMonitor=function(){return this.pubMonitor},t.prototype.playStart=function(){this.subMonitor.resetTimer(1e3)},t.prototype.pushStart=function(){this.pc&&this.peerCore&&this.pubMonitor.startHeartbeat(this.pc,this.peerCore)},t.prototype.sample=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.subMonitor.onMonitorTimer()];case 1:return e.sent(),[2]}}))}))},t.prototype.subAdd=function(e){var t;return null===(t=this.peerCore)||void 0===t?void 0:t.subscribeAdd(e)},t.prototype.subActive=function(e){var t;return null===(t=this.peerCore)||void 0===t?void 0:t.subscribeActive(e)},t.prototype.subStop=function(e){var t;return null===(t=this.peerCore)||void 0===t?void 0:t.subscribeStop(e)},t.prototype.subDeleteTracks=function(e){var t;return null===(t=this.peerCore)||void 0===t?void 0:t.subscribeDeleteTracks(e)},t.prototype.pubAdd=function(e){var t;return null===(t=this.peerCore)||void 0===t?void 0:t.publishAdd(e)},t.prototype.pubDeleteTracks=function(e){var t;return null===(t=this.peerCore)||void 0===t?void 0:t.publishDeleteTracks(e)},t.prototype.pubReplaceTracks=function(e){var t;return null===(t=this.peerCore)||void 0===t?void 0:t.publishReplaceTracks(e)},t.prototype.pubStop=function(e){var t;return null===(t=this.peerCore)||void 0===t?void 0:t.publishStop(e)},t.prototype.createOffer=function(e,t,n,r){var i=this;return void 0===r&&(r={publishUrl:""}),new Promise((function(a,s){var c;if(null===(c=i.cancelable)||void 0===c||c.cancel(),i.pc=new RTCPeerConnection({googCpuOveruseDetection:!1,sdpSemantics:"unified-plan"}),i.peerCore=new u.PeerConnectionCore({pc:i.pc,onDatachannelEvent:function(e){i.emit("datachannelStatusChange",{status:e})}}),i.pc.onconnectionstatechange=function(){var e=(i.pc||{}).connectionState;switch(i.connectingEventSent||(i.connectingEventSent=!0,i.emit("connectStatusChange",{status:f.EConnectStatus.CONNECT_STATUS_CONNECTING})),e){case"connected":i.emit("onConnected"),i.emit("connectStatusChange",{status:f.EConnectStatus.CONNECT_STATUS_CONNECTED});break;case"disconnected":i.emit("connectStatusChange",{status:f.EConnectStatus.CONNECT_STATUS_RECONNECTING});break;case"failed":case"closed":i.subMonitor.stop(),i.emit("connectStatusChange",{status:f.EConnectStatus.CONNECT_STATUS_DISCONNECTED}),i.emit("onEnd")}},n){i.localStream=n,i.sdpUtil=new d.SdpUtil(i.localStream);var p=i.addStream();if(0!==p)return i.pc=void 0,void s(new g.RtsError(p,p===m.ErrorCode.ERROR_MEDIASTREAMTRACK_AUDIO_NONE?"need audio track":"",""))}else i.sdpUtil=new d.SdpUtil;var h=i.pc.createOffer({offerToReceiveAudio:!n&&e,offerToReceiveVideo:!n&&t});i.cancelable=(0,l.makeCancelable)(h),i.cancelable.promise.then((function(e){var t,c,u,d,l,p,f;if(i.cancelable=void 0,i.sdpUtil){if(i.sdpUtil.init(String(e.sdp)),i.sdpUtil.addNack(),i.sdpUtil.addSps(),n&&i.sdpUtil.modifyTrackName({vMsid:r.vMsid&&r.vMsid[0],aMsid:r.aMsid&&r.aMsid[0]}),i.pc){e.sdp=i.sdpUtil.sdp,n&&n.sdpHook&&"function"==typeof n.sdpHook&&(e.sdp=n.sdpHook(e.sdp)),null===(t=i.peerCore)||void 0===t||t.setPrevOfferSdp(e.sdp||"");var h=[];if(n)try{null===(c=i.peerCore)||void 0===c||c.patchPublishStreamManagerRecord(r.publishUrl||"",o(o({},r),{stream:n}));var _=null===(u=i.peerCore)||void 0===u?void 0:u.parseSdp(e.sdp||"");h=null===(d=i.peerCore)||void 0===d?void 0:d.updateTrackInfoList({url:r.publishUrl||"",stream:n,vMsid:null===(l=i.peerCore)||void 0===l?void 0:l.unifyMsid(r.vMsid,"video"),aMsid:null===(p=i.peerCore)||void 0===p?void 0:p.unifyMsid(r.aMsid,"audio"),sdpMediaList:null===(f=null==_?void 0:_.detail)||void 0===f?void 0:f.media})}catch(e){console.log(e)}r.offerSdpHook&&"function"==typeof r.offerSdpHook&&(e.sdp=r.offerSdpHook(e.sdp||"")),i.pc.setLocalDescription(e).then((function(){i.pc?a({desp:i.pc.localDescription,publishTrackInfoList:h}):s(new g.RtsError(m.ErrorCode.ERROR_CREATEOFFER,"no pc",""))})).catch((function(e){s(new g.RtsError(m.ErrorCode.ERROR_CREATEOFFER,"setLocalDescription error "+e.message,""))}))}}else s(new g.RtsError(m.ErrorCode.ERROR_CREATEOFFER,"no sdp",""))})).catch((function(e){e.isCanceled||s(new g.RtsError(m.ErrorCode.ERROR_CREATEOFFER,e.message?e.message:"create offer error",""))}))}))},t.prototype.recvAnswer=function(e,t){var n,r,i=this;return void 0===t&&(t={}),null===(n=this.peerCore)||void 0===n||n.setPrevAnswerSdp(null===(r=null==e?void 0:e.jsep)||void 0===r?void 0:r.sdp),new Promise((function(n,r){var o,a,s,c,u,l;if(i.pc){if(i.pc.ontrack=function(e){i.pc&&i.peerCore&&i.subMonitor.start(i.pc,i.peerCore),i.isReused||i.emit("onTrackEvent",e)},"closed"===i.pc.signalingState)return void r({message:"PeerConnection signalingState is closed"});if(null===(o=e.jsep)||void 0===o?void 0:o.sdp){var p=new d.SdpUtil;p.init(String(null===(a=e.jsep)||void 0===a?void 0:a.sdp)),i.localStream&&(i.localStream.audioTrack&&!i.localStream.videoTrack&&(p.removeTwccRtcpFb(),null===(s=i.peerCore)||void 0===s||s.setRemoveTwcc(!0)),p.setDirection()),e.jsep.sdp=p.sdp,null===(c=i.peerCore)||void 0===c||c.setPrevAnswerSdp(null===(u=null==e?void 0:e.jsep)||void 0===u?void 0:u.sdp)}(null===(l=e.jsep)||void 0===l?void 0:l.sdp)&&t.answerSdpHook&&"function"==typeof t.answerSdpHook&&(e.jsep.sdp=t.answerSdpHook(e.jsep.sdp)),i.pc.setRemoteDescription(new RTCSessionDescription(e.jsep)).then((function(e){i.pc&&i.localStream&&i.localStream.setEncodeParam(i.pc),n(e)})).catch((function(t){t.sdp=e.jsep.sdp,r(t)}))}else r({message:"no PeerConnection"})}))},t.prototype.removeTrack=function(e,t){var n=this;return new Promise((function(r,i){n.pc&&n.dataChannel&&n.dataChannel.removeTrack(e,t).then((function(){})).catch((function(e){i(e)}))}))},t.prototype.replaceTrack=function(e,t,n){var r=this;return new Promise((function(i,o){n||r.pc&&r.dataChannel&&r.dataChannel.removeTrack(e,t).then((function(){})).catch((function(e){o(e)}))}))},t.prototype.dispose=function(){this.cancelable&&(this.cancelable.cancel(),this.cancelable=void 0),this.peerCore&&(this.peerCore.dispose(),this.peerCore=void 0),this.pc&&(this.pc.onconnectionstatechange=function(){},this.pc.ontrack=function(){},this.pc.close(),this.pc=void 0),this.sdpUtil&&(this.sdpUtil.dispose(),this.sdpUtil=void 0),this.localStream&&(this.localStream=void 0),this.subMonitor.stop(),this.pubMonitor.stopHeartbeat(),this.isReused=!1},t.prototype.addStream=function(){return this.localStream?this.pc?(this.localStream.audioTrack&&this.pc.addTransceiver(this.localStream.audioTrack,{direction:"sendonly",streams:[this.localStream.mediaStream]}),this.localStream.videoTrack&&this.pc.addTransceiver(this.localStream.videoTrack,{direction:"sendonly",streams:[this.localStream.mediaStream]}),0):m.ErrorCode.ERROR_PREERCONNECTION_UNKNOWN:m.ErrorCode.ERROR_MEDIASTREAMTRACK_AUDIO_NONE},t.prototype.initDataChannel=function(){!this.dataChannel&&this.pc&&(this.dataChannel=new v.Datachannel(this.pc))},t}(p.default);t.RtsPeerconnection=E},function(e,t,n){var r;self,r=function(){return function(){var e={692:function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",(t+=null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},766:function(e,t,n){var r=n(962),i=n(627);t.write=i,t.parse=r.parse,t.parseParams=r.parseParams,t.parseFmtpConfig=r.parseFmtpConfig,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},962:function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))}(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},o=n(692),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(a).forEach((function(e){var t=e[0],a=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var s=0;s<(o[t]||[]).length;s+=1){var c=o[t][s];if(c.reg.test(a))return i(c,r,a)}})),t.media=n,t};var s=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},627:function(e,t,n){var r=n(692),i=/%[sdv%]/g,o=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},a=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var a=t.names[i];t.name?r.push(n[t.name][a]):r.push(n[t.names[i]])}else r.push(n[t.name]);return o.apply(null,r)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||s,i=t.innerOrder||c,o=[];return n.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(a(t,n,e))}))}))})),e.media.forEach((function(e){o.push(a("m",r.m[0],e)),i.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(a(t,n,e))}))}))}))})),o.join("\r\n")+"\r\n"}},776:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.PeerConnectionCore=t.EDatachannelStatus=void 0;var s=n(887),c=n(248),u=n(237),d=n(619),l=n(628),p=n(961),f=n(844),h=n(651);Object.defineProperty(t,"EDatachannelStatus",{enumerable:!0,get:function(){return h.EDatachannelStatus}});var _="rts video",v="rts audio",m=function(){function e(e){this.removeTwcc=!1,this.streamManager=new l.StreamManager,e.pc?(this.pc=e.pc,this.signal=new d.Signal({pc:e.pc,onDatachannelEvent:e.onDatachannelEvent})):console.error("peerconnetion is required")}return e.prototype.getStreamManager=function(){return this.streamManager},e.prototype.setPrevOfferSdp=function(e){this.prevOfferSdp=e},e.prototype.setPrevAnswerSdp=function(e){this.prevAnswerSdp=e},e.prototype.getTrackIds=function(e){return e.reduce((function(e,t){return a(a([],e,!0),[t.id],!1)}),[])},e.prototype.setRemoveTwcc=function(e){this.removeTwcc=e},e.prototype.subscribeAdd=function(e){return i(this,void 0,void 0,(function(){var t,n,u,d,l,h,_,v,m=this;return o(this,(function(g){switch(g.label){case 0:if(this.log("SUB LIST: ",e),t=(new Date).getTime(),n=(new Date).getTime(),u=(new Date).getTime(),d=this,l=this.extendUrl(e),h=l.map((function(e){var t=e.urlData,n=e.vMsid,r=e.aMsid;if(m.streamManager.has(t.url)){var i=m.streamManager.get(t.url),o=i.videoInfoList.map((function(e){return e.msid})),a=i.audioInfoList.map((function(e){return e.msid})),c=(0,s.intersection)(o,n),u=(0,s.intersection)(a,r);if(u.length||c.length)return{url:t.url,vMsid:c,aMsid:u}}})).filter((function(e){return e})),this.log("DELETE LIST: ",h),!(null==h?void 0:h.length))return[3,4];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,this.subscribeDeleteTracks(h,!0)];case 2:return g.sent(),[3,4];case 3:throw _=g.sent(),(v=_).extraInfo=r(r({},v.extraInfo),{api:"subscribeAdd",signal_api:"subscribeDeleteTracks",configList:e}),v;case 4:return t=(new Date).getTime(),[2,new Promise((function(s,h){return i(m,void 0,void 0,(function(){var _,v,m,g,E,y,b,S,T,w,R,C,O,A=this;return o(this,(function(I){switch(I.label){case 0:if(!this.pc)return[2,h(new p.RtsError(f.ErrorCode.CORE_NO_PC_ERROR,"subscribeAdd: no peerconnection",""))];this.pc.addEventListener("track",(function a(c){var p;return i(this,void 0,void 0,(function(){var i,c;return o(this,(function(o){switch(o.label){case 0:null===(p=d.pc)||void 0===p||p.removeEventListener("track",a),i=d.buildUrlStreamMap(l),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,d.subscribeActive(e)];case 2:return o.sent(),[3,4];case 3:return(c=o.sent()).extraInfo=r(r({},c.extraInfo),{api:"subscribeAdd",signal_api:"subscribeActive"}),[2,h(c)];case 4:return n=(new Date).getTime(),s({deleteRspTime:t,subAddRspTime:u,activeRspTime:n,streamList:i}),[2]}}))}))})),l.forEach((function(e){var t=e.urlData,n=e.vMsid,r=e.aMsid;if(A.pc){if(A.streamManager.init(t.url),t.subVideo&&!A.streamManager.isMsidSubPubDone(t.url,{vMsid:n[0]})){var i=A.pc.addTransceiver("video",{direction:"recvonly"});A.streamManager.update(t.url,{vMsid:n[0],vTransceiver:i})}if(t.subAudio&&!A.streamManager.isMsidSubPubDone(t.url,{aMsid:r[0]})){var o=A.pc.addTransceiver("audio",{direction:"recvonly"});A.streamManager.update(t.url,{aMsid:r[0],aTransceiver:o})}}})),I.label=1;case 1:return I.trys.push([1,3,,4]),[4,this.pc.createOffer()];case 2:return _=I.sent(),[3,4];case 3:return v=I.sent(),[2,h(new p.RtsError(f.ErrorCode.DATACHANNEL_CREATE_OFFER_ERROR,"CreateOffer Error: ".concat(v),"",{api:"subscribeAdd",err:v}))];case 4:m=new c.SdpUtil({sdp:_.sdp||""}),this.restorePublishedSsrc(m),m.addNack(),m.updateBundle(),_=new RTCSessionDescription({type:"offer",sdp:m.generate()}),g=this.findNewSubPubMids((null==_?void 0:_.sdp)||"",this.prevOfferSdp||""),this.setPrevOfferSdp(_.sdp||""),I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.pc.setLocalDescription(_)];case 6:return I.sent(),[3,8];case 7:return E=I.sent(),[2,h(new p.RtsError(f.ErrorCode.DATACHANNEL_SET_OFFER_ERROR,"SetLocalDescription error: ".concat(E),"",{api:"subscribeAdd",sdp:_}))];case 8:y=[],l.forEach((function(){var e=new c.SdpUtil({sdp:(null==_?void 0:_.sdp)||""});e.keepMedia(g),y.push(e.generate())})),this.log("ADD LIST: ",l),I.label=9;case 9:return I.trys.push([9,11,,12]),[4,null===(O=this.signal)||void 0===O?void 0:O.subscribeAdd(l,y,this.streamManager)];case 10:return b=I.sent(),[3,12];case 11:return(S=I.sent()).extraInfo=r({api:"subscribeAdd",signal_api:"subscribeAdd"},S.extraInfo),[2,h(S)];case 12:T=[],b.streams.forEach((function(e,t){A.log("Sub TraceId[".concat(t,"]: "),e.traceid);var n=new c.SdpUtil({sdp:e.sdp});T=a(a([],T,!0),n.detail.media,!0);var r=l.find((function(t){return t.urlData.url===e.url}));r&&(r.traceId=e.traceid)})),(w=new c.SdpUtil({sdp:this.prevAnswerSdp||""})).addOrUpdateMedia(T),this.alignAnswerMidsWithOffer(w),R=w.generate(),this.setPrevAnswerSdp(R),I.label=13;case 13:return I.trys.push([13,15,,16]),[4,this.pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:R}))];case 14:return I.sent(),l.forEach((function(e){A.streamManager.markAlreadySubPub(e.urlData.url,{vMsid:e.vMsid[0],aMsid:e.aMsid[0]})})),[3,16];case 15:return C=I.sent(),[2,h(new p.RtsError(f.ErrorCode.DATACHANNEL_SET_ANSWER_ERROR,"SetRemoteDescription error: ".concat(C),"",{api:"subscribeAdd",sdp:R}))];case 16:return u=(new Date).getTime(),[2]}}))}))}))]}}))}))},e.prototype.subscribeActive=function(e){var t;return i(this,void 0,void 0,(function(){return o(this,(function(n){return[2,null===(t=this.signal)||void 0===t?void 0:t.subscribeActive(this.extendUrl(e))]}))}))},e.prototype.subscribeDeleteTracks=function(e,t){var n,a,c,u;return i(this,void 0,void 0,(function(){var d,l,p,h,_=this;return o(this,(function(v){switch(v.label){case 0:e.forEach((function(e){e.rawUrl=e.url,e.url=_.streamManager.getOriginUrl(e.url)})),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,null===(n=this.signal)||void 0===n?void 0:n.subscribeDelete(e)];case 2:return v.sent(),[3,4];case 3:if(d=v.sent(),l=d,!t||l.errorCode!==f.ErrorCode.DATACHANNEL_RESPONSE_ERROR||!(null===(c=null===(a=l.extraInfo)||void 0===a?void 0:a.parsedData)||void 0===c?void 0:c.streams)||404!==(null===(u=l.extraInfo.parsedData.streams[0])||void 0===u?void 0:u.res_code))throw l.extraInfo=r({api:"subscribeDeleteTracks"},l.extraInfo),l;return[3,4];case 4:return p=[],h=e.map((function(e){var t=e.url,n=e.vMsid,a=e.aMsid,c=e.rawUrl;return i(_,void 0,void 0,(function(){var e,i,u,d,l,f,h,_;return o(this,(function(o){switch(o.label){case 0:t=(0,s.pruneSubUrl)(t),this.streamManager.has(t)&&(n&&(u=this.streamManager.getTransceiver(t,{vMsid:n[0]}))&&(i=u.receiver.track).stop(),a&&(d=this.streamManager.getTransceiver(t,{aMsid:a[0]}))&&(e=d.receiver.track).stop()),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.simulateOfferAnswer()];case 2:return o.sent(),[3,4];case 3:throw(l=o.sent()).extraInfo=r({api:"subscribeDeleteTracks"},l.extraInfo),l;case 4:return(f=this.streamManager.getStreamByMsid({url:t,vMsid:null==n?void 0:n[0],aMsid:null==a?void 0:a[0]}))&&(e&&(null===(h=f.mediastream)||void 0===h||h.removeTrack(e)),i&&(null===(_=f.mediastream)||void 0===_||_.removeTrack(i))),this.streamManager.pruneStreamList(t),this.streamManager.removeMsid(t,{vMsid:(null==n?void 0:n.length)?this.unifyMsid(n,"video"):void 0,aMsid:(null==a?void 0:a.length)?this.unifyMsid(a,"audio"):void 0}),p.push({url:c||"",stream:f}),[2]}}))}))})),[4,Promise.all(h)];case 5:return v.sent(),[2,p]}}))}))},e.prototype.subscribeStop=function(e){var t;return i(this,void 0,void 0,(function(){var n,a=this;return o(this,(function(c){switch(c.label){case 0:try{null===(t=this.signal)||void 0===t||t.subscribeStop(this.extendUrl(e))}catch(e){throw e.extraInfo=r({api:"subscribeStop"},e.extraInfo),e}return e.forEach((function(e){e.rawUrl=e.url,e.url=a.streamManager.getOriginUrl(e.url)})),n=e.map((function(e){var t=e.url;return e.rawUrl,e.targetStreams,i(a,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:t=(0,s.pruneSubUrl)(t),this.streamManager.getAllTransceivers(t).forEach((function(e){var t;null===(t=null==e?void 0:e.receiver.track)||void 0===t||t.stop()})),this.streamManager.get(t).streamList.forEach((function(e){return e.release()})),this.streamManager.remove(t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.simulateOfferAnswer()];case 2:return n.sent(),[3,4];case 3:throw(e=n.sent()).extraInfo=r({api:"subscribeStop"},e.extraInfo),e;case 4:return[2]}}))}))})),[4,Promise.all(n)];case 1:return c.sent(),[2]}}))}))},e.prototype.publishAdd=function(e){var t;return i(this,void 0,void 0,(function(){var n,i,s,u,d,h,_,v,m,g,E,y,b,S,T,w,R,C,O,A,I,k,N,P,D,x,L=this;return o(this,(function(o){switch(o.label){case 0:if(e.length>1)throw console.error("Only one stream is supported."),new p.RtsError(f.ErrorCode.CORE_PUBLIST_EXCEED_ERROR,"publishAdd: publishList exceed limit","",{api:"publishAdd"});if(!this.pc)throw new p.RtsError(f.ErrorCode.CORE_NO_PC_ERROR,"publishAdd: no peerconnection","",{api:"publishAdd"});n=e[0],i=n.stream,s=this.unifyMsid(n.aMsid,"audio"),u=this.unifyMsid(n.vMsid,"video"),n.rawUrl=n.url,n.url=this.streamManager.getOriginUrl(n.url),"boolean"!=typeof n.updateSourceStream&&(n.updateSourceStream=!0),d=i.videoTrack,h=i.audioTrack,_=this.streamManager.getStreamByMsid({url:n.url,vMsid:u,aMsid:s}),this.streamManager.init(n.url,l.EStreamType.Publish),h&&(v=this.pc.addTransceiver(i.audioTrack,{direction:"sendonly"}),this.streamManager.update(n.url,{aMsid:s,aTransceiver:v,stream:i})),d&&(v=this.pc.addTransceiver(i.videoTrack,{direction:"sendonly"}),this.streamManager.update(n.url,{vMsid:u,vTransceiver:v,stream:i})),_&&n.updateSourceStream&&_.mergeStream(i),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.pc.createOffer()];case 2:return m=o.sent(),[3,4];case 3:throw g=o.sent(),new p.RtsError(f.ErrorCode.DATACHANNEL_CREATE_OFFER_ERROR,"CreateOffer Error: ".concat(g),"",{api:"publishAdd",err:g});case 4:E=new c.SdpUtil({sdp:m.sdp||""}),y=this.parseMsidString(u),b=this.parseMsidString(s),S=this.findNewSubPubMids(m.sdp||"",this.prevOfferSdp||""),y.stream&&E.detail.msidSemantic&&(E.detail.msidSemantic.token=y.stream),T=E.detail.media.reduce((function(e,t){return"inactive"===t.direction?a(a([],e,!0),[String(t.mid)],!1):e}),[]),E.detail.media.forEach((function(e){var t;if("recvonly"!==e.direction&&"application"!==e.type&&S.includes(String(e.mid))){var n="video"===e.type?y:b,r=L.parseMsidString(e.msid);r.stream=n.stream||r.stream,r.track=n.track||r.track;var i=L.stringifyMsid(r);e.msid=i,null===(t=e.ssrcs)||void 0===t||t.forEach((function(e){switch(e.attribute){case"cname":case"label":e.value=n.track||e.value;break;case"msid":e.value=i;break;case"mslabel":e.value=n.stream||e.value}}))}})),this.restorePublishedSsrc(E),this.restorePublishMsid(E),E.addNack(),w=E.generate(),this.setPrevOfferSdp(w),o.label=5;case 5:return o.trys.push([5,7,,8]),[4,this.pc.setLocalDescription(new RTCSessionDescription({type:"offer",sdp:w}))];case 6:return o.sent(),[3,8];case 7:throw R=o.sent(),new p.RtsError(f.ErrorCode.DATACHANNEL_SET_OFFER_ERROR,"SetLocalDescription error: ".concat(R),"",{api:"publishAdd",sdp:w});case 8:E.keepMedia(S),this.updateTrackInfoList({url:n.rawUrl,stream:n.stream,vMsid:u,aMsid:s,sdpMediaList:E.detail.media}),o.label=9;case 9:return o.trys.push([9,11,,12]),[4,null===(t=this.signal)||void 0===t?void 0:t.publishAdd([n.url],[E.generate()],[d?[this.stringifyMsid(y)]:[]],[h?[this.stringifyMsid(b)]:[]])];case 10:return C=o.sent(),[3,12];case 11:throw O=o.sent(),(A=O).extraInfo=r({api:"publishAdd"},A.extraInfo),A;case 12:I=C.streams[0],n.traceId=I.traceid,this.log("Pub TraceId: ",n.traceId),(k=new c.SdpUtil({sdp:I.sdp})).detail.media.forEach((function(e){"application"!==e.type&&"sendrecv"===e.direction&&(e.direction="recvonly")})),(N=new c.SdpUtil({sdp:this.prevAnswerSdp||""})).detail.media.forEach((function(e){"application"===e.type&&(delete e.candidates,delete e.endOfCandidates)})),N.setMediaInactive(T),N.addOrUpdateMedia(k.detail.media,{isPublish:!0}),this.alignAnswerMidsWithOffer(N),this.removeTwcc&&(P=["http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"],N.detail.media.forEach((function(e){var t;e.ext=null===(t=e.ext)||void 0===t?void 0:t.filter((function(e){return!P.includes(e.uri)}))}))),D=N.generate(),this.setPrevAnswerSdp(D),o.label=13;case 13:return o.trys.push([13,15,,16]),[4,this.pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:D}))];case 14:return o.sent(),this.streamManager.markAlreadySubPub(n.url,{vMsid:u,aMsid:s,isPub:!0}),[3,16];case 15:throw x=o.sent(),new p.RtsError(f.ErrorCode.DATACHANNEL_SET_ANSWER_ERROR,"SetRemoteDescription error: ".concat(x),"",{api:"publishAdd",sdp:D});case 16:return[2,e.map((function(e){return{url:e.rawUrl,trackInfoList:L.streamManager.getAllMediaInfoList(n.url),traceId:e.traceId}}))]}}))}))},e.prototype.publishDeleteTracks=function(e){var t,n,a,c,u,d,l;return i(this,void 0,void 0,(function(){var i,p,f,h,_,v,m,g,E,y,b=this;return o(this,(function(o){switch(o.label){case 0:e.forEach((function(e){e.rawUrl=e.url,e.url=b.streamManager.getOriginUrl(e.url)})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,null===(t=this.signal)||void 0===t?void 0:t.publishDelete(e)];case 2:return o.sent(),[3,4];case 3:throw(i=o.sent()).extraInfo=r({api:"publishDeleteTracks"},i.extraInfo),i;case 4:if(p=e[0],f=(0,s.pruneSubUrl)(p.url),"boolean"!=typeof p.updateSourceStream&&(p.updateSourceStream=!0),h=!1,_=!1,!this.streamManager.has(f))return[3,9];(null===(n=p.vMsid)||void 0===n?void 0:n.length)&&((null==(v=this.streamManager.getTransceiver(f,{vMsid:p.vMsid[0]}))?void 0:v.sender)&&(null===(a=this.pc)||void 0===a||a.removeTrack(null==v?void 0:v.sender)),h=!0),(null===(c=p.aMsid)||void 0===c?void 0:c.length)&&((null==(m=this.streamManager.getTransceiver(f,{aMsid:p.aMsid[0]}))?void 0:m.sender)&&(null===(u=this.pc)||void 0===u||u.removeTrack(null==m?void 0:m.sender)),_=!0),o.label=5;case 5:return o.trys.push([5,7,,8]),[4,this.simulateOfferAnswer()];case 6:return o.sent(),[3,8];case 7:throw(g=o.sent()).extraInfo=r({api:"publishDeleteTracks"},g.extraInfo),g;case 8:return(E=this.streamManager.getStreamByMsid({url:f,vMsid:null===(d=p.vMsid)||void 0===d?void 0:d[0],aMsid:null===(l=p.aMsid)||void 0===l?void 0:l[0]}))&&p.updateSourceStream&&E.deleteTracks({video:h,audio:_}),this.streamManager.removeMsid(f,{vMsid:h?this.unifyMsid(p.vMsid,"video"):void 0,aMsid:_?this.unifyMsid(p.aMsid,"audio"):void 0}),this.streamManager.pruneStreamList(f),y=this.streamManager.getAllMediaInfoList(p.url),[2,e.map((function(e){return{url:e.rawUrl,trackInfoList:y}}))];case 9:return[2]}}))}))},e.prototype.publishReplaceTracks=function(e){var t,n,r,a,s;return i(this,void 0,void 0,(function(){var i,c,u,d,l,h,_,v,m,g,E=this;return o(this,(function(o){switch(o.label){case 0:if(i=e[0],c=i.stream,u=i.vMsid,d=i.aMsid,i.rawUrl=i.url,i.url=this.streamManager.getOriginUrl(i.url),!this.streamManager.has(i.url))throw new p.RtsError(f.ErrorCode.CORE_PUB_REPLACE_URL_NOT_FOUND,"No stream found for this url: ".concat(i.url),"",{api:"publishReplaceTracks",configList:e});return"boolean"!=typeof i.updateSourceStream&&(i.updateSourceStream=!0),l=c.audioTrack,h=c.videoTrack,_=this.streamManager.getAllMediaInfoList(i.url,!0),l&&(m=null===(t=_.find((function(e){return"audio"===e.type&&(!d||e.msid===d)})))||void 0===t?void 0:t.transceiver)&&l.id!==(null===(r=null===(n=m.sender)||void 0===n?void 0:n.track)||void 0===r?void 0:r.id)?[4,m.sender.replaceTrack(l)]:[3,2];case 1:o.sent(),o.label=2;case 2:return h?(v=_.find((function(e){return"video"===e.type&&(!u||e.msid===u)})),(m=null==v?void 0:v.transceiver)&&h.id!==(null===(s=null===(a=m.sender)||void 0===a?void 0:a.track)||void 0===s?void 0:s.id)?[4,m.sender.replaceTrack(h)]:[3,4]):[3,4];case 3:o.sent(),c.isCustomStream||(v.from=c.hasScreen?"screen":"camera"),o.label=4;case 4:return(g=this.streamManager.getStreamByMsid({url:i.url,vMsid:u,aMsid:d}))&&i.updateSourceStream&&g.mergeStream(c),[2,e.map((function(e){return{url:e.rawUrl,trackInfoList:E.streamManager.getAllMediaInfoList(i.url)}}))]}}))}))},e.prototype.publishStop=function(e){var t;return i(this,void 0,void 0,(function(){var n,a,c=this;return o(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,null===(t=this.signal)||void 0===t?void 0:t.publishStop(e.map((function(e){return c.streamManager.getOriginUrl(e.url)})))];case 1:return u.sent(),[3,3];case 2:throw(n=u.sent()).extraInfo=r({api:"publishStop"},n.extraInfo),n;case 3:return a=e.map((function(e){var t=e.url;return i(c,void 0,void 0,(function(){var e,n=this;return o(this,(function(i){switch(i.label){case 0:t=(0,s.pruneSubUrl)(t),this.streamManager.getAllTransceivers(t).forEach((function(e){var t;(null==e?void 0:e.sender)&&(null===(t=n.pc)||void 0===t||t.removeTrack(null==e?void 0:e.sender))})),this.streamManager.get(t).streamList.forEach((function(e){return e.deleteTracks({video:!0,audio:!0})})),this.streamManager.remove(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.simulateOfferAnswer()];case 2:return i.sent(),[3,4];case 3:throw(e=i.sent()).extraInfo=r({api:"publishStop"},e.extraInfo),e;case 4:return[2]}}))}))})),[4,Promise.all(a)];case 4:return u.sent(),[2]}}))}))},e.prototype.buildUrlStreamMap=function(e){var t=this,n=[];return e.forEach((function(e){var r=e.urlData,i=e.traceId,o=e.url,a=e.vMsid,s=e.aMsid,c=r.url,u=new MediaStream;t.streamManager.getAllMediaInfoList(c,!0).forEach((function(e){var t,n;if("video"===e.type&&e.msid===a[0]||"audio"===e.type&&e.msid===s[0]){var r=null===(n=null===(t=e.transceiver)||void 0===t?void 0:t.receiver)||void 0===n?void 0:n.track;r&&u.addTrack(r)}})),n.push({url:o,stream:u,traceId:i})})),n},e.prototype.extendUrl=function(e){var t=this;return e.map((function(e){var n=e.url,i=e.subAudio,o=e.subVideo,a=e.aMsid,s=e.vMsid,c=t.streamManager.getOriginUrl(n),d=new u.UrlData({url:c,subAudio:i,subVideo:o});return r(r({},e),{urlData:d,aMsid:d.subAudio?a||[v]:[],vMsid:d.subVideo?s||[_]:[]})}))},e.prototype.parseSdp=function(e){return new c.SdpUtil({sdp:e})},e.prototype.getTrackInfoList=function(e,t,n){void 0===e&&(e=[]);var r=[];return e.forEach((function(e){var i,o,a,s;if("application"!==e.type){var c,u=Number(e.ssrcs&&(null===(i=e.ssrcs[0])||void 0===i?void 0:i.id))||-1,d=e.rtp.find((function(e){var t;return["opus","h264"].includes(null===(t=e.codec)||void 0===t?void 0:t.toLowerCase())})),l=(null==d?void 0:d.codec)||"",p=(null==d?void 0:d.payload)||0;t.isCustomStream||"video"===e.type&&(c=t.hasScreen?"screen":"camera");var f=e.msid;if((null==n?void 0:n.aMsid)||(null==n?void 0:n.vMsid)){var h=("video"===e.type?n.vMsid:n.aMsid)||"";(null==h?void 0:h.trim().includes(" "))||(f=null===(o=e.msid)||void 0===o?void 0:o.split(" ")[1])}var _="video"===e.type?null===(a=t.videoTrack)||void 0===a?void 0:a.id:null===(s=t.audioTrack)||void 0===s?void 0:s.id;r.push({ssrc:u,codec:l,type:e.type,pt:p,msid:f,from:c,trackId:_})}})),r},e.prototype.patchSubscribeStreamManagerRecord=function(e,t){var n=this;this.extendUrl([{url:e,vMsid:t.vMsid,aMsid:t.aMsid}]).forEach((function(e){var r=e.urlData,i=e.vMsid,o=e.aMsid;if(n.pc){n.streamManager.remove(r.url),n.streamManager.init(r.url);var a=n.pc.getTransceivers()||[];if(r.subVideo){var s=a.find((function(e){return"video"===e.receiver.track.kind}));n.streamManager.update(r.url,{vMsid:i[0],vTransceiver:s,stream:t.stream})}if(r.subAudio){var c=a.find((function(e){return"audio"===e.receiver.track.kind}));n.streamManager.update(r.url,{aMsid:o[0],aTransceiver:c,stream:t.stream})}}}))},e.prototype.patchPublishStreamManagerRecord=function(e,t){if(this.pc){var n=t.stream,r=n.videoTrack,i=n.audioTrack,o=this.unifyMsid(t.aMsid,"audio"),a=this.unifyMsid(t.vMsid,"video");this.streamManager.init(e,l.EStreamType.Publish);var s=this.pc.getTransceivers()||[];if(r){var c=s.find((function(e){var t,n;return(null===(n=null===(t=e.sender)||void 0===t?void 0:t.track)||void 0===n?void 0:n.id)===r.id}));c&&this.streamManager.update(e,{vMsid:a,vTransceiver:c,stream:t.stream})}if(i){var u=s.find((function(e){var t,n;return(null===(n=null===(t=e.sender)||void 0===t?void 0:t.track)||void 0===n?void 0:n.id)===i.id}));u&&this.streamManager.update(e,{aMsid:o,aTransceiver:u,stream:t.stream})}}},e.prototype.updateTrackInfoList=function(e){var t=e.url,n=e.stream,i=e.vMsid,o=e.aMsid,a=e.sdpMediaList;t||console.error("[updateTrackInfoList] url is required");var s=this.getTrackInfoList(a,n,{vMsid:i,aMsid:o}),c=s.find((function(e){return"video"===e.type})),u=s.find((function(e){return"audio"===e.type}));return i&&c&&this.streamManager.updateSdpInfo(t,r({vMsid:i},c)),o&&u&&this.streamManager.updateSdpInfo(t,r({aMsid:o},u)),s},e.prototype.unifyMsid=function(e,t){var n="video"===t?_:v;return(null==e?void 0:e[0])||n},e.prototype.dispose=function(){var e,t;this.pc=void 0,this.prevOfferSdp=void 0,this.prevAnswerSdp=void 0,null===(e=this.signal)||void 0===e||e.dispose(),null===(t=this.streamManager)||void 0===t||t.dispose()},e.prototype.findNewSubPubMids=function(e,t){var n=new c.SdpUtil({sdp:e}),r=new c.SdpUtil({sdp:t}),i=n.detail.media.filter((function(e){return"inactive"!==e.direction})).map((function(e){return e.mid})),o=r.detail.media.map((function(e){return e.mid}));return this.findDiff(i,o).map((function(e){return String(e)}))},e.prototype.findDiff=function(e,t){return Array.from(new Set(a([],e,!0).filter((function(e){return!t.includes(e)}))))},e.prototype.parseMsidString=function(e){var t={stream:"",track:""};if(!e)return t;var n=e.trim().split(" "),r=n[0],i=n[1];return i?(t.stream=r,t.track=i):t.track=r,t},e.prototype.stringifyMsid=function(e){var t=e.stream,n=e.track;return"".concat(t).concat(t?" ":"").concat(n)},e.prototype.restorePublishedSsrc=function(e){var t=new c.SdpUtil({sdp:this.prevOfferSdp||""}).getPublishSsrcs();e.detail.media.forEach((function(e){var n;"recvonly"!==e.direction&&(null===(n=e.ssrcs)||void 0===n||n.forEach((function(n){var r,i=null===(r=t.find((function(t){return t.mid===String(e.mid)})))||void 0===r?void 0:r.ssrc;i&&(n.id=String(i))})))}))},e.prototype.restorePublishMsid=function(e){var t=this,n=new c.SdpUtil({sdp:this.prevOfferSdp||""}).getPublishMsids();(null==n?void 0:n.length)&&e.detail.media.forEach((function(e){var r,i;if("recvonly"!==e.direction){var o=null===(r=n.find((function(t){return t.mid===String(e.mid)})))||void 0===r?void 0:r.msid;if(!o)return;var a=t.parseMsidString(o);e.msid=o||e.msid,null===(i=e.ssrcs)||void 0===i||i.forEach((function(e){switch(e.attribute){case"cname":e.value=a.track||e.value;break;case"msid":e.value=o||e.value}}))}}))},e.prototype.alignAnswerMidsWithOffer=function(e){var t=new c.SdpUtil({sdp:this.prevOfferSdp||""}).detail.media.map((function(e){return String(e.mid)})),n=e.detail.media.map((function(e){return String(e.mid)})),r=this.findDiff(n,t);e.removeMedia(r);var i=[];t.forEach((function(t){var n=e.detail.media.find((function(e){return String(e.mid)===t}));n&&i.push(n)})),e.detail.media=i.filter((function(e){return e}))},e.prototype.simulateOfferAnswer=function(){var e,t,n;return i(this,void 0,void 0,(function(){var r,i,a,s,u,d,l;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,null===(e=this.pc)||void 0===e?void 0:e.createOffer()];case 1:return r=o.sent(),i=new c.SdpUtil({sdp:(null==r?void 0:r.sdp)||""}),a=i.detail.media.filter((function(e){return"inactive"===e.direction})).map((function(e){return String(e.mid)})),this.restorePublishedSsrc(i),this.restorePublishMsid(i),this.prevOfferSdp=i.generate(),(s=new c.SdpUtil({sdp:this.prevAnswerSdp||""})).setMediaInactive(a),this.prevAnswerSdp=s.generate(),[3,3];case 2:throw u=o.sent(),new p.RtsError(f.ErrorCode.DATACHANNEL_CREATE_OFFER_ERROR,"CreateOffer error: ".concat(u),"",{pc:this.pc});case 3:return o.trys.push([3,5,,6]),[4,null===(t=this.pc)||void 0===t?void 0:t.setLocalDescription(new RTCSessionDescription({type:"offer",sdp:this.prevOfferSdp}))];case 4:return o.sent(),[3,6];case 5:throw d=o.sent(),new p.RtsError(f.ErrorCode.DATACHANNEL_SET_OFFER_ERROR,"SetLocalDescription error: ".concat(d),"",{sdp:this.prevOfferSdp});case 6:return o.trys.push([6,8,,9]),[4,null===(n=this.pc)||void 0===n?void 0:n.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:this.prevAnswerSdp}))];case 7:return o.sent(),[3,9];case 8:throw l=o.sent(),new p.RtsError(f.ErrorCode.DATACHANNEL_SET_ANSWER_ERROR,"SetRemoteDescription error: ".concat(l),"",{sdp:this.prevAnswerSdp});case 9:return[2]}}))}))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window.RTS_DATACHANNEL_DEBUG&&console.log.apply(console,a(["[PC-Core]"],e,!1))},e}();t.PeerConnectionCore=m},651:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataChannelCore=t.EDatachannelStatus=void 0;var o,a=n(844),s=n(961),c=n(854),u=i(n(973));function d(){}!function(e){e[e.DATACHANNEL_STATUS_CLOSE=0]="DATACHANNEL_STATUS_CLOSE",e[e.DATACHANNEL_STATUS_OPEN=1]="DATACHANNEL_STATUS_OPEN"}(o=t.EDatachannelStatus||(t.EDatachannelStatus={}));var l=function(){function e(e){var t=this;this.pendingPromiseMap=new Map,this.mutexSendData=!1,this.timerSendData=null,this.eventQueue=new c.CacheBuffer("send tasks"),this.pc=e.pc,this.eventHandler=e.onDatachannelEvent||d,this.datachannel=this.pc.createDataChannel("GRTN_RTC_DATACHANNEL"),this.datachannel.addEventListener("open",(function(){setTimeout((function(){t.eventHandler(o.DATACHANNEL_STATUS_OPEN)}),200)})),this.datachannel.addEventListener("close",(function(){t.eventHandler(o.DATACHANNEL_STATUS_CLOSE)})),this.datachannel.addEventListener("closing",(function(){})),this.datachannel.addEventListener("error",(function(){})),this.datachannel.addEventListener("bufferedamountlow",(function(){}))}return e.prototype.sendData=function(e){var t=this;return new Promise((function(n,r){var i=new u.default(t.datachannel);if(t.mutexSendData){var o={sender:i,res:n,rej:r,data:e};t.eventQueue.cache(o)}else t.atomSend(i,n,r,e)}))},e.prototype.dispose=function(){this.mutexSendData=!1,null!==this.timerSendData&&clearTimeout(this.timerSendData),this.timerSendData=null,this.eventQueue=new c.CacheBuffer("send tasks")},e.prototype.atomSend=function(t,n,r,i){var o=this;this.mutexSendData=!0,t.on("onSendDataDone",(function(){if(null!==o.timerSendData&&clearTimeout(o.timerSendData),o.timerSendData=null,o.mutexSendData=!1,!o.eventQueue.isEmpty()){var e=o.eventQueue.getFirst();o.atomSend(e.sender,e.res,e.rej,e.data)}})),this.timerSendData=setTimeout((function(){r(new s.RtsError(a.ErrorCode.DATACHANNEL_TIMEOUT_ERROR,"request timeout after ".concat(e.REQUEST_TIMEOUT,"ms"),"",i)),o.timerSendData=null,o.mutexSendData=!1,t.emit("onSendDataDone")}),e.REQUEST_TIMEOUT),t.sendingProcess(n,r,i)},e.prototype.getMessageKey=function(e){var t;return void 0===e&&(e={}),"".concat(e.type,"-").concat(e.streams&&(null===(t=e.streams[0])||void 0===t?void 0:t.method))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window.RTS_DATACHANNEL_DEBUG&&console.log.apply(console,r(["[datachannel]"],e,!1))},e.REQUEST_TIMEOUT=5e3,e}();t.DataChannelCore=l},973:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EDatachannelSignalResCode=void 0;var s,c=n(844),u=n(961),d=a(n(885));!function(e){e[e.NGX_RTC_PUBLISH_ALREADY=402]="NGX_RTC_PUBLISH_ALREADY",e[e.NGX_RTC_REQUEST_FORBIDDEN=403]="NGX_RTC_REQUEST_FORBIDDEN",e[e.NGX_RTC_STREAM_NO_FOUND=404]="NGX_RTC_STREAM_NO_FOUND",e[e.NGX_RTC_SUBSCRIBE_ALREADY=410]="NGX_RTC_SUBSCRIBE_ALREADY",e[e.NGX_RTC_NORMAL_CLOSED=200]="NGX_RTC_NORMAL_CLOSED",e[e.NGX_RTC_LIMITED=508]="NGX_RTC_LIMITED",e[e.NGX_RTC_INTERNAL_SERVER_ERROR=500]="NGX_RTC_INTERNAL_SERVER_ERROR",e[e.NGX_RTC_BAD_REQUEST=400]="NGX_RTC_BAD_REQUEST",e[e.NGX_RTC_NEED_RETRY=213]="NGX_RTC_NEED_RETRY"}(s=t.EDatachannelSignalResCode||(t.EDatachannelSignalResCode={}));var l=function(e){function t(t){var n=e.call(this)||this;return n.datachannel=t,n}return i(t,e),t.prototype.sendingProcess=function(e,t,n){var r,i=this,o=performance.now();this.datachannel.onmessage=function(r){try{var a=JSON.parse(r.data),d=i.checkResponse(a);if(i.log("<<< Received:","".concat(Math.ceil(performance.now()-o),"ms"),a),d.pass)e(a);else{if(d.code===s.NGX_RTC_NEED_RETRY)return void setTimeout((function(){i.log(">>> Send:",n),i.datachannel.send(JSON.stringify(n))}),200);t(new u.RtsError(c.ErrorCode.DATACHANNEL_RESPONSE_ERROR,"[code]".concat(d.code,"; [msg]").concat(d.msg),d.traceId,{parsedData:a}))}}catch(e){t(new u.RtsError(c.ErrorCode.DATACHANNEL_PARSE_ERROR,"datachannel message parse error","",{data:r.data,err:e}))}i.emit("onSendDataDone")};try{this.log(">>> Sent:","".concat(n.type,"-").concat((null===(r=n.streams)||void 0===r?void 0:r.length)?n.streams[0].method:"-"),n)}catch(e){}this.datachannel.send(JSON.stringify(n))},t.prototype.checkResponse=function(e){var t={pass:!0,code:0,msg:"",traceId:""};0!==e.recode&&(t.pass=!1,t.code=e.recode,t.msg=e.msg);var n=e.streams;return n&&n.length>0&&n.forEach((function(e){200!==e.res_code&&(t.pass=!1,t.code=e.res_code,t.msg=e.res_msg,t.traceId=e.traceid)})),t},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window.RTS_DATACHANNEL_DEBUG&&console.log.apply(console,o(["".concat(this.now()," [datachannel]")],e,!1))},t.prototype.now=function(){var e=new Date;return"".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds(),".").concat(e.getMilliseconds())},t}(d.default);t.default=l},844:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=void 0,function(e){e[e.DATACHANNEL_SIGNAL_ERROR=15e3]="DATACHANNEL_SIGNAL_ERROR",e[e.DATACHANNEL_SET_OFFER_ERROR=15001]="DATACHANNEL_SET_OFFER_ERROR",e[e.DATACHANNEL_SET_ANSWER_ERROR=15002]="DATACHANNEL_SET_ANSWER_ERROR",e[e.DATACHANNEL_CREATE_OFFER_ERROR=15003]="DATACHANNEL_CREATE_OFFER_ERROR",e[e.DATACHANNEL_RESPONSE_ERROR=15004]="DATACHANNEL_RESPONSE_ERROR",e[e.DATACHANNEL_PARSE_ERROR=15005]="DATACHANNEL_PARSE_ERROR",e[e.DATACHANNEL_TIMEOUT_ERROR=15006]="DATACHANNEL_TIMEOUT_ERROR",e[e.CORE_NO_PC_ERROR=15007]="CORE_NO_PC_ERROR",e[e.CORE_PUBLIST_EXCEED_ERROR=15008]="CORE_PUBLIST_EXCEED_ERROR",e[e.CORE_PUB_REPLACE_URL_NOT_FOUND=15009]="CORE_PUB_REPLACE_URL_NOT_FOUND",e[e.CORE_TRANSCEIVERS_NOT_FOUND=15010]="CORE_TRANSCEIVERS_NOT_FOUND"}(t.ErrorCode||(t.ErrorCode={}))},961:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RtsError=void 0;var r=n(844);t.RtsError=function(e,t,n,i){this.errorCode=e,this.errorCodeName=r.ErrorCode[e],this.message=t,this.traceId=n,i&&(this.extraInfo=i)}},854:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CacheBuffer=void 0;var n=function(){function e(e){this.data=[],this.tag=e||"unknown",this.maxBufferLength=90}return e.prototype.setMaxCapacity=function(e){this.maxBufferLength=90,e>=0&&(this.maxBufferLength=e),this.maxBufferLength>200&&(this.maxBufferLength=200)},e.prototype.cache=function(e){this.data.length>this.maxBufferLength&&(this.data.shift(),console.log(this.tag+" CACHE: Reach Max Capacity")),this.data.push(e)},e.prototype.getFirst=function(){return this.data.shift()},e.prototype.isEmpty=function(){return this.data.length<=0},e}();t.CacheBuffer=n},885:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._eventMap={}}return e.prototype.listeners=function(e){return this._eventMap[e]||[]},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._eventMap[e];return!!Array.isArray(i)&&(i.forEach((function(e){return e.apply(t,n)})),!0)},e.prototype.off=function(e,t){var n=this._eventMap[e];return Array.isArray(n)&&(this._eventMap[e]=n.filter((function(e){return e!==t}))),this},e.prototype.removeAllListeners=function(e){return void 0===e?this._eventMap={}:this._eventMap[e]&&(this._eventMap[e]=[]),this},e.prototype.on=function(e,t){return this._eventMap[e]?this._eventMap[e].push(t):this._eventMap[e]=[t],this},e.prototype.once=function(e,t){var n=this;return this.on(e,(function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];n.off(e,r),t.apply(n,i)})),this},e}();t.default=n},887:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersection=t.pruneSubUrl=t.parseUrlSubParams=void 0,t.parseUrlSubParams=function(e){var t={subVideo:!0,subAudio:!0};return e?(e.includes("@subvideo=no")&&(t.subVideo=!1),e.includes("@subaudio=no")&&(t.subAudio=!1),t):t},t.pruneSubUrl=function(e,t){var n=e||"";return n=n.replace("@subaudio=no","").replace("@subvideo=no",""),t&&(n=n.split("?")[0]),n},t.intersection=function(e,t){return e.filter((function(e){return t.includes(e)}))}},248:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdpUtil=void 0;var o=n(766),a=function(){function e(e){if(this.rawSdp=e.sdp,!e.sdp)throw new Error("No sdp to parse");this.sdpDetail=this.parse()}return Object.defineProperty(e.prototype,"detail",{get:function(){return this.sdpDetail},enumerable:!1,configurable:!0}),e.prototype.removeMedia=function(e){return this.removeMediaInner(e)},e.prototype.keepMedia=function(e){return this.removeMediaInner(e,{revert:!0})},e.prototype.removeMediaInner=function(e,t){void 0===t&&(t={revert:!1}),e.length&&this.sdpDetail.media&&this.sdpDetail.media.length&&(t.revert?this.sdpDetail.media=this.sdpDetail.media.filter((function(t){return e.includes(String(t.mid)||"")})):this.sdpDetail.media=this.sdpDetail.media.filter((function(t){return!e.includes(String(t.mid)||"")})),this.updateBundle())},e.prototype.addOrUpdateMedia=function(e,t){void 0===t&&(t={}),e=e.map((function(e){return r(r({},e),{setup:"passive"})}));var n=[];this.sdpDetail.media=this.sdpDetail.media.map((function(r){var i=e.find((function(e){return e.mid===r.mid}));if(i){n.push(r.mid);var o=i,a=r;return t.isPublish&&(o.ssrcs=a.ssrcs,o.ssrcGroups=a.ssrcGroups),i}return r})),this.sdpDetail.media=i(i([],this.sdpDetail.media,!0),e.filter((function(e){return!n.includes(e.mid)})),!0),this.updateBundle()},e.prototype.addMedia=function(e){var t;e=e.map((function(e){return r(r({},e),{setup:"passive"})})),this.sdpDetail.media=i(i([],this.sdpDetail.media,!0),e,!0);var n=e.reduce((function(e,t){return e+" "+t.mid}),""),o=null===(t=this.sdpDetail.groups)||void 0===t?void 0:t.find((function(e){return"BUNDLE"===e.type}));o&&(o.mids+="".concat(n))},e.prototype.setMediaInactive=function(e){this.sdpDetail.media.forEach((function(t){e.includes(String(t.mid))&&(t.direction="inactive")})),this.updateBundle()},e.prototype.getPublishSsrcs=function(){var e=[];return this.sdpDetail.media.forEach((function(t){"recvonly"!==t.direction&&t.ssrcs&&e.push({type:t.type,ssrc:t.ssrcs[0].id||"ERR_NOT_FOUND",mid:String(t.mid)})})),e},e.prototype.getPublishMsids=function(){var e=[];return this.sdpDetail.media.forEach((function(t){"recvonly"!==t.direction&&t.msid&&e.push({type:t.type,msid:t.msid,mid:String(t.mid)})})),e},e.prototype.generate=function(){return(0,o.write)(this.sdpDetail)},e.prototype.updateBundle=function(){var e,t=null===(e=this.sdpDetail.groups)||void 0===e?void 0:e.find((function(e){return"BUNDLE"===e.type}));t&&(t.mids=this.sdpDetail.media.reduce((function(e,t){return e+t.mid+" "}),"").trim())},e.prototype.addNack=function(){this.sdpDetail.media.forEach((function(e){var t,n,r;if("audio"===e.type){if(null===(t=e.rtcpFb)||void 0===t?void 0:t.some((function(e){return"nack"===e.type})))return;var i=null===(n=e.rtp.find((function(e){return"opus"===e.codec})))||void 0===n?void 0:n.payload;i&&(null===(r=e.rtcpFb)||void 0===r||r.push({payload:i,type:"nack"}))}}))},e.prototype.parse=function(){var e=(0,o.parse)(this.rawSdp);return this.patchMsid(e)},e.prototype.getMids=function(e){return(null==e?void 0:e.length)?e.reduce((function(e,t){return i(i([],e,!0),[String(t.mid)],!1)}),[]):[]},e.prototype.patchMsid=function(e){return e.media.forEach((function(e){var t,n;"application"===e.type||e.msid||(e.msid=null===(n=null===(t=e.ssrcs)||void 0===t?void 0:t.find((function(e){return"msid"===e.attribute})))||void 0===n?void 0:n.value)})),e},e}();t.SdpUtil=a},237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlData=void 0;var r=n(887),i=function(){function e(e){var t=(0,r.parseUrlSubParams)(e.url);this.data={url:e.url,subAudio:t.subAudio,subVideo:t.subVideo},"boolean"==typeof e.subAudio&&(this.data.subAudio=e.subAudio),"boolean"==typeof e.subVideo&&(this.data.subVideo=e.subVideo)}return Object.defineProperty(e.prototype,"subVideo",{get:function(){return this.data.subVideo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subAudio",{get:function(){return this.data.subAudio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return(0,r.pruneSubUrl)(this.data.url)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"originalUrl",{get:function(){return this.data.url},enumerable:!1,configurable:!0}),e}();t.UrlData=i},619:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Signal=void 0;var s,c,u,d=n(651),l=n(887);!function(e){e.Sub="sub",e.Pub="pub"}(s||(s={})),function(e){e.Add="add",e.Active="active",e.Stop="stop",e.Delete="delete"}(c||(c={})),function(e){e.Audio="audio",e.Video="video"}(u||(u={}));var p=function(){function e(e){this.latestMsgId=0,this.latestSubAddMsgId=0,this.pc=e.pc,this.datachannel=new d.DataChannelCore({pc:this.pc,onDatachannelEvent:e.onDatachannelEvent})}return e.prototype.subscribeAdd=function(e,t,n){var a;return i(this,void 0,void 0,(function(){var i;return o(this,(function(o){switch(o.label){case 0:return i=r(r({},this.baseParams({type:s.Sub,method:c.Add})),{streams:e.map((function(e,r){var i=e.urlData,o=[];return i.subAudio&&!n.isMsidSubPubDone(i.url,{aMsid:e.aMsid[0]})&&o.push({type:u.Audio,name:e.aMsid[0]}),i.subVideo&&!n.isMsidSubPubDone(i.url,{vMsid:e.vMsid[0]})&&o.push({type:u.Video,name:e.vMsid[0]}),{method:c.Add,url:i.url,msid:o,sdp:t[r],ttl:300}}))}),[4,null===(a=this.datachannel)||void 0===a?void 0:a.sendData(i)];case 1:return[2,o.sent()]}}))}))},e.prototype.subscribeActive=function(e){var t;return i(this,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return n=r(r({},this.baseParams({type:s.Sub,method:c.Active})),{streams:e.map((function(e){var t=e.urlData;return{method:c.Active,url:t.url}}))}),[4,null===(t=this.datachannel)||void 0===t?void 0:t.sendData(n)];case 1:return i.sent(),[2]}}))}))},e.prototype.subscribeDelete=function(e){var t;return i(this,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return n=r(r({},this.baseParams()),{streams:e.map((function(e){var t=e.url,n=e.aMsid,r=e.vMsid,i=[];return(null==n?void 0:n.length)&&(i=a(a([],i,!0),n.map((function(e){return{name:e}})),!0)),(null==r?void 0:r.length)&&(i=a(a([],i,!0),r.map((function(e){return{name:e}})),!0)),{method:c.Delete,url:(0,l.pruneSubUrl)(t),msid:i}}))}),[4,null===(t=this.datachannel)||void 0===t?void 0:t.sendData(n)];case 1:return[2,i.sent()]}}))}))},e.prototype.subscribeStop=function(e){var t;return i(this,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return n=r(r({},this.baseParams()),{streams:e.map((function(e){var t=e.urlData;return{method:c.Stop,url:t.url}}))}),[4,null===(t=this.datachannel)||void 0===t?void 0:t.sendData(n)];case 1:return[2,i.sent()]}}))}))},e.prototype.publishAdd=function(e,t,n,a){var u;return i(this,void 0,void 0,(function(){var i;return o(this,(function(o){return i=r(r({},this.baseParams({type:s.Pub})),{streams:e.map((function(e,r){var i=n[r],o=a[r],s=[];return i.length&&s.push({type:"video",name:i[0].trim()}),o.length&&s.push({type:"audio",name:o[0].trim()}),{method:c.Add,url:e,msid:s,sdp:t[r]}}))}),[2,null===(u=this.datachannel)||void 0===u?void 0:u.sendData(i)]}))}))},e.prototype.publishDelete=function(e){var t;return i(this,void 0,void 0,(function(){var n;return o(this,(function(i){return n=r(r({},this.baseParams({type:s.Pub})),{streams:e.map((function(e){var t=e.url,n=e.aMsid,r=e.vMsid,i=[];return(null==n?void 0:n.length)&&(i=a(a([],i,!0),n.map((function(e){return{name:e}})),!0)),(null==r?void 0:r.length)&&(i=a(a([],i,!0),r.map((function(e){return{name:e}})),!0)),{method:c.Delete,url:(0,l.pruneSubUrl)(t),msid:i}}))}),[2,null===(t=this.datachannel)||void 0===t?void 0:t.sendData(n)]}))}))},e.prototype.publishStop=function(e){var t;return i(this,void 0,void 0,(function(){var n;return o(this,(function(i){return n=r(r({},this.baseParams({type:s.Pub})),{streams:e.map((function(e){return{method:c.Stop,url:e}}))}),[2,null===(t=this.datachannel)||void 0===t?void 0:t.sendData(n)]}))}))},e.prototype.dispose=function(){this.datachannel.dispose()},e.prototype.baseParams=function(e){void 0===e&&(e={type:s.Sub});var t=0;return e.type===s.Sub&&e.method===c.Add?(t=++this.latestMsgId,this.latestSubAddMsgId=this.latestMsgId):t=e.type===s.Sub&&e.method===c.Active?this.latestSubAddMsgId:++this.latestMsgId,{msg_id:t,version:2,type:e.type}},e}();t.Signal=p},628:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=t.EStreamType=void 0;var o,a=n(887);!function(e){e.Subscribe="sub",e.Publish="pub"}(o=t.EStreamType||(t.EStreamType={}));var s=function(){function e(e){this.streamMap={}}return e.prototype.init=function(e,t){void 0===t&&(t=o.Subscribe);var n=(0,a.pruneSubUrl)(e);e=(0,a.pruneSubUrl)(e,!0),this.has(e)||(this.streamMap[e]={type:t,videoInfoList:[],audioInfoList:[],streamList:[],originUrl:n})},e.prototype.remove=function(e){delete this.streamMap[(0,a.pruneSubUrl)(e,!0)]},e.prototype.update=function(e,t){var n=this.get(e);if(!n)throw new Error("No url found");if(t.aMsid){var r=n.audioInfoList.find((function(e){return e.msid===t.aMsid}))||this.createMediaItem(t.aMsid,"audio");t.aTransceiver&&(r.transceiver=t.aTransceiver),t.stream&&(r.streamId=t.stream.id),this.updateMediaInfoList(r,n.audioInfoList)}if(t.vMsid){var o=n.videoInfoList.find((function(e){return e.msid===t.vMsid}))||this.createMediaItem(t.vMsid,"video");t.vTransceiver&&(o.transceiver=t.vTransceiver),t.stream&&(o.streamId=t.stream.id),this.updateMediaInfoList(o,n.videoInfoList)}t.stream&&(n.streamList.some((function(e){return e.id===t.stream.id}))||(n.streamList=i(i([],n.streamList,!0),[t.stream],!1)))},e.prototype.pruneStreamList=function(e){var t=this.get(e);t&&(t.streamList=t.streamList.filter((function(e){var t;return(null===(t=e.mediaStream)||void 0===t?void 0:t.getTracks().length)>0})))},e.prototype.updateSdpInfo=function(e,t){var n,r=this.get(e);if(!r)throw new Error("No url found");if(t.aMsid?n=r.audioInfoList.find((function(e){return e.msid===t.aMsid})):t.vMsid&&(n=r.videoInfoList.find((function(e){return e.msid===t.vMsid}))),!n)throw new Error("No target media found");n.ssrc=t.ssrc,n.codec=t.codec,n.pt=t.pt,n.from=t.from},e.prototype.get=function(e){return this.streamMap[(0,a.pruneSubUrl)(e,!0)]},e.prototype.has=function(e){return!!this.get(e)},e.prototype.removeMsid=function(e,t){e=(0,a.pruneSubUrl)(e,!0);var n=this.get(e);n&&(t.vMsid&&(n.videoInfoList=n.videoInfoList.filter((function(e){return e.msid!==t.vMsid}))),t.aMsid&&(n.audioInfoList=n.audioInfoList.filter((function(e){return e.msid!==t.aMsid}))))},e.prototype.getMids=function(e,t){void 0===t&&(t={filterSubDone:!1}),e=(0,a.pruneSubUrl)(e,!0);var n=this.streamMap[e];return n?i(i([],n.audioInfoList.reduce((function(e,n){return n.transceiver&&(!t.filterSubDone||t.filterSubDone&&!n.subDone)?i(i([],e,!0),[String(n.transceiver.mid)],!1):e}),[]),!0),n.videoInfoList.reduce((function(e,n){return n.transceiver&&(!t.filterSubDone||t.filterSubDone&&!n.subDone)?i(i([],e,!0),[String(n.transceiver.mid)],!1):e}),[]),!0):[]},e.prototype.getAllTransceivers=function(e){if(!e)return[];e=(0,a.pruneSubUrl)(e,!0);var t=this.get(e);return t?i(i([],t.videoInfoList.map((function(e){return e.transceiver})),!0),t.audioInfoList.map((function(e){return e.transceiver})),!0):[]},e.prototype.getTransceiver=function(e,t){if(void 0===t&&(t={}),e){e=(0,a.pruneSubUrl)(e,!0);var n=t.vMsid,r=t.aMsid,i=this.get(e);if(i){var o;if(n)return null==(o=i.videoInfoList.find((function(e){return e.msid===n})))?void 0:o.transceiver;if(r)return null==(o=i.audioInfoList.find((function(e){return e.msid===r})))?void 0:o.transceiver}}},e.prototype.getStreamByMsid=function(e){var t,n,r=this.get(e.url);if(r){if(e.vMsid){var i=null===(t=r.videoInfoList.find((function(t){return t.msid===e.vMsid})))||void 0===t?void 0:t.streamId;return r.streamList.find((function(e){return e.id===i}))}if(e.aMsid){var o=null===(n=r.audioInfoList.find((function(t){return t.msid===e.aMsid})))||void 0===n?void 0:n.streamId;return r.streamList.find((function(e){return e.id===o}))}return r.streamList[0]}},e.prototype.hasTransceiver=function(e,t){return void 0===t&&(t={}),!!this.getTransceiver(e,t)},e.prototype.removeTransceiver=function(e,t){e=(0,a.pruneSubUrl)(e,!0);var n,r=this.get(e);r&&(t.vMsid&&(n=r.videoInfoList.find((function(e){return e.msid===t.vMsid})))&&(n.transceiver=void 0),t.aMsid&&(n=r.audioInfoList.find((function(e){return e.msid===t.aMsid})))&&(n.transceiver=void 0))},e.prototype.markAlreadySubPub=function(e,t){void 0===t&&(t={}),e=(0,a.pruneSubUrl)(e,!0);var n,r=this.streamMap[e];r&&(t.vMsid&&(n=r.videoInfoList.find((function(e){return e.msid===t.vMsid})))&&(n[t.isPub?"pubDone":"subDone"]=!t.reset),t.aMsid&&(n=r.audioInfoList.find((function(e){return e.msid===t.aMsid})))&&(n[t.isPub?"pubDone":"subDone"]=!t.reset))},e.prototype.isMsidSubPubDone=function(e,t){void 0===t&&(t={}),e=(0,a.pruneSubUrl)(e,!0);var n=this.streamMap[e];if(!n)return!1;if(t.vMsid){var r=n.videoInfoList.find((function(e){return e.msid===t.vMsid}));return t.isPub?null==r?void 0:r.pubDone:null==r?void 0:r.subDone}return t.aMsid?(r=n.audioInfoList.find((function(e){return e.msid===t.aMsid})),t.isPub?null==r?void 0:r.pubDone:null==r?void 0:r.subDone):void 0},e.prototype.getAllMediaInfoList=function(e,t){var n=this.get(e);return n?i(i([],n.audioInfoList.map((function(e){var i,a,s,c,u=e.type,d=e.msid,l=e.ssrc,p=e.pt,f=e.codec,h=e.from,_=e.transceiver,v={type:u,msid:d,ssrc:l,pt:p,codec:f,from:h,trackId:n.type===o.Subscribe?null===(a=null===(i=null==_?void 0:_.receiver)||void 0===i?void 0:i.track)||void 0===a?void 0:a.id:null===(c=null===(s=null==_?void 0:_.sender)||void 0===s?void 0:s.track)||void 0===c?void 0:c.id};return t?r(r({},v),{transceiver:_}):v})),!0),n.videoInfoList.map((function(e){var i,a,s,c,u=e.type,d=e.msid,l=e.ssrc,p=e.pt,f=e.codec,h=e.from,_=e.transceiver,v={type:u,msid:d,ssrc:l,pt:p,codec:f,from:h,trackId:n.type===o.Subscribe?null===(a=null===(i=null==_?void 0:_.receiver)||void 0===i?void 0:i.track)||void 0===a?void 0:a.id:null===(c=null===(s=null==_?void 0:_.sender)||void 0===s?void 0:s.track)||void 0===c?void 0:c.id};return t?r(r({},v),{transceiver:_}):v})),!0):[]},e.prototype.getOriginUrl=function(e){var t=(0,a.pruneSubUrl)(e,!0),n=this.get(t);return n?n.originUrl:e},e.prototype.getAllTrackPairList=function(e){var t,n,r,i,a=[];for(var s in this.streamMap){var c=this.streamMap[s];if(c.type===e)for(var u=Math.max(c.audioInfoList.length,c.videoInfoList.length),d=0;d<u;d++){var l={url:s};d<c.audioInfoList.length&&(l.aTransceiver=e===o.Subscribe?null===(t=c.audioInfoList[d].transceiver)||void 0===t?void 0:t.receiver:null===(n=c.audioInfoList[d].transceiver)||void 0===n?void 0:n.sender,l.aMsid=c.audioInfoList[d].msid),d<c.videoInfoList.length&&(l.vTransceiver=e===o.Subscribe?null===(r=c.videoInfoList[d].transceiver)||void 0===r?void 0:r.receiver:null===(i=c.videoInfoList[d].transceiver)||void 0===i?void 0:i.sender,l.vMsid=c.videoInfoList[d].msid),a.push(l)}}return a},e.prototype.getSender=function(e,t,n){var r,i,o=void 0,a=this.getAllMediaInfoList(e,!0);return n?a.forEach((function(e){var r,i,a,s=null===(i=null===(r=e.transceiver)||void 0===r?void 0:r.sender)||void 0===i?void 0:i.track;(null==s?void 0:s.kind)===t&&e.msid===n&&(o=null===(a=e.transceiver)||void 0===a?void 0:a.sender)})):o=null===(i=null===(r=null==a?void 0:a.find((function(e){var n,r,i;return(null===(i=null===(r=null===(n=e.transceiver)||void 0===n?void 0:n.sender)||void 0===r?void 0:r.track)||void 0===i?void 0:i.kind)===t})))||void 0===r?void 0:r.transceiver)||void 0===i?void 0:i.sender,o},e.prototype.getReceiver=function(e,t,n){var r,i,o=void 0,a=this.getAllMediaInfoList(e,!0);return n?a.forEach((function(e){var r,i,a,s=null===(i=null===(r=e.transceiver)||void 0===r?void 0:r.receiver)||void 0===i?void 0:i.track;(null==s?void 0:s.kind)===t&&e.msid===n&&(o=null===(a=e.transceiver)||void 0===a?void 0:a.receiver)})):o=null===(i=null===(r=null==a?void 0:a.find((function(e){var n,r,i;return(null===(i=null===(r=null===(n=e.transceiver)||void 0===n?void 0:n.receiver)||void 0===r?void 0:r.track)||void 0===i?void 0:i.kind)===t})))||void 0===r?void 0:r.transceiver)||void 0===i?void 0:i.receiver,o},e.prototype.dispose=function(){this.streamMap={}},e.prototype.updateMediaInfoList=function(e,t){var n=t.findIndex((function(t){return t.msid===e.msid}));-1!==n?t.splice(n,1,e):t.push(e)},e.prototype.findMediaItemByMsid=function(e,t){return t.find((function(t){return t.msid===e}))},e.prototype.createMediaItem=function(e,t){return{msid:e,ssrc:void 0,transceiver:void 0,subDone:!1,pubDone:!1,type:t,streamId:void 0}},e}();t.StreamManager=s}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}var r={};return function(){"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.EDatachannelStatus=e.PeerConnectionCore=void 0;var t=n(776);Object.defineProperty(e,"PeerConnectionCore",{enumerable:!0,get:function(){return t.PeerConnectionCore}}),Object.defineProperty(e,"EDatachannelStatus",{enumerable:!0,get:function(){return t.EDatachannelStatus}})}(),r}()},e.exports=r()},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReceiverMonitorData=t.ReceiverMonitorType=void 0;var a,s=n(3),c=o(n(2)),u=n(17);!function(e){e.AUDIO="audio",e.VIDEO="video"}(a=t.ReceiverMonitorType||(t.ReceiverMonitorType={}));var d=function(e){function t(t){var n=e.call(this)||this;return n.streamEnded=!1,n.currentTimeGap=0,n.lastTimeStamp=0,n.transportStats={},n.remoteCandidate={},n.localCandidate={},n.inboundRtpStreamStats={},n.inboundRtpStreamStatsDiff={},n.receiver=null,n.pc=null,n.canplay=!1,n.type=t,n}return i(t,e),Object.defineProperty(t.prototype,"rtpReceiver",{set:function(e){this.receiver=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RTCPeerconnection",{set:function(e){this.pc=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isExist",{get:function(){return null!=this.receiver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this.canplay},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStreamEnded",{get:function(){return this.streamEnded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"monitorData",{get:function(){var e=this.inboundRtpStreamStatsDiff||{},t=(this.inboundRtpStreamStats,this.currentTimeGap),n=0;return void 0!==e.nackCount&&void 0!==e.packetsReceived&&(n=Math.round(e.nackCount/(e.packetsReceived+e.nackCount)*1e3)/1e3),{inboundRtpStats:this.inboundRtpStreamStats,inboundRtpStatsPerSec:{bytesReceivedPerSecond:e.bytesReceived/t||0,framesDecodedPerSecond:e.framesDecoded/t||0,packetsLostRate:n>0?n:0},transportStats:this.transportStats,remoteCandidate:this.remoteCandidate,localCandidate:this.localCandidate}},enumerable:!1,configurable:!0}),t.prototype.getInfo=function(){var e=this;if(this.receiver&&this.receiver.transport&&"closed"===this.receiver.transport.state&&this.canplay&&(this.streamEnded=!0,this.emit("streamEnded"),this.canplay=!1),this.receiver&&"getStats"in this.receiver||this.pc&&"getStats"in this.pc)return new Promise((function(t,n){var r=null,i=!1;e.receiver&&"getStats"in e.receiver?r=e.receiver.getStats():e.pc&&"getStats"in e.pc&&(r=e.pc.getStats(),i=!0),null==r||r.then((function(n){n.forEach((function(t){var n,r;if(t)switch(t.type){case u.RTCStatsType.CandidatePair:e.onCandidatePair(t);break;case u.RTCStatsType.InboundRtp:s.SystemUtil.isIos&&i?(null===(n=t.id)||void 0===n?void 0:n.toLowerCase().includes(e.type))&&e.onInBoundRtp(t):s.BrowserUtil.isFirefox?t.kind===e.type&&e.onInBoundRtp(t):e.onInBoundRtp(t);break;case u.RTCStatsType.RemoteCandidate:e.onRemoteCandidate(t);break;case u.RTCStatsType.LocalCandidate:e.onLocalCandidate(t);break;case u.RTCStatsType.Track:if(e.type!==a.VIDEO)break;s.SystemUtil.isIos&&i?((null===(r=t.id)||void 0===r?void 0:r.toLowerCase().includes(e.type))||t.trackIdentifier.toLowerCase()===e.type)&&e.onTrack(t):e.onTrack(t)}})),t("")})).catch((function(e){n(e)}))}))},t.prototype.dispose=function(){this.reset()},t.prototype.onCandidatePair=function(e){("succeeded"===e.state||e.bytesReceived)&&(this.transportStats={timestamp:Math.floor(e.timestamp),rtt:e.currentRoundTripTime||-1,bytesReceived:e.bytesReceived,bytesSent:e.bytesSent})},t.prototype.onInBoundRtp=function(e){this.currentTimeGap=(e.timestamp-this.lastTimeStamp)/1e3,this.lastTimeStamp=e.timestamp,this.inboundRtpStreamStatsDiff=this.calcDiff(e,this.inboundRtpStreamStats,["bytesReceived","framesDecoded","packetsReceived","nackCount"]),this.inboundRtpStreamStats=e,!this.canplay&&Number(e.bytesReceived)>0&&(this.canplay=!0,this.emit("canPlay"))},t.prototype.calcDiff=function(e,t,n){var r={};return n.forEach((function(n){r[n]=Number(e[n]||0)-Number(t[n]||0)})),r},t.prototype.onRemoteCandidate=function(e){this.remoteCandidate=e||{}},t.prototype.onLocalCandidate=function(e){this.localCandidate=e||{}},t.prototype.onTrack=function(e){e.frameWidth&&(this.inboundRtpStreamStats.frameWidth=e.frameWidth,this.inboundRtpStreamStats.frameHeight=e.frameHeight)},t.prototype.reset=function(){this.currentTimeGap=0,this.lastTimeStamp=0,this.transportStats={},this.remoteCandidate={},this.localCandidate={},this.inboundRtpStreamStats={},this.inboundRtpStreamStatsDiff={},this.receiver=null,this.canplay=!1,this.streamEnded=!1},t}(c.default);t.ReceiverMonitorData=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTCStatsType=void 0;var r=function(){function e(){}return e.CandidatePair="candidate-pair",e.Certificate="certificate",e.Codec="codec",e.Csrc="csrc",e.DataCahnnel="data-channel",e.InboundRtp="inbound-rtp",e.LocalCandidate="local-candidate",e.OutboundRtp="outbound-rtp",e.PeerConnection="peer-connection",e.Receiver="receiver",e.RemoteCandidate="remote-candidate",e.RemoteInboundRtp="remote-inbound-rtp",e.RemoteOutboundRtp="remote-outbound-rtp",e.Sender="sender",e.Stream="stream",e.Track="track",e.Transport="transport",e.MediaSource="media-source",e}();t.RTCStatsType=r},function(e,t,n){e.exports=n(45)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(0);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(0),i=n(51),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(s=n(23)),s),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(o)})),e.exports=c}).call(this,n(50))},function(e,t,n){"use strict";var r=n(0),i=n(52),o=n(54),a=n(20),s=n(55),c=n(58),u=n(59),d=n(24);e.exports=function(e){return new Promise((function(t,n){var l=e.data,p=e.headers;r.isFormData(l)&&delete p["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",_=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.Authorization="Basic "+btoa(h+":"+_)}var v=s(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),a(v,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?c(f.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f};i(t,n,o),f=null}},f.onabort=function(){f&&(n(d("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){n(d("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(d(t,e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var m=(e.withCredentials||u(v))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;m&&(p[e.xsrfHeaderName]=m)}if("setRequestHeader"in f&&r.forEach(p,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete p[t]:f.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),n(e),f=null)})),l||(l=null),f.send(l)}))}},function(e,t,n){"use strict";var r=n(53);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(o,u),r.forEach(a,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(void 0,t[i])})),r.forEach(s,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var d=i.concat(o).concat(a).concat(s),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===d.indexOf(e)}));return r.forEach(l,u),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayEvent=t.PlayType=void 0,t.PlayType={PLAY_CANPLAY:"canplay",PLAY_WAITING:"waiting",PLAY_PLAYING:"playing",PLAY_MEDIA:"media",PLAY_ENDED:"ended",PLAY_TIMEOUT:"timeout"},t.PlayEvent=function(e){this.event=e}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteStream=void 0;var o=n(12),a=n(3),s=function(e){function t(){var t=e.call(this)||this;return t.recvCanPlay=!1,t.autoplay=!0,t.onCanPlay=t.onCanPlay.bind(t),t}return i(t,e),Object.defineProperty(t.prototype,"muted",{get:function(){return!!this.element&&this.element.muted},set:function(e){this.element&&(this.element.muted=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e;return null===(e=this.mediastream)||void 0===e?void 0:e.getAudioTracks()[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoTrack",{get:function(){var e;return null===(e=this.mediastream)||void 0===e?void 0:e.getVideoTracks()[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVideo",{get:function(){return!!this.videoTrack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasAudio",{get:function(){return!!this.audioTrack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mediaStream",{get:function(){return this.mediastream},enumerable:!1,configurable:!0}),t.prototype.updateMediaStream=function(e){var t=this.mediastream||new MediaStream;e.getTracks().forEach((function(e){return t.addTrack(e)})),this.mediastream=t,this.element&&this.play(this.element)},t.prototype.getMediaStream=function(){return this.mediastream},t.prototype.mergeStream=function(e){if(this.mediaStream){var t=e.getVideoTracks()[0],n=e.getAudioTracks()[0];t&&(this.videoTrack&&this.mediaStream.removeTrack(this.videoTrack),this.mediaStream.addTrack(t),this.videotrack=t),n&&(this.audioTrack&&this.mediaStream.removeTrack(this.audioTrack),this.mediaStream.addTrack(n),this.audiotrack=n)}},t.prototype.play=function(e,t){this.autoplay=Boolean(!t||t.autoplay),e?(this.recvCanPlay=!1,this.emit("mediaElementBinded"),this.element=e,this.element.addEventListener("canplay",this.onCanPlay),"VIDEO"===this.element.nodeName&&(this.element.setAttribute("playsinline",""),a.BrowserUtil.isMicroMessenger&&(this.element.setAttribute("x5-video-player-type","h5-page"),this.element.setAttribute("x5-playsinline",""),a.SystemUtil.isAndroid||a.SystemUtil.isIos&&this.element.setAttribute("x-webkit-airplay","allow"))),this.autoplay&&a.BrowserUtil.isSafari&&this.element.setAttribute("autoplay",""),this.mediastream&&this.bindMediaStream(this.mediastream)):this.release()},t.prototype.disableVideo=function(){var e=this.getMediaStream();e&&e.getVideoTracks().forEach((function(e){e.enabled&&(e.enabled=!1)}))},t.prototype.enableVideo=function(){var e=this.getMediaStream();e&&e.getVideoTracks().forEach((function(e){e.enabled||(e.enabled=!0)}))},t.prototype.disableAudio=function(){var e=this.getMediaStream();e&&e.getAudioTracks().forEach((function(e){e.enabled&&(e.enabled=!1)}))},t.prototype.enableAudio=function(){var e=this.getMediaStream();e&&e.getAudioTracks().forEach((function(e){e.enabled||(e.enabled=!0)}))},t.prototype.stop=function(){e.prototype.stop.call(this),this.release()},t.prototype.onCanPlay=function(){var e=this;if(!this.recvCanPlay&&(this.emit("onCanPlay"),this.recvCanPlay=!0,this.autoplay))if(this.element)if(a.BrowserUtil.isMicroMessenger){var t=window.top!==window.self,n=window.WeixinJSBridge||window.top.WeixinJSBridge;n?n.invoke("getNetworkType",{},(function(){e.tryToPlay()})):(t?window.top.document:document).addEventListener("WeixinJSBridgeReady",(function(){n.invoke("getNetworkType",{},(function(){e.tryToPlay()}))}))}else this.tryToPlay();else this.tryToPlay()},t.prototype.release=function(){this.element&&(this.element.pause(),this.element.srcObject=null,this.element.load(),this.element.removeEventListener("canplay",this.onCanPlay)),this.recvCanPlay=!1,this.mediastream=void 0},t.prototype.bindMediaStream=function(e){this.element&&("AUDIO"===this.element.nodeName&&e.getVideoTracks()[0]&&e.removeTrack(e.getVideoTracks()[0]),this.element.srcObject=e),this.mediastream=e},t.prototype.tryToPlay=function(){var e=this;if(this.element){var t=this.element.play();void 0!==t&&t.then((function(){})).catch((function(t){console.log("playPromise err",t),e.element&&e.element.srcObject&&e.emit("onAutoPlayError")}))}},t}(o.Stream);t.RemoteStream=s},function(e,t,n){"use strict";var r=n(4);function i(e,t,n,i,o){var a=r.writeRtpDescription(e.kind,t);if(a+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(i?i.id:"-")+" "+s+"\r\n";a+="a="+c,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),a}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),a=r(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!i(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function a(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var d=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(d.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},d.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},d.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},d.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},d.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},d.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},d.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},d.prototype._gather=function(t,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),s.component=1,s.ufrag=o.getLocalParameters().usernameFragment;var u=r.writeCandidate(s);a.candidate=Object.assign(a.candidate,r.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var d=r.getMediaSections(i._localDescription.sdp);d[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+d.join("");var l=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",a),l&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,n,i){var a=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),i&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},d.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var s=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var a=i.transceivers[t],c=a.iceGatherer,u=a.iceTransport,d=a.dtlsTransport,l=a.localCapabilities,p=a.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||a.rejected)){var f=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);s&&(h.role="server"),i.usingBundle&&0!==t||(i._gather(a.mid,t),"new"===u.state&&u.start(c,f,s?"controlling":"controlled"),"new"===d.state&&d.start(h));var _=o(l,p);i._transceive(a,_.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},d.prototype.setRemoteDescription=function(i){var d=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!a("setRemoteDescription",i.type,d.signalingState)||d._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+d.signalingState));var l={};d.remoteStreams.forEach((function(e){l[e.id]=e}));var p=[],f=r.splitSections(i.sdp),h=f.shift(),_=r.matchPrefix(h,"a=ice-lite").length>0,v=r.matchPrefix(h,"a=group:BUNDLE ").length>0;d.usingBundle=v;var m=r.matchPrefix(h,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!m&&m.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(a,c){var u=r.splitLines(a),f=r.getKind(a),m=r.isRejected(a)&&0===r.matchPrefix(a,"a=bundle-only").length,g=u[0].substr(2).split(" ")[2],E=r.getDirection(a,h),y=r.parseMsid(a),b=r.getMid(a)||r.generateIdentifier();if(m||"application"===f&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))d.transceivers[c]={mid:b,kind:f,protocol:g,rejected:!0};else{var S,T,w,R,C,O,A,I,k;!m&&d.transceivers[c]&&d.transceivers[c].rejected&&(d.transceivers[c]=d._createTransceiver(f,!0));var N,P,D=r.parseRtpParameters(a);m||(N=r.getIceParameters(a,h),(P=r.getDtlsParameters(a,h)).role="client"),A=r.parseRtpEncodingParameters(a);var x=r.parseRtcpParameters(a),L=r.matchPrefix(a,"a=end-of-candidates",h).length>0,M=r.matchPrefix(a,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!m&&v&&c>0&&d.transceivers[c]&&(d._disposeIceAndDtlsTransports(c),d.transceivers[c].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[c].iceTransport=d.transceivers[0].iceTransport,d.transceivers[c].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[c].rtpSender&&d.transceivers[c].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[c].rtpReceiver&&d.transceivers[c].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==i.type||m)"answer"!==i.type||m||(T=(S=d.transceivers[c]).iceGatherer,w=S.iceTransport,R=S.dtlsTransport,C=S.rtpReceiver,O=S.sendEncodingParameters,I=S.localCapabilities,d.transceivers[c].recvEncodingParameters=A,d.transceivers[c].remoteCapabilities=D,d.transceivers[c].rtcpParameters=x,M.length&&"new"===w.state&&(!_&&!L||v&&0!==c?M.forEach((function(e){s(S.iceTransport,e)})):w.setRemoteCandidates(M)),v&&0!==c||("new"===w.state&&w.start(T,N,"controlling"),"new"===R.state&&R.start(P)),!o(S.localCapabilities,S.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,d._transceive(S,"sendrecv"===E||"recvonly"===E,"sendrecv"===E||"sendonly"===E),!C||"sendrecv"!==E&&"sendonly"!==E?delete S.rtpReceiver:(k=C.track,y?(l[y.stream]||(l[y.stream]=new e.MediaStream),n(k,l[y.stream]),p.push([k,C,l[y.stream]])):(l.default||(l.default=new e.MediaStream),n(k,l.default),p.push([k,C,l.default]))));else{(S=d.transceivers[c]||d._createTransceiver(f)).mid=b,S.iceGatherer||(S.iceGatherer=d._createIceGatherer(c,v)),M.length&&"new"===S.iceTransport.state&&(!L||v&&0!==c?M.forEach((function(e){s(S.iceTransport,e)})):S.iceTransport.setRemoteCandidates(M)),I=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(I.codecs=I.codecs.filter((function(e){return"rtx"!==e.name}))),O=S.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var U,j=!1;"sendrecv"===E||"sendonly"===E?(j=!S.rtpReceiver,C=S.rtpReceiver||new e.RTCRtpReceiver(S.dtlsTransport,f),j&&(k=C.track,y&&"-"===y.stream||(y?(l[y.stream]||(l[y.stream]=new e.MediaStream,Object.defineProperty(l[y.stream],"id",{get:function(){return y.stream}})),Object.defineProperty(k,"id",{get:function(){return y.track}}),U=l[y.stream]):(l.default||(l.default=new e.MediaStream),U=l.default)),U&&(n(k,U),S.associatedRemoteMediaStreams.push(U)),p.push([k,C,U]))):S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===S.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),S.associatedRemoteMediaStreams=[]),S.localCapabilities=I,S.remoteCapabilities=D,S.rtpReceiver=C,S.rtcpParameters=x,S.sendEncodingParameters=O,S.recvEncodingParameters=A,d._transceive(d.transceivers[c],!1,j)}}})),void 0===d._dtlsRole&&(d._dtlsRole="offer"===i.type?"active":"passive"),d._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?d._updateSignalingState("have-remote-offer"):d._updateSignalingState("stable"),Object.keys(l).forEach((function(t){var n=l[t];if(n.getTracks().length){if(-1===d.remoteStreams.indexOf(n)){d.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){d._dispatchEvent("addstream",r)}))}p.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(d,t,r,[n])}))}})),p.forEach((function(e){e[2]||u(d,e[0],e[1],[])})),e.setTimeout((function(){d&&d.transceivers&&d.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},d.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},d.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},d.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},d.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter((function(e){return"audio"===e.kind})).length,a=n.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(o=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));o>0||a>0;)o>0&&(n._createTransceiver("audio"),o--),a>0&&(n._createTransceiver("video"),a--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(i,o){var a=i.track,s=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(s);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var d=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];a&&t>=15019&&"video"===s&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,s)),i.localCapabilities=u,i.sendEncodingParameters=d})),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var d=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(d)},d.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var a=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(a+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=i(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},d.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,o){if(!n._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){a=u;break}var d=n.transceivers[a];if(!d)return o(c("OperationError","Can not add ICE candidate"));if(d.rejected)return i();var l=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return i();if(l.component&&1!==l.component)return i();if((0===a||a>0&&d.iceTransport!==n.transceivers[0].iceTransport)&&!s(d.iceTransport,l))return o(c("OperationError","Can not add ICE candidate"));var p=e.candidate.trim();0===p.indexOf("a=")&&(p=p.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[a]+="a="+(l.type?p:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var f=0;f<n.transceivers.length&&(n.transceivers[f].rejected||(n.transceivers[f].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));f++);i()}))},d.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var l=["createOffer","createAnswer"];return l.forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(l=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),d}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.EDatachannelStatus=t.EConnectStatus=t.AliRTS=void 0,n(67);var o=n(31);Object.defineProperty(t,"AliRTS",{enumerable:!0,get:function(){return o.AliRTS}}),window&&(window.AliRTS=o.AliRTS);var a=n(6);Object.defineProperty(t,"EConnectStatus",{enumerable:!0,get:function(){return a.EConnectStatus}});var s=n(15);Object.defineProperty(t,"EDatachannelStatus",{enumerable:!0,get:function(){return s.EDatachannelStatus}}),i(n(66),t)},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AliRTS=void 0;var o=n(32),a=n(1),s=n(9),c=n(36),u=n(3),d=i(n(11)),l=n(13),p=n(10),f=function(){function e(){}return e.createClient=function(t){var n=t||{};return n.customReporter||(n.customReporter=e.customReporter),void 0===n.trackLog&&(n.trackLog=e.trackLog),new c.RtsClient(n)},e.getMicList=function(){var e=this;return new Promise((function(t,n){e.deviceManager.getMicList().then((function(e){t(e)})).catch((function(e){n(e)}))}))},e.getCameraList=function(){var e=this;return new Promise((function(t,n){e.deviceManager.getCameraList().then((function(e){t(e)})).catch((function(e){n(e)}))}))},e.getSpeakerList=function(){var e=this;return new Promise((function(t,n){e.deviceManager.getSpeakerList().then((function(e){t(e)})).catch((function(e){n(e)}))}))},e.createStream=function(t){return new Promise((function(n,i){var s=new o.LocalStream,c=new d.default({customReporter:e.customReporter,trackLog:e.trackLog});s.init(t).then((function(){n(s),c.reportStreamCreated(t,{videoTrack:!!s.videoTrack,audioTrack:!!s.audioTrack,screenAudio:!!s.screenAudioTrack,surface:s.screenSurfaceType})})).catch((function(e){var n=r(r({},e),{relatedLink:e.extraInfo});delete n.extraInfo,i(n),c.reportErrorInfo(a.ErrorCode.ERROR_INIT_LOCAL_FAIL,e.message,e.traceId,{config:t,originErr:e})}))}))},e.deviceManager=new s.BrowserDeviceManager,e.BrowserUtil=u.BrowserUtil,e.SystenUtil=u.SystemUtil,e.SupportUtil=p.SupportUtil,e.VideoProfileMap=l.VideoProfileMap,e.ScreenProfileMap=l.ScreenProfileMap,e.ErrorCode=a.ErrorCode,e.customReporter=function(){},e.trackLog=!0,e}();t.AliRTS=f},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStream=void 0;var d=n(12),l=n(9),p=n(5),f=n(1),h=n(13),_=n(3),v=u(n(33)),m=n(34),g=n(7),E=function(e){function t(){var t=e.call(this)||this;return t.audioMixer=new v.default({useGainNode:!1,trackList:[]}),t.screenSurfaceType="",t.VideoProfileMap=new Map(h.VideoProfileMap),t.ScreenProfileMap=new Map(h.ScreenProfileMap),t.deviceManager=new l.BrowserDeviceManager,t.mediastream=new MediaStream,t.hasVideo=!1,t.hasScreen=!1,t.videoProfile="360p_1",t.screenProfile="720p_1",t.isCustomStream=!1,t.handleVideoTrackEnded=t.handleVideoTrackEnded.bind(t),t.handleAudioTrackEnded=t.handleAudioTrackEnded.bind(t),t}return i(t,e),Object.defineProperty(t.prototype,"mediaStream",{get:function(){return this.mediastream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){return this.audiotrack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoTrack",{get:function(){return this.videotrack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasAudio",{get:function(){return!!this.audioTrack},enumerable:!1,configurable:!0}),t.prototype.getVideoProfile=function(){if(this.hasVideo)return this.videoProfile},t.prototype.getScreenProfile=function(){if(this.hasScreen)return this.screenProfile},t.prototype.init=function(e){return e.custom?this.createCustomStream(e.mediaStream):this.initWithRetry(e)},t.prototype.initWithRetry=function(e,t,n){var r=this;return new Promise((function(i,a){i=t||i,a=n||a;var s=[];s.push(r.initMicAudio(e)),e.video?s.push(r.initCameraVideo(e)):e.screen&&s.push(r.initScreenVideoAudio(e)),Promise.all(s).then((function(){r.tryMixMicAndScreenAudio(e),r.initTracks(e),e.skipProfile?i():r.tryToSetProfile(e).then((function(){i()})).catch((function(t){console.log(t),r.resetLocalStream(),r.initWithRetry(o(o({},e),{skipProfile:!0}),i,a)}))})).catch((function(e){r.stopAllTracks(),a(e)}))}))},t.prototype.initMicAudio=function(e){var t=this;return new Promise((function(n,r){if(!e||!e.audio)return n();var i={deviceId:!0===e.audio?"":String(e.audio.deviceId)};t.deviceManager.getAudioTrack(i).then((function(e){t.micAudioTrack=e,t.audiotrack=e,n()})).catch((function(e){r(new p.RtsError(e.code,e.reason,"",e.relatedLink))}))}))},t.prototype.initCameraVideo=function(e){var t=this;return new Promise((function(n,r){if(!e||!e.video)return n();var i={};!0===e.video?i.deviceId="":i=e.video,t.deviceManager.getVideoTrack(i).then((function(e){t.videotrack=e,t.hasVideo=!0,n()})).catch((function(e){r(new p.RtsError(e.code,e.reason,"",e.relatedLink))}))}))},t.prototype.initScreenVideoAudio=function(e){var t=this;return new Promise((function(n,r){if(e.screen){var i=!0,a=!1,s={};if("boolean"!=typeof e.screen){var u=e.screen,d=u.video,l=u.audio;s=c(u,["video","audio"]),i="object"!=typeof d||d,"boolean"!=typeof l&&"object"!=typeof l||(a=l)}_.SystemUtil.isMacOS&&_.BrowserUtil.isSafari&&["16.1","16.2","16.3"].indexOf(_.BrowserUtil.browserVersion)>-1&&"object"==typeof i&&("number"==typeof i.width&&(i.width={max:i.width}),"number"==typeof i.height&&(i.height={max:i.height})),t.deviceManager.getScreenStream(o({video:i,audio:a},s)).then((function(e){t.videotrack=e.getVideoTracks()[0],t.videotrack&&t.videotrack.getSettings&&(t.screenSurfaceType=t.videotrack.getSettings().displaySurface),t.hasScreen=!0;var r=e.getAudioTracks()[0];r&&(t.screenAudioTrack=r),n()})).catch((function(e){r(new p.RtsError(e.code,e.reason,"",e.relatedLink))}))}}))},t.prototype.tryMixMicAndScreenAudio=function(e){e.audio&&this.micAudioTrack&&this.hasScreenAudioConfig(e)&&this.screenAudioTrack?(this.audioMixer.updateTrackList([this.screenAudioTrack,this.micAudioTrack]),this.audiotrack=this.audioMixer.getMixedAudioTrack()):e.audio&&this.micAudioTrack?this.audiotrack=this.micAudioTrack:this.hasScreenAudioConfig(e)&&this.screenAudioTrack&&(this.audiotrack=this.screenAudioTrack)},t.prototype.initTracks=function(e){this.hasAudioTrackReady(e)&&this.audiotrack&&this.mediastream.addTrack(this.audiotrack),this.hasVideoTrackReady(e)&&this.videotrack&&this.mediastream.addTrack(this.videotrack),this.addTrackListener()},t.prototype.tryToSetProfile=function(e){var t=this;return new Promise((function(n,r){return a(t,void 0,void 0,(function(){var t;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e.video?[4,this.setVideoProfile(this.videoProfile)]:[3,2];case 1:return i.sent(),[3,3];case 2:e.screen&&this.setScreenProfile(this.screenProfile).catch((function(e){console.log(e)})),i.label=3;case 3:return n(),[3,5];case 4:return t=i.sent(),r(new p.RtsError(f.ErrorCode.ERROR_DEIVCE_CONSTRAINEDERROR,"apply constraint failed","",{originErr:t,config:e})),[3,5];case 5:return[2]}}))}))}))},t.prototype.stopAllTracks=function(){this.screenAudioTrack&&(this.screenAudioTrack.stop(),this.screenAudioTrack=void 0),this.micAudioTrack&&(this.micAudioTrack.stop(),this.micAudioTrack=void 0),this.audioTrack&&(this.audioTrack.stop(),this.audiotrack=void 0),this.videoTrack&&(this.videoTrack.stop(),this.videotrack=void 0)},t.prototype.resetLocalStream=function(){this.deviceManager=new l.BrowserDeviceManager,this.mediastream=new MediaStream,this.hasVideo=!1,this.hasScreen=!1,this.videoProfile="360p_1",this.screenProfile="720p_1",this.isCustomStream=!1,this.stopAllTracks(),this.audioMixer=new v.default({useGainNode:!1,trackList:[]}),this.screenSurfaceType=""},t.prototype.setEncodeParam=function(e){var t=this;this.pc=e,this.pc.getSenders().forEach((function(e){var n,r,i=e.track;if("video"===(null==i?void 0:i.kind)&&(null==i?void 0:i.id)===(null===(n=t.videoTrack)||void 0===n?void 0:n.id)&&e.setParameters&&e.getParameters&&(t.hasVideo?r=t.VideoProfileMap.get(t.videoProfile):t.hasScreen&&(r=t.ScreenProfileMap.get(t.screenProfile)),r)){var o=e.getParameters();o.degradationPreference="maintain-resolution",o.encodings.forEach((function(e){(null==r?void 0:r.maxBitrate)&&(e.maxBitrate=1024*r.maxBitrate),(null==r?void 0:r.frameRate)&&(e.maxFramerate=r.frameRate)})),e.setParameters(o)}}))},t.prototype.play=function(e,t){var n,r=this;if(null===(n=this.reporter)||void 0===n||n.reportPlay(e?e.nodeName:String(e)),e&&(this.element=e,this.mediastream)){if(this.element.srcObject=this.mediastream,_.SystemUtil.isIos&&0===_.SystemUtil.systemVersion.indexOf("15.1")&&(_.BrowserUtil.isSafari||_.BrowserUtil.isChrome||_.BrowserUtil.isMicroMessenger)&&this.hasVideo){if(this.canvasRenderer)return;this.canvasRenderer=new m.CanvasRenderer({video:this.element});var i=this;this.element.addEventListener("loadeddata",(function e(){if(i.element&&(i.element.removeEventListener("loadeddata",e),i.canvasRenderer)){i.canvasRenderer.start();var t=i.canvasRenderer.mediaStream;t&&(i.mediastream=t,i.videotrack=t.getVideoTracks()[0])}})),this.element.addEventListener("resize",(function(){var e;if(r){var t=r.element;t&&(null===(e=r.canvasRenderer)||void 0===e||e.resize(t.videoWidth,t.videoHeight))}}))}if(t&&!1===t.autoplay)return;this.element.play()}},t.prototype.setVideoProfile=function(e){var t=this;return new Promise((function(n,r){return a(t,void 0,void 0,(function(){var t,i,o;return s(this,(function(a){switch(a.label){case 0:if(null===(o=this.reporter)||void 0===o||o.reportVideoProfile(e),!(t=this.VideoProfileMap.get(e)))return[3,5];if(this.isCustomStream||!this.hasVideo||!this.videotrack||!this.videotrack.applyConstraints)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.videotrack.applyConstraints(t)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),[2,r(i)];case 4:return this.videoProfile=e,this.pc&&this.setEncodeParam(this.pc),n(this.videoProfile),[3,6];case 5:r("Profile not found"),a.label=6;case 6:return[2]}}))}))}))},t.prototype.setScreenProfile=function(e){var t=this;return new Promise((function(n,r){return a(t,void 0,void 0,(function(){var t,i,o;return s(this,(function(a){switch(a.label){case 0:if(null===(o=this.reporter)||void 0===o||o.reportScreenProfile(e),!(t=this.ScreenProfileMap.get(e)))return[3,5];if(!(this.hasScreen&&this.videotrack&&this.videotrack.applyConstraints))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.videotrack.applyConstraints(t)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),[2,r(i)];case 4:return this.screenProfile=e,this.pc&&this.setEncodeParam(this.pc),n(this.screenProfile),[3,6];case 5:r("Profile not found"),a.label=6;case 6:return[2]}}))}))}))},t.prototype.enableAudio=function(){var e;return null===(e=this.reporter)||void 0===e||e.reportEnableAudio(),!!this.audiotrack&&(this.audiotrack.enabled=!0,!0)},t.prototype.disableAudio=function(){var e;return null===(e=this.reporter)||void 0===e||e.reportDisableAudio(),!!this.audiotrack&&(this.audiotrack.enabled=!1,!0)},t.prototype.enableVideo=function(){var e;return null===(e=this.reporter)||void 0===e||e.reportEnableVideo(),!!this.videotrack&&(this.videotrack.enabled=!0,!0)},t.prototype.disableVideo=function(){var e;return null===(e=this.reporter)||void 0===e||e.reportDisableVideo(),!!this.videotrack&&(this.videotrack.enabled=!1,!0)},t.prototype.stop=function(){var t;e.prototype.stop.call(this),this.hasVideo=!1,this.hasScreen=!1,this.isCustomStream=!1,this.canvasRenderer&&(this.canvasRenderer.stop(),this.canvasRenderer=void 0),this.audiotrack&&(this.audiotrack.stop(),this.audiotrack=void 0),this.videotrack&&(this.videotrack.stop(),this.videotrack=void 0),this.micAudioTrack&&(this.micAudioTrack.stop(),this.micAudioTrack=void 0),this.screenAudioTrack&&(this.screenAudioTrack.stop(),this.screenAudioTrack=void 0),null===(t=this.reporter)||void 0===t||t.reportStop(0)},t.prototype.mergeStream=function(e){var t=e.videoTrack,n=e.audioTrack;t&&(this.videoTrack&&(this.videoTrack.removeEventListener("ended",this.handleVideoTrackEnded),this.mediaStream.removeTrack(this.videoTrack)),this.mediaStream.addTrack(t),this.videotrack=t,this.listenVideoEnded(),this.hasVideo=e.hasVideo,this.hasScreen=e.hasScreen,this.isCustomStream=e.isCustomStream,this.hasVideo&&(this.videoProfile=e.videoProfile),this.hasScreen&&(this.screenProfile=e.screenProfile)),n&&(this.audioTrack&&(this.audioTrack.removeEventListener("ended",this.handleAudioTrackEnded),this.mediaStream.removeTrack(this.audioTrack)),this.mediaStream.addTrack(n),this.audiotrack=n,this.listenAudioEnded())},t.prototype.deleteTracks=function(e){e.audio&&this.audioTrack&&(this.mediaStream.removeTrack(this.audioTrack),this.audiotrack=void 0),e.video&&this.videoTrack&&(this.mediaStream.removeTrack(this.videoTrack),this.videotrack=void 0,this.hasScreen=!1,this.hasVideo=!1)},t.prototype.createCustomStream=function(e){var t=this;return new Promise((function(n,r){if(!e)return r(new p.RtsError(f.ErrorCode.ERROR_CUSTOMSTREAM_NONE,"MediaStream is required.",""));if(!(e instanceof MediaStream))return r(new p.RtsError(f.ErrorCode.ERROR_CUSTOMSTREAM_INVALID,"MediaStream is invalid.",""));if(0===e.getTracks().length)return r(new p.RtsError(f.ErrorCode.ERROR_CUSTOMSTREAM_TRACK_NONE,"MediaStream has no track.",""));var i=(0,g.getVideoTrack)(e),o=(0,g.getAudioTrack)(e);i&&(t.hasVideo=!0,t.videotrack=i,t.mediastream.addTrack(i)),o&&(t.audiotrack=o,t.mediastream.addTrack(o)),t.isCustomStream=!0,t.setVideoProfile(t.videoProfile),t.addTrackListener(),n()}))},t.prototype.releaseMediaStream=function(){var e=this;this.mediastream.getTracks().forEach((function(t){t.stop(),e.mediastream.removeTrack(t)}))},t.prototype.hasVideoTrackReady=function(e){return!(!e.video&&!e.screen||!this.videotrack)||!e.video&&!e.screen},t.prototype.hasScreenAudioConfig=function(e){return"object"==typeof e.screen&&e.screen.audio},t.prototype.hasAudioTrackReady=function(e){return!(e.audio&&(!this.hasMicAudioAndReady(e)&&!this.hasScreenAudioAndReady(e)||!this.audiotrack))},t.prototype.hasMicAudioAndReady=function(e){return e.audio&&this.micAudioTrack},t.prototype.hasScreenAudioAndReady=function(e){return this.hasScreenAudioConfig(e)&&this.screenAudioTrack},t.prototype.addTrackListener=function(){this.listenVideoEnded(),this.listenAudioEnded()},t.prototype.listenVideoEnded=function(){var e=this;this.videotrack&&this.videotrack.addEventListener("ended",this.handleVideoTrackEnded),this.micAudioTrack&&this.micAudioTrack.addEventListener("ended",(function(){e.emit("micAudioTrackEnded"),e.screenAudioTrack&&"ended"===e.screenAudioTrack.readyState&&(e.audioMixer.destroy(),e.emit("audioTrackEnded"))})),this.screenAudioTrack&&this.screenAudioTrack.addEventListener("ended",(function(){e.emit("screenAudioTrackEnded"),e.micAudioTrack&&"ended"===e.micAudioTrack.readyState&&(e.audioMixer.destroy(),e.emit("audioTrackEnded"))}))},t.prototype.listenAudioEnded=function(){this.audiotrack&&this.audiotrack.addEventListener("ended",this.handleAudioTrackEnded)},t.prototype.handleVideoTrackEnded=function(){this.hasScreen=!1,this.hasVideo=!1,this.emit("videoTrackEnded")},t.prototype.handleAudioTrackEnded=function(){this.emit("audioTrackEnded")},t}(d.Stream);t.LocalStream=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.useGainNode=!0,this.audioContext=new AudioContext,this.audioDestination=this.audioContext.createMediaStreamDestination(),this.audioSource=[],this.gainNode=null,this.audioTrack=null,this.audioTrackArr=e.trackList||[],this.useGainNode="boolean"!=typeof e.useGainNode||e.useGainNode,this.useGainNode&&(this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination),this.gainNode.gain.value=0),this.getMixedAudioTrack()}return e.prototype.destroy=function(){var e;null===(e=this.getMixedAudioTrack())||void 0===e||e.stop(),this.disconnectSourceNode(),this.audioContext.close(),this.audioTrackArr=[]},e.prototype.updateTrackList=function(e){e.length&&(this.disconnectSourceNode(),this.audioTrackArr=e,this.connectNode())},e.prototype.getMixedAudioTrack=function(){return this.audioTrack||(this.connectNode(),this.audioTrack=this.audioDestination.stream.getAudioTracks()[0]),this.audioTrack},e.prototype.connectNode=function(){var e=this;this.audioTrackArr.forEach((function(t){var n=new MediaStream;n.addTrack(t);var r=e.audioContext.createMediaStreamSource(n);e.gainNode&&r.connect(e.gainNode),e.audioSource.push(r)})),this.audioSource.forEach((function(t){t.connect(e.audioDestination)}))},e.prototype.disconnectSourceNode=function(){var e=this;this.audioSource.forEach((function(t){e.gainNode&&t.disconnect(e.gainNode),t.disconnect(e.audioDestination)})),this.audioSource=[]},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasRenderer=void 0;var r=n(35),i=function(){function e(e){this.video=e.video,this.canvas=this.initCanvas(),this.activeRenderer=this.initRenderer()}return Object.defineProperty(e.prototype,"mediaStream",{get:function(){var e;return this.ms||(this.ms=(null===(e=this.canvas)||void 0===e?void 0:e.captureStream())||void 0),this.ms},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.render()},e.prototype.stop=function(){this.activeRenderer.stop()},e.prototype.initCanvas=function(){var e=document.createElement("canvas"),t=this.video;return e.width=1*t.videoWidth,e.height=1*t.videoHeight,e},e.prototype.initRenderer=function(){return new r.TwoDRenderer({video:this.video,canvas:this.canvas})},e.prototype.render=function(){this.activeRenderer.render()},e.prototype.resize=function(e,t){this.canvas&&(this.canvas.width=e,this.canvas.height=t)},e}();t.CanvasRenderer=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoDRenderer=void 0;var r=function(){function e(e){this.video=e.video,this.canvas=e.canvas,this.ctx=this.canvas.getContext("2d")}return e.prototype.render=function(){var e,t,n=this.video,r=this.canvas;n&&r&&(null===(e=this.ctx)||void 0===e||e.clearRect(0,0,r.width,r.height),null===(t=this.ctx)||void 0===t||t.drawImage(n,0,0,1*n.videoWidth,1*n.videoHeight),this.requestId=requestAnimationFrame(this.render.bind(this)))},e.prototype.stop=function(){this.requestId&&cancelAnimationFrame(this.requestId)},e}();t.TwoDRenderer=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RtsClient=void 0;var d=u(n(2)),l=n(6),p=n(37),f=n(64),h=n(65),_=u(n(11)),v=u(n(8)),m=n(10),g=n(1),E=function(e){function t(t){var n=e.call(this)||this;return n.pullH264Checked=!1,n.reporter=new _.default(t),n.subscriber=new p.Subscriber(n.reporter,t?t.playConfig:void 0),n.publisher=new f.Publisher(n.reporter),n.commonController=new h.CommonController(n.reporter),n.subscriber.on("onError",(function(e){var t,r;n.reporter.reportErrorInfo(e.errorCode,e.message,e.traceId,{sdp:null===(t=e.extraInfo)||void 0===t?void 0:t.sdp}),g.SUB_RECONNECT_ERROR_LIST.includes(e.errorCode)?n.subscriber.isConnecting||(n.subscriber.retrySubscribe(e)?(n.reporter.reportReconnect(e.errorCode,e.message,e.traceId,null===(r=e.extraInfo)||void 0===r?void 0:r.retryTimes),n.emit("reconnect",n.makeReconnectEvent("sub",e))):n.emit("onError",e)):n.emit("onError",e)})),n.subscriber.on("reconnect",(function(e){var t;n.reporter.reportReconnect(e.errorCode,e.message,e.traceId,null===(t=e.extraInfo)||void 0===t?void 0:t.retryTimes),n.emit("reconnect",n.makeReconnectEvent("sub",e))})),n.subscriber.on("onPlayEvent",(function(e){n.emit("onPlayEvent",e)})),n.subscriber.on("connectStatusChange",(function(e){n.emit("connectStatusChange",e),n.reporter.reportConnectionChange(l.EConnectStatus[e.status],"sub")})),n.publisher.on("connectStatusChange",(function(e){n.emit("connectStatusChange",e),n.reporter.reportConnectionChange(l.EConnectStatus[e.status],"pub")})),n.publisher.on("onError",(function(e){var t,r;n.reporter.reportErrorInfo(e.errorCode,e.message,e.traceId,{sdp:null===(t=e.extraInfo)||void 0===t?void 0:t.sdp}),g.PUB_RECONNECT_ERROR_LIST.includes(e.errorCode)?n.publisher.isConnecting||(n.publisher.retryPublish(e)?(n.reporter.reportReconnect(e.errorCode,e.message,e.traceId,null===(r=e.extraInfo)||void 0===r?void 0:r.retryTimes),n.emit("reconnect",n.makeReconnectEvent("pub",e))):n.emit("onError",e)):n.emit("onError",e)})),n.publisher.on("reconnect",(function(e){var t;n.reporter.reportReconnect(e.errorCode,e.message,e.traceId,null===(t=e.extraInfo)||void 0===t?void 0:t.retryTimes),n.emit("reconnect",n.makeReconnectEvent("pub",e))})),n.commonController.on("datachannelStatusChange",(function(e){n.emit("datachannelStatusChange",e)})),n.commonController.on("onPlayEvent",(function(e){n.emit("onPlayEvent",e)})),n.reporter.reportCreateClient(),n}return i(t,e),t.prototype.getVersion=function(){return v.default.version},t.prototype.isSupport=function(e){var t=new m.SupportUtil;return this.pullH264Checked=!0,t.isSupport(e)},t.prototype.checkPublishSupport=function(){return(new m.SupportUtil).checkPublishSupport()},t.prototype.subscribe=function(e,t){return this.reporter.updateUrl(e),this.commonController.setPeerconnection(this.subscriber.getPeerConnection()),this.subscriber.resetResubscribeStatus(),this.subscriber.subscribeWithReconnect(e,o(o({},t),{isH264Checked:this.pullH264Checked}))},t.prototype.subscribeAdd=function(e){return this.commonController.subscribeAdd(e)},t.prototype.subscribeActive=function(e){return this.commonController.subscribeActive(e)},t.prototype.subscribeDeleteTracks=function(e){return this.commonController.subscribeDeleteTracks(e)},t.prototype.subscribeStop=function(e){return this.commonController.subscribeStop(e)},t.prototype.publishAdd=function(e){return this.commonController.publishAdd(e)},t.prototype.publishDeleteTracks=function(e){return this.commonController.publishDeleteTracks(e)},t.prototype.publishReplaceTracks=function(e){return this.commonController.publishReplaceTracks(e)},t.prototype.publishStop=function(e){return this.commonController.publishStop(e)},t.prototype.unsubscribe=function(){this.subscriber.resetResubscribeStatus(),this.subscriber.unsubscribe()},t.prototype.startLiveStream=function(e,t,n){return this.reporter.reportStartPlay(e),this.subscriber.startLiveStream(e,t,n)},t.prototype.stopLiveStream=function(){this.reporter.reportStopPlay(),this.subscriber.stopLiveStream()},t.prototype.muteLiveStream=function(e){this.subscriber.muteLiveStream(e)},t.prototype.publish=function(e,t,n){return a(this,void 0,void 0,(function(){return s(this,(function(r){return this.reporter.updateUrl(e),this.commonController.setPeerconnection(this.publisher.getPeerConnection()),this.publisher.resetRepublishStatus(),[2,this.publisher.publishWithReconnect(e,t,n)]}))}))},t.prototype.unpublish=function(){return this.publisher.resetRepublishStatus(),this.publisher.unpublish()},t.prototype.getPublishTrackInfoList=function(){return this.publisher.getTrackInfoList()},t.prototype.getTransportStats=function(){return this.subscriber.getPeerConnection().getSubMonitor().getTransportStats()},t.prototype.getRemoteVideoStats=function(){return this.subscriber.getPeerConnection().getSubMonitor().getRemoteVideoStats()},t.prototype.getRemoteAudioStats=function(){return this.subscriber.getPeerConnection().getSubMonitor().getRemoteAudioStats()},t.prototype.getSubscribeVideoStats=function(e,t){return this.commonController.getSubscribeVideoStats(e,t)},t.prototype.getSubscribeAudioStats=function(e,t){return this.commonController.getSubscribeAudioStats(e,t)},t.prototype.getPublishVideoStats=function(e,t){return this.commonController.getPublishVideoStats(e,t)},t.prototype.getPublishAudioStats=function(e,t){return this.commonController.getPublishAudioStats(e,t)},t.prototype.makeReconnectEvent=function(e,t){var n=t||{},r=n.extraInfo||{};return{type:e,reason:c(n,["extraInfo"]),retryTimes:r.retryTimes,extraInfo:c(r,["retryTimes"])}},t}(d.default);t.RtsClient=E},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Subscriber=void 0;var u,d=n(14),l=n(6),p=n(1),f=c(n(18)),h=c(n(2)),_=n(5),v=n(10),m=n(63),g=c(n(11)),E=c(n(8)),y=n(27),b=n(28),S=n(7);!function(e){e[e.Init=0]="Init",e[e.Requesting=1]="Requesting",e[e.Playing=2]="Playing",e[e.Waiting=3]="Waiting"}(u||(u={}));var T=function(e){function t(t,n){var r=e.call(this)||this;return r.monitorStatsHistory=[],r.playTimeIndex=0,r.playCatonIndex=0,r.reportPubFlag=!1,r.state=u.Init,r.subscribeAudio=!0,r.subscribeVideo=!0,r.signalingUrl="",r.pullStreamUrl="",r.noParsePullStreamUrl="",r.subReconnectTimes=0,r.isConnecting=!1,r.reconnectTimerHandle=null,r.reporter=t,r.playTimer=0,r.config=n||{playTimeOut:5e3},r.remoteStream=new b.RemoteStream,r.remoteStream.on("onAutoPlayError",(function(){r.emit("onError",new _.RtsError(p.ErrorCode.ERROR_AUTOPLAY_ERROR,"auto play failed",""))})),r.remoteStream.on("onCanPlay",(function(){return a(r,void 0,void 0,(function(){var e,t,n,r,i,o,a,c,u,d,l;return s(this,(function(s){switch(s.label){case 0:return e=(new Date).getTime(),[4,this.peerconnection.sample()];case 1:return s.sent(),t=-1,n=[],r=-1,this.monitorStatsHistory&&this.monitorStatsHistory.length&&(i=this.monitorStatsHistory[this.monitorStatsHistory.length-1],this.monitorStatsHistory.forEach((function(e){var t=e.rtt;t&&t>0&&n.push(t)})),t=Number((n.reduce((function(e,t){return e+t}),0)/n.length).toFixed(3)),r=i.packetsLost,this.monitorStatsHistory=null),this.stopPlayTimer(),this.peerconnection.playStart(),this.subReconnectTimes=0,o=this._cnend||e,this.reporter.reportFirstFrameTime(this.noParsePullStreamUrl,this.remoteStream.traceId,this._cpend-this._cpstart,this._hrend-this._cpend,e-this._cpstart,0,o-this._hrend,{rttAvg:t,packetsLost:r},-1,-1,-1,null===(c=this.subscribeConfig)||void 0===c?void 0:c.vMsid,null===(u=this.subscribeConfig)||void 0===u?void 0:u.aMsid),(a=new y.PlayEvent(y.PlayType.PLAY_CANPLAY)).data={url:this.noParsePullStreamUrl,vMsid:null===(d=this.subscribeConfig)||void 0===d?void 0:d.vMsid,aMsid:null===(l=this.subscribeConfig)||void 0===l?void 0:l.aMsid},this.emit("onPlayEvent",a),[2]}}))}))})),r.peerconnection=new d.RtsPeerconnection,r.peerconnection.on("onConnected",(function(){r._cnend=(new Date).getTime()})),r.peerconnection.on("streamEnded",(function(e){var t=new y.PlayEvent(y.PlayType.PLAY_ENDED);t.data=o({},e),r.emit("onPlayEvent",t),r.emit("onError",new _.RtsError(p.ErrorCode.ERROR_STREAM_ENDED,"Stream Receiver Transport is Closed",r.remoteStream.traceId))})),r.peerconnection.on("onTrackEvent",(function(e){e.streams&&e.streams.length&&(r.remoteStream.updateMediaStream(e.streams[0]),r.onTrackFunction&&r.onTrackFunction())})),r.peerconnection.on("connectStatusChange",(function(e){e.status!==l.EConnectStatus.CONNECT_STATUS_DISCONNECTED&&e.status!==l.EConnectStatus.CONNECT_STATUS_RECONNECTING||!r.hasRetries()?r.emit("connectStatusChange",e):r.emit("onError",new _.RtsError(p.ErrorCode.ERROR_PC_DISCONNECTED,"PC disconnected",r.remoteStream.traceId))})),r.mediaObserver=new m.MediaObserver({handler:function(e,t,n){var i,o=new y.PlayEvent(y.PlayType.PLAY_TIMEOUT),a={url:e};t&&(a.vMsid=t),n&&(a.aMsid=n),o.data=a,r.emit("onPlayEvent",o);var s=new _.RtsError(p.ErrorCode.ERROR_INBOUND_TIMEOUT,"Media data timeout after ".concat(null===(i=r.mediaObserver)||void 0===i?void 0:i.actTimeout," ms."),r.remoteStream.traceId);r.emit("onError",s)}}),r.peerconnection.on("onMonitorEvent",(function(e){var t=e.eventList;if("pub"!==e.type){if(t.length){for(var n=void 0,i=0;i<t.length;i++)if(t[i].url===(0,S.pruneSubUrl)(r.noParsePullStreamUrl,!0)){n=t[i];break}if(n){r.lastMeidaEventData=n;var a=n.video,s=n.audio;a&&r.monitorStatsHistory?r.monitorStatsHistory.push({rtt:a.transportStats.rtt,packetsLost:a.inboundRtpStats.packetsLost}):s&&r.monitorStatsHistory&&r.monitorStatsHistory.push({rtt:s.transportStats.rtt,packetsLost:s.inboundRtpStats.packetsLost}),u.Requesting===r.state?n.video?n.video.inboundRtpStatsPerSec.framesDecodedPerSecond>5&&(r.state=u.Playing):n.audio&&n.audio.inboundRtpStatsPerSec.bytesReceivedPerSecond>0&&(r.state=u.Playing):r.state!==u.Playing&&r.state!==u.Waiting||(++r.playTimeIndex,n.video&&(n.video.inboundRtpStatsPerSec.framesDecodedPerSecond<=5?(++r.playCatonIndex,u.Waiting!==r.state&&(r.state=u.Waiting,r.emit("onPlayEvent",new y.PlayEvent(y.PlayType.PLAY_WAITING)))):u.Waiting===r.state&&(r.state=u.Playing,r.emit("onPlayEvent",new y.PlayEvent(y.PlayType.PLAY_PLAYING)))),g.default.HEARTHEAT_INTERVAL===r.playTimeIndex&&(r.reportPubFlag=!0,t.forEach((function(e){r.doReportPullStats(e)})),r.playTimeIndex=0,r.playCatonIndex=0))}var c=new y.PlayEvent(y.PlayType.PLAY_MEDIA);c.data=[],t.forEach((function(e){var t={};t.url=e.url;var n=r.calcStreamPullStats(e);if(e.audio&&(t.audio={bytesReceivedPerSecond:e.audio.inboundRtpStatsPerSec.bytesReceivedPerSecond,rtt:e.audio.transportStats.rtt,lossRate:n.aloss},t.aMsid=e.aMsid),e.video){var i=e.video,o=i.inboundRtpStats,a=i.inboundRtpStatsPerSec,s=i.transportStats;t.video={bytesReceivedPerSecond:a.bytesReceivedPerSecond,fps:o.framesPerSecond||a.framesDecodedPerSecond,framesDecodedPerSecond:a.framesDecodedPerSecond,rtt:s.rtt,width:o.frameWidth,height:o.frameHeight,lossRate:n.vloss},t.vMsid=e.vMsid}t.networkQuality=n.net_qual||0,c.data.push(t)})),c.data&&c.data.length&&(c.data.forEach((function(e){var t;null===(t=r.mediaObserver)||void 0===t||t.check({audio:e.audio,video:e.video},e.url,e.vMsid,e.aMsid)})),1===c.data.length&&(c.data[0].audio||c.data[0].video)&&(c.data=o({},c.data[0])),r.emit("onPlayEvent",c))}}else r.reportPubFlag&&(r.handlePubMonitorEvent(t),r.reportPubFlag=!1)})),r.playTimer=0,r._cpstart=0,r._cpend=0,r._hrend=0,r._cnend=0,r}return i(t,e),t.prototype.getPeerConnection=function(){return this.peerconnection},t.prototype.subscribe=function(e,t){var n=this;return new Promise((function(r,i){return a(n,void 0,void 0,(function(){var n,a,c=this;return s(this,(function(s){switch(s.label){case 0:return this.monitorStatsHistory=[],this.unsubscribe(),this.subscribeConfig=t,this.state=u.Requesting,this.noParsePullStreamUrl=e,this.parseUrl(e),null===(a=this.mediaObserver)||void 0===a||a.updateConfig({timeout:null==t?void 0:t.mediaTimeout}),n=null==t?void 0:t.signalUrl,this.signalingUrl=n||this.signalingUrl,this.pullStreamUrl?[3,1]:(i(new _.RtsError(p.ErrorCode.ERROR_PLAY_URL,"url need artc://","")),[3,8]);case 1:return this.subscribeAudio||this.subscribeVideo?[3,2]:(i(new _.RtsError(p.ErrorCode.ERROR_SUBSCRIBE_NOTHING,"subscribe nothing","")),[3,8]);case 2:if(this._cpstart=(new Date).getTime(),!this.subscribeVideo||(null==t?void 0:t.isH264Checked))return[3,7];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,(new v.SupportUtil).loadH264(3)];case 4:case 5:return s.sent(),[3,6];case 6:s.label=7;case 7:this.peerconnection.createOffer(this.subscribeAudio,this.subscribeVideo,void 0,{offerSdpHook:null==t?void 0:t.offerSdpHook}).then((function(e){var n=e.desp;c._cpend=(new Date).getTime(),c.reporter.reportSubscribeStart(c.noParsePullStreamUrl,c.signalingUrl,null==t?void 0:t.vMsid,null==t?void 0:t.aMsid),c.excuteSignal(n).then((function(e){var t;c.remoteStream.traceId=e,r(c.remoteStream);try{null===(t=c.peerconnection.getPeerCore())||void 0===t||t.patchSubscribeStreamManagerRecord(c.noParsePullStreamUrl,o(o({},c.subscribeConfig),{stream:c.remoteStream}))}catch(e){console.log(e)}c.peerconnection.getSubMonitor().updateTranceiversController()})).catch((function(e){c._hrend=(new Date).getTime();var t=new _.RtsError(e.errorCode?e.errorCode:p.ErrorCode.ERROR_HTTPREQUEST_ERROR,e.message,e?e.traceid:"",{response:e.response,sdp:e.sdp});i(t)}))})).catch((function(e){c._cpend=(new Date).getTime();var t=new _.RtsError(p.ErrorCode.ERROR_CREATEOFFER,e.message,"");i(t)})),s.label=8;case 8:return[2]}}))}))}))},t.prototype.unsubscribe=function(){var e;this.lastMeidaEventData&&this.doReportPullStats(this.lastMeidaEventData),this.stopPlayTimer(),this.peerconnection.dispose(),this.remoteStream.stop(),this.subscribeVideo=!0,this.subscribeAudio=!0,this.subscribeConfig=void 0,this.state=u.Init,this.signalingUrl="",this.pullStreamUrl="",this.noParsePullStreamUrl="",this.onTrackFunction=void 0,this.playTimer=0,this._cpstart=0,this._cpend=0,this._hrend=0,this._cnend=0,this.monitorStatsHistory=[],null===(e=this.mediaObserver)||void 0===e||e.reset()},t.prototype.startLiveStream=function(e,t,n){var r=this;return console.error("\u6b64API\u53ef\u80fd\u5b58\u5728\u7a33\u5b9a\u6027\u95ee\u9898\uff0c\u5e76\u5c06\u5728\u672a\u6765\u7684\u7248\u672c\u79fb\u9664\u3002\u8bf7\u4f7f\u7528subscribe\u66ff\u4ee3\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002"),new Promise((function(i,o){r.unsubscribe(),r.state=u.Requesting,r.noParsePullStreamUrl=e,r.parseUrl(e);var a=null==n?void 0:n.signalUrl;r.signalingUrl=a||r.signalingUrl,""===r.pullStreamUrl?o(new _.RtsError(p.ErrorCode.ERROR_PLAY_URL,"url need artc://","")):r.subscribeAudio||r.subscribeVideo?!t||"AUDIO"!==t.nodeName&&"VIDEO"!==t.nodeName?o(new _.RtsError(p.ErrorCode.ERROR_HTMLELEMENT_ERROR,"need htmlaudioelement or htmlvideoelement","")):(r.subscribeAudio&&r.subscribeVideo?"VIDEO"!==t.nodeName&&r.emit("onError",new _.RtsError(p.ErrorCode.ERROR_HEMLELEMENT_NOTMATCH,"need htmlvideoelement","")):r.subscribeAudio?"AUDIO"!==t.nodeName&&r.emit("onError",new _.RtsError(p.ErrorCode.ERROR_HEMLELEMENT_NOTMATCH,"need htmlaudioelement","")):"VIDEO"!==t.nodeName&&r.emit("onError",new _.RtsError(p.ErrorCode.ERROR_HEMLELEMENT_NOTMATCH,"need htmlvieoelement","")),r._cpstart=(new Date).getTime(),r.reporter.updateTid(),r.peerconnection.createOffer(r.subscribeAudio,r.subscribeVideo).then((function(e){var n=e.desp;r._cpend=(new Date).getTime(),r.excuteSignal(n).then((function(e){r.remoteStream.traceId=e,r._hrend=(new Date).getTime(),r.remoteStream.play(t),i(e)})).catch((function(e){r._hrend=(new Date).getTime(),r.reporter.reportFirstFrameTime(r.noParsePullStreamUrl,e?e.traceid:"",r._cpend-r._cpstart,r._hrend-r._cpend,-1,-1,r._cnend-r._hrend),o(new _.RtsError(e.errorCode?e.errorCode:p.ErrorCode.ERROR_HTTPREQUEST_ERROR,e.message,""))}))})).catch((function(e){r._cpend=(new Date).getTime(),r.reporter.reportFirstFrameTime(r.noParsePullStreamUrl,e?e.traceid:"",r._cpend-r._cpstart,-1,-1,-1,r._cnend-r._hrend),o(new _.RtsError(p.ErrorCode.ERROR_CREATEOFFER,e.message,""))}))):o(new _.RtsError(p.ErrorCode.ERROR_SUBSCRIBE_NOTHING,"subscribe nothing",""))}))},t.prototype.stopLiveStream=function(){this.unsubscribe()},t.prototype.muteLiveStream=function(e){return this.remoteStream.muted=e,!0},t.prototype.excuteSignal=function(e){var t=this;return new Promise((function(n,r){var i,o,a,s,c={url:t.pullStreamUrl,amsid:(null===(i=t.subscribeConfig)||void 0===i?void 0:i.aMsid)||["rts audio"],vmsid:(null===(o=t.subscribeConfig)||void 0===o?void 0:o.vMsid)||["rts video"]};t.subscribeAudio||delete c.amsid,t.subscribeVideo||delete c.vmsid,f.default.create({baseURL:"",timeout:t.config.playTimeOut,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).post(t.signalingUrl,{version:(null===(a=t.subscribeConfig)||void 0===a?void 0:a.signalVersion)||E.default.protocol_version,sdk_version:E.default.sdk_version,mode:(null===(s=t.subscribeConfig)||void 0===s?void 0:s.signalMode)||"live",pull_streams:[c],jsep:e}).then((function(i){var o,a,s,c;if(i&&200===i.status){t._hrend=(new Date).getTime();var u=null===(o=i.data)||void 0===o?void 0:o.trace_id;t.reporter.reportSubscribeOk({vurl:t.noParsePullStreamUrl,surl:t.signalingUrl,traceId:u,hrct:t._hrend-t._cpend,rslt:null===(a=i.data)||void 0===a?void 0:a.code}),t.peerconnection.recvAnswer(i.data,{answerSdpHook:null===(s=t.subscribeConfig)||void 0===s?void 0:s.answerSdpHook}).then((function(){n(u)})).catch((function(e){e.traceid=i.data?i.data.trace_id:"",r({errorCode:p.ErrorCode.ERROR_ANSWER_ERROR,message:e.message?e.message:"set answer error",traceid:e.traceid,sdp:e.sdp})}))}else r({message:i?"response status:"+i.status:"response is null",traceid:null===(c=null==i?void 0:i.data)||void 0===c?void 0:c.trace_id,sdp:e.sdp})})).catch((function(t){var n;[400,500].includes(null===(n=t.response)||void 0===n?void 0:n.status)&&(t.sdp=e.sdp),r(t)}))}))},t.prototype.parseUrl=function(e){if(0===e.indexOf("artc://")){var t=e.indexOf("@");if(t>-1){var n=e.substring(t+1,e.length);this.pullStreamUrl=e.substring(0,t);for(var r=n.split("&"),i=0;i<r.length;++i)"subaudio=no"===r[i]&&(this.subscribeAudio=!1),"subvideo=no"===r[i]&&(this.subscribeVideo=!1)}else this.pullStreamUrl=e;var o=window.location.href.indexOf("file://")>-1?"http://":"//";this.signalingUrl=this.pullStreamUrl.replace("artc://",o)}},t.prototype.stopPlayTimer=function(){this.playTimer&&clearTimeout(this.playTimer),this.playTimer=0},t.prototype.calcStreamPullStats=function(e){var t={},n=e.video,r=e.audio;if(n){var i=n.transportStats,a=n.inboundRtpStats,s=n.inboundRtpStatsPerSec,c=n.localCandidate,u=n.remoteCandidate;t=o(o({},t),{rtt:-1!==(null==i?void 0:i.rtt)?1e3*((null==i?void 0:i.rtt)||0):-1,cand_re_prot:u.protocol,cand_lo_prot:c.protocol,cand_re_addr:"".concat(u.ip||u.address,":").concat(u.port),cand_lo_addr:"".concat(c.ip||c.address,":").concat(c.port),w:null==a?void 0:a.frameWidth,h:null==a?void 0:a.frameHeight,vbps:Math.floor(8*s.bytesReceivedPerSecond),fps:null==a?void 0:a.framesPerSecond,dfps:Math.floor(null==s?void 0:s.framesDecodedPerSecond),vjb:Math.floor((0,S.getJitterBufferDelayAvg)(null==a?void 0:a.jitterBufferDelay,null==a?void 0:a.jitterBufferEmittedCount)),vMsid:e.vMsid,vloss:s.packetsLostRate})}return r&&(i=r.transportStats,a=r.inboundRtpStats,s=r.inboundRtpStatsPerSec,c=r.localCandidate,u=r.remoteCandidate,t=o(o({},t),{rtt:-1!==(null==i?void 0:i.rtt)?1e3*((null==i?void 0:i.rtt)||0):-1,cand_re_prot:u.protocol,cand_lo_prot:c.protocol,cand_re_addr:"".concat(u.ip||u.address,":").concat(u.port),cand_lo_addr:"".concat(c.ip||c.address,":").concat(c.port),abps:Math.floor(8*s.bytesReceivedPerSecond),ajb:Math.floor((0,S.getJitterBufferDelayAvg)(null==a?void 0:a.jitterBufferDelay,a.jitterBufferEmittedCount)),aMsid:e.aMsid,aloss:s.packetsLostRate})),o(o({},t),{net_qual:(0,S.evaluateNetworkCondition)(t.rtt,t.aloss,t.vloss,t.ajb,t.vjb)})},t.prototype.doReportPullStats=function(e){var t=this.calcStreamPullStats(e),n={ct:1e3*this.playCatonIndex,tt:1e3*this.playTimeIndex,url:e.url};n.tt&&(n=o(o({},n),t),this.reporter.reportPullStats(n),this.lastMeidaEventData=void 0)},t.prototype.retrySubscribe=function(e){return this.hasRetries()?(this.emit("connectStatusChange",{status:l.EConnectStatus.CONNECT_STATUS_RECONNECTING}),this.subReconnectTimes++,e.extraInfo=o(o({},e.extraInfo),{retryTimes:this.subReconnectTimes}),this.subscribeWithReconnect(this.noParsePullStreamUrl,this.subscribeConfig).catch((function(e){})),!0):(e.extraInfo=o(o({},e.extraInfo),{retryTimes:this.subReconnectTimes}),!1)},t.prototype.subscribeWithReconnect=function(e,t,n,r){var i=this;return new Promise((function(a,s){a=n||a,s=r||s,i.isConnecting=!0,i.subscribe(e,t).then((function(e){i.isConnecting=!1,a(e)})).catch((function(n){var r;if(!i.isConnecting)return s(n);if(i.hasRetries(!0)){var c=(null===(r=i.subscribeConfig)||void 0===r?void 0:r.retryInterval)||l.DEFAULT_RETRY_SUBSCRIBE_INTERVAL;i.reconnectTimerHandle=setTimeout((function(){n.extraInfo=o(o({},n.extraInfo),{retryTimes:i.subReconnectTimes}),i.emit("reconnect",n),i.subscribeWithReconnect(e,t,a,s)}),c)}else s(n),n.extraInfo=o(o({},n.extraInfo),{retryTimes:i.subReconnectTimes}),i.isConnecting=!1,i.emit("onError",n)}))}))},t.prototype.hasRetries=function(e){var t,n,r=l.DEFAULT_RETRY_SUBSCRIBE_LIMIT;"number"==typeof(null===(t=this.subscribeConfig)||void 0===t?void 0:t.retryTimes)&&(r=Math.floor(null===(n=this.subscribeConfig)||void 0===n?void 0:n.retryTimes));var i=this.subReconnectTimes<r;return e&&i&&this.subReconnectTimes++,i},t.prototype.resetResubscribeStatus=function(){this.subReconnectTimes=0,this.isConnecting=!1,this.reporter.updateTid(),null!==this.reconnectTimerHandle&&(clearTimeout(this.reconnectTimerHandle),this.reconnectTimerHandle=null)},t.prototype.handlePubMonitorEvent=function(e){var t=this;e.forEach((function(e){t.reporter.reportPushStats(e)}))},t}(h.default);t.Subscriber=T},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdpUtil=void 0;var i=n(3),o=function(){this.stramId="",this.audioTrackId="",this.videoTrackId="",this.screenTrackId="",this.customTrackId=""},a=function(){function e(e){this.sdpLines=new Array,this.localStream=e,this.publishStreamInfo=new o}return Object.defineProperty(e.prototype,"sdp",{get:function(){return this.sdpLines.join("\r\n")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoTrackId",{get:function(){return this.publishStreamInfo.videoTrackId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenTrackId",{get:function(){return this.publishStreamInfo.videoTrackId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoName",{get:function(){return"rts video"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenName",{get:function(){return"rts screen"},enumerable:!1,configurable:!0}),e.prototype.init=function(e){this.sdpLines=e.split("\r\n")},e.prototype.addNack=function(){for(var e=0;e<this.sdpLines.length;++e)if(-1!=this.sdpLines[e].indexOf("opus")&&-1!=this.sdpLines[e+1].indexOf("rtcp-fb")){var t=this.sdpLines[e+1].split(" ");2==t.length&&(-1!=this.sdpLines[e+2].indexOf("rtcp-fb")?this.sdpLines.splice(e+3,0,t[0]+" nack"):this.sdpLines.splice(e+2,0,t[0]+" nack"))}},e.prototype.parseCustomMsid=function(e){var t={stream:"",track:""};if(!e)return t;var n=e.trim().split(" ");return 2==n.length?(t.stream=n[0],t.track=n[1]):t.track=n[0],t},e.prototype.modifyTrackName=function(e){void 0===e&&(e={});var t=e.vMsid,n=e.aMsid,r=t?this.parseCustomMsid(t):{stream:"rts",track:"video"},o=n?this.parseCustomMsid(n):{stream:"rts",track:"audio"},a="";if(this.localStream){this.publishStreamInfo.stramId=this.localStream.mediaStream.id,this.localStream.audioTrack&&(this.publishStreamInfo.audioTrackId=this.localStream.audioTrack.id,a=o.stream||"-"),this.localStream.videoTrack&&(this.publishStreamInfo.videoTrackId=this.localStream.videoTrack.id,a=r.stream||"-");for(var s=!1,c=!1,u=0;u<this.sdpLines.length;++u){var d=this.sdpLines[u],l=d.indexOf(this.publishStreamInfo.stramId);this.publishStreamInfo.stramId&&-1!=l&&(this.sdpLines[u]=this.sdpLines[u].replace(this.publishStreamInfo.stramId,a),i.BrowserUtil.isFirefox&&(s?this.sdpLines[u]=this.sdpLines[u].substring(0,l+a.length+1)+o.track:c&&(this.sdpLines[u]=this.sdpLines[u].substring(0,l+a.length+1)+r.track))),this.publishStreamInfo.audioTrackId&&-1!=d.indexOf(this.publishStreamInfo.audioTrackId)?this.sdpLines[u]=this.sdpLines[u].replace(this.publishStreamInfo.audioTrackId,o.track):this.publishStreamInfo.videoTrackId&&-1!=d.indexOf(this.publishStreamInfo.videoTrackId)&&(this.sdpLines[u]=this.sdpLines[u].replace(this.publishStreamInfo.videoTrackId,r.track)),-1!=d.indexOf("m=audio")?(s=!0,c=!1):-1!=d.indexOf("m=video")&&(c=!0,s=!1),-1!=d.indexOf("a=ssrc")&&-1!==(l=d.indexOf("cname:"))&&(s?this.sdpLines[u]=d.substr(0,l+6)+o.track:c&&(this.sdpLines[u]=d.substr(0,l+6)+r.track))}}},e.prototype.getPublishVideoSdp=function(){for(var e=-1,t=-1,n=!1,r=0;r<this.sdpLines.length;++r){if(n&&this.sdpLines[r].indexOf("m=application")>-1){t=r-1;break}if(this.sdpLines[r].indexOf("m=video")>-1){if(n){t=r-1;break}e=r}this.sdpLines[r].indexOf("rts video")>-1&&(n=!0)}return n?(-1===t&&(t=this.sdpLines.length-1),this.sdpLines.splice(e,t-e).join("\r\n")):""},e.prototype.removeVideoTrack=function(e){for(var t="rts "+e,n=-1,r=-1,i=!1,o=0;o<this.sdpLines.length;++o){if(i&&this.sdpLines[o].indexOf("m=application")>-1){r=o-1;break}if(this.sdpLines[o].indexOf("m=video")>-1){if(i){r=o-1;break}n=o}this.sdpLines[o].indexOf(t)>-1&&(i=!0)}return!!i&&(-1===r&&(r=this.sdpLines.length-1),this.sdpLines.splice(n,r-n),!0)},e.prototype.ios15PushHack=function(){var e=!1,t=-1;if(this.sdpLines.forEach((function(n,r){n.includes("m=video")&&(e=!0),e&&-1===t&&n.includes("a=")&&(t=r)})),-1!==t){var n=this.getExtmapIds(),r=Math.max.apply(Math,n)+1;this.sdpLines.splice(t,0,"a=extmap:".concat(r," urn:3gpp:video-orientation"))}},e.prototype.addSps=function(){this.sdpLines=this.sdpLines.map((function(e){return e.includes("a=fmtp:")&&e.includes("level-asymmetry-allowed")?e+=";sps-pps-idr-in-keyframe=1":e}))},e.prototype.removeTwccRtcpFb=function(){this.sdpLines=this.sdpLines.filter((function(e){return!e.includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")}))},e.prototype.setDirection=function(e){void 0===e&&(e={direction:"recvonly"});var t=["sendonly","recvonly","sendrecv"].filter((function(t){return t!==e.direction})),n=!1,r=!1;this.sdpLines=this.sdpLines.map((function(i,o){if(i.includes("m=video"))n=!0,r=!1;else if(i.includes("m=audio"))r=!0,n=!1;else if(i.includes("m=application"))n=!1,r=!1;else if(n||r){var a;if(t.some((function(e){if(i.includes(e))return a=e,!0}))&&a)return i.replace(a,e.direction)}return i}))},e.prototype.removeSDES=function(){var e=["urn:ietf:params:rtp-hdrext:sdes:mid","urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id","urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id"];this.sdpLines=this.sdpLines.filter((function(t){return!e.some((function(e){return t.includes(e)}))}))},e.prototype.dispose=function(){this.localStream&&(this.localStream=void 0),this.sdpLines=new Array,this.publishStreamInfo=new o},e.prototype.getExtmapIds=function(){return this.sdpLines.reduce((function(e,t){if(t.includes("a=extmap")){var n=Number(t.replace("a=extmap:","").split(" ")[0]);return r(r([],e,!0),[n],!1)}return e}),[]).filter((function(e){return e}))},e}();t.SdpUtil=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SubMonitor=void 0;var u=n(40),d=n(41),l=c(n(2)),p=function(){function e(){this.trackPairDataList=[]}return e.prototype.reset=function(){this.trackPairDataList=[]},e.prototype.addTrackPair=function(e,t,n,r,i,o){var a=new u.AudioReceiverMonitorData,s=new d.VideoReceiverMonitorData;r&&(s.rtpReceiver=r),i&&(a.rtpReceiver=i),o&&(s.RTCPeerconnection=o,a.RTCPeerconnection=o),this.trackPairDataList.push({url:e,vMsid:t,aMsid:n,audioReceiverMonitorData:a,videoReceiverMonitorData:s})},e}(),f=function(e){function t(){var t=e.call(this)||this;return t.canplay=!1,t.pc=null,t.pcCore=null,t.monitorTimerId=null,t.audioReceiverMonitorData=new u.AudioReceiverMonitorData,t.videoReceiverMonitorData=new d.VideoReceiverMonitorData,t.receiverMonitorController=new p,t}return i(t,e),t.prototype.start=function(e,t){this.pc=e,this.pcCore=t,this.updateTranceiversController(),this.startMonitorTimer(200)},t.prototype.updateTranceiversController=function(){var e=this;if(this.pc&&this.pcCore){var t=this.pcCore.getStreamManager().getAllTrackPairList("sub");this.receiverMonitorController.reset(),t.forEach((function(t){t.url&&e.receiverMonitorController.addTrackPair(t.url,t.vMsid,t.aMsid,t.vTransceiver,t.aTransceiver,e.pc)})),this.receiverMonitorController.trackPairDataList.forEach((function(t){e.initEvent(t)}))}},t.prototype.resetTimer=function(e){this.updateTranceiversController(),this.stopMonitorTimer(),this.startMonitorTimer(e)},t.prototype.stop=function(){this.canplay=!1,this.stopMonitorTimer(),this.audioReceiverMonitorData.dispose(),this.videoReceiverMonitorData.dispose()},t.prototype.startMonitorTimer=function(e){var t=this;this.monitorTimerId||(this.monitorTimerId=window.setInterval((function(){t.onMonitorTimer()}),e))},t.prototype.stopMonitorTimer=function(){this.monitorTimerId&&clearInterval(this.monitorTimerId),this.monitorTimerId=null},t.prototype.onMonitorTimer=function(){return o(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,this.updateMonitorData()];case 1:return t.sent(),e=[],this.receiverMonitorController.trackPairDataList.forEach((function(t){var n,r;if(t.url){var i={url:t.url};t.audioReceiverMonitorData.isExist&&(i.audio=null===(n=t.audioReceiverMonitorData)||void 0===n?void 0:n.monitorData,i.aMsid=t.aMsid),t.videoReceiverMonitorData.isExist&&(i.video=null===(r=t.videoReceiverMonitorData)||void 0===r?void 0:r.monitorData,i.vMsid=t.vMsid),e.push(i)}})),this.emit("onMonitorEvent",{eventList:e,type:"sub"}),[2]}}))}))},t.prototype.initEvent=function(e){var t=this,n={url:e.url||"url unknown",vMsid:e.vMsid||"vMsid unknown",aMsid:e.aMsid||"aMsid unknown"};e.audioReceiverMonitorData.isExist&&(e.audioReceiverMonitorData.on("streamEnded",(function(){e.videoReceiverMonitorData&&!e.videoReceiverMonitorData.isStreamEnded||(t.emit("streamEnded",n),t.stopMonitorTimer())})),e.audioReceiverMonitorData.on("canPlay",(function(){t.emitCanPlay()}))),e.videoReceiverMonitorData.isExist&&(e.videoReceiverMonitorData.on("streamEnded",(function(){e.audioReceiverMonitorData&&!e.audioReceiverMonitorData.isStreamEnded||(t.emit("streamEnded",n),t.stopMonitorTimer())})),e.videoReceiverMonitorData.on("canPlay",(function(){t.emitCanPlay()})))},t.prototype.updateMonitorData=function(){return Promise.all(this.receiverMonitorController.trackPairDataList.reduce((function(e,t){var n,r;return s(s([],e,!0),[null===(n=t.audioReceiverMonitorData)||void 0===n?void 0:n.getInfo(),null===(r=t.videoReceiverMonitorData)||void 0===r?void 0:r.getInfo()],!1)}),[]))},t.prototype.emitCanPlay=function(){this.canplay||(this.canplay=!0,this.emit("canPlay"))},t.prototype.copyMonitorData=function(){var e,t;(null===(t=null===(e=this.receiverMonitorController)||void 0===e?void 0:e.trackPairDataList)||void 0===t?void 0:t.length)&&(this.audioReceiverMonitorData=this.receiverMonitorController.trackPairDataList[0].audioReceiverMonitorData,this.videoReceiverMonitorData=this.receiverMonitorController.trackPairDataList[0].videoReceiverMonitorData)},t.prototype.getTransportStats=function(){return o(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,this.updateMonitorData()];case 1:return t.sent(),this.copyMonitorData(),e={},this.videoReceiverMonitorData.isExist?e=this.videoReceiverMonitorData.monitorData.transportStats:this.audioReceiverMonitorData.isExist&&(e=this.audioReceiverMonitorData.monitorData.transportStats),[2,e]}}))}))},t.prototype.getRemoteVideoStats=function(){return o(this,void 0,void 0,(function(){var e,t;return a(this,(function(n){switch(n.label){case 0:return[4,this.updateMonitorData()];case 1:return n.sent(),this.copyMonitorData(),e={},this.videoReceiverMonitorData.isExist&&(t=this.videoReceiverMonitorData.monitorData.inboundRtpStats,e={timestamp:Math.floor(t.timestamp||0),framesDecodedPerSecond:t.framesPerSecond,framesDecoded:t.framesDecoded,frameWidth:t.frameWidth,frameHeight:t.frameHeight,bytesReceived:t.bytesReceived,jitter:t.jitter,jitterBufferDelayAvg:Number(t.jitterBufferDelay)/Number(t.jitterBufferEmittedCount),packetsLost:t.packetsLost,packetsReceived:t.packetsReceived}),[2,e]}}))}))},t.prototype.getRemoteAudioStats=function(){return o(this,void 0,void 0,(function(){var e,t;return a(this,(function(n){switch(n.label){case 0:return[4,this.updateMonitorData()];case 1:return n.sent(),this.copyMonitorData(),e={},this.audioReceiverMonitorData.isExist&&(t=this.audioReceiverMonitorData.monitorData.inboundRtpStats,e={timestamp:Math.floor(t.timestamp||0),bytesReceived:t.bytesReceived,jitter:t.jitter,jitterBufferDelayAvg:Number(t.jitterBufferDelay)/Number(t.jitterBufferEmittedCount),packetsLost:t.packetsLost,packetsReceived:t.packetsReceived}),[2,e]}}))}))},t}(l.default);t.SubMonitor=f},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AudioReceiverMonitorData=void 0;var o=n(16),a=function(e){function t(){return e.call(this,o.ReceiverMonitorType.AUDIO)||this}return i(t,e),t}(o.ReceiverMonitorData);t.AudioReceiverMonitorData=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.VideoReceiverMonitorData=void 0;var o=n(16),a=function(e){function t(){return e.call(this,o.ReceiverMonitorType.VIDEO)||this}return i(t,e),t}(o.ReceiverMonitorData);t.VideoReceiverMonitorData=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PubMonitor=void 0;var c=s(n(2)),u=n(43),d=function(e){function t(){var t=e.call(this)||this;return t.heartbeatHandle=null,t.pc=null,t.pcCore=null,t.senderMonitorDataList=[],t}return i(t,e),t.prototype.startHeartbeat=function(e,t,n){var r=this;this.pc=e,this.pcCore=t,this.updateSenders(),this.stopHeartbeat(),this.heartbeatHandle=setInterval((function(){r.emitHeartBeat()}),n||1e3)},t.prototype.stopHeartbeat=function(){null!==this.heartbeatHandle&&clearInterval(this.heartbeatHandle),this.heartbeatHandle=null},t.prototype.addTrackPair=function(e,t,n,r,i){if(e){var o=new u.SenderMonitorData;t&&(o.videoSender=t),n&&(o.audioSender=n),this.senderMonitorDataList.push({url:e,vMsid:r,aMsid:i,senderData:o})}},t.prototype.updateSenders=function(){var e,t=this,n=null===(e=this.pcCore)||void 0===e?void 0:e.getStreamManager().getAllTrackPairList("pub");this.senderMonitorDataList=[],null==n||n.forEach((function(e){t.addTrackPair(e.url,e.vTransceiver,e.aTransceiver,e.vMsid,e.aMsid)}))},t.prototype.emitHeartBeat=function(){var e=this;Promise.all(this.senderMonitorDataList.reduce((function(e,t){return a(a([],e,!0),[t.senderData.getInfo()],!1)}),[])).then((function(){})).catch((function(e){})).finally((function(){var t=e.senderMonitorDataList.map((function(e){return o(o({},e.senderData.monitorData),{url:e.url,vMsid:e.vMsid,aMsid:e.aMsid})}));e.emit("onMonitorEvent",{eventList:t,type:"pub"})}))},t}(c.default);t.PubMonitor=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SenderMonitorData=void 0;var r=n(17),i=function(){function e(){this._audiosender=null,this._videosender=null,this.timeStamp=0,this.curTimeStamp=0,this.audioBytesSent=0,this.curAudioBytesSent=0,this.videoBytesSent=0,this.curVideoBytesSent=0,this.audioRetransmittedBytesSent=0,this.curAudioRetransmittedBytesSent=0,this.videoRetransmiitedBytesSent=0,this.curVideoRetransmiitedBytesSent=0,this.framesSent=0,this.curFramesSent=0,this.framesEncoded=0,this.curFramesEncoded=0,this.rtt=0,this.localProtocol="",this.remoteProtocol="",this.localTransportAddr="",this.remoteTransportAddr="",this.frameHeight=0,this.frameWidth=0,this.efps=0,this.sfps=0,this.timeGap=0,this.abps=0,this.vbps=0,this.rt_abps=0,this.rt_vbps=0,this.stashedData={}}return Object.defineProperty(e.prototype,"videoSender",{set:function(e){this._videosender=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioSender",{set:function(e){this._audiosender=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monitorData",{get:function(){return this.doCalc(),{tt:parseFloat(this.timeGap.toFixed(0)),rtt:this.rtt,cand_re_prot:this.remoteProtocol,cand_lo_prot:this.localProtocol,cand_re_addr:this.remoteTransportAddr,cand_lo_addr:this.localTransportAddr,w:this.frameWidth,h:this.frameHeight,efps:parseFloat(this.efps.toFixed(0)),fps:parseFloat(this.sfps.toFixed(0)),abps:parseFloat(this.abps.toFixed(0)),vbps:parseFloat(this.vbps.toFixed(0)),rt_abps:parseFloat(this.rt_abps.toFixed(0)),rt_vbps:parseFloat(this.rt_vbps.toFixed(0))}},enumerable:!1,configurable:!0}),e.prototype.doCalc=function(){0!==this.timeStamp&&(this.timeGap=this.curTimeStamp-this.timeStamp,this.timeGap>0&&(this.efps=1e3*(this.curFramesEncoded-this.framesEncoded)/this.timeGap,this.sfps=1e3*(this.curFramesSent-this.framesSent)/this.timeGap,this.abps=1e3*(this.curAudioBytesSent-this.audioBytesSent)/this.timeGap,this.vbps=1e3*(this.curVideoBytesSent-this.videoBytesSent)/this.timeGap,this.rt_abps=1e3*(this.curAudioRetransmittedBytesSent-this.audioRetransmittedBytesSent)/this.timeGap,this.rt_vbps=1e3*(this.curVideoRetransmiitedBytesSent-this.videoRetransmiitedBytesSent)/this.timeGap)),this.timeStamp=this.curTimeStamp,this.audioBytesSent=this.curAudioBytesSent,this.videoBytesSent=this.curVideoBytesSent,this.audioRetransmittedBytesSent=this.curAudioRetransmittedBytesSent,this.videoRetransmiitedBytesSent=this.curVideoRetransmiitedBytesSent,this.framesSent=this.curFramesSent,this.framesEncoded=this.curFramesEncoded},e.prototype.getInfo=function(){var e=this,t=new Promise((function(t,n){e._videosender&&e._videosender.getStats?e._videosender.getStats().then((function(n){n.forEach((function(t){if(t)switch(t.type){case r.RTCStatsType.CandidatePair:e.onCandidatePair(t);break;case r.RTCStatsType.OutboundRtp:e.onOutBoundRtp(t,"video");break;case r.RTCStatsType.RemoteCandidate:e.onRemoteCandidate(t);break;case r.RTCStatsType.LocalCandidate:e.onLocalCandidate(t)}})),t()})).catch((function(e){n(e)})):n("no video sender")})),n=new Promise((function(t,n){e._audiosender&&e._audiosender.getStats?e._audiosender.getStats().then((function(n){n.forEach((function(t){if(t)switch(t.type){case r.RTCStatsType.CandidatePair:e.onCandidatePair(t);break;case r.RTCStatsType.OutboundRtp:e.onOutBoundRtp(t,"audio");break;case r.RTCStatsType.RemoteCandidate:e.onRemoteCandidate(t);break;case r.RTCStatsType.LocalCandidate:e.onLocalCandidate(t)}})),t()})).catch((function(e){n(e)})):n("no audio sender")}));return Promise.all([t,n])},e.prototype.onCandidatePair=function(e){this.curTimeStamp=e.timestamp,this.rtt=e.currentRoundTripTime},e.prototype.onOutBoundRtp=function(e,t){this.curTimeStamp=e.timestamp,"video"===t?(this.curVideoBytesSent=e.bytesSent,this.curVideoRetransmiitedBytesSent=e.retransmittedBytesSent,this.curFramesEncoded=e.framesEncoded,this.curFramesSent=e.framesSent,this.frameWidth=e.frameWidth,this.frameHeight=e.frameHeight):"audio"===t&&(this.curAudioBytesSent=e.bytesSent,this.curAudioRetransmittedBytesSent=e.retransmittedBytesSent)},e.prototype.onRemoteCandidate=function(e){this.curTimeStamp=e.timestamp,this.remoteProtocol=e.protocol,this.remoteTransportAddr=(e.ip||e.address)+(e.port?":"+e.port.toFixed(0):"")},e.prototype.onLocalCandidate=function(e){this.curTimeStamp=e.timestamp,this.localProtocol=e.protocol,this.localTransportAddr=(e.ip||e.address)+(e.port?":"+e.port.toFixed(0):"")},e}();t.SenderMonitorData=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Datachannel=void 0;var r=function(){function e(e){this.pc=e,this.messageId=1,this.dataChannel=this.pc.createDataChannel("GRTNDataChannel"),this.dataChannel.onopen=function(e){},this.dataChannel.onmessage=function(e){e.data},this.dataChannel.onclose=function(e){},this.dataChannel.onerror=function(e){}}return e.prototype.addTrack=function(e,t){return new Promise((function(e,t){}))},e.prototype.removeTrack=function(e,t){return new Promise((function(e,t){}))},e.prototype.createPublishPacket=function(){var e={type:"pub",version:1,msg_id:this.messageId,streams:[]};return++this.messageId,e},e}();t.Datachannel=r},function(e,t,n){"use strict";var r=n(0),i=n(19),o=n(46),a=n(25);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=s(n(22));c.Axios=o,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=n(26),c.CancelToken=n(60),c.isCancel=n(21),c.all=function(e){return Promise.all(e)},c.spread=n(61),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(47),a=n(48),s=n(25);function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(0);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(49),o=n(21),a=n(22);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],d=!1,l=-1;function p(){d&&c&&(d=!1,c.length?u=c.concat(u):l=-1,u.length&&f())}function f(){if(!d){var e=s(p);d=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function _(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||d||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(24);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(56),i=n(57);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(0),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(26);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EN=void 0,function(e){e.MESSAGE_NOTSUPPORT_WEBRTC="not support webrtc",e.MESSAGE_BROWSER_NOTSUPPORT="browser not support",e.MESSAGE_BROWSER_VERSIONLOW="browser version too low",e.MESSAGE_NOTSUPPORT_H264="not support h264",e.MESSAGE_CREATEOFFER="create offer error"}(t.EN||(t.EN={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaObserver=void 0;var r=function(){function e(t){this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.handler=t.handler||function(){},this.watchTimer=null}return Object.defineProperty(e.prototype,"actTimeout",{get:function(){return this.timeout},enumerable:!1,configurable:!0}),e.prototype.check=function(e,t,n,r){var i=this;this.hasNoData(e)?this.watchTimer||(this.watchTimer=window.setTimeout((function(){i.handler(t,n,r)}),this.timeout)):this.watchTimer&&(clearTimeout(this.watchTimer),this.watchTimer=null)},e.prototype.hasNoData=function(e){return!(e&&(e.video?Number(e.video.bytesReceivedPerSecond)>0:e.audio&&Number(e.audio.bytesReceivedPerSecond)>0))},e.prototype.updateConfig=function(e){this.timeout=e.timeout||this.timeout,this.handler=e.handler||this.handler},e.prototype.reset=function(){this.watchTimer&&(clearTimeout(this.watchTimer),this.watchTimer=null)},e.prototype.dispose=function(){this.timeout=e.DEFAULT_TIMEOUT,this.handler=function(){},this.watchTimer&&(clearTimeout(this.watchTimer),this.watchTimer=null)},e.DEFAULT_TIMEOUT=6e3,e}();t.MediaObserver=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Publisher=void 0;var s=n(6),c=n(14),u=a(n(18)),d=a(n(8)),l=n(1),p=n(5),f=a(n(2)),h=n(7),_=function(e){function t(t){var n=e.call(this)||this;return n.publishStartTimeStamp=0,n.pubReconnectTimes=0,n.isConnecting=!1,n.reconnectTimerHandle=null,n.reportMonitorTimes=0,n.reportSubFlag=!1,n.reporter=t,n.peerconnection=new c.RtsPeerconnection,n.peerconnection.on("connectStatusChange",(function(e){e.status!==s.EConnectStatus.CONNECT_STATUS_DISCONNECTED&&e.status!==s.EConnectStatus.CONNECT_STATUS_RECONNECTING||!n.hasRetries()?n.emit("connectStatusChange",e):n.emit("onError",new p.RtsError(l.ErrorCode.ERROR_PC_DISCONNECTED,"PC disconnected",""))})),n.peerconnection.on("onMonitorEvent",(function(e){var t=e.eventList;"pub"===e.type?(n.reportMonitorTimes++,n.reportMonitorTimes%4==0&&(t.forEach((function(e){n.reporter.reportPushStats(e)})),n.reportSubFlag=!0,n.reportMonitorTimes=0)):"sub"===e.type&&n.reportSubFlag&&(n.handleSubMonitorEvent(t),n.reportSubFlag=!1)})),n.signalingUrl="",n.publishUrl="",n.publishConfig={},n}return i(t,e),t.prototype.publish=function(e,t,n){var r=this;return new Promise((function(i,a){if(r.unpublish(),r.localStream=t,r.publishUrl=e,r.publishConfig=n||{},r.checkPublishUrl())if(null===t.audioTrack)a(new p.RtsError(l.ErrorCode.ERROR_PUBLISH_NOAUDIO,"publish need audiotrack",""));else{var s=null==n?void 0:n.signalUrl;r.signalingUrl=s||r.signalingUrl,r.publishStartTimeStamp=(new Date).getTime(),t.setReporter(r.reporter),r.peerconnection.createOffer(t.hasAudio,t.hasVideo||t.hasScreen,t,o(o({},n),{publishUrl:e})).then((function(e){var t=e.desp,o=e.publishTrackInfoList;r.publishTrackInfoList=o;var s=(new Date).getTime();r.reporter.reportStartPublish(r.publishUrl,r.signalingUrl),r.excuteSignal(t).then((function(e){var t=(new Date).getTime();r.peerconnection.recvAnswer(e.data,{answerSdpHook:null==n?void 0:n.answerSdpHook}).then((function(){r.reporter.reportPublishOk(r.publishUrl,r.signalingUrl,s-r.publishStartTimeStamp,t-s,(new Date).getTime()-t,e.data.trace_id),i(e.data.trace_id),r.pubReconnectTimes=0,r.peerconnection.pushStart()})).catch((function(t){t.traceid=e.data?e.data.trace_id:"";var n=new p.RtsError(t.errorCode||l.ErrorCode.ERROR_ANSWER_ERROR,t.message||"set answer error",t.traceid,{sdp:t.sdp});a(n)}))})).catch((function(e){var t=new p.RtsError(e.errorCode||l.ErrorCode.ERROR_HTTPREQUEST_ERROR,e.message||"","",{sdp:e.sdp});a(t)}))})).catch((function(e){var t=new p.RtsError(e.errorCode||l.ErrorCode.ERROR_CREATEOFFER,e.message||"","");a(t)}))}else a(new p.RtsError(l.ErrorCode.ERROR_PUBLISH_URL,"url need artc://",""))}))},t.prototype.unpublish=function(){this.peerconnection.dispose(),this.reporter.reportStopPublish(),this.signalingUrl="",this.publishUrl="",this.publishTrackInfoList=null},t.prototype.getTrackInfoList=function(){return this.publishTrackInfoList||[]},t.prototype.getPeerConnection=function(){return this.peerconnection},t.prototype.replaceTrack=function(e,t){return this.peerconnection.replaceTrack(this.publishUrl,e,t)},t.prototype.excuteSignal=function(e){var t=this,n={type:e.type,sdp:e.sdp};return this.isSingleMsid()&&(n.sdp=n.sdp.replace(/msid\:-? /g,"msid:")),new Promise((function(r,i){u.default.create({baseURL:"",timeout:5e3,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).post(t.signalingUrl,{version:d.default.protocol_version,sdk_version:d.default.sdk_version,mode:"rtc",push_stream:t.publishUrl,jsep:n}).then((function(e){e&&200===e.status?r(e):i({message:e?"response status:"+e.status:"response is null",sdp:n.sdp})})).catch((function(t){var n;[400,500].includes(null===(n=t.response)||void 0===n?void 0:n.status)&&(t.sdp=e.sdp),i(t)}))}))},t.prototype.checkPublishUrl=function(){if(!this.publishUrl)return!1;if(0!==this.publishUrl.indexOf("artc://"))return!1;var e=window.location.href.indexOf("file://")>-1?"http://":"//";return this.signalingUrl=this.publishUrl.replace("artc://",e),!0},t.prototype.isSingleMsid=function(){if(!this.publishConfig)return!1;var e=this.publishConfig,t=e.vMsid,n=e.aMsid;return!(!t||!t[0]||-1!==t[0].indexOf(" "))||!(!n||!n[0]||-1!==n[0].indexOf(" "))},t.prototype.retryPublish=function(e){return this.hasRetries()&&this.localStream?(this.emit("connectStatusChange",{status:s.EConnectStatus.CONNECT_STATUS_RECONNECTING}),this.pubReconnectTimes++,e.extraInfo=o(o({},e.extraInfo),{retryTimes:this.pubReconnectTimes}),this.publishWithReconnect(this.publishUrl,this.localStream,this.publishConfig).catch((function(e){})),!0):(e.extraInfo=o(o({},e.extraInfo),{retryTimes:this.pubReconnectTimes}),!1)},t.prototype.publishWithReconnect=function(e,t,n,r,i){var a=this;return new Promise((function(c,u){c=r||c,u=i||u,a.isConnecting=!0,a.publish(e,t,n).then((function(e){a.isConnecting=!1,c(e)})).catch((function(r){var i;if(!a.isConnecting)return u(r);if(a.hasRetries(!0)){var d=(null===(i=a.publishConfig)||void 0===i?void 0:i.retryInterval)||s.DEFAULT_RETRY_PUBLISH_INTERVAL;a.reconnectTimerHandle=setTimeout((function(){r.extraInfo=o(o({},r.extraInfo),{retryTimes:a.pubReconnectTimes}),a.emit("reconnect",r),a.publishWithReconnect(e,t,n,c,u)}),d)}else u(r),r.extraInfo=o(o({},r.extraInfo),{retryTimes:a.pubReconnectTimes}),a.isConnecting=!1,a.emit("onError",r)}))}))},t.prototype.hasRetries=function(e){var t,n,r=s.DEFAULT_RETRY_PUBLISH_LIMIT;"number"==typeof(null===(t=this.publishConfig)||void 0===t?void 0:t.retryTimes)&&(r=Math.floor(null===(n=this.publishConfig)||void 0===n?void 0:n.retryTimes));var i=this.pubReconnectTimes<r;return e&&i&&this.pubReconnectTimes++,i},t.prototype.resetRepublishStatus=function(){this.pubReconnectTimes=0,this.isConnecting=!1,this.reporter.updateTid(),null!==this.reconnectTimerHandle&&(clearTimeout(this.reconnectTimerHandle),this.reconnectTimerHandle=null)},t.prototype.handleSubMonitorEvent=function(e){var t=this;e.forEach((function(e){var n={ct:0,tt:4e3,url:e.url},r=e.video,i=e.audio;if(r){var a=r.transportStats,s=r.inboundRtpStats,c=r.inboundRtpStatsPerSec,u=r.localCandidate,d=r.remoteCandidate;n=o(o({},n),{rtt:-1!==(null==a?void 0:a.rtt)?1e3*((null==a?void 0:a.rtt)||0):-1,cand_re_prot:d.protocol,cand_lo_prot:u.protocol,cand_re_addr:"".concat(d.ip||d.address,":").concat(d.port),cand_lo_addr:"".concat(u.ip||u.address,":").concat(u.port),w:null==s?void 0:s.frameWidth,h:null==s?void 0:s.frameHeight,vbps:Math.floor(8*c.bytesReceivedPerSecond),fps:null==s?void 0:s.framesPerSecond,dfps:Math.floor(null==c?void 0:c.framesDecodedPerSecond),vjb:Math.floor((0,h.getJitterBufferDelayAvg)(null==s?void 0:s.jitterBufferDelay,null==s?void 0:s.jitterBufferEmittedCount)),vMsid:e.vMsid})}i&&(a=i.transportStats,s=i.inboundRtpStats,c=i.inboundRtpStatsPerSec,u=i.localCandidate,d=i.remoteCandidate,n=o(o({},n),{rtt:-1!==(null==a?void 0:a.rtt)?1e3*((null==a?void 0:a.rtt)||0):-1,cand_re_prot:d.protocol,cand_lo_prot:u.protocol,cand_re_addr:"".concat(d.ip||d.address,":").concat(d.port),cand_lo_addr:"".concat(u.ip||u.address,":").concat(u.port),abps:Math.floor(8*c.bytesReceivedPerSecond),ajb:Math.floor((0,h.getJitterBufferDelayAvg)(null==s?void 0:s.jitterBufferDelay,s.jitterBufferEmittedCount)),aMsid:e.aMsid})),t.reporter.reportPullStats(n)}))},t}(f.default);t.Publisher=_},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonController=void 0;var c=n(28),u=s(n(2)),d=n(5),l=n(1),p=n(27),f=function(e){function t(t){var n=e.call(this)||this;return n.reporter=t,n}return i(t,e),t.prototype.setPeerconnection=function(e){var t=this;this.peerconnection=e,this.peerconnection.on("datachannelStatusChange",(function(e){t.emit("datachannelStatusChange",e)}))},Object.defineProperty(t.prototype,"peerCore",{get:function(){var e;return null===(e=this.peerconnection)||void 0===e?void 0:e.getPeerCore()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"streamManager",{get:function(){var e;return null===(e=this.peerCore)||void 0===e?void 0:e.getStreamManager()},enumerable:!1,configurable:!0}),t.prototype.subscribeAdd=function(e){var t;return o(this,void 0,void 0,(function(){var n,r,i,o,s,u,f,h=this;return a(this,(function(a){switch(a.label){case 0:if(e.forEach((function(e){var t;null===(t=h.reporter)||void 0===t||t.reportSubscribeStart(e.url,"",e.vMsid,e.aMsid,!0)})),!this.peerconnection)throw this.makeRtsError("subscribeAdd");this.peerconnection.isReused=!0,n=(new Date).getTime(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.peerconnection.subAdd(e)];case 2:if(!(r=a.sent()).streamList)throw new d.RtsError(l.ErrorCode.ERROR_SUBADD_NO_RESULT,"subAdd streamList not found","",{api:"subscribeAdd",configList:e,response:r});return[3,4];case 3:throw i=a.sent(),o=i,null===(t=this.reporter)||void 0===t||t.reportErrorInfo(o.errorCode,o.message,o.traceId,o.extraInfo),o;case 4:return s=r.deleteRspTime-n,u=r.subAddRspTime-r.deleteRspTime,f=r.activeRspTime-r.subAddRspTime,r.streamList.forEach((function(t,r){var i,o,a;null===(i=h.reporter)||void 0===i||i.reportSubscribeOk({vurl:t.url||void 0,isSubAdd:!0});var d,l=e[r]||{},_=l.targetStream,v=l.vMsid,m=l.aMsid,g=t.stream;if(_)return _.mergeStream(g),void(t.stream=_);var E=null===(o=h.streamManager)||void 0===o?void 0:o.getStreamByMsid({url:t.url,vMsid:null==v?void 0:v[0],aMsid:null==m?void 0:m[0]});if(E)E.mergeStream(g),d=E;else{(d=new c.RemoteStream).updateMediaStream(g),null===(a=h.streamManager)||void 0===a||a.update(t.url,{stream:d,vMsid:null==v?void 0:v[0],aMsid:null==m?void 0:m[0]}),d.on("onCanPlay",(function(){var e,r,i=(new Date).getTime();null===(e=h.reporter)||void 0===e||e.reportFirstFrameTime(t.url,t.traceId,-1,-1,i-n,0,-1,{},s,u,f,v,m,!0),null===(r=h.peerconnection)||void 0===r||r.playStart()}));var y=new p.PlayEvent(p.PlayType.PLAY_CANPLAY);y.data={url:t.url,vMsid:(null==v?void 0:v[0])||"vMsid unknown",aMsid:(null==m?void 0:m[0])||"aMsid unknown"},h.emit("onPlayEvent",y)}t.stream=d})),[2,r.streamList]}}))}))},t.prototype.subscribeActive=function(e){var t;return o(this,void 0,void 0,(function(){return a(this,(function(n){if(!this.peerconnection)throw this.makeRtsError("subscribeActive");return[2,null===(t=this.peerconnection)||void 0===t?void 0:t.subActive(e)]}))}))},t.prototype.subscribeStop=function(e){var t;return o(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:if(!this.peerconnection)throw this.makeRtsError("subscribeStop");o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.peerconnection.subStop(e)];case 2:return n=o.sent(),this.peerconnection.getSubMonitor().updateTranceiversController(),[3,4];case 3:throw r=o.sent(),i=r,null===(t=this.reporter)||void 0===t||t.reportErrorInfo(i.errorCode,i.message,i.traceId,i.extraInfo),r;case 4:return[2,n]}}))}))},t.prototype.subscribeDeleteTracks=function(e){var t;return o(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:if(!this.peerconnection)throw this.makeRtsError("subscribeDeleteTracks");o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.peerconnection.subDeleteTracks(e)];case 2:if(!(n=o.sent()))throw this.makeRtsError("subscribeDeleteTracks");return this.peerconnection.getSubMonitor().updateTranceiversController(),[3,4];case 3:throw r=o.sent(),i=r,null===(t=this.reporter)||void 0===t||t.reportErrorInfo(i.errorCode,i.message,i.traceId,i.extraInfo),r;case 4:return[2,n]}}))}))},t.prototype.publishAdd=function(e){var t,n,r,i;return o(this,void 0,void 0,(function(){var o,s,c,u,p,f,h,_=this;return a(this,(function(a){switch(a.label){case 0:if(e.forEach((function(e){var t;null===(t=_.reporter)||void 0===t||t.reportStartPublish(e.url,"",!0)})),o=(new Date).getTime(),!this.peerconnection)throw this.makeRtsError("publishAdd");a.label=1;case 1:return a.trys.push([1,3,,4]),[4,null===(t=this.peerconnection)||void 0===t?void 0:t.pubAdd(e)];case 2:if(!(s=a.sent()))throw new d.RtsError(l.ErrorCode.ERROR_PUBADD_NO_RESULT,"pubAdd streamList not found","",{api:"publishAdd",publishInfoList:e});return[3,4];case 3:throw c=a.sent(),u=c,null===(n=this.reporter)||void 0===n||n.reportErrorInfo(u.errorCode,u.message,u.traceId,u.extraInfo),u;case 4:return this.peerconnection.isReused=!0,p=(new Date).getTime(),f=p-o,s.forEach((function(e){var t;null===(t=_.reporter)||void 0===t||t.reportPublishOk(e.url||"","",-1,-1,-1,e.traceId||"",f,!0)})),(h=null===(r=this.peerconnection)||void 0===r?void 0:r.getPc())&&(e.forEach((function(e){_.peerconnection&&e.stream.setEncodeParam(h)})),this.peerCore&&(null===(i=this.peerconnection)||void 0===i||i.getPubMonitor().startHeartbeat(h,this.peerCore))),[2,s]}}))}))},t.prototype.publishDeleteTracks=function(e){var t;return o(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:if(!this.peerconnection)throw this.makeRtsError("publishDeleteTracks");o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.peerconnection.pubDeleteTracks(e)];case 2:if(!(n=o.sent()))throw this.makeRtsError("publishDeleteTracks");return this.peerconnection.getPubMonitor().updateSenders(),[3,4];case 3:throw r=o.sent(),i=r,null===(t=this.reporter)||void 0===t||t.reportErrorInfo(i.errorCode,i.message,i.traceId,i.extraInfo),r;case 4:return[2,n]}}))}))},t.prototype.publishReplaceTracks=function(e){var t;return o(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:if(!this.peerconnection)throw this.makeRtsError("publishReplaceTracks");o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.peerconnection.pubReplaceTracks(e)];case 2:if(!(n=o.sent()))throw this.makeRtsError("publishReplaceTracks");return this.peerconnection.getPubMonitor().updateSenders(),[3,4];case 3:throw r=o.sent(),i=r,null===(t=this.reporter)||void 0===t||t.reportErrorInfo(i.errorCode,i.message,i.traceId,i.extraInfo),r;case 4:return[2,n]}}))}))},t.prototype.publishStop=function(e){var t;return o(this,void 0,void 0,(function(){var n,r,i,o=this;return a(this,(function(a){switch(a.label){case 0:if(e.forEach((function(e){var t;null===(t=o.reporter)||void 0===t||t.reportStopPublish(e.url,!0)})),!this.peerconnection)throw this.makeRtsError("publishStop");a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.peerconnection.pubStop(e)];case 2:return n=a.sent(),this.peerconnection.getPubMonitor().updateSenders(),[3,4];case 3:throw r=a.sent(),i=r,null===(t=this.reporter)||void 0===t||t.reportErrorInfo(i.errorCode,i.message,i.traceId,i.extraInfo),r;case 4:return[2,n]}}))}))},t.prototype.getSubscribeVideoStats=function(e,t){return this.getSubscribeMediaStats(e,"video",t)},t.prototype.getSubscribeAudioStats=function(e,t){return this.getSubscribeMediaStats(e,"audio",t)},t.prototype.getPublishVideoStats=function(e,t){return this.getPublishMediaStats(e,"video",t)},t.prototype.getPublishAudioStats=function(e,t){return this.getPublishMediaStats(e,"audio",t)},t.prototype.getSubscribeMediaStats=function(e,t,n){var r=this;return new Promise((function(i){return o(r,void 0,void 0,(function(){var r,o,s,c;return a(this,(function(a){switch(a.label){case 0:return this.streamManager?(r=void 0,o=this.streamManager.getAllMediaInfoList(e,!0),n?o.forEach((function(e){var i,o,a,s=null===(o=null===(i=e.transceiver)||void 0===i?void 0:i.receiver)||void 0===o?void 0:o.track;(null==s?void 0:s.kind)===t&&e.msid===n&&(r=null===(a=e.transceiver)||void 0===a?void 0:a.receiver)})):r=null===(c=null===(s=null==o?void 0:o.find((function(e){var n,r,i;return(null===(i=null===(r=null===(n=e.transceiver)||void 0===n?void 0:n.receiver)||void 0===r?void 0:r.track)||void 0===i?void 0:i.kind)===t})))||void 0===s?void 0:s.transceiver)||void 0===c?void 0:c.receiver,r?[4,r.getStats()]:[2,i({})]):[2,i({})];case 1:return a.sent().forEach((function(e){"inbound-rtp"===e.type&&i(e)})),[2]}}))}))}))},t.prototype.getPublishMediaStats=function(e,t,n){var r=this;return new Promise((function(i){return o(r,void 0,void 0,(function(){var r,o,s,c;return a(this,(function(a){switch(a.label){case 0:return this.streamManager?(r=void 0,o=this.streamManager.getAllMediaInfoList(e,!0),n?o.forEach((function(e){var i,o,a,s=null===(o=null===(i=e.transceiver)||void 0===i?void 0:i.sender)||void 0===o?void 0:o.track;(null==s?void 0:s.kind)===t&&e.msid===n&&(r=null===(a=e.transceiver)||void 0===a?void 0:a.sender)})):r=null===(c=null===(s=null==o?void 0:o.find((function(e){var n,r,i;return(null===(i=null===(r=null===(n=e.transceiver)||void 0===n?void 0:n.sender)||void 0===r?void 0:r.track)||void 0===i?void 0:i.kind)===t})))||void 0===s?void 0:s.transceiver)||void 0===c?void 0:c.sender,r?[4,r.getStats()]:[2,i({})]):[2,i({})];case 1:return a.sent().forEach((function(e){"outbound-rtp"===e.type&&i(e)})),[2]}}))}))}))},t.prototype.makeRtsError=function(e){var t,n=new d.RtsError(l.ErrorCode.ERROR_NO_DATACHANNEL,"No avaliable datachannel, you should subscribe/publish first.","",{api:e});return null===(t=this.reporter)||void 0===t||t.reportErrorInfo(n.errorCode,n.message,n.traceId,n.extraInfo),n},t}(u.default);t.CommonController=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"shimGetUserMedia",(function(){return b})),n.d(r,"shimGetDisplayMedia",(function(){return S})),n.d(r,"shimMediaStream",(function(){return T})),n.d(r,"shimOnTrack",(function(){return w})),n.d(r,"shimGetSendersWithDtmf",(function(){return R})),n.d(r,"shimGetStats",(function(){return C})),n.d(r,"shimSenderReceiverGetStats",(function(){return O})),n.d(r,"shimAddTrackRemoveTrackWithNative",(function(){return A})),n.d(r,"shimAddTrackRemoveTrack",(function(){return I})),n.d(r,"shimPeerConnection",(function(){return k})),n.d(r,"fixNegotiationNeeded",(function(){return N}));var i={};n.r(i),n.d(i,"shimGetUserMedia",(function(){return x})),n.d(i,"shimGetDisplayMedia",(function(){return L})),n.d(i,"shimPeerConnection",(function(){return M})),n.d(i,"shimReplaceTrack",(function(){return U}));var o={};n.r(o),n.d(o,"shimGetUserMedia",(function(){return j})),n.d(o,"shimGetDisplayMedia",(function(){return V})),n.d(o,"shimOnTrack",(function(){return B})),n.d(o,"shimPeerConnection",(function(){return F})),n.d(o,"shimSenderGetStats",(function(){return W})),n.d(o,"shimReceiverGetStats",(function(){return G})),n.d(o,"shimRemoveStream",(function(){return H})),n.d(o,"shimRTCDataChannel",(function(){return z})),n.d(o,"shimAddTransceiver",(function(){return K})),n.d(o,"shimGetParameters",(function(){return Y})),n.d(o,"shimCreateOffer",(function(){return q})),n.d(o,"shimCreateAnswer",(function(){return J}));var a={};n.r(a),n.d(a,"shimLocalStreamsAPI",(function(){return X})),n.d(a,"shimRemoteStreamsAPI",(function(){return Q})),n.d(a,"shimCallbacksAPI",(function(){return Z})),n.d(a,"shimGetUserMedia",(function(){return $})),n.d(a,"shimConstraints",(function(){return ee})),n.d(a,"shimRTCIceServerUrls",(function(){return te})),n.d(a,"shimTrackEventTransceiver",(function(){return ne})),n.d(a,"shimCreateOfferLegacy",(function(){return re})),n.d(a,"shimAudioContext",(function(){return ie}));var s={};n.r(s),n.d(s,"shimRTCIceCandidate",(function(){return se})),n.d(s,"shimMaxMessageSize",(function(){return ce})),n.d(s,"shimSendThrowTypeError",(function(){return ue})),n.d(s,"shimConnectionState",(function(){return de})),n.d(s,"removeAllowExtmapMixed",(function(){return le}));var c=!0,u=!0;function d(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function l(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function p(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(c=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function f(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(u=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function h(){if("object"==typeof window){if(c)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function _(e,t){u&&console.warn(e+" is deprecated, please use "+t+" instead.")}function v(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=d(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=d(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=d(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=d(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function m(e){return"[object Object]"===Object.prototype.toString.call(e)}function g(e){return m(e)?Object.keys(e).reduce((function(t,n){var r,i=m(e[n]),o=i?g(e[n]):e[n],a=i&&!Object.keys(o).length;return void 0===o||a?t:Object.assign(t,((r={})[n]=o,r))}),{}):e}function E(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach((function(i){i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach((function(n){e(t,t.get(n),r)}))})))}(e,n,i)}))})),i}var y=h;function b(e){var t=e&&e.navigator;if(t.mediaDevices){var n=v(e),r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(n.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){var a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});var s,c=n.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||c)&&(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?s=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(s=["front"]),s))return t.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),y("chrome: "+JSON.stringify(e)),i(e)}));e.video=r(e.video)}return y("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,r){i(e,(function(e){t.webkitGetUserMedia(e,n,(function(e){r&&r(o(e))}))}))}.bind(t),t.mediaDevices.getUserMedia){var a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return a(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(o(e))}))}))}}}}function S(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function T(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function w(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)l(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}));else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function R(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function C(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=arguments[0],r=arguments[1],i=arguments[2];if(arguments.length>0&&"function"==typeof n)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof n))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var s=function(e){r(a(o(e)))};return t.apply(this,[s,n])}return new Promise((function(n,r){t.apply(e,[function(e){n(a(o(e)))},r])})).then(r,i)}}}function O(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return E(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),l(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return E(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach((function(e){e.track===o&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===o&&(n?r=!0:n=e),e.track===o})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function A(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function I(e){if(e.RTCPeerConnection){var t=v(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return A(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=this.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var a=this._streams[n.id];if(a)a.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n,r=e.RTCPeerConnection.prototype[t],i=((n={})[t]=function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then((function(t){return s(e,t)}))},n);e.RTCPeerConnection.prototype[t]=i[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=c(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function k(e){var t=v(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var n=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n,r=e.RTCPeerConnection.prototype[t],i=((n={})[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)},n);e.RTCPeerConnection.prototype[t]=i[t]}));var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return n||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function N(e){var t=v(e);l(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var P=n(29),D=n.n(P);function x(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}function L(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function M(e){var t=v(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=D()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&_("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof t;return r&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))}(e.iceServers,t.version),h("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function U(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function j(e){var t=v(e),n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){_("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var a=r.prototype.getSettings;r.prototype.getSettings=function(){var e=a.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function V(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function B(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function F(e){var t=v(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n,r=e.RTCPeerConnection.prototype[t],i=((n={})[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)},n);e.RTCPeerConnection.prototype[t]=i[t]})),t.version<68){var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=arguments[0],n=arguments[1],o=arguments[2];return i.apply(this,[e||null]).then((function(e){if(t.version<53&&!n)try{e.forEach((function(e){e.type=r[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,n){e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(n,o)}}}function W(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function G(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),l(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function H(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;_("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function z(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function K(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();"encodings"in o&&(1!==o.encodings.length||0!==Object.keys(o.encodings[0]).length)||(o.encodings=e.sendEncodings,i.sendEncodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function Y(e){if("object"==typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function q(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function J(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function X(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function Q(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function Z(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}}function $(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(ee(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function ee(e){return e&&void 0!==e.video?Object.assign({},e,{video:g(e.video)}):e}function te(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(_("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function ne(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function re(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function ie(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var oe=n(4),ae=n.n(oe);function se(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=ae.a.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,l(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function ce(e){if(e.RTCPeerConnection){var t=v(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=ae.a.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=ae.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=ae.a.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),s=e.sdpSemantics;"plan-b"===s&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var c,u=r(arguments[0]),d=i(u),l=o(arguments[0],u);c=0===d&&0===l?Number.POSITIVE_INFINITY:0===d||0===l?Math.max(d,l):Math.min(d,l);var p={};Object.defineProperty(p,"maxMessageSize",{get:function(){return c}}),this._sctp=p}return a.apply(this,arguments)}}}function ue(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},l(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function de(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function le(e){if(e.RTCPeerConnection){var t=v(e);if(!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),n.apply(this,arguments)}}}}var pe=function(e,t){var n=(void 0===e?{}:e).window;void 0===t&&(t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0});var c=h,u=v(n),l={browserDetails:u,commonShim:s,extractVersion:d,disableLog:p,disableWarnings:f};switch(u.browser){case"chrome":if(!r||!k||!t.shimChrome)return c("Chrome shim is not included in this adapter release."),l;if(null===u.version)return c("Chrome shim can not determine version, not shimming."),l;c("adapter.js shimming chrome."),l.browserShim=r,b(n),T(n),k(n),w(n),I(n),R(n),C(n),O(n),N(n),se(n),de(n),ce(n),ue(n),le(n);break;case"firefox":if(!o||!F||!t.shimFirefox)return c("Firefox shim is not included in this adapter release."),l;c("adapter.js shimming firefox."),l.browserShim=o,j(n),F(n),B(n),H(n),W(n),G(n),z(n),K(n),Y(n),q(n),J(n),se(n),de(n),ce(n),ue(n);break;case"edge":if(!i||!M||!t.shimEdge)return c("MS edge shim is not included in this adapter release."),l;c("adapter.js shimming edge."),l.browserShim=i,x(n),L(n),M(n),U(n),ce(n),ue(n);break;case"safari":if(!a||!t.shimSafari)return c("Safari shim is not included in this adapter release."),l;c("adapter.js shimming safari."),l.browserShim=a,te(n),re(n),Z(n),X(n),Q(n),ne(n),$(n),ie(n),se(n),ce(n),ue(n),le(n);break;default:c("Unsupported browser!")}return l}({window:"undefined"==typeof window?void 0:window});t.default=pe},function(e,t,n){"use strict";function i(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!0,configurable:!0,value:n})}n.r(t),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Array(32),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var o=function(){function e(e){var t,n,r=this;this.timer=null,this.time=10,this.count=10,this.arr=[],this.time=null!=(t=e.time)?t:10,this.count=null!=(n=e.count)?n:10,e.host.startsWith("http://")||e.host.startsWith("https://")?this.url=e.host+"/logstores/"+e.logstore+"/track":this.url="https://"+e.project+"."+e.host+"/logstores/"+e.logstore+"/track",this.opt=e,e.installUnloadHook&&"function"==typeof e.installUnloadHook&&e.installUnloadHook((function(){r.sendImmediateInner()}))}var t=e.prototype;return t.assemblePayload=function(e){void 0===e&&(e=this.arr);var t={__logs__:e};return this.opt.tags&&(t.__tags__=this.opt.tags),this.opt.topic&&(t.__topic__=this.opt.topic),this.opt.source&&(t.__source__=this.opt.source),JSON.stringify(t)},t.platformSend=function(){if(this.opt.sendPayload&&"function"==typeof this.opt.sendPayload){var e=this.assemblePayload();this.opt.sendPayload(this.url,e)}},t.transString=function(e){var t={};for(var n in e)"object"==typeof e[n]?t[n]=JSON.stringify(e[n]):t[n]=String(e[n]);return t},t.sendImmediateInner=function(){this.arr&&this.arr.length>0&&(this.platformSend(),null!=this.timer&&(clearTimeout(this.timer),this.timer=null),this.arr=[])},t.sendInner=function(){if(this.timer)this.arr.length>=this.count&&(clearTimeout(this.timer),this.timer=null,this.sendImmediateInner());else{var e=this;this.arr.length>=this.count||this.time<=0?this.sendImmediateInner():this.timer=setTimeout((function(){e.sendImmediateInner()}),1e3*this.time)}},t.send=function(e){var t=this.transString(e);this.arr.push(t),this.sendInner()},t.sendImmediate=function(e){var t=this.transString(e);this.arr.push(t),this.sendImmediateInner()},t.sendBatchLogs=function(e){var t,n=this,r=e.map((function(e){return n.transString(e)}));(t=this.arr).push.apply(t,r),this.sendInner()},t.sendBatchLogsImmediate=function(e){var t,n=this,r=e.map((function(e){return n.transString(e)}));(t=this.arr).push.apply(t,r),this.sendImmediateInner()},e}();function a(e,t){var n=new window.XMLHttpRequest;n.open("POST",e+"?APIVersion=0.6.0",!0),n.send(t)}n.d(t,"default",(function(){return s}));var s=function(e){var t,n;function i(t){return e.call(this,Object.assign({},t,{installUnloadHook:function(e){window.addEventListener("beforeunload",(function(){e()}))},sendPayload:function(e,t){!function(e,t){try{if(t.length>=32768)return void a(e,t);(function(e,t){return!(!navigator||!navigator.sendBeacon)&&navigator.sendBeacon(e+"?APIVersion=0.6.0",t)})(e,t)||a(e,t)}catch(t){window&&window.console&&"function"==typeof window.console.error&&(console.error("Failed to log to ali log service because of this exception:\n"+t),console.error("Failed log data:",e))}}(e,t)}}))||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),i}(o);i(window,"SLS_Tracker",s)}])},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")(),d=Object.prototype.toString,l=Math.max,p=Math.min,f=function(){return u.Date.now()};function h(e,t,n){var r,i,o,a,s,c,u=0,d=!1,h=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function E(e){return u=e,s=setTimeout(b,t),d?g(e):a}function y(e){var n=e-c;return void 0===c||n>=t||n<0||h&&e-u>=o}function b(){var e=f();if(y(e))return S(e);s=setTimeout(b,function(e){var n=t-(e-c);return h?p(n,o-(e-u)):n}(e))}function S(e){return s=void 0,m&&r?g(e):(r=i=void 0,a)}function T(){var e=f(),n=y(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return E(c);if(h)return s=setTimeout(b,t),g(c)}return void 0===s&&(s=setTimeout(b,t)),a}return t=v(t)||0,_(n)&&(d=!!n.leading,o=(h="maxWait"in n)?l(v(n.maxWait)||0,t):o,m="trailing"in n?!!n.trailing:m),T.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=i=s=void 0},T.flush=function(){return void 0===s?a:S(f())},T}function _(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return _(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),h(e,t,{leading:r,maxWait:t,trailing:i})}}).call(this,n(15))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return l.default}});var r=p(n(153)),i=p(n(155)),o=p(n(157)),a=p(n(158)),s=p(n(160)),c=p(n(161)),u=p(n(30)),d=p(n(29)),l=p(n(61));function p(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(163),t),i(n(65),t),i(n(64),t),i(n(69),t),i(n(66),t),i(n(68),t),i(n(70),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(167),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(178),t),i(n(47),t),i(n(71),t),i(n(78),t),i(n(76),t),i(n(77),t)},,,function(e,t,n){n(38),e.exports=n(216)},function(e,t){"undefined"==typeof window&&(window={ctrl:{},lib:{}}),!window.ctrl&&(window.ctrl={}),!window.lib&&(window.lib={}),function(e,t){function n(){var e={},t=new p((function(t,n){e.resolve=t,e.reject=n}));return e.promise=t,e}function r(e,t){for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}function i(e){(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document).appendChild(e)}function o(){if(window.etSign)window.__etReady=!0;else{window.etReady=function(){window.__etReady=!0};var e=document.createElement("script");e.id="aplus-sufei",e.src="//g.alicdn.com/secdev/entry/index.js",i(e)}}function a(e){var t=[];for(var n in e)e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function s(e){return"[object Object]"=={}.toString.call(e)}function c(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}function u(e,t,n){var r=new Date;r.setTime(r.getTime()-864e5);document.cookie=e+"=;path=/;domain=."+t+";expires="+r.toGMTString(),document.cookie=e+"=;path=/;domain=."+n+"."+t+";expires="+r.toGMTString()}function d(e,t){for(var n=e.split("."),r=t.split("."),i=0;3>i;i++){var o=Number(n[i]),a=Number(r[i]);if(o>a)return 1;if(a>o)return-1;if(!isNaN(o)&&isNaN(a))return 1;if(isNaN(o)&&!isNaN(a))return-1}return 0}function l(e){this.id=""+(new Date).getTime()+ ++E,this.params=r(e||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==typeof this.params.data&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=_.slice(0)}var p=e.Promise,f=(p||{resolve:function(){}}).resolve();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var h={useJsonpResultType:!1,safariGoLogin:!0,useAlipayJSBridge:!1},_=[],v={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};(function(){var t=e.location.hostname;if(!t){var n=e.parent.location.hostname;n&&~n.indexOf("zebra.alibaba-inc.com")&&(t=n)}var r=new RegExp("([^.]*?)\\.?((?:"+["taobao.net","taobao.com","tmall.com","tmall.hk","alibaba-inc.com"].join(")|(?:").replace(/\./g,"\\.")+"))","i"),i=t.match(r)||[],o=i[2]||"taobao.com",a=i[1]||"m";"taobao.net"!==o||"x"!==a&&"waptest"!==a&&"daily"!==a?"taobao.net"===o&&"demo"===a?a="demo":"alibaba-inc.com"===o&&"zebra"===a?a="zebra":"waptest"!==a&&"wapa"!==a&&"m"!==a&&(a="m"):a="waptest";var s="h5api";"taobao.net"===o&&"waptest"===a&&(s="acs"),h.mainDomain=o,h.subDomain=a,h.prefix=s})(),function(){var t=e.navigator.userAgent,n=t.match(/WindVane[\/\s]([\d\.\_]+)/);n&&(h.WindVaneVersion=n[1]);var r=t.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);r&&(h.AliAppName=r[1],h.AliAppVersion=r[2]);var i=t.match(/AMapClient\/([\d\.\_]+)/i);i&&(h.AliAppName="AMAP",h.AliAppVersion=i[1])}();var m=/[Android|Adr]/.test(e.navigator.userAgent),g="AP"===h.AliAppName&&d(h.AliAppVersion,"10.1.2")>=0||"KB"===h.AliAppName&&d(h.AliAppVersion,"7.1.62")>=0||m&&"AMAP"===h.AliAppName&&d(h.AliAppVersion,"1.0.1")>=0,E=0;l.prototype.use=function(e){if(!e)throw new Error("middleware is undefined");return this.middlewares.push(e),this},l.prototype.__processRequestMethod=function(e){var t=this.params,n=this.options;"get"===t.type&&"jsonp"===t.dataType?n.getJSONP=!0:"get"===t.type&&"originaljsonp"===t.dataType?n.getOriginalJSONP=!0:"get"===t.type&&"json"===t.dataType?n.getJSON=!0:"post"===t.type&&(n.postJSON=!0),e()},l.prototype.__processRequestType=function(n){var r=this,i=this.params,o=this.options;if(!0===h.H5Request&&(o.H5Request=!0),!0===h.WindVaneRequest&&(o.WindVaneRequest=!0),!1===o.H5Request&&!0===o.WindVaneRequest){if(!g&&(!t.windvane||parseFloat(o.WindVaneVersion)<5.4))throw new Error("WINDVANE_NOT_FOUND::\u7f3a\u5c11WindVane\u73af\u5883");if(g&&!e.AlipayJSBridge)throw new Error("ALIPAY_NOT_READY::\u652f\u4ed8\u5b9d\u901a\u9053\u672a\u51c6\u5907\u597d\uff0c\u652f\u4ed8\u5b9d\u8bf7\u89c1 https://lark.alipay.com/mtbsdkdocs/mtopjssdkdocs/pucq6z")}else if(!0===o.H5Request)o.WindVaneRequest=!1;else if(void 0===o.WindVaneRequest&&void 0===o.H5Request){if(t.windvane&&parseFloat(o.WindVaneVersion)>=5.4?o.WindVaneRequest=!0:o.H5Request=!0,g){if(o.WindVaneRequest=o.H5Request=void 0,e.AlipayJSBridge)if(s(i.data))o.WindVaneRequest=!0;else try{s(JSON.parse(i.data))?o.WindVaneRequest=!0:o.H5Request=!0}catch(e){o.H5Request=!0}else o.H5Request=!0;"AMAP"!==h.AliAppName||i.useNebulaJSbridgeWithAMAP||(o.WindVaneRequest=o.H5Request=void 0,o.H5Request=!0)}window.self!==window.top&&(o.H5Request=!0)}var a=e.navigator.userAgent.toLowerCase();return a.indexOf("youku")>-1&&o.mainDomain.indexOf("youku.com")<0&&(o.WindVaneRequest=!1,o.H5Request=!0),o.mainDomain.indexOf("youku.com")>-1&&a.indexOf("youku")<0&&(o.WindVaneRequest=!1,o.H5Request=!0),n?n().then((function(){var e=o.retJson.ret;if(e instanceof Array&&(e=e.join(",")),!0===o.WindVaneRequest&&g&&o.retJson.error||!e||e.indexOf("PARAM_PARSE_ERROR")>-1||e.indexOf("HY_FAILED")>-1||e.indexOf("HY_NO_HANDLER")>-1||e.indexOf("HY_CLOSED")>-1||e.indexOf("HY_EXCEPTION")>-1||e.indexOf("HY_NO_PERMISSION")>-1){if(!g||!isNaN(o.retJson.error)||-1!==o.retJson.error.indexOf("FAIL_SYS_ACCESS_DENIED"))return g&&s(i.data)&&(i.data=JSON.stringify(i.data)),h.H5Request=!0,r.__sequence([r.__processRequestType,r.__processToken,r.__processRequestUrl,r.middlewares,r.__processRequest]);void 0===o.retJson.api&&void 0===o.retJson.v&&(o.retJson.api=i.api,o.retJson.v=i.v,o.retJson.ret=[o.retJson.error+"::"+o.retJson.errorMessage],o.retJson.data={})}})):void 0};var y="_m_h5_c",b="_m_h5_tk";l.prototype.__getTokenFromAlipay=function(){var t=n(),r=this.options,i=(e.navigator.userAgent,!!location.protocol.match(/^https?\:$/));return!0===r.useAlipayJSBridge&&!i&&g&&e.AlipayJSBridge&&e.AlipayJSBridge.call?e.AlipayJSBridge.call("getMtopToken",(function(e){e&&e.token&&(r.token=e.token),t.resolve()}),(function(){t.resolve()})):t.resolve(),t.promise},l.prototype.__getTokenFromCookie=function(){var e=this.options;return e.CDR&&c(y)?e.token=c(y).split(";")[0]:e.token=e.token||c(b),e.token&&(e.token=e.token.split("_")[0]),p.resolve()},l.prototype.__waitWKWebViewCookie=function(t){var n=this.options;n.waitWKWebViewCookieFn&&n.H5Request&&e.webkit&&e.webkit.messageHandlers?n.waitWKWebViewCookieFn(t):t()},l.prototype.__processToken=function(e){var t=this,n=this.options;return this.params,n.token&&delete n.token,!0!==n.WindVaneRequest?f.then((function(){return t.__getTokenFromAlipay()})).then((function(){return t.__getTokenFromCookie()})).then(e).then((function(){var e=n.retJson,r=e.ret;if(r instanceof Array&&(r=r.join(",")),r.indexOf("TOKEN_EMPTY")>-1||(!0===n.CDR||!0===n.syncCookieMode)&&r.indexOf("ILLEGAL_ACCESS")>-1||r.indexOf("TOKEN_EXOIRED")>-1){if(n.maxRetryTimes=n.maxRetryTimes||5,n.failTimes=n.failTimes||0,n.H5Request&&++n.failTimes<n.maxRetryTimes){var i=[t.__waitWKWebViewCookie,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest];if(!0===n.syncCookieMode&&t.constructor.__cookieProcessorId!==t.id)if(t.constructor.__cookieProcessor){i=[function(e){var n=function(){t.constructor.__cookieProcessor=null,t.constructor.__cookieProcessorId=null,e()};t.constructor.__cookieProcessor?t.constructor.__cookieProcessor.then(n).catch(n):e()},t.__waitWKWebViewCookie,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest]}else t.constructor.__cookieProcessor=t.__requestProcessor,t.constructor.__cookieProcessorId=t.id;return t.__sequence(i)}n.maxRetryTimes>0&&(u(y,n.pageDomain,"*"),u(b,n.mainDomain,n.subDomain),u("_m_h5_tk_enc",n.mainDomain,n.subDomain)),e.retType=v.TOKEN_EXPIRED}})):void e()},l.prototype.__processRequestUrl=function(t){var n=this.params,r=this.options;if(r.hostSetting&&r.hostSetting[e.location.hostname]){var i=r.hostSetting[e.location.hostname];i.prefix&&(r.prefix=i.prefix),i.subDomain&&(r.subDomain=i.subDomain),i.mainDomain&&(r.mainDomain=i.mainDomain)}if(!0===r.H5Request){var a="//"+(r.prefix?r.prefix+".":"")+(r.subDomain?r.subDomain+".":"")+r.mainDomain+"/h5/"+n.api.toLowerCase()+"/"+n.v.toLowerCase()+"/",s=n.appKey||("waptest"===r.subDomain?"4272":"12574478"),c=(new Date).getTime(),u=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,i,o,a;return i=2147483648&e,o=2147483648&t,a=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^a^i^o:n|r?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o}function r(e,r,i,o,a,s,c){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(r,i,o),a),c)),n(t(e,s),r)}function i(e,r,i,o,a,s,c){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(r,i,o),a),c)),n(t(e,s),r)}function o(e,r,i,o,a,s,c){return e=n(e,n(n(function(e,t,n){return e^t^n}(r,i,o),a),c)),n(t(e,s),r)}function a(e,r,i,o,a,s,c){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(r,i,o),a),c)),n(t(e,s),r)}function s(e){var t,n="",r="";for(t=0;3>=t;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n}var c,u,d,l,p,f,h,_,v,m;for(m=function(e){for(var t,n=e.length,r=n+8,i=16*((r-r%64)/64+1),o=new Array(i-1),a=0,s=0;n>s;)a=s%4*8,o[t=(s-s%4)/4]=o[t]|e.charCodeAt(s)<<a,s++;return a=s%4*8,o[t=(s-s%4)/4]=o[t]|128<<a,o[i-2]=n<<3,o[i-1]=n>>>29,o}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e)),f=1732584193,h=4023233417,_=2562383102,v=271733878,c=0;c<m.length;c+=16)u=f,d=h,l=_,p=v,f=r(f,h,_,v,m[c+0],7,3614090360),v=r(v,f,h,_,m[c+1],12,3905402710),_=r(_,v,f,h,m[c+2],17,606105819),h=r(h,_,v,f,m[c+3],22,3250441966),f=r(f,h,_,v,m[c+4],7,4118548399),v=r(v,f,h,_,m[c+5],12,1200080426),_=r(_,v,f,h,m[c+6],17,2821735955),h=r(h,_,v,f,m[c+7],22,4249261313),f=r(f,h,_,v,m[c+8],7,1770035416),v=r(v,f,h,_,m[c+9],12,2336552879),_=r(_,v,f,h,m[c+10],17,4294925233),h=r(h,_,v,f,m[c+11],22,2304563134),f=r(f,h,_,v,m[c+12],7,1804603682),v=r(v,f,h,_,m[c+13],12,4254626195),_=r(_,v,f,h,m[c+14],17,2792965006),f=i(f,h=r(h,_,v,f,m[c+15],22,1236535329),_,v,m[c+1],5,4129170786),v=i(v,f,h,_,m[c+6],9,3225465664),_=i(_,v,f,h,m[c+11],14,643717713),h=i(h,_,v,f,m[c+0],20,3921069994),f=i(f,h,_,v,m[c+5],5,3593408605),v=i(v,f,h,_,m[c+10],9,38016083),_=i(_,v,f,h,m[c+15],14,3634488961),h=i(h,_,v,f,m[c+4],20,3889429448),f=i(f,h,_,v,m[c+9],5,568446438),v=i(v,f,h,_,m[c+14],9,3275163606),_=i(_,v,f,h,m[c+3],14,4107603335),h=i(h,_,v,f,m[c+8],20,1163531501),f=i(f,h,_,v,m[c+13],5,2850285829),v=i(v,f,h,_,m[c+2],9,4243563512),_=i(_,v,f,h,m[c+7],14,1735328473),f=o(f,h=i(h,_,v,f,m[c+12],20,2368359562),_,v,m[c+5],4,4294588738),v=o(v,f,h,_,m[c+8],11,2272392833),_=o(_,v,f,h,m[c+11],16,1839030562),h=o(h,_,v,f,m[c+14],23,4259657740),f=o(f,h,_,v,m[c+1],4,2763975236),v=o(v,f,h,_,m[c+4],11,1272893353),_=o(_,v,f,h,m[c+7],16,4139469664),h=o(h,_,v,f,m[c+10],23,3200236656),f=o(f,h,_,v,m[c+13],4,681279174),v=o(v,f,h,_,m[c+0],11,3936430074),_=o(_,v,f,h,m[c+3],16,3572445317),h=o(h,_,v,f,m[c+6],23,76029189),f=o(f,h,_,v,m[c+9],4,3654602809),v=o(v,f,h,_,m[c+12],11,3873151461),_=o(_,v,f,h,m[c+15],16,530742520),f=a(f,h=o(h,_,v,f,m[c+2],23,3299628645),_,v,m[c+0],6,4096336452),v=a(v,f,h,_,m[c+7],10,1126891415),_=a(_,v,f,h,m[c+14],15,2878612391),h=a(h,_,v,f,m[c+5],21,4237533241),f=a(f,h,_,v,m[c+12],6,1700485571),v=a(v,f,h,_,m[c+3],10,2399980690),_=a(_,v,f,h,m[c+10],15,4293915773),h=a(h,_,v,f,m[c+1],21,2240044497),f=a(f,h,_,v,m[c+8],6,1873313359),v=a(v,f,h,_,m[c+15],10,4264355552),_=a(_,v,f,h,m[c+6],15,2734768916),h=a(h,_,v,f,m[c+13],21,1309151649),f=a(f,h,_,v,m[c+4],6,4149444226),v=a(v,f,h,_,m[c+11],10,3174756917),_=a(_,v,f,h,m[c+2],15,718787259),h=a(h,_,v,f,m[c+9],21,3951481745),f=n(f,u),h=n(h,d),_=n(_,l),v=n(v,p);return(s(f)+s(h)+s(_)+s(v)).toLowerCase()}(r.token+"&"+c+"&"+s+"&"+n.data),d={jsv:"2.7.2",appKey:s,t:c,sign:u},l={data:n.data,ua:n.ua};Object.keys(n).forEach((function(e){void 0===d[e]&&void 0===l[e]&&"headers"!==e&&"ext_headers"!==e&&"ext_querys"!==e&&(d[e]=n[e])})),n.ext_querys&&Object.keys(n.ext_querys).forEach((function(e){d[e]=n.ext_querys[e]})),r.getJSONP?d.type="jsonp":r.getOriginalJSONP?d.type="originaljsonp":(r.getJSON||r.postJSON)&&(d.type="originaljson"),void 0!==n.valueType&&("original"===n.valueType?r.getJSONP||r.getOriginalJSONP?d.type="originaljsonp":(r.getJSON||r.postJSON)&&(d.type="originaljson"):"string"===n.valueType&&(r.getJSONP||r.getOriginalJSONP?d.type="jsonp":(r.getJSON||r.postJSON)&&(d.type="json"))),!0===r.useJsonpResultType&&"originaljson"===d.type&&delete d.type,r.dangerouslySetProtocol&&(a=r.dangerouslySetProtocol+":"+a),"5.0"===n.SV&&(a+="5.0/",o()),r.querystring=d,r.postdata=l,r.path=a}t()},l.prototype.__processUnitPrefix=function(e){e()};var S=0;l.prototype.__requestJSONP=function(e){function t(e){if(d&&clearTimeout(d),l.parentNode&&l.parentNode.removeChild(l),"TIMEOUT"===e)window[u]=function(){window[u]=void 0;try{delete window[u]}catch(e){}};else{window[u]=void 0;try{delete window[u]}catch(e){}}}var r=n(),o=this.params,s=this.options,c=o.timeout||2e4,u="mtopjsonp"+(o.jsonpIncPrefix||"")+ ++S,d=setTimeout((function(){e(s.timeoutErrMsg||"TIMEOUT::\u63a5\u53e3\u8d85\u65f6"),t("TIMEOUT")}),c);s.querystring.callback=u;var l=document.createElement("script"),p=s.path+"?"+a(s.querystring)+"&"+a(s.postdata);return"5.0"===o.SV&&window.etSign&&(p+="&bx_et="+window.etSign(p)),l.src=p,l.async=!0,l.onerror=function(){t("ABORT"),e(s.abortErrMsg||"ABORT::\u63a5\u53e3\u5f02\u5e38\u9000\u51fa")},window[u]=function(){s.results=Array.prototype.slice.call(arguments),t(),r.resolve()},i(l),r.promise},l.prototype.__requestJSON=function(t){function r(e){l&&clearTimeout(l),"TIMEOUT"===e&&u.abort()}var i=n(),o=this.params,s=this.options,u=new e.XMLHttpRequest,d=o.timeout||2e4,l=setTimeout((function(){t(s.timeoutErrMsg||"TIMEOUT::\u63a5\u53e3\u8d85\u65f6"),r("TIMEOUT")}),d);s.CDR&&c(y)&&(s.querystring.c=decodeURIComponent(c(y))),u.onreadystatechange=function(){if(4==u.readyState){var e,n,o=u.status;if(o>=200&&300>o||304==o){r(),e=u.responseText,n=u.getAllResponseHeaders()||"";try{(e=/^\s*$/.test(e)?{}:JSON.parse(e)).responseHeaders=n,s.results=[e],i.resolve()}catch(e){t("PARSE_JSON_ERROR::\u89e3\u6790JSON\u5931\u8d25")}}else r("ABORT"),t(s.abortErrMsg||"ABORT::\u63a5\u53e3\u5f02\u5e38\u9000\u51fa")}};var p,f,h=s.path+"?"+a(s.querystring);s.getJSON?(p="GET",h+="&"+a(s.postdata)):s.postJSON&&(p="POST",f=a(s.postdata)),"5.0"===o.SV&&window.etSign&&(h+="&bx_et="+window.etSign(h)),u.open(p,h,!0),u.withCredentials=!0,u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Content-type","application/x-www-form-urlencoded");var _=o.ext_headers||o.headers;if(_)for(var v in _)u.setRequestHeader(v,_[v]);return u.send(f),i.promise},l.prototype.__requestWindVane=function(e){function r(e){if(a.results=[e],e&&e.stat&&e.stat.falcoId){var n=function(){},r={mtopStart:y,mtopEnd:Date.now(),falcoId:e.stat.falcoId};t.windvane.call(S,"falcoExtend",r,n,n)}i.resolve()}var i=n(),o=this.params,a=this.options,s=o.data,c=o.api,u=o.v,d=a.postJSON?1:0,l=a.getJSON||a.postJSON||a.getOriginalJSONP?"originaljson":"";void 0!==o.valueType&&("original"===o.valueType?l="originaljson":"string"===o.valueType&&(l="")),!0===a.useJsonpResultType&&(l="");var p,f,h="https"===location.protocol?1:0,_=o.isSec||0,v=o.sessionOption||"AutoLoginOnly",m=o.ecode||0,g=o.ext_headers||{},E=o.ext_querys||{};p=2*(f=void 0!==o.timer?parseInt(o.timer):void 0!==o.timeout?parseInt(o.timeout):2e4);var y=Date.now();!0===o.needLogin&&void 0===o.sessionOption&&(v="AutoLoginAndManualLogin"),void 0!==o.secType&&void 0===o.isSec&&(_=o.secType);var b={api:c,v:u,post:String(d),type:l,isHttps:String(h),ecode:String(m),isSec:String(_),param:JSON.parse(s),timer:f,needLogin:!!o.needLogin,sessionOption:v,ext_headers:g,ext_querys:E};o.ttid&&!0===a.dangerouslySetWVTtid&&(b.ttid=o.ttid),Object.assign&&o.dangerouslySetWindvaneParams&&Object.assign(b,o.dangerouslySetWindvaneParams);var S="MtopWVPlugin";return"string"==typeof o.customWindVaneClassName&&(S=o.customWindVaneClassName),t.windvane.call(S,"send",b,r,r,p),i.promise},l.prototype.__requestAlipay=function(t){var r=n(),i=this.params,o=this.options,a={apiName:i.api,apiVersion:i.v,needEcodeSign:"1"===String(i.ecode),headers:i.ext_headers||{},usePost:!!o.postJSON};s(i.data)||(i.data=JSON.parse(i.data)),a.data=i.data,i.ttid&&!0===o.dangerouslySetWVTtid&&(a.ttid=i.ttid),(o.getJSON||o.postJSON||o.getOriginalJSONP)&&(a.type="originaljson"),void 0!==i.valueType&&("original"===i.valueType?a.type="originaljson":"string"===i.valueType&&delete a.type),!0===o.useJsonpResultType&&delete a.type,Object.assign&&i.dangerouslySetAlipayParams&&Object.assign(a,i.dangerouslySetAlipayParams);var c="mtop";return"string"==typeof i.customAlipayJSBridgeApi&&(c=i.customAlipayJSBridgeApi),e.AlipayJSBridge.call(c,a,(function(e){o.results=[e],r.resolve()})),r.promise},l.prototype.__processRequest=function(e,t){var n=this;return f.then((function(){var e=n.options;if(e.H5Request&&(e.getJSONP||e.getOriginalJSONP))return n.__requestJSONP(t);if(e.H5Request&&(e.getJSON||e.postJSON))return n.__requestJSON(t);if(e.WindVaneRequest)return g?n.__requestAlipay(t):n.__requestWindVane(t);throw new Error("UNEXCEPT_REQUEST::\u9519\u8bef\u7684\u8bf7\u6c42\u7c7b\u578b")})).then(e).then((function(){var e=n.options,t=(n.params,e.results[0]),r=t&&t.ret||[];t.ret=r,r instanceof Array&&(r=r.join(","));var i=t.c;e.CDR&&i&&function(e,t,n){var r=n||{};document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(r.domain?";domain="+r.domain:"")+(r.path?";path="+r.path:"")+(r.secure?";secure":"")+(r.httponly?";HttpOnly":"")+(r.sameSite?";Samesite="+r.sameSite:"")}(y,i,{domain:e.pageDomain,path:"/",secure:e.secure,sameSite:e.sameSite}),r.indexOf("SUCCESS")>-1?t.retType=v.SUCCESS:t.retType=v.ERROR,e.retJson=t}))},l.prototype.__sequence=function(e){var t=this,r=[],i=[];e.forEach((function e(o){if(o instanceof Array)o.forEach(e);else{var a,s=n(),c=n();r.push((function(){return s=n(),(a=o.call(t,(function(e){return s.resolve(e),c.promise}),(function(e){return s.reject(e),c.promise})))&&(a=a.catch((function(e){s.reject(e)}))),s.promise})),i.push((function(e){return c.resolve(e),a}))}}));for(var o,a=f;o=r.shift();)a=a.then(o);for(;o=i.pop();)a=a.then(o);return a};var T=function(e){if(h.EtRequest&&!window.__etReady){o();var t,n,r=Number(h.EtLoadTimeout)||5e3,i=!1;window.etReady=function(){window.__etReady=!0,i||(i=!0,e())};var a=function(){t&&clearInterval(t),n&&clearTimeout(n),i||(i=!0,e())};t=setInterval((function(){try{window.etSign&&(window.__etReady=!0,a()),window.etReady&&!window.__etReady&&(window.etReady=function(){window.__etReady=!0,a()})}catch(e){a()}}),100),n=setTimeout((function(){a()}),r)}else e()},w=function(e){e()};l.prototype.request=function(n){var i=this;if(this.options=r(n||{},h),!p){var o="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301Promise\uff0c\u8bf7\u5728windows\u5bf9\u8c61\u4e0a\u6302\u8f7dPromise\u5bf9\u8c61";throw t.mtop={ERROR:o},new Error(o)}var a=p.resolve([T,w]).then((function(e){var t=e[0],n=e[1];return i.__sequence([t,i.__processRequestMethod,i.__processRequestType,i.__processToken,i.__processRequestUrl,i.middlewares,i.__processRequest,n])})).then((function(){var e=i.options.retJson;return e.retType!==v.SUCCESS?p.reject(e):i.options.successCallback?void i.options.successCallback(e):p.resolve(e)})).catch((function(e){var n;return e instanceof Error?(console.error(e.stack),n={ret:[e.message],stack:[e.stack],retJson:v.ERROR}):n="string"==typeof e?{ret:[e],retJson:v.ERROR}:void 0!==e?e:i.options.retJson,t.mtop.errorListener&&t.mtop.errorListener({api:i.params.api,data:i.params.data,v:i.params.v,retJson:n}),i.options.failureCallback?void i.options.failureCallback(n):p.reject(n)}));return this.__processRequestType(),i.options.H5Request&&(i.constructor.__firstProcessor||(i.constructor.__firstProcessor=a),T=function(e){i.constructor.__firstProcessor.then(e).catch(e)}),("get"===this.params.type&&"json"===this.params.dataType||"post"===this.params.type)&&(n.pageDomain=n.pageDomain||function(e){try{return".com"!==e.substring(e.lastIndexOf("."))?(e.split(".")||[]).length<=3?e:e.split(".").slice(1).join("."):e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}catch(t){return e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}}(e.location.hostname),n.mainDomain!==n.pageDomain&&(n.maxRetryTimes=4,n.CDR=!0)),this.__requestProcessor=a,a},t.mtop=function(e){return new l(e)},t.mtop.request=function(e,t,n){var r={H5Request:e.H5Request,WindVaneRequest:e.WindVaneRequest,LoginRequest:e.LoginRequest,AntiCreep:e.AntiCreep,AntiFlood:e.AntiFlood,successCallback:t,failureCallback:n||t};return new l(e).request(r)},t.mtop.H5Request=function(e,t,n){var r={H5Request:!0,successCallback:t,failureCallback:n||t};return new l(e).request(r)},t.mtop.middlewares=_,t.mtop.config=h,t.mtop.RESPONSE_TYPE=v,t.mtop.CLASS=l}(window,window.lib||(window.lib={})),function(e,t){function n(e){return e.preventDefault(),!1}function r(t,r){var i=navigator.userAgent.match(/.*(iPhone|iPad|Android|ios|SymbianOS|Windows Phone).*/i),o=i&&r.h5url?r.h5url:r.url,a=r.dialogSize,s=this,c=e.dpr||1,u=document.createElement("div"),d=document.documentElement.getBoundingClientRect(),l=Math.max(d.width,window.innerWidth)/c,p=window.innerHeight/c;u.style.cssText=["-webkit-transform:scale("+c+") translateZ(0)","-ms-transform:scale("+c+") translateZ(0)","transform:scale("+c+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+l+"px","height:"+p+"px","z-index:2147483647","position: fixed","left:0","top:0px","background:"+(l>800?"rgba(0,0,0,.5)":"#FFF"),"display:none"].join(";");var f=document.createElement("div");f.style.cssText=["width:100%","height:52px","background:transparent","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),f.innerText=t;var h=document.createElement("img");h.style.cssText=["display:block","position:absolute","margin-top:15px","right:0","top:0","height:15px","line-height:52px","padding:0 20px","color:#999"].join(";"),h.src="https://gw.alicdn.com/tfs/TB1QZN.CYj1gK0jSZFuXXcrHpXa-200-200.png";var _=document.createElement("iframe");if(_.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),i)f.appendChild(h),u.appendChild(f);else{var v=a&&a.width||"420px",m=a&&a.height||"320px",g=50,E=50,y=24,b=-39;m.indexOf("px")>-1?y-=Number(m.replace("px",""))/2:m.indexOf("%")>-1&&(g-=Number(m.replace("%",""))/2),v.indexOf("px")>-1?b+=Number(v.replace("px",""))/2:v.indexOf("%")>-1&&(E+=Number(v.replace("%",""))/2),h.style.cssText=["position:absolute","width:15px","height:15px","top:"+g+"%","left:"+E+"%","cursor: pointer","border:0","z-index:1","overflow:hidden","margin-top:"+y+"px","margin-left:"+b+"px"].join(";"),u.appendChild(h),_.style.cssText=["position:absolute","top:0px","left:0px","bottom:0px","right:0px","margin:auto","width:"+v,"height:"+m,"border:0","background:#FFF","overflow:hidden","border-radius:18px"].join(";")}u.appendChild(_),u.className="J_MIDDLEWARE_FRAME_WIDGET",document.body.appendChild(u),_.src=o,h.addEventListener("click",(function(){s.hide();var e=document.createEvent("HTMLEvents");e.initEvent("close",!1,!1),u.dispatchEvent(e)}),!1),this.addEventListener=function(){u.addEventListener.apply(u,arguments)},this.removeEventListener=function(){u.removeEventListener.apply(u,arguments)},this.show=function(){document.addEventListener("touchmove",n,!1),u.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",n),window.scrollTo(0,-d.top),u.parentNode&&u.parentNode.removeChild(u)}}if(!t||!t.mtop||t.mtop.ERROR)throw new Error("Mtop \u521d\u59cb\u5316\u5931\u8d25\uff01");var i=e.Promise,o=t.mtop.CLASS,a=t.mtop.config,s=t.mtop.RESPONSE_TYPE;t.mtop.middlewares.push((function(e){var n=this,r=this.options,i=this.params;return e().then((function(){var e=r.retJson,o=e.ret,c=navigator.userAgent.toLowerCase(),u=c.indexOf("safari")>-1&&c.indexOf("chrome")<0&&c.indexOf("qqbrowser")<0;if(o instanceof Array&&(o=o.join(",")),(o.indexOf("SESSION_EXPIRED")>-1||o.indexOf("SID_INVALID")>-1||o.indexOf("AUTH_REJECT")>-1||o.indexOf("NEED_LOGIN")>-1)&&(e.retType=s.SESSION_EXPIRED,!r.WindVaneRequest&&(!0===a.LoginRequest||!0===r.LoginRequest||!0===i.needLogin))){if(!t.login)throw new Error("LOGIN_NOT_FOUND::\u7f3a\u5c11lib.login");if(!0!==r.safariGoLogin||!u||"taobao.com"===r.pageDomain)return t.login.goLoginAsync().then((function(e){return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])})).catch((function(e){throw"CANCEL"===e?new Error("LOGIN_CANCEL::\u7528\u6237\u53d6\u6d88\u767b\u5f55"):new Error("LOGIN_FAILURE::\u7528\u6237\u767b\u5f55\u5931\u8d25")}));t.login.goLogin()}}))})),t.mtop.loginRequest=function(e,t,n){var r={LoginRequest:!0,H5Request:!0,successCallback:t,failureCallback:n||t};return new o(e).request(r)},t.mtop.antiFloodRequest=function(e,t,n){var r={AntiFlood:!0,successCallback:t,failureCallback:n||t};return new o(e).request(r)},t.mtop.middlewares.push((function(e){var t=this.options;return this.params,!0!==t.H5Request||!0!==a.AntiFlood&&!0!==t.AntiFlood?void e():e().then((function(){var e=t.retJson,n=e.ret;n instanceof Array&&(n=n.join(",")),n.indexOf("FAIL_SYS_USER_VALIDATE")>-1&&e.data.url&&(t.AntiFloodReferer?location.href=e.data.url.replace(/(http_referer=).+/,"$1"+t.AntiFloodReferer):location.href=e.data.url)}))})),t.mtop.antiCreepRequest=function(e,t,n){var r={AntiCreep:!0,successCallback:t,failureCallback:n||t};return new o(e).request(r)},t.mtop.middlewares.push((function(t){var n=this,o=this.options,s=this.params;return!1!==o.AntiCreep&&(o.AntiCreep=!0),!0!==s.forceAntiCreep&&!0!==o.H5Request||!0!==a.AntiCreep&&!0!==o.AntiCreep?void t():t().then((function(){var t=o.retJson,a=t.ret;if(a instanceof Array&&(a=a.join(",")),a.indexOf("CHECKJS_FLAG")>-1&&t.uuid&&t.serid){try{var c=!!window.document._sufei_data2,u=new Image,d="https://fourier.taobao.com/ts?ext=200&uuid="+t.uuid+"&serid="+t.serid+"&sufei="+c;window.location&&location.href&&(d+="&href=="+location.href.substr(0,128)),window.__fyModule&&(d+="&fyModuleLoad="+window.__fyModule.load+"&fyModuleInit="+window.__fyModule.init),window.__umModule&&(d+="&umModuleLoad="+window.__umModule.load+"&umModuleInit="+window.__umModule.init),window.__uabModule&&(d+="&uabModuleLoad="+window.__uabModule.load+"&uabModuleInit="+window.__uabModule.init),window.__ncModule&&(d+="&ncModuleLoad="+window.__ncModule.load+"&ncModuleInit="+window.__ncModule.init),window.__nsModule&&(d+="&nsModuleLoad="+window.__nsModule.load+"&nsModuleInit="+window.__nsModule.init),window.__etModule&&(d+="&etModuleLoad="+window.__etModule.load+"&etModuleInit="+window.__etModule.init),u.src=d,document.body.appendChild(u)}catch(e){console.log(e,"\u4e0a\u62a5\u5f02\u5e38")}return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])}if((a.indexOf("RGV587_ERROR::SM")>-1||a.indexOf("ASSIST_FLAG")>-1)&&t.data.url){var l="_m_h5_smt",p=function(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}(l),f=!1;if(!0===o.saveAntiCreepToken&&p)for(var h in p=JSON.parse(p))s[h]&&(f=!0);if(!0===o.saveAntiCreepToken&&p&&!f){for(var h in p)s[h]=p[h];return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])}return new i((function(i,a){function c(){d.removeEventListener("close",c),e.removeEventListener("message",u),a("USER_INPUT_CANCEL::\u7528\u6237\u53d6\u6d88\u8f93\u5165")}function u(t){var r;try{r=JSON.parse(t.data)||{}}catch(e){}if(r&&"child"===r.type){var p;d.removeEventListener("close",c),e.removeEventListener("message",u),d.hide();try{for(var f in"string"==typeof(p=JSON.parse(decodeURIComponent(r.content)))&&(p=JSON.parse(p)),p)s[f]=p[f];!0===o.saveAntiCreepToken?(document.cookie=l+"="+JSON.stringify(p)+";",e.location.reload()):n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest]).then(i)}catch(e){a("USER_INPUT_FAILURE::\u7528\u6237\u8f93\u5165\u5931\u8d25")}}}var d=new r("",t.data);d.addEventListener("close",c,!1),e.addEventListener("message",u,!1),d.show()}))}}))}))}(window,window.lib||(window.lib={})),e.exports=window.lib.mtop},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){var r={};for(var i in r["en-us"]=n(96),r["ar-sa"]=n(97),r.kn=n(98),r.as=n(99),r.bho=n(100),r["pl-pl"]=n(101),r["ko-kr"]=n(102),r["de-de"]=n(103),r["ru-ru"]=n(104),r["fr-fr"]=n(105),r.gu=n(106),r["nl-nl"]=n(107),r["my-mm"]=n(108),r["bn-bd"]=n(109),r["bn-in"]=n(110),r.mr=n(111),r["ms-my"]=n(112),r.ml=n(113),r.mni=n(114),r["ne-np"]=n(115),r.or=n(116),r["pt-br"]=n(117),r["pt-pt"]=n(118),r.pa=n(119),r["ja-jp"]=n(120),r["si-lk"]=n(121),r["tr-tr"]=n(122),r["tl-ph"]=n(123),r.te=n(124),r.ta=n(125),r["th-th"]=n(126),r["ur-pk"]=n(127),r["ur-in"]=n(128),r["uk-ua"]=n(129),r["iw-il"]=n(130),r["es-es"]=n(131),r["it-it"]=n(132),r["in-id"]=n(133),r["hi-in"]=n(134),r["vi-vn"]=n(135),r["en-pk"]=n(136),r["en-ph"]=n(137),r["en-mm"]=n(138),r["en-bd"]=n(139),r["en-my"]=n(140),r["en-np"]=n(141),r["en-lk"]=n(142),r["en-th"]=n(143),r["en-sg"]=n(144),r["en-id"]=n(145),r["en-vn"]=n(146),r["zh-tw"]=n(147),r["zh-hk"]=n(148),r["zh-cn"]=n(149),r)if(r.hasOwnProperty(i)&&"en-us"!=i)for(var o in r["en-us"])r["en-us"].hasOwnProperty(o)&&(r[i].hasOwnProperty(o)||(r[i][o]=r["en-us"][o]));r.appName="alimsc-live",r.groupName="live",r.defaultLocale="en-us",e.exports=r},function(e,t){e.exports={asc_live_coupon_list_issueing_title:"Issuing coupons","live.info.notice.noExitError":"The current comment does not exist.",mcms_live12__:"{user_name} has entered this live stream",revice_btn_text_already:"Claimed","liveroom.text.changeExplanation":"The host just explained this product, You are watching the explanation screen",live_room_collection_failed:"Sorry, coupon collection failed.",revice_btn_text_message:"Comment","live.text.complain":"Report",mcms_buyer_live_network_wrong_tips:"Please check your network",mcms_live6__:"This message contains forbidden language",scan_with_mobile_app:"Scan with mobile Alibaba.com APP(Android above 7.12.0 , IOS above 7.12.1)","liveroom.text.send":"Send","ive.enableVolume":"Turn up the volume",recive_coupon_common_title:"Get livestream coupon",live_rank_feedback:"The leaderboard is empty",mcms_live4__:"Follow",reminder_sucess:"We'll remind you when the liveshow begins.","live.manage.saleExplain":'Note: The sessions you have applied for will be displayed in the list <span style="{{color:" "#efa805"}}>48 hours</span>\n                        after your application is approved.',mcms_live8__:"The presenter  is starting the show soon. Come back later to watch","live.text.share":"Share",live_pc_network_slot:"Your network is not good. Please check your network.",asc_live_coupon_list_use6:"Maximum discount US {{count}}","liveroom.text.complain":"Report",asc_live_coupon_list_use3:"Remaining",mcms_buyer_live_anchor_leave:"The host leaves temporarily.Please wait.","liveroom.text.backToLive":"Back To live",asc_live_coupon_get_coupon:"Get Coupons","liveroom.text.explaining":"Demonstration",mcms_moreVideo__:"More Videos",unsubscribe:"Cancel reminder","liveroom.text.directory":"Live Directory","liveroom.text.product.more":"More",asc_live_coupon_list_title:"Exclusive coupons for live",asc_live_catalog:"Catalog","live.info.notice.riskError":"Your comment has been blocked.",mcms_live2__:"This message is forbidden",asc_chat_now:"Chat Now",coupon_recive_title:"Successfully followed! You can now claim a coupon.","live.product_box_empty_text":"The list is empty, please communicate with the host.","live.get_catalog":"Get catalog",have_no_recive_coupon:"We\u2019re sorry, all coupons have already been claimed.",mcms_buyer_live_yugao_timeout_end:"The live broadcast was not broadcast due to overtime",asc_live_coupon_list_use5:"Available after:{{time}}",live_room_send_catalog_success:"Your request for a catalog has been sent.",mcms_live10__:"{user_name} is starting an order","live.checkCatalog":"Check Catalog",subscribed:"Subscribed",coupon_second:"seconds",asc_live_coupon_list_use1:"View My Coupons",mcms_buyer_live_yugao_chidao_wait:"The merchant is a little late. Please wait a moment.",mcms_buyer_live_replay_delete:"The live broadcast has been deleted by the merchant and cannot be viewed",mcms_buyer_live_living_fengkong_end:"The live broadcast is suspected of content violation, and the live broadcast has ended","live.continue_in_app":"Continue on Alibaba.com APP",mcms_live1__:"Want to talk to presenter?",asc_live_coupon_insufficient_coupons:"Sorry, coupons has been collected",mcms_live7__:"Network error, try again",mcms_live14__:"The presenter has temporarily left. Come back later to continue watching",mcms_live9__:"Live countdown",mcms_buyer_live_contact_supplier:"Contact Supplier",subscribe:"Set reminder",detail_chat_now:"Chat Now","live.info.notice.blockError":"You have been banned from commenting.",mcms_live5__:"Refresh",recive_coupon_common_title_success:"Coupons claimed","live.living":"Live",asc_player_refresh:"The system responds slowly. Please try again.","live.cancel_app":"Cancel","liverank.history_rank_text":"History","live.unfollowed_text":"unfollow","liveroom.productslist":"Products list",mcms_live11__:"{user_name} is sending an inquiry",asc_live_coupon_list_use4:"Coupons received",asc_live_coupon_to_use:"Redeem Now",recive_coupon_follow_success_title:"Successfully followed! ",mcms_buyer_live_replay_fengkong:"The live broadcast is suspected of content violation and cannot be watched",revice_btn_text_null:"All claimed.",live_already_sent_toast:"The request has been sent. The livestreamer will give a demonstration soon. ","liveroom.text.commentplaceholder":"Talk to streamer","liveroom.text.getapp":"Get the app",mcms_buyer_live_yugao_fengkong_cancel:"The live broadcast is suspected of content violation and has been cancelled.","live.components.factory.card.order.desc":"Transaction amount in the last 6 months",live_room_Coupon_expired:"Sorry, the coupon has expired.",mcms_buyer_live_suspend:"Be right back.","app.check":"success",asc_live_coupon_collect_success:"Coupons claimed",asc_live_coupon_list_use7:"Coupons",recive_coupon_comment_title:"Comment now",coupon_cutdown_text:"Time-limited","liverank.live_rank_time_desc":"Start time of statistics: {{time}}","liveroom.text.watchmobile":"Watch live on mobile",mcms_buyer_live_yugao_delete_cancel:"The live broadcast has been deleted by the merchant and cancelled","liveroom.text.view":"View","subscribe.cancel":"Unsubscribed.",asc_live_coupon_list_use2:"Starts in",mcms_buyer_live_living_end:"The live broadcast is over","liverank.live_rank_text":"Today","subscribed.detail":"Subscribed. The live session will start on {{date}}, and we will prompt you to watch it on time at {{time}}.",mcms_buyer_live_living_end_watch_replay:"Watch replay","live.open_app":"Open","liveroom.entering":"Welcome  come to the livestream","live.mutedAutoplay":"Mute playing",asc_live_coupon_collect_time:"This pop-up will disappear in {{time}} seconds.","liveroom.text.changeContent":"The anchor has just talked about this content, and you are watching the explanation.","liveroom.watch_now":"Watch now","subscribe.success":"Subscribed.",live_room_cannot_receive:"Merchants on Alibaba.com can not receive coupons.","liveroom.text.loading":"loading...",mcms_buyer_live_streambreake:"The live broadcast is not smooth, please wait a moment",live_ask_introdution:"Explain to me",recive_coupon_follow_title:"Follow livestreamer",live_have_already_sent:"Request sent",mcms_live13__:"The livestream has ended. Thanks for watching.","liverank.history_rank_time_desc":"Start time of statistics: {{time}}",revice_btn_text_fellow:"Follow",live_room_buyer_send_catalog_success:"Your request for a catalog has been sent.",mcms_buyer_live_network_wrong:"Your network is not good.","liveroom.title.replay":"Highlight Replay","live.text.watch_replay":"Watch replay",revice_btn_text_get:"Get coupon now",recive_coupon_comment_success_title:"Successfully commented!",asc_live_coupon_already_received:"You have collected the coupons.",watch_live_on_mobile:"Watch live on mobile","liveroom.text.play_failed":"An error occurs in the player. Please try again later.",mcms_seabed28__:"All Products",mcms_live3__:"Message sent",already_recive_coupon:"Coupons claimed",live_room_send_catalog_later:"The message has been sent. Please wait for a reply from the supplier."}},function(e,t){e.exports={"liveroom.text.play_failed":"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0645\u063a\u0634\u0644. \u064a\u0631\u062c\u0649 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0644\u0627\u062d\u0642\u064b\u0627.","liveroom.text.commentplaceholder":"\u0627\u0644\u062a\u062d\u062f\u062b \u0625\u0644\u0649 \u063a\u0627\u0633\u0644",asc_live_coupon_list_use7:"\u0642\u0633\u0627\u0626\u0645",asc_live_coupon_to_use:"\u0627\u0644\u0627\u0633\u062a\u0631\u062f\u0627\u062f \u0627\u0644\u0622\u0646",live_pc_network_slot:"\u0627\u0644\u0634\u0628\u0643\u0629 \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0643 \u0644\u064a\u0633\u062a \u062c\u064a\u062f\u0629. \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0634\u0628\u0643\u062a\u0643.",watch_live_on_mobile:"\u0645\u0634\u0627\u0647\u062f\u0629 \u0627\u0644\u0639\u064a\u0634 \u0639\u0644\u0649 \u0627\u0644\u0647\u0627\u062a\u0641 \u0627\u0644\u0645\u062d\u0645\u0648\u0644",live_ask_introdution:"\u0627\u0634\u0631\u062d \u0644\u064a","liveroom.text.watchmobile":"\u0645\u0634\u0627\u0647\u062f\u0629 \u0627\u0644\u0639\u064a\u0634 \u0639\u0644\u0649 \u0627\u0644\u0647\u0627\u062a\u0641 \u0627\u0644\u0645\u062d\u0645\u0648\u0644","liverank.history_rank_time_desc":"\u0648\u0642\u062a \u0628\u062f\u0621 \u0627\u0644\u0625\u062d\u0635\u0627\u0626\u064a\u0627\u062a: {{time}}",unsubscribe:"\u0625\u0644\u063a\u0627\u0621 \u062a\u0630\u0643\u064a\u0631",asc_live_coupon_list_use5:"\u0645\u062a\u0627\u062d\u0629 \u0628\u0639\u062f:{{time}}","liveroom.text.view":"\u0645\u0646\u0638\u0631","live.open_app":"\u0641\u062a\u062d",asc_live_coupon_list_use6:"\u0623\u0642\u0635\u0649 \u062e{{count}}",mcms_buyer_live_network_wrong_tips:"\u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0634\u0628\u0643\u062a\u0643",mcms_buyer_live_yugao_delete_cancel:"\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u062a\u0627\u062c\u0631 \u0648\u0625\u0644\u063a\u0627\u0624\u0647","live.unfollowed_text":"Unfealt","liveroom.text.backToLive":"\u0627\u0644\u0639\u0648\u062f\u0629 \u0625\u0644\u0649 \u0627\u0644\u0639\u064a\u0634",mcms_buyer_live_anchor_leave:"\u0627\u0644\u0645\u0636\u064a\u0641 \u064a\u063a\u0627\u062f\u0631 \u0645\u0624\u0642\u062a\u0627. \u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631.",detail_chat_now:"\u0627\u0644\u062f\u0631\u062f\u0634\u0629 \u0627\u0644\u0622\u0646",mcms_buyer_live_yugao_chidao_wait:"\u0627\u0644\u062a\u0627\u062c\u0631 \u0645\u062a\u0623\u062e\u0631 \u0642\u0644\u064a\u0644\u0627. \u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u0646\u062a\u0638\u0631 \u0644\u062d\u0638\u0629.",mcms_live12__:"\u062f\u062e\u0644 {user_name} \u0647\u0630\u0627 \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631",asc_player_refresh:"\u064a\u0633\u062a\u062c\u064a\u0628 \u0627\u0644\u0646\u0638\u0627\u0645 \u0628\u0628\u0637\u0621 \u064a\u0631\u062c\u0649 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629.",mcms_buyer_live_living_end_watch_replay:"\u0645\u0634\u0627\u0647\u062f\u0629 \u0625\u0639\u0627\u062f\u0629",mcms_seabed28__:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a",mcms_buyer_live_living_fengkong_end:"\u064a\u0634\u062a\u0628\u0647 \u0641\u064a \u0623\u0646 \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631 \u064a\u0646\u062a\u0647\u0643 \u0627\u0644\u0645\u062d\u062a\u0648\u0649 \u060c \u0648\u0642\u062f \u0627\u0646\u062a\u0647\u0649 \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631",mcms_live14__:"\u063a\u0627\u062f\u0631 \u0645\u0642\u062f\u0645 \u0627\u0644\u0639\u0631\u0636 \u0645\u0624\u0642\u062a\u0627. \u0639\u062f \u0644\u0627\u062d\u0642\u0627\u064b \u0644\u0645\u0648\u0627\u0635\u0644\u0629 \u0627\u0644\u0645\u0634\u0627\u0647\u062f\u0629","live.text.complain":"\u062a\u0642\u0631\u064a\u0631","liverank.history_rank_text":"\u0627\u0644\u062a\u0627\u0631\u064a\u062e","liveroom.entering":"\u0645\u0631\u062d\u0628\u0627 \u0628\u0643\u0645 \u0641\u064a \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631",recive_coupon_common_title:"\u0642\u0633\u064a\u0645\u0629 \u062e\u0635\u0645",mcms_buyer_live_living_end:"\u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631 \u0642\u062f \u0627\u0646\u062a\u0647\u0649",mcms_buyer_live_suspend:"\u0623\u0646 \u064a\u0643\u0648\u0646 \u0627\u0644\u062d\u0642 \u0641\u064a \u0627\u0644\u0639\u0648\u062f\u0629.",asc_live_catalog:"\u0627\u0644\u0643\u062a\u0627\u0644\u0648\u062c",revice_btn_text_get:"\u0627\u062d\u0635\u0644 \u0639\u0644\u0649 \u0642\u0633\u064a\u0645\u0629 \u0627\u0644\u0622\u0646","live.text.watch_replay":"\u0645\u0634\u0627\u0647\u062f\u0629 \u0627\u0644\u062a\u0634\u063a\u064a\u0644",subscribed:"\u0645\u0634\u062a\u0631\u0643",asc_live_coupon_collect_success:"\u062a\u0645\u062a \u0627\u0644\u0645\u0637\u0627\u0644\u0628\u0629 \u0628\u0627\u0644\u0642\u0633\u0627\u0626\u0645","subscribe.success":"\u0645\u0634\u062a\u0631\u0643.","live.info.notice.noExitError":"\u062a\u0639\u0644\u064a\u0642 \u0627\u0644\u0631\u062f \u0627\u0644\u062d\u0627\u0644\u064a \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f",mcms_live6__:"\u062a\u062d\u062a\u0648\u064a \u0647\u0630\u0647 \u0627\u0644\u0631\u0633\u0627\u0644\u0629 \u0639\u0644\u0649 \u0644\u063a\u0629 \u0645\u0631\u0641\u0648\u0636\u0629",recive_coupon_comment_title:"\u0627\u0644\u062a\u0639\u0644\u064a\u0642 \u0627\u0644\u0622\u0646",coupon_cutdown_text:"\u0645\u062d\u062f\u0648\u062f\u0629 \u0627\u0644\u0648\u0642\u062a",mcms_live10__:"\u064a\u0628\u062f\u0623 {user_name} \u0639\u0645\u0644 \u0637\u0644\u0628",asc_chat_now:"\u0627\u0644\u062f\u0631\u062f\u0634\u0629 \u0627\u0644\u0622\u0646","live.get_catalog":"\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0643\u062a\u0627\u0644\u0648\u062c",mcms_live1__:"\u0647\u0644 \u062a\u0631\u064a\u062f \u0627\u0644\u062a\u062d\u062f\u062b \u0625\u0644\u0649 \u0627\u0644\u0645\u0642\u062f\u0651\u0645\u061f","liveroom.watch_now":"\u0645\u0634\u0627\u0647\u062f\u0629 \u0627\u0644\u0622\u0646",subscribe:"\u0636\u0628\u0637 \u062a\u0630\u0643\u064a\u0631","liverank.live_rank_text":"\u0627\u0644\u064a\u0648\u0645",have_no_recive_coupon:"\u0646\u062d\u0646 \u0622\u0633\u0641\u0648\u0646 \u060c \u0644\u0642\u062f \u062a\u0645 \u0628\u0627\u0644\u0641\u0639\u0644 \u0627\u0644\u0645\u0637\u0627\u0644\u0628\u0629 \u0628\u062c\u0645\u064a\u0639 \u0627\u0644\u0642\u0633\u0627\u0626\u0645.","liveroom.text.changeContent":"\u0648\u0642\u062f \u062a\u062d\u062f\u062b\u062a \u0645\u0631\u0633\u0627\u0629 \u0644\u0644\u062a\u0648 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0645\u062d\u062a\u0648\u0649 \u060c \u0648\u0623\u0646\u062a \u062a\u0634\u0627\u0647\u062f \u0627\u0644\u062a\u0641\u0633\u064a\u0631.",asc_live_coupon_insufficient_coupons:"\u0646\u0623\u0633\u0641\u060c \u062a\u0645 \u062c\u0645\u0639 \u0627\u0644\u0642\u0633\u0627\u0626\u0645",reminder_sucess:"\u0633\u0646\u0630\u0643\u0631\u0643 \u0639\u0646\u062f\u0645\u0627 \u062a\u0628\u062f\u0623 \u0627\u0644\u062d\u064a\u0627\u0629.",asc_live_coupon_collect_time:"\u0633\u062a\u062e\u062a\u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u0646\u0627\u0641\u0630\u0629 \u0627\u0644\u0645\u0646\u0628\u062b\u0642\u0629 \u062e\u0644\u0627\u0644 {{time}} \u062b\u0627\u0646\u064a\u0629.",asc_live_coupon_list_use4:"\u0642\u0633\u0627\u0626\u0645 \u0645\u0633\u062a\u0644\u0645\u0629","liverank.live_rank_time_desc":"\u0648\u0642\u062a \u0628\u062f\u0621 \u0627\u0644\u0625\u062d\u0635\u0627\u0626\u064a\u0627\u062a: {{time}}","live.mutedAutoplay":"\u0627\u0644\u0644\u0639\u0628 \u0635\u0627\u0645\u062a","ive.enableVolume":"\u0631\u0641\u0639 \u0645\u0633\u062a\u0648\u0649 \u0627\u0644\u0635\u0648\u062a","liveroom.productslist":"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a","subscribe.cancel":"\u063a\u064a\u0631 \u0645\u0634\u062a\u0631\u0643.",revice_btn_text_message:"\u062a\u0639\u0644\u064a\u0642",live_already_sent_toast:"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0637\u0644\u0628. \u0633\u064a\u0639\u0637\u064a \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631 \u0645\u0638\u0627\u0647\u0631\u0629 \u0642\u0631\u064a\u0628\u064b\u0627.",mcms_buyer_live_replay_delete:"\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u062a\u0627\u062c\u0631 \u0648\u0644\u0627 \u064a\u0645\u0643\u0646 \u0645\u0634\u0627\u0647\u062f\u062a\u0647","live.cancel_app":"\u0625\u0644\u063a\u0627\u0621",mcms_live8__:"\u064a\u0628\u062f\u0623 \u0627\u0644\u0645\u0642\u062f\u0651\u0645 \u0627\u0644\u0639\u0631\u0636 \u0642\u0631\u064a\u0628\u064b\u0627. \u0639\u064f\u062f \u0641\u064a \u0648\u0642\u062a \u0644\u0627\u062d\u0642 \u0644\u0644\u0645\u0634\u0627\u0647\u062f\u0629",asc_live_coupon_get_coupon:"\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0642\u0633\u0627\u0626\u0645",mcms_live3__:"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0631\u0633\u0627\u0644\u0629","liveroom.text.changeExplanation":"\u0644\u0642\u0645 \u062a\u0645 \u062a\u0642\u062f\u064a\u0645 \u0627\u0644\u0645\u0646\u062a\u062c \u0644\u0644\u062a\u0648. \u0623\u0646\u062a \u062a\u0634\u0627\u0647\u062f \u0627\u0644\u062a\u0642\u062f\u064a\u0645 \u0627\u0644\u0622\u0646.",coupon_recive_title:"\u062a\u0628\u0639 \u0628\u0646\u062c\u0627\u062d! \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0622\u0646 \u0627\u0644\u0645\u0637\u0627\u0644\u0628\u0629 \u0642\u0633\u064a\u0645\u0629.",mcms_buyer_live_replay_fengkong:"\u064a\u0634\u062a\u0628\u0647 \u0641\u064a \u0623\u0646 \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631 \u064a\u0646\u062a\u0647\u0643 \u0627\u0644\u0645\u062d\u062a\u0648\u0649 \u0648\u0644\u0627 \u064a\u0645\u0643\u0646 \u0645\u0634\u0627\u0647\u062f\u062a\u0647",live_room_cannot_receive:"\u0644\u0627 \u064a\u0645\u0643\u0646 \u0644\u0644\u062a\u062c\u0627\u0631 \u0641\u064a Alibaba.com \u0627\u0633\u062a\u0644\u0627\u0645 \u0642\u0633\u0627\u0626\u0645.",mcms_moreVideo__:"\u0645\u0632\u064a\u062f \u0645\u0646 \u0645\u0642\u0627\u0637\u0639 \u0627\u0644\u0641\u064a\u062f\u064a\u0648","liveroom.text.directory":"\u062f\u0644\u064a\u0644 \u0645\u0628\u0627\u0634\u0631",mcms_buyer_live_streambreake:"\u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631 \u0644\u064a\u0633 \u0639\u0644\u0649 \u0646\u062d\u0648 \u0633\u0644\u0633 \u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631 \u0644\u062d\u0638\u0629",mcms_live7__:"\u062e\u0637\u0623 \u0641\u064a \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631\u060c \u062d\u0627\u0648\u0644 \u0645\u064f\u062c\u062f\u062f\u064b\u0627","liveroom.text.send":"\u0625\u0631\u0633\u0627\u0644",live_have_already_sent:"\u0637\u0644\u0628 \u0623\u0631\u0633\u0644\u062a",asc_live_coupon_list_use3:"\u0645\u062a\u0628\u0642\u064a\u0629","live.checkCatalog":"\u062a\u062d\u0642\u0642 \u0643\u062a\u0627\u0644\u0648\u062c","liveroom.text.explaining":"\u0639\u0631\u0636 \u062a\u0648\u0636\u064a\u062d\u064a",recive_coupon_comment_success_title:"\u0639\u0644\u0642 \u0628\u0646\u062c\u0627\u062d!","live.continue_in_app":"\u0645\u062a\u0627\u0628\u0639\u0629 \u0639\u0644\u0649 \u062a\u0637\u0628\u064a\u0642 Alibaba.com",recive_coupon_follow_success_title:"\u062a\u0628\u0639 \u0628\u0646\u062c\u0627\u062d!",live_rank_feedback:"\u0644\u0648\u062d\u0629 \u0627\u0644\u0645\u062a\u0635\u062f\u0631\u064a\u0646 \u0641\u0627\u0631\u063a\u0629","subscribed.detail":"\u0645\u0634\u062a\u0631\u0643. \u0633\u062a\u0628\u062f\u0623 \u0627\u0644\u062c\u0644\u0633\u0629 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u0629 \u0641\u064a {{date}}\u060c \u0648\u0633\u0646\u0637\u0627\u0644\u0628\u0643 \u0628\u0645\u0634\u0627\u0647\u062f\u062a\u0647\u0627 \u0641\u064a \u0627\u0644\u0648\u0642\u062a \u0627\u0644\u0645\u062d\u062f\u062f \u0641\u064a {{time}}.",live_room_collection_failed:"\u0639\u0630\u0631\u064b\u0627\u060c \u0627\u0646\u062a\u0647\u062a \u0635\u0644\u0627\u062d\u064a\u0629 \u0627\u0644\u0642\u0633\u064a\u0645\u0629.","liveroom.title.replay":"\u0625\u0639\u0627\u062f\u0629 \u062a\u0634\u063a\u064a\u0644 \u0623\u0628\u0631\u0632 \u0627\u0644\u0644\u0642\u0637\u0627\u062a","live.components.factory.card.order.desc":"\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 \u0641\u064a \u0622\u062e\u0631 6 \u0623\u0634\u0647\u0631",asc_live_coupon_already_received:"\u062c\u0645\u0639\u062a \u0627\u0644\u0642\u0633\u0627\u0626\u0645.",mcms_live9__:"\u0627\u0644\u0639\u062f \u0627\u0644\u062a\u0646\u0627\u0632\u0644\u064a \u0627\u0644\u0645\u0628\u0627\u0634\u0631",recive_coupon_follow_title:"\u0645\u062a\u0627\u0628\u0639\u0629 \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631",already_recive_coupon:"\u062a\u0645\u062a \u0627\u0644\u0645\u0637\u0627\u0644\u0628\u0629 \u0628\u0627\u0644\u0642\u0633\u0627\u0626\u0645","liveroom.text.loading":"\u062a\u062d\u0645\u064a\u0644...",asc_live_coupon_list_use1:"\u0639\u0631\u0636 \u0642\u0633\u0627\u0626\u0645\u064a",live_room_send_catalog_success:"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0637\u0644\u0628\u0643 \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0643\u062a\u0627\u0644\u0648\u062c.",recive_coupon_common_title_success:"\u062a\u0645\u062a \u0627\u0644\u0645\u0637\u0627\u0644\u0628\u0629 \u0628\u0627\u0644\u0642\u0633\u0627\u0626\u0645","live.info.notice.blockError":"\u062a\u0645 \u062d\u0638\u0631 \u0627\u0644\u062a\u0639\u0644\u064a\u0642\u0627\u062a",mcms_live4__:"\u0645\u062a\u0627\u0628\u0639\u0629",live_room_buyer_send_catalog_success:"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0637\u0644\u0628\u0643 \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0643\u062a\u0627\u0644\u0648\u062c.",asc_live_coupon_list_use2:"\u064a\u0628\u062f\u0623 \u062e\u0644\u0627\u0644",mcms_buyer_live_yugao_timeout_end:"\u0644\u0645 \u064a\u062a\u0645 \u0628\u062b \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631 \u0628\u0633\u0628\u0628 \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0625\u0636\u0627\u0641\u064a","liveroom.text.getapp":"\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u062a\u0637\u0628\u064a\u0642",revice_btn_text_already:"\u0627\u062f\u0639\u0649","live.info.notice.riskError":"\u0643\u0627\u0646\u062a \u0627\u0644\u062a\u0639\u0644\u064a\u0642\u0627\u062a \u0627\u0644\u062a\u064a \u062a\u0633\u064a\u0637\u0631 \u0639\u0644\u064a\u0647\u0627 \u0627\u0644\u0631\u064a\u0627\u062d",mcms_live13__:"\u0627\u0646\u062a\u0647\u0649 \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631. \u0634\u0643\u0631\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0645\u0634\u0627\u0647\u062f\u0629.","live.product_box_empty_text":"\u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0641\u0627\u0631\u063a\u0629 \u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u0645\u0636\u064a\u0641.",revice_btn_text_null:"\u0643\u0644 \u0627\u062f\u0639\u0649.",coupon_second:"\u062b\u0627\u0646\u064a\u0629",mcms_live11__:"\u064a\u0631\u0633\u0644 {user_name} \u0627\u0633\u062a\u0639\u0644\u0627\u0645\u064b\u0627",mcms_live2__:"\u0647\u0630\u0647 \u0627\u0644\u0631\u0633\u0627\u0644\u0629 \u0645\u0631\u0641\u0648\u0636\u0629",live_room_send_catalog_later:"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0631\u0633\u0627\u0644\u0629. \u064a\u064f\u0631\u062c\u0649 \u0627\u0646\u062a\u0638\u0627\u0631 \u0627\u0644\u0631\u062f \u0645\u0646 \u0627\u0644\u0645\u0648\u0631\u062f.",asc_live_coupon_list_issueing_title:"\u0627\u0644\u0642\u0633\u0627\u0626\u0645 \u0627\u0644\u062a\u064a \u062a\u0635\u062f\u0631",asc_live_coupon_list_title:"\u0642\u0633\u0627\u0626\u0645 \u062d\u0635\u0631\u064a\u0629 \u0644\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631",live_room_Coupon_expired:"\u0639\u0630\u0631\u064b\u0627\u060c \u0623\u062e\u0641\u0642 \u062c\u0645\u0639 \u0627\u0644\u0642\u0633\u064a\u0645\u0629.",mcms_buyer_live_yugao_fengkong_cancel:"\u064a\u0634\u062a\u0628\u0647 \u0641\u064a \u0623\u0646 \u0627\u0644\u0628\u062b \u0627\u0644\u0645\u0628\u0627\u0634\u0631 \u064a\u0646\u062a\u0647\u0643 \u0627\u0644\u0645\u062d\u062a\u0648\u0649 \u0648\u0642\u062f \u062a\u0645 \u0625\u0644\u063a\u0627\u0624\u0647.",mcms_buyer_live_contact_supplier:"\u0627\u0644\u0645\u0648\u0631\u062f \u0627\u0644\u0627\u062a\u0635\u0627\u0644",mcms_live5__:"\u062a\u062d\u062f\u064a\u062b","liveroom.text.product.more":"\u0623\u0643\u062b\u0631",mcms_buyer_live_network_wrong:"\u0627\u0644\u0634\u0628\u0643\u0629 \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0643 \u0644\u064a\u0633\u062a \u062c\u064a\u062f\u0629.",revice_btn_text_fellow:"\u0645\u062a\u0627\u0628\u0639\u0629"}},function(e,t){e.exports={"subscribed.detail":"\u0c9a\u0c82\u0ca6\u0cbe\u0ca6\u0cbe\u0cb0\u0cb0\u0cbe\u0c97\u0cbf\u0ca6\u0cc6. \u0cb2\u0cc8\u0cb5\u0ccd \u0cb8\u0cc6\u0cb7\u0ca8\u0ccd {{date}} \u0cb0\u0c82\u0ca6\u0cc1 \u0c86\u0cb0\u0c82\u0cad\u0c97\u0cca\u0cb3\u0ccd\u0cb3\u0cc1\u0ca4\u0ccd\u0ca4\u0ca6\u0cc6 \u0cae\u0ca4\u0ccd\u0ca4\u0cc1 {{time}} \u0cb8\u0cae\u0caf\u0c95\u0ccd\u0c95\u0cc6 \u0cb8\u0cb0\u0cbf\u0caf\u0cbe\u0c97\u0cbf \u0c85\u0ca6\u0ca8\u0ccd\u0ca8\u0cc1 \u0cb5\u0cc0\u0c95\u0ccd\u0cb7\u0cbf\u0cb8\u0cc1\u0cb5\u0c82\u0ca4\u0cc6 \u0ca8\u0cbe\u0cb5\u0cc1 \u0ca8\u0cbf\u0cae\u0ccd\u0cae\u0ca8\u0ccd\u0ca8\u0cc1 \u0caa\u0ccd\u0cb0\u0cbe\u0c82\u0caa\u0ccd\u0c9f\u0ccd \u0cae\u0cbe\u0ca1\u0cc1\u0ca4\u0ccd\u0ca4\u0cc7\u0cb5\u0cc6."}},function(e,t){e.exports={"subscribed.detail":"\u099b\u09be\u09ac\u099b\u0995\u09cd\u09f0\u09be\u0987\u09ac \u09b9'\u09b2\u0964 \u09aa\u09cb\u09a8\u09aa\u099f\u09c0\u09df\u09be \u099b\u09c7\u099b\u09a8\u099f\u09cb {{\u09a4\u09be\u09f0\u09bf\u0996}} \u09a4\u09be\u09f0\u09bf\u0996\u09c7 \u0986\u09f0\u09ae\u09cd\u09ad \u09b9'\u09ac \u0986\u09f0\u09c1 \u0986\u09ae\u09bf \u0986\u09aa\u09cb\u09a8\u09be\u0995 {{\u09b8\u09ae\u09df}} \u09ac\u099c\u09be\u09a4 \u0987\u09df\u09be\u0995 \u099a\u09be\u09ac\u09f0 \u09ac\u09be\u09ac\u09c7 \u0985\u09a8\u09c1\u09f0\u09cb\u09a7 \u099c\u09a8\u09be\u09ae\u0964"}},function(e,t){e.exports={"subscribed.detail":"\u0938\u092c\u094d\u0938\u0915\u094d\u0930\u093e\u0907\u092c \u0939\u094b \u0917\u0907\u0932. \u0932\u093e\u0907\u0935 \u0938\u0947\u0938\u0928 {{\u0924\u093e\u0930\u0940\u0916}} \u0915\u0947 \u0936\u0941\u0930\u0942 \u0939\u094b\u0908, \u0905\u0909\u0930\u0940 \u0939\u092e\u0928\u0940\u0902 \u0915\u0947 {{\u0938\u092e\u092f}} \u092c\u091c\u0947 \u090f\u0915\u0930\u093e \u0915\u0947 \u0926\u0947\u0916\u0947 \u0916\u093e\u0924\u093f\u0930 \u0930\u0909\u0935\u093e \u0938\u0947 \u0917\u0941\u091c\u093e\u0930\u093f\u0936 \u0915\u0930\u092c\u093f \u091c\u093e."}},function(e,t){e.exports={"live.info.notice.riskError":"Komentarze zosta\u0142y kontrolowane przez wiatr","liverank.live_rank_text":"Dzisiaj",asc_live_coupon_insufficient_coupons:"Przepraszamy, kupony zosta\u0142y odebrane",asc_live_coupon_list_use4:"Kupony otrzymane","live.open_app":"Otw\xf3rz","live.unfollowed_text":"Unfollow",live_room_Coupon_expired:"Przepraszamy, odbi\xf3r kuponu zako\u0144czy\u0142 si\u0119 niepowodzeniem.",mcms_live8__:"Prezenter wkr\xf3tce rozpocznie transmisj\u0119. Wr\xf3\u0107 p\xf3\u017aniej, aby obejrze\u0107",mcms_buyer_live_anchor_leave:"Gospodarz opuszcza tymczasowo. Prosz\u0119 czeka\u0107.",recive_coupon_common_title_success:"Kupony, o kt\xf3re wyst\u0105piono",recive_coupon_follow_title:"\u015aled\u017a livestreamer",mcms_live14__:"W prezenter ma tymczasowo lewej stronie. Wr\xf3ci\u0107 p\xf3\u017aniej aby kontynuowa\u0107 ogl\u0105danie",mcms_buyer_live_contact_supplier:"Formularz kontaktowy",live_rank_feedback:"Tablica lider\xf3w jest pusta",revice_btn_text_get:"Zdob\u0105d\u017a kupon teraz",revice_btn_text_already:"Twierdzi\u0142",mcms_live9__:"Odliczanie na \u017cywo","subscribe.cancel":"Zako\u0144czono subskrypcj\u0119.","liverank.history_rank_text":"Historia",reminder_sucess:"Przypomnimy ci, kiedy zacznie si\u0119 liveshow.",mcms_buyer_live_replay_delete:"Transmisja na \u017cywo zosta\u0142a usuni\u0119ta przez sprzedawc\u0119 i nie mo\u017cna jej wy\u015bwietli\u0107","liveroom.title.replay":"Powt\xf3rka","live.text.complain":"Raport",mcms_live12__:"do\u0142\u0105czy\u0142 do transmisji",asc_live_coupon_list_use7:"kupony",have_no_recive_coupon:"Przepraszamy, wszystkie kupony zosta\u0142y ju\u017c odebrane.",coupon_recive_title:"Pomy\u015blnie przestrzegane! Mo\u017cesz teraz ubiega\u0107 si\u0119 o kupon.",coupon_cutdown_text:"Ograniczony czasowo","liveroom.text.commentplaceholder":"Porozmawiaj ze streamerem","liveroom.text.changeContent":"Kotwica w\u0142a\u015bnie m\xf3wi\u0142a o tej tre\u015bci, a ty ogl\u0105dasz wyja\u015bnienie.",mcms_live13__:"Transmisja na \u017cywo si\u0119 sko\u0144czy\u0142a. Dzi\u0119kujemy za jej obejrzenie.",mcms_live7__:"B\u0142\u0105d sieci, spr\xf3buj ponownie","live.info.notice.noExitError":"Obecny komentarz odpowiedzi nie istnieje",coupon_second:"Sekundy",asc_live_coupon_collect_time:"To wyskakuj\u0105ce okienko zniknie za {{time}} sek.","liveroom.text.getapp":"Pobierz aplikacj\u0119","live.checkCatalog":"Sprawd\u017a katalog","liveroom.text.send":"Wy\u015blij","liveroom.text.product.more":"Wi\u0119cej",asc_live_coupon_list_use3:"Pozosta\u0142e",mcms_live11__:"przesy\u0142a zapytanie","liveroom.productslist":"Lista produkt\xf3w",revice_btn_text_fellow:"\u015aled\u017a",mcms_buyer_live_suspend:"By\u0107 z powrotem.",mcms_buyer_live_living_fengkong_end:"Transmisja na \u017cywo jest podejrzana o naruszenie tre\u015bci, a transmisja na \u017cywo zosta\u0142a zako\u0144czona",asc_live_coupon_collect_success:"Kupony, o kt\xf3re wyst\u0105piono","live.text.watch_replay":"Ogl\u0105daj powt\xf3rk\u0119",subscribed:"Zasubskrybowano",asc_live_coupon_to_use:"Wykorzystaj teraz","liveroom.text.directory":"Katalog na \u017cywo",live_room_collection_failed:"Przepraszamy, kupon utraci\u0142 wa\u017cno\u015b\u0107.","liveroom.text.play_failed":"Wyst\u0105pi\u0142 b\u0142\u0105d w odtwarzaczu. Spr\xf3buj ponownie p\xf3\u017aniej.","live.components.factory.card.order.desc":"Kwota transakcji w ci\u0105gu ostatnich 6 miesi\u0119cy",live_room_cannot_receive:"Podmioty handluj\u0105ce na Alibaba.com nie mog\u0105 otrzyma\u0107 kupon\xf3w.",subscribe:"Ustaw przypomnienie","live.continue_in_app":"Przejd\u017a do aplikacji Alibaba.com",unsubscribe:"Anuluj przypomnienie",mcms_buyer_live_yugao_delete_cancel:"Transmisja na \u017cywo zosta\u0142a usuni\u0119ta przez sprzedawc\u0119 i anulowana",mcms_live5__:"Od\u015bwie\u017c",mcms_live3__:"Wys\u0142ano wiadomo\u015b\u0107",mcms_buyer_live_streambreake:"Transmisja na \u017cywo nie jest p\u0142ynna, prosz\u0119 poczeka\u0107 chwil\u0119",mcms_live4__:"Obserwuj",mcms_buyer_live_living_end:"Transmisja na \u017cywo si\u0119 sko\u0144czy\u0142a",mcms_buyer_live_network_wrong_tips:"Sprawd\u017a swoj\u0105 sie\u0107",revice_btn_text_null:"Wszystkie zg\u0142oszone.","live.product_box_empty_text":"Lista jest pusta, skontaktuj si\u0119 z hostem.",recive_coupon_common_title:"Kupon rabatowy","live.mutedAutoplay":"Wycisz odtwarzanie","subscribed.detail":"Rozpocz\u0119to subskrypcj\u0119. Sesja na \u017cywo rozpocznie si\u0119 w dniu {{date}}. Przypomnimy Ci o transmisji o godzinie {{time}}.",asc_live_coupon_list_issueing_title:"Kupony wydawane",mcms_buyer_live_yugao_chidao_wait:"Kupiec jest troch\u0119 sp\xf3\u017aniony. Prosz\u0119 poczekaj chwil\u0119.",asc_player_refresh:"System odpowiada powoli. Spr\xf3buj ponownie.",scan_with_mobile_app:"Zeskanuj aplikacj\u0105 mobiln\u0105 Alibaba.com (system Android w wersji nowszej ni\u017c 7.12.0, system iOS w wersji nowszej ni\u017c 7.12.1)","liverank.live_rank_time_desc":"Czas rozpocz\u0119cia statystyk: {{time}}",live_have_already_sent:"\u017b\u0105danie wys\u0142ane","ive.enableVolume":"Zwi\u0119ksz g\u0142o\u015bno\u015b\u0107",asc_live_coupon_list_use5:"Dost\u0119pne po: {{time}}","liveroom.text.explaining":"Demonstracja","live.info.notice.blockError":"Komentarze zosta\u0142y zakazane",live_ask_introdution:"Wyja\u015bnij mi","liveroom.text.changeExplanation":"Produkt zosta\u0142 wprowadzony. Wprowadzenie jest wy\u015bwietlane teraz.",asc_live_coupon_get_coupon:"Zdob\u0105d\u017a kupony",mcms_live1__:"Chcesz porozmawia\u0107 z prezenterem?","liveroom.text.loading":"\u0141adowanie...",live_already_sent_toast:"\u017b\u0105danie zosta\u0142o wys\u0142ane. Livestreamer da demonstracj\u0119 wkr\xf3tce.",recive_coupon_comment_title:"Skomentuj teraz",asc_live_catalog:"Katalog","live.get_catalog":"Uzyskaj katalog","liveroom.text.watchmobile":"Ogl\u0105daj na \u017cywo na telefonie kom\xf3rkowym","subscribe.success":"Rozpocz\u0119to subskrypcj\u0119.",mcms_buyer_live_replay_fengkong:"Transmisja na \u017cywo jest podejrzana o naruszenie tre\u015bci i nie mo\u017cna jej ogl\u0105da\u0107",asc_live_coupon_list_title:"Wyj\u0105tkowe kupony dla na \u017cywo","liveroom.text.backToLive":"Powr\xf3t do \u017cycia",mcms_buyer_live_yugao_fengkong_cancel:"Transmisja na \u017cywo jest podejrzana o naruszenie tre\u015bci i zosta\u0142a anulowana.","liveroom.entering":"Witaj przyjd\u017a na \u017cywo",asc_live_coupon_list_use2:"Rozpoczyna si\u0119 za",recive_coupon_follow_success_title:"Pomy\u015blnie przestrzegane! ",mcms_live6__:"Ta wiadomo\u015b\u0107 zawiera zakazane s\u0142owa",mcms_live2__:"Ta wiadomo\u015b\u0107 jest zabroniona",mcms_buyer_live_living_end_watch_replay:"Obejrzyj powt\xf3rk\u0119",recive_coupon_comment_success_title:"Pomy\u015blnie skomentowa\u0142!",already_recive_coupon:"Kupony, o kt\xf3re wyst\u0105piono",asc_live_coupon_already_received:"Odebra\u0142e\u015b/Odebra\u0142a\u015b kupony.",watch_live_on_mobile:"Ogl\u0105daj na \u017cywo na urz\u0105dzeniu mobilnym","liverank.history_rank_time_desc":"Czas rozpocz\u0119cia statystyk: {{time}}",revice_btn_text_message:"Komentarz",mcms_buyer_live_network_wrong:"Twoja sie\u0107 nie jest dobra.",mcms_live10__:"sk\u0142ada zam\xf3wienie",asc_live_coupon_list_use6:"Maksymalna zni\u017cka US {{count}}",live_pc_network_slot:"Twoja sie\u0107 nie jest dobra. Sprawd\u017a swoj\u0105 sie\u0107.","liveroom.text.view":"Widok",mcms_buyer_live_yugao_timeout_end:"Transmisja na \u017cywo nie by\u0142a nadawana z powodu nadgodzin","liveroom.watch_now":"Ogl\u0105daj teraz","live.cancel_app":"Anuluj",asc_live_coupon_list_use1:"Wy\u015bwietl moje kupony"}},function(e,t){e.exports={mcms_live6__:"\uc774 \uba54\uc2dc\uc9c0\uc5d0\ub294 \uae08\uc9c0\ub41c \uc5b8\uc5b4\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4","liveroom.text.view":"\ubdf0",asc_live_coupon_get_coupon:"\ucfe0\ud3f0 \ubc1b\uae30","liveroom.text.directory":"\ub77c\uc774\ube0c \ub514\ub809\ud1a0\ub9ac","live.mutedAutoplay":"\uc74c\uc18c\uac70 \uc7ac\uc0dd",mcms_moreVideo__:"\ub3d9\uc601\uc0c1 \ub354 \ubcf4\uae30",mcms_buyer_live_replay_delete:"\ub77c\uc774\ube0c \ubc29\uc1a1\uc740 \uc0c1\uc778\uc5d0 \uc758\ud574 \uc0ad\uc81c\ub418\uc5c8\uc73c\uba70 \ubcfc \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","live.info.notice.noExitError":"\ud604\uc7ac \ub2f5\uc7a5 \uc8fc\uc11d\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",asc_live_coupon_list_use5:"{{time}} \uc774\ud6c4 \uc0ac\uc6a9 \uac00\ub2a5","subscribe.cancel":"\uad6c\ub3c5 \ucde8\uc18c\ub428.",recive_coupon_follow_success_title:"\uc131\uacf5\uc801\uc73c\ub85c \ub530\ub77c\uac14\ub2e4! ",coupon_cutdown_text:"\uc2dc\uac04 \uc81c\ud55c",asc_live_coupon_collect_success:"\ucfe0\ud3f0 \uccad\uad6c \uc644\ub8cc",mcms_live11__:"{user_name}(\uc774)\uac00 \ubb38\uc758\ub97c \uc81c\ucd9c\ud569\ub2c8\ub2e4","live.living":"\ub77c\uc774\ube0c",mcms_buyer_live_yugao_chidao_wait:"\uc0c1\uc778\uc740 \uc870\uae08 \ub2a6\uc5c8\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \uae30\ub2e4\ub824\uc8fc\uc138\uc694.","liveroom.text.send":"\ubcf4\ub0b4\uae30","live.checkCatalog":"\uce74\ud0c8\ub85c\uadf8 \ud655\uc778",mcms_buyer_live_yugao_fengkong_cancel:"\ub77c\uc774\ube0c \ubc29\uc1a1\uc740 \ucf58\ud150\uce20 \uc704\ubc18\uc73c\ub85c \uc758\uc2ec\ub418\uba70 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",revice_btn_text_null:"\ubaa8\ub4e0 \uc8fc\uc7a5.",live_pc_network_slot:"\ub124\ud2b8\uc6cc\ud06c\uac00 \uc88b\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub124\ud2b8\uc6cc\ud06c\ub97c \ud655\uc778\ud558\uc2ed\uc2dc\uc624.",asc_live_coupon_insufficient_coupons:"\uc8c4\uc1a1\ud569\ub2c8\ub2e4. \ucfe0\ud3f0\uc774 \uc218\uc9d1\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",mcms_buyer_live_streambreake:"\ub77c\uc774\ube0c \ubc29\uc1a1\uc740 \ub9e4\ub044\ub7fd\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \uae30\ub2e4\ub9ac\uc2ed\uc2dc\uc624.",subscribe:"\ub9ac\ub9c8\uc778\ub354 \uc54c\ub9bc \uc124\uc815\ud558\uae30",asc_live_coupon_list_use6:"\ucd5c\ub300 \ud560\uc778 US {{count}}",mcms_live5__:"\uc0c8\ub85c \uace0\uce68",revice_btn_text_fellow:"\ub530\ub974\ub2e4",mcms_live14__:"\ubc1c\ud45c\uc790\ub294 \uc77c\uc2dc\uc801\uc73c\ub85c \ub5a0\ub0ac\uc2b5\ub2c8\ub2e4. \uacc4\uc18d \ubcf4\uba74\uc11c \ub098\uc911\uc5d0 \ub3cc\uc544\uc624\uc138\uc694.","live.unfollowed_text":"Unfollow",revice_btn_text_already:"\uc8fc\uc7a5","liverank.history_rank_time_desc":"\ud1b5\uacc4 \uc2dc\uc791 \uc2dc\uac04: {{time}}","subscribed.detail":"\uad6c\ub3c5 \uc644\ub8cc. \ub77c\uc774\ube0c \uc138\uc158 \uc2dc\uc791\uc740 {{date}}\uc774\uba70, {{time}} \uc815\uc2dc\uc5d0 \uc2dc\uccad\ud560 \uc218 \uc788\ub3c4\ub85d \uc54c\ub824\ub4dc\ub9bd\ub2c8\ub2e4.","liveroom.text.loading":"Loading...",recive_coupon_common_title_success:"\ucfe0\ud3f0 \uccad\uad6c \uc644\ub8cc","liveroom.text.changeExplanation":"\uc81c\ud488 \uc18c\uac1c \uc644\ub8cc. \uc9c0\uae08 \uc18c\uac1c \uc2dc\uccad \uc911.",asc_live_coupon_list_issueing_title:"\ucfe0\ud3f0 \ub418 \ubc1c\ud589",mcms_live12__:"{user_name}(\uc774)\uac00 \ub77c\uc774\ube0c \uc2a4\ud2b8\ub9bc\uc5d0 \uc785\uc7a5\ud588\uc2b5\ub2c8\ub2e4",asc_live_coupon_collect_time:"\uc774 \ud31d\uc5c5\uc740 {{time}}\ucd08 \ub0b4\uc5d0 \uc0ac\ub77c\uc9d1\ub2c8\ub2e4.","liveroom.watch_now":"\uc9c0\uae08 \uc2dc\uacc4",mcms_live9__:"\ub77c\uc774\ube0c \uce74\uc6b4\ud2b8\ub2e4\uc6b4","live.text.complain":"\uc2e0\uace0\ud558\uae30","liverank.live_rank_text":"\uc624\ub298",live_have_already_sent:"\ubcf4\ub0b8 \uc694\uccad","liveroom.text.watchmobile":"\ubaa8\ubc14\uc77c\uc5d0\uc11c \ub77c\uc774\ube0c \uc2dc\uccad",live_room_cannot_receive:"Alibaba.com\uc758 \uc0c1\uc778\uc740 \ucfe0\ud3f0\uc744 \ubc1b\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",mcms_live3__:"\uba54\uc2dc\uc9c0 \uc804\uc1a1\ub428",live_room_Coupon_expired:"\uc8c4\uc1a1\ud569\ub2c8\ub2e4. \ucfe0\ud3f0 \uc218\uc9d1\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",mcms_buyer_live_living_end_watch_replay:"\uc2dc\uacc4 \uc7ac\uc0dd",coupon_second:"\ucd08",mcms_buyer_live_living_fengkong_end:"\ub77c\uc774\ube0c \ubc29\uc1a1 \uc758\uc2ec\ub418\ub294 \ucf58\ud150\uce20 \uc704\ubc18, \ub77c\uc774\ube0c \ubc29\uc1a1 \uc885\ub8cc",mcms_buyer_live_network_wrong:"\ub124\ud2b8\uc6cc\ud06c\uac00 \uc88b\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",asc_live_coupon_already_received:"\ucfe0\ud3f0\uc744 \uc218\uc9d1\ud588\uc2b5\ub2c8\ub2e4.",recive_coupon_follow_title:"Livestreamer \ud314\ub85c\uc6b0","live.product_box_empty_text":"\ubaa9\ub85d\uc774 \ube44\uc5b4 \uc788\uc73c\uba74 \ud638\uc2a4\ud2b8\uc640 \ud1b5\uc2e0\ud558\uc2ed\uc2dc\uc624.",mcms_live7__:"\ub124\ud2b8\uc6cc\ud06c \uc5d0\ub7ec. \ub2e4\uc2dc \uc2dc\ub3c4\ud558\uc138\uc694","liveroom.text.getapp":"\uc571 \ubc1b\uae30",watch_live_on_mobile:"\ubaa8\ubc14\uc77c\uc5d0\uc11c \ub77c\uc774\ube0c \uc2dc\uccad","liveroom.text.backToLive":"\ub2e4\uc2dc \ub77c\uc774\ube0c",recive_coupon_comment_success_title:"\uc131\uacf5\uc801\uc73c\ub85c \ub313\uae00\uc744 \ub2ec\uc558\uc2b5\ub2c8\ub2e4!",mcms_live2__:"\uc774 \uba54\uc2dc\uc9c0\ub294 \uae08\uc9c0\ub418\uc5c8\uc2b5\ub2c8\ub2e4","live.info.notice.riskError":"\uc758\uacac\uc740 \ubc14\ub78c \ud1b5\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4","subscribe.success":"\uad6c\ub3c5 \uc644\ub8cc.","liverank.live_rank_time_desc":"\ud1b5\uacc4 \uc2dc\uc791 \uc2dc\uac04: {{time}}",revice_btn_text_get:"\uc9c0\uae08 \ucfe0\ud3f0 \ubc1b\uae30",mcms_live13__:"\ub77c\uc774\ube0c\uc2a4\ud2b8\ub9bc\uc774 \uc885\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc2dc\uccad\ud574 \uc8fc\uc154\uc11c \uac10\uc0ac\ud569\ub2c8\ub2e4.",asc_live_coupon_to_use:"\uc9c0\uae08 \uad50\ud658\ud558\uae30",mcms_buyer_live_suspend:"\ubc14\ub85c \ub3cc\uc544\uc624\uc2ed\uc2dc\uc624.",mcms_live4__:"\ud314\ub85c\uc6b0","liveroom.text.commentplaceholder":"\uc2a4 \ud2b8\ub9ac\uba38 \uc774\uc57c\uae30","live.open_app":"\uc624\ud508",mcms_buyer_live_replay_fengkong:"\ub77c\uc774\ube0c \ubc29\uc1a1\uc740 \ucf58\ud150\uce20 \uc704\ubc18\uc73c\ub85c \uc758\uc2ec\ub418\uba70 \uc2dc\uccad\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",live_rank_feedback:"\ub9ac\ub354 \ubcf4\ub4dc\uac00 \ube44\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.","liveroom.text.play_failed":"\ud50c\ub808\uc774\uc5b4\uc5d0 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",coupon_recive_title:"\uc131\uacf5\uc801\uc73c\ub85c \ub530\ub77c\uac14\ub2e4! \uc774\uc81c \ucfe0\ud3f0\uc744 \uccad\uad6c \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",asc_live_coupon_list_use7:"\ucfe0\ud3f0","live.continue_in_app":"Alibaba.com \uc571\uc5d0\uc11c \uacc4\uc18d",mcms_seabed28__:"\ubaa8\ub4e0 \uc81c\ud488",mcms_buyer_live_anchor_leave:"\ud638\uc2a4\ud2b8\uac00 \uc77c\uc2dc\uc801\uc73c\ub85c \ub5a0\ub09c\ub2e4. \uae30\ub2e4\ub824\uc8fc\uc138\uc694.",live_room_collection_failed:"\uc8c4\uc1a1\ud569\ub2c8\ub2e4. \ud574\ub2f9 \ucfe0\ud3f0\uc740 \ub9cc\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",mcms_buyer_live_yugao_delete_cancel:"\ub77c\uc774\ube0c \ubc29\uc1a1\uc740 \uc0c1\uc778\uc5d0 \uc758\ud574 \uc0ad\uc81c\ub418\uace0 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",unsubscribe:"\ub9ac\ub9c8\uc778\ub354 \uc54c\ub9bc \ucde8\uc18c",live_already_sent_toast:"\uc694\uccad\uc774 \uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4. Livestreamer\ub294 \uace7 \uc2dc\uc5f0\uc744 \ud560 \uac83\uc785\ub2c8\ub2e4.",asc_player_refresh:"\uc2dc\uc2a4\ud15c \uc751\ub2f5\uc774 \ub290\ub9bd\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud558\uc138\uc694.","liverank.history_rank_text":"\uc5ed\uc0ac",mcms_buyer_live_yugao_timeout_end:"\ucd08\uacfc \uadfc\ubb34\ub85c \ub77c\uc774\ube0c \ubc29\uc1a1\uc774 \ubc29\uc1a1\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.",mcms_buyer_live_network_wrong_tips:"\ub124\ud2b8\uc6cc\ud06c\ub97c \ud655\uc778\ud558\uc2ed\uc2dc\uc624.",asc_live_coupon_list_use2:"\uc2dc\uc791:","ive.enableVolume":"\ubcfc\ub968 \ucf1c\uae30",mcms_live10__:"{user_name}(\uc774)\uac00 \uc8fc\ubb38\uc744 \uc2dc\uc791\ud569\ub2c8\ub2e4",mcms_buyer_live_contact_supplier:"\uc811\ucd09 \uacf5\uae09\uc790",have_no_recive_coupon:"\uc8c4\uc1a1\ud569\ub2c8\ub2e4. \ubaa8\ub4e0 \ucfe0\ud3f0\uc774 \uc774\ubbf8 \uc8fc\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",subscribed:"\uad6c\ub3c5\ub418\uc5c8\uc2b5\ub2c8\ub2e4",asc_live_catalog:"\uce74\ud0c8\ub85c\uadf8",already_recive_coupon:"\ucfe0\ud3f0 \uccad\uad6c \uc644\ub8cc",mcms_buyer_live_living_end:"\ub77c\uc774\ube0c \ubc29\uc1a1\uc774 \ub05d\ub0ac\uc2b5\ub2c8\ub2e4.",asc_live_coupon_list_use1:"\ub0b4 \ucfe0\ud3f0 \ubcf4\uae30",mcms_live8__:"\ubc1c\ud45c\uc790\uac00 \uc1fc\ub97c \uace7 \uc2dc\uc791\ud569\ub2c8\ub2e4. \ub3cc\uc544\uc640\uc11c \ub098\uc911\uc5d0 \uc2dc\uccad\ud558\uc138\uc694","liveroom.productslist":"\uc81c\ud488 \ubaa9\ub85d","live.cancel_app":"\ucde8\uc18c",asc_live_coupon_list_title:"\ub77c\uc774\ube0c \uc804\uc6a9 \ucfe0\ud3f0",asc_live_coupon_list_use4:"\ubc1b\uc740 \ucfe0\ud3f0","liveroom.title.replay":"\ud558\uc774\ub77c\uc774\ud2b8 \ub2e4\uc2dc \ubcf4\uae30","live.text.watch_replay":"\uc7ac\uc0dd \ubcf4\uae30","liveroom.text.explaining":"\ub370\ubaa8",live_ask_introdution:"\uc800\uc5d0\uac8c \uc124\uba85\ud574\uc8fc\uc138\uc694",reminder_sucess:"\ub77c\uc774\ube0c \uc1fc\uac00 \uc2dc\uc791\ub420 \ub54c \uc0c1\uae30\uc2dc\ucf1c\ub4dc\ub9bd\ub2c8\ub2e4.","liveroom.text.product.more":"\ub354 \ubcf4\uae30",recive_coupon_comment_title:"\uc9c0\uae08 \ub313\uae00",recive_coupon_common_title:"\ud560\uc778 \ubc14\uc6b0\ucc98","liveroom.entering":"Livestream\uc5d0 \uc624\uc2e0 \uac83\uc744 \ud658\uc601\ud569\ub2c8\ub2e4.",revice_btn_text_message:"\ub313\uae00","live.info.notice.blockError":"\ucf54\uba58\ud2b8\uac00 \uae08\uc9c0\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","live.components.factory.card.order.desc":"\uc9c0\ub09c 6 \uac1c\uc6d4 \ub3d9\uc548\uc758 \uac70\ub798 \uae08\uc561","liveroom.text.changeContent":"\uc575\ucee4\ub294\uc774 \ub0b4\uc6a9\uc5d0 \ub300\ud574 \uc774\uc57c\uae30\ud558\uace0 \uc788\uc73c\uba70 \uc124\uba85\uc744\ubcf4\uace0 \uc788\uc2b5\ub2c8\ub2e4.",scan_with_mobile_app:"\ubaa8\ubc14\uc77c Alibaba.com \uc571\uc5d0\uc11c \uc2a4\uce94(Android 7.12.0 \ubc0f iOS 7.12.1 \uc774\uc0c1)",asc_chat_now:"\uc9c0\uae08 \ucc44\ud305\ud558\uae30",asc_live_coupon_list_use3:"\uc794\uc5ec",detail_chat_now:"\uc9c0\uae08 \ucc44\ud305\ud558\uae30",mcms_live1__:"\ubc1c\ud45c\uc790\uc640 \ub300\ud654\ud558\uae30\ub97c \uc6d0\ud558\uc2ed\ub2c8\uae4c?"}},function(e,t){e.exports={"liveroom.entering":"Willkommen im Livestream",asc_player_refresh:"Das System reagiert langsam. Bitte versuchen Sie es erneut.",mcms_live3__:"Nachricht wurde gesendet","liveroom.text.changeExplanation":"Das Produkt wurde soeben vorgestellt. Sie sehen gerade die Einf\xfchrung.",detail_chat_now:"Jetzt chatten",mcms_buyer_live_living_end:"Die Live-\xdcbertragung ist vorbei","liveroom.productslist":"Produkt liste",mcms_live4__:"Folgen",live_already_sent_toast:"Die Anfrage wurde gesendet. Wird der Livestreamer demn\xe4chst eine Demonstration geben.",revice_btn_text_message:"Kommentar",mcms_buyer_live_replay_fengkong:"Die Live-\xdcbertragung steht im Verdacht des Versto\xdfes gegen den Inhalt und kann nicht angesehen werden",mcms_buyer_live_replay_delete:"Die Live-\xdcbertragung wurde vom H\xe4ndler gel\xf6scht und kann nicht eingesehen werden",revice_btn_text_get:"Jetzt Coupon erhalten","live.cancel_app":"Abbrechen",live_pc_network_slot:"Ihr Netzwerk ist nicht gut. Bitte \xfcberpr\xfcfen Sie Ihr Netzwerk.",mcms_live12__:"{user_name} ist diesem Livestream beigetreten","liveroom.text.explaining":"Demonstration","live.living":"Live",asc_live_coupon_list_use6:"Maximaler Rabatt US {{count}}",recive_coupon_follow_success_title:"Erfolgreich gefolgt!",live_rank_feedback:"Die Rangliste ist leer",mcms_buyer_live_streambreake:"Die Live-\xdcbertragung ist nicht reibungslos, bitte warten Sie einen Moment",mcms_live7__:"Netzwerkfehler. Versuchen Sie es erneut.","liverank.live_rank_time_desc":"Startzeit der Statistik: {{time}}",asc_live_coupon_list_use3:"Verbleibend",live_have_already_sent:"Angefordert",already_recive_coupon:"Coupons angefordert","liveroom.text.loading":"Laden...",unsubscribe:"Erinnerung l\xf6schen",recive_coupon_comment_title:"Kommentar jetzt","liveroom.title.replay":"Highlight-Wiederholung",mcms_live8__:"Der Moderator startet den Stream in K\xfcrze. Kommen Sie sp\xe4ter zur\xfcck, um zuzuschauen.",live_room_send_catalog_success:"Ihre Anfrage f\xfcr einen Katalog wurde gesendet.",reminder_sucess:"Wir werden dich daran erinnern, wenn die Liveshow beginnt.",asc_chat_now:"Jetzt chatten","live.info.notice.blockError":"Kommentare wurden verboten",asc_live_coupon_insufficient_coupons:"Sorry, die Coupons wurden eingesammelt",live_room_Coupon_expired:"Leider ist die Couponsammlung fehlgeschlagen.",asc_live_coupon_list_use7:"Coupons",mcms_live5__:"Aktualisieren",scan_with_mobile_app:"Mit der mobilen Alibaba.com APP scannen (Android ab Version 7.12.0, IOS ab Version 7.12.1)",mcms_live2__:"Diese Nachricht ist verboten.","live.get_catalog":"Katalog bekommen",mcms_seabed28__:"Alle Produkte","liveroom.text.commentplaceholder":"Mit Streamer sprechen",revice_btn_text_fellow:"Folgen",asc_live_coupon_list_title:"Exklusive Coupons f\xfcr Live","liveroom.text.product.more":"Mehr",mcms_live14__:"Die presenter hat vor\xfcbergehend links. Kommen sp\xe4ter wieder zu weiterhin beobachten",mcms_buyer_live_yugao_fengkong_cancel:"Die Live-\xdcbertragung steht im Verdacht der Verletzung des Inhalts und wurde abgebrochen.",have_no_recive_coupon:"Es tut uns leid, alle Coupons wurden bereits beansprucht.",mcms_buyer_live_network_wrong_tips:"Bitte \xfcberpr\xfcfen Sie Ihr Netzwerk","liverank.live_rank_text":"Heute",mcms_live11__:"{user_name} sendet eine Anfrage","live.product_box_empty_text":"Die Liste ist leer, bitte kommunizieren Sie mit dem Host.",asc_live_coupon_list_use2:"Beginnt in",asc_live_coupon_already_received:"Sie haben die Coupons eingesammelt.","liveroom.text.send":"Senden",mcms_live1__:"M\xf6chten Sie mit dem Moderator sprechen?",mcms_buyer_live_suspend:"Gleich wieder da sein.",mcms_buyer_live_yugao_timeout_end:"Die Live-\xdcbertragung wurde wegen \xdcberstunden nicht \xfcbertragen","subscribed.detail":"Abonniert. Die Live-Sitzung beginnt am {{Datum}} und wir werden Sie auffordern, diese p\xfcnktlich um {{Uhrzeit}} anzusehen.",asc_live_catalog:"Katalog","liverank.history_rank_time_desc":"Startzeit der Statistik: {{time}}","live.continue_in_app":"Weiter in der Alibaba.com-App",recive_coupon_comment_success_title:"Erfolgreich kommentiert!",asc_live_coupon_list_use1:"Meine Coupons anzeigen","live.checkCatalog":"Check-Katalog",live_room_buyer_send_catalog_success:"Ihre Anfrage f\xfcr einen Katalog wurde gesendet.","live.open_app":"\xd6ffnen","liveroom.text.view":"Ansicht",coupon_cutdown_text:"Zeitlich begrenzt",mcms_live6__:"Diese Nachricht enth\xe4lt verbotene Sprache.","ive.enableVolume":"Drehen Sie die Lautst\xe4rke auf","liveroom.text.watchmobile":"Live auf dem Handy sehen",asc_live_coupon_to_use:"Jetzt einl\xf6sen",live_ask_introdution:"Erkl\xe4ren Sie mir",mcms_buyer_live_living_end_watch_replay:"Uhr-Wiederholung",mcms_buyer_live_living_fengkong_end:"Die Live-\xdcbertragung wird des Versto\xdfes gegen den Inhalt verd\xe4chtigt und die Live-\xdcbertragung ist beendet","live.unfollowed_text":"Nicht folgen",mcms_moreVideo__:"Weitere Videos","live.info.notice.riskError":"Kommentare wurden wind gesteuert",mcms_buyer_live_network_wrong:"Ihr Netzwerk ist nicht gut.","liverank.history_rank_text":"Geschichte","liveroom.text.getapp":"Holen Sie sich die App",watch_live_on_mobile:"Live auf dem Handy anschauen","liveroom.text.backToLive":"Zur\xfcck zum Leben",mcms_buyer_live_anchor_leave:"Der Gastgeber geht vor\xfcbergehend. Bitte warten Sie.",mcms_buyer_live_yugao_chidao_wait:"Der Kaufmann ist etwas sp\xe4t dran. Bitte warten Sie einen Moment.",recive_coupon_common_title_success:"Coupons angefordert","subscribe.cancel":"Abgemeldet.","live.info.notice.noExitError":"Der aktuelle Antwort kommentar existiert nicht",coupon_recive_title:"Erfolgreich gefolgt! Sie k\xf6nnen jetzt einen Coupon beanspruchen.","liveroom.watch_now":"Jetzt zusehen",subscribed:"Abonniert",asc_live_coupon_get_coupon:"Holen Sie sich Coupons",recive_coupon_common_title:"Rabatt-Gutschein","liveroom.text.directory":"Live-Verzeichnis",subscribe:"Vormerken",live_room_cannot_receive:"H\xe4ndler auf Alibaba.com k\xf6nnen keine Coupons erhalten.",live_room_send_catalog_later:"Die Nachricht wurde gesendet. Bitte warten Sie auf eine Antwort des Lieferanten.",mcms_buyer_live_yugao_delete_cancel:"Die Live-\xdcbertragung wurde vom H\xe4ndler gel\xf6scht und abgebrochen","live.mutedAutoplay":"Stumm spielen","live.text.complain":"Bericht",live_room_collection_failed:"Leider ist der Coupon abgelaufen.",asc_live_coupon_list_use5:"Verf\xfcgbar nach:{{time}}",recive_coupon_follow_title:"Folge livestreamer",revice_btn_text_null:"Alle behaupteten.","live.text.watch_replay":"Wiederholung ansehen","live.components.factory.card.order.desc":"Transaktion betrag in den letzten 6 Monaten","subscribe.success":"Abonniert.",asc_live_coupon_collect_success:"Coupons angefordert",coupon_second:"Sekunden",asc_live_coupon_list_issueing_title:"Gutscheine werden ausgestellt",asc_live_coupon_list_use4:"Coupons erhalten",asc_live_coupon_collect_time:"Dieses Pop-up verschwindet in {{time}} Sekunden.",mcms_live9__:"Live-Countdown",mcms_buyer_live_contact_supplier:"Kontaktieren Sie den Lieferanten",mcms_live13__:"Der Livestream wurde beendet. Danke f\xfcrs Zuschauen.",revice_btn_text_already:"Behauptet",mcms_live10__:"{user_name} beginnt mit einer Bestellung","liveroom.text.changeContent":"Der Anker hat gerade \xfcber diesen Inhalt gesprochen, und Sie sehen sich die Erkl\xe4rung an.","liveroom.text.play_failed":"Im Ger\xe4t ist ein Fehler aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut."}},function(e,t){e.exports={asc_live_coupon_list_title:"\u042d\u043a\u0441\u043a\u043b\u044e\u0437\u0438\u0432\u043d\u044b\u0435 \u043a\u0443\u043f\u043e\u043d\u0430 \u0437\u0430 \u043f\u0440\u044f\u043c\u044b\u0435 \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u0438",asc_live_coupon_list_use5:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u0447\u0435\u0440\u0435\u0437:{{time}}",scan_with_mobile_app:"\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u0443\u0439\u0442\u0435 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 Alibaba.com (\u0434\u043b\u044f Android \u0432\u0435\u0440\u0441\u0438\u0438 7.12.0 \u0438 \u0432\u044b\u0448\u0435 \u0438 iOS \u0432\u0435\u0440\u0441\u0438\u0438 7.12.1 \u0438 \u0432\u044b\u0448\u0435)","live.unfollowed_text":"\u041e\u0442\u0441\u043b\u0435\u0434\u0438\u0442\u044c",asc_live_coupon_list_use2:"\u041d\u0430\u0447\u0430\u043b\u043e \u0447\u0435\u0440\u0435\u0437",asc_player_refresh:"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e \u0440\u0435\u0430\u0433\u0438\u0440\u0443\u0435\u0442. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443.",mcms_buyer_live_anchor_leave:"\u0425\u043e\u0437\u044f\u0438\u043d \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0443\u0445\u043e\u0434\u0438\u0442. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435.",reminder_sucess:"\u041c\u044b \u043d\u0430\u043f\u043e\u043c\u043d\u0438\u043c \u0432\u0430\u043c, \u043a\u043e\u0433\u0434\u0430 \u043d\u0430\u0447\u043d\u0435\u0442\u0441\u044f liveshow.",mcms_buyer_live_living_end_watch_replay:"\u0427\u0430\u0441\u044b replay",live_rank_feedback:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043b\u0438\u0434\u0435\u0440\u043e\u0432 \u043f\u0443\u0441\u0442\u0430",recive_coupon_common_title:"\u0412\u0430\u0443\u0447\u0435\u0440 \u043d\u0430 \u0441\u043a\u0438\u0434\u043a\u0443","subscribed.detail":"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0430. \u0421\u0435\u0430\u043d\u0441 \u0432 \u043f\u0440\u044f\u043c\u043e\u043c \u044d\u0444\u0438\u0440\u0435 \u043d\u0430\u0447\u043d\u0435\u0442\u0441\u044f {{date}}. \u041c\u044b \u043d\u0430\u043f\u043e\u043c\u043d\u0438\u043c \u0432\u0430\u043c \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0435\u0433\u043e \u0432 {{time}}.",mcms_live2__:"\u042d\u0442\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e",mcms_live6__:"\u042d\u0442\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430",already_recive_coupon:"\u041a\u0443\u043f\u043e\u043d\u044b \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b",mcms_live4__:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",live_room_cannot_receive:"\u041f\u0440\u043e\u0434\u0430\u0432\u0446\u044b \u043d\u0430 Alibaba.com \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u043a\u0443\u043f\u043e\u043d\u044b.",mcms_live12__:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c {user_name} \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0441\u044f \u043a \u044d\u0442\u043e\u0439 \u043f\u0440\u044f\u043c\u043e\u0439 \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u0438",mcms_buyer_live_network_wrong:"\u0412\u0430\u0448\u0430 \u0441\u0435\u0442\u044c \u043d\u0435 \u0445\u043e\u0440\u043e\u0448\u0430.","subscribe.cancel":"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430.",live_room_Coupon_expired:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u0443\u043f\u043e\u043d.",recive_coupon_comment_title:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0441\u0435\u0439\u0447\u0430\u0441","liverank.history_rank_time_desc":"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438: {time}",asc_live_catalog:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433",revice_btn_text_message:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",live_room_buyer_send_catalog_success:"\u0412\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d.","live.cancel_app":"\u041e\u0442\u043c\u0435\u043d\u0430",asc_live_coupon_insufficient_coupons:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043a\u0443\u043f\u043e\u043d\u044b \u0431\u044b\u043b\u0438 \u0441\u043e\u0431\u0440\u0430\u043d\u044b",asc_live_coupon_list_use1:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043c\u043e\u0438 \u043a\u0443\u043f\u043e\u043d\u044b","liveroom.text.changeExplanation":"\u041f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430 \u0431\u044b\u043b\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430. \u0412\u044b \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0441\u0435\u0439\u0447\u0430\u0441.",mcms_buyer_live_living_end:"\u041f\u0440\u044f\u043c\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430",watch_live_on_mobile:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u0440\u044f\u043c\u0443\u044e \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044e \u043d\u0430 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435",mcms_buyer_live_streambreake:"\u041f\u0440\u044f\u043c\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u043d\u0435 \u0433\u043b\u0430\u0434\u043a\u0430\u044f, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e",mcms_buyer_live_network_wrong_tips:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0432\u0430\u0448\u0443 \u0441\u0435\u0442\u044c",mcms_live3__:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e","live.product_box_empty_text":"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u0445\u043e\u0441\u0442\u043e\u043c.","liverank.live_rank_time_desc":"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438: {{time}}","live.info.notice.noExitError":"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043e\u0442\u0432\u0435\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442","live.mutedAutoplay":"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0437\u0432\u0443\u043a\u0430",live_have_already_sent:"\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043e",mcms_live5__:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",mcms_buyer_live_yugao_timeout_end:"\u041f\u0440\u044f\u043c\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u043d\u0435 \u0442\u0440\u0430\u043d\u0441\u043b\u0438\u0440\u043e\u0432\u0430\u043b\u0430\u0441\u044c \u0438\u0437-\u0437\u0430 \u043e\u0432\u0435\u0440\u0442\u0430\u0439\u043c\u0430",mcms_live8__:"\u0412\u0435\u0434\u0443\u0449\u0438\u0439 \u0441\u043a\u043e\u0440\u043e \u043d\u0430\u0447\u043d\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0443. \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0439\u0442\u0435\u0441\u044c \u043f\u043e\u0437\u0434\u043d\u0435\u0435 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430",mcms_live13__:"\u041f\u0440\u044f\u043c\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430. \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440.",coupon_cutdown_text:"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u044b\u0439 \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438","liveroom.text.backToLive":"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0436\u0438\u0437\u043d\u0438",mcms_buyer_live_yugao_delete_cancel:"\u041f\u0440\u044f\u043c\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u0431\u044b\u043b\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u043e\u043c \u0438 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430",live_ask_introdution:"\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u0435 \u043c\u043d\u0435","liveroom.text.explaining":"\u0414\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0430\u0446\u0438\u044f",asc_live_coupon_list_use6:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u043a\u0438\u0434\u043a\u0430 US {{count}}","liveroom.title.replay":"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043a\u0440\u0430\u0442\u043a\u043e\u0433\u043e \u043e\u0431\u0437\u043e\u0440\u0430","liveroom.text.loading":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",live_pc_network_slot:"\u0412\u0430\u0448\u0430 \u0441\u0435\u0442\u044c \u043d\u0435 \u0445\u043e\u0440\u043e\u0448\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0432\u0430\u0448\u0443 \u0441\u0435\u0442\u044c.","live.info.notice.riskError":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0431\u044b\u043b\u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u043c\u0438 \u0432\u0435\u0442\u0440\u043e\u043c",mcms_buyer_live_replay_fengkong:"\u041f\u0440\u044f\u043c\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u043f\u043e\u0434\u043e\u0437\u0440\u0435\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0438 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u0438 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0430",mcms_buyer_live_suspend:"\u0411\u044b\u0442\u044c \u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441.",live_already_sent_toast:"\u0417\u0430\u043f\u0440\u043e\u0441 \u0431\u044b\u043b \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d. \u0412 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u044f\u043c\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u0434\u0430\u0441\u0442 \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0430\u0446\u0438\u044e.","live.checkCatalog":"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043a\u0430\u0442\u0430\u043b\u043e\u0433",mcms_seabed28__:"\u0412\u0441\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u044b",asc_live_coupon_already_received:"\u0412\u044b \u0441\u043e\u0431\u0440\u0430\u043b\u0438 \u043a\u0443\u043f\u043e\u043d\u044b.","live.info.notice.blockError":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0431\u044b\u043b\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u044b","subscribe.success":"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0430.",mcms_buyer_live_contact_supplier:"\u0421\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u043c","liveroom.text.changeContent":"\u0412\u0435\u0434\u0443\u0449\u0438\u0439 \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u043b \u043e\u0431 \u044d\u0442\u043e\u043c \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0435, \u0438 \u0432\u044b \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043e\u0431\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u0435.",asc_live_coupon_list_issueing_title:"\u041a\u0443\u043f\u043e\u043d\u044b \u0432\u044b\u0434\u0430\u044e\u0442\u0441\u044f",asc_live_coupon_list_use4:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u043a\u0443\u043f\u043e\u043d\u044b",live_room_send_catalog_later:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0434\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u043e\u0442\u0432\u0435\u0442\u0430 \u043e\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0430.",mcms_live7__:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",recive_coupon_follow_title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043f\u0440\u044f\u043c\u043e\u0439 \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u0438","ive.enableVolume":"\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u0435 \u0433\u0440\u043e\u043c\u043a\u043e\u0441\u0442\u044c","live.get_catalog":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u0430\u0442\u0430\u043b\u043e\u0433",asc_live_coupon_list_use3:"\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c","liveroom.text.product.more":"\u0411\u043e\u043b\u044c\u0448\u0435","liveroom.productslist":"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432","liverank.live_rank_text":"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",revice_btn_text_fellow:"\u0421\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u044c",have_no_recive_coupon:"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0432\u0441\u0435 \u043a\u0443\u043f\u043e\u043d\u044b \u0443\u0436\u0435 \u0432\u043e\u0441\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u044b.",asc_live_coupon_list_use7:"\u043a\u0443\u043f\u043e\u043d\u044b","live.text.watch_replay":"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u043e\u0432\u0442\u043e\u0440",asc_live_coupon_get_coupon:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u0443\u043f\u043e\u043d\u044b",mcms_buyer_live_yugao_chidao_wait:"\u041a\u0443\u043f\u0435\u0446 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e\u043f\u0430\u0437\u0434\u044b\u0432\u0430\u0435\u0442. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043c\u0438\u043d\u0443\u0442\u043a\u0443.","liveroom.text.directory":"\u0416\u0438\u0432\u043e\u0439 \u043a\u0430\u0442\u0430\u043b\u043e\u0433",mcms_live1__:"\u0425\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u0442\u044c \u0441 \u0432\u0435\u0434\u0443\u0449\u0438\u043c?","liveroom.text.play_failed":"\u0421\u0431\u043e\u0439 \u0432 \u0440\u0430\u0431\u043e\u0442\u0435 \u043f\u043b\u0435\u0435\u0440\u0430. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435.",revice_btn_text_null:"\u0412\u0441\u0435 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u044b.",coupon_second:"\u0421\u0435\u043a\u0443\u043d\u0434\u044b",subscribe:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0435",mcms_live9__:"\u041e\u0431\u0440\u0430\u0442\u043d\u044b\u0439 \u043e\u0442\u0441\u0447\u0435\u0442 \u0434\u043e \u043f\u0440\u044f\u043c\u043e\u0433\u043e \u044d\u0444\u0438\u0440\u0430","liveroom.text.view":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",revice_btn_text_already:"\u0417\u0430\u044f\u0432\u043b\u0435\u043d\u043d\u044b\u0439",mcms_moreVideo__:"\u0414\u0440\u0443\u0433\u0438\u0435 \u0432\u0438\u0434\u0435\u043e",unsubscribe:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0435","liveroom.text.getapp":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435",asc_live_coupon_collect_time:"\u042d\u0442\u043e \u0432\u0441\u043f\u043b\u044b\u0432\u0430\u044e\u0449\u0435\u0435 \u043e\u043a\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043a\u0440\u044b\u0442\u043e \u0447\u0435\u0440\u0435\u0437 {{time}} \u0441\u0435\u043a.",detail_chat_now:"\u041d\u0430\u0447\u0430\u0442\u044c \u0447\u0430\u0442","live.open_app":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c",recive_coupon_follow_success_title:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043b!",mcms_buyer_live_yugao_fengkong_cancel:"\u041f\u0440\u044f\u043c\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u043f\u043e\u0434\u043e\u0437\u0440\u0435\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0438 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u0438 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430.",asc_chat_now:"\u041d\u0430\u0447\u0430\u0442\u044c \u0447\u0430\u0442","liveroom.text.commentplaceholder":"\u041f\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u0442\u044c \u0441\u043e \u0441\u0442\u0440\u0438\u043c\u0435\u0440\u043e\u043c",mcms_live10__:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c {user_name} \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430",recive_coupon_common_title_success:"\u041a\u0443\u043f\u043e\u043d\u044b \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b",mcms_live14__:"\u0412\u0435\u0434\u0443\u0449\u0438\u0439 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0443\u0448\u0451\u043b. \u0412\u0435\u0440\u043d\u0443\u0441\u044c \u043f\u043e\u0437\u0436\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440","live.continue_in_app":"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 Alibaba.com",mcms_live11__:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c {user_name} \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441","liveroom.text.send":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c","liverank.history_rank_text":"\u0418\u0441\u0442\u043e\u0440\u0438\u044f","liveroom.entering":"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u043f\u0440\u044f\u043c\u0443\u044e \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044e","liveroom.text.watchmobile":"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 \u043f\u0440\u044f\u043c\u043e\u043c \u044d\u0444\u0438\u0440\u0435 \u043d\u0430 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u043c \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0435","live.components.factory.card.order.desc":"\u0421\u0443\u043c\u043c\u0430 \u0441\u0434\u0435\u043b\u043a\u0438 \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 6 \u043c\u0435\u0441\u044f\u0446\u0435\u0432",mcms_buyer_live_replay_delete:"\u041f\u0440\u044f\u043c\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u0431\u044b\u043b\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u043e\u043c \u0438 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0430",revice_btn_text_get:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u0443\u043f\u043e\u043d \u0441\u0435\u0439\u0447\u0430\u0441","live.text.complain":"\u0414\u043e\u043a\u043b\u0430\u0434",asc_live_coupon_to_use:"\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0439\u0447\u0430\u0441",asc_live_coupon_collect_success:"\u041a\u0443\u043f\u043e\u043d\u044b \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b",live_room_collection_failed:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0441\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043a\u0443\u043f\u043e\u043d\u0430 \u0438\u0441\u0442\u0435\u043a.","liveroom.watch_now":"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0435\u0439\u0447\u0430\u0441",live_room_send_catalog_success:"\u0412\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d.",subscribed:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u044b",mcms_buyer_live_living_fengkong_end:"\u041f\u0440\u044f\u043c\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u043f\u043e\u0434\u043e\u0437\u0440\u0435\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0438 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430, \u0430 \u043f\u0440\u044f\u043c\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0430\u0441\u044c",coupon_recive_title:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043b! \u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c \u043a\u0443\u043f\u043e\u043d.",recive_coupon_comment_success_title:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u0440\u043e\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043b!"}},function(e,t){e.exports={asc_player_refresh:"Le syst\xe8me r\xe9agit lentement. Veuillez r\xe9essayer.","subscribe.cancel":"D\xe9sabonn\xe9.",mcms_buyer_live_living_fengkong_end:"La diffusion en direct est soup\xe7onn\xe9e de violation de contenu et la diffusion en direct est termin\xe9e",watch_live_on_mobile:"Regardez en direct sur mobile",mcms_live12__:"{user_name} est entr\xe9 dans cette diffusion en direct",live_ask_introdution:"Expliquez-moi",subscribed:"Abonn\xe9","liveroom.text.backToLive":"Retour \xe0 vivre",asc_live_coupon_list_use5:"Disponible apr\xe8s:{{time}}",recive_coupon_comment_title:"Commentaire maintenant",mcms_buyer_live_network_wrong:"Votre r\xe9seau n'est pas bon.",recive_coupon_common_title:"Bon de r\xe9duction",mcms_live6__:"Ce message contient un vocabulaire interdit","liveroom.text.send":"Envoyer",mcms_live9__:"Compte \xe0 rebours en direct",mcms_buyer_live_network_wrong_tips:"S'il vous pla\xeet v\xe9rifier votre r\xe9seau",reminder_sucess:"Nous vous rappellerons quand le liveshow commencera.","live.unfollowed_text":"D\xe9suivre",mcms_live1__:"Vous souhaitez parler au pr\xe9sentateur ?",asc_live_coupon_collect_success:"Coupons r\xe9clam\xe9s",mcms_live3__:"Message envoy\xe9","liveroom.text.commentplaceholder":"Parler \xe0 streamer",mcms_live14__:"Le pr\xe9sentateur est parti temporairement. Revenez plus tard pour continuer \xe0 regarder",unsubscribe:"Annuler le rappel",mcms_buyer_live_yugao_fengkong_cancel:"La diffusion en direct est soup\xe7onn\xe9e de violation de contenu et a \xe9t\xe9 annul\xe9e.","liverank.history_rank_text":"Histoire",live_rank_feedback:"Le leaderboard est vide","ive.enableVolume":"Monter le volume","liveroom.text.play_failed":"Une erreur s'est produite dans le lecteur. Veuillez r\xe9essayer plus tard.","live.text.complain":"Rapport",mcms_buyer_live_living_end:"La diffusion en direct est termin\xe9e","live.open_app":"Ouvrir","live.text.watch_replay":"Visionner la rediffusion",asc_live_coupon_list_use1:"Voir mes coupons",live_pc_network_slot:"Votre r\xe9seau n'est pas bon. S'il vous pla\xeet v\xe9rifier votre r\xe9seau.",mcms_buyer_live_living_end_watch_replay:"Regarder la rediffusion",mcms_buyer_live_suspend:"\xcatre de retour tout de suite.","liveroom.title.replay":"Relecture des points saillants",asc_live_coupon_to_use:"\xc9changez maintenant","live.checkCatalog":"V\xe9rifier le catalogue","liveroom.text.changeContent":"L'ancre vient de parler de ce contenu, et vous regardez l'explication.","liveroom.text.watchmobile":"Regarder en direct sur mobile",asc_chat_now:"Discuter maintenant",mcms_live10__:"{user_name} commence une commande",asc_live_coupon_list_title:"Coupons exclusifs pour le direct","liverank.live_rank_time_desc":"Heure de d\xe9but des statistiques: {{time}}",asc_live_catalog:"Catalogue",asc_live_coupon_already_received:"Vous avez collect\xe9 les coupons.",mcms_live5__:"Actualiser","liverank.history_rank_time_desc":"Heure de d\xe9but des statistiques: {{time}}",live_room_cannot_receive:"Les commer\xe7ants sur Alibaba.com ne peuvent pas recevoir de coupons.","liveroom.text.directory":"R\xe9pertoire en direct",revice_btn_text_message:"Commentaire",live_already_sent_toast:"La demande a \xe9t\xe9 envoy\xe9e. Le livestreamer fera bient\xf4t une d\xe9monstration.","live.info.notice.blockError":"Les commentaires ont \xe9t\xe9 interdits",mcms_buyer_live_replay_delete:"La diffusion en direct a \xe9t\xe9 supprim\xe9e par le commer\xe7ant et ne peut pas \xeatre visionn\xe9e",mcms_buyer_live_yugao_delete_cancel:"Le direct a \xe9t\xe9 supprim\xe9 par le commer\xe7ant et annul\xe9","liveroom.productslist":"Liste des produits",revice_btn_text_already:"A r\xe9clam\xe9","live.mutedAutoplay":"Jouer muet",revice_btn_text_null:"Toutes revendiqu\xe9es.","live.info.notice.noExitError":"Le commentaire en r\xe9ponse actuel n'existe pas",coupon_recive_title:"Suivi avec succ\xe8s! Vous pouvez maintenant r\xe9clamer un coupon.",asc_live_coupon_list_use7:"Coupons",detail_chat_now:"Discuter maintenant",asc_live_coupon_get_coupon:"Obtenez des coupons",revice_btn_text_fellow:"Suivre","liveroom.watch_now":"Regarder maintenant",mcms_buyer_live_replay_fengkong:"La diffusion en direct est soup\xe7onn\xe9e d'infraction au contenu et ne peut pas \xeatre regard\xe9e",have_no_recive_coupon:"Nous sommes d\xe9sol\xe9s, tous les coupons ont d\xe9j\xe0 \xe9t\xe9 r\xe9clam\xe9s.",scan_with_mobile_app:"Scannez avec l'application mobile Alibaba.com (Android au-dessus de 7.12.0, IOS au-dessus de 7.12.1)",revice_btn_text_get:"Obtenez le coupon maintenant",asc_live_coupon_list_issueing_title:"Coupons en cours d'\xe9mission","liverank.live_rank_text":"Aujourd'hui",mcms_live2__:"Ce message est interdit",mcms_buyer_live_streambreake:"La diffusion en direct n'est pas fluide, veuillez patienter un moment","liveroom.text.changeExplanation":"Le produit vient d\u2019\xeatre introduit. Vous regardez maintenant l\u2019introduction.",mcms_buyer_live_yugao_chidao_wait:"Le marchand est un peu en retard. Veuillez patienter un moment.",asc_live_coupon_collect_time:"Ce pop-up dispara\xeetra dans {{time}} secondes.",recive_coupon_follow_title:"Suivre livestreamer","live.get_catalog":"Obtenir un catalogue",mcms_live4__:"Suivre",coupon_second:"Secondes",asc_live_coupon_list_use4:"Coupons re\xe7us",recive_coupon_follow_success_title:"Suivi avec succ\xe8s!",asc_live_coupon_list_use2:"Commence dans","subscribed.detail":"Souscrit. La session en direct commencera le {{date}}, et nous vous inviterons \xe0 la regarder {{heure}}.",mcms_buyer_live_contact_supplier:"Contacter le fournisseur","liveroom.entering":"Bienvenue venez au livestream",coupon_cutdown_text:"Limit\xe9 dans le temps",live_room_collection_failed:"D\xe9sol\xe9, le coupon a expir\xe9.",asc_live_coupon_insufficient_coupons:"D\xe9sol\xe9, tous les coupons ont \xe9t\xe9 collect\xe9s",live_have_already_sent:"Requested",live_room_Coupon_expired:"D\xe9sol\xe9, la collecte des coupons a \xe9chou\xe9.","liveroom.text.explaining":"D\xe9monstration",mcms_seabed28__:"Tous les produits",already_recive_coupon:"Coupons r\xe9clam\xe9s","live.cancel_app":"Annuler","liveroom.text.loading":"Chargement...","liveroom.text.view":"Vue",mcms_buyer_live_yugao_timeout_end:"La diffusion en direct n'a pas \xe9t\xe9 diffus\xe9e en raison des heures suppl\xe9mentaires",recive_coupon_comment_success_title:"Avec succ\xe8s comment\xe9!","subscribe.success":"Souscrit.","live.product_box_empty_text":"La liste est vide, veuillez communiquer avec l'h\xf4te.",asc_live_coupon_list_use6:"R\xe9duction maximale {{count}} US","live.continue_in_app":"Continuer sur l'APP Alibaba.com",mcms_live11__:"{user_name} envoie une demande",recive_coupon_common_title_success:"Coupons r\xe9clam\xe9s",mcms_live8__:"Le pr\xe9sentateur va bient\xf4t commencer la diffusion. Revenez plus tard pour regarder","liveroom.text.getapp":"Obtenir l'application",mcms_buyer_live_anchor_leave:"L'h\xf4te part temporairement. Veuillez patienter.",mcms_live13__:"Le direct est termin\xe9. Merci de l\u2019avoir regard\xe9.",mcms_live7__:"Erreur de r\xe9seau, veuillez r\xe9essayer",asc_live_coupon_list_use3:"Restants",subscribe:"D\xe9finir un rappel","live.info.notice.riskError":"Les commentaires ont \xe9t\xe9 contr\xf4l\xe9s par le vent","live.components.factory.card.order.desc":"Montant de la Transaction au cours des 6 derniers mois",mcms_moreVideo__:"Plus de vid\xe9os","liveroom.text.product.more":"Plus"}},function(e,t){e.exports={"liveroom.title.replay":"\u0ab9\u0abe\u0a87\u0ab2\u0abe\u0a87\u0a9f \u0ab0\u0abf\u0aaa\u0acd\u0ab2\u0ac7","subscribed.detail":"\u0ab8\u0aac\u0acd\u0ab8\u0acd\u0a95\u0acd\u0ab0\u0abe\u0a87\u0aac \u0a95\u0ab0\u0acd\u0aaf\u0ac1. \u0a9c\u0ac0\u0ab5\u0a82\u0aa4 \u0ab8\u0aa4\u0acd\u0ab0 {{date}} \u0aa5\u0ac0 \u0ab6\u0ab0\u0ac2 \u0aa5\u0ab6\u0ac7,\u0a85\u0aa8\u0ac7 \u0a85\u0aae\u0ac7 \u0aa4\u0aae\u0aa8\u0ac7 \u0aa4\u0ac7\u0aa8\u0ac7 {{time}} \u0aaa\u0ab0 \u0ab8\u0aae\u0aaf\u0ab8\u0ab0 \u0a9c\u0acb\u0ab5\u0abe \u0aae\u0abe\u0a9f\u0ac7 \u0aaa\u0acd\u0ab0\u0ac7\u0ab0\u0abf\u0aa4 \u0a95\u0ab0\u0ac0\u0ab6\u0ac1\u0a82.",subscribed:"\u0ab8\u0aac\u0acd\u0ab8\u0acd\u0a95\u0acd\u0ab0\u0abe\u0a87\u0aac \u0a95\u0ab0\u0acd\u0aaf\u0ac1\u0a82"}},function(e,t){e.exports={"liveroom.text.send":"Verzenden",have_no_recive_coupon:"Het spijt ons, alle kortingsbonnen zijn al geclaimd.",asc_live_coupon_collect_success:"Geclaimde kortingsbonnen",mcms_live12__:"{user_name} is deze livestream binnengekomen",asc_live_coupon_list_use3:"Resterend",mcms_buyer_live_contact_supplier:"Contact leverancier",mcms_buyer_live_streambreake:"De live uitzending is niet soepel, wacht alsjeblieft even","live.checkCatalog":"Catalogus controleren","liveroom.text.changeExplanation":"Het product is net geintroduceerd. U kijkt nu naar de introductie.",mcms_live8__:"De presentator begint binnenkort met de show. Kom later terug om te kijken",mcms_live4__:"Volgen",asc_live_coupon_list_use2:"Begint over","live.continue_in_app":"Ga verder in de Alibaba.com-app",recive_coupon_common_title_success:"Geclaimde kortingsbonnen","ive.enableVolume":"Zet het volume omhoog",revice_btn_text_fellow:"Volg","live.mutedAutoplay":"Mute spelen",recive_coupon_follow_success_title:"Met succes gevolgd!",reminder_sucess:"We zullen je herinneren wanneer het leven begint.",mcms_buyer_live_replay_fengkong:"De live uitzending wordt verdacht van inhoudsovertreding en kan niet worden bekeken","live.product_box_empty_text":"De lijst is leeg, gelieve te communiceren met de host.","liveroom.entering":"Welkom kom naar de ream",mcms_moreVideo__:"Meer video's",asc_chat_now:"Nu chatten",scan_with_mobile_app:"Scannen met mobiele APP Alibaba.com (Android hoger dan 7.12.0, iOS hoger dan 7.12.1)","liveroom.productslist":"Productlijst",live_room_collection_failed:"Sorry, de coupon is verlopen.","liverank.history_rank_time_desc":"Starttijd van statistieken: {{time}}","live.cancel_app":"Annuleren",already_recive_coupon:"Geclaimde kortingsbonnen",asc_live_coupon_list_use6:"Maximale korting US {{count}}",mcms_buyer_live_suspend:"Kom meteen terug.",mcms_live2__:"Dit bericht is verboden",live_have_already_sent:"Aangevraagd",asc_live_coupon_list_use4:"Coupons ontvangen",coupon_second:"Seconden","live.components.factory.card.order.desc":"Transactiebedrag in de afgelopen 6 maanden",mcms_live11__:"{user_name} stuurt een aanvraag","subscribe.success":"Geabonneerd.",asc_live_coupon_collect_time:"Deze pop-up verdwijnt over {{time}} seconden.","liveroom.text.watchmobile":"Bekijk live op mobiel",live_rank_feedback:"Het leaderboard is leeg",mcms_live9__:"Live countdown",mcms_buyer_live_living_end_watch_replay:"Bekijk replay",subscribe:"Herinnering instellen",asc_live_coupon_to_use:"Nu inwisselen",mcms_buyer_live_network_wrong_tips:"Controleer uw netwerk",live_room_cannot_receive:"Verkopers op Alibaba.com kunnen geen coupons ontvangen.",recive_coupon_common_title:"Kortingsbon","liveroom.text.play_failed":"Er is een fout opgetreden in de speler. Probeer het later opnieuw.","liveroom.text.product.more":"Meer",asc_live_coupon_list_use5:"Beschikbaar na:{{time}}",revice_btn_text_message:"Opmerking",asc_live_coupon_get_coupon:"Ontvang coupons",asc_player_refresh:"Het systeem reageert langzaam. Probeer het alstublieft opnieuw.",live_already_sent_toast:"Het verzoek is verzonden. De reamer zal binnenkort een demonstratie geven.",mcms_buyer_live_yugao_timeout_end:"De live uitzending werd niet uitgezonden vanwege overuren","liveroom.text.getapp":"Krijg de app","liveroom.watch_now":"Kijk nu","live.text.complain":"Rapport",coupon_cutdown_text:"Tijd-beperkt","liveroom.text.loading":"Laden...",coupon_recive_title:"Met succes gevolgd! U kunt nu een coupon aanvragen.","live.text.watch_replay":"Herhaling bekijken",mcms_buyer_live_yugao_chidao_wait:"De handelaar is een beetje te laat. Wacht alstublieft even.",revice_btn_text_get:"Krijg nu een coupon",revice_btn_text_already:"Claimde","live.info.notice.riskError":"Reacties zijn door de wind gecontroleerd",mcms_buyer_live_anchor_leave:"De gastheer vertrekt tijdelijk.",mcms_buyer_live_yugao_delete_cancel:"De live uitzending is verwijderd door de handelaar en geannuleerd",asc_live_coupon_insufficient_coupons:"Sorry, u hebt de coupons al ontvangen",mcms_live7__:"Netwerkfout, probeer opnieuw","liverank.live_rank_text":"Vandaag","liverank.history_rank_text":"Geschiedenis","live.open_app":"Openen","live.unfollowed_text":"Niet volgen",unsubscribe:"Herinnering annuleren",asc_live_catalog:"Catalogus","liveroom.text.commentplaceholder":"Praat met streamer","live.info.notice.noExitError":"De huidige reactie opmerking bestaat niet",recive_coupon_follow_title:"Volg reamer",mcms_buyer_live_network_wrong:"Je netwerk is niet goed.","liveroom.text.view":"Bekijk","live.info.notice.blockError":"Opmerkingen zijn verboden",mcms_buyer_live_living_fengkong_end:"De live-uitzending wordt verdacht van inhoudsovertreding en de live-uitzending is be\xebindigd",mcms_buyer_live_yugao_fengkong_cancel:"De live uitzending wordt verdacht van inhoudsovertreding en is geannuleerd.",detail_chat_now:"Nu chatten",mcms_live6__:"Dit bericht bevat verboden taal","liveroom.text.changeContent":"Het anker heeft zojuist over deze inhoud gepraat en u kijkt naar de uitleg.",watch_live_on_mobile:"Kijk live op mobiel",mcms_live5__:"Vernieuwen","subscribe.cancel":"Afgemeld.",recive_coupon_comment_success_title:"Met succes gereageerd!","liveroom.text.backToLive":"Terug naar leven",live_room_Coupon_expired:"Sorry, het ophalen van de coupon is mislukt.",mcms_live14__:"De presentator heeft tijdelijk links. Komen later terug te blijven kijken",asc_live_coupon_list_issueing_title:"Coupons die worden uitgegeven",mcms_buyer_live_living_end:"De live uitzending is voorbij",mcms_live10__:"{user_name} start een bestelling",live_room_send_catalog_success:"Uw verzoek om een catalogus is verzonden.","liveroom.text.directory":"Live directory","liverank.live_rank_time_desc":"Starttijd van statistieken: {{time}}",asc_live_coupon_list_title:"Exclusieve coupons voor live",mcms_live3__:"Bericht verzonden","liveroom.text.explaining":"Demonstratie",asc_live_coupon_list_use1:"Mijn coupons bekijken","subscribed.detail":"Geabonneerd. De live-sessie begint op {{date}}, en we vragen u om op tijd te komen kijken om {{time}}.",live_ask_introdution:"Leg het me uit",mcms_buyer_live_replay_delete:"De live uitzending is verwijderd door de handelaar en kan niet worden bekeken",subscribed:"Geabonneerd",revice_btn_text_null:"Allemaal verklaard.",mcms_live13__:"De livestream is afgelopen. Bedankt voor het kijken.",live_room_buyer_send_catalog_success:"Uw verzoek om een catalogus is verzonden.",asc_live_coupon_already_received:"U hebt de coupons ontvangen.",recive_coupon_comment_title:"Reageer nu",mcms_live1__:"Wil je met de presentator praten?",mcms_seabed28__:"Alle producten",live_pc_network_slot:"Je netwerk is niet goed. Controleer uw netwerk.",asc_live_coupon_list_use7:"coupons",live_room_send_catalog_later:"Het bericht is verzonden. Wacht op een antwoord van de leverancier."}},function(e,t){e.exports={recive_coupon_common_title:"\u1012\u1005\u1039\u1005\u1000\u1031\u102c\u1004\u1037\u103a \u1018\u1031\u102c\u1000\u103a\u1001\u103b\u102c",unsubscribe:"\u101e\u1010\u102d\u1015\u1031\u1038\u1019\u103e\u1010\u103a \u101b\u102f\u1015\u103a\u101e\u102d\u1019\u103a\u1038\u1015\u103c\u102e",live_room_buyer_send_catalog_success:"\u1000\u1010\u103a\u1010\u101c\u1031\u102c\u1000\u103a \u1010\u1031\u102c\u1004\u103a\u1038\u1006\u102d\u102f\u1001\u103b\u1000\u103a \u1015\u102d\u102f\u1037\u101c\u102d\u102f\u1000\u103a\u1015\u103c\u102e\u104b",asc_player_refresh:"\u1005\u1014\u1005\u103a\u104f\u1010\u102f\u1036\u1037\u1015\u103c\u1014\u103a\u1019\u103e\u102f \u1014\u103e\u1031\u1038\u1000\u103d\u1031\u1038\u1014\u1031\u1015\u102b\u101e\u100a\u103a\u104b \u1011\u1015\u103a\u1019\u1036\u1000\u103c\u102d\u102f\u1038\u1005\u102c\u1038\u1000\u103c\u100a\u1037\u103a\u1015\u1031\u1038\u1015\u102b\u104b",live_room_send_catalog_later:"\u1019\u1000\u103a\u1006\u1031\u1037\u1001\u103b\u103a \u1015\u102d\u102f\u1037\u101c\u102d\u102f\u1000\u103a\u1015\u103c\u102e\u104b \u1015\u1005\u1039\u1005\u100a\u103a\u1038\u101b\u1031\u102c\u1004\u103a\u1038\u1001\u103b\u101e\u100a\u1037\u103a \u1000\u102f\u1019\u1039\u1015\u100f\u102e\u1011\u1036\u1019\u103e \u1015\u103c\u1014\u103a\u1005\u102c\u1000\u102d\u102f \u1005\u1031\u102c\u1004\u1037\u103a\u1015\u102b\u104b","liveroom.text.explaining":"\u101e\u101b\u102f\u1015\u103a\u1015\u103c\u101e\u1019\u103e\u102f",asc_live_coupon_collect_time:"\u1024\u1015\u1031\u102b\u1037\u1015\u103a\u1021\u1015\u103a\u101e\u100a\u103a {{time}} \u1005\u1000\u1039\u1000\u1014\u103a\u1037\u1021\u1000\u103c\u102c\u1010\u103d\u1004\u103a \u1015\u103b\u1031\u102c\u1000\u103a\u101e\u103d\u102c\u1038\u1015\u102b\u101c\u102d\u1019\u1037\u103a\u1019\u100a\u103a\u104b","subscribed.detail":"\u1005\u102c\u101b\u1004\u103a\u1038\u101e\u103d\u1004\u103a\u1038\u1011\u102c\u1038\u101e\u100a\u103a\u104b \u101c\u102d\u102f\u1000\u103a\u1016\u103a\u1000\u100f\u1039\u100d\u101e\u100a\u103a {{date}} \u1010\u103d\u1004\u103a \u1005\u1010\u1004\u103a\u101c\u102d\u1019\u1037\u103a\u1019\u100a\u103a\u1016\u103c\u1005\u103a\u1000\u102c\u104a \u101e\u1004\u103a\u101e\u100a\u103a {{time}} \u1010\u103d\u1004\u103a \u1021\u1001\u103b\u102d\u1014\u103a\u1019\u102e\u1000\u103c\u100a\u1037\u103a\u101b\u103e\u102f\u1014\u102d\u102f\u1004\u103a\u101b\u1014\u103a \u1000\u103b\u103d\u1014\u103a\u102f\u1015\u103a\u1010\u102d\u102f\u1037\u1000 \u101e\u1004\u1037\u103a\u1000\u102d\u102f \u1005\u1031\u1037\u1006\u1031\u102c\u103a\u1015\u102b\u1019\u100a\u103a\u104b","live.cancel_app":"\u1015\u101a\u103a\u1016\u103b\u1000\u103a\u1015\u102b",live_room_send_catalog_success:"\u1000\u1010\u103a\u1010\u101c\u1031\u102c\u1000\u103a \u1010\u1031\u102c\u1004\u103a\u1038\u1006\u102d\u102f\u1001\u103b\u1000\u103a \u1015\u102d\u102f\u1037\u101c\u102d\u102f\u1000\u103a\u1015\u103c\u102e\u104b","live.open_app":"\u1016\u103d\u1004\u1037\u103a",mcms_live13__:"\u1010\u102d\u102f\u1000\u103a\u101b\u102d\u102f\u1000\u103a\u101c\u103d\u103e\u1004\u1037\u103a \u1021\u1005\u102e\u1021\u1005\u1009\u103a \u1015\u103c\u102e\u1038\u1015\u102b\u1015\u103c\u102e\u104b \u1000\u103c\u100a\u1037\u103a\u101b\u103e\u102f\u1015\u1031\u1038\u101e\u100a\u1037\u103a\u1021\u1010\u103d\u1000\u103a \u1000\u103b\u1031\u1038\u1007\u1030\u1038\u1010\u1004\u103a\u1015\u102b\u101e\u100a\u103a\u104b","liveroom.text.play_failed":"\u1000\u1005\u102c\u1038\u101e\u1019\u102c\u1038\u1010\u103d\u1004\u103a \u1021\u1019\u103e\u102c\u1038\u1010\u1005\u103a\u1001\u102f \u1016\u103c\u1005\u103a\u1015\u1031\u102b\u103a\u1014\u1031\u1015\u102b\u101e\u100a\u103a\u104b \u1014\u1031\u102c\u1000\u103a\u1019\u103e \u1011\u1015\u103a\u1019\u1036\u1000\u103c\u102d\u102f\u1038\u1005\u102c\u1038\u1000\u103c\u100a\u1037\u103a\u1015\u1031\u1038\u1015\u102b\u104b",subscribed:"\u1005\u102c\u101b\u1004\u103a\u1038\u101e\u103d\u1004\u103a\u1038","live.continue_in_app":"Alibaba.com \u1021\u1000\u103a\u1015\u103a\u1010\u103d\u1004\u103a \u1006\u1000\u103a\u101c\u102f\u1015\u103a\u1019\u100a\u103a",subscribe:"\u101e\u1010\u102d\u1015\u1031\u1038\u1019\u103e\u1010\u103a \u1011\u102c\u1038\u101b\u1014\u103a"}},function(e,t){e.exports={mcms_live13__:"\u09b2\u09be\u0987\u09ad\u09b8\u09cd\u099f\u09cd\u09b0\u09bf\u09ae\u099f\u09bf \u09b8\u09ae\u09be\u09aa\u09cd\u09a4 \u09b9\u09df\u09c7\u099b\u09c7\u0964 \u09a6\u09c7\u0996\u09be\u09b0 \u099c\u09a8\u09cd\u09af \u09a7\u09a8\u09cd\u09af\u09ac\u09be\u09a6\u0964",asc_live_coupon_collect_success:"\u0995\u09c1\u09aa\u09a8\u09c7\u09b0 \u09a6\u09be\u09ac\u09bf \u0995\u09b0\u09be \u09b9\u09df\u09c7\u099b\u09c7",asc_live_coupon_collect_time:"\u098f\u0987 \u09aa\u09aa-\u0986\u09aa\u099f\u09bf {{time}} \u09b8\u09c7\u0995\u09c7\u09a8\u09cd\u09a1\u09c7\u09b0 \u09ae\u09a7\u09cd\u09af\u09c7 \u099a\u09b2\u09c7 \u09af\u09be\u09ac\u09c7",unsubscribe:"\u09b0\u09bf\u09ae\u09be\u0987\u09a8\u09cd\u09a1\u09be\u09b0 \u09ac\u09be\u09a4\u09bf\u09b2 \u0995\u09b0\u09c1\u09a8","subscribed.detail":"\u09b8\u09be\u09ac\u09b8\u09cd\u0995\u09cd\u09b0\u09be\u0987\u09ac \u0995\u09b0\u09be \u09b9\u09df\u09c7\u099b\u09c7\u0964 \u09b2\u09be\u0987\u09ad \u09b8\u09c7\u09b6\u09a8 {{date}} \u098f \u09b6\u09c1\u09b0\u09c1 \u09b9\u09ac\u09c7, \u098f\u09ac\u0982 \u0986\u09ae\u09b0\u09be \u0986\u09aa\u09a8\u09be\u0995\u09c7 {{time}} \u098f \u09ae\u09a8\u09c7 \u0995\u09b0\u09bf\u09df\u09c7 \u09a6\u09bf\u09ac \u098f\u099f\u09bf\u0995\u09c7 \u09b8\u09a0\u09bf\u0995 \u09b8\u09ae\u09df\u09c7 \u09a6\u09c7\u0996\u09be\u09b0 \u099c\u09a8\u09cd\u09af\u0964",recive_coupon_common_title_success:"\u0995\u09c1\u09aa\u09a8\u09c7\u09b0 \u09a6\u09be\u09ac\u09bf \u0995\u09b0\u09be \u09b9\u09df\u09c7\u099b\u09c7",subscribed:"\u09b8\u09be\u09ac\u09b8\u09cd\u0995\u09cd\u09b0\u09be\u0987\u09ac \u0995\u09b0\u09be \u09b9\u09af\u09bc\u09c7\u099b\u09c7","liveroom.text.play_failed":"\u09aa\u09cd\u09b2\u09c7\u09df\u09be\u09b0\u09c7 \u098f\u0995\u099f\u09bf \u09a4\u09cd\u09b0\u09c2\u099f\u09bf \u09a6\u09c7\u0996\u09be \u09a6\u09bf\u09df\u09c7\u099b\u09c7\u0964  \u0985\u09a8\u09c1\u0997\u09cd\u09b0\u09b9 \u0995\u09b0\u09c7 \u09aa\u09b0\u09c7 \u0986\u09ac\u09be\u09b0 \u099a\u09c7\u09b7\u09cd\u099f\u09be \u0995\u09b0\u09c1\u09a8\u0964",live_room_send_catalog_later:"\u09ae\u09c7\u09b8\u09c7\u099c\u099f\u09bf \u09aa\u09be\u09a0\u09be\u09a8\u09cb \u09b9\u09df\u09c7\u099b\u09c7\u0964 \u09a6\u09df\u09be \u0995\u09b0\u09c7 \u09b8\u09b0\u09ac\u09b0\u09be\u09b9\u0995\u09be\u09b0\u09c0\u09b0 \u09a5\u09c7\u0995\u09c7 \u099c\u09ac\u09be\u09ac \u09aa\u09be\u0993\u09df\u09be\u09b0 \u099c\u09a8\u09cd\u09af \u0985\u09aa\u09c7\u0995\u09cd\u09b7\u09be \u0995\u09b0\u09c1\u09a8\u0964",live_room_send_catalog_success:"\u098f\u0995\u099f\u09bf \u0995\u09cd\u09af\u09be\u099f\u09be\u09b2\u0997\u09c7\u09b0 \u099c\u09a8\u09cd\u09af \u0986\u09aa\u09a8\u09be\u09b0 \u0985\u09a8\u09c1\u09b0\u09cb\u09a7\u099f\u09bf \u09aa\u09be\u09a0\u09be\u09a8\u09cb \u09b9\u09df\u09c7\u099b\u09c7\u0964",subscribe:"\u09b0\u09bf\u09ae\u09be\u0987\u09a8\u09cd\u09a1\u09be\u09b0 \u09b8\u09c7\u099f \u0995\u09b0\u09c1\u09a8","liveroom.text.explaining":"\u09a1\u09c7\u09ae\u09a8\u09b8\u09cd\u099f\u09cd\u09b0\u09c7\u09b6\u09a8",live_room_buyer_send_catalog_success:"\u098f\u0995\u099f\u09bf \u0995\u09cd\u09af\u09be\u099f\u09be\u09b2\u0997\u09c7\u09b0 \u099c\u09a8\u09cd\u09af \u0986\u09aa\u09a8\u09be\u09b0 \u0985\u09a8\u09c1\u09b0\u09cb\u09a7\u099f\u09bf \u09aa\u09be\u09a0\u09be\u09a8\u09cb \u09b9\u09df\u09c7\u099b\u09c7\u0964",already_recive_coupon:"\u0995\u09c1\u09aa\u09a8\u09c7\u09b0 \u09a6\u09be\u09ac\u09bf \u0995\u09b0\u09be \u09b9\u09df\u09c7\u099b\u09c7"}},function(e,t){e.exports={"subscribed.detail":"\u09b8\u09be\u09ac\u09b8\u09cd\u0995\u09cd\u09b0\u09be\u0987\u09ac \u0995\u09b0\u09be \u09b9\u09df\u09c7\u099b\u09c7\u0964 \u09b2\u09be\u0987\u09ad \u09b8\u09c7\u09b6\u09a8 {{date}} \u098f \u09b6\u09c1\u09b0\u09c1 \u09b9\u09ac\u09c7, \u098f\u09ac\u0982 \u0986\u09ae\u09b0\u09be \u0986\u09aa\u09a8\u09be\u0995\u09c7 {{time}} \u098f \u09ae\u09a8\u09c7 \u0995\u09b0\u09bf\u09df\u09c7 \u09a6\u09bf\u09ac \u098f\u099f\u09bf\u0995\u09c7 \u09b8\u09a0\u09bf\u0995 \u09b8\u09ae\u09df\u09c7 \u09a6\u09c7\u0996\u09be\u09b0 \u099c\u09a8\u09cd\u09af\u0964",subscribed:"\u09b8\u09be\u09ac\u09b8\u09cd\u0995\u09cd\u09b0\u09be\u0987\u09ac \u0995\u09b0\u09be \u09b9\u09af\u09bc\u09c7\u099b\u09c7",live_room_buyer_send_catalog_success:"\u098f\u0995\u099f\u09bf \u0995\u09cd\u09af\u09be\u099f\u09be\u09b2\u0997\u09c7\u09b0 \u099c\u09a8\u09cd\u09af \u0986\u09aa\u09a8\u09be\u09b0 \u0985\u09a8\u09c1\u09b0\u09cb\u09a7\u099f\u09bf \u09aa\u09be\u09a0\u09be\u09a8\u09cb \u09b9\u09df\u09c7\u099b\u09c7\u0964",recive_coupon_common_title:"\u099b\u09be\u09dc\u09c7\u09b0 \u09ad\u09be\u0989\u099a\u09be\u09b0"}},function(e,t){e.exports={}},function(e,t){e.exports={"live.text.complain":"Laporan",live_room_cannot_receive:"Pedagang di Alibaba.com tidak boleh menerima kupon.",mcms_live12__:"telah memasuki strim secara langsung ini",already_recive_coupon:"Kupon dituntut","subscribe.cancel":"Dinyahlanggan.",asc_live_catalog:"Katalog",asc_live_coupon_collect_success:"Kupon dituntut",mcms_live8__:"Pengacara akan memulakan rancangan tidak lama lagi. Kembali kemudian untuk menonton","subscribed.detail":"Dilanggan. Sesi langsung akan bermula pada {{date}} dan kami akan menggesa anda untuk menontonnya tepat pada {{time}}.","live.continue_in_app":"Teruskan di App Alibaba.com",mcms_live7__:"Ralat rangkaian, cuba lagi",asc_live_coupon_already_received:"Anda telah mengumpul kupon tersebut.",asc_live_coupon_list_use1:"Lihat Kupon Saya",live_room_buyer_send_catalog_success:"Permintaan anda untuk katalog telah dihantar.",asc_live_coupon_list_use5:"Tersedia selepas:{{time}}","liveroom.text.explaining":"Demonstrasi",recive_coupon_common_title:"Baucar diskaun",asc_live_coupon_get_coupon:"Dapatkan Kupon",scan_with_mobile_app:"Imbas dengan APP Alibaba.com mudah alih(Android melebihi 7.12.0 , IOS melebihi 7.12.1)",mcms_live2__:"Mesej ini dilarang",mcms_live5__:"Segar semula",live_room_Coupon_expired:"Maaf, pengutipan kupon gagal.",asc_live_coupon_list_use4:"Kupon diterima",live_room_send_catalog_later:"Mesej telah dihantar. Sila tunggu untuk balasan daripada pembekal.",asc_player_refresh:"Sistem bertindak balas dengan perlahan. Sila cuba lagi.",asc_live_coupon_list_title:"Kupon eksklusif untuk siaran langsung",mcms_live9__:"Kira detik secara langsung",unsubscribe:"Batalkan peringatan",mcms_live3__:"Mesej dihantar",live_room_send_catalog_success:"Permintaan anda untuk katalog telah dihantar.","liveroom.text.play_failed":"Ralat berlaku dalam pemain. Sila cuba sebentar lagi.",mcms_live4__:"Ikut",asc_live_coupon_to_use:"Guna sekarang",asc_live_coupon_list_use2:"Bermula dalam",asc_live_coupon_list_use6:"Diskaun maksimum US {{count}}",asc_live_coupon_list_use7:"kupon",mcms_live6__:"Mesej ini mengandungi bahasa yang dilarang",subscribed:"Dilanggan",recive_coupon_common_title_success:"Kupon dituntut",mcms_live10__:"memulakan pesanan",subscribe:"Tetapkan peringatan",mcms_live13__:"Siaran langsung telah tamat. Terima kasih kerana menonton.","live.text.watch_replay":"Tonton main semula",watch_live_on_mobile:"Tonton secara langsung pada mudah alih",mcms_live1__:"Ingin bercakap dengan pengacara?",asc_live_coupon_insufficient_coupons:"MInta maaf, Kupon telah dikumpul","subscribe.success":"Dilanggan.",asc_live_coupon_collect_time:"Pop timbul ini akan hilang dalam masa {{time}} saat.",mcms_live11__:"sedang menghantar pertanyaan",asc_live_coupon_list_use3:"Baki",live_room_collection_failed:"Maaf, kupon telah tamat tempoh."}},function(e,t){e.exports={asc_player_refresh:"\u0d38\u0d3f\u0d38\u0d4d\u200c\u0d31\u0d4d\u0d31\u0d02 \u0d35\u0d33\u0d30\u0d46 \u0d38\u0d3e\u0d35\u0d27\u0d3e\u0d28\u0d2e\u0d3e\u0d23\u0d4d \u0d2a\u0d4d\u0d30\u0d24\u0d3f\u0d15\u0d30\u0d3f\u0d15\u0d4d\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d24\u0d4d.  \u0d26\u0d2f\u0d35\u0d3e\u0d2f\u0d3f \u0d35\u0d40\u0d23\u0d4d\u0d1f\u0d41\u0d02 \u0d36\u0d4d\u0d30\u0d2e\u0d3f\u0d15\u0d4d\u0d15\u0d41\u0d15","subscribed.detail":"\u0d38\u0d2c\u0d4d\u0d38\u0d4d\u0d15\u0d4d\u0d30\u0d48\u0d2c\u0d4d \u0d1a\u0d46\u0d2f\u0d4d\u0d24\u0d41 \u0d24\u0d24\u0d4d\u0d38\u0d2e\u0d2f \u0d38\u0d46\u0d37\u0d7b {{date}} \u0d24\u0d3f\u0d2f\u0d4d\u0d2f\u0d24\u0d3f\u0d2f\u0d3f\u0d7d \u0d24\u0d41\u0d1f\u0d19\u0d4d\u0d19\u0d41\u0d28\u0d4d\u0d28\u0d24\u0d3e\u0d23\u0d4d, \u0d15\u0d42\u0d1f\u0d3e\u0d24\u0d46 \u0d07\u0d24\u0d4d {{time}} \u0d2e\u0d23\u0d3f\u0d2f\u0d4d\u0d15\u0d4d\u0d15\u0d4d , \u0d38\u0d2e\u0d2f\u0d24\u0d4d\u0d24\u0d3f\u0d28\u0d41 \u0d24\u0d28\u0d4d\u0d28\u0d46 \u0d15\u0d3e\u0d23\u0d41\u0d28\u0d4d\u0d28\u0d24\u0d3f\u0d28\u0d4d \u0d1e\u0d19\u0d4d\u0d19\u0d7e \u0d28\u0d3f\u0d19\u0d4d\u0d19\u0d33\u0d4b\u0d1f\u0d41 \u0d2a\u0d31\u0d2f\u0d41\u0d28\u0d4d\u0d28\u0d24\u0d3e\u0d2f\u0d3f\u0d30\u0d3f\u0d15\u0d4d\u0d15\u0d41\u0d02."}},function(e,t){e.exports={}},function(e,t){e.exports={"live.continue_in_app":"Alibaba.com \u090f\u092a\u092e\u093e \u091c\u093e\u0930\u0940 \u0930\u093e\u0916\u094d\u0928\u0941\u0939\u094b\u0938\u094d\u200c",mcms_live13__:"\u0932\u093e\u0907\u092d\u0938\u094d\u091f\u094d\u0930\u0940\u092e \u0938\u092e\u093e\u092a\u094d\u0924 \u092d\u090f\u0915\u094b \u091b\u0964 \u0939\u0947\u0930\u0940\u0926\u093f\u0928\u0941 \u092d\u090f\u0915\u094b\u092e\u093e \u0927\u0928\u094d\u092f\u0935\u093e\u0926\u0964",asc_live_coupon_collect_success:"\u0915\u0941\u092a\u0928\u0939\u0930\u0942 \u0926\u093e\u092c\u0940 \u0917\u0930\u093f\u092f\u094b","subscribed.detail":"\u0938\u0926\u0938\u094d\u092f\u0924\u093e \u0932\u093f\u0907\u092f\u094b\u0964 \u092a\u094d\u0930\u0924\u094d\u092f\u0915\u094d\u0937 \u0938\u0924\u094d\u0930 {{date}} \u092e\u093e \u0938\u0941\u0930\u0941 \u0939\u0941\u0928\u094d\u091b \u0930 \u0939\u093e\u092e\u0940 \u0924\u092a\u093e\u0908\u0902\u0932\u093e\u0908 \u092f\u0938\u092e\u093e {{time}} \u0938\u092e\u092f\u092e\u093e \u0939\u0947\u0930\u094d\u0928 \u092a\u094d\u0930\u092e\u094d\u091f \u0917\u0930\u094d\u0928\u0947 \u091b\u094c\u0901\u0964",already_recive_coupon:"\u0915\u0941\u092a\u0928\u0939\u0930\u0942 \u0926\u093e\u092c\u0940 \u0917\u0930\u093f\u092f\u094b",recive_coupon_common_title:"\u091b\u0941\u091f \u092d\u094c\u091a\u0930",asc_live_coupon_collect_time:"This pop-up will disappear in {{time}} seconds","live.text.complain":"dt_profile_report_tip","liveroom.text.play_failed":"\u092a\u094d\u0932\u0947\u092f\u0930\u092e\u093e \u0915\u0941\u0928\u0948 \u0924\u094d\u0930\u0941\u091f\u093f \u0926\u0947\u0916\u093f\u092f\u094b\u0964  \u0915\u0943\u092a\u092f\u093e \u092a\u091b\u093f \u092b\u0947\u0930\u093f \u092a\u094d\u0930\u092f\u093e\u0938 \u0917\u0930\u094d\u0928\u0941\u0939\u094b\u0938\u094d\u0964","liveroom.text.explaining":"\u092a\u094d\u0930\u0926\u0930\u094d\u0936\u0928",unsubscribe:"\u0930\u093f\u092e\u093e\u0908\u0928\u094d\u0921\u0930 \u0930\u0926\u094d\u0926 \u0917\u0930\u094d\u0928\u0941",live_room_cannot_receive:"Alibaba.com \u092e\u093e \u0935\u094d\u092f\u093e\u092a\u093e\u0930\u0940\u0939\u0930\u0942\u0932\u0947 \u0915\u0941\u092a\u0928 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0917\u0930\u094d\u0928 \u0938\u0915\u094d\u0926\u0948\u0928\u0928\u094d\u200c\u0964",recive_coupon_common_title_success:"\u0915\u0941\u092a\u0928\u0939\u0930\u0942 \u0926\u093e\u092c\u0940 \u0917\u0930\u093f\u092f\u094b",live_room_Coupon_expired:"\u092e\u093e\u092b \u0917\u0930\u094d\u0928\u0941\u0939\u094b\u0938\u094d\u200c. \u0915\u0941\u092a\u0928 \u0938\u0919\u094d\u0915\u0932\u094d\u0928 \u0938\u092b\u0932 \u0939\u0941\u0928 \u0938\u0915\u0947\u0928\u0964",asc_player_refresh:"\u0938\u093f\u0938\u094d\u091f\u092e\u0932\u0947 \u0935\u093f\u0938\u094d\u0924\u093e\u0930\u0948 \u092a\u094d\u0930\u0924\u093f\u0915\u0943\u092f\u093e \u0926\u093f\u0928\u094d\u091b \u0964   \u092a\u0941\u0928: \u092a\u094d\u0930\u092f\u093e\u0938 \u0917\u0930\u094d\u0928\u0941\u0939\u094b\u0938 \u0964",live_room_collection_failed:"\u092e\u093e\u092b \u0917\u0930\u094d\u0928\u0941\u0939\u094b\u0938\u094d\u200c. \u0915\u0941\u092a\u0928\u0915\u094b \u092e\u094d\u092f\u093e\u0926 \u0938\u092e\u093e\u092a\u094d\u0924 \u092d\u090f\u0915\u094b \u091b\u0964",subscribe:"\u0930\u093f\u092e\u093e\u0908\u0928\u094d\u0921\u0930 \u0938\u0947\u091f \u0917\u0930\u094d\u0928\u0941\u0939\u094b\u0938\u094d"}},function(e,t){e.exports={asc_player_refresh:"\u0b38\u0b3f\u0b37\u0b4d\u0b1f\u0b2e\u0b4d \u0b27\u0b40\u0b30\u0b47 \u0b27\u0b40\u0b30\u0b47 \u0b09\u0b24\u0b4d\u0b24\u0b30 \u0b26\u0b3f\u0b0f\u0964   \u0b26\u0b5f\u0b3e\u0b15\u0b30\u0b3f \u0b2a\u0b41\u0b23\u0b3f\u0b25\u0b30\u0b47 \u0b1a\u0b47\u0b37\u0b4d\u0b1f\u0b3e \u0b15\u0b30\u0b28\u0b4d\u0b24\u0b41\u0964","subscribed.detail":"\u0b38\u0b26\u0b38\u0b4d\u0b5f\u0b24\u0b3e \u0b39\u0b4b\u0b07\u0b1b\u0b3f\u0964  \u0b32\u0b3e\u0b07\u0b2d\u0b4d \u0b05\u0b27\u0b3f\u0b2c\u0b47\u0b36\u0b28 {{\u0b24\u0b3e\u0b30\u0b3f\u0b16}} \u0b30\u0b47 \u0b06\u0b30\u0b2e\u0b4d\u0b2d \u0b39\u0b47\u0b2c, \u0b0f\u0b2c\u0b02 \u0b06\u0b2e\u0b47 \u0b06\u0b2a\u0b23\u0b19\u0b4d\u0b15\u0b41 {{\u0b38\u0b2e\u0b5f}} \u0b30\u0b47 \u0b0f\u0b39\u0b3e\u0b15\u0b41 \u0b20\u0b3f\u0b15\u0b4d \u0b38\u0b2e\u0b5f\u0b30\u0b47 \u0b26\u0b47\u0b16\u0b3f\u0b2c\u0b3e \u0b2a\u0b3e\u0b07\u0b01 \u0b24\u0b4d\u0b71\u0b30\u0b3e\u0b28\u0b3f\u0b24 \u0b15\u0b30\u0b3f\u0b2c\u0b41\u0964",subscribed:"\u0b38\u0b26\u0b38\u0b4d\u0b5f\u0b24\u0b3e"}},function(e,t){e.exports={"liveroom.text.explaining":"Demonstra\xe7\xe3o",subscribe:"Definir lembrete",mcms_live13__:"A transmiss\xe3o ao vivo acabou. Obrigado por assistir.",asc_live_coupon_collect_success:"Cupons resgatados",asc_player_refresh:"A resposta do sistema est\xe1 lenta. Por favor, tente novamente.",scan_with_mobile_app:"Digitalize com o APP de smartphone Alibaba.com(Android vers\xe3o 7.12.0 e acima, IOS vers\xe3o 7.12.1 e acima)",already_recive_coupon:"Cupons resgatados",recive_coupon_common_title_success:"Cupons resgatados",watch_live_on_mobile:"Assista ao vivo no smartphone","subscribed.detail":"Inscrito. A sess\xe3o ao vivo come\xe7ar\xe1 no dia {{date}}, e avisaremos para que voc\xea assista pontualmente \xe0s {{time}}.",subscribed:"Inscrito","live.continue_in_app":"Continue no aplicativo do Alibaba.com"}},function(e,t){e.exports={mcms_live7__:"Erro de rede. Tente novamente","liverank.live_rank_text":"Hoje",subscribed:"Inscrito",mcms_buyer_live_anchor_leave:"O anfitri\xe3o sai temporariamente. por favor espere.","live.text.complain":"Relat\xf3rio",mcms_buyer_live_yugao_delete_cancel:"A transmiss\xe3o ao vivo foi exclu\xedda pelo comerciante e cancelada",asc_live_coupon_insufficient_coupons:"Desculpe, os cupons j\xe1 foram coletados",mcms_buyer_live_streambreake:"A transmiss\xe3o ao vivo n\xe3o \xe9 suave, por favor aguarde um momento","liveroom.text.watchmobile":"Assista ao vivo no celular",revice_btn_text_get:"Obter cupom agora","live.info.notice.riskError":"Coment\xe1rios foram controlados pelo vento",live_ask_introdution:"Explique para mim",mcms_live2__:"Esta mensagem \xe9 proibida",watch_live_on_mobile:"Assista ao vivo no smartphone","live.product_box_empty_text":"A lista est\xe1 vazia, por favor, comunique-se com o anfitri\xe3o.",asc_live_coupon_collect_time:"Este pop-up vai sumir em {{time}} segundos.",mcms_live6__:"Esta mensagem cont\xe9m linguagem proibida",mcms_live4__:"Seguir","liveroom.text.backToLive":"De volta para viver",live_room_Coupon_expired:"Desculpe, n\xe3o foi poss\xedvel pegar o cupom.",mcms_live9__:"Contagem regressiva ao vivo",mcms_live5__:"Atualizar",mcms_buyer_live_living_fengkong_end:"A transmiss\xe3o ao vivo \xe9 suspeita de viola\xe7\xe3o de conte\xfado, e a transmiss\xe3o ao vivo terminou",detail_chat_now:"Converse agora",asc_live_coupon_get_coupon:"Ganhe cupons",mcms_buyer_live_network_wrong:"Sua rede n\xe3o \xe9 boa.",asc_player_refresh:"A resposta do sistema est\xe1 lenta. Por favor, tente novamente.","liveroom.text.commentplaceholder":"Falar com streamer","liverank.live_rank_time_desc":"Hora de in\xedcio das estat\xedsticas: {{time}}","live.components.factory.card.order.desc":"Valor da transa\xe7\xe3o nos \xfaltimos 6 meses",asc_live_coupon_list_title:"Cupons exclusivos para transmiss\xf5es ao vivo",mcms_buyer_live_living_end:"A transmiss\xe3o ao vivo acabou",have_no_recive_coupon:"Lamentamos, todos os cupons j\xe1 foram reclamados.",revice_btn_text_message:"Coment\xe1rio",recive_coupon_common_title:"Voucher de desconto",asc_live_coupon_list_issueing_title:"Cupons sendo emitidos","liveroom.text.product.more":"Mais",live_already_sent_toast:"O pedido foi enviado. O livestreamer dar\xe1 uma demonstra\xe7\xe3o em breve.",live_room_cannot_receive:"Os vendedores do Alibaba.com n\xe3o podem receber cupons.",mcms_live14__:"O apresentador saiu temporariamente. Volte mais tarde para continuar vendo","liveroom.text.directory":"Diret\xf3rio ao vivo",recive_coupon_comment_title:"Coment\xe1rio agora",mcms_live1__:"Deseja falar com o apresentador?",asc_live_coupon_already_received:"Voc\xea obteve os cupons.",scan_with_mobile_app:"Digitalize com o APP de smartphone Alibaba.com(Android vers\xe3o 7.12.0 e acima, IOS vers\xe3o 7.12.1 e acima)",subscribe:"Definir lembrete","liveroom.text.explaining":"Explicando",live_pc_network_slot:"Sua rede n\xe3o \xe9 boa. Por favor verifique sua rede.",asc_chat_now:"Converse agora",recive_coupon_common_title_success:"Cupons reivindicados",recive_coupon_follow_success_title:"Seguido com sucesso!",already_recive_coupon:"Cupons reivindicados",reminder_sucess:"Vamos lembr\xe1-lo quando o modo de vida come\xe7ar.",mcms_seabed28__:"Todos os produtos","liveroom.productslist":"Lista de produtos",mcms_buyer_live_replay_fengkong:"A transmiss\xe3o ao vivo \xe9 suspeita de viola\xe7\xe3o de conte\xfado e n\xe3o pode ser assistida","liveroom.title.replay":"Replay dos Destaques",mcms_live13__:"A transmiss\xe3o ao vivo acabou. Obrigado por assistir.",revice_btn_text_null:"Todos reivindicados.",asc_live_coupon_list_use2:"Come\xe7a em","live.checkCatalog":"Verificar cat\xe1logo",mcms_live12__:"{user_name} entrou nesta transmiss\xe3o ao vivo","liverank.history_rank_text":"Hist\xf3ria",mcms_live8__:"O apresentador vai come\xe7ar o show em breve. Volte mais tarde para assistir",mcms_buyer_live_yugao_fengkong_cancel:"A transmiss\xe3o ao vivo \xe9 suspeita de viola\xe7\xe3o de conte\xfado e foi cancelada.",coupon_recive_title:"Seguido com sucesso! Agora voc\xea pode reivindicar um cupom.","liveroom.text.loading":"Carregando...",asc_live_coupon_list_use3:"Restantes",unsubscribe:"Cancelar lembrete",asc_live_coupon_collect_success:"Cupons reivindicados","liveroom.text.send":"Enviar",mcms_buyer_live_contact_supplier:"Entre em contato com Fornecedor","liveroom.text.changeExplanation":"O produto acabou de ser lan\xe7ado. Voc\xea est\xe1 assistindo o lan\xe7amento agora.","liveroom.text.changeContent":"A \xe2ncora acabou de falar sobre esse conte\xfado, e voc\xea est\xe1 assistindo a explica\xe7\xe3o.",mcms_live3__:"Mensagem enviada","live.open_app":"Abrir",mcms_moreVideo__:"Mais v\xeddeos","liveroom.entering":"Bem-vindo, venha para a transmiss\xe3o ao vivo",asc_live_coupon_list_use7:"cupons","live.mutedAutoplay":"Mudo tocando",revice_btn_text_fellow:"Siga",asc_live_coupon_list_use1:"Ver meus cupons","ive.enableVolume":"Aumentar o volume","live.cancel_app":"Cancelar","subscribe.success":"Inscrito.","live.continue_in_app":"Continue no aplicativo do Alibaba.com","live.unfollowed_text":"N\xe3o seguir",live_rank_feedback:"A tabela de classifica\xe7\xe3o est\xe1 vazia",coupon_cutdown_text:"Tempo-limitado",mcms_live10__:"{user_name} come\xe7ou a fazer um pedido",coupon_second:"Segundos",revice_btn_text_already:"Alegou","live.text.watch_replay":"Veja o replay",mcms_buyer_live_yugao_chidao_wait:"O comerciante est\xe1 um pouco atrasado. Por favor, espere um momento.",asc_live_coupon_list_use4:"Cupons recebidos",asc_live_coupon_list_use6:"Desconto m\xe1ximo de US$ {{count}}",mcms_buyer_live_suspend:"Estar de volta.",mcms_live11__:"{User_name} est\xe1 enviando uma d\xfavida",mcms_buyer_live_living_end_watch_replay:"Relogio replay","liveroom.watch_now":"Assista agora",mcms_buyer_live_yugao_timeout_end:"A transmiss\xe3o ao vivo n\xe3o foi transmitida devido \xe0 prorroga\xe7\xe3o","subscribe.cancel":"N\xe3o Inscrito.",mcms_buyer_live_network_wrong_tips:"Por favor verifique sua rede",asc_live_catalog:"Cat\xe1logo","live.info.notice.noExitError":"O coment\xe1rio da resposta atual n\xe3o existe","subscribed.detail":"Inscrito. A sess\xe3o ao vivo come\xe7ar\xe1 no dia {{date}}, e avisaremos para que voc\xea assista pontualmente \xe0s {{time}}.",live_room_collection_failed:"Desculpe, o cupom expirou.",asc_live_coupon_to_use:"Resgatar agora",asc_live_coupon_list_use5:"Dispon\xedvel ap\xf3s: {{time}}",recive_coupon_follow_title:"Siga o livestreamer","liveroom.text.view":"Vista","liveroom.text.getapp":"Obter o aplicativo",live_have_already_sent:"Pedido enviado","liverank.history_rank_time_desc":"Hora de in\xedcio das estat\xedsticas: {{time}}",mcms_buyer_live_replay_delete:"A transmiss\xe3o ao vivo foi exclu\xedda pelo comerciante e n\xe3o pode ser visualizada","live.info.notice.blockError":"Coment\xe1rios foram banidos",recive_coupon_comment_success_title:"Comentou com sucesso!"}},function(e,t){e.exports={"subscribed.detail":"\u0a38\u0a2c\u0a38\u0a15\u0a4d\u0a30\u0a3e\u0a08\u0a2c \u0a15\u0a40\u0a24\u0a3e \u0a17\u0a3f\u0a06\u0964 \u0a32\u0a3e\u0a08\u0a35 \u0a38\u0a48\u0a36\u0a28 {{date}} \u0a28\u0a42\u0a70 \u0a36\u0a41\u0a30\u0a42 \u0a39\u0a4b\u0a35\u0a47\u0a17\u0a3e, \u0a05\u0a24\u0a47 \u0a05\u0a38\u0a40\u0a02 \u0a24\u0a41\u0a39\u0a3e\u0a28\u0a42\u0a70 \u0a07\u0a38 \u0a38\u0a48\u0a36\u0a28 \u0a28\u0a42\u0a70 {{time}} \u0a35\u0a1c\u0a47 \u0a26\u0a47\u0a16\u0a23 \u0a32\u0a08 \u0a2a\u0a4d\u0a30\u0a47\u0a30\u0a3f\u0a24 \u0a15\u0a30\u0a3e\u0a02\u0a17\u0a47\u0964"}},function(e,t){e.exports={live_room_Coupon_expired:"\u7533\u3057\u8a33\u3054\u3056\u3044\u307e\u305b\u3093\u3002\u30af\u30fc\u30dd\u30f3\u3092\u96c6\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002",asc_live_coupon_list_use7:"\u30af\u30fc\u30dd\u30f3","live.info.notice.noExitError":"\u73fe\u5728\u306e\u8fd4\u4fe1\u30b3\u30e1\u30f3\u30c8\u306f\u5b58\u5728\u3057\u307e\u305b\u3093","liveroom.watch_now":"\u4eca\u3059\u3050\u898b\u308b",asc_live_coupon_insufficient_coupons:"\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u30af\u30fc\u30dd\u30f3\u306f\u53ce\u96c6\u6e08\u307f\u3067\u3059","liveroom.title.replay":"\u30cf\u30a4\u30e9\u30a4\u30c8\u518d\u751f",have_no_recive_coupon:"\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3059\u3079\u3066\u306e\u30af\u30fc\u30dd\u30f3\u306f\u3059\u3067\u306b\u8acb\u6c42\u3055\u308c\u3066\u3044\u307e\u3059\u3002",asc_live_coupon_to_use:"\u4eca\u3059\u3050\u4f7f\u7528",coupon_recive_title:"\u6210\u529f\u3057\u307e\u3057\u305f! \u30af\u30fc\u30dd\u30f3\u3092\u8acb\u6c42\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002",mcms_buyer_live_network_wrong:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u826f\u304f\u3042\u308a\u307e\u305b\u3093\u3002",asc_live_coupon_get_coupon:"\u30af\u30fc\u30dd\u30f3\u3092\u53d6\u5f97",mcms_buyer_live_replay_fengkong:"\u751f\u653e\u9001\u306f\u30b3\u30f3\u30c6\u30f3\u30c4\u9055\u53cd\u306e\u7591\u3044\u304c\u3042\u308a\u3001\u8996\u8074\u3067\u304d\u307e\u305b\u3093","live.info.notice.blockError":"\u30b3\u30e1\u30f3\u30c8\u304c\u7981\u6b62\u3055\u308c\u307e\u3057\u305f",asc_live_coupon_collect_success:"\u30af\u30fc\u30dd\u30f3\u7372\u5f97",watch_live_on_mobile:"\u30e9\u30a4\u30d6\u3092\u30e2\u30d0\u30a4\u30eb\u8996\u8074\u3059\u308b","live.checkCatalog":"\u30ab\u30bf\u30ed\u30b0\u306e\u78ba\u8a8d",revice_btn_text_already:"\u4e3b\u5f35",recive_coupon_comment_success_title:"\u6b63\u5e38\u30b3\u30e1\u30f3\u30c8! ","live.mutedAutoplay":"\u30df\u30e5\u30fc\u30c8\u518d\u751f",unsubscribe:"\u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u3092\u30ad\u30e3\u30f3\u30bb\u30eb","live.text.watch_replay":"\u518d\u751f\u3092\u898b\u308b","live.continue_in_app":"Alibaba.com \u30a2\u30d7\u30ea\u3067\u7d9a\u3051\u308b",asc_live_coupon_already_received:"\u30af\u30fc\u30dd\u30f3\u304c\u96c6\u307e\u308a\u307e\u3057\u305f\u3002",mcms_buyer_live_yugao_chidao_wait:"\u5546\u4eba\u306f\u5c11\u3057\u9045\u308c\u3066\u3044\u307e\u3059\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002","liveroom.text.changeExplanation":"\u88fd\u54c1\u304c\u7d39\u4ecb\u3055\u308c\u307e\u3057\u305f\u3002 \u73fe\u5728\u3001\u7d39\u4ecb\u3092\u898b\u3066\u3044\u307e\u3059\u3002",asc_live_coupon_collect_time:"\u3053\u306e\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u306f\u3001{{time}} \u79d2\u5f8c\u306b\u6d88\u3048\u307e\u3059\u3002",recive_coupon_follow_title:"\u30e9\u30a4\u30d6\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3092\u30d5\u30a9\u30ed\u30fc\u3059\u308b",mcms_buyer_live_contact_supplier:"\u30b5\u30d7\u30e9\u30a4\u30e4\u30fc\u306b\u9023\u7d61\u3059\u308b",asc_live_coupon_list_use4:"\u53d7\u3051\u53d6\u3063\u305f\u30af\u30fc\u30dd\u30f3",asc_live_coupon_list_use5:"{{time}} \u5f8c\u306b\u4f7f\u7528\u53ef\u80fd","liverank.live_rank_text":"\u4eca\u65e5",asc_live_coupon_list_issueing_title:"\u767a\u884c\u4e2d\u306e\u30af\u30fc\u30dd\u30f3",mcms_live6__:"\u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u306f\u7981\u6b62\u7528\u8a9e\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059","liveroom.text.changeContent":"\u30a2\u30f3\u30ab\u30fc\u304c\u3053\u306e\u5185\u5bb9\u306b\u3064\u3044\u3066\u8a71\u3057\u305f\u3070\u304b\u308a\u3067\u3001\u3042\u306a\u305f\u306f\u8aac\u660e\u3092\u898b\u3066\u3044\u307e\u3059\u3002",mcms_live4__:"\u30d5\u30a9\u30ed\u30fc\u3059\u308b",asc_live_coupon_list_title:"\u30e9\u30a4\u30d6\u5c02\u7528\u30af\u30fc\u30dd\u30f3","liverank.live_rank_time_desc":"\u7d71\u8a08\u306e\u958b\u59cb\u6642\u523b: {{time}}",revice_btn_text_null:"\u3059\u3079\u3066\u306e\u4e3b\u5f35\u3057\u305f\u3002","liveroom.text.view":"\u8868\u793a",live_room_buyer_send_catalog_success:"\u30ab\u30bf\u30ed\u30b0\u8acb\u6c42\u304c\u9001\u4fe1\u3055\u308c\u307e\u3057\u305f\u3002","liverank.history_rank_time_desc":"\u7d71\u8a08\u306e\u958b\u59cb\u6642\u523b: {{time}}","live.cancel_app":"\u30ad\u30e3\u30f3\u30bb\u30eb",asc_live_catalog:"\u30ab\u30bf\u30ed\u30b0",mcms_buyer_live_yugao_timeout_end:"\u6b8b\u696d\u306e\u305f\u3081\u751f\u653e\u9001\u306f\u653e\u9001\u3055\u308c\u307e\u305b\u3093\u3067\u3057\u305f","liveroom.text.watchmobile":"\u30e2\u30d0\u30a4\u30eb\u3067\u30e9\u30a4\u30d6\u3092\u898b\u308b",live_room_send_catalog_later:"\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u9001\u4fe1\u3055\u308c\u307e\u3057\u305f\u3002\u30b5\u30d7\u30e9\u30a4\u30e4\u30fc\u304b\u3089\u306e\u5fdc\u7b54\u3092\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002",subscribe:"\u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u306e\u8a2d\u5b9a",live_ask_introdution:"\u8aac\u660e\u3057\u3066\u304f\u3060\u3055\u3044",live_room_collection_failed:"\u7533\u3057\u8a33\u3054\u3056\u3044\u307e\u305b\u3093\u3002\u30af\u30fc\u30dd\u30f3\u306e\u6709\u52b9\u671f\u9593\u306f\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002","liveroom.text.commentplaceholder":"\u30b9\u30c8\u30ea\u30fc\u30de\u30fc\u3068\u8a71\u3059","liverank.history_rank_text":"\u5c65\u6b74","liveroom.text.directory":"\u30e9\u30a4\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea",live_room_cannot_receive:"Alibaba.com \u306e\u30de\u30fc\u30c1\u30e3\u30f3\u30c8\u306f\u30af\u30fc\u30dd\u30f3\u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002",mcms_buyer_live_living_end_watch_replay:"\u30ea\u30d7\u30ec\u30a4\u3092\u898b\u308b","live.components.factory.card.order.desc":"\u904e\u53bb6\u304b\u6708\u9593\u306e\u53d6\u5f15\u984d","liveroom.text.send":"\u9001\u4fe1","liveroom.text.getapp":"\u30a2\u30d7\u30ea\u3092\u5165\u624b\u3059\u308b",mcms_live11__:"{user_name} \u3055\u3093\u304c\u554f\u3044\u5408\u308f\u305b\u3092\u9001\u4fe1\u3057\u3066\u3044\u307e\u3059",mcms_live13__:"\u30e9\u30a4\u30d6\u914d\u4fe1\u306f\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002\u3054\u8996\u8074\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002",live_room_send_catalog_success:"\u30ab\u30bf\u30ed\u30b0\u8acb\u6c42\u304c\u9001\u4fe1\u3055\u308c\u307e\u3057\u305f\u3002",recive_coupon_comment_title:"\u4eca\u3059\u3050\u30b3\u30e1\u30f3\u30c8",already_recive_coupon:"\u30af\u30fc\u30dd\u30f3\u7372\u5f97",asc_live_coupon_list_use2:"\u958b\u59cb","liveroom.text.loading":"\u8aad\u307f\u8fbc\u307f\u4e2d...",mcms_buyer_live_living_fengkong_end:"\u751f\u653e\u9001\u306f\u30b3\u30f3\u30c6\u30f3\u30c4\u9055\u53cd\u306e\u7591\u3044\u304c\u3042\u308a\u3001\u751f\u653e\u9001\u306f\u7d42\u4e86\u3057\u307e\u3057\u305f",recive_coupon_common_title:"\u5272\u5f15\u30d0\u30a6\u30c1\u30e3\u30fc","subscribe.success":"\u8cfc\u8aad\u4e2d",coupon_cutdown_text:"\u671f\u9593\u9650\u5b9a",asc_player_refresh:"\u30b7\u30b9\u30c6\u30e0\u306e\u5fdc\u7b54\u304c\u9045\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002",mcms_live12__:"{user_name} \u3055\u3093\u304c\u3053\u306e\u30e9\u30a4\u30d6\u30b9\u30c8\u30ea\u30fc\u30e0\u3092\u5165\u529b\u3057\u307e\u3057\u305f","subscribe.cancel":"\u8cfc\u8aad\u505c\u6b62","liveroom.entering":"\u30e9\u30a4\u30d6\u30b9\u30c8\u30ea\u30fc\u30e0\u3078\u3088\u3046\u3053\u305d","live.text.complain":"\u901a\u5831","liveroom.text.backToLive":"\u30e9\u30a4\u30d6\u306b\u623b\u308b",mcms_live7__:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc\u3067\u3059\u3002\u3082\u3046\u4e00\u5ea6\u8a66\u3057\u3066\u304f\u3060\u3055\u3044",mcms_live3__:"\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u9001\u4fe1\u3055\u308c\u307e\u3057\u305f",revice_btn_text_fellow:"\u30d5\u30a9\u30ed\u30fc\u3059\u308b","ive.enableVolume":"\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4e0a\u3052\u308b",live_rank_feedback:"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u304c\u7a7a\u3067\u3059",mcms_buyer_live_yugao_fengkong_cancel:"\u751f\u653e\u9001\u306f\u30b3\u30f3\u30c6\u30f3\u30c4\u9055\u53cd\u306e\u7591\u3044\u304c\u3042\u308a\u3001\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\u3002",mcms_live14__:"\u767a\u8868\u8005\u306f\u4e00\u6642\u7684\u306b\u5de6\u3002\u623b\u3063\u3066\u304f\u308b\u5f8c\u7d99\u7d9a\u3059\u308b\u898b",mcms_moreVideo__:"\u305d\u306e\u4ed6\u306e\u30d3\u30c7\u30aa","liveroom.text.product.more":"\u8a73\u7d30","live.info.notice.riskError":"\u30b3\u30e1\u30f3\u30c8\u306f\u98a8\u306b\u5236\u5fa1\u3055\u308c\u3066\u3044\u307e\u3059","live.product_box_empty_text":"\u30ea\u30b9\u30c8\u304c\u7a7a\u3067\u3059\u3002\u30db\u30b9\u30c8\u3068\u901a\u4fe1\u3057\u3066\u304f\u3060\u3055\u3044\u3002",asc_live_coupon_list_use6:"\u6700\u5927 US {{count}} \u5272\u5f15",revice_btn_text_get:"\u4eca\u3059\u3050\u30af\u30fc\u30dd\u30f3\u3092\u5165\u624b","live.living":"\u30e9\u30a4\u30d6",mcms_buyer_live_network_wrong_tips:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044",mcms_live1__:"\u30d7\u30ec\u30bc\u30f3\u30bf\u30fc\u3068\u8a71\u3057\u307e\u3059\u304b?",recive_coupon_common_title_success:"\u30af\u30fc\u30dd\u30f3\u7372\u5f97","live.unfollowed_text":"\u30d5\u30a9\u30ed\u30fc\u89e3\u9664",mcms_live9__:"\u30e9\u30a4\u30d6\u30ab\u30a6\u30f3\u30c8\u30c0\u30a6\u30f3",mcms_buyer_live_anchor_leave:"\u30db\u30b9\u30c8\u306f\u4e00\u6642\u7684\u306b\u53bb\u308a\u307e\u3059\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002","subscribed.detail":"\u8cfc\u8aad\u4e2d \u30e9\u30a4\u30d6\u30bb\u30c3\u30b7\u30e7\u30f3\u306f {{date}} \u306b\u30b9\u30bf\u30fc\u30c8\u3057\u307e\u3059\u304c\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u8996\u8074\u3067\u304d\u308b\u3088\u3046 {{time}} \u306b\u304a\u77e5\u3089\u305b\u3057\u307e\u3059\u3002",mcms_live5__:"\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u3059\u308b",scan_with_mobile_app:"Alibaba.com \u30a2\u30d7\u30ea\u3067\u30b9\u30ad\u30e3\u30f3\u3057\u3066\u304f\u3060\u3055\u3044 (Android 7.12.0 \u4ee5\u4e0a\u3001iOS 7.12.1 \u4ee5\u4e0a)",mcms_seabed28__:"\u3059\u3079\u3066\u306e\u88fd\u54c1",live_pc_network_slot:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u826f\u304f\u3042\u308a\u307e\u305b\u3093\u3002\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002",asc_live_coupon_list_use3:"\u6b8b\u308a",subscribed:"\u30b5\u30d6\u30b9\u30af\u30e9\u30a4\u30d6\u6e08\u307f",detail_chat_now:"\u4eca\u3059\u3050\u30c1\u30e3\u30c3\u30c8",live_already_sent_toast:"\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u9001\u4fe1\u3055\u308c\u307e\u3057\u305f\u3002\u30e9\u30a4\u30d6\u30b9\u30c8\u30ea\u30fc\u30de\u30fc\u306f\u3059\u3050\u306b\u30c7\u30e2\u3092\u884c\u3044\u307e\u3059\u3002",asc_live_coupon_list_use1:"\u30de\u30a4\u30af\u30fc\u30dd\u30f3\u3092\u8868\u793a",revice_btn_text_message:"\u30b3\u30e1\u30f3\u30c8",mcms_buyer_live_replay_delete:"\u30e9\u30a4\u30d6\u653e\u9001\u306f\u30de\u30fc\u30c1\u30e3\u30f3\u30c8\u306b\u3088\u3063\u3066\u524a\u9664\u3055\u308c\u3066\u304a\u308a\u3001\u8868\u793a\u3067\u304d\u307e\u305b\u3093",mcms_buyer_live_yugao_delete_cancel:"\u30e9\u30a4\u30d6\u653e\u9001\u306f\u30de\u30fc\u30c1\u30e3\u30f3\u30c8\u306b\u3088\u3063\u3066\u524a\u9664\u3055\u308c\u3001\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f",reminder_sucess:"\u30e9\u30a4\u30d6\u30b7\u30e7\u30fc\u304c\u59cb\u307e\u3063\u305f\u3089\u304a\u77e5\u3089\u305b\u3057\u307e\u3059\u3002","liveroom.productslist":"\u88fd\u54c1\u30ea\u30b9\u30c8",mcms_buyer_live_living_end:"\u751f\u653e\u9001\u306f\u7d42\u4e86\u3057\u307e\u3057\u305f","live.open_app":"\u958b\u304f",mcms_buyer_live_suspend:"\u3059\u3050\u306b\u623b\u3063\u3066\u304f\u3060\u3055\u3044\u3002",coupon_second:"\u79d2",recive_coupon_follow_success_title:"\u6210\u529f\u3057\u307e\u3057\u305f!","liveroom.text.explaining":"\u30c7\u30e2",live_have_already_sent:"\u30ea\u30af\u30a8\u30b9\u30c8\u6e08\u307f",mcms_live2__:"\u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u7981\u6b62\u3055\u308c\u3066\u3044\u307e\u3059",mcms_buyer_live_streambreake:"\u751f\u653e\u9001\u306f\u30b9\u30e0\u30fc\u30ba\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044","liveroom.text.play_failed":"\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002 \u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002",mcms_live10__:"{user_name} \u3055\u3093\u304c\u6ce8\u6587\u3092\u958b\u59cb\u3057\u3066\u3044\u307e\u3059","live.get_catalog":"\u30ab\u30bf\u30ed\u30b0\u306e\u53d6\u5f97",asc_chat_now:"\u4eca\u3059\u3050\u30c1\u30e3\u30c3\u30c8",mcms_live8__:"\u30d7\u30ec\u30bc\u30f3\u30bf\u30fc\u304c\u307e\u3082\u306a\u304f\u30b7\u30e7\u30fc\u3092\u958b\u59cb\u3057\u307e\u3059\u3002 \u3042\u3068\u3067\u898b\u306b\u623b\u3063\u3066\u304f\u3060\u3055\u3044"}},function(e,t){e.exports={subscribe:"\u0dc3\u0dd2\u0dc4\u0dd2 \u0d9a\u0dd0\u0db3\u0dc0\u0dd3\u0db8\u0d9a\u0dca \u0db4\u0dd2\u0dc4\u0dd2\u0da7\u0dd4\u0dc0\u0db1\u0dca\u0db1","subscribed.detail":"\u0daf\u0dcf\u0dba\u0d9a \u0dc0\u0dd3 \u0d87\u0dad. \u0db8\u0dd9\u0db8 \u0dc3\u0da2\u0dd3\u0dc0\u0dd3 \u0dc3\u0dd0\u0dc3\u0dd2\u0dba {{\u0daf\u0dd2\u0db1\u0dba} \u0daf\u0dd2\u0db1 \u0d86\u0dbb\u0db8\u0dca\u0db7 \u0dc0\u0db1 \u0d85\u0dad\u0dbb, \u0d91\u0dba \u0db1\u0dd2\u0dba\u0db8\u0dd2\u0dad \u0dc0\u0dda\u0dbd\u0dcf\u0dc0 \u0dc0\u0db1 {{ \u0dc0\u0dda\u0dbd\u0dcf\u0dc0 }} \u0da7 \u0db1\u0dbb\u0db9\u0db1 \u0db8\u0dd9\u0db1\u0dca \u0d85\u0db4\u0dd2 \u0d94\u0db6\u0dd9\u0db1\u0dca \u0d89\u0dbd\u0dca\u0dbd\u0dcf \u0dc3\u0dd2\u0da7\u0dd2\u0db8\u0dd4.","subscribe.success":"\u0daf\u0dcf\u0dba\u0d9a \u0dc0\u0dd3 \u0d87\u0dad.",recive_coupon_common_title:"\u0dc0\u0da7\u0dca\u0da7\u0db8\u0dca \u0dc0\u0dc0\u0dd4\u0da0\u0dbb\u0dba",unsubscribe:"\u0dc3\u0dd2\u0dc4\u0dd2 \u0d9a\u0dd0\u0db3\u0dc0\u0dd4\u0db8 \u0d85\u0dc0\u0dbd\u0d82\u0d9c\u0dd4 \u0d9a\u0dbb\u0db1\u0dca\u0db1","liveroom.text.explaining":"\u0db1\u0dd2\u0dbb\u0dd6\u0db4\u0dab\u0dba",mcms_live13__:"\u0dc3\u0da2\u0dd3\u0dc0\u0dd3 \u0dc0\u0dd2\u0d9a\u0dcf\u0dc1\u0dba \u0d85\u0dc0\u0dc3\u0db1\u0dca \u0dc0\u0dd3 \u0d87\u0dad. \u0db1\u0dd0\u0dbb\u0db9\u0dd4\u0dc0\u0dcf\u0da7 \u0dc3\u0dca\u0dad\u0dd4\u0dad\u0dd2\u0dba\u0dd2.","subscribe.cancel":"\u0daf\u0dcf\u0dba\u0d9a \u0db1\u0ddc\u0dc0\u0dd3\u0db8."}},function(e,t){e.exports={asc_live_coupon_list_use3:"Kalan",have_no_recive_coupon:"\xdczg\xfcn\xfcz, t\xfcm kuponlar zaten talep edildi.",revice_btn_text_fellow:"Takip et",mcms_live12__:"{user_name} bu canl\u0131 yay\u0131na kat\u0131ld\u0131",live_rank_feedback:"Liderlik tablosu bo\u015f",live_have_already_sent:"Talep edilen",mcms_buyer_live_living_fengkong_end:"Canl\u0131 yay\u0131n\u0131n i\xe7erik ihlali oldu\u011fundan \u015f\xfcpheleniliyor ve canl\u0131 yay\u0131n sona erdi",mcms_buyer_live_living_end:"Canl\u0131 yay\u0131n bitti",mcms_buyer_live_network_wrong_tips:"L\xfctfen a\u011f\u0131n\u0131z\u0131 kontrol edin",mcms_buyer_live_streambreake:"Canl\u0131 yay\u0131n d\xfczg\xfcn de\u011fil, l\xfctfen biraz bekleyin",revice_btn_text_null:"Hepsi iddia edildi.","live.mutedAutoplay":"Sessiz oynama","live.unfollowed_text":"Takibi b\u0131rakt\u0131r","live.product_box_empty_text":"Liste bo\u015f, l\xfctfen ev sahibi ile ileti\u015fim kurun.","liverank.live_rank_time_desc":"Istatistiklerin ba\u015flang\u0131\xe7 zaman\u0131: {{time}}",asc_live_coupon_list_use4:"Al\u0131nan kuponlar",revice_btn_text_already:"Iddia edildi",live_already_sent_toast:"Istek g\xf6nderildi. Canl\u0131 yay\u0131n yapan yak\u0131nda bir g\xf6steri yapacak.","live.continue_in_app":"Alibaba.com uygulamas\u0131nda devam edin","live.get_catalog":"Katalog al",mcms_buyer_live_contact_supplier:"Ileti\u015fim tedarik\xe7isi","subscribe.success":"Abone olundu.",recive_coupon_follow_title:"Canl\u0131 yay\u0131nlay\u0131c\u0131y\u0131 takip edin",live_room_send_catalog_later:"Mesaj g\xf6nderildi. L\xfctfen tedarik\xe7inin yan\u0131t vermesini bekleyin.","liveroom.text.watchmobile":"Cep telefonundan canl\u0131 izle",live_ask_introdution:"Bana a\xe7\u0131klay\u0131n",asc_live_coupon_collect_success:"Kuponlar talep edildi",live_room_send_catalog_success:"Katalog talebiniz g\xf6nderildi.","liveroom.text.loading":"Y\xfckleniyor...","liverank.live_rank_text":"Bug\xfcn","liveroom.title.replay":"Vurguyu Yeniden Oynat",mcms_live11__:"{user_name} bir sorgu g\xf6nderiyor",mcms_live2__:"Bu mesaj yasakt\u0131r","liveroom.text.send":"G\xf6nder",mcms_live1__:"Sunucuyla konu\u015fmak istiyor musunuz?",mcms_live6__:"Bu mesaj yasakl\u0131 dil i\xe7eriyor",already_recive_coupon:"Kuponlar talep edildi",recive_coupon_comment_success_title:"Ba\u015far\u0131yla yorumlad\u0131!",asc_live_coupon_list_title:"Ya\u015fam i\xe7in \xf6zel kuponlar","live.components.factory.card.order.desc":"Son 6 aydaki i\u015flem tutar\u0131",mcms_buyer_live_yugao_fengkong_cancel:"Canl\u0131 yay\u0131n i\xe7erik ihlalinden \u015f\xfcpheleniliyor ve iptal edildi.",live_room_collection_failed:"\xdczg\xfcn\xfcz, kupon s\xfcresi doldu.","liveroom.entering":"Canl\u0131 yay\u0131na ho\u015f geldiniz",asc_live_coupon_already_received:"Kuponlar\u0131 toplad\u0131n\u0131z","liveroom.text.commentplaceholder":"Flama ile konu\u015f",detail_chat_now:"Sohbete Ba\u015fla",asc_live_coupon_list_use6:"Maksimum indirim US {{count}}","subscribe.cancel":"Abonelik sonland\u0131r\u0131ld\u0131.",asc_live_coupon_list_use7:"kuponlar",mcms_live10__:"{user_name} bir sipari\u015f ba\u015flat\u0131yor",asc_live_coupon_list_use1:"Kuponlar\u0131m\u0131 G\xf6r\xfcnt\xfcle","live.living":"Ca",mcms_live13__:"Canl\u0131 yay\u0131n sona erdi. \u0130zledi\u011finiz i\xe7in te\u015fekk\xfcr ederiz.",revice_btn_text_message:"Yorum",mcms_buyer_live_network_wrong:"A\u011f\u0131n\u0131z iyi de\u011fil.",recive_coupon_follow_success_title:"Ba\u015far\u0131yla takip etti!",mcms_buyer_live_yugao_chidao_wait:"T\xfcccar biraz ge\xe7 kald\u0131. L\xfctfen biraz bekleyin.",mcms_live14__:"Sunum ge\xe7ici olarak gitti. Daha sonra izlemeye devam etmek i\xe7in geri d\xf6n",mcms_buyer_live_living_end_watch_replay:"Tekrar izle",recive_coupon_comment_title:"\u015eimdi yorum",mcms_moreVideo__:"Daha Fazla Video","live.info.notice.riskError":"Yorumlar r\xfczgar kontroll\xfc",live_room_Coupon_expired:"\xdczg\xfcn\xfcz, kupon toplama ba\u015far\u0131s\u0131z oldu.",mcms_live3__:"Mesaj g\xf6nderildi","liveroom.text.backToLive":"Ya\u015famak i\xe7in geri",asc_live_coupon_insufficient_coupons:"\xdczg\xfcn\xfcz, kuponlar topland\u0131",mcms_live8__:"Sunucu yak\u0131nda g\xf6steriyi ba\u015flat\u0131yor. \u0130zlemek i\xe7in daha sonra geri d\xf6n\xfcn",recive_coupon_common_title_success:"Kuponlar talep edildi",mcms_buyer_live_anchor_leave:"Ev sahibi ge\xe7ici olarak ayr\u0131l\u0131yor. L\xfctfen bekleyin.","live.open_app":"A\xe7",asc_live_coupon_list_use2:"Ba\u015flang\u0131\xe7 zaman\u0131","live.text.complain":"Rapor","ive.enableVolume":"Sesi a\xe7",mcms_buyer_live_replay_fengkong:"Canl\u0131 yay\u0131n i\xe7erik ihlalinden \u015f\xfcpheleniliyor ve izlenemiyor",mcms_buyer_live_yugao_timeout_end:"Fazla mesai nedeniyle canl\u0131 yay\u0131n yay\u0131nlanmad\u0131",coupon_recive_title:"Ba\u015far\u0131yla takip etti! Art\u0131k bir kupon talep edebilirsiniz.","live.cancel_app":"\u0130ptal",scan_with_mobile_app:"Mobil Alibaba.com uygulamas\u0131 ile taray\u0131n (Android 7.12.0 \xfczeri, iOS 7.12.1 \xfczeri)",asc_live_coupon_list_issueing_title:"Kuponlar veriliyor",coupon_cutdown_text:"Zaman s\u0131n\u0131rl\u0131",watch_live_on_mobile:"Mobilde canl\u0131 izleyin","subscribed.detail":"Abone olundu. Canl\u0131 seans {{date}} tarihinde ba\u015flayacak olup zaman\u0131nda izlemeniz i\xe7in {{time}} saatinde size bir hat\u0131rlatma g\xf6nderilecektir.","live.info.notice.blockError":"Yorumlar yasakland\u0131",revice_btn_text_get:"\u015eimdi kupon al","liverank.history_rank_text":"Tarih","liverank.history_rank_time_desc":"Istatistiklerin ba\u015flang\u0131\xe7 zaman\u0131: {{time}}",reminder_sucess:"Ya\u015fam g\xf6sterisinin ne zaman ba\u015flad\u0131\u011f\u0131n\u0131 size hat\u0131rlataca\u011f\u0131z.",mcms_seabed28__:"T\xfcm \xdcr\xfcnler",mcms_buyer_live_replay_delete:"Canl\u0131 yay\u0131n t\xfcccar taraf\u0131ndan silindi ve g\xf6r\xfcnt\xfclenemiyor",asc_player_refresh:"Sistem yava\u015f yan\u0131t veriyor. L\xfctfen tekrar deneyin.","liveroom.text.product.more":"Daha fazla",coupon_second:"Saniye",mcms_buyer_live_suspend:"Hemen d\xf6nece\u011fim.","liveroom.text.getapp":"Uygulamay\u0131 al",live_pc_network_slot:"A\u011f\u0131n\u0131z iyi de\u011fil. L\xfctfen a\u011f\u0131n\u0131z\u0131 kontrol edin.","liveroom.productslist":"\xdcr\xfcnler listesi",asc_live_coupon_list_use5:"\u015eu zamandan sonra kullan\u0131labilir:{{time}}","live.checkCatalog":"Katalo\u011fu kontrol et",mcms_live4__:"Takip Et","liveroom.text.changeContent":"\xc7apa bu i\xe7erikten bahsetti ve a\xe7\u0131klamay\u0131 izliyorsunuz.",mcms_live9__:"Canl\u0131 geri say\u0131m",asc_live_coupon_collect_time:"Bu a\xe7\u0131l\u0131r pencere {{time}} saniye i\xe7inde kapanacak.",recive_coupon_common_title:"\u0130ndirim kuponu",mcms_live7__:"A\u011f hatas\u0131, tekrar deneyin",mcms_live5__:"Yenile",live_room_cannot_receive:"Alibaba.com'daki sat\u0131c\u0131lar kupon alamazlar.",subscribe:"Hat\u0131rlat\u0131c\u0131 uyar\u0131 ayarla",subscribed:"Abone olundu",asc_live_catalog:"Katalog",unsubscribe:"Hat\u0131rlat\u0131c\u0131 uyar\u0131y\u0131 iptal et","liveroom.text.view":"G\xf6r\xfcn\xfcm","live.text.watch_replay":"Tekrar izle",live_room_buyer_send_catalog_success:"Katalog talebiniz g\xf6nderildi.","liveroom.text.directory":"Canl\u0131 dizin","liveroom.text.changeExplanation":"\xdcr\xfcn hen\xfcz tan\u0131t\u0131ld\u0131. \u015eu anda tan\u0131t\u0131m\u0131 izliyorsunuz.",asc_chat_now:"Sohbete Ba\u015fla",asc_live_coupon_get_coupon:"Kupon Kazan\u0131n",asc_live_coupon_to_use:"\u015eimdi \xd6deyin","liveroom.text.explaining":"Sunum",mcms_buyer_live_yugao_delete_cancel:"Canl\u0131 yay\u0131n t\xfcccar taraf\u0131ndan silindi ve iptal edildi","liveroom.watch_now":"\u015eimdi izle","live.info.notice.noExitError":"Mevcut cevap yorumu mevcut de\u011fil","liveroom.text.play_failed":"Oynat\u0131c\u0131da bir hata meydana geldi. L\xfctfen daha sonra yeniden deneyin."}},function(e,t){e.exports={}},function(e,t){e.exports={"subscribed.detail":"\u0c38\u0c2c\u0c4d \u0c38\u0c4d\u0c15\u0c4d\u0c30\u0c46\u0c56\u0c2c\u0c4d \u0c1a\u0c47\u0c2f\u0c2c\u0c21\u0c3f\u0c28\u0c26\u0c3f \u0c32\u0c48\u0c35\u0c4d \u0c38\u0c46\u0c37\u0c28\u0c4d {{\u0c24\u0c47\u0c26\u0c40}} \u0c28\u0c41\u0c02\u0c21\u0c3f \u0c2a\u0c4d\u0c30\u0c3e\u0c30\u0c02\u0c2d\u0c2e\u0c35\u0c41\u0c24\u0c41\u0c02\u0c26\u0c3f, \u0c2e\u0c30\u0c3f\u0c2f\u0c41 \u0c38\u0c2e\u0c2f\u0c3e\u0c28\u0c3f\u0c15\u0c3f {{\u0c38\u0c2e\u0c2f\u0c02}} \u0c35\u0c26\u0c4d\u0c26 \u0c1a\u0c42\u0c21\u0c2e\u0c28\u0c3f \u0c2e\u0c47\u0c2e\u0c41 \u0c2e\u0c40\u0c15\u0c41 \u0c24\u0c46\u0c32\u0c3f\u0c2f\u0c1a\u0c47\u0c38\u0c4d\u0c24\u0c3e\u0c2e\u0c41.","live.continue_in_app":"Alibaba.com \u0c2f\u0c3e\u0c2a\u0c4d\u200c\u0c32\u0c4b \u0c15\u0c4a\u0c28\u0c38\u0c3e\u0c17\u0c02\u0c21\u0c3f",subscribed:"\u0c38\u0c2d\u0c4d\u0c2f\u0c24\u0c4d\u0c35\u0c02 \u0c2a\u0c4a\u0c02\u0c26\u0c3e\u0c30\u0c41"}},function(e,t){e.exports={"live.continue_in_app":"Alibaba.com \u0b86\u0baa\u0bcd\u0baa\u0bbf\u0bb2\u0bcd \u0ba4\u0bca\u0b9f\u0bb0\u0bb5\u0bc1\u0bae\u0bcd",subscribed:"\u0b9a\u0ba8\u0bcd\u0ba4\u0bbe",subscribe:"\u0ba8\u0bbf\u0ba9\u0bc8\u0bb5\u0bc2\u0b9f\u0bcd\u0b9f\u0bb2\u0bc8 \u0b85\u0bae\u0bc8\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd","subscribed.detail":"\u0b95\u0bc1\u0bb4\u0bc1 \u0b9a\u0bc7\u0bb0\u0baa\u0bcd\u0baa\u0b9f\u0bcd\u0b9f\u0ba4\u0bc1 \u0ba8\u0bc7\u0bb0\u0bb2\u0bc8 \u0b85\u0bae\u0bb0\u0bcd\u0bb5\u0bc1 {{date}} \u0b85\u0ba9\u0bcd\u0bb1\u0bc1 \u0ba4\u0bca\u0b9f\u0b99\u0bcd\u0b95\u0bc1\u0bae\u0bcd, \u0b85\u0ba4\u0bc8 \u0b95\u0bc1\u0bb1\u0bbf\u0baa\u0bcd\u0baa\u0bbf\u0b9f\u0bcd\u0b9f {{time}}-\u0b87\u0bb2\u0bcd \u0b9a\u0bb0\u0bbf\u0baf\u0bbe\u0ba9 \u0ba8\u0bc7\u0bb0\u0ba4\u0bcd\u0ba4\u0bbf\u0bb2\u0bcd  \u0baa\u0bbe\u0bb0\u0bcd\u0b95\u0bcd\u0b95  \u0ba4\u0bc2\u0ba3\u0bcd\u0b9f\u0bc1\u0ba4\u0bb2\u0bcd \u0b9a\u0bc6\u0baf\u0bcd\u0ba4\u0bbf \u0b85\u0ba9\u0bc1\u0baa\u0bcd\u0baa\u0bc1\u0bb5\u0bcb\u0bae\u0bcd."}},function(e,t){e.exports={mcms_live12__:"{user_name} \u0e44\u0e14\u0e49\u0e40\u0e02\u0e49\u0e32\u0e0a\u0e21\u0e44\u0e25\u0e1f\u0e4c\u0e2a\u0e14",mcms_live14__:"Presenter \u0e21\u0e35\u0e0a\u0e31\u0e48\u0e27\u0e04\u0e23\u0e32\u0e27\u0e0b\u0e49\u0e32\u0e22. Come Back Later \u0e42\u0e14\u0e22\u0e14\u0e39",have_no_recive_coupon:"\u0e02\u0e2d\u0e2d\u0e20\u0e31\u0e22\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e2d\u0e49\u0e32\u0e07\u0e2a\u0e34\u0e17\u0e18\u0e34\u0e4c\u0e41\u0e25\u0e49\u0e27",mcms_buyer_live_yugao_delete_cancel:"\u0e01\u0e32\u0e23\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14\u0e16\u0e39\u0e01\u0e25\u0e1a\u0e42\u0e14\u0e22\u0e1e\u0e48\u0e2d\u0e04\u0e49\u0e32\u0e41\u0e25\u0e30\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",mcms_live4__:"\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21",mcms_buyer_live_network_wrong_tips:"\u0e42\u0e1b\u0e23\u0e14\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e40\u0e04\u0e23\u0e37\u0e2d\u0e02\u0e48\u0e32\u0e22\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13",revice_btn_text_already:"\u0e2d\u0e49\u0e32\u0e07\u0e27\u0e48\u0e32","live.open_app":"\u0e40\u0e1b\u0e34\u0e14","liveroom.productslist":"\u0e23\u0e32\u0e22\u0e0a\u0e37\u0e48\u0e2d\u0e1c\u0e25\u0e34\u0e15\u0e20\u0e31\u0e13\u0e11\u0e4c",revice_btn_text_message:"\u0e04\u0e27\u0e32\u0e21\u0e04\u0e34\u0e14\u0e40\u0e2b\u0e47\u0e19",revice_btn_text_null:"\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14\u0e2d\u0e49\u0e32\u0e07\u0e27\u0e48\u0e32",mcms_buyer_live_replay_delete:"\u0e01\u0e32\u0e23\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14\u0e16\u0e39\u0e01\u0e25\u0e1a\u0e42\u0e14\u0e22\u0e1e\u0e48\u0e2d\u0e04\u0e49\u0e32\u0e41\u0e25\u0e30\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e14\u0e39\u0e44\u0e14\u0e49",coupon_second:"\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35","live.get_catalog":"\u0e23\u0e31\u0e1a\u0e41\u0e04\u0e15\u0e15\u0e32\u0e25\u0e47\u0e2d\u0e01",recive_coupon_follow_title:"\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21 livestreamer",recive_coupon_follow_success_title:"\u0e1b\u0e23\u0e30\u0e2a\u0e1a\u0e04\u0e27\u0e32\u0e21\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08\u0e15\u0e32\u0e21!",mcms_live11__:"{user_name} \u0e01\u0e33\u0e25\u0e31\u0e07\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25",revice_btn_text_get:"\u0e23\u0e31\u0e1a\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e40\u0e14\u0e35\u0e4b\u0e22\u0e27\u0e19\u0e35\u0e49",mcms_buyer_live_contact_supplier:"\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d\u0e1c\u0e39\u0e49\u0e08\u0e31\u0e14\u0e08\u0e33\u0e2b\u0e19\u0e48\u0e32\u0e22",live_room_send_catalog_later:"\u0e2a\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e41\u0e25\u0e49\u0e27 \u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e2d\u0e0b\u0e31\u0e1e\u0e1e\u0e25\u0e32\u0e22\u0e40\u0e2d\u0e2d\u0e23\u0e4c\u0e15\u0e2d\u0e1a\u0e01\u0e25\u0e31\u0e1a",asc_live_coupon_list_use6:"\u0e2a\u0e48\u0e27\u0e19\u0e25\u0e14\u0e2a\u0e39\u0e07\u0e2a\u0e38\u0e14 US {{count}}","liveroom.text.changeExplanation":"\u0e1c\u0e25\u0e34\u0e15\u0e20\u0e31\u0e13\u0e11\u0e4c\u0e19\u0e35\u0e49\u0e40\u0e1e\u0e34\u0e48\u0e07\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e41\u0e19\u0e30\u0e19\u0e33 \u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49\u0e04\u0e38\u0e13\u0e01\u0e33\u0e25\u0e31\u0e07\u0e23\u0e31\u0e1a\u0e0a\u0e21\u0e01\u0e32\u0e23\u0e41\u0e19\u0e30\u0e19\u0e33\u0e1c\u0e25\u0e34\u0e15\u0e20\u0e31\u0e13\u0e11\u0e4c",live_already_sent_toast:"\u0e02\u0e2d\u0e2a\u0e48\u0e07\u0e44\u0e1b\u0e41\u0e25\u0e49\u0e27\u0e04\u0e23\u0e31\u0e1a Livestreamer \u0e08\u0e30\u0e43\u0e2b\u0e49\u0e01\u0e32\u0e23\u0e2a\u0e32\u0e18\u0e34\u0e15\u0e40\u0e23\u0e47\u0e27\u0e46\u0e19\u0e35\u0e49",scan_with_mobile_app:"\u0e2a\u0e41\u0e01\u0e19\u0e14\u0e49\u0e27\u0e22\u0e41\u0e2d\u0e1b Alibaba.com \u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e42\u0e17\u0e23\u0e28\u0e31\u0e1e\u0e17\u0e4c\u0e21\u0e37\u0e2d\u0e16\u0e37\u0e2d (Android \u0e40\u0e27\u0e2d\u0e23\u0e4c\u0e0a\u0e31\u0e19 7.12.0 \u0e02\u0e36\u0e49\u0e19\u0e44\u0e1b, iOS \u0e40\u0e27\u0e2d\u0e23\u0e4c\u0e0a\u0e31\u0e19 7.12.1 \u0e02\u0e36\u0e49\u0e19\u0e44\u0e1b)","liverank.live_rank_text":"\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49",asc_live_coupon_collect_success:"\u0e23\u0e31\u0e1a\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e41\u0e25\u0e49\u0e27",mcms_buyer_live_streambreake:"\u0e01\u0e32\u0e23\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14\u0e44\u0e21\u0e48\u0e23\u0e32\u0e1a\u0e23\u0e37\u0e48\u0e19\u0e42\u0e1b\u0e23\u0e14\u0e23\u0e2d\u0e2a\u0e31\u0e01\u0e04\u0e23\u0e39\u0e48",asc_live_coupon_list_use5:"\u0e1e\u0e23\u0e49\u0e2d\u0e21\u0e43\u0e19\u0e2d\u0e35\u0e01:{{time}}",mcms_live7__:"\u0e40\u0e04\u0e23\u0e37\u0e2d\u0e02\u0e48\u0e32\u0e22\u0e02\u0e31\u0e14\u0e02\u0e49\u0e2d\u0e07 \u0e25\u0e2d\u0e07\u0e43\u0e2b\u0e21\u0e48\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07","subscribe.success":"\u0e2a\u0e21\u0e31\u0e04\u0e23\u0e2a\u0e21\u0e32\u0e0a\u0e34\u0e01\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22",mcms_buyer_live_living_end_watch_replay:"\u0e14\u0e39\u0e23\u0e35\u0e40\u0e1e\u0e25\u0e22\u0e4c",already_recive_coupon:"\u0e23\u0e31\u0e1a\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e41\u0e25\u0e49\u0e27","liveroom.text.loading":"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14...",recive_coupon_comment_success_title:"\u0e1b\u0e23\u0e30\u0e2a\u0e1a\u0e04\u0e27\u0e32\u0e21\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08\u0e41\u0e2a\u0e14\u0e07\u0e04\u0e27\u0e32\u0e21\u0e04\u0e34\u0e14\u0e40\u0e2b\u0e47\u0e19!",recive_coupon_common_title:"\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e2a\u0e48\u0e27\u0e19\u0e25\u0e14",asc_live_coupon_list_use7:"\u0e04\u0e39\u0e1b\u0e2d\u0e07","subscribe.cancel":"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e01\u0e32\u0e23\u0e40\u0e1b\u0e47\u0e19\u0e2a\u0e21\u0e32\u0e0a\u0e34\u0e01\u0e41\u0e25\u0e49\u0e27",coupon_cutdown_text:"\u0e08\u0e33\u0e01\u0e31\u0e14\u0e40\u0e27\u0e25\u0e32","liveroom.entering":"\u0e22\u0e34\u0e19\u0e14\u0e35\u0e15\u0e49\u0e2d\u0e19\u0e23\u0e31\u0e1a\u0e2a\u0e39\u0e48 Livestream","liveroom.text.backToLive":"\u0e01\u0e25\u0e31\u0e1a\u0e21\u0e32\u0e21\u0e35\u0e0a\u0e35\u0e27\u0e34\u0e15\u0e2d\u0e22\u0e39\u0e48",live_room_collection_failed:"\u0e02\u0e2d\u0e2d\u0e20\u0e31\u0e22 \u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e2b\u0e21\u0e14\u0e2d\u0e32\u0e22\u0e38\u0e41\u0e25\u0e49\u0e27",live_have_already_sent:"\u0e02\u0e2d\u0e2a\u0e48\u0e07",subscribed:"\u0e2a\u0e21\u0e31\u0e04\u0e23\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22",mcms_seabed28__:"\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14",detail_chat_now:"\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49","liveroom.text.product.more":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e15\u0e34\u0e21","liverank.history_rank_time_desc":"\u0e40\u0e27\u0e25\u0e32\u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19\u0e02\u0e2d\u0e07\u0e2a\u0e16\u0e34\u0e15\u0e34: {{time}}",asc_live_catalog:"\u0e41\u0e04\u0e15\u0e15\u0e32\u0e25\u0e47\u0e2d\u0e01",mcms_live10__:"{user_name} \u0e01\u0e33\u0e25\u0e31\u0e07\u0e2a\u0e31\u0e48\u0e07\u0e0b\u0e37\u0e49\u0e2d",mcms_moreVideo__:"\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e15\u0e34\u0e21",mcms_live2__:"\u0e44\u0e21\u0e48\u0e2d\u0e19\u0e38\u0e0d\u0e32\u0e15\u0e43\u0e2b\u0e49\u0e43\u0e0a\u0e49\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e19\u0e35\u0e49",live_rank_feedback:"\u0e25\u0e35\u0e14\u0e40\u0e14\u0e2d\u0e23\u0e4c\u0e1a\u0e2d\u0e23\u0e4c\u0e14\u0e27\u0e48\u0e32\u0e07\u0e40\u0e1b\u0e25\u0e48\u0e32","live.info.notice.riskError":"\u0e04\u0e27\u0e32\u0e21\u0e04\u0e34\u0e14\u0e40\u0e2b\u0e47\u0e19\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e04\u0e27\u0e1a\u0e04\u0e38\u0e21\u0e25\u0e21",mcms_buyer_live_yugao_fengkong_cancel:"\u0e01\u0e32\u0e23\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14\u0e16\u0e39\u0e01\u0e2a\u0e07\u0e2a\u0e31\u0e22\u0e27\u0e48\u0e32\u0e40\u0e1b\u0e47\u0e19\u0e01\u0e32\u0e23\u0e25\u0e30\u0e40\u0e21\u0e34\u0e14\u0e40\u0e19\u0e37\u0e49\u0e2d\u0e2b\u0e32\u0e41\u0e25\u0e30\u0e16\u0e39\u0e01\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e44\u0e1b\u0e41\u0e25\u0e49\u0e27",mcms_buyer_live_yugao_timeout_end:"\u0e01\u0e32\u0e23\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e2d\u0e2d\u0e01\u0e2d\u0e32\u0e01\u0e32\u0e28\u0e40\u0e19\u0e37\u0e48\u0e2d\u0e07\u0e08\u0e32\u0e01\u0e01\u0e32\u0e23\u0e17\u0e33\u0e07\u0e32\u0e19\u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32","liveroom.text.play_failed":"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e01\u0e31\u0e1a\u0e15\u0e31\u0e27\u0e40\u0e25\u0e48\u0e19 \u0e01\u0e23\u0e38\u0e13\u0e32\u0e25\u0e2d\u0e07\u0e43\u0e2b\u0e21\u0e48\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07",mcms_live8__:"\u0e1c\u0e39\u0e49\u0e19\u0e33\u0e40\u0e2a\u0e19\u0e2d\u0e01\u0e33\u0e25\u0e31\u0e07\u0e08\u0e30\u0e40\u0e23\u0e34\u0e48\u0e21\u0e40\u0e23\u0e47\u0e27 \u0e46 \u0e19\u0e35\u0e49 \u0e01\u0e25\u0e31\u0e1a\u0e21\u0e32\u0e0a\u0e21\u0e43\u0e2b\u0e21\u0e48\u0e20\u0e32\u0e22\u0e2b\u0e25\u0e31\u0e07","live.continue_in_app":"\u0e17\u0e33\u0e15\u0e48\u0e2d\u0e43\u0e19\u0e41\u0e2d\u0e1b Alibaba.com",mcms_buyer_live_living_end:"\u0e01\u0e32\u0e23\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14\u0e2a\u0e34\u0e49\u0e19\u0e2a\u0e38\u0e14\u0e25\u0e07\u0e41\u0e25\u0e49\u0e27",mcms_buyer_live_anchor_leave:"\u0e42\u0e2e\u0e2a\u0e15\u0e4c\u0e2d\u0e2d\u0e01\u0e0a\u0e31\u0e48\u0e27\u0e04\u0e23\u0e32\u0e27\u0e42\u0e1b\u0e23\u0e14\u0e23\u0e2d",asc_live_coupon_list_use4:"\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e41\u0e25\u0e49\u0e27","live.product_box_empty_text":"\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e27\u0e48\u0e32\u0e07\u0e40\u0e1b\u0e25\u0e48\u0e32\u0e42\u0e1b\u0e23\u0e14\u0e2a\u0e37\u0e48\u0e2d\u0e2a\u0e32\u0e23\u0e01\u0e31\u0e1a\u0e42\u0e2e\u0e2a\u0e15\u0e4c","liveroom.text.watchmobile":"\u0e14\u0e39\u0e2a\u0e14\u0e1c\u0e48\u0e32\u0e19\u0e21\u0e37\u0e2d\u0e16\u0e37\u0e2d",recive_coupon_common_title_success:"\u0e23\u0e31\u0e1a\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e41\u0e25\u0e49\u0e27","live.unfollowed_text":"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e01\u0e32\u0e23\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21",mcms_live13__:"\u0e01\u0e32\u0e23\u0e44\u0e25\u0e1f\u0e4c\u0e2a\u0e14\u0e08\u0e1a\u0e41\u0e25\u0e49\u0e27 \u0e02\u0e2d\u0e1a\u0e04\u0e38\u0e13\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e23\u0e31\u0e1a\u0e0a\u0e21",mcms_live1__:"\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e1e\u0e39\u0e14\u0e04\u0e38\u0e22\u0e01\u0e31\u0e1a\u0e1c\u0e39\u0e49\u0e19\u0e33\u0e40\u0e2a\u0e19\u0e2d?",recive_coupon_comment_title:"\u0e04\u0e27\u0e32\u0e21\u0e04\u0e34\u0e14\u0e40\u0e2b\u0e47\u0e19\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49",watch_live_on_mobile:"\u0e0a\u0e21\u0e01\u0e32\u0e23\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14\u0e1c\u0e48\u0e32\u0e19\u0e17\u0e32\u0e07\u0e42\u0e17\u0e23\u0e28\u0e31\u0e1e\u0e17\u0e4c\u0e21\u0e37\u0e2d\u0e16\u0e37\u0e2d","liveroom.text.view":"\u0e21\u0e38\u0e21\u0e21\u0e2d\u0e07","live.text.complain":"\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19",revice_btn_text_fellow:"\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21",asc_live_coupon_to_use:"\u0e41\u0e25\u0e01\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49",asc_live_coupon_list_use2:"\u0e40\u0e23\u0e34\u0e48\u0e21\u0e43\u0e19",asc_player_refresh:"\u0e23\u0e30\u0e1a\u0e1a\u0e15\u0e2d\u0e1a\u0e2a\u0e19\u0e2d\u0e07\u0e44\u0e14\u0e49\u0e0a\u0e49\u0e32 \u0e01\u0e23\u0e38\u0e13\u0e32\u0e25\u0e2d\u0e07\u0e43\u0e2b\u0e21\u0e48\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07",mcms_buyer_live_network_wrong:"\u0e40\u0e04\u0e23\u0e37\u0e2d\u0e02\u0e48\u0e32\u0e22\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e44\u0e21\u0e48\u0e14\u0e35",live_room_Coupon_expired:"\u0e02\u0e2d\u0e2d\u0e20\u0e31\u0e22 \u0e01\u0e32\u0e23\u0e40\u0e01\u0e47\u0e1a\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",asc_live_coupon_insufficient_coupons:"\u0e02\u0e2d\u0e2d\u0e20\u0e31\u0e22 \u0e04\u0e38\u0e13\u0e44\u0e14\u0e49\u0e40\u0e01\u0e47\u0e1a\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e44\u0e1b\u0e41\u0e25\u0e49\u0e27","liveroom.text.commentplaceholder":"\u0e1e\u0e39\u0e14\u0e04\u0e38\u0e22\u0e01\u0e31\u0e1a streamer",asc_live_coupon_list_issueing_title:"\u0e04\u0e39\u0e1b\u0e2d\u0e07Being\u0e2d\u0e2d\u0e01","liverank.history_rank_text":"\u0e1b\u0e23\u0e30\u0e27\u0e31\u0e15\u0e34\u0e04\u0e27\u0e32\u0e21\u0e40\u0e1b\u0e47\u0e19\u0e21\u0e32",live_room_send_catalog_success:"\u0e2a\u0e48\u0e07\u0e04\u0e33\u0e02\u0e2d\u0e41\u0e04\u0e15\u0e15\u0e32\u0e25\u0e47\u0e2d\u0e01\u0e41\u0e25\u0e49\u0e27",asc_live_coupon_list_title:"\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e1e\u0e34\u0e40\u0e28\u0e29\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14","live.components.factory.card.order.desc":"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e18\u0e38\u0e23\u0e01\u0e23\u0e23\u0e21\u0e43\u0e19\u0e0a\u0e48\u0e27\u0e076\u0e40\u0e14\u0e37\u0e2d\u0e19\u0e17\u0e35\u0e48\u0e1c\u0e48\u0e32\u0e19\u0e21\u0e32","ive.enableVolume":"\u0e40\u0e1b\u0e34\u0e14\u0e23\u0e30\u0e14\u0e31\u0e1a\u0e40\u0e2a\u0e35\u0e22\u0e07",mcms_live6__:"\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e19\u0e35\u0e49\u0e21\u0e35\u0e20\u0e32\u0e29\u0e32\u0e17\u0e35\u0e48\u0e44\u0e21\u0e48\u0e2a\u0e38\u0e20\u0e32\u0e1e",coupon_recive_title:"\u0e1b\u0e23\u0e30\u0e2a\u0e1a\u0e04\u0e27\u0e32\u0e21\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08\u0e15\u0e32\u0e21! \u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49\u0e04\u0e38\u0e13\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e40\u0e23\u0e35\u0e22\u0e01\u0e23\u0e49\u0e2d\u0e07\u0e04\u0e39\u0e1b\u0e2d\u0e07","liveroom.text.send":"\u0e2a\u0e48\u0e07\u0e44\u0e27",asc_live_coupon_already_received:"\u0e04\u0e38\u0e13\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e04\u0e39\u0e1b\u0e2d\u0e07","live.mutedAutoplay":"\u0e40\u0e25\u0e48\u0e19\u0e43\u0e1a\u0e49",reminder_sucess:"\u0e40\u0e23\u0e32\u0e08\u0e30\u0e40\u0e15\u0e37\u0e2d\u0e19\u0e04\u0e38\u0e13\u0e40\u0e21\u0e37\u0e48\u0e2d liveshow \u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19\u0e02\u0e36\u0e49\u0e19",unsubscribe:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e01\u0e32\u0e23\u0e40\u0e15\u0e37\u0e2d\u0e19",live_ask_introdution:"\u0e2d\u0e18\u0e34\u0e1a\u0e32\u0e22\u0e43\u0e2b\u0e49\u0e09\u0e31\u0e19\u0e17\u0e23\u0e32\u0e1a",live_pc_network_slot:"\u0e40\u0e04\u0e23\u0e37\u0e2d\u0e02\u0e48\u0e32\u0e22\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e44\u0e21\u0e48\u0e14\u0e35\u0e42\u0e1b\u0e23\u0e14\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e40\u0e04\u0e23\u0e37\u0e2d\u0e02\u0e48\u0e32\u0e22\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13","live.info.notice.noExitError":"\u0e04\u0e27\u0e32\u0e21\u0e04\u0e34\u0e14\u0e40\u0e2b\u0e47\u0e19\u0e15\u0e2d\u0e1a\u0e01\u0e25\u0e31\u0e1a\u0e43\u0e19\u0e1b\u0e31\u0e08\u0e08\u0e38\u0e1a\u0e31\u0e19\u0e44\u0e21\u0e48\u0e21\u0e35\u0e2d\u0e22\u0e39\u0e48\u0e08\u0e23\u0e34\u0e07",mcms_buyer_live_suspend:"\u0e08\u0e30\u0e01\u0e25\u0e31\u0e1a\u0e21\u0e32.","liveroom.text.explaining":"\u0e01\u0e32\u0e23\u0e2a\u0e32\u0e18\u0e34\u0e15",asc_live_coupon_get_coupon:"\u0e23\u0e31\u0e1a\u0e04\u0e39\u0e1b\u0e2d\u0e07","live.checkCatalog":"\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e41\u0e04\u0e15\u0e15\u0e32\u0e25\u0e47\u0e2d\u0e01",mcms_buyer_live_replay_fengkong:"\u0e01\u0e32\u0e23\u0e2d\u0e2d\u0e01\u0e2d\u0e32\u0e01\u0e32\u0e28\u0e2a\u0e14\u0e40\u0e1b\u0e47\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e07\u0e2a\u0e31\u0e22\u0e27\u0e48\u0e32\u0e21\u0e35\u0e01\u0e32\u0e23\u0e25\u0e30\u0e40\u0e21\u0e34\u0e14\u0e40\u0e19\u0e37\u0e49\u0e2d\u0e2b\u0e32\u0e41\u0e25\u0e30\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e14\u0e39\u0e44\u0e14\u0e49","liveroom.title.replay":"\u0e44\u0e2e\u0e44\u0e25\u0e17\u0e4c\u0e01\u0e32\u0e23\u0e40\u0e25\u0e48\u0e19\u0e0b\u0e49\u0e33",mcms_buyer_live_living_fengkong_end:"\u0e01\u0e32\u0e23\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14\u0e16\u0e39\u0e01\u0e2a\u0e07\u0e2a\u0e31\u0e22\u0e27\u0e48\u0e32\u0e40\u0e1b\u0e47\u0e19\u0e01\u0e32\u0e23\u0e25\u0e30\u0e40\u0e21\u0e34\u0e14\u0e40\u0e19\u0e37\u0e49\u0e2d\u0e2b\u0e32\u0e41\u0e25\u0e30\u0e01\u0e32\u0e23\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14\u0e2a\u0e34\u0e49\u0e19\u0e2a\u0e38\u0e14\u0e25\u0e07","liveroom.watch_now":"\u0e14\u0e39\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49","live.text.watch_replay":"\u0e14\u0e39\u0e01\u0e32\u0e23\u0e40\u0e25\u0e48\u0e19\u0e0b\u0e49\u0e33","live.info.notice.blockError":"\u0e04\u0e27\u0e32\u0e21\u0e04\u0e34\u0e14\u0e40\u0e2b\u0e47\u0e19\u0e16\u0e39\u0e01\u0e41\u0e1a\u0e19","liveroom.text.getapp":"\u0e23\u0e31\u0e1a\u0e41\u0e2d\u0e1b",asc_live_coupon_list_use3:"\u0e04\u0e07\u0e40\u0e2b\u0e25\u0e37\u0e2d",mcms_buyer_live_yugao_chidao_wait:"\u0e1e\u0e48\u0e2d\u0e04\u0e49\u0e32\u0e2a\u0e48\u0e07\u0e0a\u0e49\u0e32\u0e44\u0e1b\u0e19\u0e34\u0e14\u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e2d\u0e2a\u0e31\u0e01\u0e04\u0e23\u0e39\u0e48",asc_live_coupon_collect_time:"\u0e1b\u0e4a\u0e2d\u0e1b\u0e2d\u0e31\u0e1b\u0e19\u0e35\u0e49\u0e08\u0e30\u0e2b\u0e32\u0e22\u0e44\u0e1b\u0e43\u0e19 {{time}} \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",mcms_live5__:"\u0e23\u0e35\u0e40\u0e1f\u0e23\u0e0a",live_room_buyer_send_catalog_success:"\u0e2a\u0e48\u0e07\u0e04\u0e33\u0e02\u0e2d\u0e41\u0e04\u0e15\u0e15\u0e32\u0e25\u0e47\u0e2d\u0e01\u0e41\u0e25\u0e49\u0e27","live.cancel_app":"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01","subscribed.detail":"\u0e2a\u0e21\u0e31\u0e04\u0e23\u0e2a\u0e21\u0e32\u0e0a\u0e34\u0e01\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22 \u0e40\u0e0b\u0e2a\u0e0a\u0e31\u0e19\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14\u0e08\u0e30\u0e40\u0e23\u0e34\u0e48\u0e21\u0e43\u0e19\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48 {{date}} \u0e41\u0e25\u0e30\u0e40\u0e23\u0e32\u0e08\u0e30\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19\u0e43\u0e2b\u0e49\u0e04\u0e38\u0e13\u0e40\u0e02\u0e49\u0e32\u0e23\u0e31\u0e1a\u0e0a\u0e21 \u0e13 \u0e40\u0e27\u0e25\u0e32  {{time}}",asc_live_coupon_list_use1:"\u0e14\u0e39\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e02\u0e2d\u0e07\u0e09\u0e31\u0e19",mcms_live9__:"\u0e19\u0e31\u0e1a\u0e16\u0e2d\u0e22\u0e2b\u0e25\u0e31\u0e07\u0e2a\u0e39\u0e48\u0e01\u0e32\u0e23\u0e44\u0e25\u0e1f\u0e4c\u0e2a\u0e14",subscribe:"\u0e15\u0e31\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19",mcms_live3__:"\u0e2a\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e41\u0e25\u0e49\u0e27",live_room_cannot_receive:"\u0e1c\u0e39\u0e49\u0e02\u0e32\u0e22\u0e43\u0e19 Alibaba.com \u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e23\u0e31\u0e1a\u0e04\u0e39\u0e1b\u0e2d\u0e07\u0e44\u0e14\u0e49","liveroom.text.directory":"\u0e44\u0e14\u0e40\u0e23\u0e01\u0e17\u0e2d\u0e23\u0e35\u0e2a\u0e14","liveroom.text.changeContent":"Anchor \u0e40\u0e1e\u0e34\u0e48\u0e07\u0e1e\u0e39\u0e14\u0e16\u0e36\u0e07\u0e40\u0e19\u0e37\u0e49\u0e2d\u0e2b\u0e32\u0e19\u0e35\u0e49\u0e41\u0e25\u0e30\u0e04\u0e38\u0e13\u0e01\u0e33\u0e25\u0e31\u0e07\u0e14\u0e39\u0e04\u0e33\u0e2d\u0e18\u0e34\u0e1a\u0e32\u0e22","liverank.live_rank_time_desc":"\u0e40\u0e27\u0e25\u0e32\u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19\u0e02\u0e2d\u0e07\u0e2a\u0e16\u0e34\u0e15\u0e34: {{time}}",asc_chat_now:"\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49"}},function(e,t){e.exports={}},function(e,t){e.exports={subscribe:"\u06cc\u0627\u062f \u062f\u06c1\u0627\u0646\u06cc \u0645\u0642\u0631\u0631 \u06a9\u0631\u06cc\u06ba",subscribed:"\u0633\u0628\u0633\u06a9\u0631\u0627\u0626\u0628",unsubscribe:"\u0631\u06cc\u0645\u0627\u0626\u0646\u0688\u0631 \u0645\u0646\u0633\u0648\u062e",recive_coupon_common_title:"\u0688\u0633\u06a9\u0627\u0624\u0646\u0679 \u0648\u0627\u0624\u0686\u0631","subscribed.detail":"\u0633\u0628\u0633\u06a9\u0631\u0627\u0626\u0628 \u0634\u062f\u06c1 \u0644\u0627\u0626\u06cc\u0648 \u0633\u06cc\u0634\u0646{{\u062a\u0627\u0631\u06cc\u062e{{\u060c\u067e\u0631 \u0634\u0631\u0648\u0639 \u06c1\u0648\u062c\u0627\u0626\u06d2\u06af\u0627 \u0627\u0648\u0631 \u06c1\u0645 \u06a9\u0648 {{\u0648\u0642\u062a {{ \u0648\u0642\u062a \u067e\u0631 \u062f\u06cc\u06a9\u06be\u0646\u06d2 \u06a9\u06d2 \u0644\u0626\u06d2 \u0627\u0634\u0627\u0631\u06c1 \u06a9\u0631\u06cc\u06ba \u06af\u06d2\u06d4","live.continue_in_app":"\u0627\u06cc\u067e \u067e\u0631 \u062c\u0627\u0631\u06ccAlibaba.com"}},function(e,t){e.exports={"liveroom.text.explaining":"\u0414\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0430\u0446\u0456\u044f",asc_live_coupon_collect_time:"This pop-up will disappear in {{time}} seconds",recive_coupon_common_title:"\u041a\u0443\u043f\u043e\u043d \u043d\u0430 \u0437\u043d\u0438\u0436\u043a\u0443",mcms_live13__:"\u041f\u0440\u044f\u043c\u0430 \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0456\u044f \u0437\u0430\u043a\u0456\u043d\u0447\u0438\u043b\u0430\u0441\u044f. \u0414\u044f\u043a\u0443\u0454\u043c\u043e \u0437\u0430 \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434.",recive_coupon_common_title_success:"\u041a\u0443\u043f\u043e\u043d\u0438 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u0456",already_recive_coupon:"\u041a\u0443\u043f\u043e\u043d\u0438 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u0456",asc_live_coupon_collect_success:"\u041a\u0443\u043f\u043e\u043d\u0438 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u0456",subscribe:"\u0432\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0438 \u043d\u0430\u0433\u0430\u0434\u0443\u0432\u0430\u043d\u043d\u044f"}},function(e,t){e.exports={mcms_buyer_live_suspend:"\u05db\u05d1\u05e8 \u05d7\u05d5\u05d6\u05e8.",mcms_live7__:"\u05e9\u05d2\u05d9\u05d0\u05ea \u05e8\u05e9\u05ea, \u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1",live_pc_network_slot:"\u05d4\u05e8\u05e9\u05ea \u05e9\u05dc\u05da \u05d4\u05d5\u05d0 \u05dc\u05d0 \u05d8\u05d5\u05d1. \u05d0\u05e0\u05d0 \u05d1\u05d3\u05d5\u05e7 \u05e9\u05dc\u05da \u05e8\u05e9\u05ea.",asc_player_refresh:"\u05d4\u05de\u05e2\u05e8\u05db\u05ea \u05de\u05d2\u05d9\u05d1\u05d4 \u05dc\u05d0\u05d8. \u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1.",asc_live_coupon_list_use6:"\u05d4\u05e0\u05d7\u05d4 \u05de\u05e8\u05d1\u05d9\u05ea #{{count}} \u05d3\u05d5\u05dc\u05e8 \u05d0\u05de\u05e8\u05d9\u05e7\u05d0\u05d9","live.checkCatalog":"\u05dc\u05d1\u05d3\u05d5\u05e7 \u05e7\u05d8\u05dc\u05d5\u05d2",mcms_buyer_live_replay_fengkong:"\u05d0\u05ea \u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d9 \u05d4\u05d5\u05d0 \u05d7\u05e9\u05d3 \u05e9\u05dc \u05ea\u05d5\u05db\u05df \u05d4\u05e4\u05e8\u05d4 \u05d5\u05dc\u05d0 \u05d9\u05db\u05d5\u05dc \u05dc\u05d4\u05d9\u05d5\u05ea \u05d1\u05de\u05e2\u05e7\u05d1",asc_live_coupon_insufficient_coupons:"\u05de\u05e6\u05d8\u05e2\u05e8\u05d9\u05dd, \u05d4\u05e7\u05d5\u05e4\u05d5\u05e0\u05d9\u05dd \u05e0\u05d0\u05e1\u05e4\u05d5",revice_btn_text_fellow:"\u05d1\u05e6\u05e2",mcms_live6__:"\u05d4\u05d5\u05d3\u05e2\u05d4 \u05d6\u05d5 \u05de\u05db\u05d9\u05dc\u05d4 \u05e9\u05e4\u05d4 \u05d0\u05e1\u05d5\u05e8\u05d4",mcms_buyer_live_streambreake:"\u05d0\u05ea \u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d9 \u05d4\u05d5\u05d0 \u05dc\u05d0 \u05d7\u05dc\u05e7, \u05d0\u05e0\u05d0 \u05d4\u05de\u05ea\u05df \u05e8\u05d2\u05e2","live.info.notice.blockError":"\u05d4\u05e2\u05e8\u05d5\u05ea \u05db\u05d1\u05e8 \u05d0\u05e1\u05e8\u05d5",mcms_live4__:"\u05e2\u05e7\u05d5\u05d1",mcms_live14__:"\u05d0\u05ea \u05de\u05d2\u05d9\u05e9 \u05d9\u05e9 \u05d1\u05d0\u05d5\u05e4\u05df \u05d6\u05de\u05e0\u05d9 \u05e9\u05de\u05d0\u05dc. \u05dc\u05d7\u05d6\u05d5\u05e8 \u05de\u05d0\u05d5\u05d7\u05e8 \u05d9\u05d5\u05ea\u05e8 \u05db\u05d3\u05d9 \u05dc\u05d4\u05de\u05e9\u05d9\u05da \u05e6\u05e4\u05d9\u05d9\u05d4",asc_live_coupon_list_use2:"\u05de\u05ea\u05d7\u05d9\u05dc \u05d1-",mcms_buyer_live_yugao_chidao_wait:"\u05d4\u05e1\u05d5\u05d7\u05e8 \u05d4\u05d5\u05d0 \u05e7\u05e6\u05ea \u05de\u05d0\u05d5\u05d7\u05e8. \u05d0\u05e0\u05d0 \u05d4\u05de\u05ea\u05df \u05e8\u05d2\u05e2.",live_ask_introdution:"\u05d4\u05e1\u05d1\u05d9\u05e8\u05d5 \u05dc\u05d9","live.mutedAutoplay":"\u05d0\u05d9\u05dc\u05dd \u05de\u05e9\u05d7\u05e7","liveroom.text.directory":"\u05d7\u05d9 \u05e1\u05e4\u05e8\u05d9\u05d9\u05d4","liveroom.productslist":"\u05e8\u05e9\u05d9\u05de\u05ea \u05de\u05d5\u05e6\u05e8\u05d9\u05dd",mcms_live3__:"\u05d4\u05d4\u05d5\u05d3\u05e2\u05d4 \u05e0\u05e9\u05dc\u05d7\u05d4","liverank.live_rank_time_desc":"\u05dc\u05d4\u05ea\u05d7\u05d9\u05dc \u05d6\u05de\u05df \u05e9\u05dc \u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d4: {{time}}",revice_btn_text_message:"\u05ea\u05d2\u05d5\u05d1\u05d4",subscribe:"\u05dc\u05d4\u05d2\u05d3\u05d9\u05e8 \u05ea\u05d6\u05db\u05d5\u05e8\u05ea","liveroom.text.changeExplanation":"\u05d4\u05de\u05d5\u05e6\u05e8 \u05d4\u05d5\u05e6\u05d2 \u05d6\u05d4 \u05e2\u05ea\u05d4. \u05d0\u05ea\u05d4 \u05e6\u05d5\u05e4\u05d4 \u05d1\u05de\u05d1\u05d5\u05d0 \u05e2\u05db\u05e9\u05d9\u05d5.",coupon_recive_title:"\u05d1\u05d4\u05e6\u05dc\u05d7\u05d4 \u05d0\u05d7\u05e8\u05d9\u05d5! \u05d0\u05ea\u05d4 \u05d9\u05db\u05d5\u05dc \u05e2\u05db\u05e9\u05d9\u05d5 \u05d8\u05d5\u05e2\u05df \u05e7\u05d5\u05e4\u05d5\u05df.",mcms_buyer_live_replay_delete:"\u05d0\u05ea \u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d9 \u05e0\u05de\u05d7\u05e7 \u05e2\u05dc \u05d9\u05d3\u05d9 \u05d4\u05e1\u05d5\u05d7\u05e8 \u05d5\u05dc\u05d0 \u05d9\u05db\u05d5\u05dc \u05dc\u05d4\u05d9\u05d5\u05ea \u05e9\u05e0\u05e6\u05e4\u05d5",asc_live_coupon_collect_success:"\u05e9\u05d5\u05d1\u05e8\u05d9\u05dd \u05e9\u05e0\u05e4\u05d3\u05d5",live_room_send_catalog_success:"\u05d4\u05d1\u05e7\u05e9\u05d4 \u05e9\u05dc\u05da \u05e2\u05d1\u05d5\u05e8 \u05e7\u05d8\u05dc\u05d5\u05d2 \u05e0\u05e9\u05dc\u05d7\u05d4.","subscribed.detail":"\u05d4\u05d4\u05e8\u05e9\u05de\u05d4 \u05d4\u05ea\u05d1\u05e6\u05e2\u05d4. \u05d4\u05e9\u05d9\u05d3\u05d5\u05e8 \u05d4\u05d7\u05d9 \u05d9\u05d7\u05dc \u05d1\u05ea\u05d0\u05e8\u05d9\u05da {{date}} \u05d5\u05d0\u05e0\u05d5 \u05e0\u05e9\u05dc\u05da \u05dc\u05da \u05d1\u05e7\u05e9\u05d4 \u05dc\u05d4\u05ea\u05d7\u05d9\u05dc \u05dc\u05e6\u05e4\u05d5\u05ea \u05d1\u05e9\u05e2\u05d4 {{time}}.",asc_chat_now:"\u05e9\u05d5\u05d7\u05d7 \u05d1\u05e6'\u05d0\u05d8 \u05e2\u05db\u05e9\u05d9\u05d5",recive_coupon_comment_title:"\u05ea\u05d2\u05d5\u05d1\u05d4 \u05e2\u05db\u05e9\u05d9\u05d5",asc_live_coupon_collect_time:"\u05d4\u05d5\u05d3\u05e2\u05d4 \u05e7\u05d5\u05e4\u05e6\u05ea \u05d6\u05d5 \u05ea\u05e2\u05dc\u05dd \u05ea\u05d5\u05da {{time}} \u05e9\u05e0\u05d9\u05d5\u05ea.","liveroom.text.product.more":"\u05d9\u05d5\u05ea\u05e8","liveroom.text.view":"\u05e6\u05e4\u05d4",mcms_live9__:"\u05e1\u05e4\u05d9\u05e8\u05d4 \u05dc\u05d0\u05d7\u05d5\u05e8 \u05d1\u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d9",mcms_live12__:"{user_name} \u05e0\u05db\u05e0\u05e1 \u05dc\u05d4\u05d6\u05e8\u05de\u05d4 \u05d7\u05d9\u05d4 \u05d6\u05d5",asc_live_coupon_list_use3:"\u05e0\u05d5\u05ea\u05e8\u05d9\u05dd","liveroom.text.backToLive":"\u05d7\u05d6\u05e8\u05d4 \u05dc\u05d7\u05d9\u05d5\u05ea",live_room_Coupon_expired:"\u05de\u05e6\u05d8\u05e2\u05e8\u05d9\u05dd, \u05d0\u05d9\u05e1\u05d5\u05e3 \u05d4\u05e9\u05d5\u05d1\u05e8 \u05e0\u05db\u05e9\u05dc","live.product_box_empty_text":"\u05d0\u05ea \u05e8\u05e9\u05d9\u05de\u05ea \u05d4\u05d5\u05d0 \u05e8\u05d9\u05e7, \u05d0\u05e0\u05d0 \u05dc\u05ea\u05e7\u05e9\u05e8 \u05e2\u05dd \u05d4\u05de\u05d0\u05e8\u05d7.",mcms_live2__:"\u05d4\u05d5\u05d3\u05e2\u05d4 \u05d6\u05d5 \u05d0\u05e1\u05d5\u05e8\u05d4",mcms_live8__:"\u05d4\u05de\u05e6\u05d9\u05d2 \u05d9\u05ea\u05d7\u05d9\u05dc \u05d0\u05ea \u05d4\u05de\u05d5\u05e4\u05e2 \u05d1\u05e7\u05e8\u05d5\u05d1. \u05d7\u05d6\u05d5\u05e8 \u05dc\u05e6\u05e4\u05d5\u05ea \u05de\u05d0\u05d5\u05d7\u05e8 \u05d9\u05d5\u05ea\u05e8",recive_coupon_common_title:"\u05d4\u05e0\u05d7\u05d4 \u05e9\u05d5\u05d1\u05e8",already_recive_coupon:"\u05e9\u05d5\u05d1\u05e8\u05d9\u05dd \u05e9\u05e0\u05e4\u05d3\u05d5","live.info.notice.noExitError":"\u05d4\u05e0\u05d5\u05db\u05d7\u05d9 \u05ea\u05e9\u05d5\u05d1\u05d4 \u05ea\u05d2\u05d5\u05d1\u05d4 \u05dc\u05d0 \u05e7\u05d9\u05d9\u05dd",asc_live_coupon_list_issueing_title:"\u05e7\u05d5\u05e4\u05d5\u05e0\u05d9\u05dd \u05e9\u05d4\u05e0\u05e4\u05d9\u05e7","liveroom.text.loading":"\u05d8\u05e2\u05d9\u05e0\u05ea...",asc_live_coupon_list_title:"\u05e9\u05d5\u05d1\u05e8\u05d9\u05dd \u05d1\u05dc\u05e2\u05d3\u05d9\u05d9\u05dd \u05dc\u05d7\u05d9","ive.enableVolume":"\u05d4\u05e4\u05e2\u05dc \u05d0\u05ea \u05e0\u05e4\u05d7","subscribe.success":"\u05de\u05d9\u05e0\u05d5\u05d9 \u05e0\u05e8\u05e9\u05dd.",asc_live_coupon_get_coupon:"\u05e7\u05d1\u05dc \u05e7\u05d5\u05e4\u05d5\u05e0\u05d9\u05dd",unsubscribe:"\u05d1\u05d8\u05dc \u05d0\u05ea \u05d4\u05ea\u05d6\u05db\u05d5\u05e8\u05ea","liveroom.watch_now":"\u05e9\u05e2\u05d5\u05df \u05e2\u05db\u05e9\u05d9\u05d5",mcms_buyer_live_yugao_timeout_end:"\u05d0\u05ea \u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d9 \u05d4\u05d9\u05d4 \u05dc\u05d0 \u05e9\u05d9\u05d3\u05d5\u05e8 \u05d1\u05e9\u05dc \u05e9\u05e2\u05d5\u05ea \u05e0\u05d5\u05e1\u05e4\u05d5\u05ea",live_room_buyer_send_catalog_success:"\u05d4\u05d1\u05e7\u05e9\u05d4 \u05e9\u05dc\u05da \u05e2\u05d1\u05d5\u05e8 \u05e7\u05d8\u05dc\u05d5\u05d2 \u05e0\u05e9\u05dc\u05d7\u05d4.",revice_btn_text_get:"\u05dc\u05e7\u05d1\u05dc \u05e7\u05d5\u05e4\u05d5\u05df \u05e2\u05db\u05e9\u05d9\u05d5",mcms_live5__:"\u05e8\u05e2\u05e0\u05df",subscribed:"\u05de\u05e0\u05d5\u05d9",asc_live_coupon_already_received:"\u05d0\u05e1\u05e4\u05ea \u05d0\u05ea \u05d4\u05e7\u05d5\u05e4\u05d5\u05e0\u05d9\u05dd.","live.continue_in_app":"\u05d4\u05de\u05e9\u05da \u05d1\u05d9\u05d9\u05e9\u05d5\u05dd Alibaba.com",reminder_sucess:"\u05d0\u05e0\u05d7\u05e0\u05d5'll \u05dc\u05d4\u05d6\u05db\u05d9\u05e8 \u05dc\u05da \u05db\u05d0\u05e9\u05e8 \u05d0\u05ea liveshow \u05de\u05ea\u05d7\u05d9\u05dc.",mcms_seabed28__:"\u05db\u05dc \u05d4\u05de\u05d5\u05e6\u05e8\u05d9\u05dd","live.components.factory.card.order.desc":"\u05e1\u05db\u05d5\u05dd \u05e2\u05e1\u05e7\u05d4 \u05d1 \u05d4\u05d0\u05d7\u05e8\u05d5\u05df 6 \u05d7\u05d5\u05d3\u05e9\u05d9\u05dd",mcms_buyer_live_living_end_watch_replay:"\u05e9\u05e2\u05d5\u05df \u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d5\u05d6\u05e8","live.open_app":"\u05e4\u05ea\u05d7","live.text.complain":'\u05d3\u05d5"\u05d7',live_have_already_sent:"\u05d1\u05e7\u05e9\u05d4 \u05e9\u05e0\u05e9\u05dc\u05d7\u05d4",mcms_buyer_live_network_wrong_tips:"\u05d0\u05e0\u05d0 \u05d1\u05d3\u05d5\u05e7 \u05e9\u05dc\u05da \u05e8\u05e9\u05ea",recive_coupon_comment_success_title:"\u05d1\u05d4\u05e6\u05dc\u05d7\u05d4 \u05ea\u05d2\u05d5\u05d1\u05d5\u05ea! \u05d0\u05ea\u05d4 \u05d9\u05db\u05d5\u05dc \u05e2\u05db\u05e9\u05d9\u05d5 \u05d8\u05d5\u05e2\u05df \u05e7\u05d5\u05e4\u05d5\u05df.","liverank.history_rank_text":"\u05d4\u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05d4","liveroom.entering":"\u05de\u05d5\u05d6\u05de\u05df \u05dc\u05d1\u05d5\u05d0 \u05ea\u05e8\u05d0\u05d4 livestream",coupon_cutdown_text:"\u05d6\u05de\u05df-\u05de\u05d5\u05d2\u05d1\u05dc",detail_chat_now:"\u05e9\u05d5\u05d7\u05d7 \u05d1\u05e6'\u05d0\u05d8 \u05e2\u05db\u05e9\u05d9\u05d5",live_room_collection_failed:"\u05de\u05e6\u05d8\u05e2\u05e8\u05d9\u05dd, \u05ea\u05d5\u05e7\u05e3 \u05d4\u05e9\u05d5\u05d1\u05e8 \u05e4\u05d2.",mcms_moreVideo__:"\u05e2\u05d5\u05d3 \u05e1\u05e8\u05d8\u05d5\u05e0\u05d9\u05dd","live.info.notice.riskError":"\u05d4\u05e2\u05e8\u05d5\u05ea \u05db\u05d1\u05e8 \u05e8\u05d5\u05d7-\u05de\u05d1\u05d5\u05e7\u05e8",mcms_live10__:"{user_name} \u05de\u05ea\u05d7\u05d9\u05dc \u05d4\u05d6\u05de\u05e0\u05d4",asc_live_coupon_to_use:"\u05e4\u05d3\u05d4 \u05db\u05e2\u05ea",live_rank_feedback:"Leaderboard \u05d4\u05d5\u05d0 \u05e8\u05d9\u05e7",live_room_cannot_receive:"\u05e1\u05d5\u05d7\u05e8\u05d9\u05dd \u05d1-Alibaba.com\u05dc\u05d0 \u05d9\u05db\u05d5\u05dc\u05d9\u05dd \u05dc\u05e7\u05d1\u05dc \u05e9\u05d5\u05d1\u05e8\u05d9\u05dd.",live_already_sent_toast:"\u05e9\u05d4\u05d1\u05e7\u05e9\u05d4 \u05e0\u05e9\u05dc\u05d7\u05d4. \u05d0\u05ea livestreamer \u05e0\u05d5\u05ea\u05e0\u05d9\u05dd \u05d4\u05e4\u05d2\u05e0\u05d4 \u05d1\u05e7\u05e8\u05d5\u05d1.",recive_coupon_common_title_success:"\u05e9\u05d5\u05d1\u05e8\u05d9\u05dd \u05e9\u05e0\u05e4\u05d3\u05d5",mcms_live11__:"{user_name} \u05e9\u05d5\u05dc\u05d7 \u05e9\u05d0\u05d9\u05dc\u05ea\u05d4",mcms_buyer_live_anchor_leave:"\u05d4\u05de\u05d0\u05e8\u05d7 \u05e2\u05dc\u05d9\u05dd \u05d1\u05d0\u05d5\u05e4\u05df \u05d6\u05de\u05e0\u05d9. \u05d0\u05e0\u05d0 \u05d4\u05de\u05ea\u05df.","live.unfollowed_text":"\u05dc\u05d4\u05e4\u05e1\u05d9\u05e7 \u05dc\u05e2\u05e7\u05d5\u05d1",mcms_buyer_live_network_wrong:"\u05d4\u05e8\u05e9\u05ea \u05e9\u05dc\u05da \u05d4\u05d5\u05d0 \u05dc\u05d0 \u05d8\u05d5\u05d1.",mcms_live13__:"\u05d4\u05e1\u05d8\u05e8\u05d9\u05de\u05d9\u05e0\u05d2 \u05d1\u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d9 \u05d4\u05e1\u05ea\u05d9\u05d9\u05dd. \u05ea\u05d5\u05d3\u05d4 \u05e9\u05e6\u05e4\u05d9\u05ea\u05dd.",asc_live_coupon_list_use4:"\u05e7\u05d5\u05e4\u05d5\u05e0\u05d9\u05dd \u05e9\u05d4\u05ea\u05e7\u05d1\u05dc\u05d5","liverank.history_rank_time_desc":"\u05dc\u05d4\u05ea\u05d7\u05d9\u05dc \u05d6\u05de\u05df \u05e9\u05dc \u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d4: {{time}}","liveroom.text.getapp":"\u05dc\u05e7\u05d1\u05dc \u05d0\u05ea app",mcms_buyer_live_yugao_fengkong_cancel:"\u05d0\u05ea \u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d9 \u05d4\u05d5\u05d0 \u05d7\u05e9\u05d3 \u05e9\u05dc \u05ea\u05d5\u05db\u05df \u05e4\u05d2\u05d9\u05e2\u05d4 \u05d5 \u05d1\u05d5\u05d8\u05dc\u05d4.",asc_live_coupon_list_use5:"\u05d6\u05de\u05d9\u05df \u05d0\u05d7\u05e8\u05d9: {{time}}",mcms_buyer_live_living_fengkong_end:"\u05d0\u05ea \u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d9 \u05d4\u05d5\u05d0 \u05d7\u05e9\u05d3 \u05e9\u05dc \u05ea\u05d5\u05db\u05df \u05d4\u05e4\u05e8\u05d4, \u05d5\u05d0\u05ea \u05dc\u05d7\u05d9\u05d5\u05ea \u05e9\u05d9\u05d3\u05d5\u05e8 \u05d4\u05e1\u05ea\u05d9\u05d9\u05dd",have_no_recive_coupon:"\u05d0\u05e0\u05d5 \u05de\u05e6\u05d8\u05e2\u05e8\u05d9\u05dd, \u05db\u05dc \u05e7\u05d5\u05e4\u05d5\u05e0\u05d9\u05dd \u05d9\u05e9 \u05db\u05d1\u05e8 \u05db\u05d1\u05e8 \u05d8\u05e2\u05df.","liveroom.text.play_failed":"\u05d0\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e0\u05d2\u05df. \u05d9\u05e9 \u05dc\u05e0\u05e1\u05d5\u05ea \u05e9\u05d5\u05d1 \u05de\u05d0\u05d5\u05d7\u05e8 \u05d9\u05d5\u05ea\u05e8.",revice_btn_text_already:"\u05d8\u05e2\u05df",mcms_buyer_live_yugao_delete_cancel:"\u05d0\u05ea \u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d9 \u05e0\u05de\u05d7\u05e7 \u05e2\u05dc \u05d9\u05d3\u05d9 \u05d4\u05e1\u05d5\u05d7\u05e8 \u05d5\u05d1\u05d9\u05d8\u05dc","liveroom.text.changeContent":"\u05d0\u05ea \u05e2\u05d5\u05d2\u05df \u05d9\u05e9 \u05e8\u05e7 \u05d3\u05d9\u05d1\u05e8 \u05e2\u05dc \u05d6\u05d4 \u05ea\u05d5\u05db\u05df, \u05d5\u05d0\u05ea\u05d4 \u05e6\u05d5\u05e4\u05d4 \u05d0\u05ea \u05d4\u05e1\u05d1\u05e8.",revice_btn_text_null:"\u05db\u05dc \u05d8\u05e2\u05e0\u05d5.","live.get_catalog":"\u05dc\u05e7\u05d1\u05dc \u05e7\u05d8\u05dc\u05d5\u05d2",mcms_live1__:"\u05e8\u05d5\u05e6\u05d4 \u05dc\u05d3\u05d1\u05e8 \u05e2\u05dd \u05de\u05e6\u05d9\u05d2?",recive_coupon_follow_success_title:"\u05d1\u05d4\u05e6\u05dc\u05d7\u05d4 \u05d0\u05d7\u05e8\u05d9\u05d5! \u05d0\u05ea\u05d4 \u05d9\u05db\u05d5\u05dc \u05e2\u05db\u05e9\u05d9\u05d5 \u05d8\u05d5\u05e2\u05df \u05e7\u05d5\u05e4\u05d5\u05df.","liveroom.text.send":"\u05dc\u05e9\u05dc\u05d5\u05d7",recive_coupon_follow_title:"\u05d1\u05e6\u05e2 livestreamer",watch_live_on_mobile:"\u05e6\u05e4\u05d9\u05d9\u05d4 \u05d1\u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d9 \u05d1\u05e0\u05d9\u05d9\u05d3",asc_live_catalog:"\u05e7\u05d8\u05dc\u05d5\u05d2",mcms_buyer_live_contact_supplier:"\u05e7\u05e9\u05e8 \u05e1\u05e4\u05e7",mcms_buyer_live_living_end:"\u05d0\u05ea \u05e9\u05d9\u05d3\u05d5\u05e8 \u05d7\u05d9 \u05d4\u05d5\u05d0 \u05de\u05e2\u05dc",live_room_send_catalog_later:"\u05d4\u05d4\u05d5\u05d3\u05e2\u05d4 \u05e0\u05e9\u05dc\u05d7\u05d4. \u05e0\u05d0 \u05dc\u05d4\u05de\u05ea\u05d9\u05df \u05dc\u05ea\u05e9\u05d5\u05d1\u05d4 \u05de\u05d4\u05e1\u05e4\u05e7.",coupon_second:"\u05e9\u05e0\u05d9\u05d5\u05ea","live.text.watch_replay":"\u05e6\u05e4\u05d4 \u05d1\u05d4\u05e4\u05e2\u05dc\u05d4 \u05d7\u05d5\u05d6\u05e8\u05ea",asc_live_coupon_list_use7:"\u05e7\u05d5\u05e4\u05d5\u05e0\u05d9\u05dd","subscribe.cancel":"\u05d1\u05d9\u05d8\u05d5\u05dc \u05de\u05d9\u05e0\u05d5\u05d9.","liverank.live_rank_text":"\u05d4\u05d9\u05d5\u05dd","liveroom.text.watchmobile":"\u05e9\u05e2\u05d5\u05df \u05dc\u05d7\u05d9\u05d5\u05ea \u05e2\u05dc \u05e0\u05d9\u05d9\u05d3","liveroom.text.commentplaceholder":"\u05dc\u05d3\u05d1\u05e8 streamer","liveroom.text.explaining":"\u05d4\u05d3\u05d2\u05de\u05d4",scan_with_mobile_app:"\u05d9\u05e9 \u05dc\u05e1\u05e8\u05d5\u05e7 \u05d1\u05d0\u05de\u05e6\u05e2\u05d5\u05ea \u05d4\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4 \u05e9\u05dc Alibaba.com \u05dc\u05e0\u05d9\u05d9\u05d3 (Android 7.12.0 \u05d5\u05de\u05e2\u05dc\u05d4, iOS 7.12.1 \u05d5\u05de\u05e2\u05dc\u05d4)",asc_live_coupon_list_use1:"\u05d4\u05e6\u05d2 \u05d0\u05ea \u05d4\u05e7\u05d5\u05e4\u05d5\u05e0\u05d9\u05dd \u05e9\u05dc\u05d9","live.cancel_app":"\u05d1\u05d9\u05d8\u05d5\u05dc"}},function(e,t){e.exports={"live.unfollowed_text":"Sin seguir",mcms_live4__:"Seguir",mcms_moreVideo__:"M\xe1s videos",live_rank_feedback:"La tabla de clasificaci\xf3n est\xe1 vac\xeda",coupon_recive_title:"\xa1Seguido con \xe9xito! Ahora puedes reclamar un cup\xf3n.","liveroom.text.loading":"Cargando...",revice_btn_text_already:"Reclamado","live.text.watch_replay":"Ver repetici\xf3n",revice_btn_text_get:"Obtener cup\xf3n ahora","live.text.complain":"Informe","liverank.live_rank_time_desc":"Hora de inicio de las estad\xedsticas: {{time}}","liverank.history_rank_text":"Historia",asc_live_coupon_list_use4:"Cupones recibidos",mcms_buyer_live_yugao_chidao_wait:"El comerciante llega un poco tarde. Por favor espere un momento.",mcms_buyer_live_suspend:"Estar de vuelta enseguida.",coupon_cutdown_text:"Por tiempo limitado","subscribe.cancel":"Sin suscripci\xf3n.",watch_live_on_mobile:"Ver en vivo en el m\xf3vil",mcms_buyer_live_yugao_timeout_end:"La transmisi\xf3n en vivo no se transmiti\xf3 debido a las horas extras",mcms_buyer_live_network_wrong_tips:"Compruebe su red",mcms_live1__:"\xbfDeseas hablar con el presentador?",asc_live_coupon_to_use:"Redimir ahora",recive_coupon_common_title:"Cup\xf3n de descuento",asc_live_coupon_list_use2:"Comienza en","liveroom.text.view":"Vista",recive_coupon_comment_title:"Comentario ahora",mcms_live3__:"Mensaje enviado","liveroom.text.changeContent":"El ancla acaba de hablar sobre este contenido, y usted est\xe1 viendo la explicaci\xf3n.",asc_live_coupon_collect_success:"Cupones reclamados","liveroom.text.play_failed":"Se produce un error en el reproductor. Int\xe9ntelo de nuevo m\xe1s tarde.",mcms_buyer_live_network_wrong:"Su red no es buena.","live.info.notice.blockError":"Comentarios han sido prohibidos",recive_coupon_follow_title:"Sigue en livestreamer","live.info.notice.noExitError":"El comentario de respuesta actual no existe","liveroom.text.send":"Enviar",asc_live_coupon_list_use1:"Ver mis cupones","liveroom.watch_now":"Reloj ahora","live.checkCatalog":"Comprobar cat\xe1logo",mcms_live13__:"La transmisi\xf3n en vivo ha terminado. Gracias por unirte.",mcms_buyer_live_living_end:"La transmisi\xf3n en vivo ha terminado",mcms_live10__:"{user_name} est\xe1 iniciando un pedido",mcms_live11__:"{user_name} est\xe1 enviando una consulta",live_room_cannot_receive:"Los comerciantes de Alibaba.com no pueden recibir cupones.",asc_live_catalog:"Cat\xe1logo","liveroom.productslist":"Lista de productos",mcms_buyer_live_contact_supplier:"Proveedor de contacto",mcms_live7__:"Error de red, int\xe9ntalo nuevamente","liveroom.text.directory":"Directorio en vivo",subscribe:"Establecer recordatorio",already_recive_coupon:"Cupones reclamados","liveroom.entering":"Bienvenido a la transmisi\xf3n en vivo",mcms_buyer_live_replay_delete:"La transmisi\xf3n en vivo ha sido eliminada por el comerciante y no se puede ver",live_room_collection_failed:"Lo sentimos. La actividad expir\xf3.",live_room_Coupon_expired:"Lo siento. La recopilaci\xf3n de cupones fall\xf3.","subscribe.success":"Suscrito.",mcms_live5__:"Actualizar","live.components.factory.card.order.desc":"Monto de la transacci\xf3n en los \xfaltimos 6 meses",asc_live_coupon_list_use7:"cupones",coupon_second:"Segundos","subscribed.detail":"Suscrito. La sesi\xf3n en vivo comenzar\xe1 el {{date}} y se lo recordaremos para que la vea a tiempo a las {{time}}.","liveroom.text.explaining":"Demostraci\xf3n",revice_btn_text_message:"Comentario","liveroom.text.product.more":"M\xe1s",live_ask_introdution:"Explicarme","live.mutedAutoplay":"Juego mudo",mcms_buyer_live_streambreake:"La transmisi\xf3n en vivo no es fluida, por favor espere un momento",recive_coupon_follow_success_title:"\xa1Seguido con \xe9xito!",asc_live_coupon_list_title:"Cupones exclusivos para uso en vivo",unsubscribe:"Cancelar recordatorio",mcms_live2__:"Este mensaje est\xe1 prohibido",mcms_live6__:"Este mensaje contiene lenguaje prohibido",asc_live_coupon_list_use6:"Descuento m\xe1ximo de USD {{count}}",mcms_live12__:"{user_name} ha ingresado a esta transmisi\xf3n en vivo","liveroom.text.changeExplanation":"Se acaba de introducir el producto Est\xe1 viendo la introducci\xf3n ahora.",have_no_recive_coupon:"Lo sentimos, todos los cupones ya han sido reclamados.",asc_live_coupon_list_issueing_title:"Se est\xe1n emitiendo cupones","liveroom.text.commentplaceholder":"Hablar con streamer",asc_live_coupon_already_received:"Has recolectado los cupones.",mcms_live9__:"Cuenta regresiva en vivo",mcms_buyer_live_yugao_fengkong_cancel:"La transmisi\xf3n en vivo es sospechosa de violaci\xf3n de contenido y ha sido cancelada.",mcms_live8__:"El presentador comenzar\xe1 con el programa pronto. Vuelve m\xe1s tarde para verlo",live_pc_network_slot:"Su red no es buena. Compruebe su red.",detail_chat_now:"Chatear",scan_with_mobile_app:"Escanear con la aplicaci\xf3n m\xf3vil de Alibaba.com (Android superior a 7.12.0, IOS superior a 7.12.1)",revice_btn_text_fellow:"Seguir",asc_chat_now:"Chatear","live.continue_in_app":"Continuar en la App de Alibaba.com",mcms_buyer_live_yugao_delete_cancel:"La transmisi\xf3n en vivo ha sido eliminada por el comerciante y cancelada",mcms_buyer_live_replay_fengkong:"La transmisi\xf3n en vivo es sospechosa de violaci\xf3n de contenido y no se puede ver","ive.enableVolume":"Subir el volumen",mcms_buyer_live_anchor_leave:"El anfitri\xf3n se va temporalmente. Por favor espere.",reminder_sucess:"Te recordaremos cu\xe1ndo comienza el modo de vida.",revice_btn_text_null:"Todos reclamados.",asc_live_coupon_list_use3:"Restantes",recive_coupon_comment_success_title:"\xa1Comentado con \xe9xito!","live.product_box_empty_text":"La lista est\xe1 vac\xeda, comun\xedquese con el anfitri\xf3n.","liverank.live_rank_text":"Hoy","liveroom.text.watchmobile":"Ver en vivo en el m\xf3vil",asc_live_coupon_collect_time:"Esta ventana emergente desaparecer\xe1 en {{time}} segundos.",subscribed:"Suscrito",live_have_already_sent:"Solicitada","liverank.history_rank_time_desc":"Hora de inicio de las estad\xedsticas: {{time}}","live.info.notice.riskError":"Los comentarios han sido controlados por el viento",asc_live_coupon_list_use5:"Disponible despu\xe9s de:{{time}}","liveroom.title.replay":"Resaltar repetici\xf3n",recive_coupon_common_title_success:"Cupones reclamados",live_already_sent_toast:"La solicitud ha sido enviada. El transmisor en vivo dar\xe1 una demostraci\xf3n pronto.","liveroom.text.getapp":"Obtener la aplicaci\xf3n",mcms_live14__:"El presentador se ha ido temporalmente. Vuelve m\xe1s tarde para seguir mirando","liveroom.text.backToLive":"Volver a vivir",mcms_buyer_live_living_end_watch_replay:"Reloj de repetici\xf3n",asc_live_coupon_insufficient_coupons:"Perd\xf3n, los cupones han sido recolectados",mcms_seabed28__:"Todos los productos",asc_live_coupon_get_coupon:"Obtener cupones",asc_player_refresh:"El sistema responde lentamente. Int\xe9ntalo de nuevo.",mcms_buyer_live_living_fengkong_end:"La transmisi\xf3n en vivo es sospechosa de violaci\xf3n de contenido, y la transmisi\xf3n en vivo ha terminado"}},function(e,t){e.exports={"liveroom.text.changeExplanation":"Il prodotto \xe8 stato appena introdotto. Stai guardando l'introduzione ora.",recive_coupon_follow_title:"Segui il livestreamer",mcms_moreVideo__:"Altri video",asc_live_coupon_list_issueing_title:"Buoni in uscita",mcms_buyer_live_contact_supplier:"Contattare il fornitore",mcms_buyer_live_streambreake:"La trasmissione in diretta non \xe8 fluida, attendi un momento","liverank.live_rank_text":"Oggi",reminder_sucess:"Ti ricorderemo quando inizier\xe0 il liveshow.","live.product_box_empty_text":"L'elenco \xe8 vuoto, si prega di comunicare con l'host.",mcms_buyer_live_yugao_chidao_wait:"Il mercante \xe8 un po' in ritardo. Per favore aspetta un momento.",mcms_live4__:"Segui",coupon_second:"Secondi",mcms_live9__:"Conto alla rovescia in diretta",unsubscribe:"Annulla promemoria",mcms_seabed28__:"Tutti i prodotti",asc_live_coupon_insufficient_coupons:"Spiacenti, i buoni sconto sono stati raccolti","live.living":"Diretta","subscribe.success":"Iscritto.","live.info.notice.blockError":"I commenti sono stati vietati",have_no_recive_coupon:"Siamo spiacenti, tutti i coupon sono gi\xe0 stati rivendicati.",mcms_buyer_live_replay_fengkong:"La trasmissione in diretta \xe8 sospettata di violazione del contenuto e non pu\xf2 essere guardata",live_room_Coupon_expired:"Spiacenti, la raccolta del buono acquisto non \xe8 riuscita",asc_live_coupon_list_use7:"buoni sconto",asc_live_coupon_list_use6:"Sconto massimo US {{count}}","liveroom.text.directory":"Directory Live",asc_live_coupon_get_coupon:"Aggiudicati i buoni sconto",revice_btn_text_already:"Rivendicato","liveroom.text.explaining":"Dimostrazione",mcms_live1__:"Vuoi parlare con il relatore?","liveroom.text.loading":"Carico...",mcms_live5__:"Aggiorna",mcms_buyer_live_living_end_watch_replay:"Orologio replay",mcms_live2__:"Questo messaggio \xe8 proibito",mcms_live14__:"Il presentatore \xe8 temporaneo lasciato. Torna pi\xf9 tardi per continuare a guardare",recive_coupon_common_title_success:"Coupon riscossi",mcms_live11__:"{user_name} sta inviando una richiesta",already_recive_coupon:"Coupon riscossi",asc_live_coupon_collect_time:"Questo pop-up scomparir\xe0 tra {{time}} secondi.",recive_coupon_common_title:"Buono sconto",recive_coupon_follow_success_title:"Seguito con successo!",asc_live_coupon_list_use2:"Inizia tra","liveroom.text.backToLive":"Tornare a vivere",asc_live_coupon_list_use5:"Disponibile dopo: {{time}}",mcms_buyer_live_yugao_fengkong_cancel:"La trasmissione in diretta \xe8 sospettata di violazione del contenuto ed \xe8 stata cancellata.",live_room_buyer_send_catalog_success:"La richiesta di catalogo \xe8 stata inviata.",mcms_buyer_live_suspend:"Torniamo subito.",mcms_buyer_live_yugao_timeout_end:"La trasmissione in diretta non \xe8 stata trasmessa a causa degli straordinari","live.components.factory.card.order.desc":"Importo della transazione negli ultimi 6 mesi",subscribed:"Iscrizione effettuata",coupon_recive_title:"Seguito con successo! Ora puoi richiedere un coupon.","live.cancel_app":"Annulla","liveroom.watch_now":"Guarda ora",live_room_send_catalog_success:"La richiesta di catalogo \xe8 stata inviata.","live.checkCatalog":"Controllare il catalogo",revice_btn_text_get:"Ottieni subito il coupon","liveroom.text.complain":"report","liveroom.text.view":"Vista","live.text.complain":"Rapporto",live_room_collection_failed:"Spiacenti, il buono acquisto \xe8 scaduto.",asc_player_refresh:"Il sistema risponde lentamente. Riprova.","liverank.history_rank_time_desc":"Ora di inizio delle statistiche: {{time}}",revice_btn_text_message:"Commento",watch_live_on_mobile:"Guarda in diretta sul cellulare",asc_live_catalog:"Catalogo","live.manage.saleExplain":"Nota: le sessioni per cui hai fatto domanda verranno visualizzate nell'elenco <span>48 ore</span> dopo l'approvazione della domanda.",mcms_live6__:"Questo messaggio contiene linguaggio proibito","live.unfollowed_text":"Non seguire",scan_with_mobile_app:"Esegui la scansione con l'app Alibaba.com per dispositivi mobili (Android superiore a 7.12.0 , IOS superiore a 7.12.1)","live.get_catalog":"Ottenere il catalogo","ive.enableVolume":"Alzate il volume",asc_live_coupon_list_title:"Buoni sconto esclusivi per la diretta",live_rank_feedback:"La classifica \xe8 vuota","liveroom.text.send":"invia",mcms_buyer_live_anchor_leave:"L'ospite se ne va temporaneamente. Attendi.","live.open_app":"Apri","subscribed.detail":"Iscritto. La sessione live inizier\xe0 il {{date}} e ti ricorderemo di partecipare in anticipo alle {{time}}.",asc_live_coupon_to_use:"Riscatta ora",recive_coupon_comment_title:"Commenta ora","liveroom.title.replay":"Evidenzia la riproduzione",asc_live_coupon_collect_success:"Coupon riscossi","liveroom.text.getapp":"scarica l'app",mcms_live12__:"{user_name} ha preso parte a questo live streaming","liveroom.text.watchmobile":"guarda in diretta su cellulare",asc_live_coupon_list_use1:"Visualizza i miei buoni sconto","liverank.history_rank_text":"Storia","subscribe.cancel":"Annullamento dell'iscrizione.",live_room_send_catalog_later:"Il messaggio \xe8 stato inviato. Attendere una risposta da parte del fornitore.",revice_btn_text_null:"Tutti rivendicati.",mcms_buyer_live_replay_delete:"La diretta \xe8 stata cancellata dal commerciante e non pu\xf2 essere visualizzata",live_room_cannot_receive:"I venditori di Alibaba.com non possono ricevere buoni acquisto.","liveroom.text.commentplaceholder":"parla con lo streamer",mcms_buyer_live_network_wrong:"La tua rete non \xe8 buona.",asc_live_coupon_list_use3:"Rimanenti",mcms_buyer_live_living_fengkong_end:"La trasmissione in diretta \xe8 sospettata di violazione dei contenuti e la trasmissione in diretta \xe8 terminata",mcms_live8__:"Il relatore avvier\xe0 a breve lo spettacolo. Torna pi\xf9 tardi per guardarlo","liveroom.text.product.more":"Altro","liveroom.productslist":"Elenco prodotti",live_have_already_sent:"Richiesto",revice_btn_text_fellow:"Seguire",asc_live_coupon_list_use4:"Buoni sconto ricevuti",mcms_live13__:"Lo streaming live \xe8 terminato. Grazie per l&#39;attenzione.",mcms_buyer_live_network_wrong_tips:"Controlla la tua rete",mcms_buyer_live_living_end:"La diretta \xe8 finita","liveroom.text.changeContent":"L'ancora ha parlato di questo contenuto e tu stai guardando la spiegazione.",mcms_live3__:"Messaggio inviato",mcms_live10__:"{user_name} sta avviando un ordine",mcms_live7__:"Errore di rete, riprova","live.mutedAutoplay":"Riproduzione muta",asc_chat_now:"Chatta ora","live.info.notice.noExitError":"L'attuale commento di risposta non esiste","liverank.live_rank_time_desc":"Ora di inizio delle statistiche: {{time}}",live_already_sent_toast:"La richiesta \xe8 stata inviata. Il livestreamer dar\xe0 presto una dimostrazione.",live_pc_network_slot:"La tua rete non \xe8 buona. Per favore controlla la tua rete.",subscribe:"Imposta promemoria",recive_coupon_comment_success_title:"Commentato con successo!",asc_live_coupon_already_received:"Hai raccolto i buoni sconto.","live.continue_in_app":"Continua sulla APP Alibaba.com",live_ask_introdution:"Spiegami","liveroom.entering":"Benvenuto vieni in diretta streaming",mcms_buyer_live_yugao_delete_cancel:"La diretta \xe8 stata cancellata dal commerciante e annullata",coupon_cutdown_text:"A tempo limitato","live.text.watch_replay":"Guarda la riproduzione",detail_chat_now:"Chatta ora","live.info.notice.riskError":"I commenti sono stati controllati dal vento","liveroom.text.play_failed":"Si verifica un errore nel lettore. Riprova pi\xf9 tardi."}},function(e,t){e.exports={coupon_cutdown_text:"Waktu Terbatas",mcms_live6__:"Pesan ini berisi bahasa terlarang","liveroom.title.replay":"Tayangan Ulang Sorotan","liveroom.text.loading":"Memuat ....",already_recive_coupon:"Kupon telah diambil","liveroom.entering":"Selamat datang di streaming langsung",detail_chat_now:"Mengobrol Sekarang","ive.enableVolume":"Naikkan volumenya",live_room_buyer_send_catalog_success:"Permintaan Anda untuk katalog telah dikirim.",asc_live_coupon_list_use1:"Lihat Kupon Saya",live_room_send_catalog_success:"Permintaan Anda untuk katalog telah dikirim.",asc_player_refresh:"Sistem merespons dengan lambat. Coba lagi.","live.product_box_empty_text":"Daftar ini kosong, silakan berkomunikasi dengan host.","liveroom.text.getapp":"Dapatkan aplikasi",asc_live_coupon_list_use2:"Mulai","live.unfollowed_text":"Berhenti mengikuti",recive_coupon_common_title_success:"Kupon telah diambil",mcms_live4__:"Ikuti",asc_live_coupon_list_use4:"Kupon yang diterima",watch_live_on_mobile:"Tonton langsung di ponsel",mcms_buyer_live_anchor_leave:"Tuan rumah pergi sementara, mohon menunggu.",mcms_buyer_live_network_wrong:"Jaringan Anda tidak baik.",mcms_live2__:"Pesan ini dilarang","liveroom.text.changeExplanation":"Produk baru saja diperkenalkan. Saat ini Anda sedang menonton bagian pengenalan.","liveroom.text.product.more":"Lebih banyak",revice_btn_text_fellow:"Ikuti",mcms_moreVideo__:"Lebih Banyak Video","live.info.notice.riskError":"Komentar telah dikendalikan angin",live_rank_feedback:"Papan peringkat kosong","liveroom.productslist":"Daftar Produk",live_room_Coupon_expired:"Maaf, pengambilan kupon gagal.",mcms_buyer_live_yugao_timeout_end:"Siaran langsung tidak disiarkan karena lembur",asc_live_coupon_insufficient_coupons:"Maaf,Kupon telah terkumpul","live.mutedAutoplay":"Pemutaran senyap",mcms_buyer_live_yugao_delete_cancel:"Siaran langsung telah dihapus oleh pedagang dan dibatalkan",mcms_buyer_live_replay_delete:"Siaran langsung telah dihapus oleh pedagang dan tidak dapat dilihat",live_already_sent_toast:"Pesanan sudah dikirim Gan Streaming langsung akan segera memberikan demonstrasi.",revice_btn_text_message:"Komentar","subscribe.success":"Berlangganan.",scan_with_mobile_app:"Pindai dengan aplikasi ponsel Alibaba.com (Android versi 7.12.0 ke atas, IOS versi 7.12.1 ke atas)",mcms_live5__:"Segarkan",live_room_cannot_receive:"Penjual di Alibaba.com tidak dapat menerima kupon.","liveroom.text.directory":"Direktori langsung","live.info.notice.noExitError":"Komentar balasan saat ini tidak ada",recive_coupon_follow_title:"Ikuti streaming langsung","subscribe.cancel":"Sudah berhenti berlangganan.",reminder_sucess:"Kami akan mengingatkan Anda ketika liveshow dimulai.",subscribed:"Berlangganan",live_room_collection_failed:"Maaf, kupon telah kedaluwarsa.","liveroom.watch_now":"Tonton sekarang",coupon_recive_title:"Berhasil diikuti! Kini Anda dapat mengklaim kupon.",asc_live_coupon_get_coupon:"Dapatkan Kupon",mcms_buyer_live_streambreake:"Siaran langsung tidak lancar, mohon Tunggu sebentar",mcms_buyer_live_contact_supplier:"Hubungi distributor",mcms_live7__:"Kesalahan jaringan, coba lagi","liveroom.text.play_failed":"Terjadi kesalahan pada pemutar. Coba lagi nanti.",recive_coupon_common_title:"Voucer diskon",asc_live_coupon_list_use3:"Tersisa",asc_live_coupon_list_issueing_title:"Kupon yang dikeluarkan",mcms_buyer_live_suspend:"Segera kembali.",live_have_already_sent:"Diminta","live.get_catalog":"Dapatkan katalog","liveroom.text.explaining":"Demonstrasi",mcms_live11__:"{user_name} mengirim pertanyaan",coupon_second:"Detik",asc_live_coupon_list_use6:"Diskon maksimum US {{count}}",asc_live_coupon_collect_time:"Pop-up ini akan hilang dalam {{Waktu}} detik",mcms_live13__:"Streaming langsung telah berakhir. Terima kasih sudah menonton.",mcms_live9__:"Hitung mundur langsung",revice_btn_text_already:"Diklaim",recive_coupon_follow_success_title:"Berhasil diikuti!","live.info.notice.blockError":"Komentar telah dilarang",mcms_buyer_live_living_end:"Siaran langsung berakhir",asc_live_coupon_list_use5:"Tersedia setelah:{{time}}",revice_btn_text_get:"Dapatkan kupon sekarang","liveroom.text.backToLive":"Kembali untuk hidup","live.text.watch_replay":"Tonton tayangan ulang",asc_live_coupon_collect_success:"Kupon telah diambil","live.continue_in_app":"Lanjutkan di APLIKASI Alibaba.com",live_pc_network_slot:"Jaringan Anda tidak baik. Periksa jaringan Anda.","subscribed.detail":"Berlangganan. Sesi langsung akan dimulai pada tanggal {{date}}, dan kami akan meminta Anda menontonnya tepat waktu pada jam {{time}}.",mcms_buyer_live_replay_fengkong:"Siaran langsung dicurigai pelanggaran konten dan tidak dapat ditonton",mcms_buyer_live_living_fengkong_end:"Siaran langsung dicurigai pelanggaran konten, dan siaran langsung telah berakhir","live.checkCatalog":"Periksa katalog",subscribe:"Atur pengingat",recive_coupon_comment_success_title:"Berhasil berkomentar!",mcms_live3__:"Pesan terkirim","live.text.complain":"Laporkan","liverank.live_rank_time_desc":"Waktu mulai statistik: {{time}}","liveroom.text.changeContent":"Jangkar baru saja berbicara tentang konten ini, dan Anda menonton penjelasan.",mcms_live12__:"{user_name} memasuki streaming langsung ini",mcms_buyer_live_yugao_chidao_wait:"Pedagang itu sedikit terlambat. Mohon ditunggu sebentar.",asc_chat_now:"Mengobrol Sekarang",asc_live_coupon_list_use7:"Kupon","liveroom.text.watchmobile":"Tonton langsung di ponsel",asc_live_coupon_to_use:"Tukarkan Sekarang",recive_coupon_comment_title:"Beri komentar sekarang",live_ask_introdution:"Menjelaskan",revice_btn_text_null:"Semua diklaim.",asc_live_catalog:"Katalog",unsubscribe:"Batalkan pengingat",mcms_live8__:"Presenter akan segera memulai acara. Kembali lagi nanti untuk menonton","liverank.history_rank_time_desc":"Waktu mulai statistik: {{time}}",live_room_send_catalog_later:"Pesan telah terkirim. Mohon menunggu jawaban dari pemasok.","liveroom.text.view":"Tampilan","liveroom.text.send":"Kirim",mcms_live10__:"{user_name} memulai pesanan",asc_live_coupon_already_received:"Anda telah mengumpulkan kupon.",mcms_buyer_live_network_wrong_tips:"Periksa jaringan Anda",mcms_live1__:"Ingin berbicara dengan presenter?",mcms_buyer_live_living_end_watch_replay:"Replay jam tangan","liveroom.text.commentplaceholder":"Talk to streamer","live.components.factory.card.order.desc":"Jumlah transaksi dalam 6 bulan terakhir",mcms_seabed28__:"Semua Produk","liverank.history_rank_text":"Sejarah",mcms_live14__:"Presenter memiliki sementara. Kembali lagi nanti untuk terus menonton","liverank.live_rank_text":"Hari ini",mcms_buyer_live_yugao_fengkong_cancel:"Siaran langsung diduga pelanggaran konten dan telah dibatalkan.",have_no_recive_coupon:"Mohon maaf, semua kupon sudah diklaim.",asc_live_coupon_list_title:"Kupon eksklusif untuk live"}},function(e,t){e.exports={"liveroom.entering":"\u0906\u092a\u0915\u093e \u0938\u094d\u0935\u093e\u0917\u0924 \u0939\u0948 livestream \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0906","liveroom.text.backToLive":"\u0935\u093e\u092a\u0938 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0932\u093e\u0907\u0935","liverank.history_rank_text":"\u0907\u0924\u093f\u0939\u093e\u0938","liveroom.title.replay":"\u0939\u093e\u0907\u0932\u093e\u0907\u091f \u0930\u0940\u092a\u094d\u0932\u0947",detail_chat_now:"\u0905\u092c \u091a\u0948\u091f","liverank.live_rank_time_desc":"\u0938\u093e\u0902\u0916\u094d\u092f\u093f\u0915\u0940 \u0915\u0947 \u0936\u0941\u0930\u0942 \u0938\u092e\u092f: {{time}}",recive_coupon_common_title:"\u091b\u0942\u091f \u0935\u093e\u0909\u091a\u0930",recive_coupon_follow_success_title:"\u0938\u092b\u0932\u0924\u093e\u092a\u0942\u0930\u094d\u0935\u0915 \u092a\u0940\u091b\u093e!",asc_live_coupon_list_use2:"\u0936\u0941\u0930\u0942",recive_coupon_comment_title:"\u091f\u093f\u092a\u094d\u092a\u0923\u0940 \u0905\u092c",mcms_live14__:"\u0915\u0947 \u092a\u094d\u0930\u0938\u094d\u0924\u0941\u0924\u0915\u0930\u094d\u0924\u093e \u0939\u0948 \u0905\u0938\u094d\u0925\u093e\u092f\u0940 \u0930\u0942\u092a \u0938\u0947 \u091b\u094b\u0921\u093c \u0926\u093f\u092f\u093e \u0939\u0948\u0964 \u0935\u093e\u092a\u0938 \u0906 \u092c\u093e\u0926 \u091c\u093e\u0930\u0940 \u0930\u0916\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0926\u0947\u0916",mcms_live6__:"\u0907\u0938 \u0938\u0902\u0926\u0947\u0936 \u092e\u0947\u0902 \u0928\u093f\u0937\u093f\u0926\u094d\u0927 \u092d\u093e\u0937\u093e \u0936\u093e\u092e\u093f\u0932 \u0939\u0948",mcms_buyer_live_living_end_watch_replay:"\u0918\u0921\u093c\u0940 \u0916\u0947\u0932\u0928\u093e",recive_coupon_comment_success_title:"\u0938\u092b\u0932\u0924\u093e\u092a\u0942\u0930\u094d\u0935\u0915 \u091f\u093f\u092a\u094d\u092a\u0923\u0940!","live.open_app":"\u0916\u094b\u0932\u0947\u0902",asc_live_coupon_list_use4:"\u0915\u0942\u092a\u0928 \u092a\u093e\u090f \u0917\u090f","live.unfollowed_text":"Unfollow",watch_live_on_mobile:"\u092e\u094b\u092c\u093e\u0907\u0932 \u092a\u0930 \u0932\u093e\u0907\u0935 \u0926\u0947\u0916\u0947\u0902","liverank.history_rank_time_desc":"\u0938\u093e\u0902\u0916\u094d\u092f\u093f\u0915\u0940 \u0915\u0947 \u0936\u0941\u0930\u0942 \u0938\u092e\u092f: {{time}}",mcms_buyer_live_network_wrong:"\u0905\u092a\u0928\u0947 \u0928\u0947\u091f\u0935\u0930\u094d\u0915 \u0928\u0939\u0940\u0902 \u0939\u0948 \u0905\u091a\u094d\u091b\u093e \u0939\u0948\u0964","subscribed.detail":"\u0938\u0926\u0938\u094d\u092f\u0924\u093e \u0932\u0940 \u0917\u092f\u0940. \u0932\u093e\u0907\u0935 \u0938\u0924\u094d\u0930 {{date}} \u0915\u094b \u0936\u0941\u0930\u0942 \u0939\u094b\u0917\u093e \u0914\u0930 \u0939\u092e \u0938\u092e\u092f \u092a\u0930 {{time}} \u092c\u091c\u0947 \u0907\u0938\u0947 \u0926\u0947\u0916\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092c\u0924\u093e\u090f\u0902\u0917\u0947.",scan_with_mobile_app:"\u092e\u094b\u092c\u093e\u0907\u0932 Alibaba.com \u090f\u092a\u094d\u0932\u093f\u0915\u0947\u0936\u0928 \u0938\u0947 \u0938\u094d\u0915\u0948\u0928 \u0915\u0930\u0947\u0902 (7.12.0 \u0938\u0947 \u0906\u0917\u0947 \u0915\u0947 \u090f\u0902\u0921\u094d\u0930\u0949\u092f\u0921, 7.12.1 \u0938\u0947 \u0906\u0917\u0947 \u0915\u0947 IOS)",live_ask_introdution:"\u092e\u0941\u091d\u0947 \u092c\u0924\u093e\u090f\u0902",asc_live_coupon_list_issueing_title:"\u0915\u0942\u092a\u0928 \u091c\u093e\u0930\u0940 \u0915\u093f\u092f\u093e \u091c\u093e \u0930\u0939\u093e",live_rank_feedback:"Leaderboard \u0915\u0947 \u0916\u093e\u0932\u0940 \u0939\u0948",asc_live_coupon_to_use:"\u0905\u092d\u0940 \u0930\u093f\u0921\u0940\u092e \u0915\u0930\u0947\u0902","ive.enableVolume":"\u092c\u093e\u0930\u0940 \u0905\u092a \u092e\u093e\u0924\u094d\u0930\u093e",mcms_live10__:"{user_name} \u090f\u0915 \u0911\u0930\u094d\u0921\u0930 \u0936\u0941\u0930\u0942 \u0915\u0930 \u0930\u0939\u0947 \u0939\u0948\u0902",mcms_buyer_live_yugao_timeout_end:"\u0932\u093e\u0907\u0935 \u092a\u094d\u0930\u0938\u093e\u0930\u0923 \u0915\u0947 \u092a\u094d\u0930\u0938\u093e\u0930\u0923 \u0928\u0939\u0940\u0902 \u0925\u093e \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u093e\u0930\u0923 \u0913\u0935\u0930\u091f\u093e\u0907\u092e","live.cancel_app":"\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902",coupon_recive_title:"\u0938\u092b\u0932\u0924\u093e\u092a\u0942\u0930\u094d\u0935\u0915 \u092a\u0940\u091b\u093e! \u0906\u092a \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0905\u092c \u0926\u093e\u0935\u093e \u090f\u0915 \u0915\u0942\u092a\u0928\u0964",asc_live_coupon_already_received:"\u0906\u092a\u0928\u0947 \u092f\u0939 \u0915\u0942\u092a\u0928 \u092a\u0939\u0932\u0947 \u0939\u0940 \u0932\u0947 \u0932\u093f\u092f\u093e \u0939\u0948.",mcms_live4__:"\u092b\u093c\u0949\u0932\u094b \u0915\u0930\u0947\u0902",revice_btn_text_null:"\u0938\u092d\u0940 \u0926\u093e\u0935\u093e \u0915\u093f\u092f\u093e \u0939\u0948\u0964","liveroom.text.getapp":"\u090f\u092a\u094d\u0932\u093f\u0915\u0947\u0936\u0928 \u092a\u094d\u0930\u093e\u092a\u094d\u0924","liveroom.text.changeContent":"\u0932\u0902\u0917\u0930 \u0938\u093f\u0930\u094d\u092b \u0907\u0938 \u092c\u093e\u0930\u0947 \u092e\u0947\u0902 \u092c\u093e\u0924 \u0938\u093e\u092e\u0917\u094d\u0930\u0940 \u0939\u0948, \u0914\u0930 \u0906\u092a \u0938\u094d\u092a\u0937\u094d\u091f\u0940\u0915\u0930\u0923 \u0915\u0947 \u0926\u0947\u0916 \u0930\u0939\u0947 \u0939\u0948\u0902.",live_pc_network_slot:"\u0905\u092a\u0928\u0947 \u0928\u0947\u091f\u0935\u0930\u094d\u0915 \u0928\u0939\u0940\u0902 \u0939\u0948 \u0905\u091a\u094d\u091b\u093e \u0939\u0948\u0964 \u0905\u092a\u0928\u0947 \u0928\u0947\u091f\u0935\u0930\u094d\u0915 \u091c\u093e\u0901\u091a \u0915\u0943\u092a\u092f\u093e \u0939\u0948\u0964",asc_live_coupon_collect_time:"{{time}} \u0938\u0947\u0915\u0902\u0921 \u092e\u0947\u0902 \u092f\u0939 \u092a\u0949\u092a-\u0905\u092a \u0917\u093e\u092f\u092c \u0939\u094b \u091c\u093e\u090f\u0917\u093e.",asc_player_refresh:"\u0938\u093f\u0938\u094d\u091f\u092e \u0938\u0947 \u091c\u0935\u093e\u092c \u092e\u093f\u0932\u0928\u0947 \u092e\u0947\u0902 \u0938\u092e\u092f \u0932\u0917 \u0930\u0939\u093e \u0939\u0948. \u0915\u0943\u092a\u092f\u093e \u092b\u093f\u0930 \u0915\u094b\u0936\u093f\u0936 \u0915\u0930\u0947\u0902.","liveroom.text.play_failed":"\u092a\u094d\u0932\u0947\u092f\u0930 \u092e\u0947\u0902 \u0915\u094b\u0908 \u0924\u094d\u0930\u0941\u091f\u093f \u0939\u0941\u0908. \u0915\u0943\u092a\u092f\u093e \u092c\u093e\u0926 \u092e\u0947\u0902 \u092b\u093f\u0930 \u0938\u0947 \u0915\u094b\u0936\u093f\u0936 \u0915\u0930\u0947\u0902.",asc_live_coupon_list_title:"\u0932\u093e\u0907\u0935 \u0915\u0947 \u0932\u093f\u090f \u0916\u093e\u0938 \u0915\u0942\u092a\u0928",mcms_live9__:"\u0932\u093e\u0907\u0935 \u0915\u093e\u0909\u0902\u091f\u0921\u093e\u0909\u0928",asc_live_coupon_list_use5:"\u0907\u0924\u0928\u0947 \u0938\u092e\u092f \u092e\u0947\u0902 \u0909\u092a\u0932\u092c\u094d\u0927:{{time}}",subscribe:"\u0930\u093f\u092e\u093e\u0907\u0902\u0921\u0930 \u0938\u0947\u091f \u0915\u0930\u0947\u0902","liveroom.text.explaining":"\u092a\u094d\u0930\u0926\u0930\u094d\u0936\u0928","liveroom.text.changeExplanation":"\u0909\u0924\u094d\u092a\u093e\u0926 \u0915\u093e \u092a\u0930\u093f\u091a\u092f \u0905\u092d\u0940-\u0905\u092d\u0940 \u0926\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948. \u0906\u092a \u0905\u092d\u0940 \u092a\u0930\u093f\u091a\u092f \u0926\u0947\u0916 \u0930\u0939\u0947 \u0939\u0948\u0902.","liveroom.text.commentplaceholder":"\u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092c\u093e\u0924 \u0915\u0940 \u0915\u093f\u0930\u0923",asc_chat_now:"\u0905\u092c \u091a\u0948\u091f","live.info.notice.noExitError":"\u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u091c\u0935\u093e\u092c \u091f\u093f\u092a\u094d\u092a\u0923\u0940 \u092e\u094c\u091c\u0942\u0926 \u0928\u0939\u0940\u0902 \u0915\u0930\u0924\u093e","live.get_catalog":"\u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0938\u0942\u091a\u0940","live.text.watch_replay":"\u0930\u0940\u092a\u094d\u0932\u0947 \u0926\u0947\u0916\u0947\u0902","liveroom.watch_now":"\u0918\u0921\u093c\u0940 \u0905\u092c",asc_live_catalog:"\u0915\u0948\u091f\u0932\u0949\u0917","liveroom.text.send":"\u092d\u0947\u091c",asc_live_coupon_get_coupon:"\u0915\u0942\u092a\u0928 \u0907\u0915\u0920\u094d\u0920\u093e \u0915\u0930\u0947\u0902",unsubscribe:"\u0930\u093f\u092e\u093e\u0907\u0902\u0921\u0930 \u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902",mcms_live11__:"{User_name} \u090f\u0915 \u092a\u0942\u091b\u0924\u093e\u091b \u092d\u0947\u091c \u0930\u0939\u0947 \u0939\u0948\u0902",mcms_buyer_live_living_end:"\u0932\u093e\u0907\u0935 \u092a\u094d\u0930\u0938\u093e\u0930\u0923 \u0915\u0947 \u0916\u0924\u094d\u092e \u0939\u094b \u0917\u092f\u093e \u0939\u0948",mcms_buyer_live_network_wrong_tips:"\u0905\u092a\u0928\u0947 \u0928\u0947\u091f\u0935\u0930\u094d\u0915 \u091c\u093e\u0901\u091a \u0915\u0943\u092a\u092f\u093e",revice_btn_text_already:"\u0926\u093e\u0935\u093e \u0915\u093f\u092f\u093e",asc_live_coupon_list_use6:"\u0916\u093e\u0938 \u0911\u095e\u0930 \u0915\u092e \u0939\u094b\u0915\u0930 {{count}} \u0939\u094b \u0917\u090f \u0939\u0948\u0902","live.info.notice.blockError":"\u091f\u093f\u092a\u094d\u092a\u0923\u0940 \u092a\u0930 \u092a\u094d\u0930\u0924\u093f\u092c\u0902\u0927 \u0932\u0917\u093e \u0926\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948",mcms_buyer_live_anchor_leave:"\u092e\u0947\u091c\u092c\u093e\u0928 \u092a\u0924\u094d\u0924\u093f\u092f\u093e\u0902 \u0905\u0938\u094d\u0925\u093e\u092f\u0940 \u0930\u0942\u092a \u0938\u0947. \u0915\u0943\u092a\u092f\u093e \u092a\u094d\u0930\u0924\u0940\u0915\u094d\u0937\u093e \u0915\u0930\u0947\u0902.",recive_coupon_common_title_success:"\u0915\u0942\u092a\u0928 \u0915\u093e \u0926\u093e\u0935\u093e \u0915\u093f\u092f\u093e \u0917\u092f\u093e","live.mutedAutoplay":"\u092e\u0942\u0915 \u0916\u0947\u0932",asc_live_coupon_list_use3:"\u091a\u0932 \u0930\u0939\u093e \u0939\u0948",mcms_buyer_live_replay_fengkong:"\u0932\u093e\u0907\u0935 \u092a\u094d\u0930\u0938\u093e\u0930\u0923 \u0915\u0947 \u0909\u0932\u094d\u0932\u0902\u0918\u0928 \u0938\u093e\u092e\u0917\u094d\u0930\u0940 \u0915\u0947 \u0938\u0902\u0926\u093f\u0917\u094d\u0927 \u0939\u0948 \u0914\u0930 \u0926\u0947\u0916\u093e \u0928\u0939\u0940\u0902 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948",mcms_buyer_live_suspend:"\u0938\u0939\u0940 \u0935\u093e\u092a\u0938 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948\u0964",mcms_live12__:"{user_name} \u0928\u0947 \u092f\u0939 \u0932\u093e\u0907\u0935 \u0938\u094d\u091f\u094d\u0930\u0940\u092e \u0926\u0930\u094d\u091c \u0915\u0940 \u0939\u0948",mcms_buyer_live_living_fengkong_end:"\u0932\u093e\u0907\u0935 \u092a\u094d\u0930\u0938\u093e\u0930\u0923 \u0915\u0947 \u0938\u0902\u0926\u093f\u0917\u094d\u0927 \u0939\u0948 \u0938\u093e\u092e\u0917\u094d\u0930\u0940 \u0915\u0947 \u0909\u0932\u094d\u0932\u0902\u0918\u0928, \u0914\u0930 \u0932\u093e\u0907\u0935 \u092a\u094d\u0930\u0938\u093e\u0930\u0923 \u0938\u092e\u093e\u092a\u094d\u0924 \u0939\u094b \u0917\u092f\u093e \u0939\u0948",revice_btn_text_fellow:"\u0915\u093e \u092a\u093e\u0932\u0928 \u0915\u0930\u0947\u0902","live.info.notice.riskError":"\u091f\u093f\u092a\u094d\u092a\u0923\u0940 \u092a\u0935\u0928-\u0928\u093f\u092f\u0902\u0924\u094d\u0930\u093f\u0924 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948",mcms_live7__:"\u0928\u0947\u091f\u0935\u0930\u094d\u0915 \u0917\u095c\u092c\u095c\u0940, \u092b\u093f\u0930 \u0915\u094b\u0936\u093f\u0936 \u0915\u0930\u0947\u0902",have_no_recive_coupon:"\u0939\u092e \u0915\u094d\u0937\u092e\u093e \u0915\u0930\u0947\u0902, \u0938\u092d\u0940 \u0915\u0942\u092a\u0928 \u0939\u0948 \u092a\u0939\u0932\u0947 \u0938\u0947 \u0939\u0940 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0926\u093e\u0935\u093e \u0915\u093f\u092f\u093e \u0939\u0948\u0964",mcms_moreVideo__:"\u0905\u0927\u093f\u0915 \u0935\u0940\u0921\u093f\u092f\u094b",mcms_buyer_live_streambreake:"\u0932\u093e\u0907\u0935 \u092a\u094d\u0930\u0938\u093e\u0930\u0923 \u0915\u0947 \u091a\u093f\u0915\u0928\u0940 \u0928\u0939\u0940\u0902 \u0939\u0948, \u0915\u0943\u092a\u092f\u093e \u092a\u094d\u0930\u0924\u0940\u0915\u094d\u0937\u093e \u0915\u0930\u0947\u0902 \u090f\u0915 \u092a\u0932","live.checkCatalog":"\u091c\u093e\u0901\u091a \u0938\u0942\u091a\u0940","liverank.live_rank_text":"\u0906\u091c",asc_live_coupon_collect_success:"\u0915\u0942\u092a\u0928 \u0915\u093e \u0926\u093e\u0935\u093e \u0915\u093f\u092f\u093e \u0917\u092f\u093e","liveroom.text.directory":"\u0932\u093e\u0907\u0935 \u0928\u093f\u0930\u094d\u0926\u0947\u0936\u093f\u0915\u093e",coupon_cutdown_text:"\u0938\u092e\u092f-\u0938\u0940\u092e\u093f\u0924",mcms_live3__:"\u0938\u0902\u0926\u0947\u0936 \u092d\u0947\u091c\u093e \u0917\u092f\u093e","live.continue_in_app":"Alibaba.com \u0910\u092a \u092a\u0930 \u091c\u093e\u0930\u0940 \u0930\u0916\u0947\u0902",mcms_live5__:"\u0930\u093f\u095e\u094d\u0930\u0947\u0936 \u0915\u0930\u0947\u0902",live_room_cannot_receive:"Alibaba.com \u0915\u0947 \u0935\u094d\u092f\u093e\u092a\u093e\u0930\u093f\u092f\u094b\u0902 \u0915\u094b \u0915\u0942\u092a\u0928 \u0928\u0939\u0940\u0902 \u092e\u093f\u0932 \u0938\u0915\u0924\u0947.",recive_coupon_follow_title:"Livestreamer \u0915\u093e \u092a\u093e\u0932\u0928 \u0915\u0930\u0947\u0902","live.text.complain":"\u0930\u093f\u092a\u094b\u0930\u094d\u091f",mcms_buyer_live_yugao_chidao_wait:"\u0935\u094d\u092f\u093e\u092a\u093e\u0930\u0940 \u0915\u0947 \u090f\u0915 \u091b\u094b\u091f\u0947 \u0938\u0947 \u0926\u0947\u0930 \u0939\u0948. \u090f\u0915 \u092a\u0932 \u0915\u0943\u092a\u092f\u093e \u092a\u094d\u0930\u0924\u0940\u0915\u094d\u0937\u093e \u0915\u0930\u0947\u0902.",mcms_buyer_live_contact_supplier:"\u0938\u0902\u092a\u0930\u094d\u0915 \u0906\u092a\u0942\u0930\u094d\u0924\u093f\u0915\u0930\u094d\u0924\u093e",mcms_buyer_live_replay_delete:"\u0932\u093e\u0907\u0935 \u092a\u094d\u0930\u0938\u093e\u0930\u0923 \u0915\u0947 \u0935\u094d\u092f\u093e\u092a\u093e\u0930\u0940 \u0926\u094d\u0935\u093e\u0930\u093e \u092e\u093f\u091f\u093e\u092f\u093e \u091c\u093e \u091a\u0941\u0915\u093e \u0939\u0948 \u0914\u0930 \u0928\u0939\u0940\u0902 \u0926\u0947\u0916\u093e \u091c\u093e \u0938\u0915\u0924\u093e",live_already_sent_toast:"\u0915\u0947 \u0905\u0928\u0941\u0930\u094b\u0927 \u092d\u0947\u091c \u0926\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948. Livestreamer \u0915\u0947 \u090f\u0915 \u092a\u094d\u0930\u0926\u0930\u094d\u0936\u0928 \u0926\u0947 \u0926\u0947\u0902\u0917\u0947 \u091c\u0932\u094d\u0926 \u0939\u0940.",revice_btn_text_message:"\u091f\u093f\u092a\u094d\u092a\u0923\u0940","liveroom.productslist":"\u0909\u0924\u094d\u092a\u093e\u0926\u094b\u0902 \u0915\u0940 \u0938\u0942\u091a\u0940","liveroom.text.watchmobile":"\u0918\u0921\u093c\u0940 \u092a\u0930 \u0932\u093e\u0907\u0935 \u092e\u094b\u092c\u093e\u0907\u0932",live_room_Coupon_expired:"\u092e\u093e\u095e \u0915\u0930\u0947\u0902, \u0915\u0942\u092a\u0928 \u090f\u0915\u0924\u094d\u0930 \u0928\u0939\u0940\u0902 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u093e.","liveroom.text.product.more":"\u0905\u0927\u093f\u0915",asc_live_coupon_insufficient_coupons:"\u092e\u093e\u095e \u0915\u0930\u0947\u0902, \u0915\u0942\u092a\u0928 \u0916\u0924\u094d\u092e \u0939\u094b \u0917\u090f \u0939\u0948\u0902",mcms_live1__:"\u0915\u094d\u092f\u093e \u092a\u094d\u0930\u0938\u094d\u0924\u0941\u0924\u0915\u0930\u094d\u0924\u093e \u0938\u0947 \u092c\u093e\u0924 \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902?",mcms_live8__:"\u092a\u094d\u0930\u0938\u094d\u0924\u0941\u0924\u0915\u0930\u094d\u0924\u093e \u091c\u0932\u094d\u0926 \u0939\u0940 \u0936\u094b \u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0947 \u0939\u0948\u0902. \u0926\u0947\u0916\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092c\u093e\u0926 \u092e\u0947\u0902 \u0935\u093e\u092a\u0938 \u0906\u090f\u0902",live_room_collection_failed:"\u092e\u093e\u095e \u0915\u0930\u0947\u0902, \u0915\u0942\u092a\u0928 \u0915\u0940 \u0938\u092e\u092f-\u0938\u0940\u092e\u093e \u0938\u092e\u093e\u092a\u094d\u0924 \u0939\u094b \u0917\u0908 \u0939\u0948.",mcms_live2__:"\u092f\u0939 \u0938\u0902\u0926\u0947\u0936 \u092e\u0928\u093e \u0939\u0948",live_have_already_sent:"\u0905\u0928\u0941\u0930\u094b\u0927 \u092d\u0947\u091c\u093e","liveroom.text.view":"\u0926\u0947\u0916\u0947\u0902","live.components.factory.card.order.desc":"\u0932\u0947\u0928-\u0926\u0947\u0928 \u0930\u093e\u0936\u093f \u092e\u0947\u0902 \u092a\u093f\u091b\u0932\u0947 6 \u092e\u0939\u0940\u0928\u0947",coupon_second:"\u0938\u0947\u0915\u0902\u0921","live.product_box_empty_text":"\u0938\u0942\u091a\u0940 \u0916\u093e\u0932\u0940 \u0939\u0948, \u092e\u0947\u091c\u092c\u093e\u0928 \u0915\u0947 \u0938\u093e\u0925 \u0938\u0902\u0935\u093e\u0926 \u0915\u0943\u092a\u092f\u093e \u0939\u0948\u0964",mcms_buyer_live_yugao_fengkong_cancel:"\u0932\u093e\u0907\u0935 \u092a\u094d\u0930\u0938\u093e\u0930\u0923 \u0915\u0947 \u0938\u0902\u0926\u093f\u0917\u094d\u0927 \u0939\u0948 \u0938\u093e\u092e\u0917\u094d\u0930\u0940 \u0915\u0947 \u0909\u0932\u094d\u0932\u0902\u0918\u0928 \u0914\u0930 \u0930\u0926\u094d\u0926 \u0915\u0930 \u0926\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948.",mcms_buyer_live_yugao_delete_cancel:"\u0932\u093e\u0907\u0935 \u092a\u094d\u0930\u0938\u093e\u0930\u0923 \u0915\u0947 \u0935\u094d\u092f\u093e\u092a\u093e\u0930\u0940 \u0926\u094d\u0935\u093e\u0930\u093e \u092e\u093f\u091f\u093e\u092f\u093e \u091c\u093e \u091a\u0941\u0915\u093e \u0939\u0948 \u0914\u0930 \u0930\u0926\u094d\u0926 \u0915\u0930 \u0926\u093f\u092f\u093e",revice_btn_text_get:"\u0905\u092c \u0915\u0942\u092a\u0928 \u092a\u094d\u0930\u093e\u092a\u094d\u0924","subscribe.success":"\u0938\u0926\u0938\u094d\u092f\u0924\u093e \u0932\u0940 \u0917\u092f\u0940.","subscribe.cancel":"\u0938\u0926\u0938\u094d\u092f\u0924\u093e \u091b\u094b\u0921\u093c\u0940 \u0917\u092f\u0940.",asc_live_coupon_list_use7:"\u0915\u0942\u092a\u0928",mcms_live13__:"\u0932\u093e\u0907\u0935\u0938\u094d\u091f\u094d\u0930\u0940\u092e \u0938\u092e\u093e\u092a\u094d\u0924 \u0939\u094b \u091a\u0941\u0915\u093e \u0939\u0948. \u0926\u0947\u0916\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0906\u092a\u0915\u093e \u0927\u0928\u094d\u092f\u0935\u093e\u0926.",reminder_sucess:"\u0939\u092e \u0906\u092a\u0915\u094b \u092f\u093e\u0926 \u0926\u093f\u0932\u093e\u0928\u093e \u091c\u092c liveshow \u0936\u0941\u0930\u0942 \u0939\u094b\u0924\u093e \u0939\u0948\u0964","liveroom.text.loading":"\u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948...",mcms_seabed28__:"\u0938\u092d\u0940 \u0909\u0924\u094d\u092a\u093e\u0926",already_recive_coupon:"\u0915\u0942\u092a\u0928 \u0915\u093e \u0926\u093e\u0935\u093e \u0915\u093f\u092f\u093e \u0917\u092f\u093e",asc_live_coupon_list_use1:"\u092e\u0947\u0930\u0947 \u0915\u0942\u092a\u0928",subscribed:"\u0938\u092c\u094d\u0938\u0915\u094d\u0930\u093e\u0907\u092c \u0915\u093f\u092f\u093e \u0917\u092f\u093e"}},function(e,t){e.exports={asc_live_coupon_list_use3:"C\xf2n l\u1ea1i",revice_btn_text_fellow:"Th\u1ef1c hi\u1ec7n theo",mcms_buyer_live_network_wrong_tips:"Xin vui l\xf2ng ki\u1ec3m tra m\u1ea1ng c\u1ee7a b\u1ea1n",mcms_buyer_live_streambreake:"C\xe1c ph\xe1t s\xf3ng tr\u1ef1c ti\u1ebfp kh\xf4ng \u0111\u01b0\u1ee3c m\u1ecbn m\xe0ng, xin vui l\xf2ng ch\u1edd \u0111\u1ee3i m\u1ed9t th\u1eddi \u0111i\u1ec3m",coupon_cutdown_text:"Th\u1eddi gian-Gi\u1edbi h\u1ea1n",live_room_Coupon_expired:"Xin l\u1ed7i, thu th\u1eadp phi\u1ebfu th\u1ea5t b\u1ea1i.",live_room_collection_failed:"Xin l\u1ed7i, phi\u1ebfu mua h\xe0ng \u0111\xe3 h\u1ebft h\u1ea1n.","live.text.complain":"B\xe1o c\xe1o",asc_live_coupon_list_use6:"Gi\u1ea3m gi\xe1 t\u1ed1i \u0111a {{count}} USD",mcms_live7__:"M\u1ea1ng \u0111ang b\u1eadn, vui l\xf2ng th\u1eed l\u1ea1i!",recive_coupon_follow_success_title:"Th\xe0nh C\xf4ng ti\u1ebfp theo l\xe0!","liveroom.text.getapp":"t\u1ea3i \u1ee9ng d\u1ee5ng","liveroom.text.view":"Xem",mcms_buyer_live_replay_delete:"C\xe1c ph\xe1t s\xf3ng tr\u1ef1c ti\u1ebfp \u0111\xe3 \u0111\u01b0\u1ee3c b\u1ecb x\xf3a b\u1edfi c\xe1c th\u01b0\u01a1ng gia v\xe0 kh\xf4ng th\u1ec3 \u0111\u01b0\u1ee3c xem","liveroom.text.commentplaceholder":"n\xf3i chuy\u1ec7n v\u1edbi ng\u01b0\u1eddi ph\xe1t tr\u1ef1c ti\u1ebfp",revice_btn_text_message:"B\xecnh Lu\u1eadn","liveroom.productslist":"S\u1ea3n ph\u1ea9m danh s\xe1ch",live_already_sent_toast:"C\xe1c y\xeau c\u1ea7u \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi \u0111i. C\xe1c livestreamer s\u1ebd cung c\u1ea5p cho m\u1ed9t cu\u1ed9c Bi\u1ec3u t\xecnh s\u1edbm.",live_room_cannot_receive:"Ng\u01b0\u1eddi b\xe1n tr\xean Alibaba.com kh\xf4ng th\u1ec3 nh\u1eadn phi\u1ebfu mua h\xe0ng.",mcms_live5__:"L\xe0m m\u1edbi",live_room_send_catalog_success:"B\u1ea1n \u0111\xe3 g\u1eedi y\xeau c\u1ea7u l\u1ea5y danh m\u1ee5c.",mcms_buyer_live_anchor_leave:"C\xe1c m\xe1y ch\u1ee7 l\xe1 t\u1ea1m th\u1eddi. Xin Vui L\xf2ng ch\u1edd \u0111\u1ee3i.","live.manage.saleExplain":"L\u01b0u \xfd: C\xe1c phi\xean b\u1ea1n \u0111\xe3 \u0111\u0103ng k\xfd s\u1ebd \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb trong danh s\xe1ch <span>48 gi\u1edd</span> sau khi \u0111\u01a1n \u0111\u0103ng k\xfd c\u1ee7a b\u1ea1n \u0111\u01b0\u1ee3c ph\xea duy\u1ec7t.",mcms_live13__:"Bu\u1ed5i ph\xe1t tr\u1ef1c ti\u1ebfp \u0111\xe3 k\u1ebft th\xfac. C\u1ea3m \u01a1n v\xec \u0111\xe3 theo d\xf5i.",mcms_buyer_live_network_wrong:"M\u1ea1ng c\u1ee7a b\u1ea1n l\xe0 kh\xf4ng t\u1ed1t.",recive_coupon_common_title_success:"\u0110\xe3 nh\u1eadn c\xe1c phi\u1ebfu gi\u1ea3m gi\xe1",reminder_sucess:"Ch\xfang t\xf4i s\u1ebd nh\u1eafc nh\u1edf b\u1ea1n khi c\xe1c liveshow b\u1eaft \u0111\u1ea7u.",mcms_moreVideo__:"Th\xeam video","live.components.factory.card.order.desc":"Giao d\u1ecbch s\u1ed1 ti\u1ec1n trong c\xe1c cu\u1ed1i c\xf9ng 6 th\xe1ng","live.info.notice.riskError":"\xdd ki\u1ebfn \u0111\xe3 \u0111\u01b0\u1ee3c Gi\xf3-ki\u1ec3m so\xe1t","liveroom.text.watchmobile":"xem tr\u1ef1c ti\u1ebfp tr\xean di \u0111\u1ed9ng",mcms_buyer_live_yugao_delete_cancel:"C\xe1c ph\xe1t s\xf3ng tr\u1ef1c ti\u1ebfp \u0111\xe3 \u0111\u01b0\u1ee3c b\u1ecb x\xf3a b\u1edfi c\xe1c th\u01b0\u01a1ng gia v\xe0 b\u1ecb h\u1ee7y b\u1ecf",mcms_live2__:"Tin nh\u1eafn n\xe0y b\u1ecb c\u1ea5m","live.product_box_empty_text":"Danh s\xe1ch n\xe0y l\xe0 tr\u1ed1ng r\u1ed7ng, xin vui l\xf2ng li\xean l\u1ea1c v\u1edbi c\xe1c m\xe1y ch\u1ee7.",revice_btn_text_already:"Tuy\xean b\u1ed1","live.info.notice.blockError":"\xdd ki\u1ebfn \u0111\xe3 \u0111\u01b0\u1ee3c b\u1ecb c\u1ea5m","liveroom.text.explaining":"Gi\u1edbi thi\u1ec7u s\u1ea3n ph\u1ea9m","liveroom.watch_now":"Xem b\xe2y gi\u1edd",mcms_buyer_live_suspend:"\u0110\u01b0\u1ee3c ph\u1ea3i tr\u1edf l\u1ea1i.",asc_live_coupon_get_coupon:"L\u1ea5y phi\u1ebfu gi\u1ea3m gi\xe1","live.checkCatalog":"Ki\u1ec3m tra Danh M\u1ee5c",mcms_buyer_live_replay_fengkong:"C\xe1c ph\xe1t s\xf3ng tr\u1ef1c ti\u1ebfp l\xe0 b\u1ecb nghi ng\u1edd c\u1ee7a n\u1ed9i dung vi ph\u1ea1m v\xe0 kh\xf4ng th\u1ec3 \u0111\u01b0\u1ee3c theo d\xf5i",mcms_buyer_live_living_fengkong_end:"C\xe1c ph\xe1t s\xf3ng tr\u1ef1c ti\u1ebfp l\xe0 b\u1ecb nghi ng\u1edd c\u1ee7a n\u1ed9i dung vi ph\u1ea1m, v\xe0 c\xe1c ph\xe1t s\xf3ng tr\u1ef1c ti\u1ebfp \u0111\xe3 k\u1ebft th\xfac","live.info.notice.noExitError":"C\xe1c hi\u1ec7n t\u1ea1i tr\u1ea3 l\u1eddi b\xecnh lu\u1eadn kh\xf4ng kh\xf4ng t\u1ed3n t\u1ea1i","liveroom.text.product.more":"H\u01a1n",have_no_recive_coupon:"Ch\xfang t\xf4i xin l\u1ed7i, t\u1ea5t c\u1ea3 c\xe1c phi\u1ebfu gi\u1ea3m gi\xe1 c\xf3 \u0111\xe3 \u0111\u01b0\u1ee3c tuy\xean b\u1ed1.",asc_live_coupon_insufficient_coupons:"R\u1ea5t ti\u1ebfc, Phi\u1ebfu gi\u1ea3m gi\xe1 \u0111\xe3 \u0111\u01b0\u1ee3c thu th\u1eadp",mcms_buyer_live_living_end:"C\xe1c ph\xe1t s\xf3ng tr\u1ef1c ti\u1ebfp l\xe0 h\u01a1n",mcms_live3__:"Tin nh\u1eafn \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi","liverank.live_rank_text":"Ng\xe0y H\xf4m Nay",asc_player_refresh:"H\u1ec7 th\u1ed1ng ph\u1ea3n h\u1ed3i ch\u1eadm. Vui l\xf2ng th\u1eed l\u1ea1i.","live.continue_in_app":"Ti\u1ebfp t\u1ee5c tr\xean \u1ee8NG D\u1ee4NG Alibaba.com","subscribed.detail":"\u0110\xe3 \u0111\u0103ng k\xfd. Phi\xean tr\u1ef1c ti\u1ebfp s\u1ebd b\u1eaft \u0111\u1ea7u v\xe0o {{date}} v\xe0 ch\xfang t\xf4i s\u1ebd nh\u1eafc b\u1ea1n xem \u0111\xfang gi\u1edd l\xfac {{time}}.",coupon_second:"GI\xc2Y",recive_coupon_follow_title:"Th\u1ef1c hi\u1ec7n theo livestreamer","live.cancel_app":"H\u1ee7y",watch_live_on_mobile:"Xem tr\u1ef1c ti\u1ebfp tr\xean di \u0111\u1ed9ng",mcms_live9__:"\u0110\u1ebfm ng\u01b0\u1ee3c phi\xean tr\u1ef1c ti\u1ebfp","liveroom.text.loading":"T\u1ea3i...",mcms_buyer_live_yugao_chidao_wait:"C\xe1c th\u01b0\u01a1ng gia l\xe0 m\u1ed9t ch\xfat mu\u1ed9n. Xin vui l\xf2ng ch\u1edd \u0111\u1ee3i m\u1ed9t th\u1eddi \u0111i\u1ec3m.",asc_live_coupon_list_use1:"Xem phi\u1ebfu gi\u1ea3m gi\xe1 c\u1ee7a t\xf4i",already_recive_coupon:"\u0110\xe3 nh\u1eadn c\xe1c phi\u1ebfu gi\u1ea3m gi\xe1","subscribe.success":"\u0110\xe3 \u0111\u0103ng k\xfd.",asc_live_coupon_collect_time:"C\u1eeda s\u1ed5 b\u1eadt l\xean n\xe0y s\u1ebd bi\u1ebfn m\u1ea5t trong v\xf2ng {{time}} gi\xe2y.",mcms_buyer_live_contact_supplier:"Li\xean h\u1ec7 v\u1edbi Nh\xe0 Cung C\u1ea5p","liveroom.text.send":"g\u1eedi",mcms_live6__:"Tin nh\u1eafn n\xe0y c\xf3 ch\u1ee9a ng\xf4n ng\u1eef b\u1ecb c\u1ea5m",mcms_live4__:"Theo d\xf5i",revice_btn_text_null:"T\u1ea5t c\u1ea3 c\xe1c tuy\xean b\u1ed1.",live_pc_network_slot:"M\u1ea1ng c\u1ee7a b\u1ea1n l\xe0 kh\xf4ng t\u1ed1t. Xin vui l\xf2ng ki\u1ec3m tra m\u1ea1ng c\u1ee7a b\u1ea1n.",mcms_live14__:"Ng\u01b0\u1eddi Tr\xecnh B\xe0y C\xf3 t\u1ea1m th\u1eddi b\xean tr\xe1i. Tr\u1edf l\u1ea1i sau \u0111\xf3 \u0111\u1ec3 ti\u1ebfp t\u1ee5c xem","liverank.history_rank_text":"L\u1ecbch S\u1eed",asc_live_coupon_list_use2:"B\u1eaft \u0111\u1ea7u trong v\xf2ng","liveroom.title.replay":"Ph\xe1t l\u1ea1i \u0110i\u1ec3m n\u1ed5i b\u1eadt","live.mutedAutoplay":"C\xe2m ch\u01a1i",scan_with_mobile_app:"Qu\xe9t b\u1eb1ng \u1ee8NG D\u1ee4NG Alibaba.com tr\xean \u0111i\u1ec7n tho\u1ea1i di \u0111\u1ed9ng (Android tr\xean 7.12.0, IOS tr\xean 7.12.1)","liveroom.text.changeExplanation":"S\u1ea3n ph\u1ea9m v\u1eeba \u0111\u01b0\u1ee3c gi\u1edbi thi\u1ec7u. B\u1ea1n hi\u1ec7n \u0111ang xem ph\u1ea7n gi\u1edbi thi\u1ec7u.","liveroom.text.directory":"S\u1ed1ng Th\u01b0 M\u1ee5c","liverank.live_rank_time_desc":"Th\u1eddi gian b\u1eaft \u0111\u1ea7u c\u1ee7a s\u1ed1 li\u1ec7u th\u1ed1ng k\xea: {{time}}",asc_chat_now:"Tr\xf2 Chuy\u1ec7n Ngay B\xe2y Gi\u1edd",subscribe:"\u0110\u1eb7t l\u1eddi nh\u1eafc",recive_coupon_common_title:"Phi\u1ebfu gi\u1ea3m gi\xe1","live.get_catalog":"C\xf3 \u0111\u01b0\u1ee3c danh m\u1ee5c",asc_live_coupon_list_use5:"C\xf3 s\u1eb5n sau:{{time}}",asc_live_coupon_collect_success:"\u0110\xe3 nh\u1eadn c\xe1c phi\u1ebfu gi\u1ea3m gi\xe1",coupon_recive_title:"Th\xe0nh C\xf4ng ti\u1ebfp theo l\xe0! B\xe2y gi\u1edd b\u1ea1n c\xf3 th\u1ec3 y\xeau c\u1ea7u b\u1ed3i th\u01b0\u1eddng m\u1ed9t phi\u1ebfu gi\u1ea3m gi\xe1.","live.open_app":"M\u1edf",asc_live_coupon_to_use:"\u0110\u1ed5i ngay",live_ask_introdution:"Gi\u1ea3i th\xedch cho t\xf4i",live_room_send_catalog_later:"Tin nh\u1eafn \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi \u0111i. Vui l\xf2ng ch\u1edd c\xe2u tr\u1ea3 l\u1eddi t\u1eeb nh\xe0 cung c\u1ea5p.","liveroom.text.backToLive":"Tr\u1edf l\u1ea1i \u0110\u1ec3 s\u1ed1ng","liveroom.entering":"Ch\xe0o m\u1eebng \u0111\u1ebfn v\u1edbi c\xe1c livestream",mcms_live12__:"{user_name} \u0111\xe3 v\xe0o lu\u1ed3ng tr\u1ef1c ti\u1ebfp n\xe0y","liveroom.text.changeContent":"C\xe1c Neo c\xf3 ch\u1ec9 c\u1ea7n \u0111\xe3 n\xf3i chuy\u1ec7n v\u1ec1 \u0111i\u1ec1u n\xe0y n\u1ed9i dung, v\xe0 b\u1ea1n \u0111ang xem c\xe1c L\u1eddi Gi\u1ea3i th\xedch.",mcms_buyer_live_living_end_watch_replay:"Xem ph\xe1t l\u1ea1i","subscribe.cancel":"\u0110\xe3 h\u1ee7y \u0111\u0103ng k\xfd.",detail_chat_now:"Tr\xf2 Chuy\u1ec7n Ngay B\xe2y Gi\u1edd",asc_live_coupon_list_use7:"phi\u1ebfu gi\u1ea3m gi\xe1",mcms_live8__:"Ng\u01b0\u1eddi thuy\u1ebft tr\xecnh s\u1eafp b\u1eaft \u0111\u1ea7u ch\u01b0\u01a1ng tr\xecnh. H\xe3y quay l\u1ea1i sau \u0111\u1ec3 xem",recive_coupon_comment_title:"B\xecnh Lu\u1eadn b\xe2y gi\u1edd",live_have_already_sent:"Y\xeau c\u1ea7u g\u1eedi",mcms_live1__:"B\u1ea1n c\xf3 mu\u1ed1n n\xf3i chuy\u1ec7n v\u1edbi ng\u01b0\u1eddi thuy\u1ebft tr\xecnh?",recive_coupon_comment_success_title:"Th\xe0nh C\xf4ng Nh\u1eadn x\xe9t!",revice_btn_text_get:"Nh\u1eadn phi\u1ebfu gi\u1ea3m gi\xe1 b\xe2y gi\u1edd",subscribed:"\u0110\xe3 \u0111\u0103ng k\xfd",mcms_live11__:"{user_name} \u0111ang g\u1eedi m\u1ed9t y\xeau c\u1ea7u",asc_live_coupon_already_received:"B\u1ea1n \u0111\xe3 thu \u0111\u01b0\u01a1c c\xe1c phi\u1ebfu gi\u1ea3m gi\xe1.","liveroom.text.complain":"b\xe1o c\xe1o","live.unfollowed_text":"Unfollow",mcms_seabed28__:"T\u1ea5t c\u1ea3 c\xe1c s\u1ea3n ph\u1ea9m","live.living":"Tr\u1ef1c ti\u1ebfp","liverank.history_rank_time_desc":"Th\u1eddi gian b\u1eaft \u0111\u1ea7u c\u1ee7a s\u1ed1 li\u1ec7u th\u1ed1ng k\xea: {{time}}",asc_live_coupon_list_use4:"Phi\u1ebfu gi\u1ea3m gi\xe1 nh\u1eadn \u0111\u01b0\u1ee3c",asc_live_catalog:"Danh m\u1ee5c","liveroom.text.play_failed":"M\u1ed9t l\u1ed7i x\u1ea3y ra trong tr\xecnh ph\xe1t. Vui l\xf2ng th\u1eed l\u1ea1i sau.",asc_live_coupon_list_issueing_title:"Phi\u1ebfu gi\u1ea3m gi\xe1 \u0111\u01b0\u1ee3c ban h\xe0nh",mcms_buyer_live_yugao_fengkong_cancel:"C\xe1c ph\xe1t s\xf3ng tr\u1ef1c ti\u1ebfp l\xe0 b\u1ecb nghi ng\u1edd c\u1ee7a n\u1ed9i dung vi ph\u1ea1m v\xe0 c\xf3 \u0111\xe3 \u0111\u01b0\u1ee3c b\u1ecb h\u1ee7y b\u1ecf.","live.text.watch_replay":"Xem b\u1ea3n ph\xe1t l\u1ea1i",mcms_live10__:"{user_name} \u0111ang kh\u1edfi t\u1ea1o m\u1ed9t \u0111\u01a1n \u0111\u1eb7t h\xe0ng",unsubscribe:"H\u1ee7y l\u1eddi nh\u1eafc",asc_live_coupon_list_title:"Phi\u1ebfu mua h\xe0ng \u0111\u1ed9c quy\u1ec1n d\xe0nh cho ph\xe1t tr\u1ef1c ti\u1ebfp","ive.enableVolume":"B\u1eadt l\xean c\xe1c kh\u1ed1i l\u01b0\u1ee3ng",mcms_buyer_live_yugao_timeout_end:"C\xe1c ph\xe1t s\xf3ng tr\u1ef1c ti\u1ebfp l\xe0 kh\xf4ng ph\xe1t s\xf3ng do \u0111\u1ec3 l\xe0m th\xeam gi\u1edd",live_room_buyer_send_catalog_success:"B\u1ea1n \u0111\xe3 g\u1eedi y\xeau c\u1ea7u l\u1ea5y danh m\u1ee5c.",live_rank_feedback:"C\xe1c leaderboard l\xe0 tr\u1ed1ng r\u1ed7ng"}},function(e,t){e.exports={live_already_sent_toast:"The request has been sent. The livestreamer will give a demonstration soon. ",already_recive_coupon:"\u06a9\u0648\u067e\u0646 \u06a9\u0627 \u062f\u0639\u0648\u06cc\u0670 \u06a9\u0631\u0646\u0627",asc_live_coupon_collect_success:"\u06a9\u0648\u067e\u0646 \u06a9\u0627 \u062f\u0639\u0648\u06cc\u0670 \u06a9\u0631\u0646\u0627",recive_coupon_common_title_success:"\u06a9\u0648\u067e\u0646 \u06a9\u0627 \u062f\u0639\u0648\u06cc\u0670 \u06a9\u0631\u0646\u0627",live_ask_introdution:"Explain to me",live_have_already_sent:"Request sent"}},function(e,t){e.exports={live_already_sent_toast:"The request has been sent. The livestreamer will give a demonstration soon. ",live_have_already_sent:"Request sent",live_ask_introdution:"Explain to me"}},function(e,t){e.exports={recive_coupon_common_title_success:"\u1000\u1030\u1015\u103d\u1014\u103a\u1019\u103b\u102c\u1038 \u1010\u1031\u102c\u1004\u103a\u1038\u1011\u102c\u1038\u101e\u100a\u103a",already_recive_coupon:"\u1000\u1030\u1015\u103d\u1014\u103a\u1019\u103b\u102c\u1038 \u1010\u1031\u102c\u1004\u103a\u1038\u1011\u102c\u1038\u101e\u100a\u103a",live_already_sent_toast:"The request has been sent. The livestreamer will give a demonstration soon. ",asc_live_coupon_collect_success:"\u1000\u1030\u1015\u103d\u1014\u103a\u1019\u103b\u102c\u1038 \u1010\u1031\u102c\u1004\u103a\u1038\u1011\u102c\u1038\u101e\u100a\u103a",live_have_already_sent:"Request sent",live_ask_introdution:"Explain to me"}},function(e,t){e.exports={live_already_sent_toast:"The request has been sent. The livestreamer will give a demonstration soon. ",live_ask_introdution:"Explain to me",live_have_already_sent:"Request sent"}},function(e,t){e.exports={live_already_sent_toast:"The request has been sent. The livestreamer will give a demonstration soon. ",live_ask_introdution:"Explain to me",live_have_already_sent:"Request sent"}},function(e,t){e.exports={live_ask_introdution:"Explain to me",live_already_sent_toast:"The request has been sent. The livestreamer will give a demonstration soon. ",live_have_already_sent:"Request sent"}},function(e,t){e.exports={live_already_sent_toast:"The request has been sent. The livestreamer will give a demonstration soon. ",already_recive_coupon:"\u0dc4\u0dd2\u0db8\u0dd2\u0d9a\u0db8\u0dca \u0d9a\u0dd2\u0dba\u0dd6 \u0d9a\u0dd6\u0db4\u0db1",asc_live_coupon_collect_success:"\u0dc4\u0dd2\u0db8\u0dd2\u0d9a\u0db8\u0dca \u0d9a\u0dd2\u0dba\u0dd6 \u0d9a\u0dd6\u0db4\u0db1",recive_coupon_common_title_success:"\u0dc4\u0dd2\u0db8\u0dd2\u0d9a\u0db8\u0dca \u0d9a\u0dd2\u0dba\u0dd6 \u0d9a\u0dd6\u0db4\u0db1",live_have_already_sent:"Request sent",live_ask_introdution:"Explain to me"}},function(e,t){e.exports={live_have_already_sent:"Request sent",live_ask_introdution:"Explain to me",live_already_sent_toast:"The request has been sent. The livestreamer will give a demonstration soon. ","live.living":"\u0e44\u0e25\u0e1f\u0e4c\u0e2a\u0e14"}},function(e,t){e.exports={live_have_already_sent:"Request sent",live_already_sent_toast:"The request has been sent. The livestreamer will give a demonstration soon. ",live_ask_introdution:"Explain to me"}},function(e,t){e.exports={}},function(e,t){e.exports={live_already_sent_toast:"The request has been sent. The livestreamer will give a demonstration soon. ",live_ask_introdution:"Explain to me",live_have_already_sent:"Request sent"}},function(e,t){e.exports={reminder_sucess:"\u8a02\u95b1\u6210\u529f\u3002 \u6211\u5011\u5c07\u5728\u76f4\u64ad\u958b\u59cb\u6642\u63d0\u9192\u4f60","subscribed.detail":"\u5df2\u8a02\u95b1\uff0c\u76f4\u64ad\u5c07\u5728 {{date}} \u958b\u64ad\uff0c\u6211\u5011\u5c07\u65bc {{time}} \u63d0\u793a\u60a8\u6e96\u6642\u89c0\u770b",subscribed:"\u5df2\u8a02\u95b1","liveroom.text.complain":"\u8209\u5831",coupon_recive_title:"\u6210\u529f\u8ddf\u96a8! \u4f60\u73fe\u5728\u53ef\u4ee5\u9818\u53d6\u512a\u60e0\u5238\u4e86\u3002",asc_live_coupon_to_use:"\u7acb\u5373\u4f7f\u7528","live.mutedAutoplay":"\u6b63\u5728\u9759\u97f3\u64ad\u653e",mcms_buyer_live_contact_supplier:"\u806f\u7e6b\u5546\u5bb6","live.product_box_empty_text":"\u5217\u8868\u4e3a\u7a7a\uff0c\u8bf7\u548c\u4e3b\u64ad\u6c9f\u901a\u3002",revice_btn_text_message:"\u8a55\u8ad6",watch_live_on_mobile:"\u624b\u6a5f\u89c0\u770b\u76f4\u64ad",live_ask_introdution:"\u6c42\u8bb2\u89e3",unsubscribe:"\u53d6\u6d88\u63d0\u9192","liveroom.productslist":"\u7522\u54c1\u5217\u8868","liveroom.text.loading":"\u52a0\u8f09\u4e2d",live_room_send_catalog_success:"\u7d22\u8981\u4ea7\u54c1\u76ee\u5f55\u6d88\u606f\u5df2\u53d1\u51fa",mcms_live4__:"\u95dc\u6ce8",asc_live_coupon_get_coupon:"\u9818\u5238",scan_with_mobile_app:"\u4f7f\u7528\u624b\u6a5f Alibaba.com \u61c9\u7528\u7a0b\u5f0f\u6383\u78bc\uff08\u7248\u672c\u8981\u6c42\uff1aAndroid 7.12.0 \u4ee5\u4e0a\uff0cIOS 7.12.1 \u4ee5\u4e0a\uff09",asc_live_coupon_list_use2:"\u958b\u6436","subscribe.success":"\u8a02\u95b1\u6210\u529f",recive_coupon_comment_success_title:"\u8a55\u8ad6\u6210\u529f!",recive_coupon_follow_success_title:"\u6210\u529f\u8ddf\u96a8! ",live_room_Coupon_expired:"\u5f88\u62b1\u6b49\uff0c\u512a\u60e0\u5238\u9818\u53d6\u5931\u6557\u3002",live_room_collection_failed:"\u5f88\u62b1\u6b49\uff0c\u512a\u60e0\u5238\u5df2\u904e\u671f\u3002","live.text.share":"\u5206\u4eab",live_room_send_catalog_later:"\u7d22\u8981\u6d88\u606f\u5df2\u53d1\u51fa\uff0c\u8bf7\u7b49\u5f85\u5546\u5bb6\u56de\u590d",mcms_buyer_live_anchor_leave:"\u4e3b\u64ad\u66ab\u6642\u96e2\u958b,\u8acb\u7a0d\u7b49","liveroom.text.explaining":"\u793a\u7bc4",mcms_live9__:"\u5373\u6642\u5012\u8a08\u6642",mcms_live13__:"\u76f4\u64ad\u5df2\u7d50\u675f\u3002\u611f\u8b1d\u89c0\u770b\u3002",asc_live_catalog:"\u7522\u54c1\u76ee\u9304",asc_live_coupon_list_use4:"\u5df2\u9818\u512a\u60e0\u5238",already_recive_coupon:"\u9818\u53d6\u512a\u60e0\u5238","liveroom.text.backToLive":"\u56de\u5230\u76f4\u64ad","liveroom.title.replay":"\u7cbe\u5f69\u56de\u653e",recive_coupon_common_title_success:"\u9818\u53d6\u512a\u60e0\u5238",asc_live_coupon_already_received:"\u60a8\u5df2\u9818\u53d6\u904e\u6b64\u512a\u60e0\u5238\u3002",mcms_buyer_live_streambreake:"\u76f4\u64ad\u6709\u9ede\u5c0f\u5361,\u8acb\u7a0d\u7b49",have_no_recive_coupon:"\u5f88\u62b1\u6b49,\u6240\u6709\u512a\u60e0\u5238\u90fd\u5df2\u7d93\u8a8d\u9818\u4e86\u3002",mcms_buyer_live_replay_fengkong:"\u672c\u5834\u76f4\u64ad\u6d89\u5acc\u5167\u5bb9\u9055\u898f,\u7121\u6cd5\u89c0\u770b",mcms_buyer_live_yugao_timeout_end:"\u672c\u5834\u76f4\u64ad\u8d85\u6642\u672a\u64ad","liveroom.text.send":"\u767c\u9001",mcms_buyer_live_living_end_watch_replay:"\u89c0\u770b\u56de\u653e","liveroom.text.watchmobile":"\u624b\u6a5f\u89c0\u770b\u76f4\u64ad","liveroom.text.changeContent":"\u4e3b\u64ad\u525b\u525b\u8b1b\u904e\u8a72\u5167\u5bb9, \u60a8\u6b63\u5728\u89c0\u770b\u8b1b\u89e3\u5167\u5bb9\u3002",mcms_buyer_live_network_wrong_tips:"\u8acb\u6aa2\u67e5\u81ea\u5df1\u7684\u7db2\u7d61\u60c5\u6cc1",asc_chat_now:"\u8054\u7cfb\u5546\u5bb6",mcms_buyer_live_yugao_chidao_wait:"\u5546\u5bb6\u9072\u5230\u4e86\u4e00\u6703,\u8acb\u7a0d\u7b49",asc_live_coupon_collect_time:"\u6b64\u5f48\u51fa\u5f0f\u8996\u7a97\u5c07\u5728 {{time}} \u5f8c\u6d88\u5931\u3002",live_have_already_sent:"\u5df2\u8bf7\u6c42","live.info.notice.riskError":"\u8a55\u8ad6\u5df2\u88ab\u98a8\u63a7",recive_coupon_comment_title:"\u7acb\u5373\u8a55\u8ad6","liveroom.text.product.more":"\u66f4\u591a",asc_live_coupon_list_use3:"\u6301\u7e8c\u4e2d","subscribe.cancel":"\u5df2\u9000\u8a02","live.continue_in_app":"\u5728 Alibaba.com APP \u4e2d\u7e7c\u7e8c",revice_btn_text_null:"\u90fd\u8072\u7a31\u4e86\u3002","live.living":"\u76f4\u64ad\u4e2d",mcms_buyer_live_living_fengkong_end:"\u672c\u5834\u76f4\u64ad\u6d89\u5acc\u5167\u5bb9\u9055\u898f,\u76f4\u64ad\u5df2\u7d50\u675f","live.unfollowed_text":"\u53d6\u6d88\u5173\u6ce8",asc_live_coupon_collect_success:"\u9818\u53d6\u512a\u60e0\u5238",asc_live_coupon_list_use7:"\u512a\u60e0\u5238","live.open_app":"\u958b\u555f",asc_live_coupon_list_use5:"{{time}}\u5f8c\u53ef\u9818\u5238","liveroom.text.view":"\u67e5\u770b",live_already_sent_toast:"\u8bf7\u6c42\u5df2\u53d1\u51fa\uff0c\u4e3b\u64ad\u5c06\u4f1a\u4e3a\u60a8\u63d0\u4f9b\u8bb2\u89e3","live.checkCatalog":"\u4ea7\u54c1\u76ee\u5f55",mcms_live10__:"{user_name}\u6b63\u5728\u4e0b\u55ae",mcms_live6__:"\u7559\u8a00\u4e2d\u5305\u542b\u975e\u6cd5\u5b57\u7b26","live.components.factory.card.order.desc":"\u8fd16\u4e2a\u6708\u7684\u4ea4\u6613\u91d1\u989d",recive_coupon_common_title:"\u512a\u60e0\u5238",mcms_live12__:"{user_name}\u9032\u5165\u76f4\u64ad\u9593","live.info.notice.noExitError":"\u76ee\u524d\u56de\u8986\u8a55\u8ad6\u4e0d\u5b58\u5728",mcms_buyer_live_living_end:"\u672c\u5834\u76f4\u64ad\u5df2\u7d50\u675f","liveroom.text.commentplaceholder":"\u806f\u7d61\u4e3b\u64ad",asc_live_coupon_insufficient_coupons:"\u62b1\u6b49\uff0c\u512a\u60e0\u5238\u5df2\u88ab\u9818\u5b8c",mcms_moreVideo__:"\u66f4\u591a\u89c6\u9891","liveroom.entering":"\u6b61\u8fce\u4f86\u5230\u76f4\u64ad\u73fe\u5834","liveroom.text.getapp":"\u4e0b\u8f09 APP",mcms_live14__:"\u6f14\u793a\u8005\u5df2\u66ab\u6642\u96e2\u958b\u3002\u7a0d\u5f8c\u518d\u56de\u4f86\u7e7c\u7e8c\u89c0\u770b",mcms_buyer_live_yugao_delete_cancel:"\u672c\u5834\u76f4\u64ad\u5df2\u88ab\u5546\u5bb6\u522a\u9664,\u76f4\u64ad\u5df2\u53d6\u6d88",live_rank_feedback:"\u6392\u884c\u699c\u662f\u7a7a\u7684",mcms_live5__:"\u5237\u65b0",detail_chat_now:"\u8054\u7cfb\u5546\u5bb6",revice_btn_text_fellow:"\u8ddf\u96a8","liveroom.text.play_failed":"\u76ee\u524d\u64ad\u653e\u5668\u7570\u5e38\uff0c\u8acb\u60a8\u7a0d\u5f8c\u91cd\u8a66",mcms_live3__:"\u767c\u4f48\u6210\u529f",asc_live_coupon_list_use6:"\u6700\u9ad8\u512a\u60e0\u81f3 {{number}}","live.manage.saleExplain":'\u8a3b\uff1a\u672a\u986f\u793a\u7684\u5834\u6b21\uff0c\u9700\u8981\u5728\u6d3b\u52d5\u5be9\u6838\u901a\u904e <span style="{{color:" "#efa805"}}>48 \u5c0f\u6642</span>\n                        \u5f8c\uff0c\u624d\u53ef\u5728\u6b64\u6e05\u55ae\u4e2d\u986f\u793a',"liverank.history_rank_text":"\u5386\u53f2\u699c\u5355",mcms_live1__:"\u8ddf\u4e3b\u64ad\u804a\u9ede\u4ec0\u9ebc\uff1f",subscribe:"\u958b\u64ad\u63d0\u9192","liverank.live_rank_time_desc":"\u7d71\u8a08\u958b\u59cb\u6642\u9593: {{time}}","liveroom.text.changeExplanation":"\u76f4\u64ad\u525b\u525b\u8b1b\u89e3\u904e\u8a72\u7522\u54c1\u3002 \u60a8\u6b63\u5728\u89c0\u770b\u6b77\u53f2\u8b1b\u89e3\u5167\u5bb9\u3002",live_pc_network_slot:"\u4f60\u7684\u7db2\u7d61\u4e0d\u592a\u9806\u66a2,\u8acb\u6aa2\u67e5\u7db2\u7d61\u60c5\u6cc1","live.info.notice.blockError":"\u8a55\u8ad6\u5df2\u88ab\u7981\u8a00",coupon_second:"\u79d2",mcms_buyer_live_network_wrong:"\u4f60\u7684\u7db2\u7d61\u4e0d\u597d",live_room_cannot_receive:"Alibaba.com \u5546\u5bb6\u7121\u6cd5\u9818\u53d6\u512a\u60e0\u5238\u3002",asc_live_coupon_list_issueing_title:"\u6b63\u5728\u767c\u653e\u7684\u512a\u60e0\u5238","liverank.history_rank_time_desc":"\u7d71\u8a08\u958b\u59cb\u6642\u9593: {{time}}",mcms_buyer_live_yugao_fengkong_cancel:"\u672c\u5834\u76f4\u64ad\u6d89\u5acc\u5167\u5bb9\u9055\u898f,\u5df2\u88ab\u53d6\u6d88","live.text.complain":"\u8209\u5831",revice_btn_text_get:"\u7acb\u5373\u7372\u53d6\u512a\u60e0\u5238",mcms_live11__:"{user_name}\u6b63\u5728\u767c\u8d77\u8a62\u76e4","liverank.live_rank_text":"\u4eca\u65e5","live.get_catalog":"\u4ea7\u54c1\u76ee\u5f55",coupon_cutdown_text:"\u6642\u9593\u9650\u5236","liveroom.watch_now":"\u7acb\u5373\u89c0\u770b",mcms_buyer_live_suspend:"\u99ac\u4e0a\u56de\u4f86\u3002",live_room_buyer_send_catalog_success:"\u7d22\u8981\u4ea7\u54c1\u76ee\u5f55\u6d88\u606f\u5df2\u53d1\u51fa",asc_live_coupon_list_use1:"\u6aa2\u8996\u6211\u7684\u512a\u60e0\u5238","liveroom.text.directory":"\u7bc0\u76ee\u985e\u5bb9","ive.enableVolume":"\u8c03\u9ad8\u97f3\u91cf",revice_btn_text_already:"\u5df2\u9886\u53d6",mcms_live8__:"\u4e3b\u64ad\u5c1a\u672a\u958b\u59cb\u76f4\u64ad\uff0c\u8acb\u8010\u5fc3\u7b49\u5f85","live.cancel_app":"\u53d6\u6d88",mcms_live2__:"\u60a8\u5df2\u7d93\u88ab\u7981\u8a00",asc_live_coupon_list_title:"\u76f4\u64ad\u7368\u4eab\u512a\u60e0\u5238",asc_player_refresh:"\u7cfb\u7d71\u56de\u61c9\u901f\u5ea6\u7de9\u6162\u3002 \u8acb\u91cd\u8a66\u3002",mcms_buyer_live_replay_delete:"\u672c\u5834\u76f4\u64ad\u5df2\u88ab\u5546\u5bb6\u522a\u9664,\u7121\u6cd5\u89c0\u770b",recive_coupon_follow_title:"\u8ddf\u96a8\u76f4\u64ad\u8005","live.text.watch_replay":"\u89c0\u770b\u91cd\u64ad",mcms_live7__:"\u7db2\u8def\u932f\u8aa4,\u8acb\u91cd\u8a66"}},function(e,t){e.exports={mcms_live6__:"\u7559\u8a00\u4e2d\u5305\u542b\u975e\u6cd5\u5b57\u7b26",live_already_sent_toast:"\u8bf7\u6c42\u5df2\u53d1\u51fa\uff0c\u4e3b\u64ad\u5c06\u4f1a\u4e3a\u60a8\u63d0\u4f9b\u8bb2\u89e3","live.open_app":"\u958b\u555f","live.components.factory.card.order.desc":"\u8fd16\u4e2a\u6708\u7684\u4ea4\u6613\u91d1\u989d","liveroom.text.explaining":"\u6f14\u793a",mcms_live10__:"{user_name}\u6b63\u5728\u4e0b\u55ae",unsubscribe:"\u53d6\u6d88\u63d0\u9192","liveroom.text.complain":"\u8209\u5831",mcms_live13__:"\u76f4\u64ad\u5df2\u7d50\u675f\u3002\u591a\u8b1d\u6536\u770b\u3002","live.unfollowed_text":"\u53d6\u6d88\u5173\u6ce8","liveroom.title.replay":"\u7cbe\u5f69\u56de\u653e","live.info.notice.riskError":"\u8a55\u8ad6\u5df2\u88ab\u98a8\u63a7","subscribe.cancel":"\u5df2\u9000\u8a02","liverank.live_rank_time_desc":"\u7edf\u8ba1\u5f00\u59cb\u65f6\u95f4\uff1a{{time}}","live.manage.saleExplain":'\u6ce8\uff1a\u672a\u986f\u793a\u7684\u5834\u6b21\uff0c\u9700\u8981\u5728\u6d3b\u52d5\u5be9\u6838\u901a\u904e <span style="{{color:" "#efa805"}}> 48 \u5c0f\u6642 </span> \n                        \u5f8c\uff0c\u624d\u53ef\u5728\u6b64\u5217\u8868\u4e2d\u986f\u793a',"liveroom.text.play_failed":"\u76ee\u524d\u64ad\u653e\u5668\u7570\u5e38\uff0c\u8acb\u60a8\u7a0d\u5f8c\u91cd\u8a66",mcms_live3__:"\u767c\u4f48\u6210\u529f","liveroom.text.getapp":"\u4e0b\u8f09 APP",scan_with_mobile_app:"\u4f7f\u7528\u624b\u6a5f Alibaba.com \u61c9\u7528\u7a0b\u5f0f\u6383\u78bc (\u7248\u672c\u8981\u6c42\uff1aAndroid 7.12.0 \u4ee5\u4e0a , IOS7.12.1 \u4ee5\u4e0a )","liverank.live_rank_text":"\u4eca\u65e5","subscribe.success":"\u8a02\u95b1\u6210\u529f",mcms_live4__:"\u95dc\u6ce8",subscribe:"\u958b\u64ad\u63d0\u9192","ive.enableVolume":"\u8c03\u9ad8\u97f3\u91cf","live.info.notice.noExitError":"\u7576\u524d\u56de\u8986\u8a55\u8ad6\u4e0d\u5b58\u5728","live.cancel_app":"\u53d6\u6d88",mcms_live11__:"{user_name}\u6b63\u5728\u767c\u8d77\u8a62\u76e4",mcms_live8__:"\u4e3b\u64ad\u5c1a\u672a\u958b\u59cb\u76f4\u64ad\uff0c\u8acb\u8010\u5fc3\u7b49\u5f85",live_room_buyer_send_catalog_success:"\u7d22\u8981\u4ea7\u54c1\u76ee\u5f55\u6d88\u606f\u5df2\u53d1\u51fa","liverank.history_rank_time_desc":"\u7edf\u8ba1\u5f00\u59cb\u65f6\u95f4: {{time}}","live.mutedAutoplay":"\u6b63\u5728\u9759\u97f3\u64ad\u653e","live.get_catalog":"\u4ea7\u54c1\u76ee\u5f55",live_room_cannot_receive:"Alibaba.com \u5546\u5bb6\u7121\u6cd5\u9818\u53d6\u512a\u60e0\u5238\u3002",live_room_collection_failed:"\u5f88\u62b1\u6b49\uff0c\u512a\u60e0\u5238\u5df2\u904e\u671f\u3002",mcms_live2__:"\u60a8\u5df2\u7d93\u88ab\u7981\u8a00",mcms_moreVideo__:"\u66f4\u591a\u89c6\u9891","live.text.watch_replay":"\u89c0\u770b\u91cd\u64ad",asc_live_coupon_collect_time:"\u6b64\u5f48\u51fa\u5f0f\u8996\u7a97\u6703\u5728 {{time}} \u79d2\u5f8c\u6d88\u5931\u3002","live.info.notice.blockError":"\u8a55\u8ad6\u5df2\u88ab\u7981\u8a00",live_room_send_catalog_success:"\u7d22\u8981\u4ea7\u54c1\u76ee\u5f55\u6d88\u606f\u5df2\u53d1\u51fa",subscribed:"\u5df2\u8a02\u95b1","subscribed.detail":"\u5df2\u8a02\u95b1\uff0c\u76f4\u64ad\u5c07\u5728 {{date}} \u958b\u64ad\uff0c\u6211\u5011\u5c07\u65bc {{time}} \u63d0\u793a\u60a8\u6e96\u6642\u6536\u770b",live_ask_introdution:"\u6c42\u8bb2\u89e3","live.product_box_empty_text":"\u5217\u8868\u4e3a\u7a7a\uff0c\u8bf7\u548c\u4e3b\u64ad\u6c9f\u901a\u3002","live.text.complain":"\u8209\u5831",live_room_Coupon_expired:"\u5f88\u62b1\u6b49\uff0c\u512a\u60e0\u5238\u9818\u53d6\u5931\u6557\u3002",live_room_send_catalog_later:"\u7d22\u8981\u6d88\u606f\u5df2\u53d1\u51fa\uff0c\u8bf7\u7b49\u5f85\u5546\u5bb6\u56de\u590d",watch_live_on_mobile:"\u624b\u6a5f\u89c0\u770b\u76f4\u64ad","live.text.share":"\u5206\u4eab","live.living":"\u76f4\u64ad\u4e2d","live.checkCatalog":"\u4ea7\u54c1\u76ee\u5f55",mcms_live12__:"{user_name}\u9032\u5165\u76f4\u64ad\u9593",mcms_live1__:"\u8ddf\u4e3b\u64ad\u804a\u9ede\u4ec0\u9ebc\uff1f",asc_live_catalog:"\u7522\u54c1\u76ee\u9304","liveroom.watch_now":"\u73b0\u5728\u89c2\u770b","live.continue_in_app":"\u5728 Alibaba.com APP\u4e0a\u7e7c\u7e8c","liverank.history_rank_text":"\u5386\u53f2\u699c\u5355",asc_player_refresh:"\u7cfb\u7d71\u97ff\u61c9\u901f\u5ea6\u8f03\u6162\u3002 \u8acb\u91cd\u8a66\u3002","liveroom.text.send":"\u50b3\u9001","liveroom.text.commentplaceholder":"\u806f\u7d61\u4e3b\u64ad","liveroom.text.watchmobile":"\u624b\u6a5f\u89c0\u770b\u76f4\u64ad",live_have_already_sent:"\u5df2\u8bf7\u6c42"}},function(e,t){e.exports={"live.text.complain":"\u4e3e\u62a5",mcms_live12__:"{user_name}\u8fdb\u5165\u76f4\u64ad\u95f4","liveroom.text.changeExplanation":"\u76f4\u64ad\u521a\u521a\u8bb2\u89e3\u8fc7\u8be5\u5546\u54c1\uff0c \u60a8\u6b63\u5728\u89c2\u770b\u8bb2\u89e3\u5185\u5bb9\u3002",live_already_sent_toast:"\u8bf7\u6c42\u5df2\u53d1\u51fa\uff0c\u4e3b\u64ad\u5c06\u4f1a\u4e3a\u60a8\u63d0\u4f9b\u8bb2\u89e3",mcms_buyer_live_replay_fengkong:"\u672c\u573a\u76f4\u64ad\u6d89\u5acc\u5185\u5bb9\u8fdd\u89c4,\u65e0\u6cd5\u89c2\u770b",live_room_Coupon_expired:"\u60a8\u9886\u53d6\u7684\u4f18\u60e0\u5238\u5df2\u8fc7\u671f","app.check":"success","liveroom.text.complain":"\u4e3e\u62a5",asc_live_coupon_list_title:"\u76f4\u64ad\u95f4\u4e13\u5c5e\u4f18\u60e0\u5238",asc_live_coupon_list_use6:"\u6700\u9ad8\u4f18\u60e0\u81f3{{number}}",revice_btn_text_message:"\u53d1\u8bc4\u8bba",mcms_buyer_live_suspend:"\u4e3b\u64ad\u6682\u65f6\u79bb\u5f00\uff0c\u8bf7\u7a0d\u540e",mcms_buyer_live_yugao_chidao_wait:"\u5546\u5bb6\u8fdf\u5230\u4e86\u4e00\u4f1a\uff0c\u8bf7\u7a0d\u7b49",unsubscribe:"\u53d6\u6d88\u63d0\u9192",coupon_recive_title:"\u5df2\u5173\u6ce8\uff0c\u7acb\u5373\u9886\u53d6\u6298\u6263\u5238",revice_btn_text_null:"\u5df2\u9886\u5b8c",have_no_recive_coupon:"\u5bf9\u4e0d\u8d77\uff0c\u6298\u6263\u5238\u5df2\u7ecf\u88ab\u9886\u5b8c\u4e86",asc_live_coupon_list_use2:"\u5f00\u62a2",watch_live_on_mobile:"\u624b\u673a\u89c2\u770b\u76f4\u64ad","subscribe.cancel":"\u5df2\u9000\u8ba2","liveroom.text.changeContent":"\u4e3b\u64ad\u521a\u521a\u8bb2\u8fc7\u8be5\u5185\u5bb9\uff0c \u60a8\u6b63\u5728\u89c2\u770b\u8bb2\u89e3\u5185\u5bb9\u3002",recive_coupon_comment_success_title:"\u5df2\u8bc4\u8bba",asc_live_coupon_collect_success:"Coupons claimed","liverank.live_rank_text":"\u4eca\u65e5","live.info.notice.blockError":"\u8bc4\u8bba\u5df2\u88ab\u7981\u8a00",asc_live_coupon_already_received:"\u60a8\u5df2\u9886\u53d6\u8fc7\u6b64\u4f18\u60e0\u5238",detail_chat_now:"\u8054\u7cfb\u5546\u5bb6","liveroom.text.watchmobile":"\u624b\u673a\u89c2\u770b\u76f4\u64ad",mcms_buyer_live_contact_supplier:"\u8054\u7cfb\u5546\u5bb6",asc_live_coupon_list_use7:"\u4f18\u60e0\u5238","live.info.notice.noExitError":"\u5f53\u524d\u56de\u590d\u8bc4\u8bba\u4e0d\u5b58\u5728",scan_with_mobile_app:"\u4f7f\u7528\u624b\u673aAlibaba.com \u5e94\u7528\u626b\u7801(\u7248\u672c\u8981\u6c42\uff1aAndroid 7.12.0\u4ee5\u4e0a , IOS7.12.1\u4ee5\u4e0a)",revice_btn_text_fellow:"\u5173\u6ce8","liveroom.text.send":"\u53d1\u9001","live.text.watch_replay":"\u89c2\u770b\u56de\u653e",recive_coupon_follow_title:"\u5173\u6ce8\u4e3b\u64ad",asc_live_coupon_list_use4:"\u5df2\u9886\u4f18\u60e0\u5238",live_rank_feedback:"\u699c\u5355\u4e3a\u7a7a",live_ask_introdution:"\u6c42\u8bb2\u89e3",live_room_cannot_receive:"\u56fd\u9645\u7ad9\u5546\u5bb6\u65e0\u6cd5\u9886\u53d6\u4f18\u60e0\u5238",subscribed:"\u5df2\u8ba2\u9605","live.components.factory.card.order.desc":"\u8fd16\u4e2a\u6708\u7684\u4ea4\u6613\u91d1\u989d","liveroom.text.loading":"\u52a0\u8f7d\u4e2d","live.open_app":"\u540c\u610f","liveroom.entering":"\u6b22\u8fce\u8fdb\u5165\u76f4\u64ad\u95f4","liverank.history_rank_time_desc":"\u7edf\u8ba1\u5f00\u59cb\u65f6\u95f4: {{time}}",revice_btn_text_get:"\u9886\u53d6","live.mutedAutoplay":"\u6b63\u5728\u9759\u97f3\u64ad\u653e",asc_live_coupon_collect_time:"\u6b64\u5f39\u51fa\u7a97\u53e3\u5c06\u5728 {{time}} \u79d2\u540e\u6d88\u5931",mcms_buyer_live_network_wrong_tips:"\u8bf7\u68c0\u67e5\u81ea\u5df1\u7684\u7f51\u7edc\u60c5\u51b5",asc_live_coupon_insufficient_coupons:"\u4f18\u60e0\u5238\u5df2\u88ab\u9886\u5b8c","live.info.notice.riskError":"\u8bc4\u8bba\u5df2\u88ab\u98ce\u63a7",mcms_seabed28__:"\u6240\u6709\u4ea7\u54c1",mcms_buyer_live_living_fengkong_end:"\u672c\u573a\u76f4\u64ad\u6d89\u5acc\u5185\u5bb9\u8fdd\u89c4\uff0c\u76f4\u64ad\u5df2\u7ed3\u675f",recive_coupon_comment_title:"\u53bb\u53d1\u8bc4\u8bba",mcms_moreVideo__:"\u66f4\u591a\u89c6\u9891",live_room_send_catalog_later:"\u7d22\u8981\u6d88\u606f\u5df2\u53d1\u51fa\uff0c\u8bf7\u7b49\u5f85\u5546\u5bb6\u56de\u590d","liveroom.text.product.more":"\u66f4\u591a","liveroom.text.backToLive":"\u56de\u5230\u76f4\u64ad","liveroom.text.view":"\u67e5\u770b",asc_live_catalog:"\u4ea7\u54c1\u76ee\u5f55","live.get_catalog":"\u4ea7\u54c1\u76ee\u5f55","live.text.share":"\u5206\u4eab","subscribed.detail":"\u5df2\u8ba2\u9605\uff0c\u76f4\u64ad\u5c06\u5728{{date}}\u5f00\u64ad\uff0c\u6211\u4eec\u5c06\u4e8e {{time}}\u63d0\u793a\u60a8\u51c6\u65f6\u89c2\u770b",asc_live_coupon_list_use1:"\u6211\u7684\u4f18\u60e0\u5238",asc_chat_now:"\u8054\u7cfb\u5546\u5bb6",mcms_buyer_live_yugao_fengkong_cancel:"\u672c\u573a\u76f4\u64ad\u6d89\u5acc\u5185\u5bb9\u8fdd\u89c4\uff0c\u5df2\u88ab\u53d6\u6d88","ive.enableVolume":"\u8c03\u9ad8\u97f3\u91cf",mcms_live4__:"\u5173\u6ce8",mcms_buyer_live_network_wrong:"\u4f60\u7684\u7f51\u7edc\u4e0d\u597d",revice_btn_text_already:"\u5df2\u9886\u53d6",live_room_collection_failed:"\u4f18\u60e0\u5238\u9886\u53d6\u5931\u8d25",mcms_live6__:"\u7559\u8a00\u4e2d\u5305\u542b\u975e\u6cd5\u5b57\u7b26",mcms_buyer_live_anchor_leave:"\u4e3b\u64ad\u6682\u65f6\u79bb\u5f00\uff0c\u8bf7\u7a0d\u7b49","live.manage.saleExplain":"\u6ce8\uff1a\u672a\u663e\u793a\u7684\u573a\u6b21\uff0c\u9700\u8981\u5728\u6d3b\u52a8\u5ba1\u6838\u901a\u8fc7<span>48\u5c0f\u65f6</span>\u540e\uff0c\u624d\u53ef\u5728\u6b64\u5217\u8868\u4e2d\u663e\u793a",mcms_live3__:"\u53d1\u5e03\u6210\u529f",mcms_live1__:"\u8ddf\u4e3b\u64ad\u804a\u70b9\u4ec0\u4e48\uff1f",asc_live_coupon_list_use3:"\u6301\u7eed\u4e2d",asc_live_coupon_get_coupon:"\u9886\u5238",mcms_buyer_live_living_end:"\u672c\u573a\u76f4\u64ad\u5df2\u7ed3\u675f",asc_live_coupon_to_use:"\u7acb\u5373\u4f7f\u7528",mcms_live8__:"\u4e3b\u64ad\u5c1a\u672a\u5f00\u59cb\u76f4\u64ad\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85","liverank.live_rank_time_desc":"\u7edf\u8ba1\u5f00\u59cb\u65f6\u95f4: {{time}}",recive_coupon_common_title_success:"Coupons claimed",reminder_sucess:"\u8ba2\u9605\u6210\u529f\u3002\u6211\u4eec\u5c06\u5728\u76f4\u64ad\u5f00\u59cb\u65f6\u63d0\u9192\u4f60",recive_coupon_follow_success_title:"\u5df2\u5173\u6ce8",live_pc_network_slot:"\u4f60\u7684\u7f51\u7edc\u4e0d\u592a\u987a\u7545\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u60c5\u51b5","liveroom.text.play_failed":"\u76ee\u524d\u64ad\u653e\u5668\u5f02\u5e38\uff0c\u8bf7\u60a8\u7a0d\u540e\u91cd\u8bd5","live.product_box_empty_text":"\u5217\u8868\u4e3a\u7a7a\uff0c\u8bf7\u548c\u4e3b\u64ad\u6c9f\u901a\u3002",live_have_already_sent:"\u5df2\u8bf7\u6c42",asc_live_coupon_list_issueing_title:"\u6b63\u5728\u53d1\u653e\u7684\u5238","liveroom.text.getapp":"\u4e0b\u8f7dAPP",mcms_buyer_live_yugao_timeout_end:"\u672c\u573a\u76f4\u64ad\u8d85\u65f6\u672a\u64ad","live.checkCatalog":"\u4ea7\u54c1\u76ee\u5f55",mcms_live10__:"{user_name}\u6b63\u5728\u4e0b\u5355","liveroom.text.commentplaceholder":"\u8054\u7cfb\u4e3b\u64ad",mcms_live7__:"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5",asc_live_coupon_list_use5:"{{time}}\u540e\u53ef\u9886\u5238",already_recive_coupon:"Coupons claimed","live.continue_in_app":"\u5728Alibaba.com\u4e0a\u7ee7\u7eed\u89c2\u770b",live_room_buyer_send_catalog_success:"\u7d22\u8981\u4ea7\u54c1\u76ee\u5f55\u6d88\u606f\u5df2\u53d1\u51fa","liveroom.title.replay":"\u7cbe\u5f69\u56de\u653e",mcms_live13__:"\u76f4\u64ad\u5df2\u7ed3\u675f\uff0c\u611f\u8c22\u6536\u770b\u3002","live.unfollowed_text":"\u53d6\u6d88\u5173\u6ce8","liveroom.productslist":"\u5546\u54c1","liveroom.text.explaining":"\u6f14\u793a",mcms_buyer_live_replay_delete:"\u672c\u573a\u76f4\u64ad\u5df2\u88ab\u5546\u5bb6\u5220\u9664\uff0c\u65e0\u6cd5\u89c2\u770b",mcms_live2__:"\u60a8\u5df2\u7ecf\u88ab\u7981\u8a00",mcms_live11__:"{user_name}\u6b63\u5728\u53d1\u8d77\u8be2\u76d8",coupon_second:"\u79d2",live_room_send_catalog_success:"\u7d22\u8981\u4ea7\u54c1\u76ee\u5f55\u6d88\u606f\u5df2\u53d1\u51fa",asc_player_refresh:"\u6709\u70b9\u5c0f\u5361\uff0c \u8bf7\u91cd\u8bd5\u3002",subscribe:"\u5f00\u64ad\u63d0\u9192","liverank.history_rank_text":"\u5386\u53f2\u699c\u5355","subscribe.success":"\u8ba2\u9605\u6210\u529f",mcms_buyer_live_streambreake:"\u76f4\u64ad\u6709\u70b9\u5c0f\u5361\uff0c\u8bf7\u7a0d\u7b49","live.living":"\u76f4\u64ad\u4e2d",coupon_cutdown_text:"\u9650\u65f6","liveroom.watch_now":"\u73b0\u5728\u89c2\u770b","live.cancel_app":"\u53d6\u6d88",mcms_live9__:"\u76f4\u64ad\u5012\u8ba1\u65f6",recive_coupon_common_title:"\u9886\u53d6\u6298\u6263\u5238",mcms_live5__:"\u5237\u65b0",mcms_live14__:"\u6f14\u793a\u8005\u5df2\u6682\u65f6\u79bb\u5f00\u3002\u665a\u70b9\u56de\u6765\u7ee7\u7eed\u770b",mcms_buyer_live_yugao_delete_cancel:"\u672c\u573a\u76f4\u64ad\u5df2\u88ab\u5546\u5bb6\u5220\u9664\uff0c\u76f4\u64ad\u5df2\u53d6\u6d88",mcms_buyer_live_living_end_watch_replay:"\u89c2\u770b\u56de\u653e","liveroom.text.directory":"\u8282\u76ee\u7c7b\u5bb9"}},function(e,t,n){"use strict";var r=["values","sort","some","slice","reverse","reduceRight","reduce","map","keys","lastIndexOf","join","indexOf","includes","forEach","find","findIndex","copyWithin","filter","entries","every","fill"],i=function(e){var t=e.prototype;r.forEach((function(e){t[e]||(t[e]=Array.prototype[e])}))};"undefined"!=typeof Int8Array&&i(Int8Array),"undefined"!=typeof Uint8Array&&i(Uint8Array),"undefined"!=typeof Uint8ClampedArray&&i(Uint8ClampedArray),"undefined"!=typeof Int16Array&&i(Int16Array),"undefined"!=typeof Uint16Array&&i(Uint16Array),"undefined"!=typeof Int32Array&&i(Int32Array),"undefined"!=typeof Uint32Array&&i(Uint32Array),"undefined"!=typeof Float32Array&&i(Float32Array),"undefined"!=typeof Float64Array&&i(Float64Array)},function(e,t,n){"use strict";n.r(t),n.d(t,"ELoggerLevel",(function(){return r})),n.d(t,"ELoggerMode",(function(){return u})),n.d(t,"Logger",(function(){return v})),n.d(t,"commonLogger",(function(){return m})),n.d(t,"loggerManager",(function(){return g}));var r,i=function(){},o=function(e){return e<10?"0"+e:e},a=function(e,t){void 0===t&&(t=!0);var n=Math.floor(e/1e3);return function(e,t){return void 0===t&&(t=!1),e===1/0?e:(r=Math.floor(e/60),r-=60*(n=Math.floor(r/60)),e=Math.floor(e-60*(60*n+r)),i=[],(t||n>0)&&i.push(o(n)),i.push(o(r)),i.push(o(e)),i.join(":"));var n,r,i}(n,t)+"."+Math.floor(1e3*(e-1e3*n))},s="undefined"!=typeof performance&&"function"==typeof performance.now;function c(){return s?performance.now():Date.now()}!function(e){e[e.TRACE=-1]="TRACE",e[e.DEBUG=0]="DEBUG",e[e.LOG=1]="LOG",e[e.INFO=2]="INFO",e[e.WARN=10]="WARN",e[e.ERROR=11]="ERROR",e[e.NONE=1e3]="NONE"}(r||(r={}));var u,d=["trace","debug","log","info","warn","error"];!function(e){e.PRINT="print",e.CACHE="cache"}(u||(u={}));var l=c(),p=2e3,f=[],h=[],_=0,v=function(){function e(e){this.mode=u.PRINT,this.level=r.INFO,this.trace=i,this.debug=i,this.log=i,this.info=i,this.warn=i,this.error=i,this.name=e,this._apply(),f.push(this)}var t=e.prototype;return t._apply=function(){var e=this;this.mode===u.CACHE?d.forEach((function(t){r[t.toUpperCase()]>=e.level?e[t]=function(){for(var n=c()-l,r="["+t+"]["+e.name+"]["+a(n,!0)+"]",i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];h.push({id:_++,level:e.level,name:e.name,timestamp:n,prefix:r,message:o.join(" ")}),h.length>p&&h.shift()}:e[t]=i})):this.mode===u.PRINT&&d.forEach((function(t){if(r[t.toUpperCase()]>=e.level){var n="["+t+"]["+e.name+"]";e[t]=console[t].bind(console,n)}else e[t]=i}))},t.setMode=function(e){this.mode=e,this._apply()},t.setLevel=function(e){this.level=e,this._apply()},t.reset=function(){var e=this;this.level=r.INFO,d.forEach((function(t){e[t]=i}))},e}();v.LogLevel=r;var m=new v("common"),g={setMode:function(e){f.forEach((function(t){return t.setMode(e)}))},setLevel:function(e){f.forEach((function(t){return t.setLevel(e)}))},setSize:function(e){p=e},getLogs:function(){return h},clear:function(){h=[]},destroy:function(){p=2e3,h=[],_=0,f.forEach((function(e){return e.reset()})),f=[m]}}},function(e,t){(function(t,n){e.exports=function(){var e={579:function(e){e.exports=t}},r={};function i(t){if(r[t])return r[t].exports;var n=r[t]={exports:{}},o=!0;try{e[t](n,n.exports,i),o=!1}finally{o&&delete r[t]}return n.exports}return i.ab=n+"/",i(579)}()}).call(this,{},"/")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=s(n(59)),a=s(n(29));function s(e){return e&&e.__esModule?e:{default:e}}var c=0,u=0;var d=function(e,t,n){var s=t&&n||0,d=t||new Array(16),l=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:i;if(null==l||null==p){var f=e.random||(e.rng||o.default)();null==l&&(l=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=i=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:Date.now(),_=void 0!==e.nsecs?e.nsecs:u+1,v=h-c+(_-u)/1e4;if(v<0&&void 0===e.clockseq&&(p=p+1&16383),(v<0||h>c)&&void 0===e.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=h,u=_,i=p;var m=(1e4*(268435455&(h+=122192928e5))+_)%4294967296;d[s++]=m>>>24&255,d[s++]=m>>>16&255,d[s++]=m>>>8&255,d[s++]=255&m;var g=h/4294967296*1e4&268435455;d[s++]=g>>>8&255,d[s++]=255&g,d[s++]=g>>>24&15|16,d[s++]=g>>>16&255,d[s++]=p>>>8|128,d[s++]=255&p;for(var E=0;E<6;++E)d[s+E]=l[E];return t||(0,a.default)(d)};t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(60)),i=o(n(156));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v3",48,i.default);t.default=a},function(e,t,n){"use strict";function r(e){return 14+(e+64>>>9<<4)+1}function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,r,o,a){return i((s=i(i(t,e),i(r,a)))<<(c=o)|s>>>32-c,n);var s,c}function a(e,t,n,r,i,a,s){return o(t&n|~t&r,e,t,i,a,s)}function s(e,t,n,r,i,a,s){return o(t&r|n&~r,e,t,i,a,s)}function c(e,t,n,r,i,a,s){return o(t^n^r,e,t,i,a,s)}function u(e,t,n,r,i,a,s){return o(n^(t|~r),e,t,i,a,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r=0;r<n;r+=8){var i=e[r>>5]>>>r%32&255,o=parseInt("0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;for(var n=1732584193,o=-271733879,d=-1732584194,l=271733878,p=0;p<e.length;p+=16){var f=n,h=o,_=d,v=l;n=a(n,o,d,l,e[p],7,-680876936),l=a(l,n,o,d,e[p+1],12,-389564586),d=a(d,l,n,o,e[p+2],17,606105819),o=a(o,d,l,n,e[p+3],22,-1044525330),n=a(n,o,d,l,e[p+4],7,-176418897),l=a(l,n,o,d,e[p+5],12,1200080426),d=a(d,l,n,o,e[p+6],17,-1473231341),o=a(o,d,l,n,e[p+7],22,-45705983),n=a(n,o,d,l,e[p+8],7,1770035416),l=a(l,n,o,d,e[p+9],12,-1958414417),d=a(d,l,n,o,e[p+10],17,-42063),o=a(o,d,l,n,e[p+11],22,-1990404162),n=a(n,o,d,l,e[p+12],7,1804603682),l=a(l,n,o,d,e[p+13],12,-40341101),d=a(d,l,n,o,e[p+14],17,-1502002290),o=a(o,d,l,n,e[p+15],22,1236535329),n=s(n,o,d,l,e[p+1],5,-165796510),l=s(l,n,o,d,e[p+6],9,-1069501632),d=s(d,l,n,o,e[p+11],14,643717713),o=s(o,d,l,n,e[p],20,-373897302),n=s(n,o,d,l,e[p+5],5,-701558691),l=s(l,n,o,d,e[p+10],9,38016083),d=s(d,l,n,o,e[p+15],14,-660478335),o=s(o,d,l,n,e[p+4],20,-405537848),n=s(n,o,d,l,e[p+9],5,568446438),l=s(l,n,o,d,e[p+14],9,-1019803690),d=s(d,l,n,o,e[p+3],14,-187363961),o=s(o,d,l,n,e[p+8],20,1163531501),n=s(n,o,d,l,e[p+13],5,-1444681467),l=s(l,n,o,d,e[p+2],9,-51403784),d=s(d,l,n,o,e[p+7],14,1735328473),o=s(o,d,l,n,e[p+12],20,-1926607734),n=c(n,o,d,l,e[p+5],4,-378558),l=c(l,n,o,d,e[p+8],11,-2022574463),d=c(d,l,n,o,e[p+11],16,1839030562),o=c(o,d,l,n,e[p+14],23,-35309556),n=c(n,o,d,l,e[p+1],4,-1530992060),l=c(l,n,o,d,e[p+4],11,1272893353),d=c(d,l,n,o,e[p+7],16,-155497632),o=c(o,d,l,n,e[p+10],23,-1094730640),n=c(n,o,d,l,e[p+13],4,681279174),l=c(l,n,o,d,e[p],11,-358537222),d=c(d,l,n,o,e[p+3],16,-722521979),o=c(o,d,l,n,e[p+6],23,76029189),n=c(n,o,d,l,e[p+9],4,-640364487),l=c(l,n,o,d,e[p+12],11,-421815835),d=c(d,l,n,o,e[p+15],16,530742520),o=c(o,d,l,n,e[p+2],23,-995338651),n=u(n,o,d,l,e[p],6,-198630844),l=u(l,n,o,d,e[p+7],10,1126891415),d=u(d,l,n,o,e[p+14],15,-1416354905),o=u(o,d,l,n,e[p+5],21,-57434055),n=u(n,o,d,l,e[p+12],6,1700485571),l=u(l,n,o,d,e[p+3],10,-1894986606),d=u(d,l,n,o,e[p+10],15,-1051523),o=u(o,d,l,n,e[p+1],21,-2054922799),n=u(n,o,d,l,e[p+8],6,1873313359),l=u(l,n,o,d,e[p+15],10,-30611744),d=u(d,l,n,o,e[p+6],15,-1560198380),o=u(o,d,l,n,e[p+13],21,1309151649),n=u(n,o,d,l,e[p+4],6,-145523070),l=u(l,n,o,d,e[p+11],10,-1120210379),d=u(d,l,n,o,e[p+2],15,718787259),o=u(o,d,l,n,e[p+9],21,-343485551),n=i(n,f),o=i(o,h),d=i(d,_),l=i(l,v)}return[n,o,d,l]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(r(t)),i=0;i<t;i+=8)n[i>>5]|=(255&e[i/8])<<i%32;return n}(e),8*e.length))};t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(59)),i=o(n(29));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,n){var o=(e=e||{}).random||(e.rng||r.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=o[a];return t}return(0,i.default)(o)};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(60)),i=o(n(159));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v5",80,i.default);t.default=a},function(e,t,n){"use strict";function r(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var o=unescape(encodeURIComponent(e));e=[];for(var a=0;a<o.length;++a)e.push(o.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,c=Math.ceil(s/16),u=new Array(c),d=0;d<c;++d){for(var l=new Uint32Array(16),p=0;p<16;++p)l[p]=e[64*d+4*p]<<24|e[64*d+4*p+1]<<16|e[64*d+4*p+2]<<8|e[64*d+4*p+3];u[d]=l}u[c-1][14]=8*(e.length-1)/Math.pow(2,32),u[c-1][14]=Math.floor(u[c-1][14]),u[c-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<c;++f){for(var h=new Uint32Array(80),_=0;_<16;++_)h[_]=u[f][_];for(var v=16;v<80;++v)h[v]=i(h[v-3]^h[v-8]^h[v-14]^h[v-16],1);for(var m=n[0],g=n[1],E=n[2],y=n[3],b=n[4],S=0;S<80;++S){var T=Math.floor(S/20),w=i(m,5)+r(T,g,E,y)+b+t[T]+h[S]>>>0;b=y,y=E,E=i(g,30)>>>0,g=m,m=w}n[0]=n[0]+m>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+E>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(30))&&r.__esModule?r:{default:r};var o=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)};t.default=o},function(e,t,n){(function(t){e.exports=function(){var e={936:function(){"use strict";var e=["values","sort","some","slice","reverse","reduceRight","reduce","map","keys","lastIndexOf","join","indexOf","includes","forEach","find","findIndex","copyWithin","filter","entries","every","fill"],t=function(t){var n=t.prototype;e.forEach((function(e){n[e]||(n[e]=Array.prototype[e])}))};"undefined"!=typeof Int8Array&&t(Int8Array),"undefined"!=typeof Uint8Array&&t(Uint8Array),"undefined"!=typeof Uint8ClampedArray&&t(Uint8ClampedArray),"undefined"!=typeof Int16Array&&t(Int16Array),"undefined"!=typeof Uint16Array&&t(Uint16Array),"undefined"!=typeof Int32Array&&t(Int32Array),"undefined"!=typeof Uint32Array&&t(Uint32Array),"undefined"!=typeof Float32Array&&t(Float32Array),"undefined"!=typeof Float64Array&&t(Float64Array)},271:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,i),!0;case 5:return d.fn.call(d.context,t,r,i,o),!0;case 6:return d.fn.call(d.context,t,r,i,o,a),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];d.fn.apply(d.context,c)}else{var p,f=d.length;for(u=0;u<f;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),l){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,r);break;case 4:d[u].fn.call(d[u].context,t,r,i);break;default:if(!c)for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];d[u].fn.apply(d[u].context,c)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,u=[],d=s.length;c<d;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},568:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",l="[object Map]",p="[object Number]",f="[object Object]",h="[object Promise]",_="[object RegExp]",v="[object Set]",m="[object String]",g="[object WeakMap]",E="[object ArrayBuffer]",y="[object DataView]",b=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,T={};T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T[o]=T[a]=T[E]=T[s]=T[y]=T[c]=T[u]=T[d]=T[l]=T[p]=T[f]=T[_]=T[v]=T[m]=T[g]=!1;var w="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,R="object"==typeof self&&self&&self.Object===Object&&self,C=w||R||Function("return this")(),O=t&&!t.nodeType&&t,A=O&&e&&!e.nodeType&&e,I=A&&A.exports===O,k=I&&w.process,N=function(){try{return k&&k.binding&&k.binding("util")}catch(e){}}(),P=N&&N.isTypedArray;function D(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function x(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function L(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var M,U,j,V=Array.prototype,B=Function.prototype,F=Object.prototype,W=C["__core-js_shared__"],G=B.toString,H=F.hasOwnProperty,z=(M=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",K=F.toString,Y=RegExp("^"+G.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=I?C.Buffer:void 0,J=C.Symbol,X=C.Uint8Array,Q=F.propertyIsEnumerable,Z=V.splice,$=J?J.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=q?q.isBuffer:void 0,ne=(U=Object.keys,j=Object,function(e){return U(j(e))}),re=Ae(C,"DataView"),ie=Ae(C,"Map"),oe=Ae(C,"Promise"),ae=Ae(C,"Set"),se=Ae(C,"WeakMap"),ce=Ae(Object,"create"),ue=Pe(re),de=Pe(ie),le=Pe(oe),pe=Pe(ae),fe=Pe(se),he=J?J.prototype:void 0,_e=he?he.valueOf:void 0;function ve(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ee(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ge;++t<n;)this.add(e[t])}function ye(e){var t=this.__data__=new me(e);this.size=t.size}function be(e,t){for(var n=e.length;n--;)if(De(e[n][0],t))return n;return-1}function Se(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":$&&$ in Object(e)?function(e){var t=H.call(e,$),n=e[$];try{e[$]=void 0;var r=!0}catch(e){}var i=K.call(e);return r&&(t?e[$]=n:delete e[$]),i}(e):function(e){return K.call(e)}(e)}function Te(e){return Be(e)&&Se(e)==o}function we(e,t,n,r,i){return e===t||(null==e||null==t||!Be(e)&&!Be(t)?e!=e&&t!=t:function(e,t,n,r,i,d){var h=Le(e),g=Le(t),b=h?a:ke(e),S=g?a:ke(t),T=(b=b==o?f:b)==f,w=(S=S==o?f:S)==f,R=b==S;if(R&&Me(e)){if(!Me(t))return!1;h=!0,T=!1}if(R&&!T)return d||(d=new ye),h||Fe(e)?Re(e,t,n,r,i,d):function(e,t,n,r,i,o,a){switch(n){case y:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!o(new X(e),new X(t)));case s:case c:case p:return De(+e,+t);case u:return e.name==t.name&&e.message==t.message;case _:case m:return e==t+"";case l:var d=x;case v:var f=1&r;if(d||(d=L),e.size!=t.size&&!f)return!1;var h=a.get(e);if(h)return h==t;r|=2,a.set(e,t);var g=Re(d(e),d(t),r,i,o,a);return a.delete(e),g;case"[object Symbol]":if(_e)return _e.call(e)==_e.call(t)}return!1}(e,t,b,n,r,i,d);if(!(1&n)){var C=T&&H.call(e,"__wrapped__"),O=w&&H.call(t,"__wrapped__");if(C||O){var A=C?e.value():e,I=O?t.value():t;return d||(d=new ye),i(A,I,n,r,d)}}return!!R&&(d||(d=new ye),function(e,t,n,r,i,o){var a=1&n,s=Ce(e),c=s.length;if(c!=Ce(t).length&&!a)return!1;for(var u=c;u--;){var d=s[u];if(!(a?d in t:H.call(t,d)))return!1}var l=o.get(e);if(l&&o.get(t))return l==t;var p=!0;o.set(e,t),o.set(t,e);for(var f=a;++u<c;){var h=e[d=s[u]],_=t[d];if(r)var v=a?r(_,h,d,t,e,o):r(h,_,d,e,t,o);if(!(void 0===v?h===_||i(h,_,n,r,o):v)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var m=e.constructor,g=t.constructor;m==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,d))}(e,t,n,r,we,i))}function Re(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var d=-1,l=!0,p=2&n?new Ee:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],h=t[d];if(r)var _=a?r(h,f,d,t,e,o):r(f,h,d,e,t,o);if(void 0!==_){if(_)continue;l=!1;break}if(p){if(!D(t,(function(e,t){if(a=t,!p.has(a)&&(f===e||i(f,e,n,r,o)))return p.push(t);var a}))){l=!1;break}}else if(f!==h&&!i(f,h,n,r,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function Ce(e){return function(e,t,n){var r=t(e);return Le(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,We,Ie)}function Oe(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Ae(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ve(e)||function(e){return!!z&&z in e}(e))&&(Ue(e)?Y:b).test(Pe(e))}(n)?n:void 0}ve.prototype.clear=function(){this.__data__=ce?ce(null):{},this.size=0},ve.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ve.prototype.get=function(e){var t=this.__data__;if(ce){var n=t[e];return n===r?void 0:n}return H.call(t,e)?t[e]:void 0},ve.prototype.has=function(e){var t=this.__data__;return ce?void 0!==t[e]:H.call(t,e)},ve.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ce&&void 0===t?r:t,this},me.prototype.clear=function(){this.__data__=[],this.size=0},me.prototype.delete=function(e){var t=this.__data__,n=be(t,e);return!(n<0||(n==t.length-1?t.pop():Z.call(t,n,1),--this.size,0))},me.prototype.get=function(e){var t=this.__data__,n=be(t,e);return n<0?void 0:t[n][1]},me.prototype.has=function(e){return be(this.__data__,e)>-1},me.prototype.set=function(e,t){var n=this.__data__,r=be(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ge.prototype.clear=function(){this.size=0,this.__data__={hash:new ve,map:new(ie||me),string:new ve}},ge.prototype.delete=function(e){var t=Oe(this,e).delete(e);return this.size-=t?1:0,t},ge.prototype.get=function(e){return Oe(this,e).get(e)},ge.prototype.has=function(e){return Oe(this,e).has(e)},ge.prototype.set=function(e,t){var n=Oe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ee.prototype.add=Ee.prototype.push=function(e){return this.__data__.set(e,r),this},Ee.prototype.has=function(e){return this.__data__.has(e)},ye.prototype.clear=function(){this.__data__=new me,this.size=0},ye.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ye.prototype.get=function(e){return this.__data__.get(e)},ye.prototype.has=function(e){return this.__data__.has(e)},ye.prototype.set=function(e,t){var n=this.__data__;if(n instanceof me){var r=n.__data__;if(!ie||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ge(r)}return n.set(e,t),this.size=n.size,this};var Ie=ee?function(e){return null==e?[]:(e=Object(e),function(t){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];s=a,Q.call(e,s)&&(o[i++]=a)}var s;return o}(ee(e)))}:function(){return[]},ke=Se;function Ne(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&e<t}function Pe(e){if(null!=e){try{return G.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function De(e,t){return e===t||e!=e&&t!=t}(re&&ke(new re(new ArrayBuffer(1)))!=y||ie&&ke(new ie)!=l||oe&&ke(oe.resolve())!=h||ae&&ke(new ae)!=v||se&&ke(new se)!=g)&&(ke=function(e){var t=Se(e),n=t==f?e.constructor:void 0,r=n?Pe(n):"";if(r)switch(r){case ue:return y;case de:return l;case le:return h;case pe:return v;case fe:return g}return t});var xe=Te(function(){return arguments}())?Te:function(e){return Be(e)&&H.call(e,"callee")&&!Q.call(e,"callee")},Le=Array.isArray,Me=te||function(){return!1};function Ue(e){if(!Ve(e))return!1;var t=Se(e);return t==d||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function je(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Ve(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Be(e){return null!=e&&"object"==typeof e}var Fe=P?function(e){return function(t){return e(t)}}(P):function(e){return Be(e)&&je(e.length)&&!!T[Se(e)]};function We(e){return null!=(t=e)&&je(t.length)&&!Ue(t)?function(e,t){var n=Le(e),r=!n&&xe(e),i=!n&&!r&&Me(e),o=!n&&!r&&!i&&Fe(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var u in e)!H.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ne(u,c))||s.push(u);return s}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||F))return ne(e);var t,n,r=[];for(var i in Object(e))H.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e);var t}e.exports=function(e,t){return we(e,t)}},458:function(e){"use strict";e.exports=function(e,t,n,r){var i=self||window;try{try{var o;try{o=new i.Blob([e])}catch(t){(o=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),o=o.getBlob()}var a=i.URL||i.webkitURL,s=a.createObjectURL(o),c=new i[t](s,n);return a.revokeObjectURL(s),c}catch(r){return new i[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new i[t](r,n)}}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={id:t,loaded:!1,exports:{}};return e[t](o,o.exports,r),o.loaded=!0,o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var i={};return function(){"use strict";r.r(i),r.d(i,{AudioCompatDecoder:function(){return Ae},AudioHardwareDecoder:function(){return ae},AudioSoftwareDecoder:function(){return Se},EAVLogLevel:function(){return a},ECodecId:function(){return o},EMainMsgType:function(){return n},EWorkerMsgType:function(){return e},VideoCompatDecoder:function(){return ke},VideoHardwareDecoder:function(){return ce},VideoSoftwareDecoder:function(){return Re},env:function(){return h}});var e,n,o,a,s=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},c=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},u=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},d=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},l=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,p=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]],h=("undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}:"undefined"!=typeof navigator?function(e){var t=function(e){return""!==e&&p.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]}),!1)}(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new d;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=s(s([],i,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-i.length),!0)):i=[];var o=i.join("."),a=function(e){for(var t=0,n=f.length;t<n;t++){var r=f[t],i=r[0];if(r[1].exec(e))return i}return null}(e),h=l.exec(e);return h&&h[1]?new u(n,o,a,h[1]):new c(n,o,a)}(navigator.userAgent):void 0!==t&&t.version?new function(e){this.version=e,this.type="node",this.name="node",this.os=t.platform}(t.version.slice(1)):null)||{};!function(e){e[e.INITED=0]="INITED",e[e.DECODED=1]="DECODED",e[e.FLUSHED=2]="FLUSHED",e[e.CLEARED=3]="CLEARED",e[e.OUTPUT=4]="OUTPUT",e[e.ERROR=5]="ERROR"}(e||(e={})),function(e){e[e.INIT=0]="INIT",e[e.DECODE=1]="DECODE",e[e.FLUSH=2]="FLUSH",e[e.CLEAR=3]="CLEAR"}(n||(n={})),function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.FDK_AAC=0]="FDK_AAC",e[e.H264=27]="H264",e[e.H265=173]="H265",e[e.HEVC=173]="HEVC",e[e.AAC=86018]="AAC"}(o||(o={})),function(e){e[e.FATAL=8]="FATAL",e[e.ERROR=16]="ERROR",e[e.WARNING=24]="WARNING",e[e.INFO=32]="INFO",e[e.VERBOSE=40]="VERBOSE",e[e.DEBUG=48]="DEBUG",e[e.TRACE=56]="TRACE"}(a||(a={}));var _=function(){};function v(e,t){for(var n=e.toString().split("."),r=t.toString().split("."),i=0,o=Math.min(n.length,r.length),a=void 0,s=void 0;i<o;i++){if((a=parseInt(n[i],10)||0)<(s=parseInt(r[i],10)||0))return-1;if(a>s)return 1}return 0}var m,g,E,y,b,S,T,w=function(){function e(e){var t=this;this.decodeQueueSize=0,this.handleError=function(e){t._error(new DOMException(e.message,"HardwareVideoDecoder"))},this._output=e.output||_,this._error=e.error||_}return Object.defineProperty(e.prototype,"state",{get:function(){return this.instance.state},enumerable:!1,configurable:!0}),e.prototype.flush=function(){return e=this,n=function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){return"configured"!==this.state?[2]:[2,this.instance.flush().catch((function(e){return console.warn("[flush warning]",e.message)}))]}))},new((t=void 0)||(t=Promise))((function(r,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,a)}s((n=n.apply(e,[])).next())}));var e,t,n},e.prototype.reset=function(){this.decodeQueueSize=0,this.instance.reset()},e.prototype.close=function(){this.instance.close()},e}();r(936),function(e){e.VIDE="vide",e.SOUN="soun"}(g||(g={})),function(e){e.FLV="flv",e.MP4="mp4",e.HLS="hls",e.AVI="avi",e.MPEGTS="mpegts",e.UNKNOWN="unknown"}(E||(E={})),function(e){e.UNKNOWN="unknown",e.VIDEO="video",e.AUDIO="audio"}(y||(y={})),(m={})[g.VIDE]=y.VIDEO,m[g.SOUN]=y.AUDIO,function(e){e[e.DEGRADATION_PRIORITY_MASK=65535]="DEGRADATION_PRIORITY_MASK",e[e.IS_NON_SYNC=65536]="IS_NON_SYNC",e[e.PADDING_MASK=917504]="PADDING_MASK",e[e.REDUNDANCY_MASK=3145728]="REDUNDANCY_MASK",e[e.DEPENDED_MASK=12582912]="DEPENDED_MASK",e[e.DEPENDS_MASK=50331648]="DEPENDS_MASK",e[e.DEPENDS_NO=33554432]="DEPENDS_NO",e[e.DEPENDS_YES=16777216]="DEPENDS_YES"}(b||(b={})),function(e){e[e.ABORTED=1]="ABORTED",e[e.NETWORK=2]="NETWORK",e[e.DECODE=3]="DECODE",e[e.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",e[e.PARSER=1001]="PARSER",e[e.COROUTINE=10001]="COROUTINE",e[e.WEBGL_NOT_SUPPORTED=10002]="WEBGL_NOT_SUPPORTED",e[e.BUFFERING=10004]="BUFFERING",e[e.RENDERER=10005]="RENDERER"}(S||(S={})),function(e){e[e.NONE=-16]="NONE",e[e.DEFAULT=0]="DEFAULT",e[e.NONREF=8]="NONREF",e[e.BIDIR=16]="BIDIR",e[e.NONINTRA=24]="NONINTRA",e[e.NONKEY=32]="NONKEY",e[e.ALL=48]="ALL"}(T||(T={})),Object.freeze({formatType:E.UNKNOWN,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]}),Object.freeze({type:y.VIDEO,id:0,baseDTS:0,basePTS:0,timescale:1e3,codec:"",width:0,height:0,vps:[],pps:[],sps:[],pixelRatio:[]}),Object.freeze({type:y.AUDIO,id:1,baseDTS:0,basePTS:0,timescale:1e3,codec:"",audioObjectType:2,sampleRate:0,sampleSize:16,channelCount:0}),function(){function e(e,t){this.num=e,this.len=t,this.offset=0}e.fromByte=function(t,n){return new e(t.read(n),n<<3)},e.prototype.skip=function(e){this.offset+=e},e.prototype.read=function(e){var t=this.len-this.offset-e;if(t>=0){for(var n=0,r=0;r<e;r++)n+=1<<r;return this.offset+=e,this.num>>>t&n}return console.warn("bit \u8bfb\u53d6\u4f4d\u6570\u8d85\u8fc7\u9650\u5236"),0}}();var R,C=function(){function e(e,t,n){this.dv=new DataView(e),this.start=this.offset=t||this.dv.byteOffset,this.end=n?this.start+n:this.dv.byteLength}return e.fromUint8=function(t){return new e(t.buffer,t.byteOffset,t.byteLength)},e.concatUint8s=function(e){return this.concatUint8.apply(this,e)},e.concatUint8=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length<=1)return e[0]||new Uint8Array(0);var n=new Uint8Array(e.reduce((function(e,t){return e+t.byteLength}),0)),r=0;return e.forEach((function(e){n.set(e,r),r+=e.byteLength})),n},e.concat=function(t,n){return e.concatUint8(new Uint8Array(t),new Uint8Array(n)).buffer},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.dv.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unreadLength",{get:function(){return Math.max(this.end-this.offset,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),e.prototype.readFloat=function(e){var t=0;switch(e){case 4:t=this.dv.getFloat32(this.offset);break;case 8:t=this.dv.getFloat64(this.offset);break;default:throw new Error("not supported for read float byte with "+e)}return this.offset+=e,t},e.prototype.back=function(e){this.offset-=e},e.prototype.skip=function(e){this.offset+=e},e.prototype.readInt=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getInt8(t);case 2:return this.dv.getInt16(t);case 4:return this.dv.getInt32(t);default:throw new Error("not supported for read byte with "+e)}},e.prototype.readString=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.dv.getUint8(this.offset)),this.offset++;return t},e.prototype.readLE=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t,!0);case 3:return this.dv.getUint16(t,!0)+this.dv.getUint8(t+2)<<16;case 4:return this.dv.getUint32(t,!0);default:return this.read(e-4)+this.dv.getUint32(t,!0)*Math.pow(256,e-4)}},e.prototype.read=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t);case 3:return(this.dv.getUint16(t)<<8)+this.dv.getUint8(t+2);case 4:return this.dv.getUint32(t);default:return this.back(e-4),this.read(e-4)+this.dv.getUint32(t)*Math.pow(256,e-4)}},e.prototype.writeInt=function(e,t){var n=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setInt8(n,t);case 2:return this.dv.setInt16(n,t);case 3:return this.dv.setInt8(n,t>>16),this.dv.setInt16(n+1,65535&t);case 4:return this.dv.setInt32(n,t);default:throw new Error("Byte write is not supported, byteLength:"+e)}},e.prototype.write=function(e,t){var n=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setUint8(n,t);case 2:return this.dv.setUint16(n,t);case 3:return this.dv.setUint8(n,t>>>16),this.dv.setUint16(n+1,65535&t);case 4:return this.dv.setUint32(n,t);default:throw new Error("Byte write is not supported, byteLength"+e)}},e.prototype.readToUint8=function(e){var t=new Uint8Array(this.dv.buffer,this.offset,e||this.unreadLength);return this.offset+=t.byteLength,t},e.prototype.readToBuffer=function(e){var t;return t=this.offset||e?this.dv.buffer.slice(this.offset,e?this.offset+e:void 0):this.dv.buffer,this.offset+=t.byteLength,t},e.prototype.clone=function(){return new e(this.dv.buffer,this.offset,this.end-this.offset)},e}(),O=function(){},A=function(e){return e<10?"0"+e:e},I="undefined"!=typeof performance&&"function"==typeof performance.now;function k(){return I?performance.now():Date.now()}!function(e){e[e.TRACE=-1]="TRACE",e[e.DEBUG=0]="DEBUG",e[e.LOG=1]="LOG",e[e.INFO=2]="INFO",e[e.WARN=10]="WARN",e[e.ERROR=11]="ERROR",e[e.NONE=1e3]="NONE"}(R||(R={}));var N,P=["trace","debug","log","info","warn","error"];!function(e){e.PRINT="print",e.CACHE="cache"}(N||(N={}));var D=k(),x=[],L=[],M=0,U=function(){function e(e){this.mode=N.PRINT,this.level=R.INFO,this.trace=O,this.debug=O,this.log=O,this.info=O,this.warn=O,this.error=O,this.name=e,this._apply(),x.push(this)}var t=e.prototype;return t._apply=function(){var e=this;this.mode===N.CACHE?P.forEach((function(t){R[t.toUpperCase()]>=e.level?e[t]=function(){for(var n=k()-D,r="["+t+"]["+e.name+"]["+function(e,t){void 0===t&&(t=!0);var n=Math.floor(e/1e3);return function(e,t){return void 0===t&&(t=!1),e===1/0?e:(r=Math.floor(e/60),r-=60*(n=Math.floor(r/60)),e=Math.floor(e-60*(60*n+r)),i=[],(t||n>0)&&i.push(A(n)),i.push(A(r)),i.push(A(e)),i.join(":"));var n,r,i}(n,t)+"."+Math.floor(1e3*(e-1e3*n))}(n,!0)+"]",i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];L.push({id:M++,level:e.level,name:e.name,timestamp:n,prefix:r,message:o.join(" ")}),L.length>2e3&&L.shift()}:e[t]=O})):this.mode===N.PRINT&&P.forEach((function(t){if(R[t.toUpperCase()]>=e.level){var n="["+t+"]["+e.name+"]";e[t]=console[t].bind(console,n)}else e[t]=O}))},t.setMode=function(e){this.mode=e,this._apply()},t.setLevel=function(e){this.level=e,this._apply()},t.reset=function(){var e=this;this.level=R.INFO,P.forEach((function(t){e[t]=O}))},e}();U.LogLevel=R;var j,V,B=new U("format"),F=r(271),W=(j=function(e,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e[e.IDLE=0]="IDLE",e[e.LOADING=1]="LOADING",e[e.SUSPENDED=2]="SUSPENDED",e[e.ERROR=3]="ERROR"}(V||(V={}));var G,H=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.timeout=15e3,n.total=1/0,n.offset=0,n.status=V.IDLE,n.url="",n._handleError=function(e){"AbortError"!==e.name&&(n._changeStatus(V.ERROR),n.emit("error",{code:S.NETWORK,message:e.message,origin:e}))},n.timeout=t.timeout||n.timeout,n}return W(t,e),Object.defineProperty(t.prototype,"eof",{get:function(){return this.offset===this.total},enumerable:!1,configurable:!0}),t.prototype._changeStatus=function(e){this.status!==e&&(B.log("loader status changed: ".concat(V[this.status]," -> ").concat(V[e])),this.status=e)},t.prototype.jump=function(e){this.offset=e},t.prototype.load=function(e,t,n){return this.reset(),this.url=e,this.loadRange(t,n)},t.prototype.resume=function(){return this.loadRange(this.offset)},t.prototype.suspend=function(){var e=this.status;this._abort(),e===V.LOADING&&(this._changeStatus(V.SUSPENDED),this.emit("suspend"))},t.prototype.abort=function(){var e=this.status;this._abort(),e!==V.SUSPENDED&&e!==V.LOADING||this.emit("abort")},t.prototype.reset=function(){this.abort(),this.offset=0,this.total=1/0,this.url=""},t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},t}(F),z=(G=function(e,t){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}G(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),K=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Y=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controller=null,t.timer=-1,t._abort=function(){clearTimeout(t.timer),t.controller&&!t.controller.signal.aborted&&(B.info("fetch abort,",t.url),t.controller.abort(),t.controller=null),t._changeStatus(V.IDLE)},t.triggerTimeout=function(){t._abort(),t._handleError(new Error("Request timed out, please try again"))},t.handleCompleteBuffer=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),K(t,void 0,void 0,(function(){var t=this;return Y(this,(function(i){return[2,e.arrayBuffer?e.arrayBuffer().then((function(e){return t.total=e.byteLength,t.offset=Math.min(t.total,r),t.emit("progress",{offset:n,data:new Uint8Array(e).subarray(n,r)}),t.controller&&(t._changeStatus(V.IDLE),t.emit("loadend")),t.controller=null,!0})):Promise.reject(new Error("unsupport response.arraybuffer()"))]}))}))},t}return z(t,e),t.isSupported=function(){return"undefined"!=typeof AbortController&&"undefined"!=typeof ReadableStream},t.prototype.loadRange=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1/0),K(this,void 0,void 0,(function(){var n,r,i=this;return Y(this,(function(o){return!this.url||e>=this.total||this.status===V.LOADING||this.status===V.ERROR?[2,Promise.resolve(!1)]:(this.abort(),B.info("fetch load, from=".concat(e," to=").concat(t," url=").concat(this.url)),this._changeStatus(V.LOADING),this.emit("loadstart"),/^blob:/.test(this.url)?[2,fetch(this.url).then((function(n){return i.handleCompleteBuffer(n,e,t)}))]:(n=new Headers,(r=e>0||t<1/0)&&(t=Math.min(this.total-1,t),n.set("Range","bytes=".concat(e,"-").concat(t===1/0?"":t))),this.controller=new AbortController,this.timer=setTimeout(this.triggerTimeout,this.timeout),[2,fetch(this.url,{method:"GET",headers:n,signal:this.controller.signal}).then((function(n){if(clearTimeout(i.timer),n.status>=200&&n.status<300){if(i.offset=e,r){var o=n.headers.get("Content-Range")||"";i.total=Number(o.split("/")[1])||i.total}else i.total=Number(n.headers.get("Content-Length"))||i.total;if(n.body){var a=n.body.getReader();return function e(){return K(i,void 0,void 0,(function(){var t=this;return Y(this,(function(n){return[2,a.read().then((function(n){return n.done?(t.controller=null,t._changeStatus(V.IDLE),t.emit("loadend"),!0):(t.offset+=n.value.byteLength,t.emit("progress",{offset:t.offset-n.value.byteLength,data:n.value}),e())}))]}))}))}()}return i.handleCompleteBuffer(n,e,t)}throw new Error("Media stream data does not exist: ".concat(i.url))})).catch((function(e){return clearTimeout(i.timer),i._handleError(e),!1}))]))}))}))},t}(H);function J(e,t,n,r){n.forEach((function(n){e[r||"on"](n,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.unshift(n),t.emit.apply(t,e)}))}))}r(568);var X,Q,Z,$,ee=($=function(e,t){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}$(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.xhr=null,t._timer=-1,t._resolve=function(e){},t.triggerTimeout=function(){t._abort(),t._handleError(new Error("Request timed out, please try again"))},t}return ee(t,e),t.prototype._abort=function(){var e=this.xhr;e&&(e.onerror=null,e.onprogress=null,e.onloadend=null,e.onreadystatechange=null,e.abort(),this.xhr=null,this._resolve(!1)),this._changeStatus(V.IDLE)},t.prototype.loadRange=function(e,t){var n=this;return void 0===e&&(e=0),void 0===t&&(t=1/0),!this.url||e>=this.total||this.status===V.LOADING||this.status===V.ERROR?Promise.resolve(!1):(this.abort(),new Promise((function(r,i){n.xhr=new XMLHttpRequest,n._resolve=r;var o=n.xhr,a=e>0||t<1/0;o.open("GET",n.url),a&&o.setRequestHeader("Range","bytes=".concat(e,"-").concat(t===1/0?"":t)),o.onreadystatechange=function(){if(o.readyState===o.HEADERS_RECEIVED&&o.status>=200&&o.status<300)if(a){var e=o.getResponseHeader("Content-Range")||"";n.total=Number(e.split("/")[1])||n.total}else n.total=Number(o.getResponseHeader("Content-Length"))||n.total;o.readyState>=o.HEADERS_RECEIVED&&clearTimeout(n._timer)},n.offset=e;var s=0,c=function(e){var t,r=o.responseText,i=r.length,c=s,u=n.offset,d=i-c;d>0&&(n.offset+=d),!a&&e&&n.total===1/0&&(n.total=n.offset),d>0&&(s=i,n.emit("progress",{offset:u,data:(t=r.substring(c,i),new Uint8Array(t.length).map((function(e,n){return t.charCodeAt(n)})))}))};o.timeout=n.timeout,o.onprogress=function(){c(!1)},o.onloadend=function(){c(!0),n.xhr=null,n._changeStatus(V.IDLE),n.emit("loadend"),r(!0)},o.onerror=function(e){n.xhr=null;var t=new Error(e.constructor.name);n._handleError(t),i(t)},o.overrideMimeType("text/plain; charset=x-user-defined"),n._changeStatus(V.LOADING),n.emit("loadstart"),n._timer=setTimeout(n.triggerTimeout,n.timeout),o.send()})))},t}(H),ne=q.isSupported()?q:te,re=(Z=function(e,t){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Z(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ie=["loadedmetadata","updatedmetadata","updatedtrackmetadata","loadeddata","error","end"],oe=(function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.loader=new ne,n.parsers=[],n.logger=B,n.handleFirstLoadData=function(e){var t;if(e){var r=n.parsers.find((function(t){return t.probe(e.data)}));if(r){var i=null===(t=n.activeParser)||void 0===t?void 0:t.constructor.name;n.activeParser&&n.resetParsr(n.activeParser),n.activeParser=n.setupParser(r),n.emit("parserchange"),n.activeParser.onProgress(e),B.info("\u5207\u6362parser, ".concat(i," -> ").concat(n.activeParser.constructor.name))}else{var o="No Parser was found, Byte data"+e.data.slice(0,20).join(",");B.error(o),n.emit("error",{code:S.SRC_NOT_SUPPORTED,message:o})}}},n.options=t,n.parsers=t.parsers||[],n.loader=n.createLoader(),n.logger.info("demuxer options",t),n}re(t,e),t.prototype.createLoader=function(){var e=new ne(this.options);return J(e,this,["progress","error"]),J(e,this,["loadstart","loadend"],"once"),e.once("progress",this.handleFirstLoadData),e},t.prototype.setupParser=function(e){return e.setLoader(this.loader),J(e,this,ie),e},t.prototype.resetParsr=function(e){e.reset(),e.setLoader(),ie.forEach((function(t){return e.off(t)}))},Object.defineProperty(t.prototype,"status",{get:function(){return this.activeParser?this.activeParser.status:this.loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),t.prototype.append=function(e){B.info("\u6267\u884cparse"),this.loader.reset(),this.activeParser?this.activeParser.onProgress(e):this.handleFirstLoadData(e)},t.prototype.end=function(){this.activeParser?this.activeParser.onLoadEnd():this.emit("end")},t.prototype.load=function(e){return B.info("\u6267\u884cload",e),this.loader.destroy(),this.loader=this.createLoader(),this.loader.load(e)},t.prototype.seek=function(e){var t;return B.info("\u6267\u884cseek",e),null===(t=this.activeParser)||void 0===t?void 0:t.seek(e)},t.prototype.suspend=function(){var e;return null===(e=this.activeParser)||void 0===e?void 0:e.suspend()},t.prototype.resume=function(){var e;return null===(e=this.activeParser)||void 0===e?void 0:e.resume()},t.prototype.reset=function(){this.loader.reset(),this.activeParser&&this.resetParsr(this.activeParser),this.activeParser=void 0},t.prototype.destroy=function(){var e;B.info("\u6267\u884cdestory"),this.loader.destroy(),null===(e=this.activeParser)||void 0===e||e.destroy(),this.removeAllListeners()}}(F),Q=function(e,t){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ae=function(e){function t(t){var n=e.call(this,t)||this;return n.cacheTimestamps=[],n.handleOutput=function(e){n.decodeQueueSize--;var t=Array.from(Array(e.numberOfChannels)).map((function(t,n){var r=new Float32Array(e.numberOfFrames);return e.copyTo(r,{format:"f32-planar",planeIndex:n}),new Uint8Array(r.buffer)})),r={type:"audio",pts:n.cacheTimestamps.shift()||0,data:C.concatUint8s(t),sampleRate:e.sampleRate,channels:e.numberOfChannels};e.close(),n._output(r)},n.instance=new AudioDecoder({output:n.handleOutput,error:n.handleError}),n}return oe(t,e),t.isConfigSupported=function(e){return"browser"===h.type&&window.AudioDecoder&&window.Float32Array?AudioDecoder.isConfigSupported(e):{supported:!1}},t.prototype.decode=function(e){return this.decodeQueueSize++,this.cacheTimestamps.push(e.timestamp),this.instance.decode(new EncodedAudioChunk(e))},t.prototype.reset=function(){e.prototype.reset.call(this),this.cacheTimestamps=[]},t.prototype.configure=function(e){return t=this,r=function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){return[2,this.instance.configure(e)]}))},new((n=void 0)||(n=Promise))((function(e,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}s((r=r.apply(t,[])).next())}));var t,n,r},t}(w),se=(X=function(e,t){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ce=function(e){function t(t){var n=e.call(this,t)||this;return n.maxTimestamp=-1,n.handleOutput=function(e){n.decodeQueueSize--,0===n.instance.decodeQueueSize&&n.maxTimestamp===e.timestamp&&(n.decodeQueueSize=0);var t={type:"video",pts:e.timestamp,native:e,data:new Uint8Array,width:e.codedWidth,height:e.codedHeight};n._output(t)},n.instance=new VideoDecoder({output:n.handleOutput,error:n.handleError}),n}return se(t,e),t.isConfigSupported=function(e){if("browser"===h.type&&window.VideoDecoder){if("chrome"!==h.name&&"chromium-webview"!==h.name)return VideoDecoder.isConfigSupported(e);if("Android OS"===h.os){if(/h(ev|vc)1\.1/.test(e.codec)||v(h.version,"112.0.5612.0")>=0)return VideoDecoder.isConfigSupported(e)}else if(v(h.version,"109.0.5397.0")>=0)return VideoDecoder.isConfigSupported(e)}return{supported:!1}},t.prototype.decode=function(e){this.maxTimestamp=Math.max(e.timestamp),this.decodeQueueSize++,this.instance.decode(new EncodedVideoChunk(e))},t.prototype.configure=function(e){return t=this,r=function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){return[2,this.instance.configure(e)]}))},new((n=void 0)||(n=Promise))((function(e,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}s((r=r.apply(t,[])).next())}));var t,n,r},t.prototype.reset=function(){e.prototype.reset.call(this),this.maxTimestamp=-1},t}(w),ue=r(458),de=r.n(ue);function le(){return de()('(()=>{"use strict";var e,t,n,r;!function(e){e[e.INITED=0]="INITED",e[e.DECODED=1]="DECODED",e[e.FLUSHED=2]="FLUSHED",e[e.CLEARED=3]="CLEARED",e[e.OUTPUT=4]="OUTPUT",e[e.ERROR=5]="ERROR"}(e||(e={})),function(e){e[e.INIT=0]="INIT",e[e.DECODE=1]="DECODE",e[e.FLUSH=2]="FLUSH",e[e.CLEAR=3]="CLEAR"}(t||(t={})),function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.FDK_AAC=0]="FDK_AAC",e[e.H264=27]="H264",e[e.H265=173]="H265",e[e.HEVC=173]="HEVC",e[e.AAC=86018]="AAC"}(n||(n={})),function(e){e[e.FATAL=8]="FATAL",e[e.ERROR=16]="ERROR",e[e.WARNING=24]="WARNING",e[e.INFO=32]="INFO",e[e.VERBOSE=40]="VERBOSE",e[e.DEBUG=48]="DEBUG",e[e.TRACE=56]="TRACE"}(r||(r={}));var a=self,o=function(){function t(t){var n=this;this._handleVideoData=function(t,r,o,i,s){var c=n.instance.HEAPU8.subarray(t,t+r),u=new Uint8Array(c);a.postMessage({type:e.OUTPUT,value:{type:"video",data:u,pts:o,width:i,height:s}},[u.buffer])},this._handleAudioData=function(t,r,o,i,s){var c=n.instance.HEAPU8.subarray(t,t+r),u=new Uint8Array(c);a.postMessage({type:e.OUTPUT,value:{type:"audio",data:u,pts:o,sampleRate:i,channels:s}},[u.buffer])},this.instance=t}return t.prototype.init=function(t){this.instance.init(t.logLevel||r.ERROR,t.codecId,this._handleVideoData,this._handleAudioData,(function(){a.postMessage({type:e.INITED})}))},t.prototype.decode=function(t){var n=performance.now();this.instance.decode(t.data,t.timestamp,(function(){a.postMessage({type:e.DECODED,value:{decodeTime:performance.now()-n,pts:t.timestamp}})}),0)},t.prototype.clear=function(){this.instance.clear((function(){a.postMessage({type:e.CLEARED})}))},t.prototype.flush=function(){this.instance.flush((function(){a.postMessage({type:e.FLUSHED})}))},t}(),i=self.Uint8Array&&self.WebAssembly&&(null===WebAssembly||void 0===WebAssembly?void 0:WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))),s=[self.Atomics,self.SharedArrayBuffer,self.Worker].every((function(e){return!!e})),c=function(e){return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))},u=function(e){return fetch(e).then((function(e){return e.text()}))},l=self,f=l,p=[],d=null;self.onmessage=function r(a){var h,E,y,A,R,v=a.data,b=v.type;if(b===t.INIT)(h=v.options,E=void 0,y=void 0,A=void 0,R=function(){var t,r,a,o,p,d,E,y,A,R,v,b,D,O;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(U){switch(U.label){case 0:return t=(n[h.codecId]||n[n.HEVC]).toLowerCase(),r=[t],a=n.H264===h.codecId,o=n.HEVC===h.codecId,d=(p=o||a)&&i&&!1!==h.simd,E=p&&s&&!1!==h.threads,o&&d&&r.push("-s"),p&&E&&r.push("-p"),y="https://g.alicdn.com/code/npm/@ali/avx-decoder/0.4.2/"+r.join(""),[4,u(y+".js")];case 1:return A=U.sent(),E?[4,u(y+".worker.js")]:[3,3];case 2:return v=U.sent(),[3,4];case 3:v="",U.label=4;case 4:return R=v,b=c(A),D=c(R),O=y+".wasm",l.importScripts(b),[2,fetch(O).then((function(e){return e.arrayBuffer()})).then((function(t){return l.WASMDecoder({print:function(e){console.info(e)},printErr:function(t){console.error(t),f.postMessage({type:e.ERROR,value:t})},wasmBinary:t,mainScriptUrlOrBlob:b,locateFile:function(e){return e.indexOf("worker.js")>-1?D:e.indexOf("wasm")>-1?O:void 0}})}))]}}))},new(A||(A=Promise))((function(e,t){function n(e){try{a(R.next(e))}catch(e){t(e)}}function r(e){try{a(R.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof A?a:new A((function(e){e(a)}))).then(n,r)}a((R=R.apply(E,y||[])).next())}))).then((function(e){(d=new o(e)).init(v.options);for(var t=p.shift();t;)r(t),t=p.shift()})).catch((function(t){f.postMessage({type:e.ERROR,value:t.message})}));else if(d)switch(b){case t.DECODE:d.decode(v.data);break;case t.FLUSH:d.flush();break;case t.CLEAR:d.clear()}else p.push(a)}})();',"Worker",void 0,void 0)}var pe,fe,he,_e,ve=1,me=function(){function e(){var e=this;this._resolves=[],this.id=ve++,this.read=function(){return new Promise((function(t){e._resolves.push(t)}))}}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._resolves.length},enumerable:!1,configurable:!0}),e.prototype.write=function(e){var t;null===(t=this._resolves.shift())||void 0===t||t(e)},e.prototype.reset=function(){this._resolves=[]},e}(),ge=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ee=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},ye=function(){function t(t){var r=this;this.config={},this.clearing=!1,this.configurePipeline=new me,this.decodePipeline=new me,this.flushPipeline=new me,this._decodeQueueSize=0,this._maxTimestamp=-1,this.state="unconfigured",this._handleError=function(e){r._error(new DOMException(e.message,"SoftwareVideoDecoder"))},this._handleWorkerMessage=function(t){var n=t.data,i=n.type,o=n.value;if(i===e.OUTPUT){if(r.clearing)return;r._decodeQueueSize--,o.pts===r._maxTimestamp&&(r._decodeQueueSize=0),r._output(r.convertFrame(o))}else i===e.CLEARED?(r._decodeQueueSize=0,r.clearing=!1):i===e.INITED?r.configurePipeline.write():i===e.FLUSHED?(r._decodeQueueSize=0,r.flushPipeline.write()):i===e.DECODED?r.decodePipeline.write():i===e.ERROR&&r._handleError({message:o})},this.configure=function(e){return ge(r,void 0,void 0,(function(){var t,r=this;return Ee(this,(function(i){switch(i.label){case 0:return"configured"!==this.state?[3,3]:["codec","simd","threads"].some((function(t){return e[t]!==r.config[t]}))?(this.state="unconfigured",[4,this.flush()]):[3,2];case 1:return i.sent(),this._destroyWorker(),this.worker=this._createWorker(),[3,3];case 2:return[2];case 3:return e.codec?(a=e.codec,(t=/hvc1/.test(a)?o.HEVC:/avc1/.test(a)?o.H264:/mp4a/.test(a)?o.FDK_AAC:o.UNKNOWN)===o.UNKNOWN?[2,this._handleError({message:"unsupport codec ".concat(e.codec)})]:(this.state="configured",this.config=Object.assign({codecId:t},e),this.worker.postMessage({type:n.INIT,options:this.config}),[2,this.configurePipeline.read()])):[2,this._handleError({message:"Failed to read the 'codec' property from 'DecoderConfig': Required member is undefined."})]}var a}))}))},this._output=t.output||_,this._error=t.error||_,this.worker=this._createWorker()}return t.isConfigSupported=function(e){return ge(this,void 0,void 0,(function(){return Ee(this,(function(t){return[2,{config:{codec:e.codec,hardwareAcceleration:"prefer-software"},supported:/^(avc|hvc|hev|mp4a)/.test(e.codec)}]}))}))},Object.defineProperty(t.prototype,"decodeQueueSize",{get:function(){return this._decodeQueueSize},enumerable:!1,configurable:!0}),t.prototype._createWorker=function(){var e=new le;return e.addEventListener("message",this._handleWorkerMessage),e.addEventListener("error",this._handleError),e},t.prototype._destroyWorker=function(){this.worker.removeEventListener("message",this._handleWorkerMessage),this.worker.removeEventListener("error",this._handleError),this.worker.terminate()},t.prototype.decode=function(e){return this._maxTimestamp=Math.max(e.timestamp,this._maxTimestamp),this._decodeQueueSize++,this.worker.postMessage({type:n.DECODE,data:e},[e.data.buffer]),this.decodePipeline.read()},t.prototype.flush=function(){return this.worker.postMessage({type:n.FLUSH}),this.flushPipeline.read()},t.prototype.reset=function(){this._maxTimestamp=-1,this.clearing=!0,this.worker.postMessage({type:n.CLEAR})},t.prototype.close=function(){this._decodeQueueSize=0,this._destroyWorker(),this.state="closed"},t}(),be=(_e=function(e,t){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}_e(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Se=function(e){function t(t){return e.call(this,t)||this}return be(t,e),t.prototype.convertFrame=function(e){return e},t}(ye),Te=(he=function(e,t){return(he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}he(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),we="undefined"!=typeof VideoFrame,Re=function(e){function t(t){return e.call(this,t)||this}return Te(t,e),t.prototype.convertFrame=function(e){return we&&!1!==this.config.convert&&(e.native=new VideoFrame(e.data,{format:"I420",codedHeight:e.height,codedWidth:e.width,timestamp:e.pts})),e},t}(ye),Ce=function(){function e(e){this.config={},this._init=e}return Object.defineProperty(e.prototype,"state",{get:function(){return this.instance?this.instance.state:"unconfigured"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decodeQueueSize",{get:function(){var e;return(null===(e=this.instance)||void 0===e?void 0:e.decodeQueueSize)||0},enumerable:!1,configurable:!0}),e.prototype.flush=function(){var e;return null===(e=this.instance)||void 0===e?void 0:e.flush()},e.prototype.reset=function(){var e;return null===(e=this.instance)||void 0===e?void 0:e.reset()},e.prototype.close=function(){var e;return null===(e=this.instance)||void 0===e?void 0:e.close()},e}(),Oe=(fe=function(e,t){return(fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}fe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype.configure=function(e){var t,n,r,i,o;return r=this,o=function(){var r,i,o,a=this;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(s){switch(s.label){case 0:return this.config=e,r=Object.keys(e),this.instance&&!r.some((function(t){return e[t]!==a.config[t]}))?[3,8]:(i=void 0,(o="prefer-software"!==e.hardwareAcceleration)?[4,ae.isConfigSupported(e)]:[3,2]);case 1:o=s.sent().supported,s.label=2;case 2:return o?(i=ae,[3,5]):[3,3];case 3:return[4,Se.isConfigSupported(e)];case 4:s.sent().supported&&(i=Se),s.label=5;case 5:return i===(null===(t=this.instance)||void 0===t?void 0:t.constructor)?[3,8]:this.instance?[4,this.instance.flush()]:[3,7];case 6:s.sent(),this.instance.close(),s.label=7;case 7:this.instance=new i(this._init),s.label=8;case 8:return[2,null===(n=this.instance)||void 0===n?void 0:n.configure(e)]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}s((o=o.apply(r,[])).next())}))},t.prototype.decode=function(e){var t;return null===(t=this.instance)||void 0===t?void 0:t.decode(e)},t}(Ce),Ie=(pe=function(e,t){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ie(t,e),t.prototype.configure=function(e){var t,n,r,i,o;return r=this,o=function(){var r,i,o,a=this;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(s){switch(s.label){case 0:return this.config=e,r=Object.keys(e),this.instance&&!r.some((function(t){return e[t]!==a.config[t]}))?[3,8]:(i=void 0,(o="prefer-software"!==e.hardwareAcceleration)?[4,ce.isConfigSupported(e)]:[3,2]);case 1:o=s.sent().supported,s.label=2;case 2:return o?(i=ce,[3,5]):[3,3];case 3:return[4,Re.isConfigSupported(e)];case 4:s.sent().supported&&(i=Re),s.label=5;case 5:return i===(null===(t=this.instance)||void 0===t?void 0:t.constructor)?[3,8]:this.instance?[4,this.instance.flush()]:[3,7];case 6:s.sent(),this.instance.close(),s.label=7;case 7:this.instance=new i(this._init),s.label=8;case 8:return[2,null===(n=this.instance)||void 0===n?void 0:n.configure(e)]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}s((o=o.apply(r,[])).next())}))},t.prototype.decode=function(e){var t;return null===(t=this.instance)||void 0===t?void 0:t.decode(e)},t}(Ce)}(),i}()}).call(this,n(18))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FLVParser=void 0;var a=n(16),s=n(19),c=n(31),u=n(32),d=o(n(25)),l=n(33),p=n(47),f=n(62),h=n(63),_=n(34),v=n(64),m=n(65),g=n(66),E=n(68),y=n(70),b=n(27),S=n(20),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.header=null,t.flvMetadata=null,t.videoTrackMeta=null,t.audioTrackMeta=null,t.unhandleBuffer=null,t.cachePackets=[],t.isHVCC=!1,t.videoLoaded=!1,t.baseVideoPTS=0,t.baseVideoDTS=0,t.audioLoaded=!1,t.baseAudioPTS=0,t.baseAudioDTS=0,t.keyframeOffsets=[],t.formatType=a.EFormatType.FLV,t}return i(t,e),t.prototype.probe=function(e){return!(e.byteLength<9)&&"FLV"===new v.FLVHeader(new s.ByteBuffer(e.buffer,e.byteOffset,e.byteLength)).signature},t.prototype.parse=function(e,t){var n=[];if(!e.byteLength)return n;this.unhandleBuffer&&(e=s.ByteBuffer.concat(this.unhandleBuffer,e),t-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null);var r=new s.ByteBuffer(e);for(!this.header&&r.unreadLength>=v.FLVHeader.BUFFER_LENGTH&&(this.header=new v.FLVHeader(r),r.skip(this.header.size-v.FLVHeader.BUFFER_LENGTH));r.unreadLength>4+m.TagHeader.BUFFER_LENGTH;){r.skip(4);var i=new m.TagHeader(r);if(!(r.unreadLength>=i.size)){r.back(4+m.TagHeader.BUFFER_LENGTH);break}var o=new s.ByteBuffer(r.buffer,r.offset,i.size);switch(r.skip(i.size),i.type){case m.ETagType.VIDEO:n=n.concat(this.parseVideoBody(i,o,r.offset+t));break;case m.ETagType.AUDIO:n=n.concat(this.parseAudioBody(i,o,r.offset+t));break;case m.ETagType.SCRIPT:this.parseScriptBody(i,o);break;default:S.logger.warn("unknown tag type",i.type)}}return this.unhandleBuffer=r.unreadLength?r.readToBuffer():null,n},t.prototype.checkMetadata=function(){var e=this.flvMetadata,t=this.header;if(t&&!this.metadata){var n=[];if(t.hasVideo){if(!this.videoTrackMeta||!this.videoLoaded)return;this.videoTrackMeta.baseDTS=this.baseVideoDTS,this.videoTrackMeta.basePTS=this.baseVideoPTS,n.push(this.videoTrackMeta)}if(t.hasAudio){if(!this.audioTrackMeta||!this.audioLoaded)return;this.audioTrackMeta.baseDTS=this.baseAudioDTS,this.audioTrackMeta.basePTS=this.baseAudioPTS,n.push(this.audioTrackMeta)}var r=this.options.progressive,i=(null==e?void 0:e.duration)||0;this.metadata={formatType:a.EFormatType.FLV,live:!i,progressive:!!r,url:this.loader.url,basePTS:Math.min.apply(Math,n.map((function(e){return e.basePTS||0}))),baseDTS:Math.min.apply(Math,n.map((function(e){return e.baseDTS||0}))),timescale:1e3,duration:i>0?1e3*i:1/0,tracks:n},this.emit("loadedmetadata",this.metadata)}},t.prototype.parseVideoSequenceHeader=function(e){var t=this.flvMetadata||{},n={type:a.ETrackType.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],width:t.width||0,height:t.height||0,codec:"",pixelRatio:[]};if(e.codecId===y.EVideoCodecID.H264){var r=new p.BoxHeader(new s.ByteBuffer(new ArrayBuffer(8)),0),i=new s.ByteBuffer(e.data.buffer,e.data.byteOffset,e.data.byteLength),o=new f.BoxAVCC(r,i);n.pps=o.pps,n.sps=o.sps,n.codec=o.codec,n.width=o.width,n.height=o.height}else if(e.codecId===y.EVideoCodecID.H265&&(d.default.extractAnnexbNAL(e.data).forEach((function(e){var t=new s.ByteBuffer(e.buffer,e.byteOffset,e.length),r=new u.H265NAL(t);if(r.nalType<u.EH265NALType.ACCESS_UNIT_DELIMITER)if(r.nalType===u.EH265NALType.SPS){var i=new l.HevcSPS((0,c.removeEPB)(t.readToUint8()));n.sps.push(e),n.codec=i.codec,n.width=i.width,n.height=i.height}else r.nalType===u.EH265NALType.VPS?n.vps.push(e):r.nalType===u.EH265NALType.PPS&&n.pps.push(e)})),!n.codec)){r=new p.BoxHeader(new s.ByteBuffer(new ArrayBuffer(8)),0),i=new s.ByteBuffer(e.data.buffer,e.data.byteOffset,e.data.byteLength);var _=new h.BoxHVCC(r,i);n.vps=_.vps,n.pps=_.pps,n.sps=_.sps,n.codec=_.codec,n.height=_.height,n.width=_.width,this.isHVCC=!0}this.videoTrackMeta=n,this.checkMetadata()},t.prototype.parseVideoBody=function(e,t,n){var r,i=new y.VideoBody(t);this.emit("loadedtag",{header:e,body:i});var o=[];if(!i.data.length)return S.logger.warn("[videox] flv parse empty data",e,i),o;if(i.packetType===y.EVideoPacketType.AVC_SEQUENCE_HEADER)this.parseVideoSequenceHeader(i);else{var s,c=i.type===y.EFrameType.KEY;if(c&&this.keyframeOffsets.push({pts:e.dts+i.cts,offset:n}),!this.videoLoaded){if(!c)return[];this.videoLoaded=!0,this.baseVideoDTS=e.dts,this.baseVideoPTS=i.cts+e.dts,this.checkMetadata()}var l=(s=i.codecId!==y.EVideoCodecID.H265||this.isHVCC?d.default.extractAVCCNAL(i.data,3):d.default.extractAnnexbNAL(i.data)).every((function(e){return u.H265NAL.isNonRef(e)}));if(this.skipFrame===a.EDiscardType.NONREF&&l)return[];this.videoTrackMeta&&c&&(this.videoTrackMeta.pps.forEach((function(e){return s.unshift(e)})),this.videoTrackMeta.sps.forEach((function(e){return s.unshift(e)})),this.videoTrackMeta.vps.forEach((function(e){return s.unshift(e)}))),s.length&&o.push({trackId:2,codec:(null===(r=this.videoTrackMeta)||void 0===r?void 0:r.codec)||"",trackType:a.ETrackType.VIDEO,isSync:c,isNonRef:l,data:s,dts:e.dts,pts:e.dts+i.cts,offset:n,size:s.reduce((function(e,t){return e+t.byteLength}),0)})}return o},t.prototype.parseAudioBody=function(e,t,n){var r,i=new g.AudioBody(t);this.emit("loadedtag",{header:e,body:i});var o=[];if(i.packetType===g.EAudioPacketType.ADTS_HEADER){var c=new s.ByteBuffer(i.data.buffer,i.data.byteOffset,i.data.byteLength),u=g.AudioBody.readAudioSpecificConfig(c);this.audioTrackMeta={id:1,baseDTS:0,basePTS:0,type:a.ETrackType.AUDIO,codec:"mp4a.40."+u.audioObjectType,timescale:1e3,audioObjectType:u.audioObjectType,sampleRate:u.sampleRate,sampleSize:i.sampleSize,channelCount:u.channelCount},this.checkMetadata()}else this.audioLoaded||(this.audioLoaded=!0,this.baseAudioDTS=e.dts,this.baseAudioPTS=e.dts,this.checkMetadata()),o.push({codec:(null===(r=this.audioTrackMeta)||void 0===r?void 0:r.codec)||"",trackId:1,trackType:a.ETrackType.AUDIO,isSync:!0,isNonRef:!1,data:[i.data],dts:e.dts,pts:e.dts,offset:n,size:i.data.byteLength});return o},t.prototype.parseScriptBody=function(e,t){var n=new E.ScriptBody(t);this.emit("loadedtag",{header:e,body:n});var r=n.value;r&&"onMetaData"===n.name&&(this.flvMetadata=r,S.logger.info("flv script tag loaded, flv metadata:",this.flvMetadata))},t.prototype.onProgress=function(e){var t=e.data,n=e.offset;if(t.byteLength){var r=this.parse(t.buffer,n);if(r.length){var i=void 0;this.cachePackets.length?(i=this.cachePackets.concat(r),this.cachePackets=[]):i=r,this.metadata&&this.loader.status!==b.ELoaderStatus.SUSPENDED?this.emit("loadeddata",{packets:i}):this.cachePackets=i}}},t.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end")},t.prototype.seek=function(e){this.unhandleBuffer=null,this.loader.suspend();var t=Math.max(this.keyframeOffsets.findIndex((function(t){return t.pts>e}))-1,0);this.loader.loadRange(this.keyframeOffsets[t].offset)},t.prototype.reset=function(){e.prototype.reset.call(this),this.isHVCC=!1,this.cachePackets=[],this.videoLoaded=!1,this.audioLoaded=!1,this.baseVideoDTS=0,this.baseVideoPTS=0,this.baseAudioDTS=0,this.baseAudioPTS=0,this.header=null,this.unhandleBuffer=null,this.flvMetadata=null,this.videoTrackMeta=null,this.audioTrackMeta=null},t}(_.BasicParser);t.FLVParser=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpGolomb=void 0;var r=n(20),i=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&r.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,n=8,r=8;for(t=0;t<e;t++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},e}();t.ExpGolomb=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FetchLoader=void 0;var s=n(20),c=n(48),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controller=null,t.timer=-1,t._abort=function(){clearTimeout(t.timer),t.controller&&!t.controller.signal.aborted&&(s.logger.info("fetch abort,",t.url),t.controller.abort(),t.controller=null),t._changeStatus(c.ELoaderStatus.IDLE)},t.triggerTimeout=function(){t._abort(),t._handleError(new Error("Request timed out, please try again"))},t.handleCompleteBuffer=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),o(t,void 0,void 0,(function(){var t=this;return a(this,(function(i){return[2,e.arrayBuffer?e.arrayBuffer().then((function(e){return t.total=e.byteLength,t.offset=Math.min(t.total,r),t.emit("progress",{offset:n,data:new Uint8Array(e).subarray(n,r)}),t.controller&&(t._changeStatus(c.ELoaderStatus.IDLE),t.emit("loadend")),t.controller=null,!0})):Promise.reject(new Error("unsupport response.arraybuffer()"))]}))}))},t}return i(t,e),t.isSupported=function(){return"undefined"!=typeof AbortController&&"undefined"!=typeof ReadableStream},t.prototype.loadRange=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1/0),o(this,void 0,void 0,(function(){var n,r,i=this;return a(this,(function(u){return!this.url||e>=this.total||this.status===c.ELoaderStatus.LOADING||this.status===c.ELoaderStatus.ERROR?[2,Promise.resolve(!1)]:(this.abort(),s.logger.info("fetch load, from=".concat(e," to=").concat(t," url=").concat(this.url)),this._changeStatus(c.ELoaderStatus.LOADING),this.emit("loadstart"),/^blob:/.test(this.url)?[2,fetch(this.url).then((function(n){return i.handleCompleteBuffer(n,e,t)}))]:(n=new Headers,(r=e>0||t<1/0)&&(t=Math.min(this.total-1,t),n.set("Range","bytes=".concat(e,"-").concat(t===1/0?"":t))),this.controller=new AbortController,this.timer=setTimeout(this.triggerTimeout,this.timeout),[2,fetch(this.url,{method:"GET",headers:n,signal:this.controller.signal}).then((function(n){if(clearTimeout(i.timer),n.status>=200&&n.status<300){if(i.offset=e,r){var s=n.headers.get("Content-Range")||"";i.total=Number(s.split("/")[1])||i.total}else i.total=Number(n.headers.get("Content-Length"))||i.total;if(n.body){var u=n.body.getReader();return function e(){return o(i,void 0,void 0,(function(){var t=this;return a(this,(function(n){return[2,u.read().then((function(n){return n.done?(t.controller=null,t._changeStatus(c.ELoaderStatus.IDLE),t.emit("loadend"),!0):(t.offset+=n.value.byteLength,t.emit("progress",{offset:t.offset-n.value.byteLength,data:n.value}),e())}))]}))}))}()}return i.handleCompleteBuffer(n,e,t)}throw new Error("Media stream data does not exist: ".concat(i.url))})).catch((function(e){return clearTimeout(i.timer),i._handleError(e),!1}))]))}))}))},t}(c.BasicLoader);t.FetchLoader=u},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.XHRLoader=void 0;var o=n(26),a=n(48),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.xhr=null,t._timer=-1,t._resolve=function(){},t.triggerTimeout=function(){t._abort(),t._handleError(new Error("Request timed out, please try again"))},t}return i(t,e),t.prototype._abort=function(){var e=this.xhr;e&&(e.onerror=null,e.onprogress=null,e.onloadend=null,e.onreadystatechange=null,e.abort(),this.xhr=null,this._resolve(!1)),this._changeStatus(a.ELoaderStatus.IDLE)},t.prototype.loadRange=function(e,t){var n=this;return void 0===e&&(e=0),void 0===t&&(t=1/0),!this.url||e>=this.total||this.status===a.ELoaderStatus.LOADING||this.status===a.ELoaderStatus.ERROR?Promise.resolve(!1):(this.abort(),new Promise((function(r,i){n.xhr=new XMLHttpRequest,n._resolve=r;var s=n.xhr,c=e>0||t<1/0;s.open("GET",n.url),c&&s.setRequestHeader("Range","bytes=".concat(e,"-").concat(t===1/0?"":t)),s.onreadystatechange=function(){if(s.readyState===s.HEADERS_RECEIVED&&s.status>=200&&s.status<300)if(c){var e=s.getResponseHeader("Content-Range")||"";n.total=Number(e.split("/")[1])||n.total}else n.total=Number(s.getResponseHeader("Content-Length"))||n.total;s.readyState>=s.HEADERS_RECEIVED&&clearTimeout(n._timer)},n.offset=e;var u=0,d=function(e){var t=s.responseText,r=t.length,i=u,a=n.offset,d=r-i;d>0&&(n.offset+=d),!c&&e&&n.total===1/0&&(n.total=n.offset),d>0&&(u=r,n.emit("progress",{offset:a,data:(0,o.stringToUint8Array)(t.substring(i,r))}))};s.timeout=n.timeout,s.onprogress=function(){d(!1)},s.onloadend=function(){d(!0),n.xhr=null,n._changeStatus(a.ELoaderStatus.IDLE),n.emit("loadend"),r(!0)},s.onerror=function(e){n.xhr=null;var t=new Error(e.constructor.name);n._handleError(t),i(t)},s.overrideMimeType("text/plain; charset=x-user-defined"),n._changeStatus(a.ELoaderStatus.LOADING),n.emit("loadstart"),n._timer=setTimeout(n.triggerTimeout,n.timeout),s.send()})))},t}(a.BasicLoader);t.XHRLoader=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HLSParser=void 0;var a=n(168),s=n(34),c=n(19),u=n(16),d=n(27),l=n(20),p=n(26),f={M3U:/^#EXTM3U/,INF:/^#EXTINF:?([0-9\.]*)?,?(.*)?(?:\n|\r\n)(.*)$/,X_TARGETDURATION:/^#EXT-X-TARGETDURATION:?([0-9.]*)?/,X_VERSION:/^#EXT-X-VERSION:?([0-9.]*)?/,X_MEDIA_SEQUENCE:/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/,X_DISCONTINUITY_SEQUENCE:/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/,X_PLAYLIST_TYPE:/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/,X_BYTERANGE:/^#EXT-X-BYTERANGE:?(.*)?$/,X_ALLOW_CACHE:/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/,X_MAP:/^#EXT-X-MAP:?(.*)$/,X_STREAM_INF:/^#EXT-X-STREAM-INF:?(.*)$/,X_MEDIA:/^#EXT-X-MEDIA:?(.*)$/,X_ENDLIST:/^#EXT-X-ENDLIST/,X_DISCONTINUITY:/^#EXT-X-DISCONTINUITY/,X_PROGRAM_DATE_TIME:/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/,X_KEY:/^#EXT-X-KEY:?(.*)$/,X_START:/^#EXT-X-START:?(.*)$/,X_CUE_OUT_CONT:/^#EXT-X-CUE-OUT-CONT:?(.*)?$/,X_CUE_OUT:/^#EXT-X-CUE-OUT:?(.*)?$/,X_CUE_IN:/^#EXT-X-CUE-IN:?(.*)?$/,X_SKIP:/^#EXT-X-SKIP:(.*)$/,X_PART:/^#EXT-X-PART:(.*)$/,X_SERVER_CONTROL:/^#EXT-X-SERVER-CONTROL:(.*)$/,X_PART_INF:/^#EXT-X-PART-INF:(.*)$/,X_PRELOAD_HINT:/^#EXT-X-PRELOAD-HINT:(.*)$/,X_RENDITION_REPORT:/^#EXT-X-RENDITION-REPORT:(.*)$/},h=function(e){function t(t){var n=e.call(this,t)||this;return n.mpegtsParser=new a.MPEGTSParser({progressive:!0,timeout:n.options.timeout}),n.currSegmentIndex=0,n.isLive=!1,n.shouldContinuousLoad=!0,n.ended=!1,n.prevManifestLoadedTime=0,n.fetchTimer=-1,n.discontinuity=!1,n.m3u8UpdateDuration=2,n.bufferSegments=[],n.cachePackets=[],n.formatType=u.EFormatType.HLS,n.segments=[],n.handleTSEnd=function(){n.currSegmentIndex>=n.segments.length-1&&n.emit("end")},n.handleTSLoadedMetadata=function(e){void 0===n.basePTS&&(n.basePTS=e.basePTS),void 0===n.baseDTS&&(n.baseDTS=e.baseDTS);var t=o(o({},e),{formatType:u.EFormatType.HLS,live:n.isLive,progressive:!0,basePTS:n.basePTS,baseDTS:n.baseDTS,duration:n.duration,url:n.loader.url,discontinuity:n.discontinuity});n.metadata?(0,p.patch)(n.metadata,t)&&n.emit("updatedmetadata",n.metadata):(n.metadata=t,n.emit("loadedmetadata",n.metadata))},n.handleTSLoadedData=function(e){var t,r=e.packets;if(r.length){if(null===(t=n.currentSegment)||void 0===t?void 0:t.discontinuity){var i=r.slice().sort((function(e,t){return e.pts-t.pts}));void 0===n.currSegmentStartPTS&&(n.currSegmentStartPTS=i[0].pts);var o=n.currSegmentStartPTS,a=Math.round(1e3*n.prevSegmentsTotalDuration)+(n.basePTS||0);i.forEach((function(e){var t=e.dts-e.pts;e.pts=a+e.pts-o,e.dts=e.pts+t}))}var s;n.cachePackets.length?(s=n.cachePackets.concat(r),n.cachePackets=[]):s=r,n.shouldContinuousLoad?n.emit("loadeddata",{packets:s}):n.cachePackets=s}},n.handleTSLoadEnd=function(){n.currSegmentIndex++,n.loadSegment()},n.mpegtsParser.on("loadedmetadata",n.handleTSLoadedMetadata),n.mpegtsParser.on("updatedmetadata",n.handleTSLoadedMetadata),n.mpegtsParser.on("loadeddata",n.handleTSLoadedData),n.mpegtsParser.on("end",n.handleTSEnd),n.mpegtsParser.loader.on("loadend",n.handleTSLoadEnd),(0,p.proxyEvent)(n.mpegtsParser.loader,n,["error"]),(0,p.proxyEvent)(n.mpegtsParser,n,["updatedtrackmetadata"]),n}return i(t,e),t.prototype.probe=function(e){if(e.byteLength>=7){var t=Array.from(Array(7)).map((function(t,n){return String.fromCharCode(e[n])}));return f.M3U.test(t.join(""))}return!1},Object.defineProperty(t.prototype,"status",{get:function(){return this.loader.eof?this.mpegtsParser.status===d.ELoaderStatus.IDLE?this.shouldContinuousLoad?d.ELoaderStatus.LOADING:d.ELoaderStatus.SUSPENDED:this.mpegtsParser.status:this.loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.isLive?1/0:Math.round(1e3*this.segments.reduce((function(e,t){return e+t.duration}),0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentSegment",{get:function(){return this.segments[this.currSegmentIndex]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prevSegmentsTotalDuration",{get:function(){return this.segments.slice(0,this.currSegmentIndex).reduce((function(e,t){return e+t.duration}),0)},enumerable:!1,configurable:!0}),t.prototype.insertSegment=function(e){var t=!this.segments.some((function(t){return t.uri===e.uri}));return t&&this.segments.push(e),t},t.prototype.onProgress=function(e){this.bufferSegments.push(e)},t.prototype.onLoadEnd=function(){var e=this;if(this.loader.eof){var t=c.ByteBuffer.concatUint8s(this.bufferSegments.map((function(e){return e.data})));if(this.bufferSegments=[],t.byteLength){var n,r=(new TextDecoder).decode(t).split(/\n#/).map((function(e){return"#"+e.trim()})),i=0,o=!1,a=!1;r.forEach((function(t){var r=t.match(f.INF);if(r){var s={sequence:i,duration:parseFloat(r[1]),uri:new URL(r[3],e.url).href,discontinuity:a};e.insertSegment(s),e.emit("loadedsegment",s)}else(n=t.match(f.X_MEDIA_SEQUENCE))?i=Number(n[1]):f.X_ENDLIST.test(t)?o=!0:f.X_DISCONTINUITY.test(t)&&(a=!0)})),this.discontinuity=a,this.isLive=!o,this.segments.length||this.emit("error",{code:u.EErrorCode.PARSER,message:"M3U8 file has no TS data"}),this.prevManifestLoadedTime=Date.now(),this.loadSegment()}l.logger.info("hls manifest loaded, all segments length:",this.segments.length)}},t.prototype.loadSegment=function(){var e=this;if(!this.shouldContinuousLoad)return Promise.resolve(!1);var t=this.segments[this.currSegmentIndex];if(this.isLive&&!t){var n=1e3*this.m3u8UpdateDuration-(Date.now()-this.prevManifestLoadedTime);return n<=0?this.loader.load(this.loader.url):new Promise((function(t){clearTimeout(e.fetchTimer),e.fetchTimer=setTimeout((function(){t(e.loader.load(e.loader.url))}),n)}))}return t?(this.cachePackets=[],this.m3u8UpdateDuration=t.duration||2,this.currSegmentStartPTS=void 0,this.mpegtsParser.continuousLoad(t.uri)):(this.ended=!0,Promise.resolve(!1))},t.prototype.suspend=function(){clearTimeout(this.fetchTimer),this.shouldContinuousLoad=!1},t.prototype.resume=function(){if(this.cachePackets.length){var t=this.cachePackets;return this.cachePackets=[],this.emit("loadeddata",{packets:t}),Promise.resolve(!1)}return this.shouldContinuousLoad||this.ended?Promise.resolve(!1):(this.shouldContinuousLoad=!0,this.loader.eof?this.mpegtsParser.loader.status===d.ELoaderStatus.LOADING||this.mpegtsParser.loader.status===d.ELoaderStatus.ERROR?Promise.resolve(!0):this.loadSegment():e.prototype.resume.call(this))},t.prototype.seek=function(e){this.ended=!1;var t=0,n=this.segments.findIndex((function(n){return t+=n.duration,e<t}));this.currSegmentIndex=n>-1?n:this.segments.length-1,this.cachePackets=[],this.bufferSegments=[],this.mpegtsParser.suspend(),this.mpegtsParser.flush(),this.shouldContinuousLoad=!0,this.loadSegment()},t.prototype.reset=function(){clearTimeout(this.fetchTimer),e.prototype.reset.call(this),this.discontinuity=!1,this.cachePackets=[],this.bufferSegments=[],this.shouldContinuousLoad=!0,this.mpegtsParser.reset(),this.segments=[],this.currSegmentIndex=0,this.isLive=!1,this.ended=!1},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.mpegtsParser.loader.removeAllListeners(),this.mpegtsParser.destroy()},t}(s.BasicParser);t.HLSParser=h},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MPEGTSParser=t.ETSPacketType=void 0;var a,s=n(16),c=n(26),u=n(67),d=n(34),l=n(19),p=n(31),f=n(169),h=n(32),_=o(n(25)),v=n(33),m=n(170),g=n(171),E=n(172),y=n(173),b=n(174),S=n(27),T=n(20),w=o(n(175)),R=o(n(35)),C=n(176),O=n(177);!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PAT=1]="PAT",e[e.PES=2]="PES",e[e.PMT=3]="PMT"}(a=t.ETSPacketType||(t.ETSPacketType={}));var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.patPrograms=[],t.pmtStreams=[],t.prevPesSegments=[],t.packetQueue=new O.Queue,t.audioLoaded=!1,t.videoLoaded=!1,t.metadataChanged=!1,t.metadata=null,t.formatType=s.EFormatType.MPEGTS,t}return i(t,e),t.prototype.probe=function(e){if(e.byteLength<188)return!1;for(var t=0,n=e.byteLength;t<n;t+=188)if(e[t]!==b.TSHeader.SYNC_BYTE)return!1;return!0},t.prototype.splitToTsPacket=function(e){var t,n=e;(null===(t=this.unhandleBuffer)||void 0===t?void 0:t.byteLength)&&(n=l.ByteBuffer.concat(this.unhandleBuffer,n),this.unhandleBuffer=void 0);for(var r=new Uint8Array(n),i=r.byteLength,o=0;o+188<=i;){if(r[o]!==b.TSHeader.SYNC_BYTE){var a=new Uint8Array(r.buffer,o).findIndex((function(e){return e===b.TSHeader.SYNC_BYTE}));if(console.warn("[videox] mpegts sync byte error",r[o],o,a),a>-1){o+=a;continue}break}this.parseTsPacket(r.subarray(o,o+188)),o+=188}o<i&&(this.unhandleBuffer=n.slice(o))},t.prototype.parseTsPacket=function(e){var t=l.ByteBuffer.fromUint8(e),n=new b.TSHeader(t),r=null;if(n.pid===b.EPID.PAT)r=new g.PAT(t),this.patPrograms=r.programs,this.emitTSPacket(a.PAT,n,r);else if(this.patPrograms.some((function(e){return e.pid===n.pid}))){r=new y.PMT(t);var i=(0,R.default)(this.pmtStreams,r.streams);i&&this.emitPackets(),this.metadataChanged=i,this.pmtStreams=r.streams,this.emitTSPacket(a.PMT,n,r)}else{var o=this.pmtStreams.find((function(e){return e.pid===n.pid}));o?(n.payloadUnitStartIndicator&&this.parsePes(),this.prevPesSegments.push(t.readToUint8()),this.prevPesTSHeader=n,this.prevPmtStream=o):this.emitTSPacket(a.UNKNOWN,n,r)}},t.prototype.parsePes=function(){var e=this.prevPmtStream;if(this.prevPesSegments.length&&this.prevPesTSHeader&&e){var t=l.ByteBuffer.fromUint8(l.ByteBuffer.concatUint8s(this.prevPesSegments));if(this.prevPesSegments=[],1===t.read(2)){var n=new E.PES(t);this.emitTSPacket(a.PES,this.prevPesTSHeader,n),e.streamType===m.EStreamType.H265||e.streamType===m.EStreamType.H264?this.parseVideoPes(n,e):e.streamType===m.EStreamType.AAC&&this.parseAudioPes(n,e)}}},t.prototype.parseVideoPes=function(e,t){var n=Math.round(e.dts/90),r=Math.round(e.pts/90),i=t.streamType===m.EStreamType.H265,o={},a=!0,u=!1,d=[],g=[],E=[],y=[];if(_.default.extractAnnexbNAL(e.data).forEach((function(e){var t=l.ByteBuffer.fromUint8(e);if(!(e.length<2))if(i){if((r=new h.H265NAL(t)).nalType<h.EH265NALType.ACCESS_UNIT_DELIMITER){if(r.nalType>=h.EH265NALType.VPS)if(r.nalType===h.EH265NALType.SPS){u=!0;var n=new v.HevcSPS((0,p.removeEPB)(t.readToUint8()));o.width=n.width,o.height=n.height,o.pixelRatio=n.pixelRatio,o.codec=n.codec,g.push(e)}else r.nalType===h.EH265NALType.VPS?E.push(e):r.nalType===h.EH265NALType.PPS&&y.push(e);d.push(e),a=h.H265NAL.isNonRefNALType(r.nalType)&&a}}else{var r;if((r=new f.H264NAL(t)).nalType<f.EH264NALType.DIVIDER){if(r.nalType===f.EH264NALType.SPS){u=!0;n=new v.AvcSPS((0,p.removeEPB)(t.readToUint8()));o.width=n.width,o.height=n.height,o.pixelRatio=n.pixelRatio,o.codec=n.codec,g.push(e)}else r.nalType===f.EH264NALType.PPS&&y.push(e);d.push(e)}a=!1}})),!this.videoLoaded){if(!u)return;this.videoLoaded=!0,o.baseDTS=n,o.basePTS=r}E.length&&(o.vps=E),g.length&&(o.sps=g),y.length&&(o.pps=y),this.videoMetadata?(this.metadataChanged=(0,c.patch)(this.videoMetadata,o),this.metadataChanged&&this.emit("updatedtrackmetadata",this.videoMetadata)):(this.videoMetadata=(0,w.default)({},C.defaultVideoMetadata,o),this.metadataChanged=!0),this.checkMetadataChanged(),this.packetQueue.write({trackId:t.pid,codec:this.videoMetadata.codec,trackType:s.ETrackType.VIDEO,isSync:u,isNonRef:a,data:d,dts:n,pts:r,size:d.reduce((function(e,t){return e+t.byteLength}),0)})},t.prototype.parseAudioPes=function(e,t){var n=this,r={},i=Math.round(e.dts/90),o=Math.round(e.pts/90);this.audioLoaded||(this.audioLoaded=!0,r.baseDTS=i,r.basePTS=o);var a=(0,u.readAACSamples)(e.data);if(a.length){var d=a[0],l="mp4a.40."+d.audioObjectType;r.codec=l,r.audioObjectType=d.audioObjectType,r.sampleRate=d.sampleRate,r.channelCount=d.channelCount,this.audioMetadata?(this.metadataChanged=(0,c.patch)(this.audioMetadata,r),this.metadataChanged&&this.emit("updatedtrackmetadata",this.audioMetadata)):(this.audioMetadata=(0,w.default)({},C.defaultAudioMetadata,r),this.metadataChanged=!0),this.checkMetadataChanged();var p=Math.round(9e4*u.AAC_DURATION/d.sampleRate/90);a.forEach((function(e,r){n.packetQueue.write({trackId:t.pid,codec:l,trackType:s.ETrackType.AUDIO,isSync:!0,isNonRef:!0,data:[e.data],dts:p*r+i,pts:p*r+o,size:e.data.byteLength})}))}},t.prototype.checkMetadataChanged=function(){var e=this;if(this.pmtStreams.length&&this.metadataChanged){var t=[];if(this.pmtStreams.every((function(n){var r,i,o=m.esTypeMap[n.streamType];return o===s.ETrackType.VIDEO?(e.videoMetadata&&t.push(e.videoMetadata),!!(null===(r=e.videoMetadata)||void 0===r?void 0:r.codec)):o!==s.ETrackType.AUDIO||(e.audioMetadata&&t.push(e.audioMetadata),!!(null===(i=e.audioMetadata)||void 0===i?void 0:i.codec))}))){var n={formatType:s.EFormatType.MPEGTS,live:!1,progressive:!!this.options.progressive,url:this.loader.url,basePTS:Math.min.apply(Math,t.map((function(e){return e.basePTS||0}))),baseDTS:Math.min.apply(Math,t.map((function(e){return e.baseDTS||0}))),timescale:1e3,duration:0,tracks:t};this.metadataChanged=!1,this.metadata?(0,c.patch)(this.metadata,n)&&this.emit("updatedmetadata",this.metadata):(this.metadata=n,this.emit("loadedmetadata",this.metadata))}}return this.metadataChanged},t.prototype.emitTSPacket=function(e,t,n){T.logger.debug("loadedtspacket","type:",a[e],"header:",t,"payload:",n),this.emit("loadedtspacket",{type:e,header:t,payload:n})},t.prototype.emitPackets=function(){if(this.metadata&&this.loader.status!==S.ELoaderStatus.SUSPENDED&&!this.metadataChanged&&this.packetQueue.size>0){var e=this.packetQueue.readAll();this.emit("loadeddata",{packets:e})}},t.prototype.continuousLoad=function(e){return this.loader.load(e)},t.prototype.parse=function(e){this.splitToTsPacket(e),this.emitPackets()},t.prototype.onProgress=function(e){e.data.byteLength&&this.parse(e.data.buffer)},t.prototype.onLoadEnd=function(){this.parsePes(),this.emitPackets(),this.loader.eof&&this.emit("end")},t.prototype.resume=function(){return this.options.progressive?e.prototype.resume.call(this):Promise.resolve(!1)},t.prototype.flush=function(){this.unhandleBuffer=void 0,this.prevPesTSHeader=void 0,this.prevPmtStream=void 0,this.prevPesSegments=[]},t.prototype.seek=function(){this.reset(),this.loader.jump(0)},t.prototype.reset=function(){e.prototype.reset.call(this),this.flush(),this.audioLoaded=!1,this.videoLoaded=!1,this.packetQueue.clear(),this.patPrograms=[],this.pmtStreams=[],this.metadata=null,this.audioMetadata=void 0,this.videoMetadata=void 0,this.metadataChanged=!1},t}(d.BasicParser);t.MPEGTSParser=A},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.H264NAL=t.EH264NALType=void 0;var a,s=n(10),c=o(n(25));!function(e){e[e.UNUSED=0]="UNUSED",e[e.NON_IDR_SLICE=1]="NON_IDR_SLICE",e[e.DP_A=2]="DP_A",e[e.DP_B=3]="DP_B",e[e.DP_C=4]="DP_C",e[e.IDR=5]="IDR",e[e.SEI=6]="SEI",e[e.SPS=7]="SPS",e[e.PPS=8]="PPS",e[e.DIVIDER=9]="DIVIDER",e[e.SEQUENCE_END=10]="SEQUENCE_END",e[e.STREAM_END=11]="STREAM_END",e[e.FILL=12]="FILL"}(a=t.EH264NALType||(t.EH264NALType={}));var u=function(e){function t(t){var n=e.call(this)||this,r=new s.BitBuffer(t.read(1),8);return n.forbiddenZeroBit=r.read(1),n.nalRefIdc=r.read(2),n.nalType=r.read(5),n}return i(t,e),t.extractNALType=function(e){return 31&e[0]},t.isSlice=function(e){var t=this.extractNALType(e);return t>=a.NON_IDR_SLICE&&t<=a.IDR},t}(c.default);t.H264NAL=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.esTypeMap=t.EStreamType=void 0;var r=n(16);!function(e){e[e.H264=27]="H264",e[e.H265=36]="H265",e[e.AAC=15]="AAC"}(t.EStreamType||(t.EStreamType={})),t.esTypeMap={1:r.ETrackType.VIDEO,2:r.ETrackType.VIDEO,3:r.ETrackType.AUDIO,4:r.ETrackType.AUDIO,5:r.ETrackType.UNKNOWN,6:r.ETrackType.UNKNOWN,7:r.ETrackType.UNKNOWN,8:r.ETrackType.UNKNOWN,9:r.ETrackType.UNKNOWN,10:r.ETrackType.UNKNOWN,11:r.ETrackType.UNKNOWN,12:r.ETrackType.UNKNOWN,13:r.ETrackType.UNKNOWN,14:r.ETrackType.UNKNOWN,15:r.ETrackType.AUDIO,16:r.ETrackType.VIDEO,17:r.ETrackType.AUDIO,18:r.ETrackType.UNKNOWN,19:r.ETrackType.UNKNOWN,20:r.ETrackType.UNKNOWN,21:r.ETrackType.UNKNOWN,22:r.ETrackType.UNKNOWN,23:r.ETrackType.UNKNOWN,24:r.ETrackType.UNKNOWN,25:r.ETrackType.UNKNOWN,26:r.ETrackType.UNKNOWN,27:r.ETrackType.VIDEO,28:r.ETrackType.AUDIO,29:r.ETrackType.UNKNOWN,30:r.ETrackType.VIDEO,31:r.ETrackType.UNKNOWN,32:r.ETrackType.UNKNOWN,33:r.ETrackType.VIDEO,36:r.ETrackType.VIDEO,66:r.ETrackType.UNKNOWN,127:r.ETrackType.UNKNOWN,128:r.ETrackType.AUDIO,129:r.ETrackType.AUDIO,130:r.ETrackType.AUDIO,131:r.ETrackType.AUDIO,132:r.ETrackType.AUDIO,133:r.ETrackType.AUDIO,134:r.ETrackType.AUDIO,135:r.ETrackType.AUDIO,144:r.ETrackType.UNKNOWN,145:r.ETrackType.UNKNOWN,192:r.ETrackType.UNKNOWN,193:r.ETrackType.AUDIO,194:r.ETrackType.AUDIO,207:r.ETrackType.UNKNOWN,209:r.ETrackType.VIDEO,210:r.ETrackType.VIDEO,219:r.ETrackType.UNKNOWN,234:r.ETrackType.VIDEO}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PAT=void 0;var r,i=n(10);!function(e){e[e.NETWORK=0]="NETWORK",e[e.MAP_PID=1]="MAP_PID"}(r||(r={}));var o=function(e){this.programs=[],this.tableId=e.read(1);var t=new i.BitBuffer(e.read(2),16);this.sectionSyntaxIndicator=t.read(1),t.skip(1),t.skip(2),this.sectionLength=t.read(12),this.transportStreamId=e.read(2);var n=new i.BitBuffer(e.read(1),8);n.skip(2),this.versionNumber=n.read(5),this.currentNextIndicator=n.read(1),this.sectionNumber=e.read(1),this.lastSectionNumber=e.read(1);for(var r=0;r<this.sectionLength-12;r+=4)this.programs.push({number:e.read(2),pid:8191&e.read(2)});this.crc32=e.read(4)};t.PAT=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PES=void 0;var r=n(10),i=function(e){this.streamId=e.read(1),this.pesPacketLength=e.read(2);var t=new r.BitBuffer(e.read(2),16);t.skip(2),this.pesScramblingControl=t.read(2),this.pesPriority=t.read(1),this.dataAlignmentIndicator=t.read(1),this.copyright=t.read(1),this.originalOrCopy=t.read(1),this.ptsDtsFlags=t.read(2),this.esCRFlag=t.read(1),this.esRateFlag=t.read(1),this.dsmTrickModeFlag=t.read(1),this.additionalCopyInfoFlag=t.read(1),this.pesCRCFlag=t.read(1),this.pesExtensionFlag=t.read(1),this.pesHeaderDataLength=e.read(1);var n=e.offset;2&this.ptsDtsFlags?(this.pts=(14&e.read(1))<<27|e.read(2)>>>1<<13|e.read(2)>>>3,this.pts*=4,e.back(1),this.pts+=(6&e.read(1))>>>1,1&this.ptsDtsFlags?(this.dts=(14&e.read(1))<<27|e.read(2)>>>1<<13|e.read(2)>>>3,this.dts*=4,e.back(1),this.dts+=(6&e.read(1))>>>1):this.dts=this.pts):(this.pts=0,this.dts=0);var i=this.pesHeaderDataLength-(e.offset-n);i>0&&e.skip(i),this.data=e.readToUint8()};t.PES=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PMT=void 0;var r=n(10),i=function(e){this.streams=[],this.tableId=e.read(1);var t=new r.BitBuffer(e.read(2),16);this.sectionSyntaxIndicator=t.read(1),t.skip(1),t.skip(2),this.sectionLength=t.read(12),this.programNumber=e.read(2);var n=new r.BitBuffer(e.read(1),8);n.skip(2),this.versionNumber=n.read(5),this.currentNextIndicator=n.read(1),this.sectionNumber=e.read(1),this.lastSectionNumber=e.read(1),this.pcrPid=8191&e.read(2),this.programInfoLength=4095&e.read(2);for(var i=12+this.programInfoLength;i<=this.sectionLength-2;i+=5){var o={streamType:e.read(1),pid:8191&e.read(2),esInfoLength:4095&e.read(2)};this.streams.push(o),e.skip(o.esInfoLength),i+=o.esInfoLength}this.crc32=e.read(4)};t.PMT=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TSHeader=t.EPID=void 0;var r=n(10);!function(e){e[e.PAT=0]="PAT",e[e.CAT=1]="CAT",e[e.TSDT=2]="TSDT"}(t.EPID||(t.EPID={}));var i=function(){function e(e){var t=new r.BitBuffer(e.read(4),32);if(this.syncByte=t.read(8),this.errorIndicator=t.read(1),this.payloadUnitStartIndicator=t.read(1),this.transportPriority=t.read(1),this.pid=t.read(13),this.transportScramblingControl=t.read(2),this.adaptationFlag=t.read(1),this.payloadFlag=t.read(1),this.continueCounter=t.read(4),this.adaptationFlag){var n=e.read(1);e.skip(n)}this.payloadUnitStartIndicator&&e.skip(1)}return e.SYNC_BYTE=71,e}();t.TSHeader=i},function(e,t,n){(function(e,n){var r=/^\[object .+?Constructor\]$/,i=/^(?:0|[1-9]\d*)$/,o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;var a="object"==typeof e&&e&&e.Object===Object&&e,s="object"==typeof self&&self&&self.Object===Object&&self,c=a||s||Function("return this")(),u=t&&!t.nodeType&&t,d=u&&"object"==typeof n&&n&&!n.nodeType&&n,l=d&&d.exports===u,p=l&&a.process,f=function(){try{var e=d&&d.require&&d.require("util").types;return e||p&&p.binding&&p.binding("util")}catch(e){}}(),h=f&&f.isTypedArray;function _(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var v,m,g,E=Array.prototype,y=Function.prototype,b=Object.prototype,S=c["__core-js_shared__"],T=y.toString,w=b.hasOwnProperty,R=(v=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",C=b.toString,O=T.call(Object),A=RegExp("^"+T.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=l?c.Buffer:void 0,k=c.Symbol,N=c.Uint8Array,P=I?I.allocUnsafe:void 0,D=(m=Object.getPrototypeOf,g=Object,function(e){return m(g(e))}),x=Object.create,L=b.propertyIsEnumerable,M=E.splice,U=k?k.toStringTag:void 0,j=function(){try{var e=ue(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),V=I?I.isBuffer:void 0,B=Math.max,F=Date.now,W=ue(c,"Map"),G=ue(Object,"create"),H=function(){function e(){}return function(t){if(!be(t))return{};if(x)return x(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function K(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function q(e){var t=this.__data__=new K(e);this.size=t.size}function J(e,t){var n=ve(e),r=!n&&_e(e),i=!n&&!r&&ge(e),o=!n&&!r&&!i&&Te(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var u in e)!t&&!w.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||de(u,c))||s.push(u);return s}function X(e,t,n){(void 0!==n&&!he(e[t],n)||void 0===n&&!(t in e))&&$(e,t,n)}function Q(e,t,n){var r=e[t];w.call(e,t)&&he(r,n)&&(void 0!==n||t in e)||$(e,t,n)}function Z(e,t){for(var n=e.length;n--;)if(he(e[n][0],t))return n;return-1}function $(e,t,n){"__proto__"==t&&j?j(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}z.prototype.clear=function(){this.__data__=G?G(null):{},this.size=0},z.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},z.prototype.get=function(e){var t=this.__data__;if(G){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return w.call(t,e)?t[e]:void 0},z.prototype.has=function(e){var t=this.__data__;return G?void 0!==t[e]:w.call(t,e)},z.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=G&&void 0===t?"__lodash_hash_undefined__":t,this},K.prototype.clear=function(){this.__data__=[],this.size=0},K.prototype.delete=function(e){var t=this.__data__,n=Z(t,e);return!(n<0)&&(n==t.length-1?t.pop():M.call(t,n,1),--this.size,!0)},K.prototype.get=function(e){var t=this.__data__,n=Z(t,e);return n<0?void 0:t[n][1]},K.prototype.has=function(e){return Z(this.__data__,e)>-1},K.prototype.set=function(e,t){var n=this.__data__,r=Z(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Y.prototype.clear=function(){this.size=0,this.__data__={hash:new z,map:new(W||K),string:new z}},Y.prototype.delete=function(e){var t=ce(this,e).delete(e);return this.size-=t?1:0,t},Y.prototype.get=function(e){return ce(this,e).get(e)},Y.prototype.has=function(e){return ce(this,e).has(e)},Y.prototype.set=function(e,t){var n=ce(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},q.prototype.clear=function(){this.__data__=new K,this.size=0},q.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},q.prototype.get=function(e){return this.__data__.get(e)},q.prototype.has=function(e){return this.__data__.has(e)},q.prototype.set=function(e,t){var n=this.__data__;if(n instanceof K){var r=n.__data__;if(!W||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Y(r)}return n.set(e,t),this.size=n.size,this};var ee,te=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[ee?a:++r];if(!1===t(i[s],s,i))break}return e};function ne(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":U&&U in Object(e)?function(e){var t=w.call(e,U),n=e[U];try{e[U]=void 0}catch(e){}var r=C.call(e);t?e[U]=n:delete e[U];return r}(e):function(e){return C.call(e)}(e)}function re(e){return Se(e)&&"[object Arguments]"==ne(e)}function ie(e){return!(!be(e)||function(e){return!!R&&R in e}(e))&&(Ee(e)?A:r).test(function(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function oe(e){if(!be(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=le(e),n=[];for(var r in e)("constructor"!=r||!t&&w.call(e,r))&&n.push(r);return n}function ae(e,t,n,r,i){e!==t&&te(t,(function(o,a){if(i||(i=new q),be(o))!function(e,t,n,r,i,o,a){var s=pe(e,n),c=pe(t,n),u=a.get(c);if(u)return void X(e,n,u);var d=o?o(s,c,n+"",e,t,a):void 0,l=void 0===d;if(l){var p=ve(c),f=!p&&ge(c),h=!p&&!f&&Te(c);d=c,p||f||h?ve(s)?d=s:Se(E=s)&&me(E)?d=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(s):f?(l=!1,d=function(e,t){if(t)return e.slice();var n=e.length,r=P?P(n):new e.constructor(n);return e.copy(r),r}(c,!0)):h?(l=!1,_=c,v=!0?(m=_.buffer,g=new m.constructor(m.byteLength),new N(g).set(new N(m)),g):_.buffer,d=new _.constructor(v,_.byteOffset,_.length)):d=[]:function(e){if(!Se(e)||"[object Object]"!=ne(e))return!1;var t=D(e);if(null===t)return!0;var n=w.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&T.call(n)==O}(c)||_e(c)?(d=s,_e(s)?d=function(e){return function(e,t,n,r){var i=!n;n||(n={});var o=-1,a=t.length;for(;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?$(n,s,c):Q(n,s,c)}return n}(e,we(e))}(s):be(s)&&!Ee(s)||(d=function(e){return"function"!=typeof e.constructor||le(e)?{}:H(D(e))}(c))):l=!1}var _,v,m,g;var E;l&&(a.set(c,d),i(d,c,r,o,a),a.delete(c));X(e,n,d)}(e,t,a,n,ae,r,i);else{var s=r?r(pe(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),X(e,a,s)}}),we)}function se(e,t){return fe(function(e,t,n){return t=B(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=B(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),_(e,this,s)}}(e,t,Oe),e+"")}function ce(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ue(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ie(n)?n:void 0}function de(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}function le(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||b)}function pe(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var fe=function(e){var t=0,n=0;return function(){var r=F(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(j?function(e,t){return j(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Oe);function he(e,t){return e===t||e!=e&&t!=t}var _e=re(function(){return arguments}())?re:function(e){return Se(e)&&w.call(e,"callee")&&!L.call(e,"callee")},ve=Array.isArray;function me(e){return null!=e&&ye(e.length)&&!Ee(e)}var ge=V||function(){return!1};function Ee(e){if(!be(e))return!1;var t=ne(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ye(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function be(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Se(e){return null!=e&&"object"==typeof e}var Te=h?function(e){return function(t){return e(t)}}(h):function(e){return Se(e)&&ye(e.length)&&!!o[ne(e)]};function we(e){return me(e)?J(e,!0):oe(e)}var Re,Ce=(Re=function(e,t,n){ae(e,t,n)},se((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=Re.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!be(n))return!1;var r=typeof t;return!!("number"==r?me(n)&&de(t,n.length):"string"==r&&t in n)&&he(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&Re(e,a,n,i)}return e})));function Oe(e){return e}n.exports=Ce}).call(this,n(15),n(58)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultAudioMetadata=t.defaultVideoMetadata=t.defaultMetadata=void 0;var r=n(16);t.defaultMetadata=Object.freeze({formatType:r.EFormatType.UNKNOWN,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]}),t.defaultVideoMetadata=Object.freeze({type:r.ETrackType.VIDEO,id:0,baseDTS:0,basePTS:0,timescale:1e3,codec:"",width:0,height:0,vps:[],pps:[],sps:[],pixelRatio:[]}),t.defaultAudioMetadata=Object.freeze({type:r.ETrackType.AUDIO,id:1,baseDTS:0,basePTS:0,timescale:1e3,codec:"",audioObjectType:2,sampleRate:0,sampleSize:16,channelCount:0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;var r=function(){function e(){this.list=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.list.length},enumerable:!1,configurable:!0}),e.prototype.write=function(e){this.list.push(e)},e.prototype.read=function(){return this.list.shift()},e.prototype.readAll=function(){var e=this.list;return this.list=[],e},e.prototype.clear=function(){this.list=[]},e}();t.Queue=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MP4Parser=t.Box=void 0;var u=n(19),d=n(3);Object.defineProperty(t,"Box",{enumerable:!0,get:function(){return d.Box}});var l=s(n(71)),p=n(47),f=n(76),h=n(78),_=n(16),v=n(32),m=n(34),g=c(n(25)),E=n(27),y=n(20),b=n(26),S=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.media=null,n.unhandleBuffer=null,n.formatType=_.EFormatType.MP4,n.boxes=[],n._handleBoxLoad=function(e){var t=e.header.type;if("hvcC"===t)n.hvcCBox=e;else if("avcC"===t)n.avcCBox=e;else if("esds"===t)n.esdsBox=e;else if("mp4a"===t)n.mp4aBox=e;else if("moov"===t){var r=d.Box.mapBoxToJSON(e);n.media=n.moovParser.createMedia(r),n.moofParser.init({media:n.media});var i=n.mp4aBox||{},o=i.sampleRate,a=void 0===o?0:o,s=i.sampleSize,c=void 0===s?0:s,u=i.channelCount,l=void 0===u?0:u,p=n.esdsBox||{},f=p.audioObjectType,h=void 0===f?0:f,v=p.codec,m=void 0===v?"":v,g=[],E=[],S=[],T=0,w=0;n.hvcCBox?(E=n.hvcCBox.vps,S=n.hvcCBox.pps,g=n.hvcCBox.sps,T=n.hvcCBox.width,w=n.hvcCBox.height):n.avcCBox&&(S=n.avcCBox.pps,g=n.avcCBox.sps,T=n.avcCBox.width,w=n.avcCBox.height);var R=n.options.progressive,C=n.media.options,O=C.duration,A=C.timeScale,I=!O;n.metadata={formatType:_.EFormatType.MP4,live:I,progressive:!I&&!!R,url:n.loader.url,basePTS:0,baseDTS:0,duration:O,timescale:A,tracks:n.media.getTracks().map((function(e){var t,r={};switch(r.id=e.options.id,r.type=e.options.type,r.timescale=e.options.timeScale,r.baseDTS=0,r.basePTS=0,r.type){case _.ETrackType.VIDEO:r.width=T||e.options.width,r.height=w||e.options.height,r.vps=E,r.sps=g,r.pps=S,r.rotate=(0,b.getRotate)(e.options.matrix),r.pixelRatio=[],r.codec=n.hvcCBox?n.hvcCBox.codec:(null===(t=n.avcCBox)||void 0===t?void 0:t.codec)||"";break;case _.ETrackType.AUDIO:r.audioObjectType=h,r.sampleRate=a,r.sampleSize=c,r.channelCount=l,r.codec=m;break;default:r.type=_.ETrackType.UNKNOWN}return r}))},y.logger.info("loadedmetadata metadata:",n.metadata),n.emit("loadedmetadata",n.metadata)}else"moof"===t&&(y.logger.info("\u68c0\u6d4b\u5230moof box\u88ab\u52a0\u8f7d\uff0c\u5f53\u524d\u7d20\u6750\u4e3afMP4"),n.moofParser.parse(d.Box.mapBoxToJSON(e)))},n.convertSampleToPacket=function(e){if(e.trackType===_.ETrackType.VIDEO&&(n.hvcCBox||n.avcCBox)){var t=e.data,r=e.isSync,i=n.hvcCBox||n.avcCBox,o=i.lengthSizeMinusOne,a=i.codec,s=g.default.extractAVCCNAL(t,o),c=!1;return n.hvcCBox&&(c=s.every((function(e){return v.H265NAL.isNonRef(e)}))),r&&(n.hvcCBox?(n.hvcCBox.pps.forEach((function(e){return s.unshift(e)})),n.hvcCBox.sps.forEach((function(e){return s.unshift(e)})),n.hvcCBox.vps.forEach((function(e){return s.unshift(e)}))):n.avcCBox&&(n.avcCBox.pps.forEach((function(e){return s.unshift(e)})),n.avcCBox.sps.forEach((function(e){return s.unshift(e)})))),{codec:a,trackId:e.trackId,trackType:e.trackType,isLast:e.isLast,dts:e.dts,pts:e.cts+e.dts,isSync:e.isSync,isNonRef:c,data:s,size:s.reduce((function(e,t){return e+t.byteLength}),0),offset:e.offset}}if(e.trackType===_.ETrackType.AUDIO&&n.esdsBox)return{codec:n.esdsBox.codec,trackId:e.trackId,trackType:e.trackType,dts:e.dts,pts:e.cts+e.dts,isLast:e.isLast,isSync:!0,isNonRef:!1,data:[e.data],size:e.data.byteLength,offset:e.offset}},n.options=t,n.moovParser=new f.MoovParser,n.moofParser=new h.MoofParser,t.sub||n.on("loadedbox",n._handleBoxLoad),n}return i(t,e),t.prototype.probe=function(e){if(e.byteLength<8)return!1;return"ftyp"===[e[4],e[5],e[6],e[7]].map((function(e){return String.fromCharCode(e)})).join("")},t.prototype.processPackets=function(e,t){var n=this,r=[];if(this.media&&e.byteLength){this.media.getTracks().forEach((function(i){i.processSamples(e,t).forEach((function(e){var t=n.convertSampleToPacket(e);t&&r.push(t)}))}));var i=this.getMinNextSampleOffset()-t;this.unhandleBuffer=i>=e.byteLength?null:e.slice(i).buffer}return r},t.prototype.seek=function(e){var t;this.unhandleBuffer=null,this.loader.suspend(),null===(t=this.media)||void 0===t||t.getTracks().map((function(t){return t.seek(e)})),this.loader.loadRange(this.getMinNextSampleOffset())},t.prototype.onProgress=function(e){var t=e.data,n=e.offset;if(t.length&&(this.unhandleBuffer&&(t=u.ByteBuffer.concatUint8(new Uint8Array(this.unhandleBuffer),t),n-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null),this.metadata||this.parse(new u.ByteBuffer(t.buffer,t.byteOffset,t.byteLength),n),this.metadata)){var r=this.processPackets(t,n);r.length&&this.emit("loadeddata",{packets:r})}},t.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end")},t.prototype.getMinNextSampleOffset=function(){return this.media?Math.min.apply(Math,this.media.getTracks().map((function(e){return e.getNextSampleOffset()}))):0},t.prototype.parse=function(e,n){var r,i=this;void 0===n&&(n=0);for(var o=e.offset,a=0,s=function(){a=e.offset-o;var s=new p.BoxHeader(e,n+a);if(0===s.size){var f=new Error("box [".concat(s.type,"] size \u4e3a 0"));return y.logger.error(f),c.emit("error",{code:_.EErrorCode.PARSER,message:f.message,origin:f}),"break"}if(c.options.progressive&&"mdat"===s.type&&!c.metadata){var h=s.start+s.size;return c.loader.suspend(),c.unhandleBuffer=null,y.logger.info("\u68c0\u6d4b\u5230mdat box\u5728moov box\u4e4b\u540e\uff0c\u8df3\u8f6cmoov\u8d77\u59cb\u504f\u79fb\u4f4d",h),c.loader.loadRange(h).then((function(e){e&&(i.unhandleBuffer=null,i.loader.offset===h&&(y.logger.info("moov\u52a0\u8f7d\u5b8c\u6210\uff0c\u7ee7\u7eed\u52a0\u8f7dmdat",s.start),i.loader.jump(s.start),i.loader.status!==E.ELoaderStatus.SUSPENDED&&i.loader.loadRange(s.start,h)))})),{value:void 0}}var v=s.size-s.length;if(!(e.unreadLength>=v))return e.back(s.length),"break";var m=l[s.type];if(m){var g=new u.ByteBuffer(e.buffer,e.offset,v);if((r=new m(s,g)).isContainer){var S=new t({sub:!0});(0,b.proxyEvent)(S,c,["loadedbox"]),S.parse(g,a+n+s.length),S.removeAllListeners(),S.boxes.forEach((function(e){r.append(e)}))}}else r=new d.Box(s);e.skip(v),c.boxes.push(r),c.emit("loadedbox",r)},c=this;e.unreadLength>=8;){var f=s();if("object"==typeof f)return f.value;if("break"===f)break}e.unreadLength&&(this.unhandleBuffer=e.readToBuffer())},t.prototype.reset=function(){e.prototype.reset.call(this),this.boxes=[],this.unhandleBuffer=null,this.avcCBox=void 0,this.hvcCBox=void 0,this.mp4aBox=void 0,this.media=null,this.moofParser.reset()},t}(m.BasicParser);t.MP4Parser=S},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxBTRT=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.bufferSizeDB=n.read(4),r.maxBitrate=n.read(4),r.avgBitrate=n.read(4),r}return i(t,e),t}(n(3).Box);t.BoxBTRT=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxDREF=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.version=n.read(1),r.flag=n.read(3),r.entryCount=n.read(4),r}return i(t,e),t}(n(7).BoxContainer);t.BoxDREF=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxELST=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.entries=[],r.version=n.read(1),r.flag=n.read(3),r.entryCount=n.read(4);for(var i=0;i<r.entryCount;i++){var o=1===r.version;r.entries.push({segmentDuration:n.read(o?8:4),mediaTime:n.read(o?8:4),mediaRateInteger:n.read(2),mediaRateFraction:n.read(2)})}return r}return i(t,e),t}(n(3).Box);t.BoxELST=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxESDS=void 0;var o=n(3),a=n(183),s=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.descriptors=[],r.audioObjectType=0,r.samplingfrequencyIndex=0,r.descriptors=a.DescriptorProbe.extractDescriptors(n);var i=a.Descriptor.findDescriptor(r.descriptors,a.EDescriptorTag.DCD),o=a.Descriptor.findDescriptor(r.descriptors,a.EDescriptorTag.DSD);return o&&(r.audioObjectType=o.audioObjectType,r.samplingfrequencyIndex=o.samplingfrequencyIndex),r.codec=i&&o?"mp4a."+i.mepg4Audio.toString(16)+"."+o.audioObjectType.toString(16):"mp4a",r}return i(t,e),t}(o.FullBox);t.BoxESDS=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SLCDescriptor=t.DSDescriptor=t.DCDescriptor=t.ESDescriptor=t.Descriptor=t.DescriptorProbe=t.EDescriptorTag=void 0;var o,a=n(10),s=n(19);!function(e){e[e.OD=1]="OD",e[e.IOD=2]="IOD",e[e.ESD=3]="ESD",e[e.DCD=4]="DCD",e[e.DSD=5]="DSD",e[e.SLCD=6]="SLCD"}(o=t.EDescriptorTag||(t.EDescriptorTag={}));var c=function(){function e(t){this.tag=t.read(1),this.size=e.readSize(t)}return e.readSize=function(e){for(var t,n=0,r=4;r--&&(n=n<<7|127&(t=e.read(1)),128&t););return n},e.extractDescriptors=function(t){for(var n,r,i,a=[];t.unreadLength;){if(n=new e(t),i=new s.ByteBuffer(t.buffer,t.offset,n.size),t.skip(n.size),n.size<=0)return a;switch(n.tag){case o.ESD:r=new d(n,i);break;case o.DCD:r=new l(n,i);break;case o.DSD:r=new p(n,i);break;case o.SLCD:r=new f(n,i);break;default:r=null}r&&i.unreadLength&&(r.children=e.extractDescriptors(i)),a.push(r)}return a},e}();t.DescriptorProbe=c;var u=function(){function e(e){this.children=[],this.probe=e}return e.findDescriptor=function(t,n){var r;return t.some((function(t){return!!(r=t.probe.tag===n?t:e.findDescriptor(t.children,n))})),r},e}();t.Descriptor=u;var d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.streamDependenceFlag=0,r.URLFlag=0,r.OCRStreamFlag=0,r.esId=n.read(2),r.esFlag=n.read(1),128&r.esFlag&&(r.streamDependenceFlag=n.read(2)),64&r.esFlag&&(r.URLFlag=n.read(1),n.skip(r.URLFlag)),32&r.esFlag&&(r.OCRStreamFlag=n.read(2)),r}return i(t,e),t}(u);t.ESDescriptor=d;var l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.mepg4Audio=n.read(1),r.audioStream=n.read(1),r.bufferSize=n.read(3),r.maxBitrate=n.read(4),r.avgBitrate=n.read(4),r}return i(t,e),t}(u);t.DCDescriptor=l;var p=function(e){function t(t,n){var r=e.call(this,t)||this,i=new a.BitBuffer(n.read(2),16);return r.audioObjectType=i.read(5),r.samplingfrequencyIndex=i.read(4),r.channel=i.read(4),r.frameLengthFlag=i.read(1),r.dependsOnCoreCoder=i.read(1),r.extesionFlag=i.read(1),r}return i(t,e),t}(u);t.DSDescriptor=p;var f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.esId=n.read(2),r}return i(t,e),t}(u);t.SLCDescriptor=f},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxFTYP=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;for(r.compatibleBrands=[],r.majorBrand=String.fromCharCode(n.read(1),n.read(1),n.read(1),n.read(1)),r.minorVersion=n.read(4);n.unreadLength>=4;)r.compatibleBrands.push(String.fromCharCode(n.read(1),n.read(1),n.read(1),n.read(1)));return r}return i(t,e),t}(n(3).Box);t.BoxFTYP=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxHDLR=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;for(r.name="",r.version=n.read(1),r.flag=n.read(3),r.preDefined=String.fromCharCode(n.read(1),n.read(1),n.read(1),n.read(1)),r.handleType=String.fromCharCode(n.read(1),n.read(1),n.read(1),n.read(1)),n.skip(12);n.unreadLength>0;)r.name+=String.fromCharCode(n.read(1));return r}return i(t,e),t}(n(3).Box);t.BoxHDLR=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxMDAT=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.data=n.readToUint8(t.size-t.length),r}return i(t,e),t}(n(3).Box);t.BoxMDAT=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxMDHD=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.version=n.read(1),r.flag=n.read(3);var i=1===r.version;r.createTime=r.toStandardTime(n.read(i?8:4)),r.modifyTime=r.toStandardTime(n.read(i?8:4)),r.timeScale=n.read(4),r.duration=n.read(i?8:4);var o=n.read(2),a=function(e){return 96+(31&e)};return r.language=String.fromCharCode(a(o>>10),a(o>>5),a(o)),r.quality=Number(n.read(1)+"."+n.read(1)),r}return i(t,e),t}(n(3).Box);t.BoxMDHD=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxMP4A=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return n.skip(6),r.dataReferenceIndex=n.read(2),n.skip(8),r.channelCount=n.read(2),r.sampleSize=n.read(2),n.skip(4),r.sampleRate=n.read(4)>>>16,r}return i(t,e),t}(n(7).BoxContainer);t.BoxMP4A=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxMVHD=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.matrix=[],r.version=n.read(1),r.flag=n.read(3),r.createTime=r.toStandardTime(n.read(4)),r.modifyTime=r.toStandardTime(n.read(4)),r.timeScale=n.read(4),r.duration=n.read(4),r.rate=Number(n.read(2)+"."+n.read(2)),r.volume=Number(n.read(1)+"."+n.read(1)),n.skip(10);for(var i=0;i<9;i++)r.matrix.push(Number(n.read(2)+"."+n.read(2)));return n.skip(24),r.nextTrackId=n.read(4),r}return i(t,e),t}(n(3).Box);t.BoxMVHD=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxPASP=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;for(r.data=[];n.unreadLength>0;)r.data.push(n.read(1));return r}return i(t,e),t}(n(3).Box);t.BoxPASP=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxTKHD=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.matrix=[],r.version=n.read(1),r.flag=n.read(3),r.createTime=r.toStandardTime(n.read(4)),r.modifyTime=r.toStandardTime(n.read(4)),r.trackId=n.read(4),n.skip(4),r.duration=n.read(4),n.skip(8),r.layer=n.read(2),r.alternateGroup=n.read(2),r.volume=Number(n.read(1)+"."+n.read(1)),n.skip(2);for(var i=0;i<9;i++)r.matrix.push(Number(n.read(2)+"."+n.read(2)));return r.width=Number(n.read(2)+"."+n.read(2)),r.height=Number(n.read(2)+"."+n.read(2)),r}return i(t,e),t}(n(3).Box);t.BoxTKHD=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxURL=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.version=n.read(1),r.flag=n.read(3),r}return i(t,e),t}(n(3).Box);t.BoxURL=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxVMHD=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.version=n.read(1),r.flag=n.read(3),r.graphicsMode=n.read(2),r.opcolor=[n.read(2),n.read(2),n.read(2)],r}return i(t,e),t}(n(3).Box);t.BoxVMHD=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxMOOF=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(7).BoxContainer);t.BoxMOOF=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxTRAF=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(7).BoxContainer);t.BoxTRAF=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxMFHD=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(3).FullBox);t.BoxMFHD=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxMVEX=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(7).BoxContainer);t.BoxMVEX=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxSDTP=void 0;var o=n(3),a=n(10),s=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.isLeadings=[],r.sampleDependsOns=[],r.sampleIsDependedOns=[],r.sampleHasRedundancys=[];for(var i=0,o=void 0;i<n.unreadLength;i++)o=new a.BitBuffer(n.read(1),8),r.isLeadings[i]=o.read(2),r.sampleDependsOns[i]=o.read(2),r.sampleIsDependedOns[i]=o.read(2),r.sampleHasRedundancys[i]=o.read(2);return r}return i(t,e),t}(o.FullBox);t.BoxSDTP=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxSIDX=void 0;var o=n(3),a=n(10),s=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.references=[],r.trackId=n.read(4),r.timescale=n.read(4),0===r.version?(r.pts=n.read(4),r.offset=n.read(4)):(r.pts=n.read(8),r.offset=n.read(8)),n.skip(2),r.references=[];for(var i=n.read(2),o=0;o<i;o++){var s=new a.BitBuffer(n.read(4),32),c=n.read(4),u=new a.BitBuffer(n.read(4),32);r.references.push({type:s.read(1),size:s.read(31),duration:c,startWithSap:u.read(1),sapType:u.read(3),sapDeltaTime:u.read(28)})}return r}return i(t,e),t}(o.FullBox);t.BoxSIDX=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxTFDT=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return 1===r.version?r.baseMediaDecodeTime=n.read(8):r.baseMediaDecodeTime=n.read(4),r}return i(t,e),t}(n(3).FullBox);t.BoxTFDT=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxTREX=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.trackId=n.read(4),r.defaultSampleDescriptionIndex=n.read(4),r.defaultSampleDuration=n.read(4),r.defaultSampleSize=n.read(4),r.defaultSampleFlag=n.read(4),r}return i(t,e),t}(n(3).FullBox);t.BoxTREX=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxCTTS=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.sampleCounts=[],r.sampleOffsets=[],r.version=n.read(1),r.flag=n.read(3),r.entryCount=n.read(4);for(var i=0;i<r.entryCount;i++)r.sampleCounts.push(n.read(4)),r.sampleOffsets.push(n.readInt(4));return r}return i(t,e),t}(n(3).Box);t.BoxCTTS=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxSTCO=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.chunkOffsets=[],r.version=n.read(1),r.flag=n.read(3);for(var i=n.read(4),o=0;o<i;o++)r.chunkOffsets.push(n.read(4));return r}return i(t,e),t}(n(3).Box);t.BoxSTCO=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxCO64=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.chunkOffsets=[],r.version=n.read(1),r.flag=n.read(3);for(var i=n.read(4),o=0;o<i;o++)r.chunkOffsets.push(n.read(8));return r}return i(t,e),t}(n(3).Box);t.BoxCO64=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxSTSC=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.entries=[],r.version=n.read(1),r.flag=n.read(3);for(var i=n.read(4),o=0;o<i;o++)r.entries.push({firstChunk:n.read(4),samplePerChunk:n.read(4),sampleDescriptionIndex:n.read(4)});return r}return i(t,e),t}(n(3).Box);t.BoxSTSC=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxSTSD=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.version=n.read(1),r.flag=n.read(3),r.entryCount=n.read(4),r}return i(t,e),t}(n(7).BoxContainer);t.BoxSTSD=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxSTSS=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.sampleNumbers=[],r.version=n.read(1),r.flag=n.read(3);for(var i=n.read(4),o=0;o<i;o++)r.sampleNumbers.push(n.read(4));return r}return i(t,e),t}(n(7).BoxContainer);t.BoxSTSS=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxSTSZ=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.isContainer=!0,r.sampleSizes=[],r.version=n.read(1),r.flag=n.read(3),r.sampleSize=n.read(4);for(var i=n.read(4),o=0;o<i;o++)0===r.sampleSize?r.sampleSizes.push(n.read(4)):r.sampleSizes.push(r.sampleSize);return r}return i(t,e),t}(n(3).Box);t.BoxSTSZ=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BoxSTTS=void 0;var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.sampleCounts=[],r.sampleDurations=[],r.version=n.read(1),r.flag=n.read(3);for(var i=n.read(4),o=0;o<i;o++)r.sampleCounts[o]=n.read(4),r.sampleDurations[o]=n.read(4);return r}return i(t,e),t}(n(3).Box);t.BoxSTTS=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Media=void 0;var r=function(){function e(e){this.tracks=[],this.options=e}return e.prototype.addTrack=function(e){this.tracks.push(e)},e.prototype.getTracks=function(){return this.tracks},e.prototype.getTrackById=function(e){return this.tracks.find((function(t){return t.options.id===e}))},e}();t.Media=r},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(212),i=n(213),o=n(214);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):p(e,t);if("Buffer"===t.type&&o(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(d(t),e=s(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function _(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return R(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var d=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===c)return d*a}else-1!==d&&(o-=o-d),d=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var l=!0,p=0;p<c;p++)if(u(e,o+p)!==u(t,p)){l=!1;break}if(l)return o}return-1}function E(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function y(e,t,n,r){return W(B(t,e.length-n),e,n,r)}function b(e,t,n,r){return W(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return b(e,t,n,r)}function T(e,t,n,r){return W(F(t),e,n,r)}function w(e,t,n,r){return W(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function R(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],d=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l<=n)switch(l){case 1:u<128&&(d=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(d=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(d=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(d=c)}null===d?(d=65533,l=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=l}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return d(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return l(null,e)},c.allocUnsafeSlow=function(e){return l(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):_.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),d=e.slice(t,n),l=0;l<s;++l)if(u[l]!==d[l]){o=u[l],a=d[l];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=V(e[o]);return i}function k(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function x(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,r,o){return o||L(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,o){return o||L(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):x(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):x(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:B(new c(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(15))},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),d=0,l=s>0?a-4:a;for(n=0;n<l;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[d++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(d(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,d=-7,l=n?i-1:0,p=n?-1:1,f=e[t+l];for(l+=p,o=f&(1<<-d)-1,f>>=-d,d+=s;d>0;o=256*o+e[t+l],l+=p,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;d>0;a=256*a+e[t+l],l+=p,d-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,d=(1<<u)-1,l=d>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,h=r?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+l>=1?p/c:p*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=d?(s=0,a=d):a+l>=1?(s=(t*c-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+f]=255&a,f+=h,a/=256,u-=8);e[n+f-h]|=128*_}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(28),o=n(5),a=n(4),s=(n(90),n(23));function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var p=n(0);function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}var _,v,m,g,E,y,b=n(6),S=n(9);function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?c(e):t;var n}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}!function(e){e[e.LIVE=1]="LIVE",e[e.VOD=2]="VOD",e[e.RTC=3]="RTC"}(_||(_={})),function(e){e[e.JS_ERROR=7001]="JS_ERROR",e[e.INVALID_OPTIONS=7002]="INVALID_OPTIONS"}(v||(v={})),function(e){e[e.NOT_SUPPORT=7003]="NOT_SUPPORT",e[e.MAX_RETRY=7004]="MAX_RETRY",e[e.STREAM_ABORTED=7005]="STREAM_ABORTED",e[e.AGORA_EXEC_ERROR=9e3]="AGORA_EXEC_ERROR"}(m||(m={})),function(e){e.EXEC_ERROR="dove_exec_error",e.AGORA_STREAM_ABORTED="agora_stream_aborted",e.AGORA_HOST_NO_STREAM="agora_host_no_stream"}(g||(g={})),function(e){e.H264="H264",e.H265="H265"}(E||(E={})),function(e){e.QUIT="quit",e.SERVER_TIMEOUT="server_timeout",e.BECOME_AUDIENCE="become_audience"}(y||(y={}));var C=function(){function e(){u(this,e),Object(p.a)(this,"_eventMap",{})}return l(e,[{key:"on",value:function(e,t){return this._eventMap[e]?this._eventMap[e].push(t):this._eventMap[e]=[t],this}},{key:"off",value:function(e,t){var n=this._eventMap[e];return Array.isArray(n)&&(this._eventMap[e]=n.filter((function(e){return e!==t}))),this}},{key:"once",value:function(e,t){var n=this,r=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];n.off(e,r),t.apply(n,o)};this.on(e,r)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this,o=this._eventMap[e];return!!Array.isArray(o)&&(o.forEach((function(e){return e.apply(i,n)})),!0)}},{key:"getAllListeners",value:function(e){return this._eventMap[e]}},{key:"removeAllListeners",value:function(e){void 0===e?this._eventMap={}:this._eventMap[e]&&(this._eventMap[e]=[])}}]),e}(),O=function e(t,n,r){u(this,e),Object(p.a)(this,"code",void 0),Object(p.a)(this,"message",void 0),Object(p.a)(this,"error",void 0),this.code=t,this.message=n,this.error=r},A={name:"@ali/dove-core",version:"1.0.10"},I=function(){},k=function(e){if(e){if(e.startsWith("artc://"))return"RTS";if(e.includes("m3u8"))return"HLS";if(e.includes("mp4"))return"MP4";if(e.includes("flv"))return"FLV"}return""},N=function(e){return"HLS"===k(e)},P=function(e){return void 0===e},D=function(e,t,n){e&&e.addEventListener(t,n)};var x=function(e,t){var n=Date.now();return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=Date.now();a-n>t&&(e.apply(this,i),n=a)}},L=function(e,t){var n=e-t;return n>0?n:0},M={log:"#333",info:"blue",error:"red"};function U(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=window.console||{log:I,info:I,error:I};if(n.unshift("%c[DoveCore ".concat(e,"] "),"color: ".concat(M[e],";text-decoration: underline;")),"info"===e){var o,a=null===(o=window.__dove)||void 0===o?void 0:o.options.debug;a&&i[e].apply(i,n)}else i[e].apply(i,n)}}var j={log:U("log"),info:U("info"),error:U("error")};function V(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){V(o,r,i,a,s,"next",e)}function s(e){V(o,r,i,a,s,"throw",e)}a(void 0)}))}}function F(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var W,G,H=n(81),z="canplay",K="waiting",Y="media",q="ended",J="RTSPlayer",X="VideoXPlayer",Q="AgoraPlayer",Z="expose",$="firstframe",ee="abnormal",te="error",ne="retry",re="heartbeat",ie=function(e,t){var n=e-t;return n>0?n:0},oe=function(){function e(t,n,r){u(this,e),Object(p.a)(this,"videoEle",null),Object(p.a)(this,"options",void 0),Object(p.a)(this,"state",{timeline:{expose:0,canplay:0,firstTimeUpdate:0},buffering:{crtPos:0,lastPos:0,detected:!1,abnormalCount:0},sent:{canplay:!1},extra:{},heartbeat:{added:!1,timer:null,sequence:1}}),Object(p.a)(this,"abnormalTimer",void 0),this.videoEle=n,this.options=r,t===J&&(this.watchExpose(),this.watchCanPlay(),this.watchFirstFrame(),this.watchError())}return l(e,[{key:"bind",value:function(e,t){this.videoEle&&this.videoEle.addEventListener(e,t)}},{key:"once",value:function(e,t){var n=this;if(this.videoEle){var r=function(){var i;t(),null===(i=n.videoEle)||void 0===i||i.removeEventListener(e,r)};this.videoEle.addEventListener(e,r)}}},{key:"watchExpose",value:function(){var e=this;this.once("loadstart",(function(){e.state.timeline.expose||(e.options.onTrack(Z),e.state.timeline.expose=Date.now())}))}},{key:"watchCanPlay",value:function(){var e=this;this.once("canplay",(function(){e.state.timeline.canplay||(e.state.timeline.canplay=Date.now(),e.trySendFirstFrame(),e.watchAbnormal())}))}},{key:"watchFirstFrame",value:function(){var e=this;this.once("timeupdate",(function(){e.state.timeline.firstTimeUpdate||(e.state.timeline.firstTimeUpdate=Date.now(),e.trySendFirstFrame())}))}},{key:"trySendFirstFrame",value:function(){var e=this.state.timeline,t=e.canplay,n=e.expose,r=e.firstTimeUpdate,i=this.state.extra,o=i.sdkCanPlay,a=i.sdkLoadStart;!this.state.sent.canplay&&t&&n&&(this.options.onTrack($,{withCanPlay:ie(t,n),withFirstTimeUpdate:ie(r,n),sdk:ie(o,a)}),this.state.sent.canplay=!0,this.watchHeartBeat())}},{key:"watchError",value:function(){var e=this;this.bind("error",(function(t){j.info("RTS video element error",e.options),e.clearHeartBeat(),e.options.onError(t)}))}},{key:"watchHeartBeat",value:function(){var e=this;try{var t,n=(this.options.trackOptions||{}).options,r=void 0===n?{}:n,i=r.heartbeat.interval||5e3;r.heartbeat.enable&&!(null===(t=this.state.heartbeat)||void 0===t?void 0:t.added)&&(this.state.heartbeat.timer=setInterval((function(){var t;if(!(null===(t=window.__dove)||void 0===t?void 0:t.paused)){var n=e.state.heartbeat.sequence++;e.options.onTrack(re,{sequence:n,accumulate:n*i})}}),i),this.state.heartbeat.added=!0)}catch(e){}}},{key:"clearHeartBeat",value:function(){this.state.heartbeat.timer&&(clearInterval(this.state.heartbeat.timer),this.state.heartbeat.timer=null)}},{key:"watchAbnormal",value:function(){}},{key:"watchAbnormalWithMeasure",value:function(){var e=this;this.abnormalTimer=setInterval((function(){return e.checkBuffering()}),1e3)}},{key:"watchAbnormalWithWaiting",value:function(){var e=this;this.once("wait",(function(){e.state.timeline.expose}))}},{key:"checkBuffering",value:function(){var e,t,n;(!this.state.buffering.lastPos||this.state.buffering.lastPos<0)&&(this.state.buffering.lastPos=null===(t=this.videoEle)||void 0===t?void 0:t.currentTime);if(!(null===(e=this.videoEle)||void 0===e?void 0:e.paused)){var r,i=null===(r=this.videoEle)||void 0===r?void 0:r.currentTime;if(i){var o=i-this.state.buffering.lastPos;if(n=o,!isNaN(n)&&"number"==typeof n&&isFinite(n))Math.abs(Math.floor(1e3*o)-1e3)<500?(this.state.buffering.detected,this.state.buffering.detected=!1):(this.state.buffering.detected=!0,this.state.buffering.abnormalCount++),this.state.buffering.lastPos=i}}}},{key:"clear",value:function(){clearInterval(this.abnormalTimer),this.abnormalTimer=null}},{key:"setExtraState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state=Object(S._)(Object(b._)({},this.state),{extra:Object(b._)({},this.state.extra,e)})}}]),e}();W="\n  .dove-video-rts {\n    background-color: #000;\n  }\n",(G=document.createElement("style")).type="text/css",G.innerHTML=W,document.head.appendChild(G);var ae=function(e){h(n,e);var t=R(n);function n(e,r){u(this,n);var i=t.call(this);Object(p.a)(c(i),"options",void 0),Object(p.a)(c(i),"controller",void 0),Object(p.a)(c(i),"tracker",void 0),Object(p.a)(c(i),"videoEle",void 0),Object(p.a)(c(i),"aliRTSClient",void 0),Object(p.a)(c(i),"remoteStream",void 0),Object(p.a)(c(i),"retryCount",0),Object(p.a)(c(i),"abnormal",void 0),Object(p.a)(c(i),"getCanvasEle",void 0),Object(p.a)(c(i),"init",(function(){i.container(),i.start()})),Object(p.a)(c(i),"container",(function(){var e=i.options||{},t=e.container,n=e.videoEleOptions,r=e.mode;if(t&&!(null==t?void 0:t.querySelector("#".concat("dove-video")))){var o=document.createElement("video");o.id="dove-video",i.videoEle=o,t.appendChild(o),i.bindVideoEleEvent(),i.tracker=new oe(J,o,{onTrack:i.handleTrack,onError:i.handleError,trackOptions:i.options.track}),i.controller.emit("mount"),t.classList.add("dove-video-rts"),o.style.cssText="width:100%; height:100%;",n&&Object.keys(n).forEach((function(e){o[e]=n[e]})),r===_.LIVE&&(o.muted=!0,o.play()),r===_.VOD&&function(e,t){var n=t.onSuccess,r=void 0===n?I:n,i=t.onFailure,o=void 0===i?I:i;e&&e.play().then(r).catch(o)}(o,{onFailure:function(){o.muted=!0,o.play()}}),o.controls=!1}})),Object(p.a)(c(i),"bindVideoEleEvent",(function(){i.videoEle&&(D(i.videoEle,"play",(function(){i.controller.emit("play")})),D(i.videoEle,"pause",(function(){i.controller.emit("pause")})),D(i.videoEle,"volumechange",(function(e){i.controller.emit("volumechange",e)})),D(i.videoEle,"timeupdate",x((function(e){i.controller.emit("timeupdate",e)}),1e3)))}));var o=c(i);Object(p.a)(c(i),"start",B((function(){return F(this,(function(e){switch(e.label){case 0:return[4,o.initRTS()];case 1:return e.sent(),[4,o.subscribe()];case 2:return e.sent(),[4,o.play()];case 3:return e.sent(),[2]}}))}))),Object(p.a)(c(i),"initRTS",(function(){i.tracker.setExtraState({sdkLoadStart:Date.now()});var e=i.options.rtsOptions||{},t=e.preAliRTSClient,n=e.preRemoteStream,r=null;r=t||H.AliRTS.createClient({customReporter:function(e){i.controller.emit("aliyun-rts-sdk-report",e)}}),i.setAliRTSClient(r),n&&i.setRemoteStream(n),i.aliRTSClient&&(i.aliRTSClient.on("onError",(function(e){i.handleError(e)})),i.aliRTSClient.on("onPlayEvent",(function(e){e.event===K?(i.controller.emit("waiting",e),i.abnormal.detected=!0,i.abnormal.count++,i.handleTrack(ee,i.abnormal)):e.event===z?(i.tracker.setExtraState({sdkCanPlay:Date.now()}),i.tracker.trySendFirstFrame(),i.controller.emit("canplay",e),i.retryCount=0):e.event===q?i.handleError(new O(m.STREAM_ABORTED,"remote stream aborted!")):e.event===Y&&i.handleStreamAborted(e)})))})),Object(p.a)(c(i),"checkStreamAborted",(function(e){var t,n=e.callback;return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o,a=(null===(o=this.options)||void 0===o?void 0:o.rtsOptions)||{},s=void 0===a.maxRetryCount?5:a.maxRetryCount,c=void 0===a.interval?1e4:a.interval,u=r[0],d=u.data,l=d.audio,p=void 0===l?{}:l,f=d.video,h=void 0===f?{}:f,_=Date.now();if(0===p.bytesReceivedPerSecond&&0===h.bytesReceivedPerSecond&&(t||(t=_),_-t>c))if(this.retryCount<s)n.apply(this,r),t=_;else if(this.retryCount===s){var v=new O(m.MAX_RETRY,"max retry count!",{});this.handleError(v),this.destroy()}}})),Object(p.a)(c(i),"handleStreamAborted",i.checkStreamAborted({callback:function(){i.retry(),i.retryCount=i.retryCount+1}}));var a=c(i);Object(p.a)(c(i),"retry",B((function(){return F(this,(function(e){switch(e.label){case 0:return j.info("retry...",a.options),a.handleTrack(ne,{}),[4,a.unsubscribe()];case 1:return e.sent(),[4,a.subscribe()];case 2:return e.sent(),[4,a.play()];case 3:return e.sent(),[2]}}))})));var s=c(i);return Object(p.a)(c(i),"subscribe",B((function(){var e,t;return F(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),s.controller.emit("loading"),s.remoteStream?[2,s.remoteStream]:[3,1];case 1:return[4,s.aliRTSClient.subscribe(s.options.src)];case 2:return e=n.sent(),s.setRemoteStream(e),[2,e];case 3:return[3,5];case 4:return t=n.sent(),s.handleError(t),[2,void 0];case 5:return[2]}}))}))),Object(p.a)(c(i),"destroy",(function(){i.unsubscribe(),i.removeContainer(),i.controller.emit("unmount")})),Object(p.a)(c(i),"play",(function(){i.videoEle&&(i.remoteStream&&i.remoteStream.play(i.videoEle),i.videoEle.play())})),Object(p.a)(c(i),"pause",(function(){i.videoEle&&(i.remoteStream,i.videoEle.pause())})),Object(p.a)(c(i),"getVideoEle",(function(){return i.videoEle})),Object(p.a)(c(i),"handleTrack",(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(S._)(Object(b._)({},i.options),{container:null===(t=i.options.container)||void 0===t?void 0:t.nodeName,player:J});i.controller.emit("track",{trackKey:e,commonParams:r,trackParams:n,ts:Date.now()})})),Object(p.a)(c(i),"handleError",(function(e){i.controller.handleError(e),i.handleTrack(te,e)})),Object(p.a)(c(i),"removeContainer",(function(){var e=(i.options||{}).container,t=null==e?void 0:e.querySelector("#".concat("dove-video"));t&&(null==e||e.removeChild(t)),null==e||e.classList.remove("dove-video-rts")})),i.options=e,i.controller=r,i.abnormal={detected:!1,count:0},i.init(),i}return l(n,[{key:"setRemoteStream",value:function(e){this.remoteStream=e}},{key:"setAliRTSClient",value:function(e){this.aliRTSClient=e}},{key:"unsubscribe",value:function(){this.aliRTSClient.unsubscribe(),this.setRemoteStream(null),j.info("unsubscribe remoteStream",this.options)}},{key:"muted",get:function(){return this.videoEle.muted},set:function(e){this.remoteStream.muted=e,this.videoEle.muted=e}},{key:"duration",get:function(){return this.videoEle.duration}},{key:"currentTime",get:function(){return this.videoEle.currentTime},set:function(e){this.videoEle.currentTime=e}},{key:"src",get:function(){return this.options.src},set:function(){j.info("You should not set src, please use new Dove instead")}},{key:"videoHeight",get:function(){return this.videoEle.videoHeight}},{key:"videoWidth",get:function(){return this.videoEle.videoWidth}},{key:"volume",get:function(){return this.videoEle.volume}},{key:"videoCodec",get:function(){return"h264"}},{key:"audioCodec",get:function(){return"opus"}},{key:"playbackRate",get:function(){return this.videoEle.playbackRate},set:function(e){this.videoEle.playbackRate=e}},{key:"paused",get:function(){return this.videoEle.paused}}]),n}(C),se=n(54),ce=n.n(se),ue=n(53),de=n(84),le=n(85),pe=n(86),fe=function(e){h(n,e);var t=R(n);function n(e,r){u(this,n);var i=t.call(this);Object(p.a)(c(i),"options",void 0),Object(p.a)(c(i),"controller",void 0),Object(p.a)(c(i),"vx",void 0),Object(p.a)(c(i),"decodeType",void 0),Object(p.a)(c(i),"videoEle",void 0),Object(p.a)(c(i),"canvasEle",void 0),Object(p.a)(c(i),"state",void 0),Object(p.a)(c(i),"tracker",void 0),Object(p.a)(c(i),"init",(function(){i.start(),i.bindVideoxEvent(),i.tracker=new oe(X,null,{onTrack:i.handleTrack,onError:i.handleError,trackOptions:i.options.track})})),Object(p.a)(c(i),"start",(function(){var e=i.options||{},t=e.src,n=e.container,r=e.videoEleOptions,o=void 0===r?{}:r,a=e.mode,s=e.videoxOptions;if(n){var c=[],u=function(e){return e?/\.flv/i.test(e)?"flv":/\.m3u8/i.test(e)?"hls":/\.mp4/i.test(e)?"mp4":"":""}(t);"flv"===u&&c.push(new de.FLVParser),"hls"===u&&c.push(new le.HLSParser),"mp4"===u&&c.push(new pe.MP4Parser({progressive:!0}));var d=new ue.Demuxer({parsers:c});i.vx=new ce.a({container:n,src:t,controls:!P(null==s?void 0:s.controls)&&(null==s?void 0:s.controls),live:a==_.LIVE,muted:!!P(o.muted)||o.muted,autoplay:!0,loop:!!P(o.loop)||o.loop,poster:o.poster,demuxer:d,hardwareAcceleration:P(null==s?void 0:s.hardwareAcceleration)?"prefer-hardware":null==s?void 0:s.hardwareAcceleration,threads:!0,skipFrame:ce.a.DiscardType.NONREF,progressive:!0,preload:"auto",traceOptions:{disable:!0},trackOptions:{disable:!0}}),i.controller.emit("mount"),n&&n.classList.add("dove-video-videox"),i.isH265()&&(i.decodeType=E.H265)}})),Object(p.a)(c(i),"bindVideoxEvent",(function(){i.vx.addEventListener("loadstart",(function(){i.state.timeline.expose||(i.handleTrack(Z),i.state.timeline.expose=Date.now())})),i.vx.addEventListener("play",(function(){i.controller.emit("play")})),i.vx.addEventListener("pause",(function(){i.controller.emit("pause")})),i.vx.addEventListener("volumechange",(function(){i.controller.emit("volumechange")})),i.vx.addEventListener("timeupdate",x((function(e){i.controller.emit("timeupdate",e)}),1e3)),i.vx.addEventListener("canplay",(function(){i.controller.emit("canplay")})),i.vx.addEventListener("loadeddata",(function(){i.state.timeline.canplay||(i.state.timeline.canplay=Date.now(),i.handleTrack($,{withCanPlay:i.state.timeline.canplay?i.state.timeline.canplay-i.state.timeline.expose:0}),i.tracker.watchHeartBeat())})),i.vx.addEventListener("waiting",x((function(){i.state.abnormal.detected=!0,i.state.abnormal.count++,i.handleTrack(ee,i.state.abnormal)}),3e3)),i.vx.addEventListener("error",(function(e){i.handleError(e)}))}));var o=c(i);return Object(p.a)(c(i),"retry",B((function(){return F(this,(function(){return j.info("retry...",o.options),o.controller.emit("loading"),o.vx.load(),[2]}))}))),Object(p.a)(c(i),"destroy",(function(){var e,t;j.info("videox destroy",i.options),i.vx.destroy(),null===(e=i.options)||void 0===e||null===(t=e.container)||void 0===t||t.classList.remove("dove-video-videox")})),Object(p.a)(c(i),"play",(function(){i.vx.play()})),Object(p.a)(c(i),"pause",(function(){i.vx.pause()})),Object(p.a)(c(i),"getVideoEle",(function(){var e;i.videoEle||(i.videoEle=null===(e=i.options.container)||void 0===e?void 0:e.querySelector("video"));return i.videoEle})),Object(p.a)(c(i),"getCanvasEle",(function(){var e;i.canvasEle||(i.canvasEle=null===(e=i.options.container)||void 0===e?void 0:e.querySelector("canvas"));return i.canvasEle})),Object(p.a)(c(i),"isH265",(function(){return i.getVideoEle()&&!!i.getCanvasEle()})),Object(p.a)(c(i),"handleTrack",(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(S._)(Object(b._)({},i.options),{container:null===(t=i.options.container)||void 0===t?void 0:t.nodeName,player:X});i.controller.emit("track",{trackKey:e,commonParams:r,trackParams:n,ts:Date.now()})})),Object(p.a)(c(i),"handleError",(function(e){i.controller.handleError(e),i.handleTrack(te,e),i.tracker.clearHeartBeat()})),i.options=e,i.controller=r,i.decodeType=E.H264,i.state={timeline:{expose:0,canplay:0},abnormal:{detected:!1,count:0}},i.init(),i}return l(n,[{key:"muted",get:function(){return this.vx.muted},set:function(e){this.vx.muted=e}},{key:"duration",get:function(){return this.vx.duration}},{key:"currentTime",get:function(){return this.vx.currentTime},set:function(e){this.vx.currentTime=e}},{key:"src",get:function(){return this.options.src},set:function(){j.info("You should not set src, please use new Dove instead")}},{key:"videoHeight",get:function(){return this.vx.videoHeight}},{key:"videoWidth",get:function(){return this.vx.videoWidth}},{key:"volume",get:function(){return this.vx.volume}},{key:"videoCodec",get:function(){return this.vx.videoCodec}},{key:"audioCodec",get:function(){return this.vx.audioCodec}},{key:"playbackRate",get:function(){return this.vx.playbackRate},set:function(e){this.vx.playbackRate=e}},{key:"paused",get:function(){return this.vx.paused}}]),n}(C),he=fe,_e=fe,ve=fe,me=n(56),ge=n.n(me),Ee=Math.floor(1e9*Math.random()),ye=function(e){h(n,e);var t=R(n);function n(e,r){u(this,n);var i=t.call(this);Object(p.a)(c(i),"options",void 0),Object(p.a)(c(i),"controller",void 0),Object(p.a)(c(i),"heartBeatTracker",void 0),Object(p.a)(c(i),"uid",void 0),Object(p.a)(c(i),"client",void 0),Object(p.a)(c(i),"hostUser",void 0),Object(p.a)(c(i),"containerEle",void 0),Object(p.a)(c(i),"videoEle",void 0),Object(p.a)(c(i),"timeline",void 0),Object(p.a)(c(i),"timer",void 0);var o=c(i);Object(p.a)(c(i),"init",B((function(){return F(this,(function(){return o.isInvalid()||(o.transCode(),o.container(),o.start()),[2]}))}))),Object(p.a)(c(i),"container",(function(){var e=i.options,t=e.container,n=(e.videoEleOptions,t);"string"==typeof t&&(n=document.querySelector(t)),n&&n.classList.add("dove-video-agora"),i.containerEle=n,i.heartBeatTracker=new oe(Q,null,{onTrack:i.handleTrack,onError:i.handleError,trackOptions:i.options.track}),i.controller.emit("mount")}));var a=c(i);Object(p.a)(c(i),"start",B((function(){var e,t,n;return F(this,(function(){try{if(!(n=a.options.agora))return[2];(null===(e=n.options)||void 0===e?void 0:e.preClient)&&(null===(t=n.options)||void 0===t?void 0:t.preHostUser)?(a.client=n.options.preClient,a.hostUser=n.options.preHostUser,a.recrodExpose(),a.watchAndRecrodFirstFrame(),a.watch(),a.playVideo(),a.playAudio()):(a.client=ge.a.createClient({codec:"h264",mode:"live",role:"audience"}),a.recrodExpose(),a.subscribeAndPlay(),a.watch(),a.join())}catch(e){a.handleError(new O(e.code||g.EXEC_ERROR,e.message))}return[2]}))}))),Object(p.a)(c(i),"subscribeAndPlay",(function(){var e,t=c(i);i.client.on("user-published",(e=B((function(e,n){var r;return F(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t.hostUser=e,[4,t.client.subscribe(e,n)];case 1:return i.sent(),"video"===n&&(j.info("agora video subscribe success",t.options),t.watchAndRecrodFirstFrame(),t.playVideo()),"audio"===n&&(j.info("agora audio subscribe success",t.options),t.playAudio()),[3,3];case 2:return r=i.sent(),t.handleError(new O(r.code||g.EXEC_ERROR,r.message)),[3,3];case 3:return[2]}}))})),function(){return e.apply(this,arguments)}))})),Object(p.a)(c(i),"watch",(function(){i.client.on("user-unpublished",(function(e,t){j.info("user-unpublished",t,e),"video"===t&&i.abortHandler()})),i.client.on("user-left",(function(e,t){j.info("user-left",t),t!==y.QUIT&&i.handleError(new O(g.AGORA_STREAM_ABORTED,t))})),i.timer.canplayTimer=setTimeout((function(){i.timeline.canplay||i.handleError(new O(g.AGORA_HOST_NO_STREAM,g.AGORA_HOST_NO_STREAM))}),3e4),i.client.on("connection-state-change",(function(e,t){j.info("connection-state-change",e,t),"connected"===e&&j.info("channel connected",i.options),"disconnected"===e&&j.info("channel disconnected",i.options)})),i.client.on("exception",(function(e){console.error("agora exception",e),j.info("sdk exception",e.code,e.msg,e)})),i.client.on("stream-fallback",(function(){j.info("channel stream fallback",i.options)})),ge.a.onAutoplayFailed=function(){console.error("autoplay failed"),j.info("sdk exception")}})),Object(p.a)(c(i),"recrodExpose",(function(){var e,t;i.handleTrack(Z,{});var n,r=Date.now(),o=(i.options.track||{}).options,a=void 0===o?{}:o;(null===(e=a.firstframe)||void 0===e?void 0:e.enable)&&(null===(t=a.firstframe)||void 0===t?void 0:t.startTimestamp)?i.timeline.exposeBiz=null===(n=a.firstframe)||void 0===n?void 0:n.startTimestamp:i.timeline.exposeBiz=r;i.timeline.expose=r,i.controller.emit("loading")})),Object(p.a)(c(i),"watchAndRecrodFirstFrame",(function(){var e;null===(e=i.hostUser.videoTrack)||void 0===e||e.on("first-frame-decoded",(function(){if(!i.timeline.canplay){i.controller.emit("canplay"),i.videoEle=i.getVideoEle(),i.timeline.canplay=Date.now();var e={withCanplay:L(i.timeline.canplay,i.timeline.exposeBiz),withCanplaySdk:L(i.timeline.canplay,i.timeline.expose)};j.info("firstFrameTime",e),i.handleTrack($,e),i.heartBeatTracker.watchHeartBeat(),i.removeFirstFrameTimer(),i.controller.emit("play")}}))}));var s=c(i);Object(p.a)(c(i),"transCode",B((function(){var e,t,n,r,i,o,a,c,u,d;return F(this,(function(l){switch(l.label){case 0:if(e=s.options.agora,n=(t=e||{}).channel,r=t.appId,i=t.token,!n||-1===n.indexOf("_h264"))return[3,5];l.label=1;case 1:return l.trys.push([1,4,,5]),o=s.uid-1,a="https://api.agora.io/v1/projects/".concat(r,"/rtls/h265fallback/transcoders/").concat(n.replace("_h264",""),"?uid=").concat(o),[4,fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"agora token=".concat(i)}})];case 2:return[4,(c=l.sent()).json()];case 3:return c=l.sent(),u=c.status,c.message,"fail"==u?[2,Promise.reject(c)]:[2,c];case 4:return d=l.sent(),console.error("agora transcode",d),[2,Promise.reject(d)];case 5:return[2]}}))}))),Object(p.a)(c(i),"abortHandler",(function(){var e;1==(null===(e=i.hostUser)||void 0===e?void 0:e.uid)&&(i.controller.emit("loading"),i.timer.abortTimer=setTimeout((function(){var e,t;(null===(e=i.hostUser)||void 0===e||null===(t=e.videoTrack)||void 0===t?void 0:t.isPlaying)||i.handleError(new O(g.AGORA_STREAM_ABORTED))}),3e4))})),Object(p.a)(c(i),"join",(function(){var e=i.options.agora;e&&i.client.join(e.appId,e.channel,e.token,i.uid)})),Object(p.a)(c(i),"isInvalid",(function(){var e=i.options,t=e.agora,n=e.container;return!t||(!n||""===t.appId||""===t.channel||""===t.token)})),Object(p.a)(c(i),"play",(function(){i.playVideo(),i.playAudio(),i.controller.emit("play")})),Object(p.a)(c(i),"pause",(function(){i.pauseVideo(),i.pauseAudio(),i.controller.emit("pause")})),Object(p.a)(c(i),"playVideo",(function(){var e,t=i.options.container;i.hostUser.videoTrack&&(null===(e=i.hostUser.videoTrack)||void 0===e||e.play(t,{fit:"contain"}))})),Object(p.a)(c(i),"playAudio",(function(){var e;i.hostUser.audioTrack&&(null===(e=i.hostUser.audioTrack)||void 0===e||e.play())})),Object(p.a)(c(i),"pauseVideo",(function(){var e;i.hostUser.videoTrack&&(null===(e=i.hostUser.videoTrack)||void 0===e||e.stop())})),Object(p.a)(c(i),"pauseAudio",(function(){var e;i.hostUser.audioTrack&&(null===(e=i.hostUser.audioTrack)||void 0===e||e.stop())})),Object(p.a)(c(i),"removeFirstFrameTimer",(function(){i.timer.canplayTimer&&(clearTimeout(i.timer.canplayTimer),i.timer.canplayTimer=null)})),Object(p.a)(c(i),"removeAbortTimer",(function(){i.timer.abortTimer&&(clearTimeout(i.timer.abortTimer),i.timer.abortTimer=null)}));var d=c(i);return Object(p.a)(c(i),"retry",B((function(){return F(this,(function(){return j.info("retry...",d.options),d.handleTrack(ne,{}),d.destroy(),d.start(),[2]}))}))),Object(p.a)(c(i),"destroy",(function(){i.controller.emit("unmount"),i.client.leave(),i.removeFirstFrameTimer(),i.removeAbortTimer(),i.removePreAgora(),i.initialState()})),Object(p.a)(c(i),"removePreAgora",(function(){i.options.agora&&i.options.agora.options&&i.options.agora.options.preClient&&i.options.agora.options.preHostUser&&(i.options.agora.options.preClient.leave(),i.options.agora.options.preClient=null,i.options.agora.options.preHostUser=null)})),Object(p.a)(c(i),"getVideoEle",(function(){var e;return null===(e=i.containerEle)||void 0===e?void 0:e.querySelector("video")})),Object(p.a)(c(i),"initialState",(function(){var e=i.options.agora;i.timeline={},i.timer={},i.uid=(null==e?void 0:e.uid)||Ee})),Object(p.a)(c(i),"handleTrack",(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(b._)({},i.options.agora);r&&(delete r.appId,delete r.token,r.uid=i.uid);var o=Object(S._)(Object(b._)({},Object(S._)(Object(b._)({},i.options),{agora:r})),{container:null===(t=i.options.container)||void 0===t?void 0:t.nodeName,player:Q});i.controller.emit("track",{trackKey:e,commonParams:o,trackParams:n,ts:Date.now()})})),Object(p.a)(c(i),"handleError",(function(e){i.controller.handleError(e),i.handleTrack(te,e),i.heartBeatTracker.clearHeartBeat(),i.destroy()})),i.options=e,i.controller=r,i.initialState(),i.init(),i}return l(n,[{key:"muted",get:function(){var e;return!(null===(e=this.hostUser.audioTrack)||void 0===e?void 0:e.isPlaying)},set:function(e){e?this.pauseAudio():this.playAudio()}},{key:"duration",get:function(){var e;return null===(e=this.videoEle)||void 0===e?void 0:e.duration}},{key:"currentTime",get:function(){var e;return null===(e=this.videoEle)||void 0===e?void 0:e.currentTime},set:function(e){this.videoEle&&(this.videoEle.currentTime=e)}},{key:"src",get:function(){var e;return(null===(e=this.options.agora)||void 0===e?void 0:e.channel)||""},set:function(){j.info("You should not set src, the following is",this.options.agora)}},{key:"videoHeight",get:function(){var e;return null===(e=this.videoEle)||void 0===e?void 0:e.videoHeight}},{key:"videoWidth",get:function(){var e;return null===(e=this.videoEle)||void 0===e?void 0:e.videoWidth}},{key:"volume",get:function(){var e,t;return(null===(e=this.hostUser.audioTrack)||void 0===e?void 0:e.getVolumeLevel())||(null===(t=this.videoEle)||void 0===t?void 0:t.volume)}},{key:"videoCodec",get:function(){return"h264"}},{key:"audioCodec",get:function(){return"opus"}},{key:"playbackRate",get:function(){return this.videoEle.playbackRate},set:function(e){this.videoEle&&(this.videoEle.playbackRate=e)}},{key:"paused",get:function(){var e;return!(null===(e=this.hostUser.videoTrack)||void 0===e?void 0:e.isPlaying)}}]),n}(C),be=function(e){h(n,e);var t=R(n);function n(e){u(this,n);var r,i,o=t.call(this);return Object(p.a)(c(o),"options",{src:"",container:null,mode:_.LIVE,track:{enable:!0,params:{}},trace:{enable:!1,params:{}},debug:!1}),Object(p.a)(c(o),"player",void 0),Object(p.a)(c(o),"playId",void 0),Object(p.a)(c(o),"start",(function(){var e=o.options,t=e.mode,n=e.src,r=Object(S._)(Object(b._)({},o.options),{playId:o.playId});j.info("Dove Mode",t),t===_.LIVE?!function(e){return"RTS"===k(e)}(n)?N(n)?(j.info("HLS init",o.options),o.player=new he(r,c(o))):!function(e){return"FLV"===k(e)}(n)?!function(e){return"MP4"===k(e)}(n)?o.handleError(new O(m.NOT_SUPPORT,"The current protocol is not supported!",n)):(j.info("Mp4 init",o.options),o.player=new ve(r,c(o))):(j.info("FLV init",o.options),o.player=new _e(r,c(o))):(j.info("RTS init",o.options),o.player=new ae(r,c(o))):t===_.RTC?o.player=new ye(r,c(o)):N(n)?(j.info("HLS init",o.options),o.player=new he(r,c(o))):(j.info("Mp4 init",o.options),o.player=new ve(r,c(o)))})),Object(p.a)(c(o),"valid",(function(){var e=o.options,t=e.src,n=e.container,r=e.scene,i=e.mode,a=e.agora;return i!==_.RTC||n&&(null==a?void 0:a.appId)&&(null==a?void 0:a.token)&&(null==a?void 0:a.channel)?t?n?!!r||(o.handleError(new O(v.INVALID_OPTIONS,"option [scene] is required!",o.options)),!1):(o.handleError(new O(v.INVALID_OPTIONS,"option [container] is required!",o.options)),!1):(o.handleError(new O(v.INVALID_OPTIONS,"option [src] is required!",o.options)),!1):(o.handleError(new O(v.INVALID_OPTIONS,"option [agora | container] is required!",o.options)),!1)})),Object(p.a)(c(o),"handleError",(function(e){o.emit("error",e),j.error(e)})),Object(p.a)(c(o),"retry",(function(){var e;null===(e=o.player)||void 0===e||e.retry()})),Object(p.a)(c(o),"destroy",(function(){o.player.destroy()})),Object(p.a)(c(o),"play",(function(){var e;null===(e=o.player)||void 0===e||e.play()})),Object(p.a)(c(o),"pause",(function(){var e;null===(e=o.player)||void 0===e||e.pause()})),Object(p.a)(c(o),"requestFullscreen",(function(){var e;(e=o.options.container).requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen()})),Object(p.a)(c(o),"exitFullscreen",(function(){var e;(e=document).exitFullscreen?e.exitFullscreen():e.webkitExitFullScreen?e.webkitExitFullScreen():e.mozExitFullScreen?e.mozExitFullScreen():e.msExitFullscreen()})),Object(p.a)(c(o),"requestPiP",(function(){o.emit("enterpip")})),Object(p.a)(c(o),"exitPiP",(function(){o.emit("exitpip")})),o.options=(r=o.options,i=e,Object(b._)({},r||{},i||{})),o.options.track||(o.options.track={enable:!0,params:{}}),o.options.track.options||(o.options.track.options={heartbeat:{enable:!0,interval:5e3}}),o.playId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),window.__dove=c(o),o.valid(),o}return l(n,[{key:"muted",get:function(){return this.player.muted},set:function(e){this.player.muted=e}},{key:"duration",get:function(){return this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime},set:function(e){this.emit("seeked"),this.player.currentTime=e}},{key:"playbackRate",get:function(){return this.player.playbackRate},set:function(e){this.player.playbackRate=e}},{key:"paused",get:function(){return this.player.paused}},{key:"volume",get:function(){return this.player.volume}}]),n}(C);Object(p.a)(be,"version",A.version),window.DoveCore=be;var Se=be,Te={},we=["source","fallbackSource","onLoad","onError","style","resizeMode","loading"];function Re(){return(Re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ce=Object(r.forwardRef)((function(e,t){var n=e.source,i=e.fallbackSource,o=e.onLoad,a=e.onError,s=e.style,c=e.resizeMode,u=e.loading,d=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,we);n=n||Te,i=i||Te;var l=d,p=Object(r.useState)({}),f=p[0],h=p[1];l.onError=Object(r.useCallback)((function(e){void 0===f.uri&&h({uri:n.uri}),a&&a(e)}),[n.uri,a,f]),l.onLoad=Object(r.useCallback)((function(e){e&&e.success||e&&e.currentTarget&&e.currentTarget.naturalWidth>1&&e.currentTarget.naturalHeight>1?o&&o(e):(void 0===f.uri&&h({uri:n.uri}),a&&a(e))}),[o,a]),void 0!==f.uri&&(f.uri!==n.uri?f.uri=void 0:null!=i.uri&&(n=i));var _=n,v=_.width,m=_.height,g=_.uri;return l.src=g,l.style=Re({width:v,height:m},s),u&&(l.loading=u),(c=c||l.style.resizeMode)&&(l.style.objectFit=c),Object(r.createElement)("img",Re({},l,{ref:t}))})),Oe=(n(91),{icon:"https://gw.alicdn.com/tfs/TB1YXZgBoY1gK0jSZFMXXaWcVXa-12-12.png",desc:"Live",bg:"#FF6602",iconSize:6}),Ae=16,Ie=function(){var e=a.$i18n.get("live.living"),t=Oe,n=t.bg,i=t.icon,o=t.desc,s=Ae+"px";return Object(r.createElement)("div",{className:"status",style:{backgroundColor:""+n,height:s}},Object(r.createElement)(Ce,{source:{uri:i},style:{width:"6px"},className:"status-icon"}),Object(r.createElement)("span",{className:"status-desc"},e||o))},ke=(n(92),{color:"#04A0F1",bg:"#EBF5FF"}),Ne=function(e){var t=(e||{}).tag,n=ke,i=n.color,o=n.bg;return t&&Object(r.createElement)("div",{className:"tag-wrapper"},Object(r.createElement)("div",{className:"tag-wrapper-item",style:{color:i,backgroundColor:o}},Object(r.createElement)("span",{className:"item-text scale-point9"},t)))};var Pe=n(79),De=["className","style","numberOfLines","children","onPress","onClick"];function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Le=n.n(Pe).a;function Me(e){var t=Le.__cache||(Le.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=Le[r[0].trim()]:r.forEach((function(e){"object"==typeof Le[e.trim()]&&(i=Object.assign(i,Le[e.trim()]))})),t[n]=i),i}var Ue=function(e){return e.displayName="ScrollView",e}(Object(r.forwardRef)((function(e,t){var n=e.className,i=e.style,o=e.numberOfLines,a=e.children,s=e.onPress,c=e.onClick,u=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,De),d="string"==typeof o?parseInt(o,10):o,l="";null!=a&&(l=Array.isArray(a)?a.join(""):a.toString());var p=["rax-text-v2",n];d&&(p.push("rax-text-v2--overflow-hidden"),1===d?p.push("rax-text-v2--singleline"):p.push("rax-text-v2--multiline"));var f=d>1?d:void 0;return Object(r.createElement)("span",xe({},u,{ref:t,className:p.join(" "),style:Object.assign({},Me(p.join(" ")),xe({},i,{WebkitLineClamp:f,lineClamp:f})),onClick:c||s}),l)}))),je=(n(93),function(e){var t=(e||{}).name;return t&&Object(r.createElement)(Ue,{className:"live-name",numberOfLines:1},t)}),Ve=n(80),Be=n.n(Ve);n(94);function Fe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Fe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof l?t:l,o=Object.create(i.prototype),a=new T(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=y(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function l(){}function p(){}function f(){}var h={};s(h,i,(function(){return this}));var _=Object.getPrototypeOf,v=_&&_(_(w([])));v&&v!==t&&n.call(v,i)&&(h=v);var m=f.prototype=l.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var c=u(e[i],e,o);if("throw"!==c.type){var d=c.arg,l=d.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){d.value=e,a(d)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function w(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:R}}function R(){return{value:void 0,done:!0}}return p.prototype=f,s(m,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),s(m,a,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=w,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function We(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var He=n(95);a.$i18n.load(He);var ze=function(e){var t=(e||{}).liveInfo,n=t.title,i=t.tags;return Object(r.createElement)("div",{className:"livecard"},Object(r.createElement)("div",{className:"livecard-content"},Object(r.createElement)("div",{className:"livecard-content-status"},Object(r.createElement)(Ie,{liveInfo:t})),Object(r.createElement)("div",{className:"livecard-content-video"},Object(r.createElement)(Ke,Ge({liveInfo:t},e)))),(n||i)&&Object(r.createElement)("div",{className:"livecard-meta"},Object(r.createElement)("div",{className:"livecard-meta-left"},Object(r.createElement)("div",{className:"livecard-meta-name"},Object(r.createElement)(je,{name:n})),Object(r.createElement)("div",{className:"livecard-meta-tag"},Object(r.createElement)(Ne,{tag:i[0]}))),Object(r.createElement)("div",{className:"livecard-meta-right"},Object(r.createElement)("img",{src:Be.a}))))},Ke=function(e){var t=e.liveInfo,n=e.openLive,i=function(){var e,r=(e=Fe().mark((function e(){var r,i,a;return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.flvUrl,(i=document.querySelector(".rts-video-container"))&&r&&!window.__dove&&((a=new Se({mode:1,container:i,src:Object(o.d)(r),scene:{fromPage:"pcsite",bizType:"pcsite"},debug:!1,track:{enable:!0}})).on("canplay",(function(){setTimeout((function(){o.a.expose("expose"),n()}),1500)})),a.on("error",(function(e){10201!==Ge({},e,{code:e.code||e.errorCode}).code&&(a&&a.destroy(),o.a.expose("dove_failed",e))})),a.start());case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){We(o,r,i,a,s,"next",e)}function s(e){We(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.useEffect)((function(){i()}),[t]),Object(r.createElement)("div",{className:"rts-video-container"})};n(215);function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}o.a.init();var qe=function(e){void 0===e&&(e={});var t=Object(r.useState)(!1),n=t[0],i=t[1],c=Object(r.useState)({}),u=c[0],d=c[1],l=Object(r.useRef)({});l.current=u;var p=Object(r.useRef)();p.current=n;var f=function(){try{var e=(function(){var e=Object(o.b)(),t=document.getElementById(e);if(t&&t.dataset)return t.dataset}()||{}).companyid;e&&Object(a.$fetch)({apiConfig:{api:"mtop.alibaba.intl.live.getSmallWinLiveInfo",v:"1.0",data:{companyId:e,statusList:"[1]",endpoint:"pc",referrer:"pc"},ecode:0},disableCache:!0,onSuccess:function(e){var t=(a.$helper.xPath.get(e,"data.value")||{})[1];t&&(d(t),h(t))},onError:function(e){o.a.expose("api_failed",e)}})}catch(e){!function(e){console.error("live window failed: ",e)}(e)}},h=function(){var t=e.rootEle;t&&(t.style.display="block",t.addEventListener("click",(function(){p.current?v():_()})),setTimeout((function(){v()}),12*s.b))},_=function(){var e,t;document.getElementById("rts-player")||(u.refreshToggle=!u.refreshToggle,d(Ye({},l.current,{refreshToggle:!l.current.refreshToggle}))),i(!0),null==(e=window)||null==(t=e.__dove)||t.play()},v=function(){i(!1)};return Object(r.useEffect)((function(){f()}),[]),Object(r.createElement)("div",{className:"live-portal-container "+(n?"fadeIn":"fadeOut")},Object(r.createElement)(ze,{liveInfo:u,openLive:_}),Object(r.createElement)("div",{className:"live-portal-container-mask",onClick:function(){var e=u.uuid;window.open("https://watch.alibaba.com/v/"+e+"?referrer=pcsite","_blank"),v(),o.a.click("click")}}),Object(r.createElement)("img",{className:"live-portal-container-close",src:"https://img.alicdn.com/tfs/TB1X9FKk8Bh1e4jSZFhXXcC9VXa-20-20.svg",onClick:v}))};if(Object(o.c)()){var Je=document.getElementById("root");Je&&(Je.setAttribute("data-siteid","5008178995"),Je.setAttribute("data-pageid","5117559297"),Je.setAttribute("data-bizid","1736194721"))}var Xe=document.getElementById(Object(o.b)());Object(r.render)(Object(r.createElement)(qe,{rootEle:Xe}),Xe,{driver:i.a})},function(e,t,n){"use strict";n.r(t),n.d(t,"ContainerType",(function(){return S})),n.d(t,"ExpandEventName",(function(){return v})),n.d(t,"GM_KEY",(function(){return H})),n.d(t,"HEARTBEAT_INTERVAL",(function(){return O})),n.d(t,"LOG_KEY",(function(){return G})),n.d(t,"MILLISECOND_OF_A_SECOND",(function(){return C})),n.d(t,"NODES_SEPARATOR",(function(){return k})),n.d(t,"PLAY_STATUS",(function(){return N})),n.d(t,"Scenario",(function(){return T})),n.d(t,"UNKNOWN",(function(){return A})),n.d(t,"VIDEO_NAME",(function(){return I})),n.d(t,"VideoEventName",(function(){return _})),n.d(t,"VideoMethodMap",(function(){return w})),n.d(t,"VideoPropertyMap",(function(){return R})),n.d(t,"VideoTracker",(function(){return z}));var r=n(55),i=n.n(r),o=n(82),a=n.n(o),s=n(12),c=n.n(s),u=n(36),d=n(13);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=function(e){var t="en";switch(e.toLowerCase()){case"zh_cn":case"zh-hans":case"zh-cn":case"chinese":t="zh_CN";break;case"zh_tw":case"zh-hant":case"zh-hk":t="zh_TW";break;case"en":case"english":case"en-us":t="en";break;default:t="en"}return t},f=function(e){return l({},{pixelRatio:1,screenWidth:0,screenHeight:0,windowWidth:0,windowHeight:0,language:"",version:"",platform:""},e,{language:e.language?p(e.language):""})};var h,_,v,m=(h=function(){return{pixelRatio:window.devicePixelRatio,screenWidth:window.document.documentElement.clientWidth,screenHeight:window.document.documentElement.clientHeight,windowWidth:window.innerWidth,windowHeight:window.innerHeight,language:navigator.language,version:navigator.appVersion,platform:(i=navigator.platform,i?/(iphone|ipod|ipad)/.test(null==(e=navigator)||null==(t=e.userAgent)?void 0:t.toLowerCase())?"iOS":/android/.test(null==(n=navigator)||null==(r=n.userAgent)?void 0:r.toLowerCase())?"Android":i:"")};var e,t,n,r,i},function(){var e=h();return f(e)}),g=n(83),E=n(37);function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e.canplaythrough="canplaythrough",e.ended="ended",e.error="error",e.fullscreenchange="fullscreenchange",e.loadstart="loadstart",e.loadedmetadata="loadedmetadata",e.loadeddata="loadeddata",e.pause="pause",e.play="play",e.stalled="stalled",e.suspend="suspend",e.timeupdate="timeupdate",e.waiting="waiting",e.playing="playing",e.ratechange="ratechange",e.seeked="seeked",e.seeking="seeking",e.volumechange="volumechange",e.canplay="canplay",e.durationchange="durationchange",e.enterpictureinpicture="enterpictureinpicture",e.leavepictureinpicture="leavepictureinpicture"}(_||(_={})),function(e){e.init="init",e.ended="ended",e.seek="seek",e.lag="lag",e.show="show",e.hide="hide",e.watch="watch",e.firstplayed="firstplayed"}(v||(v={}));var S,T,w={addEventListener:"addEventListener",removeEventListener:"removeEventListener",getBoundingClientRect:"getBoundingClientRect"},R={currentSrc:"currentSrc",src:"src",videoWidth:"videoWidth",videoHeight:"videoHeight",duration:"duration",currentTime:"currentTime",networkState:"networkState",error_code:"error.code",videoCodec:"videoCodec",audioCodec:"audioCodec",formatType:"formatType",downloadByteLength:"downloadByteLength",rendererType:"rendererType"},C=1e3,O=30*C,A="-",I="HTMLVideoElement",k="_",N=[A,_.canplay,_.canplaythrough,_.ended,_.error,_.loadstart,_.loadedmetadata,_.loadeddata,_.loadstart,_.play,_.pause,_.playing,_.seeked,_.seeking,_.stalled,_.suspend,_.waiting,v.init,v.ended];function P(){var e=function(){if(d.b){var e,t=window.navigator,n=new u.UAParser,r=n.getDevice(),i=n.getCPU();return{uuid:"",model:r.model||A,architecture:i.architecture||A,hardwareConcurrency:t.hardwareConcurrency,deviceType:r.type||A,deviceMemory:t.deviceMemory,isHevcSupported:null==(e=window.MediaSource)?void 0:e.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"')}}return d.a?{uuid:"",model:m().model,architecture:A,hardwareConcurrency:NaN,deviceType:"mobile",deviceMemory:NaN}:d.c?{uuid:"",model:A,architecture:A,hardwareConcurrency:NaN,deviceType:"mobile",deviceMemory:NaN}:{uuid:"",model:A,architecture:A,hardwareConcurrency:NaN,deviceType:A,deviceMemory:NaN}}(),t=y({},e,{deviceModel:e.model,deviceUuid:e.uuid});return delete t.model,delete t.uuid,t}function D(){return function(){if(d.b){var e=(new u.UAParser).getOS();return{osType:e.name||A,osVersion:e.version||A}}if(d.a){var t=m();return{osType:t.platform,osVersion:t.system}}return{osType:A,osVersion:A}}()}function x(){return function(){if(d.b){var e=(new u.UAParser).getBrowser();return{appName:e.name||A,appVersion:e.version||A,containerType:S.Webview}}if(d.a){var t=m();return{appName:t.app,appVersion:t.version,containerType:S.MiniApp}}return d.c?{appName:A,appVersion:A,containerType:S.Weex}:{appName:A,appVersion:A,containerType:S.Unknown}}()}!function(e){e.Webview="Webview",e.Windvane="Windvane",e.MiniApp="MiniApp",e.Weex="Weex",e.Unknown="Unknown"}(S||(S={})),function(e){e[e.live=1]="live",e[e.vod=2]="vod"}(T||(T={}));var L=0;function M(){return d.b?Object(g.v4)():(L++,"uuid_"+Date.now()+"_"+L)}function U(e){var t=function(e){return{token:M(),name:(null==e?void 0:e.name)||I,version:(null==e?void 0:e.version)||A,coreName:(null==e?void 0:e.coreName)||A,coreVersion:(null==e?void 0:e.coreVersion)||A,trackerVersion:"0.3.7"}}(e);return{playerToken:t.token,playerName:t.name,playerVersion:t.version,coreName:t.coreName,coreVersion:t.coreVersion,trackerVersion:t.trackerVersion}}function j(e,t){var n=c()(e,t);if(n){var r=String(t).split("."),i=e;return r.length>1&&(r.pop(),i=c()(e,r.join("."))),n.bind(i)}}var V=function(e){var t,n;function r(){var t=e.apply(this,arguments)||this;return t.startTimestamp=0,t.endTimestamp=0,t.started=!1,t.duration=0,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,b(t,n);var i=r.prototype;return i.start=function(e){return void 0===e&&(e=!0),!(!e&&this.started)&&(this.started=!0,this.startTimestamp=Date.now(),!0)},i.end=function(){return!!this.started&&(this.started=!1,this.endTimestamp=Date.now(),this.duration=this.endTimestamp-this.startTimestamp,this.emit("end"),!0)},i.reset=function(){this.started=!1,this.startTimestamp=0,this.endTimestamp=0,this.duration=0},i.toJSON=function(){return{startTimestamp:this.startTimestamp,endTimestamp:this.endTimestamp,continueDuration:this.duration}},r}(r.EventEmitter),B=function(){function e(){}var t=e.prototype;return t.changeStaticParams=function(e){Object.assign(this,e)},t.changeDynamicParams=function(e){Object.assign(this,e)},t.clearSystemRecord=function(){this.osType=void 0,this.osVersion=void 0},t.clearDeviceRecord=function(){this.deviceUuid=void 0,this.deviceModel=void 0,this.hardwareConcurrency=void 0,this.deviceType=void 0,this.deviceMemory=void 0,this.architecture=void 0},t.clearAgentRecord=function(){this.appName=void 0,this.appVersion=void 0,this.containerType=void 0},t.clearNetworkRecord=function(){this.networkType=void 0,this.effectiveType=void 0,this.downlink=void 0,this.rtt=void 0,this.clientIP=void 0},t.clearPlayerRecord=function(){this.playerToken=void 0,this.playerName=void 0,this.playerVersion=void 0,this.coreName=void 0,this.coreVersion=void 0},t.clearSourceRecord=function(){this.loadToken=void 0,this.url=void 0,this.duration=void 0,this.width=void 0,this.height=void 0,this.scenario=void 0,this.videoCodec=void 0,this.audioCodec=void 0,this.formartType=void 0,this.ext=void 0,this.bitrate=void 0,this.quality=void 0},t.clearPlayRecord=function(){this.playToken=void 0,this.currentTime=void 0,this.isFullscreen=void 0,this.isVisible=void 0,this.playStatus=void 0,this.networkState=void 0},t.clearEventRecord=function(){this.eventName=void 0,this.subType=void 0},t.clearBusinessRecord=function(){this.businessToken=void 0},t.clearLagRecord=function(){this.subType=void 0},t.clearExtraRecord=function(){this.extra=void 0},t.clearStaticRecord=function(){this.clearSystemRecord(),this.clearDeviceRecord(),this.clearAgentRecord(),this.clearPlayerRecord(),this.clearBusinessRecord(),this.clearExtraRecord()},t.clearDynamicRecord=function(){this.clearNetworkRecord(),this.clearSourceRecord(),this.clearPlayRecord(),this.clearEventRecord(),this.clearLagRecord()},e}();function F(){var e=function(){if(d.b){var e=window.navigator.connection;return{type:(null==e?void 0:e.type)||A,effectiveType:(null==e?void 0:e.effectiveType)||A,downlink:(null==e?void 0:e.downlink)||A,rtt:(null==e?void 0:e.rtt)||A,clientIP:""}}if(d.c){var t=weex.requireModule("connection");return{type:t.getType(),effectiveType:t.getNetworkType(),downlink:t.getDownlinkMax(),rtt:NaN,clientIP:""}}return{type:A,effectiveType:A,downlink:NaN,rtt:NaN,clientIP:""}}(),t=y({},e,{networkType:e.type});return delete t.type,t}var W=["extra"],G="/amedia.videox.record",H="OTHER",z=function(){function e(e){this.playerMap=new Map,this.logkey=G,this.gmkey=H,this.businessToken=A,null!=e&&e.businessToken&&(this.businessToken=e.businessToken),null!=e&&e.extraParams&&(this.extraParams=e.extraParams),null!=e&&e.beforeSend&&(this.beforeSend=e.beforeSend),null!=e&&e.logkey&&(this.logkey=e.logkey),null!=e&&e.gmkey&&(this.gmkey=e.gmkey),this.defaultParams=y({},P(),x(),D())}var t=e.prototype;return t.send=function(e){var t,n,r=this.beforeSend||this.transformParams,i=null==r?void 0:r.call(this,e),o=(t=i||e,n={},Object.keys(t).forEach((function(e){null!=t[e]&&""!==t[e]&&(n[e]=t[e])})),n);null==E.aplus_universal||null==E.aplus_universal.record||E.aplus_universal.record(this.logkey,this.gmkey,o)},t.start=function(e,t){var n=this;if(!this.playerMap.has(e)){var r=Object.assign({},_,null==t?void 0:t.eventNameMap),o=Object.assign({},w,null==t?void 0:t.methodMap),s=Object.assign({},R,null==t?void 0:t.propertyMap),u=new B,d=new i.a,l=[];u.changeStaticParams(U(e)),u.changeStaticParams(this.defaultParams),u.changeStaticParams({businessToken:this.businessToken,extra:this.extraParams?JSON.stringify(this.extraParams):this.extraParams});var p={subType:""},f={firstFrameDuration:0,metadataDuration:0,firstRenderDuration:0,lagDuration:0,lagCount:0,seekCount:0,seekDuration:0,viewDuration:0,watchDuration:0,displayDuration:0,loopCount:0,statusNodes:""},h=new V,m=new V,g=new V,E=new V,b=new V,S=new V,C=new V,O=new V,I=[h,m,g,E,b,S,C,O],k=!0,N=!0,P=!1,D=j(e,o.addEventListener),x=function(t,r,i,o){void 0===o&&(o=!0);var a=o?function(){u.changeDynamicParams(F());var t={},o=i(u);u.changeDynamicParams({currentTime:c()(e,s.currentTime),eventName:r,timestamp:Date.now()}),o?Array.isArray(o)?o.forEach((function(e){return Object.assign(t,u,e)})):Object.assign(t,u,o):t=y({},u),n.send(t)}:i;l.push({eventName:r,callback:a}),t(r,a)},L=function(e,t,n){void 0===n&&(n=!0),x(D,e,t,n)};L(r.loadstart,(function(){k?k=!1:d.emit("ended"),u.clearDynamicRecord();var t=c()(e,s.currentSrc)||c()(e,s.src)||"",n=t.split("?")[0]||"";u.changeDynamicParams({loadToken:M(),url:t,ext:n.split(".").pop()||""}),N=!0,O.start(),C.start()})),L(r.play,(function(){u.changeDynamicParams({playToken:M()}),b.start(),m.start(!1),q()&&S.start()})),L(r.pause,(function(){return b.end(),S.end(),b.toJSON()})),L(r.timeupdate,(function(){m.end()}),!1),L(r.loadedmetadata,(function(){return O.end(),u.changeDynamicParams({width:c()(e,s.videoWidth),height:c()(e,s.videoHeight),duration:c()(e,s.duration),videoCodec:c()(e,s.videoCodec,A),audioCodec:c()(e,s.audioCodec,A),formatType:c()(e,s.formatType,A),scenario:e.duration===1/0?T.live:T.vod,rendererType:c()(e,s.rendererType,A)}),O.toJSON()})),L(r.loadeddata,(function(){return C.end(),C.toJSON()})),L(r.waiting,(function(){var e=P?"seek":N?"loadstart":"";return p.subType=e,e||h.start(),{subType:e}})),L(r.playing,(function(){h.end()})),L(r.seeking,(function(){E.start(),P=!0})),L(r.seeked,(function(){P=!1}),!1),L(r.canplay,(function(){N=!1,E.end()}),!1),L(r.ended,(function(){f.loopCount+=1,d.emit(v.ended)}),!1),L(r.fullscreenchange,(function(){u.changeDynamicParams({isFullscreen:Number(!u.isFullscreen)})})),L(r.error,(function(){var t,n=e.error;if(n){var r=null==(t=n.origin)?void 0:t.stack;return{errorCode:n.code,errorMessage:n.message,errorStack:"string"==typeof r?r.replace(n.message,""):void 0}}})),m.on("end",(function(){d.emit(v.firstplayed)})),b.on("end",(function(){f.viewDuration+=b.duration})),O.on("end",(function(){f.metadataDuration=O.duration})),C.on("end",(function(){f.firstFrameDuration=C.duration})),g.on("end",(function(){f.displayDuration+=g.duration,d.emit(v.hide)})),S.on("end",(function(){f.watchDuration+=S.duration,d.emit(v.watch)})),E.on("end",(function(){f.seekCount++,f.lagDuration+=E.duration,d.emit(v.seek)})),h.on("end",(function(){f.lagCount++,f.lagDuration+=h.duration,d.emit(v.lag)}));var W=d.on.bind(d),G=function(e,t,n){x(W,e,t,n)};G(v.init,(function(){})),G(v.firstplayed,(function(){return m.toJSON()})),G(v.show,(function(){u.changeDynamicParams({isVisible:1}),g.start()})),G(v.hide,(function(){return u.changeDynamicParams({isVisible:0}),g.end()&&S.end(),g.toJSON()})),G(v.watch,(function(){return S.toJSON()})),G(v.lag,(function(){return[h.toJSON(),p]})),G(v.seek,(function(){return E.toJSON()})),G(v.ended,(function(){return k=!0,f})),d.emit(v.init);var H=function(){d.emit(v.ended)},z=function(){if("hidden"===window.document.visibilityState)d.emit(v.hide);else{var e=q();d.emit(e?v.show:v.hide)}},K=a()((function(){var e=q();Number(e)!==u.isVisible&&d.emit(e?v.show:v.hide)}),300);window.addEventListener("unload",H),window.document.addEventListener("visibilitychange",z,!1),window.document.addEventListener("scroll",K,!1),q()&&d.emit(v.show);var Y=j(e,o.removeEventListener);this.playerMap.set(e,(function(){I.forEach((function(e){return e.removeAllListeners()})),window.removeEventListener("unload",H,!1),window.document.removeEventListener("visibilitychange",z,!1),window.document.removeEventListener("scroll",K,!1),d&&d.removeAllListeners(),l.forEach((function(e){Y(e.eventName,e.callback)}))}))}function q(){var t,n,r,i,a={left:0,top:0,right:window.innerWidth,bottom:window.innerHeight},s=function(e,t){var n=j(e,t.getBoundingClientRect);return"function"==typeof n?n():{left:NaN,top:NaN,right:NaN,bottom:NaN}}(e,o);return t=a,r=(n=s).right>t.left&&n.left<t.right,i=n.bottom>t.top&&n.top<t.bottom,r&&i}},t.stop=function(e){var t=this.playerMap.get(e);t&&t()},t.report=function(e){var t=e.extra,n=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,W),r=this.extraParams?Object.assign({},this.extraParams,t):t;this.send(y({},this.defaultParams,F(),n,{businessToken:this.businessToken,timestamp:Date.now(),extra:r?JSON.stringify(r):r}))},e}();t.default=z}]);